var Une=Object.defineProperty;var zne=(e,t,n)=>t in e?Une(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Hne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var hv=(e,t,n)=>zne(e,typeof t!="symbol"?t+"":t,n);var kQe=Hne((pet,o$)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Rs(e,t){const n=new Set(e.split(","));return t?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Mt={},Qd=[],Jn=()=>{},$y=()=>!1,Vh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),n3=e=>e.startsWith("onUpdate:"),Ut=Object.assign,r3=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Vne=Object.prototype.hasOwnProperty,Lt=(e,t)=>Vne.call(e,t),Be=Array.isArray,e0=e=>wp(e)==="[object Map]",Wh=e=>wp(e)==="[object Set]",g$=e=>wp(e)==="[object Date]",Wne=e=>wp(e)==="[object RegExp]",it=e=>typeof e=="function",ft=e=>typeof e=="string",Ss=e=>typeof e=="symbol",Jt=e=>e!==null&&typeof e=="object",i3=e=>(Jt(e)||it(e))&&it(e.then)&&it(e.catch),W7=Object.prototype.toString,wp=e=>W7.call(e),jne=e=>wp(e).slice(8,-1),j7=e=>wp(e)==="[object Object]",s3=e=>ft(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Zc=Rs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gne=Rs("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Ub=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},qne=/-(\w)/g,gn=Ub(e=>e.replace(qne,(t,n)=>n?n.toUpperCase():"")),Xne=/\B([A-Z])/g,zi=Ub(e=>e.replace(Xne,"-$1").toLowerCase()),jh=Ub(e=>e.charAt(0).toUpperCase()+e.slice(1)),t0=Ub(e=>e?`on${jh(e)}`:""),mi=(e,t)=>!Object.is(e,t),n0=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},G7=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},b_=e=>{const t=parseFloat(e);return isNaN(t)?e:t},E_=e=>{const t=ft(e)?Number(e):NaN;return isNaN(t)?e:t};let m$;const q7=()=>m$||(m$=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Yne="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",Kne=Rs(Yne);function Pu(e){if(Be(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ft(r)?X7(r):Pu(r);if(i)for(const s in i)t[s]=i[s]}return t}else if(ft(e)||Jt(e))return e}const Jne=/;(?![^(]*\))/g,Zne=/:([^]+)/,Qne=/\/\*[^]*?\*\//g;function X7(e){const t={};return e.replace(Qne,"").split(Jne).forEach(n=>{if(n){const r=n.split(Zne);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Bu(e){let t="";if(ft(e))t=e;else if(Be(e))for(let n=0;n<e.length;n++){const r=Bu(e[n]);r&&(t+=r+" ")}else if(Jt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function ere(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ft(t)&&(e.class=Bu(t)),n&&(e.style=Pu(n)),e}const tre="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",nre="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",rre="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",ire="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",sre=Rs(tre),are=Rs(nre),ore=Rs(rre),lre=Rs(ire),cre="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ure=Rs(cre);function Y7(e){return!!e||e===""}function fre(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=uu(e[r],t[r]);return n}function uu(e,t){if(e===t)return!0;let n=g$(e),r=g$(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Ss(e),r=Ss(t),n||r)return e===t;if(n=Be(e),r=Be(t),n||r)return n&&r?fre(e,t):!1;if(n=Jt(e),r=Jt(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!uu(e[a],t[a]))return!1}}return String(e)===String(t)}function zb(e,t){return e.findIndex(n=>uu(n,t))}const K7=e=>!!(e&&e.__v_isRef===!0),Ua=e=>ft(e)?e:e==null?"":Be(e)||Jt(e)&&(e.toString===W7||!it(e.toString))?K7(e)?Ua(e.value):JSON.stringify(e,J7,2):String(e),J7=(e,t)=>K7(t)?J7(e,t.value):e0(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],s)=>(n[LS(r,s)+" =>"]=i,n),{})}:Wh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>LS(n))}:Ss(t)?LS(t):Jt(t)&&!Be(t)&&!j7(t)?String(t):t,LS=(e,t="")=>{var n;return Ss(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cs;class a3{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=cs,!t&&cs&&(this.index=(cs.scopes||(cs.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=cs;try{return cs=this,t()}finally{cs=n}}}on(){cs=this}off(){cs=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function o3(e){return new a3(e)}function Z7(e,t=cs){t&&t.active&&t.effects.push(e)}function l3(){return cs}function Q7(e){cs&&cs.cleanups.push(e)}let Wf;class b0{constructor(t,n,r,i){this.fn=t,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Z7(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Uu();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(hre(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),zu()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Qc,n=Wf;try{return Qc=!0,Wf=this,this._runnings++,x$(this),this.fn()}finally{v$(this),this._runnings--,Wf=n,Qc=t}}stop(){this.active&&(x$(this),v$(this),this.onStop&&this.onStop(),this.active=!1)}}function hre(e){return e.value}function x$(e){e._trackId++,e._depsLength=0}function v$(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)eB(e.deps[t],e);e.deps.length=e._depsLength}}function eB(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}function dre(e,t){e.effect instanceof b0&&(e=e.effect.fn);const n=new b0(e,Jn,()=>{n.dirty&&n.run()});t&&(Ut(n,t),t.scope&&Z7(n,t.scope)),(!t||!t.lazy)&&n.run();const r=n.run.bind(n);return r.effect=n,r}function pre(e){e.effect.stop()}let Qc=!0,qT=0;const tB=[];function Uu(){tB.push(Qc),Qc=!1}function zu(){const e=tB.pop();Qc=e===void 0?!0:e}function c3(){qT++}function u3(){for(qT--;!qT&&XT.length;)XT.shift()()}function nB(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&eB(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const XT=[];function rB(e,t,n){c3();for(const r of e.keys()){let i;r._dirtyLevel<t&&(i??(i=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(i??(i=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&XT.push(r.scheduler)))}u3()}const iB=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},w_=new WeakMap,jf=Symbol(""),YT=Symbol("");function Yi(e,t,n){if(Qc&&Wf){let r=w_.get(e);r||w_.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=iB(()=>r.delete(n))),nB(Wf,i)}}function Ml(e,t,n,r,i,s){const a=w_.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(n==="length"&&Be(e)){const l=Number(r);a.forEach((c,u)=>{(u==="length"||!Ss(u)&&u>=l)&&o.push(c)})}else switch(n!==void 0&&o.push(a.get(n)),t){case"add":Be(e)?s3(n)&&o.push(a.get("length")):(o.push(a.get(jf)),e0(e)&&o.push(a.get(YT)));break;case"delete":Be(e)||(o.push(a.get(jf)),e0(e)&&o.push(a.get(YT)));break;case"set":e0(e)&&o.push(a.get(jf));break}c3();for(const l of o)l&&rB(l,4);u3()}function gre(e,t){const n=w_.get(e);return n&&n.get(t)}const mre=Rs("__proto__,__v_isRef,__isVue"),sB=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ss)),y$=xre();function xre(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ct(this);for(let s=0,a=this.length;s<a;s++)Yi(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Ct)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Uu(),c3();const r=Ct(this)[t].apply(this,n);return u3(),zu(),r}}),e}function vre(e){Ss(e)||(e=String(e));const t=Ct(this);return Yi(t,"has",e),t.hasOwnProperty(e)}class aB{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?hB:fB:s?uB:cB).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=Be(t);if(!i){if(a&&Lt(y$,n))return Reflect.get(y$,n,r);if(n==="hasOwnProperty")return vre}const o=Reflect.get(t,n,r);return(Ss(n)?sB.has(n):mre(n))||(i||Yi(t,"get",n),s)?o:Dn(o)?a&&s3(n)?o:o.value:Jt(o)?i?h3(o):rs(o):o}}class oB extends aB{constructor(t=!1){super(!1,t)}set(t,n,r,i){let s=t[n];if(!this._isShallow){const l=fu(s);if(!fh(r)&&!fu(r)&&(s=Ct(s),r=Ct(r)),!Be(t)&&Dn(s)&&!Dn(r))return l?!1:(s.value=r,!0)}const a=Be(t)&&s3(n)?Number(n)<t.length:Lt(t,n),o=Reflect.set(t,n,r,i);return t===Ct(i)&&(a?mi(r,s)&&Ml(t,"set",n,r):Ml(t,"add",n,r)),o}deleteProperty(t,n){const r=Lt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&Ml(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!Ss(n)||!sB.has(n))&&Yi(t,"has",n),r}ownKeys(t){return Yi(t,"iterate",Be(t)?"length":jf),Reflect.ownKeys(t)}}class lB extends aB{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const yre=new oB,_re=new lB,bre=new oB(!0),Ere=new lB(!0),f3=e=>e,Hb=e=>Reflect.getPrototypeOf(e);function dv(e,t,n=!1,r=!1){e=e.__v_raw;const i=Ct(e),s=Ct(t);n||(mi(t,s)&&Yi(i,"get",t),Yi(i,"get",s));const{has:a}=Hb(i),o=r?f3:n?p3:Xm;if(a.call(i,t))return o(e.get(t));if(a.call(i,s))return o(e.get(s));e!==i&&e.get(t)}function pv(e,t=!1){const n=this.__v_raw,r=Ct(n),i=Ct(e);return t||(mi(e,i)&&Yi(r,"has",e),Yi(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function gv(e,t=!1){return e=e.__v_raw,!t&&Yi(Ct(e),"iterate",jf),Reflect.get(e,"size",e)}function _$(e,t=!1){!t&&!fh(e)&&!fu(e)&&(e=Ct(e));const n=Ct(this);return Hb(n).has.call(n,e)||(n.add(e),Ml(n,"add",e,e)),this}function b$(e,t,n=!1){!n&&!fh(t)&&!fu(t)&&(t=Ct(t));const r=Ct(this),{has:i,get:s}=Hb(r);let a=i.call(r,e);a||(e=Ct(e),a=i.call(r,e));const o=s.call(r,e);return r.set(e,t),a?mi(t,o)&&Ml(r,"set",e,t):Ml(r,"add",e,t),this}function E$(e){const t=Ct(this),{has:n,get:r}=Hb(t);let i=n.call(t,e);i||(e=Ct(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Ml(t,"delete",e,void 0),s}function w$(){const e=Ct(this),t=e.size!==0,n=e.clear();return t&&Ml(e,"clear",void 0,void 0),n}function mv(e,t){return function(r,i){const s=this,a=s.__v_raw,o=Ct(a),l=t?f3:e?p3:Xm;return!e&&Yi(o,"iterate",jf),a.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function xv(e,t,n){return function(...r){const i=this.__v_raw,s=Ct(i),a=e0(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,c=i[e](...r),u=n?f3:t?p3:Xm;return!t&&Yi(s,"iterate",l?YT:jf),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:o?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function vc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function wre(){const e={get(s){return dv(this,s)},get size(){return gv(this)},has:pv,add:_$,set:b$,delete:E$,clear:w$,forEach:mv(!1,!1)},t={get(s){return dv(this,s,!1,!0)},get size(){return gv(this)},has:pv,add(s){return _$.call(this,s,!0)},set(s,a){return b$.call(this,s,a,!0)},delete:E$,clear:w$,forEach:mv(!1,!0)},n={get(s){return dv(this,s,!0)},get size(){return gv(this,!0)},has(s){return pv.call(this,s,!0)},add:vc("add"),set:vc("set"),delete:vc("delete"),clear:vc("clear"),forEach:mv(!0,!1)},r={get(s){return dv(this,s,!0,!0)},get size(){return gv(this,!0)},has(s){return pv.call(this,s,!0)},add:vc("add"),set:vc("set"),delete:vc("delete"),clear:vc("clear"),forEach:mv(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=xv(s,!1,!1),n[s]=xv(s,!0,!1),t[s]=xv(s,!1,!0),r[s]=xv(s,!0,!0)}),[e,n,t,r]}const[Sre,Are,Tre,kre]=wre();function Vb(e,t){const n=t?e?kre:Tre:e?Are:Sre;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Lt(n,i)&&i in r?n:r,i,s)}const Cre={get:Vb(!1,!1)},Fre={get:Vb(!1,!0)},Ore={get:Vb(!0,!1)},Nre={get:Vb(!0,!0)},cB=new WeakMap,uB=new WeakMap,fB=new WeakMap,hB=new WeakMap;function Dre(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mre(e){return e.__v_skip||!Object.isExtensible(e)?0:Dre(jne(e))}function rs(e){return fu(e)?e:Wb(e,!1,yre,Cre,cB)}function dB(e){return Wb(e,!1,bre,Fre,uB)}function h3(e){return Wb(e,!0,_re,Ore,fB)}function Rre(e){return Wb(e,!0,Ere,Nre,hB)}function Wb(e,t,n,r,i){if(!Jt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=Mre(e);if(a===0)return e;const o=new Proxy(e,a===2?r:n);return i.set(e,o),o}function Rl(e){return fu(e)?Rl(e.__v_raw):!!(e&&e.__v_isReactive)}function fu(e){return!!(e&&e.__v_isReadonly)}function fh(e){return!!(e&&e.__v_isShallow)}function d3(e){return e?!!e.__v_raw:!1}function Ct(e){const t=e&&e.__v_raw;return t?Ct(t):e}function jb(e){return Object.isExtensible(e)&&G7(e,"__v_skip",!0),e}const Xm=e=>Jt(e)?rs(e):e,p3=e=>Jt(e)?h3(e):e;class pB{constructor(t,n,r,i){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new b0(()=>t(this._value),()=>r0(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Ct(this);return(!t._cacheable||t.effect.dirty)&&mi(t._value,t._value=t.effect.run())&&r0(t,4),g3(t),t.effect._dirtyLevel>=2&&r0(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function $re(e,t,n=!1){let r,i;const s=it(e);return s?(r=e,i=Jn):(r=e.get,i=e.set),new pB(r,i,s||!i,n)}function g3(e){var t;Qc&&Wf&&(e=Ct(e),nB(Wf,(t=e.dep)!=null?t:e.dep=iB(()=>e.dep=void 0,e instanceof pB?e:void 0)))}function r0(e,t=4,n,r){e=Ct(e);const i=e.dep;i&&rB(i,t)}function Dn(e){return!!(e&&e.__v_isRef===!0)}function zn(e){return gB(e,!1)}function Ire(e){return gB(e,!0)}function gB(e,t){return Dn(e)?e:new Lre(e,t)}class Lre{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ct(t),this._value=n?t:Xm(t)}get value(){return g3(this),this._value}set value(t){const n=this.__v_isShallow||fh(t)||fu(t);t=n?t:Ct(t),mi(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=n?t:Xm(t),r0(this,4))}}function Pre(e){r0(e,4)}function Wt(e){return Dn(e)?e.value:e}function Bre(e){return it(e)?e():Wt(e)}const Ure={get:(e,t,n)=>Wt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Dn(i)&&!Dn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function m3(e){return Rl(e)?e:new Proxy(e,Ure)}class zre{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=t(()=>g3(this),()=>r0(this));this._get=n,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function mB(e){return new zre(e)}function xB(e){const t=Be(e)?new Array(e.length):{};for(const n in e)t[n]=vB(e,n);return t}class Hre{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return gre(Ct(this._object),this._key)}}class Vre{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Wre(e,t,n){return Dn(e)?e:it(e)?new Vre(e):Jt(e)&&arguments.length>1?vB(e,t,n):zn(e)}function vB(e,t,n){const r=e[t];return Dn(r)?r:new Hre(e,t,n)}const jre={GET:"get",HAS:"has",ITERATE:"iterate"},Gre={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"};/**
* @vue/runtime-core v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qre(e,t){}const Xre={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",WATCH_GETTER:2,2:"WATCH_GETTER",WATCH_CALLBACK:3,3:"WATCH_CALLBACK",WATCH_CLEANUP:4,4:"WATCH_CLEANUP",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE"},Yre={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update"};function $l(e,t,n,r){try{return r?e(...r):e()}catch(i){Gh(i,t,n)}}function ys(e,t,n,r){if(it(e)){const i=$l(e,t,n,r);return i&&i3(i)&&i.catch(s=>{Gh(s,t,n)}),i}if(Be(e)){const i=[];for(let s=0;s<e.length;s++)i.push(ys(e[s],t,n,r));return i}}function Gh(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Uu(),$l(l,null,10,[e,a,o]),zu();return}}Kre(e,n,i,r)}function Kre(e,t,n,r=!0){console.error(e)}let Ym=!1,KT=!1;const Gr=[];let Eo=0;const i0=[];let Oc=null,Ff=0;const yB=Promise.resolve();let x3=null;function Jl(e){const t=x3||yB;return e?t.then(this?e.bind(this):e):t}function Jre(e){let t=Eo+1,n=Gr.length;for(;t<n;){const r=t+n>>>1,i=Gr[r],s=Km(i);s<e||s===e&&i.pre?t=r+1:n=r}return t}function Gb(e){(!Gr.length||!Gr.includes(e,Ym&&e.allowRecurse?Eo+1:Eo))&&(e.id==null?Gr.push(e):Gr.splice(Jre(e.id),0,e),_B())}function _B(){!Ym&&!KT&&(KT=!0,x3=yB.then(bB))}function Zre(e){const t=Gr.indexOf(e);t>Eo&&Gr.splice(t,1)}function S_(e){Be(e)?i0.push(...e):(!Oc||!Oc.includes(e,e.allowRecurse?Ff+1:Ff))&&i0.push(e),_B()}function S$(e,t,n=Ym?Eo+1:0){for(;n<Gr.length;n++){const r=Gr[n];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Gr.splice(n,1),n--,r()}}}function A_(e){if(i0.length){const t=[...new Set(i0)].sort((n,r)=>Km(n)-Km(r));if(i0.length=0,Oc){Oc.push(...t);return}for(Oc=t,Ff=0;Ff<Oc.length;Ff++){const n=Oc[Ff];n.active!==!1&&n()}Oc=null,Ff=0}}const Km=e=>e.id==null?1/0:e.id,Qre=(e,t)=>{const n=Km(e)-Km(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function bB(e){KT=!1,Ym=!0,Gr.sort(Qre);try{for(Eo=0;Eo<Gr.length;Eo++){const t=Gr[Eo];t&&t.active!==!1&&$l(t,t.i,t.i?15:14)}}finally{Eo=0,Gr.length=0,A_(),Ym=!1,x3=null,(Gr.length||i0.length)&&bB()}}let $d,vv=[];function EB(e,t){var n,r;$d=e,$d?($d.enabled=!0,vv.forEach(({event:i,args:s})=>$d.emit(i,...s)),vv=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{EB(s,t)}),setTimeout(()=>{$d||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,vv=[])},3e3)):vv=[]}let Zn=null,qb=null;function Jm(e){const t=Zn;return Zn=e,qb=e&&e.type.__scopeId||null,t}function Y1(e){qb=e}function K1(){qb=null}const eie=e=>Xb;function Xb(e,t=Zn,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&sk(-1);const s=Jm(t);let a;try{a=e(...i)}finally{Jm(s),r._d&&sk(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function E0(e,t){if(Zn===null)return e;const n=ex(Zn),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,a,o,l=Mt]=t[i];s&&(it(s)&&(s={mounted:s,updated:s}),s.deep&&Bc(a),r.push({dir:s,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function vo(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Uu(),ys(l,n,8,[e.el,o,e,t]),zu())}}const Nc=Symbol("_leaveCb"),yv=Symbol("_enterCb");function v3(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Hu(()=>{e.isMounted=!0}),Qb(()=>{e.isUnmounting=!0}),e}const Ps=[Function,Array],y3={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ps,onEnter:Ps,onAfterEnter:Ps,onEnterCancelled:Ps,onBeforeLeave:Ps,onLeave:Ps,onAfterLeave:Ps,onLeaveCancelled:Ps,onBeforeAppear:Ps,onAppear:Ps,onAfterAppear:Ps,onAppearCancelled:Ps},wB=e=>{const t=e.subTree;return t.component?wB(t.component):t},tie={name:"BaseTransition",props:y3,setup(e,{slots:t}){const n=ac(),r=v3();return()=>{const i=t.default&&Yb(t.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const h of i)if(h.type!==Xn){s=h;break}}const a=Ct(e),{mode:o}=a;if(r.isLeaving)return PS(s);const l=A$(s);if(!l)return PS(s);let c=w0(l,a,r,n,h=>c=h);hu(l,c);const u=n.subTree,f=u&&A$(u);if(f&&f.type!==Xn&&!Oa(l,f)&&wB(n).type!==Xn){const h=w0(f,a,r,n);if(hu(f,h),o==="out-in"&&l.type!==Xn)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},PS(s);o==="in-out"&&l.type!==Xn&&(h.delayLeave=(d,p,g)=>{const m=AB(r,f);m[String(f.key)]=f,d[Nc]=()=>{p(),d[Nc]=void 0,delete c.delayedLeave},c.delayedLeave=g})}return s}}},SB=tie;function AB(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function w0(e,t,n,r,i){const{appear:s,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:x,onAfterAppear:v,onAppearCancelled:y}=t,_=String(e.key),b=AB(n,e),w=(S,k)=>{S&&ys(S,r,9,k)},E=(S,k)=>{const T=k[1];w(S,k),Be(S)?S.every(O=>O.length<=1)&&T():S.length<=1&&T()},A={mode:a,persisted:o,beforeEnter(S){let k=l;if(!n.isMounted)if(s)k=m||l;else return;S[Nc]&&S[Nc](!0);const T=b[_];T&&Oa(e,T)&&T.el[Nc]&&T.el[Nc](),w(k,[S])},enter(S){let k=c,T=u,O=f;if(!n.isMounted)if(s)k=x||c,T=v||u,O=y||f;else return;let C=!1;const D=S[yv]=N=>{C||(C=!0,N?w(O,[S]):w(T,[S]),A.delayedLeave&&A.delayedLeave(),S[yv]=void 0)};k?E(k,[S,D]):D()},leave(S,k){const T=String(e.key);if(S[yv]&&S[yv](!0),n.isUnmounting)return k();w(h,[S]);let O=!1;const C=S[Nc]=D=>{O||(O=!0,k(),D?w(g,[S]):w(p,[S]),S[Nc]=void 0,b[T]===e&&delete b[T])};b[T]=e,d?E(d,[S,C]):C()},clone(S){const k=w0(S,t,n,r,i);return i&&i(k),k}};return A}function PS(e){if(J1(e))return e=Io(e),e.children=null,e}function A$(e){if(!J1(e))return e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&it(n.default))return n.default()}}function hu(e,t){e.shapeFlag&6&&e.component?hu(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Yb(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let a=e[s];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===qt?(a.patchFlag&128&&i++,r=r.concat(Yb(a.children,t,o))):(t||a.type!==Xn)&&r.push(o!=null?Io(a,{key:o}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function vr(e,t){return it(e)?Ut({name:e.name},t,{setup:e}):e}const Gf=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function nie(e){it(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:i=200,timeout:s,suspensible:a=!0,onError:o}=e;let l=null,c,u=0;const f=()=>(u++,l=null,h()),h=()=>{let d;return l||(d=l=t().catch(p=>{if(p=p instanceof Error?p:new Error(String(p)),o)return new Promise((g,m)=>{o(p,()=>g(f()),()=>m(p),u+1)});throw p}).then(p=>d!==l&&l?l:(p&&(p.__esModule||p[Symbol.toStringTag]==="Module")&&(p=p.default),c=p,p)))};return vr({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return c},setup(){const d=Yn;if(c)return()=>BS(c,d);const p=v=>{l=null,Gh(v,d,13,!r)};if(a&&d.suspense||Q1)return h().then(v=>()=>BS(v,d)).catch(v=>(p(v),()=>r?vt(r,{error:v}):null));const g=zn(!1),m=zn(),x=zn(!!i);return i&&setTimeout(()=>{x.value=!1},i),s!=null&&setTimeout(()=>{if(!g.value&&!m.value){const v=new Error(`Async component timed out after ${s}ms.`);p(v),m.value=v}},s),h().then(()=>{g.value=!0,d.parent&&J1(d.parent.vnode)&&(d.parent.effect.dirty=!0,Gb(d.parent.update))}).catch(v=>{p(v),m.value=v}),()=>{if(g.value&&c)return BS(c,d);if(m.value&&r)return vt(r,{error:m.value});if(n&&!x.value)return vt(n)}}})}function BS(e,t){const{ref:n,props:r,children:i,ce:s}=t.vnode,a=vt(e,r,i);return a.ref=n,a.ce=s,delete t.vnode.ce,a}const J1=e=>e.type.__isKeepAlive,rie={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=ac(),r=n.ctx;if(!r.renderer)return()=>{const v=t.default&&t.default();return v&&v.length===1?v[0]:v};const i=new Map,s=new Set;let a=null;const o=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:f}}}=r,h=f("div");r.activate=(v,y,_,b,w)=>{const E=v.component;c(v,y,_,0,o),l(E.vnode,v,y,_,E,o,b,v.slotScopeIds,w),sr(()=>{E.isDeactivated=!1,E.a&&n0(E.a);const A=v.props&&v.props.onVnodeMounted;A&&Ii(A,E.parent,v)},o)},r.deactivate=v=>{const y=v.component;C_(y.m),C_(y.a),c(v,h,null,1,o),sr(()=>{y.da&&n0(y.da);const _=v.props&&v.props.onVnodeUnmounted;_&&Ii(_,y.parent,v),y.isDeactivated=!0},o)};function d(v){US(v),u(v,n,o,!0)}function p(v){i.forEach((y,_)=>{const b=uk(y.type);b&&(!v||!v(b))&&g(_)})}function g(v){const y=i.get(v);y&&(!a||!Oa(y,a))?d(y):a&&US(a),i.delete(v),s.delete(v)}Ll(()=>[e.include,e.exclude],([v,y])=>{v&&p(_=>Lg(v,_)),y&&p(_=>!Lg(y,_))},{flush:"post",deep:!0});let m=null;const x=()=>{m!=null&&(rk(n.subTree.type)?sr(()=>{i.set(m,_v(n.subTree))},n.subTree.suspense):i.set(m,_v(n.subTree)))};return Hu(x),Zb(x),Qb(()=>{i.forEach(v=>{const{subTree:y,suspense:_}=n,b=_v(y);if(v.type===b.type&&v.key===b.key){US(b);const w=b.component.da;w&&sr(w,_);return}d(v)})}),()=>{if(m=null,!t.default)return null;const v=t.default(),y=v[0];if(v.length>1)return a=null,v;if(!du(y)||!(y.shapeFlag&4)&&!(y.shapeFlag&128))return a=null,y;let _=_v(y);if(_.type===Xn)return a=null,_;const b=_.type,w=uk(Gf(_)?_.type.__asyncResolved||{}:b),{include:E,exclude:A,max:S}=e;if(E&&(!w||!Lg(E,w))||A&&w&&Lg(A,w))return a=_,y;const k=_.key==null?b:_.key,T=i.get(k);return _.el&&(_=Io(_),y.shapeFlag&128&&(y.ssContent=_)),m=k,T?(_.el=T.el,_.component=T.component,_.transition&&hu(_,_.transition),_.shapeFlag|=512,s.delete(k),s.add(k)):(s.add(k),S&&s.size>parseInt(S,10)&&g(s.values().next().value)),_.shapeFlag|=256,a=_,rk(y.type)?y:_}}},iie=rie;function Lg(e,t){return Be(e)?e.some(n=>Lg(n,t)):ft(e)?e.split(",").includes(t):Wne(e)?e.test(t):!1}function TB(e,t){CB(e,"a",t)}function kB(e,t){CB(e,"da",t)}function CB(e,t,n=Yn){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Kb(t,r,n),n){let i=n.parent;for(;i&&i.parent;)J1(i.parent.vnode)&&sie(r,t,n,i),i=i.parent}}function sie(e,t,n,r){const i=Kb(t,e,r,!0);eE(()=>{r3(r[t],i)},n)}function US(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function _v(e){return e.shapeFlag&128?e.ssContent:e}function Kb(e,t,n=Yn,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{Uu();const o=dh(n),l=ys(t,n,e,a);return o(),zu(),l});return r?i.unshift(s):i.push(s),s}}const sc=e=>(t,n=Yn)=>{(!Q1||e==="sp")&&Kb(e,(...r)=>t(...r),n)},Jb=sc("bm"),Hu=sc("m"),FB=sc("bu"),Zb=sc("u"),Qb=sc("bum"),eE=sc("um"),OB=sc("sp"),NB=sc("rtg"),DB=sc("rtc");function MB(e,t=Yn){Kb("ec",e,t)}const _3="components",aie="directives";function oie(e,t){return b3(_3,e,!0,t)||e}const RB=Symbol.for("v-ndc");function lie(e){return ft(e)?b3(_3,e,!1)||e:e||RB}function cie(e){return b3(aie,e)}function b3(e,t,n=!0,r=!1){const i=Zn||Yn;if(i){const s=i.type;if(e===_3){const o=uk(s,!1);if(o&&(o===t||o===gn(t)||o===jh(gn(t))))return s}const a=T$(i[e]||s[e],t)||T$(i.appContext[e],t);return!a&&r?s:a}}function T$(e,t){return e&&(e[t]||e[gn(t)]||e[jh(gn(t))])}function Il(e,t,n,r){let i;const s=n&&n[r];if(Be(e)||ft(e)){i=new Array(e.length);for(let a=0,o=e.length;a<o;a++)i[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if(Jt(e))if(e[Symbol.iterator])i=Array.from(e,(a,o)=>t(a,o,void 0,s&&s[o]));else{const a=Object.keys(e);i=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];i[o]=t(e[c],c,o,s&&s[o])}}else i=[];return n&&(n[r]=i),i}function uie(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(Be(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return e}function $B(e,t,n={},r,i){if(Zn.isCE||Zn.parent&&Gf(Zn.parent)&&Zn.parent.isCE)return t!=="default"&&(n.name=t),vt("slot",n,r&&r());let s=e[t];s&&s._c&&(s._d=!1),je();const a=s&&E3(s(n)),o=S0(qt,{key:(n.key||a&&a.key||`_${t}`)+(!a&&r?"_fb":"")},a||(r?r():[]),a&&e._===1?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function E3(e){return e.some(t=>du(t)?!(t.type===Xn||t.type===qt&&!E3(t.children)):!0)?e:null}function fie(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:t0(r)]=e[r];return n}const JT=e=>e?yU(e)?ex(e):JT(e.parent):null,pm=Ut(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>JT(e.parent),$root:e=>JT(e.root),$emit:e=>e.emit,$options:e=>w3(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Gb(e.update)}),$nextTick:e=>e.n||(e.n=Jl.bind(e.proxy)),$watch:e=>Xie.bind(e)}),zS=(e,t)=>e!==Mt&&!e.__isScriptSetup&&Lt(e,t),ZT={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:l}=e;let c;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(zS(r,t))return a[t]=1,r[t];if(i!==Mt&&Lt(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&Lt(c,t))return a[t]=3,s[t];if(n!==Mt&&Lt(n,t))return a[t]=4,n[t];QT&&(a[t]=0)}}const u=pm[t];let f,h;if(u)return t==="$attrs"&&Yi(e.attrs,"get",""),u(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(n!==Mt&&Lt(n,t))return a[t]=4,n[t];if(h=l.config.globalProperties,Lt(h,t))return h[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return zS(i,t)?(i[t]=n,!0):r!==Mt&&Lt(r,t)?(r[t]=n,!0):Lt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!n[a]||e!==Mt&&Lt(e,a)||zS(t,a)||(o=s[0])&&Lt(o,a)||Lt(r,a)||Lt(pm,a)||Lt(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Lt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},hie=Ut({},ZT,{get(e,t){if(t!==Symbol.unscopables)return ZT.get(e,t,e)},has(e,t){return t[0]!=="_"&&!Kne(t)}});function die(){return null}function pie(){return null}function gie(e){}function mie(e){}function xie(){return null}function vie(){}function yie(e,t){return null}function _ie(){return IB().slots}function bie(){return IB().attrs}function IB(){const e=ac();return e.setupContext||(e.setupContext=wU(e))}function Zm(e){return Be(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Eie(e,t){const n=Zm(e);for(const r in t){if(r.startsWith("__skip"))continue;let i=n[r];i?Be(i)||it(i)?i=n[r]={type:i,default:t[r]}:i.default=t[r]:i===null&&(i=n[r]={default:t[r]}),i&&t[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function wie(e,t){return!e||!t?e||t:Be(e)&&Be(t)?e.concat(t):Ut({},Zm(e),Zm(t))}function Sie(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function Aie(e){const t=ac();let n=e();return ok(),i3(n)&&(n=n.catch(r=>{throw dh(t),r})),[n,()=>dh(t)]}let QT=!0;function Tie(e){const t=w3(e),n=e.proxy,r=e.ctx;QT=!1,t.beforeCreate&&k$(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:g,deactivated:m,beforeDestroy:x,beforeUnmount:v,destroyed:y,unmounted:_,render:b,renderTracked:w,renderTriggered:E,errorCaptured:A,serverPrefetch:S,expose:k,inheritAttrs:T,components:O,directives:C,filters:D}=t;if(c&&kie(c,r,null),a)for(const L in a){const I=a[L];it(I)&&(r[L]=I.bind(n))}if(i){const L=i.call(n,n);Jt(L)&&(e.data=rs(L))}if(QT=!0,s)for(const L in s){const I=s[L],Y=it(I)?I.bind(n,n):it(I.get)?I.get.bind(n,n):Jn,X=!it(I)&&it(I.set)?I.set.bind(n):Jn,oe=tu({get:Y,set:X});Object.defineProperty(r,L,{enumerable:!0,configurable:!0,get:()=>oe.value,set:xe=>oe.value=xe})}if(o)for(const L in o)LB(o[L],r,n,L);if(l){const L=it(l)?l.call(n):l;Reflect.ownKeys(L).forEach(I=>{BB(I,L[I])})}u&&k$(u,e,"c");function R(L,I){Be(I)?I.forEach(Y=>L(Y.bind(n))):I&&L(I.bind(n))}if(R(Jb,f),R(Hu,h),R(FB,d),R(Zb,p),R(TB,g),R(kB,m),R(MB,A),R(DB,w),R(NB,E),R(Qb,v),R(eE,_),R(OB,S),Be(k))if(k.length){const L=e.exposed||(e.exposed={});k.forEach(I=>{Object.defineProperty(L,I,{get:()=>n[I],set:Y=>n[I]=Y})})}else e.exposed||(e.exposed={});b&&e.render===Jn&&(e.render=b),T!=null&&(e.inheritAttrs=T),O&&(e.components=O),C&&(e.directives=C)}function kie(e,t,n=Jn){Be(e)&&(e=ek(e));for(const r in e){const i=e[r];let s;Jt(i)?"default"in i?s=s0(i.from||r,i.default,!0):s=s0(i.from||r):s=s0(i),Dn(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function k$(e,t,n){ys(Be(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function LB(e,t,n,r){const i=r.includes(".")?lU(n,r):()=>n[r];if(ft(e)){const s=t[e];it(s)&&Ll(i,s)}else if(it(e))Ll(i,e.bind(n));else if(Jt(e))if(Be(e))e.forEach(s=>LB(s,t,n,r));else{const s=it(e.handler)?e.handler.bind(n):t[e.handler];it(s)&&Ll(i,s,e)}}function w3(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(c=>T_(l,c,a,!0)),T_(l,t,a)),Jt(t)&&s.set(t,l),l}function T_(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&T_(e,s,n,!0),i&&i.forEach(a=>T_(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const o=Cie[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const Cie={data:C$,props:F$,emits:F$,methods:Pg,computed:Pg,beforeCreate:hi,created:hi,beforeMount:hi,mounted:hi,beforeUpdate:hi,updated:hi,beforeDestroy:hi,beforeUnmount:hi,destroyed:hi,unmounted:hi,activated:hi,deactivated:hi,errorCaptured:hi,serverPrefetch:hi,components:Pg,directives:Pg,watch:Oie,provide:C$,inject:Fie};function C$(e,t){return t?e?function(){return Ut(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function Fie(e,t){return Pg(ek(e),ek(t))}function ek(e){if(Be(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function hi(e,t){return e?[...new Set([].concat(e,t))]:t}function Pg(e,t){return e?Ut(Object.create(null),e,t):t}function F$(e,t){return e?Be(e)&&Be(t)?[...new Set([...e,...t])]:Ut(Object.create(null),Zm(e),Zm(t??{})):t}function Oie(e,t){if(!e)return t;if(!t)return e;const n=Ut(Object.create(null),e);for(const r in t)n[r]=hi(e[r],t[r]);return n}function PB(){return{app:null,config:{isNativeTag:$y,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Nie=0;function Die(e,t){return function(r,i=null){it(r)||(r=Ut({},r)),i!=null&&!Jt(i)&&(i=null);const s=PB(),a=new WeakSet;let o=!1;const l=s.app={_uid:Nie++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:TU,get config(){return s.config},set config(c){},use(c,...u){return a.has(c)||(c&&it(c.install)?(a.add(c),c.install(l,...u)):it(c)&&(a.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!o){const h=vt(r,i);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(h,c):e(h,c,f),o=!0,l._container=c,c.__vue_app__=l,ex(h.component)}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=qf;qf=l;try{return c()}finally{qf=u}}};return l}}let qf=null;function BB(e,t){if(Yn){let n=Yn.provides;const r=Yn.parent&&Yn.parent.provides;r===n&&(n=Yn.provides=Object.create(r)),n[e]=t}}function s0(e,t,n=!1){const r=Yn||Zn;if(r||qf){const i=qf?qf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&it(t)?t.call(r&&r.proxy):t}}function UB(){return!!(Yn||Zn||qf)}const zB={},HB=()=>Object.create(zB),VB=e=>Object.getPrototypeOf(e)===zB;function Mie(e,t,n,r=!1){const i={},s=HB();e.propsDefaults=Object.create(null),WB(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:dB(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function Rie(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,o=Ct(i),[l]=e.propsOptions;let c=!1;if((r||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(tE(e.emitsOptions,h))continue;const d=t[h];if(l)if(Lt(s,h))d!==s[h]&&(s[h]=d,c=!0);else{const p=gn(h);i[p]=tk(l,o,p,d,e,!1)}else d!==s[h]&&(s[h]=d,c=!0)}}}else{WB(e,t,i,s)&&(c=!0);let u;for(const f in o)(!t||!Lt(t,f)&&((u=zi(f))===f||!Lt(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=tk(l,o,f,void 0,e,!0)):delete i[f]);if(s!==o)for(const f in s)(!t||!Lt(t,f))&&(delete s[f],c=!0)}c&&Ml(e.attrs,"set","")}function WB(e,t,n,r){const[i,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Zc(l))continue;const c=t[l];let u;i&&Lt(i,u=gn(l))?!s||!s.includes(u)?n[u]=c:(o||(o={}))[u]=c:tE(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,a=!0)}if(s){const l=Ct(n),c=o||Mt;for(let u=0;u<s.length;u++){const f=s[u];n[f]=tk(i,l,f,c[f],e,!Lt(c,f))}}return a}function tk(e,t,n,r,i,s){const a=e[n];if(a!=null){const o=Lt(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&it(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=dh(i);r=c[n]=l.call(null,t),u()}}else r=l}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===zi(n))&&(r=!0))}return r}const $ie=new WeakMap;function jB(e,t,n=!1){const r=n?$ie:t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},o=[];let l=!1;if(!it(e)){const u=f=>{l=!0;const[h,d]=jB(f,t,!0);Ut(a,h),d&&o.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return Jt(e)&&r.set(e,Qd),Qd;if(Be(s))for(let u=0;u<s.length;u++){const f=gn(s[u]);O$(f)&&(a[f]=Mt)}else if(s)for(const u in s){const f=gn(u);if(O$(f)){const h=s[u],d=a[f]=Be(h)||it(h)?{type:h}:Ut({},h),p=d.type;let g=!1,m=!0;if(Be(p))for(let x=0;x<p.length;++x){const v=p[x],y=it(v)&&v.name;if(y==="Boolean"){g=!0;break}else y==="String"&&(m=!1)}else g=it(p)&&p.name==="Boolean";d[0]=g,d[1]=m,(g||Lt(d,"default"))&&o.push(f)}}const c=[a,o];return Jt(e)&&r.set(e,c),c}function O$(e){return e[0]!=="$"&&!Zc(e)}const GB=e=>e[0]==="_"||e==="$stable",S3=e=>Be(e)?e.map(Bi):[Bi(e)],Iie=(e,t,n)=>{if(t._n)return t;const r=Xb((...i)=>S3(t(...i)),n);return r._c=!1,r},qB=(e,t,n)=>{const r=e._ctx;for(const i in e){if(GB(i))continue;const s=e[i];if(it(s))t[i]=Iie(i,s,r);else if(s!=null){const a=S3(s);t[i]=()=>a}}},XB=(e,t)=>{const n=S3(t);e.slots.default=()=>n},YB=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},Lie=(e,t,n)=>{const r=e.slots=HB();if(e.vnode.shapeFlag&32){const i=t._;i?(YB(r,t,n),n&&G7(r,"_",i,!0)):qB(t,r)}else t&&XB(e,t)},Pie=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=Mt;if(r.shapeFlag&32){const o=t._;o?n&&o===1?s=!1:YB(i,t,n):(s=!t.$stable,qB(t,i)),a=t}else t&&(XB(e,t),a={default:1});if(s)for(const o in i)!GB(o)&&a[o]==null&&delete i[o]};function k_(e,t,n,r,i=!1){if(Be(e)){e.forEach((h,d)=>k_(h,t&&(Be(t)?t[d]:t),n,r,i));return}if(Gf(r)&&!i)return;const s=r.shapeFlag&4?ex(r.component):r.el,a=i?null:s,{i:o,r:l}=e,c=t&&t.r,u=o.refs===Mt?o.refs={}:o.refs,f=o.setupState;if(c!=null&&c!==l&&(ft(c)?(u[c]=null,Lt(f,c)&&(f[c]=null)):Dn(c)&&(c.value=null)),it(l))$l(l,o,12,[a,u]);else{const h=ft(l),d=Dn(l);if(h||d){const p=()=>{if(e.f){const g=h?Lt(f,l)?f[l]:u[l]:l.value;i?Be(g)&&r3(g,s):Be(g)?g.includes(s)||g.push(s):h?(u[l]=[s],Lt(f,l)&&(f[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else h?(u[l]=a,Lt(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(u[e.k]=a))};a?(p.id=-1,sr(p,n)):p()}}}const KB=Symbol("_vte"),Bie=e=>e.__isTeleport,gm=e=>e&&(e.disabled||e.disabled===""),N$=e=>typeof SVGElement<"u"&&e instanceof SVGElement,D$=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,nk=(e,t)=>{const n=e&&e.to;return ft(n)?t?t(n):null:n},Uie={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,s,a,o,l,c){const{mc:u,pc:f,pbc:h,o:{insert:d,querySelector:p,createText:g,createComment:m}}=c,x=gm(t.props);let{shapeFlag:v,children:y,dynamicChildren:_}=t;if(e==null){const b=t.el=g(""),w=t.anchor=g("");d(b,n,r),d(w,n,r);const E=t.target=nk(t.props,p),A=ZB(E,t,g,d);E&&(a==="svg"||N$(E)?a="svg":(a==="mathml"||D$(E))&&(a="mathml"));const S=(k,T)=>{v&16&&u(y,k,T,i,s,a,o,l)};x?S(n,w):E&&S(E,A)}else{t.el=e.el,t.targetStart=e.targetStart;const b=t.anchor=e.anchor,w=t.target=e.target,E=t.targetAnchor=e.targetAnchor,A=gm(e.props),S=A?n:w,k=A?b:E;if(a==="svg"||N$(w)?a="svg":(a==="mathml"||D$(w))&&(a="mathml"),_?(h(e.dynamicChildren,_,S,i,s,a,o),A3(e,t,!0)):l||f(e,t,S,k,i,s,a,o,!1),x)A?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):bv(t,n,b,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const T=t.target=nk(t.props,p);T&&bv(t,T,null,c,0)}else A&&bv(t,w,E,c,1)}JB(t)},remove(e,t,n,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:f,props:h}=e;if(f&&(i(c),i(u)),s&&i(l),a&16){const d=s||!gm(h);for(let p=0;p<o.length;p++){const g=o[p];r(g,t,n,d,!!g.dynamicChildren)}}},move:bv,hydrate:zie};function bv(e,t,n,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,t,n);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=e,f=s===2;if(f&&r(a,t,n),(!f||gm(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],t,n,2);f&&r(o,t,n)}function zie(e,t,n,r,i,s,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},f){const h=t.target=nk(t.props,l);if(h){const d=h._lpa||h.firstChild;if(t.shapeFlag&16)if(gm(t.props))t.anchor=f(a(e),t,o(e),n,r,i,s),t.targetStart=d,t.targetAnchor=d&&a(d);else{t.anchor=a(e);let p=d;for(;p;){if(p&&p.nodeType===8){if(p.data==="teleport start anchor")t.targetStart=p;else if(p.data==="teleport anchor"){t.targetAnchor=p,h._lpa=t.targetAnchor&&a(t.targetAnchor);break}}p=a(p)}t.targetAnchor||ZB(h,t,u,c),f(d&&a(d),t,h,n,r,i,s)}JB(t)}return t.anchor&&a(t.anchor)}const Hie=Uie;function JB(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n&&n!==e.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}function ZB(e,t,n,r){const i=t.targetStart=n(""),s=t.targetAnchor=n("");return i[KB]=s,e&&(r(i,e),r(s,e)),s}let M$=!1;const md=()=>{M$||(console.error("Hydration completed but contains mismatches."),M$=!0)},Vie=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",Wie=e=>e.namespaceURI.includes("MathML"),Ev=e=>{if(Vie(e))return"svg";if(Wie(e))return"mathml"},wv=e=>e.nodeType===8;function jie(e){const{mt:t,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:a,remove:o,insert:l,createComment:c}}=e,u=(y,_)=>{if(!_.hasChildNodes()){n(null,y,_),A_(),_._vnode=y;return}f(_.firstChild,y,null,null,null),A_(),_._vnode=y},f=(y,_,b,w,E,A=!1)=>{A=A||!!_.dynamicChildren;const S=wv(y)&&y.data==="[",k=()=>g(y,_,b,w,E,S),{type:T,ref:O,shapeFlag:C,patchFlag:D}=_;let N=y.nodeType;_.el=y,D===-2&&(A=!1,_.dynamicChildren=null);let R=null;switch(T){case eu:N!==3?_.children===""?(l(_.el=i(""),a(y),y),R=y):R=k():(y.data!==_.children&&(md(),y.data=_.children),R=s(y));break;case Xn:v(y)?(R=s(y),x(_.el=y.content.firstChild,y,b)):N!==8||S?R=k():R=s(y);break;case Xf:if(S&&(y=s(y),N=y.nodeType),N===1||N===3){R=y;const L=!_.children.length;for(let I=0;I<_.staticCount;I++)L&&(_.children+=R.nodeType===1?R.outerHTML:R.data),I===_.staticCount-1&&(_.anchor=R),R=s(R);return S?s(R):R}else k();break;case qt:S?R=p(y,_,b,w,E,A):R=k();break;default:if(C&1)(N!==1||_.type.toLowerCase()!==y.tagName.toLowerCase())&&!v(y)?R=k():R=h(y,_,b,w,E,A);else if(C&6){_.slotScopeIds=E;const L=a(y);if(S?R=m(y):wv(y)&&y.data==="teleport start"?R=m(y,y.data,"teleport end"):R=s(y),t(_,L,null,b,w,Ev(L),A),Gf(_)){let I;S?(I=vt(qt),I.anchor=R?R.previousSibling:L.lastChild):I=y.nodeType===3?Co(""):vt("div"),I.el=y,_.component.subTree=I}}else C&64?N!==8?R=k():R=_.type.hydrate(y,_,b,w,E,A,e,d):C&128&&(R=_.type.hydrate(y,_,b,w,Ev(a(y)),E,A,e,f))}return O!=null&&k_(O,null,w,_),R},h=(y,_,b,w,E,A)=>{A=A||!!_.dynamicChildren;const{type:S,props:k,patchFlag:T,shapeFlag:O,dirs:C,transition:D}=_,N=S==="input"||S==="option";if(N||T!==-1){C&&vo(_,null,b,"created");let R=!1;if(v(y)){R=nU(w,D)&&b&&b.vnode.props&&b.vnode.props.appear;const I=y.content.firstChild;R&&D.beforeEnter(I),x(I,y,b),_.el=y=I}if(O&16&&!(k&&(k.innerHTML||k.textContent))){let I=d(y.firstChild,_,y,b,w,E,A);for(;I;){md();const Y=I;I=I.nextSibling,o(Y)}}else O&8&&y.textContent!==_.children&&(md(),y.textContent=_.children);if(k){if(N||!A||T&48){const I=y.tagName.includes("-");for(const Y in k)(N&&(Y.endsWith("value")||Y==="indeterminate")||Vh(Y)&&!Zc(Y)||Y[0]==="."||I)&&r(y,Y,null,k[Y],void 0,b)}else if(k.onClick)r(y,"onClick",null,k.onClick,void 0,b);else if(T&4&&Rl(k.style))for(const I in k.style)k.style[I]}let L;(L=k&&k.onVnodeBeforeMount)&&Ii(L,b,_),C&&vo(_,null,b,"beforeMount"),((L=k&&k.onVnodeMounted)||C||R)&&hU(()=>{L&&Ii(L,b,_),R&&D.enter(y),C&&vo(_,null,b,"mounted")},w)}return y.nextSibling},d=(y,_,b,w,E,A,S)=>{S=S||!!_.dynamicChildren;const k=_.children,T=k.length;for(let O=0;O<T;O++){const C=S?k[O]:k[O]=Bi(k[O]),D=C.type===eu;if(y){if(D&&!S){let N=k[O+1];N&&(N=Bi(N)).type===eu&&(l(i(y.data.slice(C.children.length)),b,s(y)),y.data=C.children)}y=f(y,C,w,E,A,S)}else D&&!C.children?l(C.el=i(""),b):(md(),n(null,C,b,null,w,E,Ev(b),A))}return y},p=(y,_,b,w,E,A)=>{const{slotScopeIds:S}=_;S&&(E=E?E.concat(S):S);const k=a(y),T=d(s(y),_,k,b,w,E,A);return T&&wv(T)&&T.data==="]"?s(_.anchor=T):(md(),l(_.anchor=c("]"),k,T),T)},g=(y,_,b,w,E,A)=>{if(md(),_.el=null,A){const T=m(y);for(;;){const O=s(y);if(O&&O!==T)o(O);else break}}const S=s(y),k=a(y);return o(y),n(null,_,k,S,b,w,Ev(k),E),S},m=(y,_="[",b="]")=>{let w=0;for(;y;)if(y=s(y),y&&wv(y)&&(y.data===_&&w++,y.data===b)){if(w===0)return s(y);w--}return y},x=(y,_,b)=>{const w=_.parentNode;w&&w.replaceChild(y,_);let E=b;for(;E;)E.vnode.el===_&&(E.vnode.el=E.subTree.el=y),E=E.parent},v=y=>y.nodeType===1&&y.tagName.toLowerCase()==="template";return[u,f]}const sr=hU;function QB(e){return tU(e)}function eU(e){return tU(e,jie)}function tU(e,t){const n=q7();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Jn,insertStaticContent:p}=e,g=(F,B,K,Z=null,Q=null,te=null,de=void 0,me=null,ye=!!B.dynamicChildren)=>{if(F===B)return;F&&!Oa(F,B)&&(Z=Ge(F),xe(F,Q,te,!0),F=null),B.patchFlag===-2&&(ye=!1,B.dynamicChildren=null);const{type:pe,ref:ce,shapeFlag:Se}=B;switch(pe){case eu:m(F,B,K,Z);break;case Xn:x(F,B,K,Z);break;case Xf:F==null&&v(B,K,Z,de);break;case qt:O(F,B,K,Z,Q,te,de,me,ye);break;default:Se&1?b(F,B,K,Z,Q,te,de,me,ye):Se&6?C(F,B,K,Z,Q,te,de,me,ye):(Se&64||Se&128)&&pe.process(F,B,K,Z,Q,te,de,me,ye,G)}ce!=null&&Q&&k_(ce,F&&F.ref,te,B||F,!B)},m=(F,B,K,Z)=>{if(F==null)r(B.el=o(B.children),K,Z);else{const Q=B.el=F.el;B.children!==F.children&&c(Q,B.children)}},x=(F,B,K,Z)=>{F==null?r(B.el=l(B.children||""),K,Z):B.el=F.el},v=(F,B,K,Z)=>{[F.el,F.anchor]=p(F.children,B,K,Z,F.el,F.anchor)},y=({el:F,anchor:B},K,Z)=>{let Q;for(;F&&F!==B;)Q=h(F),r(F,K,Z),F=Q;r(B,K,Z)},_=({el:F,anchor:B})=>{let K;for(;F&&F!==B;)K=h(F),i(F),F=K;i(B)},b=(F,B,K,Z,Q,te,de,me,ye)=>{B.type==="svg"?de="svg":B.type==="math"&&(de="mathml"),F==null?w(B,K,Z,Q,te,de,me,ye):S(F,B,Q,te,de,me,ye)},w=(F,B,K,Z,Q,te,de,me)=>{let ye,pe;const{props:ce,shapeFlag:Se,transition:ae,dirs:We}=F;if(ye=F.el=a(F.type,te,ce&&ce.is,ce),Se&8?u(ye,F.children):Se&16&&A(F.children,ye,null,Z,Q,HS(F,te),de,me),We&&vo(F,null,Z,"created"),E(ye,F,F.scopeId,de,Z),ce){for(const tt in ce)tt!=="value"&&!Zc(tt)&&s(ye,tt,null,ce[tt],te,Z);"value"in ce&&s(ye,"value",null,ce.value,te),(pe=ce.onVnodeBeforeMount)&&Ii(pe,Z,F)}We&&vo(F,null,Z,"beforeMount");const Xe=nU(Q,ae);Xe&&ae.beforeEnter(ye),r(ye,B,K),((pe=ce&&ce.onVnodeMounted)||Xe||We)&&sr(()=>{pe&&Ii(pe,Z,F),Xe&&ae.enter(ye),We&&vo(F,null,Z,"mounted")},Q)},E=(F,B,K,Z,Q)=>{if(K&&d(F,K),Z)for(let te=0;te<Z.length;te++)d(F,Z[te]);if(Q){let te=Q.subTree;if(B===te){const de=Q.vnode;E(F,de,de.scopeId,de.slotScopeIds,Q.parent)}}},A=(F,B,K,Z,Q,te,de,me,ye=0)=>{for(let pe=ye;pe<F.length;pe++){const ce=F[pe]=me?Dc(F[pe]):Bi(F[pe]);g(null,ce,B,K,Z,Q,te,de,me)}},S=(F,B,K,Z,Q,te,de)=>{const me=B.el=F.el;let{patchFlag:ye,dynamicChildren:pe,dirs:ce}=B;ye|=F.patchFlag&16;const Se=F.props||Mt,ae=B.props||Mt;let We;if(K&&uf(K,!1),(We=ae.onVnodeBeforeUpdate)&&Ii(We,K,B,F),ce&&vo(B,F,K,"beforeUpdate"),K&&uf(K,!0),(Se.innerHTML&&ae.innerHTML==null||Se.textContent&&ae.textContent==null)&&u(me,""),pe?k(F.dynamicChildren,pe,me,K,Z,HS(B,Q),te):de||I(F,B,me,null,K,Z,HS(B,Q),te,!1),ye>0){if(ye&16)T(me,Se,ae,K,Q);else if(ye&2&&Se.class!==ae.class&&s(me,"class",null,ae.class,Q),ye&4&&s(me,"style",Se.style,ae.style,Q),ye&8){const Xe=B.dynamicProps;for(let tt=0;tt<Xe.length;tt++){const ct=Xe[tt],It=Se[ct],Ne=ae[ct];(Ne!==It||ct==="value")&&s(me,ct,It,Ne,Q,K)}}ye&1&&F.children!==B.children&&u(me,B.children)}else!de&&pe==null&&T(me,Se,ae,K,Q);((We=ae.onVnodeUpdated)||ce)&&sr(()=>{We&&Ii(We,K,B,F),ce&&vo(B,F,K,"updated")},Z)},k=(F,B,K,Z,Q,te,de)=>{for(let me=0;me<B.length;me++){const ye=F[me],pe=B[me],ce=ye.el&&(ye.type===qt||!Oa(ye,pe)||ye.shapeFlag&70)?f(ye.el):K;g(ye,pe,ce,null,Z,Q,te,de,!0)}},T=(F,B,K,Z,Q)=>{if(B!==K){if(B!==Mt)for(const te in B)!Zc(te)&&!(te in K)&&s(F,te,B[te],null,Q,Z);for(const te in K){if(Zc(te))continue;const de=K[te],me=B[te];de!==me&&te!=="value"&&s(F,te,me,de,Q,Z)}"value"in K&&s(F,"value",B.value,K.value,Q)}},O=(F,B,K,Z,Q,te,de,me,ye)=>{const pe=B.el=F?F.el:o(""),ce=B.anchor=F?F.anchor:o("");let{patchFlag:Se,dynamicChildren:ae,slotScopeIds:We}=B;We&&(me=me?me.concat(We):We),F==null?(r(pe,K,Z),r(ce,K,Z),A(B.children||[],K,ce,Q,te,de,me,ye)):Se>0&&Se&64&&ae&&F.dynamicChildren?(k(F.dynamicChildren,ae,K,Q,te,de,me),(B.key!=null||Q&&B===Q.subTree)&&A3(F,B,!0)):I(F,B,K,ce,Q,te,de,me,ye)},C=(F,B,K,Z,Q,te,de,me,ye)=>{B.slotScopeIds=me,F==null?B.shapeFlag&512?Q.ctx.activate(B,K,Z,de,ye):D(B,K,Z,Q,te,de,ye):N(F,B,ye)},D=(F,B,K,Z,Q,te,de)=>{const me=F.component=vU(F,Z,Q);if(J1(F)&&(me.ctx.renderer=G),_U(me,!1,de),me.asyncDep){if(Q&&Q.registerDep(me,R,de),!F.el){const ye=me.subTree=vt(Xn);x(null,ye,B,K)}}else R(me,F,B,K,Q,te,de)},N=(F,B,K)=>{const Z=B.component=F.component;if(ese(F,B,K))if(Z.asyncDep&&!Z.asyncResolved){L(Z,B,K);return}else Z.next=B,Zre(Z.update),Z.effect.dirty=!0,Z.update();else B.el=F.el,Z.vnode=B},R=(F,B,K,Z,Q,te,de)=>{const me=()=>{if(F.isMounted){let{next:ce,bu:Se,u:ae,parent:We,vnode:Xe}=F;{const gt=rU(F);if(gt){ce&&(ce.el=Xe.el,L(F,ce,de)),gt.asyncDep.then(()=>{F.isUnmounted||me()});return}}let tt=ce,ct;uf(F,!1),ce?(ce.el=Xe.el,L(F,ce,de)):ce=Xe,Se&&n0(Se),(ct=ce.props&&ce.props.onVnodeBeforeUpdate)&&Ii(ct,We,ce,Xe),uf(F,!0);const It=Iy(F),Ne=F.subTree;F.subTree=It,g(Ne,It,f(Ne.el),Ge(Ne),F,Q,te),ce.el=It.el,tt===null&&T3(F,It.el),ae&&sr(ae,Q),(ct=ce.props&&ce.props.onVnodeUpdated)&&sr(()=>Ii(ct,We,ce,Xe),Q)}else{let ce;const{el:Se,props:ae}=B,{bm:We,m:Xe,parent:tt}=F,ct=Gf(B);if(uf(F,!1),We&&n0(We),!ct&&(ce=ae&&ae.onVnodeBeforeMount)&&Ii(ce,tt,B),uf(F,!0),Se&&J){const It=()=>{F.subTree=Iy(F),J(Se,F.subTree,F,Q,null)};ct?B.type.__asyncLoader().then(()=>!F.isUnmounted&&It()):It()}else{const It=F.subTree=Iy(F);g(null,It,K,Z,F,Q,te),B.el=It.el}if(Xe&&sr(Xe,Q),!ct&&(ce=ae&&ae.onVnodeMounted)){const It=B;sr(()=>Ii(ce,tt,It),Q)}(B.shapeFlag&256||tt&&Gf(tt.vnode)&&tt.vnode.shapeFlag&256)&&F.a&&sr(F.a,Q),F.isMounted=!0,B=K=Z=null}},ye=F.effect=new b0(me,Jn,()=>Gb(pe),F.scope),pe=F.update=()=>{ye.dirty&&ye.run()};pe.i=F,pe.id=F.uid,uf(F,!0),pe()},L=(F,B,K)=>{B.component=F;const Z=F.vnode.props;F.vnode=B,F.next=null,Rie(F,B.props,Z,K),Pie(F,B.children,K),Uu(),S$(F),zu()},I=(F,B,K,Z,Q,te,de,me,ye=!1)=>{const pe=F&&F.children,ce=F?F.shapeFlag:0,Se=B.children,{patchFlag:ae,shapeFlag:We}=B;if(ae>0){if(ae&128){X(pe,Se,K,Z,Q,te,de,me,ye);return}else if(ae&256){Y(pe,Se,K,Z,Q,te,de,me,ye);return}}We&8?(ce&16&&Pe(pe,Q,te),Se!==pe&&u(K,Se)):ce&16?We&16?X(pe,Se,K,Z,Q,te,de,me,ye):Pe(pe,Q,te,!0):(ce&8&&u(K,""),We&16&&A(Se,K,Z,Q,te,de,me,ye))},Y=(F,B,K,Z,Q,te,de,me,ye)=>{F=F||Qd,B=B||Qd;const pe=F.length,ce=B.length,Se=Math.min(pe,ce);let ae;for(ae=0;ae<Se;ae++){const We=B[ae]=ye?Dc(B[ae]):Bi(B[ae]);g(F[ae],We,K,null,Q,te,de,me,ye)}pe>ce?Pe(F,Q,te,!0,!1,Se):A(B,K,Z,Q,te,de,me,ye,Se)},X=(F,B,K,Z,Q,te,de,me,ye)=>{let pe=0;const ce=B.length;let Se=F.length-1,ae=ce-1;for(;pe<=Se&&pe<=ae;){const We=F[pe],Xe=B[pe]=ye?Dc(B[pe]):Bi(B[pe]);if(Oa(We,Xe))g(We,Xe,K,null,Q,te,de,me,ye);else break;pe++}for(;pe<=Se&&pe<=ae;){const We=F[Se],Xe=B[ae]=ye?Dc(B[ae]):Bi(B[ae]);if(Oa(We,Xe))g(We,Xe,K,null,Q,te,de,me,ye);else break;Se--,ae--}if(pe>Se){if(pe<=ae){const We=ae+1,Xe=We<ce?B[We].el:Z;for(;pe<=ae;)g(null,B[pe]=ye?Dc(B[pe]):Bi(B[pe]),K,Xe,Q,te,de,me,ye),pe++}}else if(pe>ae)for(;pe<=Se;)xe(F[pe],Q,te,!0),pe++;else{const We=pe,Xe=pe,tt=new Map;for(pe=Xe;pe<=ae;pe++){const Cn=B[pe]=ye?Dc(B[pe]):Bi(B[pe]);Cn.key!=null&&tt.set(Cn.key,pe)}let ct,It=0;const Ne=ae-Xe+1;let gt=!1,xn=0;const sn=new Array(Ne);for(pe=0;pe<Ne;pe++)sn[pe]=0;for(pe=We;pe<=Se;pe++){const Cn=F[pe];if(It>=Ne){xe(Cn,Q,te,!0);continue}let ci;if(Cn.key!=null)ci=tt.get(Cn.key);else for(ct=Xe;ct<=ae;ct++)if(sn[ct-Xe]===0&&Oa(Cn,B[ct])){ci=ct;break}ci===void 0?xe(Cn,Q,te,!0):(sn[ci-Xe]=pe+1,ci>=xn?xn=ci:gt=!0,g(Cn,B[ci],K,null,Q,te,de,me,ye),It++)}const Ls=gt?Gie(sn):Qd;for(ct=Ls.length-1,pe=Ne-1;pe>=0;pe--){const Cn=Xe+pe,ci=B[Cn],rg=Cn+1<ce?B[Cn+1].el:Z;sn[pe]===0?g(null,ci,K,rg,Q,te,de,me,ye):gt&&(ct<0||pe!==Ls[ct]?oe(ci,K,rg,2):ct--)}}},oe=(F,B,K,Z,Q=null)=>{const{el:te,type:de,transition:me,children:ye,shapeFlag:pe}=F;if(pe&6){oe(F.component.subTree,B,K,Z);return}if(pe&128){F.suspense.move(B,K,Z);return}if(pe&64){de.move(F,B,K,G);return}if(de===qt){r(te,B,K);for(let Se=0;Se<ye.length;Se++)oe(ye[Se],B,K,Z);r(F.anchor,B,K);return}if(de===Xf){y(F,B,K);return}if(Z!==2&&pe&1&&me)if(Z===0)me.beforeEnter(te),r(te,B,K),sr(()=>me.enter(te),Q);else{const{leave:Se,delayLeave:ae,afterLeave:We}=me,Xe=()=>r(te,B,K),tt=()=>{Se(te,()=>{Xe(),We&&We()})};ae?ae(te,Xe,tt):tt()}else r(te,B,K)},xe=(F,B,K,Z=!1,Q=!1)=>{const{type:te,props:de,ref:me,children:ye,dynamicChildren:pe,shapeFlag:ce,patchFlag:Se,dirs:ae,cacheIndex:We}=F;if(Se===-2&&(Q=!1),me!=null&&k_(me,null,K,F,!0),We!=null&&(B.renderCache[We]=void 0),ce&256){B.ctx.deactivate(F);return}const Xe=ce&1&&ae,tt=!Gf(F);let ct;if(tt&&(ct=de&&de.onVnodeBeforeUnmount)&&Ii(ct,B,F),ce&6)Oe(F.component,K,Z);else{if(ce&128){F.suspense.unmount(K,Z);return}Xe&&vo(F,null,B,"beforeUnmount"),ce&64?F.type.remove(F,B,K,G,Z):pe&&!pe.hasOnce&&(te!==qt||Se>0&&Se&64)?Pe(pe,B,K,!1,!0):(te===qt&&Se&384||!Q&&ce&16)&&Pe(ye,B,K),Z&&_e(F)}(tt&&(ct=de&&de.onVnodeUnmounted)||Xe)&&sr(()=>{ct&&Ii(ct,B,F),Xe&&vo(F,null,B,"unmounted")},K)},_e=F=>{const{type:B,el:K,anchor:Z,transition:Q}=F;if(B===qt){ve(K,Z);return}if(B===Xf){_(F);return}const te=()=>{i(K),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(F.shapeFlag&1&&Q&&!Q.persisted){const{leave:de,delayLeave:me}=Q,ye=()=>de(K,te);me?me(F.el,te,ye):ye()}else te()},ve=(F,B)=>{let K;for(;F!==B;)K=h(F),i(F),F=K;i(B)},Oe=(F,B,K)=>{const{bum:Z,scope:Q,update:te,subTree:de,um:me,m:ye,a:pe}=F;C_(ye),C_(pe),Z&&n0(Z),Q.stop(),te&&(te.active=!1,xe(de,F,B,K)),me&&sr(me,B),sr(()=>{F.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},Pe=(F,B,K,Z=!1,Q=!1,te=0)=>{for(let de=te;de<F.length;de++)xe(F[de],B,K,Z,Q)},Ge=F=>{if(F.shapeFlag&6)return Ge(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const B=h(F.anchor||F.el),K=B&&B[KB];return K?h(K):B};let z=!1;const q=(F,B,K)=>{F==null?B._vnode&&xe(B._vnode,null,null,!0):g(B._vnode||null,F,B,null,null,null,K),B._vnode=F,z||(z=!0,S$(),A_(),z=!1)},G={p:g,um:xe,m:oe,r:_e,mt:D,mc:A,pc:I,pbc:k,n:Ge,o:e};let H,J;return t&&([H,J]=t(G)),{render:q,hydrate:H,createApp:Die(q,H)}}function HS({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function uf({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function nU(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function A3(e,t,n=!1){const r=e.children,i=t.children;if(Be(r)&&Be(i))for(let s=0;s<r.length;s++){const a=r[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=Dc(i[s]),o.el=a.el),!n&&o.patchFlag!==-2&&A3(a,o)),o.type===eu&&(o.el=a.el)}}function Gie(e){const t=e.slice(),n=[0];let r,i,s,a,o;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,e[n[o]]<c?s=o+1:a=o;c<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}function rU(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:rU(t)}function C_(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const iU=Symbol.for("v-scx"),sU=()=>s0(iU);function qie(e,t){return Z1(e,null,t)}function aU(e,t){return Z1(e,null,{flush:"post"})}function oU(e,t){return Z1(e,null,{flush:"sync"})}const Sv={};function Ll(e,t,n){return Z1(e,t,n)}function Z1(e,t,{immediate:n,deep:r,flush:i,once:s,onTrack:a,onTrigger:o}=Mt){if(t&&s){const w=t;t=(...E)=>{w(...E),b()}}const l=Yn,c=w=>r===!0?w:Bc(w,r===!1?1:void 0);let u,f=!1,h=!1;if(Dn(e)?(u=()=>e.value,f=fh(e)):Rl(e)?(u=()=>c(e),f=!0):Be(e)?(h=!0,f=e.some(w=>Rl(w)||fh(w)),u=()=>e.map(w=>{if(Dn(w))return w.value;if(Rl(w))return c(w);if(it(w))return $l(w,l,2)})):it(e)?t?u=()=>$l(e,l,2):u=()=>(d&&d(),ys(e,l,3,[p])):u=Jn,t&&r){const w=u;u=()=>Bc(w())}let d,p=w=>{d=y.onStop=()=>{$l(w,l,4),d=y.onStop=void 0}},g;if(Q1)if(p=Jn,t?n&&ys(t,l,3,[u(),h?[]:void 0,p]):u(),i==="sync"){const w=sU();g=w.__watcherHandles||(w.__watcherHandles=[])}else return Jn;let m=h?new Array(e.length).fill(Sv):Sv;const x=()=>{if(!(!y.active||!y.dirty))if(t){const w=y.run();(r||f||(h?w.some((E,A)=>mi(E,m[A])):mi(w,m)))&&(d&&d(),ys(t,l,3,[w,m===Sv?void 0:h&&m[0]===Sv?[]:m,p]),m=w)}else y.run()};x.allowRecurse=!!t;let v;i==="sync"?v=x:i==="post"?v=()=>sr(x,l&&l.suspense):(x.pre=!0,l&&(x.id=l.uid),v=()=>Gb(x));const y=new b0(u,Jn,v),_=l3(),b=()=>{y.stop(),_&&r3(_.effects,y)};return t?n?x():m=y.run():i==="post"?sr(y.run.bind(y),l&&l.suspense):y.run(),g&&g.push(b),b}function Xie(e,t,n){const r=this.proxy,i=ft(e)?e.includes(".")?lU(r,e):()=>r[e]:e.bind(r,r);let s;it(t)?s=t:(s=t.handler,n=t);const a=dh(this),o=Z1(i,s.bind(r),n);return a(),o}function lU(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Bc(e,t=1/0,n){if(t<=0||!Jt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Dn(e))Bc(e.value,t,n);else if(Be(e))for(let r=0;r<e.length;r++)Bc(e[r],t,n);else if(Wh(e)||e0(e))e.forEach(r=>{Bc(r,t,n)});else if(j7(e)){for(const r in e)Bc(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Bc(e[r],t,n)}return e}function Yie(e,t,n=Mt){const r=ac(),i=gn(t),s=zi(t),a=cU(e,t),o=mB((l,c)=>{let u,f=Mt,h;return oU(()=>{const d=e[t];mi(u,d)&&(u=d,c())}),{get(){return l(),n.get?n.get(u):u},set(d){const p=n.set?n.set(d):d;if(!mi(p,u)&&!(f!==Mt&&mi(d,f)))return;const g=r.vnode.props;g&&(t in g||i in g||s in g)&&(`onUpdate:${t}`in g||`onUpdate:${i}`in g||`onUpdate:${s}`in g)||(u=d,c()),r.emit(`update:${t}`,p),mi(d,p)&&mi(d,f)&&!mi(p,h)&&c(),f=d,h=p}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||Mt:o,done:!1}:{done:!0}}}},o}const cU=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${gn(t)}Modifiers`]||e[`${zi(t)}Modifiers`];function Kie(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Mt;let i=n;const s=t.startsWith("update:"),a=s&&cU(r,t.slice(7));a&&(a.trim&&(i=n.map(u=>ft(u)?u.trim():u)),a.number&&(i=n.map(b_)));let o,l=r[o=t0(t)]||r[o=t0(gn(t))];!l&&s&&(l=r[o=t0(zi(t))]),l&&ys(l,e,6,i);const c=r[o+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,ys(c,e,6,i)}}function uU(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let a={},o=!1;if(!it(e)){const l=c=>{const u=uU(c,t,!0);u&&(o=!0,Ut(a,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(Jt(e)&&r.set(e,null),null):(Be(s)?s.forEach(l=>a[l]=null):Ut(a,s),Jt(e)&&r.set(e,a),a)}function tE(e,t){return!e||!Vh(t)?!1:(t=t.slice(2).replace(/Once$/,""),Lt(e,t[0].toLowerCase()+t.slice(1))||Lt(e,zi(t))||Lt(e,t))}function Iy(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:f,data:h,setupState:d,ctx:p,inheritAttrs:g}=e,m=Jm(e);let x,v;try{if(n.shapeFlag&4){const _=i||r,b=_;x=Bi(c.call(b,_,u,f,d,h,p)),v=o}else{const _=t;x=Bi(_.length>1?_(f,{attrs:o,slots:a,emit:l}):_(f,null)),v=t.props?o:Zie(o)}}catch(_){mm.length=0,Gh(_,e,1),x=vt(Xn)}let y=x;if(v&&g!==!1){const _=Object.keys(v),{shapeFlag:b}=y;_.length&&b&7&&(s&&_.some(n3)&&(v=Qie(v,s)),y=Io(y,v,!1,!0))}return n.dirs&&(y=Io(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),x=y,Jm(m),x}function Jie(e,t=!0){let n;for(let r=0;r<e.length;r++){const i=e[r];if(du(i)){if(i.type!==Xn||i.children==="v-if"){if(n)return;n=i}}else return}return n}const Zie=e=>{let t;for(const n in e)(n==="class"||n==="style"||Vh(n))&&((t||(t={}))[n]=e[n]);return t},Qie=(e,t)=>{const n={};for(const r in e)(!n3(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function ese(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:o,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?R$(r,a,c):!!a;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==r[h]&&!tE(c,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?R$(r,a,c):!0:!!a;return!1}function R$(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!tE(n,s))return!0}return!1}function T3({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const rk=e=>e.__isSuspense;let ik=0;const tse={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,s,a,o,l,c){if(e==null)rse(t,n,r,i,s,a,o,l,c);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}ise(e,t,n,r,i,a,o,l,c)}},hydrate:sse,normalize:ase},nse=tse;function Qm(e,t){const n=e.props&&e.props[t];it(n)&&n()}function rse(e,t,n,r,i,s,a,o,l){const{p:c,o:{createElement:u}}=l,f=u("div"),h=e.suspense=fU(e,i,r,t,f,n,s,a,o,l);c(null,h.pendingBranch=e.ssContent,f,null,r,h,s,a),h.deps>0?(Qm(e,"onPending"),Qm(e,"onFallback"),c(null,e.ssFallback,t,n,r,null,s,a),a0(h,e.ssFallback)):h.resolve(!1,!0)}function ise(e,t,n,r,i,s,a,o,{p:l,um:c,o:{createElement:u}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const h=t.ssContent,d=t.ssFallback,{activeBranch:p,pendingBranch:g,isInFallback:m,isHydrating:x}=f;if(g)f.pendingBranch=h,Oa(h,g)?(l(g,h,f.hiddenContainer,null,i,f,s,a,o),f.deps<=0?f.resolve():m&&(x||(l(p,d,n,r,i,null,s,a,o),a0(f,d)))):(f.pendingId=ik++,x?(f.isHydrating=!1,f.activeBranch=g):c(g,i,f),f.deps=0,f.effects.length=0,f.hiddenContainer=u("div"),m?(l(null,h,f.hiddenContainer,null,i,f,s,a,o),f.deps<=0?f.resolve():(l(p,d,n,r,i,null,s,a,o),a0(f,d))):p&&Oa(h,p)?(l(p,h,n,r,i,f,s,a,o),f.resolve(!0)):(l(null,h,f.hiddenContainer,null,i,f,s,a,o),f.deps<=0&&f.resolve()));else if(p&&Oa(h,p))l(p,h,n,r,i,f,s,a,o),a0(f,h);else if(Qm(t,"onPending"),f.pendingBranch=h,h.shapeFlag&512?f.pendingId=h.component.suspenseId:f.pendingId=ik++,l(null,h,f.hiddenContainer,null,i,f,s,a,o),f.deps<=0)f.resolve();else{const{timeout:v,pendingId:y}=f;v>0?setTimeout(()=>{f.pendingId===y&&f.fallback(d)},v):v===0&&f.fallback(d)}}function fU(e,t,n,r,i,s,a,o,l,c,u=!1){const{p:f,m:h,um:d,n:p,o:{parentNode:g,remove:m}}=c;let x;const v=ose(e);v&&t&&t.pendingBranch&&(x=t.pendingId,t.deps++);const y=e.props?E_(e.props.timeout):void 0,_=s,b={vnode:e,parent:t,parentComponent:n,namespace:a,container:r,hiddenContainer:i,deps:0,pendingId:ik++,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(w=!1,E=!1){const{vnode:A,activeBranch:S,pendingBranch:k,pendingId:T,effects:O,parentComponent:C,container:D}=b;let N=!1;b.isHydrating?b.isHydrating=!1:w||(N=S&&k.transition&&k.transition.mode==="out-in",N&&(S.transition.afterLeave=()=>{T===b.pendingId&&(h(k,D,s===_?p(S):s,0),S_(O))}),S&&(g(S.el)!==b.hiddenContainer&&(s=p(S)),d(S,C,b,!0)),N||h(k,D,s,0)),a0(b,k),b.pendingBranch=null,b.isInFallback=!1;let R=b.parent,L=!1;for(;R;){if(R.pendingBranch){R.effects.push(...O),L=!0;break}R=R.parent}!L&&!N&&S_(O),b.effects=[],v&&t&&t.pendingBranch&&x===t.pendingId&&(t.deps--,t.deps===0&&!E&&t.resolve()),Qm(A,"onResolve")},fallback(w){if(!b.pendingBranch)return;const{vnode:E,activeBranch:A,parentComponent:S,container:k,namespace:T}=b;Qm(E,"onFallback");const O=p(A),C=()=>{b.isInFallback&&(f(null,w,k,O,S,null,T,o,l),a0(b,w))},D=w.transition&&w.transition.mode==="out-in";D&&(A.transition.afterLeave=C),b.isInFallback=!0,d(A,S,null,!0),D||C()},move(w,E,A){b.activeBranch&&h(b.activeBranch,w,E,A),b.container=w},next(){return b.activeBranch&&p(b.activeBranch)},registerDep(w,E,A){const S=!!b.pendingBranch;S&&b.deps++;const k=w.vnode.el;w.asyncDep.catch(T=>{Gh(T,w,0)}).then(T=>{if(w.isUnmounted||b.isUnmounted||b.pendingId!==w.suspenseId)return;w.asyncResolved=!0;const{vnode:O}=w;lk(w,T,!1),k&&(O.el=k);const C=!k&&w.subTree.el;E(w,O,g(k||w.subTree.el),k?null:p(w.subTree),b,a,A),C&&m(C),T3(w,O.el),S&&--b.deps===0&&b.resolve()})},unmount(w,E){b.isUnmounted=!0,b.activeBranch&&d(b.activeBranch,n,w,E),b.pendingBranch&&d(b.pendingBranch,n,w,E)}};return b}function sse(e,t,n,r,i,s,a,o,l){const c=t.suspense=fU(t,r,n,e.parentNode,document.createElement("div"),null,i,s,a,o,!0),u=l(e,c.pendingBranch=t.ssContent,n,c,s,a);return c.deps===0&&c.resolve(!1,!0),u}function ase(e){const{shapeFlag:t,children:n}=e,r=t&32;e.ssContent=$$(r?n.default:n),e.ssFallback=r?$$(n.fallback):vt(Xn)}function $$(e){let t;if(it(e)){const n=hh&&e._c;n&&(e._d=!1,je()),e=e(),n&&(e._d=!0,t=Yr,dU())}return Be(e)&&(e=Jie(e)),e=Bi(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function hU(e,t){t&&t.pendingBranch?Be(e)?t.effects.push(...e):t.effects.push(e):S_(e)}function a0(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e;let i=t.el;for(;!i&&t.component;)t=t.component.subTree,i=t.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,T3(r,i))}function ose(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const qt=Symbol.for("v-fgt"),eu=Symbol.for("v-txt"),Xn=Symbol.for("v-cmt"),Xf=Symbol.for("v-stc"),mm=[];let Yr=null;function je(e=!1){mm.push(Yr=e?null:[])}function dU(){mm.pop(),Yr=mm[mm.length-1]||null}let hh=1;function sk(e){hh+=e,e<0&&Yr&&(Yr.hasOnce=!0)}function pU(e){return e.dynamicChildren=hh>0?Yr||Qd:null,dU(),hh>0&&Yr&&Yr.push(e),e}function Qe(e,t,n,r,i,s){return pU(se(e,t,n,r,i,s,!0))}function S0(e,t,n,r,i){return pU(vt(e,t,n,r,i,!0))}function du(e){return e?e.__v_isVNode===!0:!1}function Oa(e,t){return e.type===t.type&&e.key===t.key}function lse(e){}const gU=({key:e})=>e??null,Ly=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ft(e)||Dn(e)||it(e)?{i:Zn,r:e,k:t,f:!!n}:e:null);function se(e,t=null,n=null,r=0,i=null,s=e===qt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&gU(t),ref:t&&Ly(t),scopeId:qb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Zn};return o?(k3(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=ft(n)?8:16),hh>0&&!a&&Yr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Yr.push(l),l}const vt=cse;function cse(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===RB)&&(e=Xn),du(e)){const o=Io(e,t,!0);return n&&k3(o,n),hh>0&&!s&&Yr&&(o.shapeFlag&6?Yr[Yr.indexOf(e)]=o:Yr.push(o)),o.patchFlag=-2,o}if(mse(e)&&(e=e.__vccOpts),t){t=mU(t);let{class:o,style:l}=t;o&&!ft(o)&&(t.class=Bu(o)),Jt(l)&&(d3(l)&&!Be(l)&&(l=Ut({},l)),t.style=Pu(l))}const a=ft(e)?1:rk(e)?128:Bie(e)?64:Jt(e)?4:it(e)?2:0;return se(e,t,n,r,i,a,s,!0)}function mU(e){return e?d3(e)||VB(e)?Ut({},e):e:null}function Io(e,t,n=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:l}=e,c=t?xU(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&gU(c),ref:t&&t.ref?n&&s?Be(s)?s.concat(Ly(t)):[s,Ly(t)]:Ly(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==qt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Io(e.ssContent),ssFallback:e.ssFallback&&Io(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&hu(u,l.clone(u)),u}function Co(e=" ",t=0){return vt(eu,null,e,t)}function use(e,t){const n=vt(Xf,null,e);return n.staticCount=t,n}function Cr(e="",t=!1){return t?(je(),S0(Xn,null,e)):vt(Xn,null,e)}function Bi(e){return e==null||typeof e=="boolean"?vt(Xn):Be(e)?vt(qt,null,e.slice()):typeof e=="object"?Dc(e):vt(eu,null,String(e))}function Dc(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Io(e)}function k3(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Be(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),k3(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!VB(t)?t._ctx=Zn:i===3&&Zn&&(Zn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:Zn},n=32):(t=String(t),r&64?(n=16,t=[Co(t)]):n=8);e.children=t,e.shapeFlag|=n}function xU(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Bu([t.class,r.class]));else if(i==="style")t.style=Pu([t.style,r.style]);else if(Vh(i)){const s=t[i],a=r[i];a&&s!==a&&!(Be(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=r[i])}return t}function Ii(e,t,n,r=null){ys(e,t,7,[n,r])}const fse=PB();let hse=0;function vU(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||fse,s={uid:hse++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new a3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jB(r,i),emitsOptions:uU(r,i),emit:null,emitted:null,propsDefaults:Mt,inheritAttrs:r.inheritAttrs,ctx:Mt,data:Mt,props:Mt,attrs:Mt,slots:Mt,refs:Mt,setupState:Mt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Kie.bind(null,s),e.ce&&e.ce(s),s}let Yn=null;const ac=()=>Yn||Zn;let F_,ak;{const e=q7(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};F_=t("__VUE_INSTANCE_SETTERS__",n=>Yn=n),ak=t("__VUE_SSR_SETTERS__",n=>Q1=n)}const dh=e=>{const t=Yn;return F_(e),e.scope.on(),()=>{e.scope.off(),F_(t)}},ok=()=>{Yn&&Yn.scope.off(),F_(null)};function yU(e){return e.vnode.shapeFlag&4}let Q1=!1;function _U(e,t=!1,n=!1){t&&ak(t);const{props:r,children:i}=e.vnode,s=yU(e);Mie(e,r,s,t),Lie(e,i,n);const a=s?dse(e,t):void 0;return t&&ak(!1),a}function dse(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ZT);const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?wU(e):null,s=dh(e);Uu();const a=$l(r,e,0,[e.props,i]);if(zu(),s(),i3(a)){if(a.then(ok,ok),t)return a.then(o=>{lk(e,o,t)}).catch(o=>{Gh(o,e,0)});e.asyncDep=a}else lk(e,a,t)}else EU(e,t)}function lk(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Jt(t)&&(e.setupState=m3(t)),EU(e,n)}let O_,ck;function bU(e){O_=e,ck=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,hie))}}const pse=()=>!O_;function EU(e,t,n){const r=e.type;if(!e.render){if(!t&&O_&&!r.render){const i=r.template||w3(e).template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=r,c=Ut(Ut({isCustomElement:s,delimiters:o},a),l);r.render=O_(i,c)}}e.render=r.render||Jn,ck&&ck(e)}{const i=dh(e);Uu();try{Tie(e)}finally{zu(),i()}}}const gse={get(e,t){return Yi(e,"get",""),e[t]}};function wU(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,gse),slots:e.slots,emit:e.emit,expose:t}}function ex(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(m3(jb(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in pm)return pm[n](e)},has(t,n){return n in t||n in pm}})):e.proxy}function uk(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function mse(e){return it(e)&&"__vccOpts"in e}const tu=(e,t)=>$re(e,t,Q1);function SU(e,t,n){const r=arguments.length;return r===2?Jt(t)&&!Be(t)?du(t)?vt(e,null,[t]):vt(e,t):vt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&du(n)&&(n=[n]),vt(e,t,n))}function xse(){}function vse(e,t,n,r){const i=n[r];if(i&&AU(i,e))return i;const s=t();return s.memo=e.slice(),s.cacheIndex=r,n[r]=s}function AU(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(mi(n[r],t[r]))return!1;return hh>0&&Yr&&Yr.push(e),!0}const TU="3.4.37",yse=Jn,_se=Yre,bse=$d,Ese=EB,wse={createComponentInstance:vU,setupComponent:_U,renderComponentRoot:Iy,setCurrentRenderingInstance:Jm,isVNode:du,normalizeVNode:Bi,getComponentPublicInstance:ex,ensureValidVNode:E3},Sse=wse,Ase=null,Tse=null,kse=null;/**
* @vue/runtime-dom v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Cse="http://www.w3.org/2000/svg",Fse="http://www.w3.org/1998/Math/MathML",xl=typeof document<"u"?document:null,I$=xl&&xl.createElement("template"),Ose={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?xl.createElementNS(Cse,e):t==="mathml"?xl.createElementNS(Fse,e):n?xl.createElement(e,{is:n}):xl.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>xl.createTextNode(e),createComment:e=>xl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>xl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{I$.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const o=I$.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},yc="transition",og="animation",A0=Symbol("_vtc"),C3=(e,{slots:t})=>SU(SB,CU(e),t);C3.displayName="Transition";const kU={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Nse=C3.props=Ut({},y3,kU),ff=(e,t=[])=>{Be(e)?e.forEach(n=>n(...t)):e&&e(...t)},L$=e=>e?Be(e)?e.some(t=>t.length>1):e.length>1:!1;function CU(e){const t={};for(const O in e)O in kU||(t[O]=e[O]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,p=Dse(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:x,onEnter:v,onEnterCancelled:y,onLeave:_,onLeaveCancelled:b,onBeforeAppear:w=x,onAppear:E=v,onAppearCancelled:A=y}=t,S=(O,C,D)=>{Ac(O,C?u:o),Ac(O,C?c:a),D&&D()},k=(O,C)=>{O._isLeaving=!1,Ac(O,f),Ac(O,d),Ac(O,h),C&&C()},T=O=>(C,D)=>{const N=O?E:v,R=()=>S(C,O,D);ff(N,[C,R]),P$(()=>{Ac(C,O?l:s),gl(C,O?u:o),L$(N)||B$(C,r,g,R)})};return Ut(t,{onBeforeEnter(O){ff(x,[O]),gl(O,s),gl(O,a)},onBeforeAppear(O){ff(w,[O]),gl(O,l),gl(O,c)},onEnter:T(!1),onAppear:T(!0),onLeave(O,C){O._isLeaving=!0;const D=()=>k(O,C);gl(O,f),gl(O,h),OU(),P$(()=>{O._isLeaving&&(Ac(O,f),gl(O,d),L$(_)||B$(O,r,m,D))}),ff(_,[O,D])},onEnterCancelled(O){S(O,!1),ff(y,[O])},onAppearCancelled(O){S(O,!0),ff(A,[O])},onLeaveCancelled(O){k(O),ff(b,[O])}})}function Dse(e){if(e==null)return null;if(Jt(e))return[VS(e.enter),VS(e.leave)];{const t=VS(e);return[t,t]}}function VS(e){return E_(e)}function gl(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[A0]||(e[A0]=new Set)).add(t)}function Ac(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[A0];n&&(n.delete(t),n.size||(e[A0]=void 0))}function P$(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Mse=0;function B$(e,t,n,r){const i=e._endId=++Mse,s=()=>{i===e._endId&&r()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=FU(e,t);if(!a)return r();const c=a+"end";let u=0;const f=()=>{e.removeEventListener(c,h),s()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},o+1),e.addEventListener(c,h)}function FU(e,t){const n=window.getComputedStyle(e),r=p=>(n[p]||"").split(", "),i=r(`${yc}Delay`),s=r(`${yc}Duration`),a=U$(i,s),o=r(`${og}Delay`),l=r(`${og}Duration`),c=U$(o,l);let u=null,f=0,h=0;t===yc?a>0&&(u=yc,f=a,h=s.length):t===og?c>0&&(u=og,f=c,h=l.length):(f=Math.max(a,c),u=f>0?a>c?yc:og:null,h=u?u===yc?s.length:l.length:0);const d=u===yc&&/\b(transform|all)(,|$)/.test(r(`${yc}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function U$(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>z$(n)+z$(e[r])))}function z$(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function OU(){return document.body.offsetHeight}function Rse(e,t,n){const r=e[A0];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const N_=Symbol("_vod"),NU=Symbol("_vsh"),DU={beforeMount(e,{value:t},{transition:n}){e[N_]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):lg(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),lg(e,!0),r.enter(e)):r.leave(e,()=>{lg(e,!1)}):lg(e,t))},beforeUnmount(e,{value:t}){lg(e,t)}};function lg(e,t){e.style.display=t?e[N_]:"none",e[NU]=!t}function $se(){DU.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const MU=Symbol("");function Ise(e){const t=ac();if(!t)return;const n=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>hk(s,i))},r=()=>{const i=e(t.proxy);fk(t.subTree,i),n(i)};Jb(()=>{aU(r)}),Hu(()=>{const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),eE(()=>i.disconnect())})}function fk(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{fk(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)hk(e.el,t);else if(e.type===qt)e.children.forEach(n=>fk(n,t));else if(e.type===Xf){let{el:n,anchor:r}=e;for(;n&&(hk(n,t),n!==r);)n=n.nextSibling}}function hk(e,t){if(e.nodeType===1){const n=e.style;let r="";for(const i in t)n.setProperty(`--${i}`,t[i]),r+=`--${i}: ${t[i]};`;n[MU]=r}}const Lse=/(^|;)\s*display\s*:/;function Pse(e,t,n){const r=e.style,i=ft(n);let s=!1;if(n&&!i){if(t)if(ft(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&Py(r,o,"")}else for(const a in t)n[a]==null&&Py(r,a,"");for(const a in n)a==="display"&&(s=!0),Py(r,a,n[a])}else if(i){if(t!==n){const a=r[MU];a&&(n+=";"+a),r.cssText=n,s=Lse.test(n)}}else t&&e.removeAttribute("style");N_ in e&&(e[N_]=s?r.display:"",e[NU]&&(r.display="none"))}const H$=/\s*!important$/;function Py(e,t,n){if(Be(n))n.forEach(r=>Py(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Bse(e,t);H$.test(n)?e.setProperty(zi(r),n.replace(H$,""),"important"):e[r]=n}}const V$=["Webkit","Moz","ms"],WS={};function Bse(e,t){const n=WS[t];if(n)return n;let r=gn(t);if(r!=="filter"&&r in e)return WS[t]=r;r=jh(r);for(let i=0;i<V$.length;i++){const s=V$[i]+r;if(s in e)return WS[t]=s}return t}const W$="http://www.w3.org/1999/xlink";function j$(e,t,n,r,i,s=ure(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(W$,t.slice(6,t.length)):e.setAttributeNS(W$,t,n):n==null||s&&!Y7(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Ss(n)?String(n):n)}function Use(e,t,n,r){if(t==="innerHTML"||t==="textContent"){if(n==null)return;e[t]=n;return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,o=n==null?"":String(n);(a!==o||!("_value"in e))&&(e.value=o),n==null&&e.removeAttribute(t),e._value=n;return}let s=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Y7(n):n==null&&a==="string"?(n="",s=!0):a==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(t)}function El(e,t,n,r){e.addEventListener(t,n,r)}function zse(e,t,n,r){e.removeEventListener(t,n,r)}const G$=Symbol("_vei");function Hse(e,t,n,r,i=null){const s=e[G$]||(e[G$]={}),a=s[t];if(r&&a)a.value=r;else{const[o,l]=Vse(t);if(r){const c=s[t]=Gse(r,i);El(e,o,c,l)}else a&&(zse(e,o,a,l),s[t]=void 0)}}const q$=/(?:Once|Passive|Capture)$/;function Vse(e){let t;if(q$.test(e)){t={};let r;for(;r=e.match(q$);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):zi(e.slice(2)),t]}let jS=0;const Wse=Promise.resolve(),jse=()=>jS||(Wse.then(()=>jS=0),jS=Date.now());function Gse(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ys(qse(r,n.value),t,5,[r])};return n.value=e,n.attached=jse(),n}function qse(e,t){if(Be(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const X$=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Xse=(e,t,n,r,i,s)=>{const a=i==="svg";t==="class"?Rse(e,r,a):t==="style"?Pse(e,n,r):Vh(t)?n3(t)||Hse(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Yse(e,t,r,a))?(Use(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&j$(e,t,r,a,s,t!=="value")):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),j$(e,t,r,a))};function Yse(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&X$(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return X$(t)&&ft(n)?!1:t in e}/*! #__NO_SIDE_EFFECTS__ */function RU(e,t,n){const r=vr(e,t);class i extends nE{constructor(a){super(r,a,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const Kse=(e,t)=>RU(e,t,VU),Jse=typeof HTMLElement<"u"?HTMLElement:class{};class nE extends Jse{constructor(t,n={},r){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this._ob=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Jl(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),dk(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,i=!1)=>{const{props:s,styles:a}=r;let o;if(s&&!Be(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=E_(this._props[l])),(o||(o=Object.create(null)))[gn(l)]=!0)}this._numberProps=o,i&&this._resolveProps(r),this._applyStyles(a),this._update()},n=this._def.__asyncLoader;n?n().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:n}=t,r=Be(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i],!0,!1);for(const i of r.map(gn))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s)}})}_setAttr(t){let n=this.hasAttribute(t)?this.getAttribute(t):void 0;const r=gn(t);this._numberProps&&this._numberProps[r]&&(n=E_(n)),this._setProp(r,n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,i=!0){n!==this._props[t]&&(this._props[t]=n,i&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(zi(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(zi(t),n+""):n||this.removeAttribute(zi(t))))}_update(){dk(this._createVNode(),this.shadowRoot)}_createVNode(){const t=vt(this._def,Ut({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0;const r=(s,a)=>{this.dispatchEvent(new CustomEvent(s,{detail:a}))};n.emit=(s,...a)=>{r(s,a),zi(s)!==s&&r(zi(s),a)};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof nE){n.parent=i._instance,n.provides=i._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function Zse(e="$style"){{const t=ac();if(!t)return Mt;const n=t.type.__cssModules;if(!n)return Mt;const r=n[e];return r||Mt}}const $U=new WeakMap,IU=new WeakMap,D_=Symbol("_moveCb"),Y$=Symbol("_enterCb"),LU={name:"TransitionGroup",props:Ut({},Nse,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=ac(),r=v3();let i,s;return Zb(()=>{if(!i.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!iae(i[0].el,n.vnode.el,a))return;i.forEach(tae),i.forEach(nae);const o=i.filter(rae);OU(),o.forEach(l=>{const c=l.el,u=c.style;gl(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[D_]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",f),c[D_]=null,Ac(c,a))};c.addEventListener("transitionend",f)})}),()=>{const a=Ct(e),o=CU(a);let l=a.tag||qt;if(i=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(i.push(u),hu(u,w0(u,o,r,n)),$U.set(u,u.el.getBoundingClientRect()))}s=t.default?Yb(t.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&hu(u,w0(u,o,r,n))}return vt(l,null,s)}}},Qse=e=>delete e.mode;LU.props;const eae=LU;function tae(e){const t=e.el;t[D_]&&t[D_](),t[Y$]&&t[Y$]()}function nae(e){IU.set(e,e.el.getBoundingClientRect())}function rae(e){const t=$U.get(e),n=IU.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function iae(e,t,n){const r=e.cloneNode(),i=e[A0];i&&i.forEach(o=>{o.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(r);const{hasTransform:a}=FU(r);return s.removeChild(r),a}const pu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Be(t)?n=>n0(t,n):t};function sae(e){e.target.composing=!0}function K$(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ta=Symbol("_assign"),e1={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[ta]=pu(i);const s=r||i.props&&i.props.type==="number";El(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),s&&(o=b_(o)),e[ta](o)}),n&&El(e,"change",()=>{e.value=e.value.trim()}),t||(El(e,"compositionstart",sae),El(e,"compositionend",K$),El(e,"change",K$))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},a){if(e[ta]=pu(a),e.composing)return;const o=(s||e.type==="number")&&!/^0\d/.test(e.value)?b_(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===l)||(e.value=l))}},t1={deep:!0,created(e,t,n){e[ta]=pu(n),El(e,"change",()=>{const r=e._modelValue,i=T0(e),s=e.checked,a=e[ta];if(Be(r)){const o=zb(r,i),l=o!==-1;if(s&&!l)a(r.concat(i));else if(!s&&l){const c=[...r];c.splice(o,1),a(c)}}else if(Wh(r)){const o=new Set(r);s?o.add(i):o.delete(i),a(o)}else a(PU(e,s))})},mounted:J$,beforeUpdate(e,t,n){e[ta]=pu(n),J$(e,t,n)}};function J$(e,{value:t,oldValue:n},r){e._modelValue=t,Be(t)?e.checked=zb(t,r.props.value)>-1:Wh(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=uu(t,PU(e,!0)))}const F3={created(e,{value:t},n){e.checked=uu(t,n.props.value),e[ta]=pu(n),El(e,"change",()=>{e[ta](T0(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[ta]=pu(r),t!==n&&(e.checked=uu(t,r.props.value))}},O3={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=Wh(t);El(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?b_(T0(a)):T0(a));e[ta](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,Jl(()=>{e._assigning=!1})}),e[ta]=pu(r)},mounted(e,{value:t,modifiers:{number:n}}){Z$(e,t)},beforeUpdate(e,t,n){e[ta]=pu(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||Z$(e,t)}};function Z$(e,t,n){const r=e.multiple,i=Be(t);if(!(r&&!i&&!Wh(t))){for(let s=0,a=e.options.length;s<a;s++){const o=e.options[s],l=T0(o);if(r)if(i){const c=typeof l;c==="string"||c==="number"?o.selected=t.some(u=>String(u)===String(l)):o.selected=zb(t,l)>-1}else o.selected=t.has(l);else if(uu(T0(o),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function T0(e){return"_value"in e?e._value:e.value}function PU(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const N3={created(e,t,n){Av(e,t,n,null,"created")},mounted(e,t,n){Av(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Av(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Av(e,t,n,r,"updated")}};function BU(e,t){switch(e){case"SELECT":return O3;case"TEXTAREA":return e1;default:switch(t){case"checkbox":return t1;case"radio":return F3;default:return e1}}}function Av(e,t,n,r,i){const a=BU(e.tagName,n.props&&n.props.type)[i];a&&a(e,t,n,r)}function aae(){e1.getSSRProps=({value:e})=>({value:e}),F3.getSSRProps=({value:e},t)=>{if(t.props&&uu(t.props.value,e))return{checked:!0}},t1.getSSRProps=({value:e},t)=>{if(Be(e)){if(t.props&&zb(e,t.props.value)>-1)return{checked:!0}}else if(Wh(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},N3.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=BU(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const oae=["ctrl","shift","alt","meta"],lae={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>oae.some(n=>e[`${n}Key`]&&!t.includes(n))},cae=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...s)=>{for(let a=0;a<t.length;a++){const o=lae[t[a]];if(o&&o(i,t))return}return e(i,...s)})},uae={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fae=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=zi(i.key);if(t.some(a=>a===s||uae[a]===s))return e(i)})},UU=Ut({patchProp:Xse},Ose);let xm,Q$=!1;function zU(){return xm||(xm=QB(UU))}function HU(){return xm=Q$?xm:eU(UU),Q$=!0,xm}const dk=(...e)=>{zU().render(...e)},VU=(...e)=>{HU().hydrate(...e)},WU=(...e)=>{const t=zU().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=GU(r);if(!i)return;const s=t._component;!it(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,jU(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t},hae=(...e)=>{const t=HU().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=GU(r);if(i)return n(i,!0,jU(i))},t};function jU(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function GU(e){return ft(e)?document.querySelector(e):e}let eI=!1;const dae=()=>{eI||(eI=!0,aae(),$se())},pae=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:SB,BaseTransitionPropsValidators:y3,Comment:Xn,DeprecationTypes:kse,EffectScope:a3,ErrorCodes:Xre,ErrorTypeStrings:_se,Fragment:qt,KeepAlive:iie,ReactiveEffect:b0,Static:Xf,Suspense:nse,Teleport:Hie,Text:eu,TrackOpTypes:jre,Transition:C3,TransitionGroup:eae,TriggerOpTypes:Gre,VueElement:nE,assertNumber:qre,callWithAsyncErrorHandling:ys,callWithErrorHandling:$l,camelize:gn,capitalize:jh,cloneVNode:Io,compatUtils:Tse,computed:tu,createApp:WU,createBlock:S0,createCommentVNode:Cr,createElementBlock:Qe,createElementVNode:se,createHydrationRenderer:eU,createPropsRestProxy:Sie,createRenderer:QB,createSSRApp:hae,createSlots:uie,createStaticVNode:use,createTextVNode:Co,createVNode:vt,customRef:mB,defineAsyncComponent:nie,defineComponent:vr,defineCustomElement:RU,defineEmits:pie,defineExpose:gie,defineModel:vie,defineOptions:mie,defineProps:die,defineSSRCustomElement:Kse,defineSlots:xie,devtools:bse,effect:dre,effectScope:o3,getCurrentInstance:ac,getCurrentScope:l3,getTransitionRawChildren:Yb,guardReactiveProps:mU,h:SU,handleError:Gh,hasInjectionContext:UB,hydrate:VU,initCustomFormatter:xse,initDirectivesForSSR:dae,inject:s0,isMemoSame:AU,isProxy:d3,isReactive:Rl,isReadonly:fu,isRef:Dn,isRuntimeOnly:pse,isShallow:fh,isVNode:du,markRaw:jb,mergeDefaults:Eie,mergeModels:wie,mergeProps:xU,nextTick:Jl,normalizeClass:Bu,normalizeProps:ere,normalizeStyle:Pu,onActivated:TB,onBeforeMount:Jb,onBeforeUnmount:Qb,onBeforeUpdate:FB,onDeactivated:kB,onErrorCaptured:MB,onMounted:Hu,onRenderTracked:DB,onRenderTriggered:NB,onScopeDispose:Q7,onServerPrefetch:OB,onUnmounted:eE,onUpdated:Zb,openBlock:je,popScopeId:K1,provide:BB,proxyRefs:m3,pushScopeId:Y1,queuePostFlushCb:S_,reactive:rs,readonly:h3,ref:zn,registerRuntimeCompiler:bU,render:dk,renderList:Il,renderSlot:$B,resolveComponent:oie,resolveDirective:cie,resolveDynamicComponent:lie,resolveFilter:Ase,resolveTransitionHooks:w0,setBlockTracking:sk,setDevtoolsHook:Ese,setTransitionHooks:hu,shallowReactive:dB,shallowReadonly:Rre,shallowRef:Ire,ssrContextKey:iU,ssrUtils:Sse,stop:pre,toDisplayString:Ua,toHandlerKey:t0,toHandlers:fie,toRaw:Ct,toRef:Wre,toRefs:xB,toValue:Bre,transformVNodeArgs:lse,triggerRef:Pre,unref:Wt,useAttrs:bie,useCssModule:Zse,useCssVars:Ise,useModel:Yie,useSSRContext:sU,useSlots:_ie,useTransitionState:v3,vModelCheckbox:t1,vModelDynamic:N3,vModelRadio:F3,vModelSelect:O3,vModelText:e1,vShow:DU,version:TU,warn:yse,watch:Ll,watchEffect:qie,watchPostEffect:aU,watchSyncEffect:oU,withAsyncContext:Aie,withCtx:Xb,withDefaults:yie,withDirectives:E0,withKeys:fae,withMemo:vse,withModifiers:cae,withScopeId:eie},Symbol.toStringTag,{value:"Module"}));/**
* @vue/compiler-core v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const n1=Symbol(""),vm=Symbol(""),D3=Symbol(""),M_=Symbol(""),qU=Symbol(""),ph=Symbol(""),XU=Symbol(""),YU=Symbol(""),M3=Symbol(""),R3=Symbol(""),tx=Symbol(""),$3=Symbol(""),KU=Symbol(""),I3=Symbol(""),L3=Symbol(""),P3=Symbol(""),B3=Symbol(""),U3=Symbol(""),z3=Symbol(""),JU=Symbol(""),ZU=Symbol(""),rE=Symbol(""),R_=Symbol(""),H3=Symbol(""),V3=Symbol(""),r1=Symbol(""),nx=Symbol(""),W3=Symbol(""),pk=Symbol(""),gae=Symbol(""),gk=Symbol(""),$_=Symbol(""),mae=Symbol(""),xae=Symbol(""),j3=Symbol(""),vae=Symbol(""),yae=Symbol(""),G3=Symbol(""),QU=Symbol(""),k0={[n1]:"Fragment",[vm]:"Teleport",[D3]:"Suspense",[M_]:"KeepAlive",[qU]:"BaseTransition",[ph]:"openBlock",[XU]:"createBlock",[YU]:"createElementBlock",[M3]:"createVNode",[R3]:"createElementVNode",[tx]:"createCommentVNode",[$3]:"createTextVNode",[KU]:"createStaticVNode",[I3]:"resolveComponent",[L3]:"resolveDynamicComponent",[P3]:"resolveDirective",[B3]:"resolveFilter",[U3]:"withDirectives",[z3]:"renderList",[JU]:"renderSlot",[ZU]:"createSlots",[rE]:"toDisplayString",[R_]:"mergeProps",[H3]:"normalizeClass",[V3]:"normalizeStyle",[r1]:"normalizeProps",[nx]:"guardReactiveProps",[W3]:"toHandlers",[pk]:"camelize",[gae]:"capitalize",[gk]:"toHandlerKey",[$_]:"setBlockTracking",[mae]:"pushScopeId",[xae]:"popScopeId",[j3]:"withCtx",[vae]:"unref",[yae]:"isRef",[G3]:"withMemo",[QU]:"isMemoSame"};function _ae(e){Object.getOwnPropertySymbols(e).forEach(t=>{k0[t]=e[t]})}const $s={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function bae(e,t=""){return{type:0,source:t,children:e,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:$s}}function i1(e,t,n,r,i,s,a,o=!1,l=!1,c=!1,u=$s){return e&&(o?(e.helper(ph),e.helper(O0(e.inSSR,c))):e.helper(F0(e.inSSR,c)),a&&e.helper(U3)),{type:13,tag:t,props:n,children:r,patchFlag:i,dynamicProps:s,directives:a,isBlock:o,disableTracking:l,isComponent:c,loc:u}}function rx(e,t=$s){return{type:17,loc:t,elements:e}}function Xs(e,t=$s){return{type:15,loc:t,properties:e}}function Nn(e,t){return{type:16,loc:$s,key:ft(e)?dt(e,!0):e,value:t}}function dt(e,t=!1,n=$s,r=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:r}}function za(e,t=$s){return{type:8,loc:t,children:e}}function Gn(e,t=[],n=$s){return{type:14,loc:n,callee:e,arguments:t}}function C0(e,t=void 0,n=!1,r=!1,i=$s){return{type:18,params:e,returns:t,newline:n,isSlot:r,loc:i}}function mk(e,t,n,r=!0){return{type:19,test:e,consequent:t,alternate:n,newline:r,loc:$s}}function Eae(e,t,n=!1){return{type:20,index:e,value:t,isVOnce:n,loc:$s}}function wae(e){return{type:21,body:e,loc:$s}}function F0(e,t){return e||t?M3:R3}function O0(e,t){return e||t?XU:YU}function q3(e,{helper:t,removeHelper:n,inSSR:r}){e.isBlock||(e.isBlock=!0,n(F0(r,e.isComponent)),t(ph),t(O0(r,e.isComponent)))}const tI=new Uint8Array([123,123]),nI=new Uint8Array([125,125]);function rI(e){return e>=97&&e<=122||e>=65&&e<=90}function us(e){return e===32||e===10||e===9||e===12||e===13}function _c(e){return e===47||e===62||us(e)}function I_(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}const Ir={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class Sae{constructor(t,n){this.stack=t,this.cbs=n,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=tI,this.delimiterClose=nI,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=tI,this.delimiterClose=nI}getPos(t){let n=1,r=t+1;for(let i=this.newlines.length-1;i>=0;i--){const s=this.newlines[i];if(t>s){n=i+2,r=t-s;break}}return{column:r,line:n,offset:t}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(t){t===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&t===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(t))}stateInterpolationOpen(t){if(t===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const n=this.index+1-this.delimiterOpen.length;n>this.sectionStart&&this.cbs.ontext(this.sectionStart,n),this.state=3,this.sectionStart=n}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(t)):(this.state=1,this.stateText(t))}stateInterpolation(t){t===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(t))}stateInterpolationClose(t){t===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(t))}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?_c(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(t)}stateInRCDATA(t){if(this.sequenceIndex===this.currentSequence.length){if(t===62||us(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const r=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=r}this.sectionStart=n+2,this.stateInClosingTagName(t),this.inRCDATA=!1;return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Ir.TitleEnd||this.currentSequence===Ir.TextareaEnd&&!this.inSFCRoot?t===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(t)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===60)}stateCDATASequence(t){t===Ir.Cdata[this.sequenceIndex]?++this.sequenceIndex===Ir.Cdata.length&&(this.state=28,this.currentSequence=Ir.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length;){const n=this.buffer.charCodeAt(this.index);if(n===10&&this.newlines.push(this.index),n===t)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Ir.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(t,n){this.enterRCDATA(t,n),this.state=31}enterRCDATA(t,n){this.inRCDATA=!0,this.currentSequence=t,this.sequenceIndex=n}stateBeforeTagName(t){t===33?(this.state=22,this.sectionStart=this.index+1):t===63?(this.state=24,this.sectionStart=this.index+1):rI(t)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:t===116?this.state=30:this.state=t===115?29:6):t===47?this.state=8:(this.state=1,this.stateText(t))}stateInTagName(t){_c(t)&&this.handleTagName(t)}stateInSFCRootTagName(t){if(_c(t)){const n=this.buffer.slice(this.sectionStart,this.index);n!=="template"&&this.enterRCDATA(I_("</"+n),0),this.handleTagName(t)}}handleTagName(t){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(t)}stateBeforeClosingTagName(t){us(t)||(t===62?(this.state=1,this.sectionStart=this.index+1):(this.state=rI(t)?9:27,this.sectionStart=this.index))}stateInClosingTagName(t){(t===62||us(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){t===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(t){t===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):t===47?this.state=7:t===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):us(t)||this.handleAttrStart(t)}handleAttrStart(t){t===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):t===46||t===58||t===64||t===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):us(t)||(this.state=11,this.stateBeforeAttrName(t))}stateInAttrName(t){(t===61||_c(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(t))}stateInDirName(t){t===61||_c(t)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):t===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(t){t===61||_c(t)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===91?this.state=15:t===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(t){t===93?this.state=14:(t===61||_c(t))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(t))}stateInDirModifier(t){t===61||_c(t)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(t){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(t)}stateAfterAttrName(t){t===61?this.state=18:t===47||t===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(t)):us(t)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(t))}stateBeforeAttrValue(t){t===34?(this.state=19,this.sectionStart=this.index+1):t===39?(this.state=20,this.sectionStart=this.index+1):us(t)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(t))}handleInAttrValue(t,n){(t===n||this.fastForwardTo(n))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(t){this.handleInAttrValue(t,34)}stateInAttrValueSingleQuotes(t){this.handleInAttrValue(t,39)}stateInAttrValueNoQuotes(t){us(t)||t===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(t)):(t===39||t===60||t===61||t===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(t){t===91?(this.state=26,this.sequenceIndex=0):this.state=t===45?25:23}stateInDeclaration(t){(t===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(t){t===45?(this.state=28,this.currentSequence=Ir.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(t){(t===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){t===Ir.ScriptEnd[3]?this.startSpecial(Ir.ScriptEnd,4):t===Ir.StyleEnd[3]?this.startSpecial(Ir.StyleEnd,4):(this.state=6,this.stateInTagName(t))}stateBeforeSpecialT(t){t===Ir.TitleEnd[3]?this.startSpecial(Ir.TitleEnd,4):t===Ir.TextareaEnd[3]?this.startSpecial(Ir.TextareaEnd,4):(this.state=6,this.stateInTagName(t))}startEntity(){}stateInEntity(){}parse(t){for(this.buffer=t;this.index<this.buffer.length;){const n=this.buffer.charCodeAt(this.index);switch(n===10&&this.newlines.push(this.index),this.state){case 1:{this.stateText(n);break}case 2:{this.stateInterpolationOpen(n);break}case 3:{this.stateInterpolation(n);break}case 4:{this.stateInterpolationClose(n);break}case 31:{this.stateSpecialStartSequence(n);break}case 32:{this.stateInRCDATA(n);break}case 26:{this.stateCDATASequence(n);break}case 19:{this.stateInAttrValueDoubleQuotes(n);break}case 12:{this.stateInAttrName(n);break}case 13:{this.stateInDirName(n);break}case 14:{this.stateInDirArg(n);break}case 15:{this.stateInDynamicDirArg(n);break}case 16:{this.stateInDirModifier(n);break}case 28:{this.stateInCommentLike(n);break}case 27:{this.stateInSpecialComment(n);break}case 11:{this.stateBeforeAttrName(n);break}case 6:{this.stateInTagName(n);break}case 34:{this.stateInSFCRootTagName(n);break}case 9:{this.stateInClosingTagName(n);break}case 5:{this.stateBeforeTagName(n);break}case 17:{this.stateAfterAttrName(n);break}case 20:{this.stateInAttrValueSingleQuotes(n);break}case 18:{this.stateBeforeAttrValue(n);break}case 8:{this.stateBeforeClosingTagName(n);break}case 10:{this.stateAfterClosingTagName(n);break}case 29:{this.stateBeforeSpecialS(n);break}case 30:{this.stateBeforeSpecialT(n);break}case 21:{this.stateInAttrValueNoQuotes(n);break}case 7:{this.stateInSelfClosingTag(n);break}case 23:{this.stateInDeclaration(n);break}case 22:{this.stateBeforeDeclaration(n);break}case 25:{this.stateBeforeComment(n);break}case 24:{this.stateInProcessingInstruction(n);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length;this.sectionStart>=t||(this.state===28?this.currentSequence===Ir.CdataEnd?this.cbs.oncdata(this.sectionStart,t):this.cbs.oncomment(this.sectionStart,t):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,n){}}function iI(e,{compatConfig:t}){const n=t&&t[e];return e==="MODE"?n||3:n}function Yf(e,t){const n=iI("MODE",t),r=iI(e,t);return n===3?r===!0:r!==!1}function s1(e,t,n,...r){return Yf(e,t)}function X3(e){throw e}function ez(e){}function dn(e,t,n,r){const i=`https://vuejs.org/error-reference/#compiler-${e}`,s=new SyntaxError(String(i));return s.code=e,s.loc=t,s}const Wi=e=>e.type===4&&e.isStatic;function tz(e){switch(e){case"Teleport":case"teleport":return vm;case"Suspense":case"suspense":return D3;case"KeepAlive":case"keep-alive":return M_;case"BaseTransition":case"base-transition":return qU}}const Aae=/^\d|[^\$\w\xA0-\uFFFF]/,Y3=e=>!Aae.test(e),Tae=/[A-Za-z_$\xA0-\uFFFF]/,kae=/[\.\?\w$\xA0-\uFFFF]/,Cae=/\s+[.[]\s*|\s*[.[]\s+/g,Fae=e=>{e=e.trim().replace(Cae,a=>a.trim());let t=0,n=[],r=0,i=0,s=null;for(let a=0;a<e.length;a++){const o=e.charAt(a);switch(t){case 0:if(o==="[")n.push(t),t=1,r++;else if(o==="(")n.push(t),t=2,i++;else if(!(a===0?Tae:kae).test(o))return!1;break;case 1:o==="'"||o==='"'||o==="`"?(n.push(t),t=3,s=o):o==="["?r++:o==="]"&&(--r||(t=n.pop()));break;case 2:if(o==="'"||o==='"'||o==="`")n.push(t),t=3,s=o;else if(o==="(")i++;else if(o===")"){if(a===e.length-1)return!1;--i||(t=n.pop())}break;case 3:o===s&&(t=n.pop(),s=null);break}}return!r&&!i},nz=Fae;function Ca(e,t,n=!1){for(let r=0;r<e.props.length;r++){const i=e.props[r];if(i.type===7&&(n||i.exp)&&(ft(t)?i.name===t:t.test(i.name)))return i}}function iE(e,t,n=!1,r=!1){for(let i=0;i<e.props.length;i++){const s=e.props[i];if(s.type===6){if(n)continue;if(s.name===t&&(s.value||r))return s}else if(s.name==="bind"&&(s.exp||r)&&If(s.arg,t))return s}}function If(e,t){return!!(e&&Wi(e)&&e.content===t)}function Oae(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function GS(e){return e.type===5||e.type===2}function Nae(e){return e.type===7&&e.name==="slot"}function L_(e){return e.type===1&&e.tagType===3}function P_(e){return e.type===1&&e.tagType===2}const Dae=new Set([r1,nx]);function rz(e,t=[]){if(e&&!ft(e)&&e.type===14){const n=e.callee;if(!ft(n)&&Dae.has(n))return rz(e.arguments[0],t.concat(e))}return[e,t]}function B_(e,t,n){let r,i=e.type===13?e.props:e.arguments[2],s=[],a;if(i&&!ft(i)&&i.type===14){const o=rz(i);i=o[0],s=o[1],a=s[s.length-1]}if(i==null||ft(i))r=Xs([t]);else if(i.type===14){const o=i.arguments[0];!ft(o)&&o.type===15?sI(t,o)||o.properties.unshift(t):i.callee===W3?r=Gn(n.helper(R_),[Xs([t]),i]):i.arguments.unshift(Xs([t])),!r&&(r=i)}else i.type===15?(sI(t,i)||i.properties.unshift(t),r=i):(r=Gn(n.helper(R_),[Xs([t]),i]),a&&a.callee===nx&&(a=s[s.length-2]));e.type===13?a?a.arguments[0]=r:e.props=r:a?a.arguments[0]=r:e.arguments[2]=r}function sI(e,t){let n=!1;if(e.key.type===4){const r=e.key.content;n=t.properties.some(i=>i.key.type===4&&i.key.content===r)}return n}function a1(e,t){return`_${t}_${e.replace(/[^\w]/g,(n,r)=>n==="-"?"_":e.charCodeAt(r).toString())}`}function Mae(e){return e.type===14&&e.callee===G3?e.arguments[1].returns:e}const Rae=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,iz={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:$y,isPreTag:$y,isCustomElement:$y,onError:X3,onWarn:ez,comments:!1,prefixIdentifiers:!1};let Vt=iz,o1=null,Pl="",Hr=null,Ot=null,Ri="",ml=-1,Sf=-1,U_=0,Mc=!1,xk=null;const un=[],Sn=new Sae(un,{onerr:ll,ontext(e,t){Tv(br(e,t),e,t)},ontextentity(e,t,n){Tv(e,t,n)},oninterpolation(e,t){if(Mc)return Tv(br(e,t),e,t);let n=e+Sn.delimiterOpen.length,r=t-Sn.delimiterClose.length;for(;us(Pl.charCodeAt(n));)n++;for(;us(Pl.charCodeAt(r-1));)r--;let i=br(n,r);i.includes("&")&&(i=Vt.decodeEntities(i,!1)),vk({type:5,content:Uy(i,!1,Wn(n,r)),loc:Wn(e,t)})},onopentagname(e,t){const n=br(e,t);Hr={type:1,tag:n,ns:Vt.getNamespace(n,un[0],Vt.ns),tagType:0,props:[],children:[],loc:Wn(e-1,t),codegenNode:void 0}},onopentagend(e){oI(e)},onclosetag(e,t){const n=br(e,t);if(!Vt.isVoidTag(n)){let r=!1;for(let i=0;i<un.length;i++)if(un[i].tag.toLowerCase()===n.toLowerCase()){r=!0,i>0&&ll(24,un[0].loc.start.offset);for(let a=0;a<=i;a++){const o=un.shift();By(o,t,a<i)}break}r||ll(23,sz(e,60))}},onselfclosingtag(e){const t=Hr.tag;Hr.isSelfClosing=!0,oI(e),un[0]&&un[0].tag===t&&By(un.shift(),e)},onattribname(e,t){Ot={type:6,name:br(e,t),nameLoc:Wn(e,t),value:void 0,loc:Wn(e)}},ondirname(e,t){const n=br(e,t),r=n==="."||n===":"?"bind":n==="@"?"on":n==="#"?"slot":n.slice(2);if(!Mc&&r===""&&ll(26,e),Mc||r==="")Ot={type:6,name:n,nameLoc:Wn(e,t),value:void 0,loc:Wn(e)};else if(Ot={type:7,name:r,rawName:n,exp:void 0,arg:void 0,modifiers:n==="."?["prop"]:[],loc:Wn(e)},r==="pre"){Mc=Sn.inVPre=!0,xk=Hr;const i=Hr.props;for(let s=0;s<i.length;s++)i[s].type===7&&(i[s]=Wae(i[s]))}},ondirarg(e,t){if(e===t)return;const n=br(e,t);if(Mc)Ot.name+=n,Lf(Ot.nameLoc,t);else{const r=n[0]!=="[";Ot.arg=Uy(r?n:n.slice(1,-1),r,Wn(e,t),r?3:0)}},ondirmodifier(e,t){const n=br(e,t);if(Mc)Ot.name+="."+n,Lf(Ot.nameLoc,t);else if(Ot.name==="slot"){const r=Ot.arg;r&&(r.content+="."+n,Lf(r.loc,t))}else Ot.modifiers.push(n)},onattribdata(e,t){Ri+=br(e,t),ml<0&&(ml=e),Sf=t},onattribentity(e,t,n){Ri+=e,ml<0&&(ml=t),Sf=n},onattribnameend(e){const t=Ot.loc.start.offset,n=br(t,e);Ot.type===7&&(Ot.rawName=n),Hr.props.some(r=>(r.type===7?r.rawName:r.name)===n)&&ll(2,t)},onattribend(e,t){if(Hr&&Ot){if(Lf(Ot.loc,t),e!==0)if(Ri.includes("&")&&(Ri=Vt.decodeEntities(Ri,!0)),Ot.type===6)Ot.name==="class"&&(Ri=oz(Ri).trim()),e===1&&!Ri&&ll(13,t),Ot.value={type:2,content:Ri,loc:e===1?Wn(ml,Sf):Wn(ml-1,Sf+1)},Sn.inSFCRoot&&Hr.tag==="template"&&Ot.name==="lang"&&Ri&&Ri!=="html"&&Sn.enterRCDATA(I_("</template"),0);else{let n=0;Ot.exp=Uy(Ri,!1,Wn(ml,Sf),0,n),Ot.name==="for"&&(Ot.forParseResult=Iae(Ot.exp));let r=-1;Ot.name==="bind"&&(r=Ot.modifiers.indexOf("sync"))>-1&&s1("COMPILER_V_BIND_SYNC",Vt,Ot.loc,Ot.rawName)&&(Ot.name="model",Ot.modifiers.splice(r,1))}(Ot.type!==7||Ot.name!=="pre")&&Hr.props.push(Ot)}Ri="",ml=Sf=-1},oncomment(e,t){Vt.comments&&vk({type:3,content:br(e,t),loc:Wn(e-4,t+3)})},onend(){const e=Pl.length;for(let t=0;t<un.length;t++)By(un[t],e-1),ll(24,un[t].loc.start.offset)},oncdata(e,t){un[0].ns!==0?Tv(br(e,t),e,t):ll(1,e-9)},onprocessinginstruction(e){(un[0]?un[0].ns:Vt.ns)===0&&ll(21,e-1)}}),aI=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,$ae=/^\(|\)$/g;function Iae(e){const t=e.loc,n=e.content,r=n.match(Rae);if(!r)return;const[,i,s]=r,a=(f,h,d=!1)=>{const p=t.start.offset+h,g=p+f.length;return Uy(f,!1,Wn(p,g),0,d?1:0)},o={source:a(s.trim(),n.indexOf(s,i.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=i.trim().replace($ae,"").trim();const c=i.indexOf(l),u=l.match(aI);if(u){l=l.replace(aI,"").trim();const f=u[1].trim();let h;if(f&&(h=n.indexOf(f,c+l.length),o.key=a(f,h,!0)),u[2]){const d=u[2].trim();d&&(o.index=a(d,n.indexOf(d,o.key?h+f.length:c+l.length),!0))}}return l&&(o.value=a(l,c,!0)),o}function br(e,t){return Pl.slice(e,t)}function oI(e){Sn.inSFCRoot&&(Hr.innerLoc=Wn(e+1,e+1)),vk(Hr);const{tag:t,ns:n}=Hr;n===0&&Vt.isPreTag(t)&&U_++,Vt.isVoidTag(t)?By(Hr,e):(un.unshift(Hr),(n===1||n===2)&&(Sn.inXML=!0)),Hr=null}function Tv(e,t,n){{const s=un[0]&&un[0].tag;s!=="script"&&s!=="style"&&e.includes("&")&&(e=Vt.decodeEntities(e,!1))}const r=un[0]||o1,i=r.children[r.children.length-1];i&&i.type===2?(i.content+=e,Lf(i.loc,n)):r.children.push({type:2,content:e,loc:Wn(t,n)})}function By(e,t,n=!1){n?Lf(e.loc,sz(t,60)):Lf(e.loc,Lae(t,62)+1),Sn.inSFCRoot&&(e.children.length?e.innerLoc.end=Ut({},e.children[e.children.length-1].loc.end):e.innerLoc.end=Ut({},e.innerLoc.start),e.innerLoc.source=br(e.innerLoc.start.offset,e.innerLoc.end.offset));const{tag:r,ns:i}=e;Mc||(r==="slot"?e.tagType=2:lI(e)?e.tagType=3:Bae(e)&&(e.tagType=1)),Sn.inRCDATA||(e.children=az(e.children,e.tag)),i===0&&Vt.isPreTag(r)&&U_--,xk===e&&(Mc=Sn.inVPre=!1,xk=null),Sn.inXML&&(un[0]?un[0].ns:Vt.ns)===0&&(Sn.inXML=!1);{const s=e.props;if(!Sn.inSFCRoot&&Yf("COMPILER_NATIVE_TEMPLATE",Vt)&&e.tag==="template"&&!lI(e)){const o=un[0]||o1,l=o.children.indexOf(e);o.children.splice(l,1,...e.children)}const a=s.find(o=>o.type===6&&o.name==="inline-template");a&&s1("COMPILER_INLINE_TEMPLATE",Vt,a.loc)&&e.children.length&&(a.value={type:2,content:br(e.children[0].loc.start.offset,e.children[e.children.length-1].loc.end.offset),loc:a.loc})}}function Lae(e,t){let n=e;for(;Pl.charCodeAt(n)!==t&&n<Pl.length-1;)n++;return n}function sz(e,t){let n=e;for(;Pl.charCodeAt(n)!==t&&n>=0;)n--;return n}const Pae=new Set(["if","else","else-if","for","slot"]);function lI({tag:e,props:t}){if(e==="template"){for(let n=0;n<t.length;n++)if(t[n].type===7&&Pae.has(t[n].name))return!0}return!1}function Bae({tag:e,props:t}){if(Vt.isCustomElement(e))return!1;if(e==="component"||Uae(e.charCodeAt(0))||tz(e)||Vt.isBuiltInComponent&&Vt.isBuiltInComponent(e)||Vt.isNativeTag&&!Vt.isNativeTag(e))return!0;for(let n=0;n<t.length;n++){const r=t[n];if(r.type===6){if(r.name==="is"&&r.value){if(r.value.content.startsWith("vue:"))return!0;if(s1("COMPILER_IS_ON_ELEMENT",Vt,r.loc))return!0}}else if(r.name==="bind"&&If(r.arg,"is")&&s1("COMPILER_IS_ON_ELEMENT",Vt,r.loc))return!0}return!1}function Uae(e){return e>64&&e<91}const zae=/\r\n/g;function az(e,t){const n=Vt.whitespace!=="preserve";let r=!1;for(let i=0;i<e.length;i++){const s=e[i];if(s.type===2)if(U_)s.content=s.content.replace(zae,`
`);else if(Hae(s.content)){const a=e[i-1]&&e[i-1].type,o=e[i+1]&&e[i+1].type;!a||!o||n&&(a===3&&(o===3||o===1)||a===1&&(o===3||o===1&&Vae(s.content)))?(r=!0,e[i]=null):s.content=" "}else n&&(s.content=oz(s.content))}if(U_&&t&&Vt.isPreTag(t)){const i=e[0];i&&i.type===2&&(i.content=i.content.replace(/^\r?\n/,""))}return r?e.filter(Boolean):e}function Hae(e){for(let t=0;t<e.length;t++)if(!us(e.charCodeAt(t)))return!1;return!0}function Vae(e){for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n===10||n===13)return!0}return!1}function oz(e){let t="",n=!1;for(let r=0;r<e.length;r++)us(e.charCodeAt(r))?n||(t+=" ",n=!0):(t+=e[r],n=!1);return t}function vk(e){(un[0]||o1).children.push(e)}function Wn(e,t){return{start:Sn.getPos(e),end:t==null?t:Sn.getPos(t),source:t==null?t:br(e,t)}}function Lf(e,t){e.end=Sn.getPos(t),e.source=br(e.start.offset,t)}function Wae(e){const t={type:6,name:e.rawName,nameLoc:Wn(e.loc.start.offset,e.loc.start.offset+e.rawName.length),value:void 0,loc:e.loc};if(e.exp){const n=e.exp.loc;n.end.offset<e.loc.end.offset&&(n.start.offset--,n.start.column--,n.end.offset++,n.end.column++),t.value={type:2,content:e.exp.content,loc:n}}return t}function Uy(e,t=!1,n,r=0,i=0){return dt(e,t,n,r)}function ll(e,t,n){Vt.onError(dn(e,Wn(t,t)))}function jae(){Sn.reset(),Hr=null,Ot=null,Ri="",ml=-1,Sf=-1,un.length=0}function Gae(e,t){if(jae(),Pl=e,Vt=Ut({},iz),t){let i;for(i in t)t[i]!=null&&(Vt[i]=t[i])}Sn.mode=Vt.parseMode==="html"?1:Vt.parseMode==="sfc"?2:0,Sn.inXML=Vt.ns===1||Vt.ns===2;const n=t&&t.delimiters;n&&(Sn.delimiterOpen=I_(n[0]),Sn.delimiterClose=I_(n[1]));const r=o1=bae([],e);return Sn.parse(Pl),r.loc=Wn(0,e.length),r.children=az(r.children),o1=null,r}function qae(e,t){zy(e,t,lz(e,e.children[0]))}function lz(e,t){const{children:n}=e;return n.length===1&&t.type===1&&!P_(t)}function zy(e,t,n=!1){const{children:r}=e,i=r.length;let s=0;for(let a=0;a<r.length;a++){const o=r[a];if(o.type===1&&o.tagType===0){const l=n?0:Ys(o,t);if(l>0){if(l>=2){o.codegenNode.patchFlag=-1,o.codegenNode=t.hoist(o.codegenNode),s++;continue}}else{const c=o.codegenNode;if(c.type===13){const u=c.patchFlag;if((u===void 0||u===512||u===1)&&uz(o,t)>=2){const f=fz(o);f&&(c.props=t.hoist(f))}c.dynamicProps&&(c.dynamicProps=t.hoist(c.dynamicProps))}}}if(o.type===1){const l=o.tagType===1;l&&t.scopes.vSlot++,zy(o,t),l&&t.scopes.vSlot--}else if(o.type===11)zy(o,t,o.children.length===1);else if(o.type===9)for(let l=0;l<o.branches.length;l++)zy(o.branches[l],t,o.branches[l].children.length===1)}if(s&&t.transformHoist&&t.transformHoist(r,t,e),s&&s===i&&e.type===1&&e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&Be(e.codegenNode.children)){const a=t.hoist(rx(e.codegenNode.children));t.hmr&&(a.content=`[...${a.content}]`),e.codegenNode.children=a}}function Ys(e,t){const{constantCache:n}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const r=n.get(e);if(r!==void 0)return r;const i=e.codegenNode;if(i.type!==13||i.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject"&&e.tag!=="math")return 0;if(i.patchFlag===void 0){let a=3;const o=uz(e,t);if(o===0)return n.set(e,0),0;o<a&&(a=o);for(let l=0;l<e.children.length;l++){const c=Ys(e.children[l],t);if(c===0)return n.set(e,0),0;c<a&&(a=c)}if(a>1)for(let l=0;l<e.props.length;l++){const c=e.props[l];if(c.type===7&&c.name==="bind"&&c.exp){const u=Ys(c.exp,t);if(u===0)return n.set(e,0),0;u<a&&(a=u)}}if(i.isBlock){for(let l=0;l<e.props.length;l++)if(e.props[l].type===7)return n.set(e,0),0;t.removeHelper(ph),t.removeHelper(O0(t.inSSR,i.isComponent)),i.isBlock=!1,t.helper(F0(t.inSSR,i.isComponent))}return n.set(e,a),a}else return n.set(e,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Ys(e.content,t);case 4:return e.constType;case 8:let s=3;for(let a=0;a<e.children.length;a++){const o=e.children[a];if(ft(o)||Ss(o))continue;const l=Ys(o,t);if(l===0)return 0;l<s&&(s=l)}return s;default:return 0}}const Xae=new Set([H3,V3,r1,nx]);function cz(e,t){if(e.type===14&&!ft(e.callee)&&Xae.has(e.callee)){const n=e.arguments[0];if(n.type===4)return Ys(n,t);if(n.type===14)return cz(n,t)}return 0}function uz(e,t){let n=3;const r=fz(e);if(r&&r.type===15){const{properties:i}=r;for(let s=0;s<i.length;s++){const{key:a,value:o}=i[s],l=Ys(a,t);if(l===0)return l;l<n&&(n=l);let c;if(o.type===4?c=Ys(o,t):o.type===14?c=cz(o,t):c=0,c===0)return c;c<n&&(n=c)}}return n}function fz(e){const t=e.codegenNode;if(t.type===13)return t.props}function Yae(e,{filename:t="",prefixIdentifiers:n=!1,hoistStatic:r=!1,hmr:i=!1,cacheHandlers:s=!1,nodeTransforms:a=[],directiveTransforms:o={},transformHoist:l=null,isBuiltInComponent:c=Jn,isCustomElement:u=Jn,expressionPlugins:f=[],scopeId:h=null,slotted:d=!0,ssr:p=!1,inSSR:g=!1,ssrCssVars:m="",bindingMetadata:x=Mt,inline:v=!1,isTS:y=!1,onError:_=X3,onWarn:b=ez,compatConfig:w}){const E=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),A={filename:t,selfName:E&&jh(gn(E[1])),prefixIdentifiers:n,hoistStatic:r,hmr:i,cacheHandlers:s,nodeTransforms:a,directiveTransforms:o,transformHoist:l,isBuiltInComponent:c,isCustomElement:u,expressionPlugins:f,scopeId:h,slotted:d,ssr:p,inSSR:g,ssrCssVars:m,bindingMetadata:x,inline:v,isTS:y,onError:_,onWarn:b,compatConfig:w,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new WeakMap,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(S){const k=A.helpers.get(S)||0;return A.helpers.set(S,k+1),S},removeHelper(S){const k=A.helpers.get(S);if(k){const T=k-1;T?A.helpers.set(S,T):A.helpers.delete(S)}},helperString(S){return`_${k0[A.helper(S)]}`},replaceNode(S){A.parent.children[A.childIndex]=A.currentNode=S},removeNode(S){const k=A.parent.children,T=S?k.indexOf(S):A.currentNode?A.childIndex:-1;!S||S===A.currentNode?(A.currentNode=null,A.onNodeRemoved()):A.childIndex>T&&(A.childIndex--,A.onNodeRemoved()),A.parent.children.splice(T,1)},onNodeRemoved:Jn,addIdentifiers(S){},removeIdentifiers(S){},hoist(S){ft(S)&&(S=dt(S)),A.hoists.push(S);const k=dt(`_hoisted_${A.hoists.length}`,!1,S.loc,2);return k.hoisted=S,k},cache(S,k=!1){return Eae(A.cached++,S,k)}};return A.filters=new Set,A}function Kae(e,t){const n=Yae(e,t);sE(e,n),t.hoistStatic&&qae(e,n),t.ssr||Jae(e,n),e.helpers=new Set([...n.helpers.keys()]),e.components=[...n.components],e.directives=[...n.directives],e.imports=n.imports,e.hoists=n.hoists,e.temps=n.temps,e.cached=n.cached,e.transformed=!0,e.filters=[...n.filters]}function Jae(e,t){const{helper:n}=t,{children:r}=e;if(r.length===1){const i=r[0];if(lz(e,i)&&i.codegenNode){const s=i.codegenNode;s.type===13&&q3(s,t),e.codegenNode=s}else e.codegenNode=i}else if(r.length>1){let i=64;e.codegenNode=i1(t,n(n1),void 0,e.children,i,void 0,void 0,!0,void 0,!1)}}function Zae(e,t){let n=0;const r=()=>{n--};for(;n<e.children.length;n++){const i=e.children[n];ft(i)||(t.grandParent=t.parent,t.parent=e,t.childIndex=n,t.onNodeRemoved=r,sE(i,t))}}function sE(e,t){t.currentNode=e;const{nodeTransforms:n}=t,r=[];for(let s=0;s<n.length;s++){const a=n[s](e,t);if(a&&(Be(a)?r.push(...a):r.push(a)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(tx);break;case 5:t.ssr||t.helper(rE);break;case 9:for(let s=0;s<e.branches.length;s++)sE(e.branches[s],t);break;case 10:case 11:case 1:case 0:Zae(e,t);break}t.currentNode=e;let i=r.length;for(;i--;)r[i]()}function hz(e,t){const n=ft(e)?r=>r===e:r=>e.test(r);return(r,i)=>{if(r.type===1){const{props:s}=r;if(r.tagType===3&&s.some(Nae))return;const a=[];for(let o=0;o<s.length;o++){const l=s[o];if(l.type===7&&n(l.name)){s.splice(o,1),o--;const c=t(r,l,i);c&&a.push(c)}}return a}}}const aE="/*#__PURE__*/",dz=e=>`${k0[e]}: _${k0[e]}`;function Qae(e,{mode:t="function",prefixIdentifiers:n=t==="module",sourceMap:r=!1,filename:i="template.vue.html",scopeId:s=null,optimizeImports:a=!1,runtimeGlobalName:o="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:c="vue/server-renderer",ssr:u=!1,isTS:f=!1,inSSR:h=!1}){const d={mode:t,prefixIdentifiers:n,sourceMap:r,filename:i,scopeId:s,optimizeImports:a,runtimeGlobalName:o,runtimeModuleName:l,ssrRuntimeModuleName:c,ssr:u,isTS:f,inSSR:h,source:e.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(g){return`_${k0[g]}`},push(g,m=-2,x){d.code+=g},indent(){p(++d.indentLevel)},deindent(g=!1){g?--d.indentLevel:p(--d.indentLevel)},newline(){p(d.indentLevel)}};function p(g){d.push(`
`+"  ".repeat(g),0)}return d}function eoe(e,t={}){const n=Qae(e,t);t.onContextCreated&&t.onContextCreated(n);const{mode:r,push:i,prefixIdentifiers:s,indent:a,deindent:o,newline:l,scopeId:c,ssr:u}=n,f=Array.from(e.helpers),h=f.length>0,d=!s&&r!=="module";toe(e,n);const g=u?"ssrRender":"render",x=(u?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(i(`function ${g}(${x}) {`),a(),d&&(i("with (_ctx) {"),a(),h&&(i(`const { ${f.map(dz).join(", ")} } = _Vue
`,-1),l())),e.components.length&&(qS(e.components,"component",n),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(qS(e.directives,"directive",n),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),qS(e.filters,"filter",n),l()),e.temps>0){i("let ");for(let v=0;v<e.temps;v++)i(`${v>0?", ":""}_temp${v}`)}return(e.components.length||e.directives.length||e.temps)&&(i(`
`,0),l()),u||i("return "),e.codegenNode?ei(e.codegenNode,n):i("null"),d&&(o(),i("}")),o(),i("}"),{ast:e,code:n.code,preamble:"",map:n.map?n.map.toJSON():void 0}}function toe(e,t){const{ssr:n,prefixIdentifiers:r,push:i,newline:s,runtimeModuleName:a,runtimeGlobalName:o,ssrRuntimeModuleName:l}=t,c=o,u=Array.from(e.helpers);if(u.length>0&&(i(`const _Vue = ${c}
`,-1),e.hoists.length)){const f=[M3,R3,tx,$3,KU].filter(h=>u.includes(h)).map(dz).join(", ");i(`const { ${f} } = _Vue
`,-1)}noe(e.hoists,t),s(),i("return ")}function qS(e,t,{helper:n,push:r,newline:i,isTS:s}){const a=n(t==="filter"?B3:t==="component"?I3:P3);for(let o=0;o<e.length;o++){let l=e[o];const c=l.endsWith("__self");c&&(l=l.slice(0,-6)),r(`const ${a1(l,t)} = ${a}(${JSON.stringify(l)}${c?", true":""})${s?"!":""}`),o<e.length-1&&i()}}function noe(e,t){if(!e.length)return;t.pure=!0;const{push:n,newline:r,helper:i,scopeId:s,mode:a}=t;r();for(let o=0;o<e.length;o++){const l=e[o];l&&(n(`const _hoisted_${o+1} = `),ei(l,t),r())}t.pure=!1}function K3(e,t){const n=e.length>3||!1;t.push("["),n&&t.indent(),ix(e,t,n),n&&t.deindent(),t.push("]")}function ix(e,t,n=!1,r=!0){const{push:i,newline:s}=t;for(let a=0;a<e.length;a++){const o=e[a];ft(o)?i(o,-3):Be(o)?K3(o,t):ei(o,t),a<e.length-1&&(n?(r&&i(","),s()):r&&i(", "))}}function ei(e,t){if(ft(e)){t.push(e,-3);return}if(Ss(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:ei(e.codegenNode,t);break;case 2:roe(e,t);break;case 4:pz(e,t);break;case 5:ioe(e,t);break;case 12:ei(e.codegenNode,t);break;case 8:gz(e,t);break;case 3:aoe(e,t);break;case 13:ooe(e,t);break;case 14:coe(e,t);break;case 15:uoe(e,t);break;case 17:foe(e,t);break;case 18:hoe(e,t);break;case 19:doe(e,t);break;case 20:poe(e,t);break;case 21:ix(e.body,t,!0,!1);break}}function roe(e,t){t.push(JSON.stringify(e.content),-3,e)}function pz(e,t){const{content:n,isStatic:r}=e;t.push(r?JSON.stringify(n):n,-3,e)}function ioe(e,t){const{push:n,helper:r,pure:i}=t;i&&n(aE),n(`${r(rE)}(`),ei(e.content,t),n(")")}function gz(e,t){for(let n=0;n<e.children.length;n++){const r=e.children[n];ft(r)?t.push(r,-3):ei(r,t)}}function soe(e,t){const{push:n}=t;if(e.type===8)n("["),gz(e,t),n("]");else if(e.isStatic){const r=Y3(e.content)?e.content:JSON.stringify(e.content);n(r,-2,e)}else n(`[${e.content}]`,-3,e)}function aoe(e,t){const{push:n,helper:r,pure:i}=t;i&&n(aE),n(`${r(tx)}(${JSON.stringify(e.content)})`,-3,e)}function ooe(e,t){const{push:n,helper:r,pure:i}=t,{tag:s,props:a,children:o,patchFlag:l,dynamicProps:c,directives:u,isBlock:f,disableTracking:h,isComponent:d}=e;let p;l&&(p=String(l)),u&&n(r(U3)+"("),f&&n(`(${r(ph)}(${h?"true":""}), `),i&&n(aE);const g=f?O0(t.inSSR,d):F0(t.inSSR,d);n(r(g)+"(",-2,e),ix(loe([s,a,o,p,c]),t),n(")"),f&&n(")"),u&&(n(", "),ei(u,t),n(")"))}function loe(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(n=>n||"null")}function coe(e,t){const{push:n,helper:r,pure:i}=t,s=ft(e.callee)?e.callee:r(e.callee);i&&n(aE),n(s+"(",-2,e),ix(e.arguments,t),n(")")}function uoe(e,t){const{push:n,indent:r,deindent:i,newline:s}=t,{properties:a}=e;if(!a.length){n("{}",-2,e);return}const o=a.length>1||!1;n(o?"{":"{ "),o&&r();for(let l=0;l<a.length;l++){const{key:c,value:u}=a[l];soe(c,t),n(": "),ei(u,t),l<a.length-1&&(n(","),s())}o&&i(),n(o?"}":" }")}function foe(e,t){K3(e.elements,t)}function hoe(e,t){const{push:n,indent:r,deindent:i}=t,{params:s,returns:a,body:o,newline:l,isSlot:c}=e;c&&n(`_${k0[j3]}(`),n("(",-2,e),Be(s)?ix(s,t):s&&ei(s,t),n(") => "),(l||o)&&(n("{"),r()),a?(l&&n("return "),Be(a)?K3(a,t):ei(a,t)):o&&ei(o,t),(l||o)&&(i(),n("}")),c&&(e.isNonScopedSlot&&n(", undefined, true"),n(")"))}function doe(e,t){const{test:n,consequent:r,alternate:i,newline:s}=e,{push:a,indent:o,deindent:l,newline:c}=t;if(n.type===4){const f=!Y3(n.content);f&&a("("),pz(n,t),f&&a(")")}else a("("),ei(n,t),a(")");s&&o(),t.indentLevel++,s||a(" "),a("? "),ei(r,t),t.indentLevel--,s&&c(),s||a(" "),a(": ");const u=i.type===19;u||t.indentLevel++,ei(i,t),u||t.indentLevel--,s&&l(!0)}function poe(e,t){const{push:n,helper:r,indent:i,deindent:s,newline:a}=t;n(`_cache[${e.index}] || (`),e.isVOnce&&(i(),n(`${r($_)}(-1),`),a(),n("(")),n(`_cache[${e.index}] = `),ei(e.value,t),e.isVOnce&&(n(`).cacheIndex = ${e.index},`),a(),n(`${r($_)}(1),`),a(),n(`_cache[${e.index}]`),s()),n(")")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const goe=hz(/^(if|else|else-if)$/,(e,t,n)=>moe(e,t,n,(r,i,s)=>{const a=n.parent.children;let o=a.indexOf(r),l=0;for(;o-->=0;){const c=a[o];c&&c.type===9&&(l+=c.branches.length)}return()=>{if(s)r.codegenNode=uI(i,l,n);else{const c=xoe(r.codegenNode);c.alternate=uI(i,l+r.branches.length-1,n)}}}));function moe(e,t,n,r){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const i=t.exp?t.exp.loc:e.loc;n.onError(dn(28,t.loc)),t.exp=dt("true",!1,i)}if(t.name==="if"){const i=cI(e,t),s={type:9,loc:e.loc,branches:[i]};if(n.replaceNode(s),r)return r(s,i,!0)}else{const i=n.parent.children;let s=i.indexOf(e);for(;s-->=-1;){const a=i[s];if(a&&a.type===3){n.removeNode(a);continue}if(a&&a.type===2&&!a.content.trim().length){n.removeNode(a);continue}if(a&&a.type===9){t.name==="else-if"&&a.branches[a.branches.length-1].condition===void 0&&n.onError(dn(30,e.loc)),n.removeNode();const o=cI(e,t);a.branches.push(o);const l=r&&r(a,o,!1);sE(o,n),l&&l(),n.currentNode=null}else n.onError(dn(30,e.loc));break}}}function cI(e,t){const n=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:n&&!Ca(e,"for")?e.children:[e],userKey:iE(e,"key"),isTemplateIf:n}}function uI(e,t,n){return e.condition?mk(e.condition,fI(e,t,n),Gn(n.helper(tx),['""',"true"])):fI(e,t,n)}function fI(e,t,n){const{helper:r}=n,i=Nn("key",dt(`${t}`,!1,$s,2)),{children:s}=e,a=s[0];if(s.length!==1||a.type!==1)if(s.length===1&&a.type===11){const l=a.codegenNode;return B_(l,i,n),l}else return i1(n,r(n1),Xs([i]),s,64,void 0,void 0,!0,!1,!1,e.loc);else{const l=a.codegenNode,c=Mae(l);return c.type===13&&q3(c,n),B_(c,i,n),l}}function xoe(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const voe=(e,t,n)=>{const{modifiers:r,loc:i}=e,s=e.arg;let{exp:a}=e;if(a&&a.type===4&&!a.content.trim()&&(a=void 0),!a){if(s.type!==4||!s.isStatic)return n.onError(dn(52,s.loc)),{props:[Nn(s,dt("",!0,i))]};mz(e),a=e.exp}return s.type!==4?(s.children.unshift("("),s.children.push(') || ""')):s.isStatic||(s.content=`${s.content} || ""`),r.includes("camel")&&(s.type===4?s.isStatic?s.content=gn(s.content):s.content=`${n.helperString(pk)}(${s.content})`:(s.children.unshift(`${n.helperString(pk)}(`),s.children.push(")"))),n.inSSR||(r.includes("prop")&&hI(s,"."),r.includes("attr")&&hI(s,"^")),{props:[Nn(s,a)]}},mz=(e,t)=>{const n=e.arg,r=gn(n.content);e.exp=dt(r,!1,n.loc)},hI=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},yoe=hz("for",(e,t,n)=>{const{helper:r,removeHelper:i}=n;return _oe(e,t,n,s=>{const a=Gn(r(z3),[s.source]),o=L_(e),l=Ca(e,"memo"),c=iE(e,"key",!1,!0);c&&c.type===7&&!c.exp&&mz(c);const u=c&&(c.type===6?c.value?dt(c.value.content,!0):void 0:c.exp),f=c&&u?Nn("key",u):null,h=s.source.type===4&&s.source.constType>0,d=h?64:c?128:256;return s.codegenNode=i1(n,r(n1),void 0,a,d,void 0,void 0,!0,!h,!1,e.loc),()=>{let p;const{children:g}=s,m=g.length!==1||g[0].type!==1,x=P_(e)?e:o&&e.children.length===1&&P_(e.children[0])?e.children[0]:null;if(x?(p=x.codegenNode,o&&f&&B_(p,f,n)):m?p=i1(n,r(n1),f?Xs([f]):void 0,e.children,64,void 0,void 0,!0,void 0,!1):(p=g[0].codegenNode,o&&f&&B_(p,f,n),p.isBlock!==!h&&(p.isBlock?(i(ph),i(O0(n.inSSR,p.isComponent))):i(F0(n.inSSR,p.isComponent))),p.isBlock=!h,p.isBlock?(r(ph),r(O0(n.inSSR,p.isComponent))):r(F0(n.inSSR,p.isComponent))),l){const v=C0(yk(s.parseResult,[dt("_cached")]));v.body=wae([za(["const _memo = (",l.exp,")"]),za(["if (_cached",...u?[" && _cached.key === ",u]:[],` && ${n.helperString(QU)}(_cached, _memo)) return _cached`]),za(["const _item = ",p]),dt("_item.memo = _memo"),dt("return _item")]),a.arguments.push(v,dt("_cache"),dt(String(n.cached++)))}else a.arguments.push(C0(yk(s.parseResult),p,!0))}})});function _oe(e,t,n,r){if(!t.exp){n.onError(dn(31,t.loc));return}const i=t.forParseResult;if(!i){n.onError(dn(32,t.loc));return}xz(i);const{addIdentifiers:s,removeIdentifiers:a,scopes:o}=n,{source:l,value:c,key:u,index:f}=i,h={type:11,loc:t.loc,source:l,valueAlias:c,keyAlias:u,objectIndexAlias:f,parseResult:i,children:L_(e)?e.children:[e]};n.replaceNode(h),o.vFor++;const d=r&&r(h);return()=>{o.vFor--,d&&d()}}function xz(e,t){e.finalized||(e.finalized=!0)}function yk({value:e,key:t,index:n},r=[]){return boe([e,t,n,...r])}function boe(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((n,r)=>n||dt("_".repeat(r+1),!1))}const dI=dt("undefined",!1),Eoe=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const n=Ca(e,"slot");if(n)return n.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},woe=(e,t,n,r)=>C0(e,n,!1,!0,n.length?n[0].loc:r);function Soe(e,t,n=woe){t.helper(j3);const{children:r,loc:i}=e,s=[],a=[];let o=t.scopes.vSlot>0||t.scopes.vFor>0;const l=Ca(e,"slot",!0);if(l){const{arg:m,exp:x}=l;m&&!Wi(m)&&(o=!0),s.push(Nn(m||dt("default",!0),n(x,void 0,r,i)))}let c=!1,u=!1;const f=[],h=new Set;let d=0;for(let m=0;m<r.length;m++){const x=r[m];let v;if(!L_(x)||!(v=Ca(x,"slot",!0))){x.type!==3&&f.push(x);continue}if(l){t.onError(dn(37,v.loc));break}c=!0;const{children:y,loc:_}=x,{arg:b=dt("default",!0),exp:w,loc:E}=v;let A;Wi(b)?A=b?b.content:"default":o=!0;const S=Ca(x,"for"),k=n(w,S,y,_);let T,O;if(T=Ca(x,"if"))o=!0,a.push(mk(T.exp,kv(b,k,d++),dI));else if(O=Ca(x,/^else(-if)?$/,!0)){let C=m,D;for(;C--&&(D=r[C],D.type===3););if(D&&L_(D)&&Ca(D,/^(else-)?if$/)){let N=a[a.length-1];for(;N.alternate.type===19;)N=N.alternate;N.alternate=O.exp?mk(O.exp,kv(b,k,d++),dI):kv(b,k,d++)}else t.onError(dn(30,O.loc))}else if(S){o=!0;const C=S.forParseResult;C?(xz(C),a.push(Gn(t.helper(z3),[C.source,C0(yk(C),kv(b,k),!0)]))):t.onError(dn(32,S.loc))}else{if(A){if(h.has(A)){t.onError(dn(38,E));continue}h.add(A),A==="default"&&(u=!0)}s.push(Nn(b,k))}}if(!l){const m=(x,v)=>{const y=n(x,void 0,v,i);return t.compatConfig&&(y.isNonScopedSlot=!0),Nn("default",y)};c?f.length&&f.some(x=>vz(x))&&(u?t.onError(dn(39,f[0].loc)):s.push(m(void 0,f))):s.push(m(void 0,r))}const p=o?2:Hy(e.children)?3:1;let g=Xs(s.concat(Nn("_",dt(p+"",!1))),i);return a.length&&(g=Gn(t.helper(ZU),[g,rx(a)])),{slots:g,hasDynamicSlots:o}}function kv(e,t,n){const r=[Nn("name",e),Nn("fn",t)];return n!=null&&r.push(Nn("key",dt(String(n),!0))),Xs(r)}function Hy(e){for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case 1:if(n.tagType===2||Hy(n.children))return!0;break;case 9:if(Hy(n.branches))return!0;break;case 10:case 11:if(Hy(n.children))return!0;break}}return!1}function vz(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():vz(e.content)}const yz=new WeakMap,Aoe=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:r,props:i}=e,s=e.tagType===1;let a=s?Toe(e,t):`"${r}"`;const o=Jt(a)&&a.callee===L3;let l,c,u=0,f,h,d,p=o||a===vm||a===D3||!s&&(r==="svg"||r==="foreignObject"||r==="math");if(i.length>0){const g=_z(e,t,void 0,s,o);l=g.props,u=g.patchFlag,h=g.dynamicPropNames;const m=g.directives;d=m&&m.length?rx(m.map(x=>Coe(x,t))):void 0,g.shouldUseBlock&&(p=!0)}if(e.children.length>0)if(a===M_&&(p=!0,u|=1024),s&&a!==vm&&a!==M_){const{slots:m,hasDynamicSlots:x}=Soe(e,t);c=m,x&&(u|=1024)}else if(e.children.length===1&&a!==vm){const m=e.children[0],x=m.type,v=x===5||x===8;v&&Ys(m,t)===0&&(u|=1),v||x===2?c=m:c=e.children}else c=e.children;h&&h.length&&(f=Foe(h)),e.codegenNode=i1(t,a,l,c,u===0?void 0:u,f,d,!!p,!1,s,e.loc)};function Toe(e,t,n=!1){let{tag:r}=e;const i=_k(r),s=iE(e,"is",!1,!0);if(s)if(i||Yf("COMPILER_IS_ON_ELEMENT",t)){let o;if(s.type===6?o=s.value&&dt(s.value.content,!0):(o=s.exp,o||(o=dt("is",!1,s.arg.loc))),o)return Gn(t.helper(L3),[o])}else s.type===6&&s.value.content.startsWith("vue:")&&(r=s.value.content.slice(4));const a=tz(r)||t.isBuiltInComponent(r);return a?(n||t.helper(a),a):(t.helper(I3),t.components.add(r),a1(r,"component"))}function _z(e,t,n=e.props,r,i,s=!1){const{tag:a,loc:o,children:l}=e;let c=[];const u=[],f=[],h=l.length>0;let d=!1,p=0,g=!1,m=!1,x=!1,v=!1,y=!1,_=!1;const b=[],w=k=>{c.length&&(u.push(Xs(pI(c),o)),c=[]),k&&u.push(k)},E=()=>{t.scopes.vFor>0&&c.push(Nn(dt("ref_for",!0),dt("true")))},A=({key:k,value:T})=>{if(Wi(k)){const O=k.content,C=Vh(O);if(C&&(!r||i)&&O.toLowerCase()!=="onclick"&&O!=="onUpdate:modelValue"&&!Zc(O)&&(v=!0),C&&Zc(O)&&(_=!0),C&&T.type===14&&(T=T.arguments[0]),T.type===20||(T.type===4||T.type===8)&&Ys(T,t)>0)return;O==="ref"?g=!0:O==="class"?m=!0:O==="style"?x=!0:O!=="key"&&!b.includes(O)&&b.push(O),r&&(O==="class"||O==="style")&&!b.includes(O)&&b.push(O)}else y=!0};for(let k=0;k<n.length;k++){const T=n[k];if(T.type===6){const{loc:O,name:C,nameLoc:D,value:N}=T;let R=!0;if(C==="ref"&&(g=!0,E()),C==="is"&&(_k(a)||N&&N.content.startsWith("vue:")||Yf("COMPILER_IS_ON_ELEMENT",t)))continue;c.push(Nn(dt(C,!0,D),dt(N?N.content:"",R,N?N.loc:O)))}else{const{name:O,arg:C,exp:D,loc:N,modifiers:R}=T,L=O==="bind",I=O==="on";if(O==="slot"){r||t.onError(dn(40,N));continue}if(O==="once"||O==="memo"||O==="is"||L&&If(C,"is")&&(_k(a)||Yf("COMPILER_IS_ON_ELEMENT",t))||I&&s)continue;if((L&&If(C,"key")||I&&h&&If(C,"vue:before-update"))&&(d=!0),L&&If(C,"ref")&&E(),!C&&(L||I)){if(y=!0,D)if(L){if(E(),w(),Yf("COMPILER_V_BIND_OBJECT_ORDER",t)){u.unshift(D);continue}u.push(D)}else w({type:14,loc:N,callee:t.helper(W3),arguments:r?[D]:[D,"true"]});else t.onError(dn(L?34:35,N));continue}L&&R.includes("prop")&&(p|=32);const Y=t.directiveTransforms[O];if(Y){const{props:X,needRuntime:oe}=Y(T,e,t);!s&&X.forEach(A),I&&C&&!Wi(C)?w(Xs(X,o)):c.push(...X),oe&&(f.push(T),Ss(oe)&&yz.set(T,oe))}else Gne(O)||(f.push(T),h&&(d=!0))}}let S;if(u.length?(w(),u.length>1?S=Gn(t.helper(R_),u,o):S=u[0]):c.length&&(S=Xs(pI(c),o)),y?p|=16:(m&&!r&&(p|=2),x&&!r&&(p|=4),b.length&&(p|=8),v&&(p|=32)),!d&&(p===0||p===32)&&(g||_||f.length>0)&&(p|=512),!t.inSSR&&S)switch(S.type){case 15:let k=-1,T=-1,O=!1;for(let N=0;N<S.properties.length;N++){const R=S.properties[N].key;Wi(R)?R.content==="class"?k=N:R.content==="style"&&(T=N):R.isHandlerKey||(O=!0)}const C=S.properties[k],D=S.properties[T];O?S=Gn(t.helper(r1),[S]):(C&&!Wi(C.value)&&(C.value=Gn(t.helper(H3),[C.value])),D&&(x||D.value.type===4&&D.value.content.trim()[0]==="["||D.value.type===17)&&(D.value=Gn(t.helper(V3),[D.value])));break;case 14:break;default:S=Gn(t.helper(r1),[Gn(t.helper(nx),[S])]);break}return{props:S,directives:f,patchFlag:p,dynamicPropNames:b,shouldUseBlock:d}}function pI(e){const t=new Map,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.key.type===8||!i.key.isStatic){n.push(i);continue}const s=i.key.content,a=t.get(s);a?(s==="style"||s==="class"||Vh(s))&&koe(a,i):(t.set(s,i),n.push(i))}return n}function koe(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=rx([e.value,t.value],e.loc)}function Coe(e,t){const n=[],r=yz.get(e);r?n.push(t.helperString(r)):(t.helper(P3),t.directives.add(e.name),n.push(a1(e.name,"directive")));const{loc:i}=e;if(e.exp&&n.push(e.exp),e.arg&&(e.exp||n.push("void 0"),n.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||n.push("void 0"),n.push("void 0"));const s=dt("true",!1,i);n.push(Xs(e.modifiers.map(a=>Nn(a,s)),i))}return rx(n,e.loc)}function Foe(e){let t="[";for(let n=0,r=e.length;n<r;n++)t+=JSON.stringify(e[n]),n<r-1&&(t+=", ");return t+"]"}function _k(e){return e==="component"||e==="Component"}const Ooe=(e,t)=>{if(P_(e)){const{children:n,loc:r}=e,{slotName:i,slotProps:s}=Noe(e,t),a=[t.prefixIdentifiers?"_ctx.$slots":"$slots",i,"{}","undefined","true"];let o=2;s&&(a[2]=s,o=3),n.length&&(a[3]=C0([],n,!1,!1,r),o=4),t.scopeId&&!t.slotted&&(o=5),a.splice(o),e.codegenNode=Gn(t.helper(JU),a,r)}};function Noe(e,t){let n='"default"',r;const i=[];for(let s=0;s<e.props.length;s++){const a=e.props[s];if(a.type===6)a.value&&(a.name==="name"?n=JSON.stringify(a.value.content):(a.name=gn(a.name),i.push(a)));else if(a.name==="bind"&&If(a.arg,"name")){if(a.exp)n=a.exp;else if(a.arg&&a.arg.type===4){const o=gn(a.arg.content);n=a.exp=dt(o,!1,a.arg.loc)}}else a.name==="bind"&&a.arg&&Wi(a.arg)&&(a.arg.content=gn(a.arg.content)),i.push(a)}if(i.length>0){const{props:s,directives:a}=_z(e,t,i,!1,!1);r=s,a.length&&t.onError(dn(36,a[0].loc))}return{slotName:n,slotProps:r}}const Doe=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,bz=(e,t,n,r)=>{const{loc:i,modifiers:s,arg:a}=e;!e.exp&&!s.length&&n.onError(dn(35,i));let o;if(a.type===4)if(a.isStatic){let f=a.content;f.startsWith("vue:")&&(f=`vnode-${f.slice(4)}`);const h=t.tagType!==0||f.startsWith("vnode")||!/[A-Z]/.test(f)?t0(gn(f)):`on:${f}`;o=dt(h,!0,a.loc)}else o=za([`${n.helperString(gk)}(`,a,")"]);else o=a,o.children.unshift(`${n.helperString(gk)}(`),o.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let c=n.cacheHandlers&&!l&&!n.inVOnce;if(l){const f=nz(l.content),h=!(f||Doe.test(l.content)),d=l.content.includes(";");(h||c&&f)&&(l=za([`${h?"$event":"(...args)"} => ${d?"{":"("}`,l,d?"}":")"]))}let u={props:[Nn(o,l||dt("() => {}",!1,i))]};return r&&(u=r(u)),c&&(u.props[0].value=n.cache(u.props[0].value)),u.props.forEach(f=>f.key.isHandlerKey=!0),u},Moe=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const n=e.children;let r,i=!1;for(let s=0;s<n.length;s++){const a=n[s];if(GS(a)){i=!0;for(let o=s+1;o<n.length;o++){const l=n[o];if(GS(l))r||(r=n[s]=za([a],a.loc)),r.children.push(" + ",l),n.splice(o,1),o--;else{r=void 0;break}}}}if(!(!i||n.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(s=>s.type===7&&!t.directiveTransforms[s.name])&&e.tag!=="template")))for(let s=0;s<n.length;s++){const a=n[s];if(GS(a)||a.type===8){const o=[];(a.type!==2||a.content!==" ")&&o.push(a),!t.ssr&&Ys(a,t)===0&&o.push("1"),n[s]={type:12,content:a,loc:a.loc,codegenNode:Gn(t.helper($3),o)}}}}},gI=new WeakSet,Roe=(e,t)=>{if(e.type===1&&Ca(e,"once",!0))return gI.has(e)||t.inVOnce||t.inSSR?void 0:(gI.add(e),t.inVOnce=!0,t.helper($_),()=>{t.inVOnce=!1;const n=t.currentNode;n.codegenNode&&(n.codegenNode=t.cache(n.codegenNode,!0))})},Ez=(e,t,n)=>{const{exp:r,arg:i}=e;if(!r)return n.onError(dn(41,e.loc)),Cv();const s=r.loc.source,a=r.type===4?r.content:s,o=n.bindingMetadata[s];if(o==="props"||o==="props-aliased")return n.onError(dn(44,r.loc)),Cv();if(!a.trim()||!nz(a)&&!!1)return n.onError(dn(42,r.loc)),Cv();const c=i||dt("modelValue",!0),u=i?Wi(i)?`onUpdate:${gn(i.content)}`:za(['"onUpdate:" + ',i]):"onUpdate:modelValue";let f;const h=n.isTS?"($event: any)":"$event";f=za([`${h} => ((`,r,") = $event)"]);const d=[Nn(c,e.exp),Nn(u,f)];if(e.modifiers.length&&t.tagType===1){const p=e.modifiers.map(m=>(Y3(m)?m:JSON.stringify(m))+": true").join(", "),g=i?Wi(i)?`${i.content}Modifiers`:za([i,' + "Modifiers"']):"modelModifiers";d.push(Nn(g,dt(`{ ${p} }`,!1,e.loc,2)))}return Cv(d)};function Cv(e=[]){return{props:e}}const $oe=/[\w).+\-_$\]]/,Ioe=(e,t)=>{Yf("COMPILER_FILTERS",t)&&(e.type===5?z_(e.content,t):e.type===1&&e.props.forEach(n=>{n.type===7&&n.name!=="for"&&n.exp&&z_(n.exp,t)}))};function z_(e,t){if(e.type===4)mI(e,t);else for(let n=0;n<e.children.length;n++){const r=e.children[n];typeof r=="object"&&(r.type===4?mI(r,t):r.type===8?z_(e,t):r.type===5&&z_(r.content,t))}}function mI(e,t){const n=e.content;let r=!1,i=!1,s=!1,a=!1,o=0,l=0,c=0,u=0,f,h,d,p,g=[];for(d=0;d<n.length;d++)if(h=f,f=n.charCodeAt(d),r)f===39&&h!==92&&(r=!1);else if(i)f===34&&h!==92&&(i=!1);else if(s)f===96&&h!==92&&(s=!1);else if(a)f===47&&h!==92&&(a=!1);else if(f===124&&n.charCodeAt(d+1)!==124&&n.charCodeAt(d-1)!==124&&!o&&!l&&!c)p===void 0?(u=d+1,p=n.slice(0,d).trim()):m();else{switch(f){case 34:i=!0;break;case 39:r=!0;break;case 96:s=!0;break;case 40:c++;break;case 41:c--;break;case 91:l++;break;case 93:l--;break;case 123:o++;break;case 125:o--;break}if(f===47){let x=d-1,v;for(;x>=0&&(v=n.charAt(x),v===" ");x--);(!v||!$oe.test(v))&&(a=!0)}}p===void 0?p=n.slice(0,d).trim():u!==0&&m();function m(){g.push(n.slice(u,d).trim()),u=d+1}if(g.length){for(d=0;d<g.length;d++)p=Loe(p,g[d],t);e.content=p,e.ast=void 0}}function Loe(e,t,n){n.helper(B3);const r=t.indexOf("(");if(r<0)return n.filters.add(t),`${a1(t,"filter")}(${e})`;{const i=t.slice(0,r),s=t.slice(r+1);return n.filters.add(i),`${a1(i,"filter")}(${e}${s!==")"?","+s:s}`}}const xI=new WeakSet,Poe=(e,t)=>{if(e.type===1){const n=Ca(e,"memo");return!n||xI.has(e)?void 0:(xI.add(e),()=>{const r=e.codegenNode||t.currentNode.codegenNode;r&&r.type===13&&(e.tagType!==1&&q3(r,t),e.codegenNode=Gn(t.helper(G3),[n.exp,C0(void 0,r),"_cache",String(t.cached++)]))})}};function Boe(e){return[[Roe,goe,Poe,yoe,Ioe,Ooe,Aoe,Eoe,Moe],{on:bz,bind:voe,model:Ez}]}function Uoe(e,t={}){const n=t.onError||X3,r=t.mode==="module";t.prefixIdentifiers===!0?n(dn(47)):r&&n(dn(48));const i=!1;t.cacheHandlers&&n(dn(49)),t.scopeId&&!r&&n(dn(50));const s=Ut({},t,{prefixIdentifiers:i}),a=ft(e)?Gae(e,s):e,[o,l]=Boe();return Kae(a,Ut({},s,{nodeTransforms:[...o,...t.nodeTransforms||[]],directiveTransforms:Ut({},l,t.directiveTransforms||{})})),eoe(a,s)}const zoe=()=>({props:[]});/**
* @vue/compiler-dom v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wz=Symbol(""),Sz=Symbol(""),Az=Symbol(""),Tz=Symbol(""),bk=Symbol(""),kz=Symbol(""),Cz=Symbol(""),Fz=Symbol(""),Oz=Symbol(""),Nz=Symbol("");_ae({[wz]:"vModelRadio",[Sz]:"vModelCheckbox",[Az]:"vModelText",[Tz]:"vModelSelect",[bk]:"vModelDynamic",[kz]:"withModifiers",[Cz]:"withKeys",[Fz]:"vShow",[Oz]:"Transition",[Nz]:"TransitionGroup"});let xd;function Hoe(e,t=!1){return xd||(xd=document.createElement("div")),t?(xd.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,xd.children[0].getAttribute("foo")):(xd.innerHTML=e,xd.textContent)}const Voe={parseMode:"html",isVoidTag:lre,isNativeTag:e=>sre(e)||are(e)||ore(e),isPreTag:e=>e==="pre",decodeEntities:Hoe,isBuiltInComponent:e=>{if(e==="Transition"||e==="transition")return Oz;if(e==="TransitionGroup"||e==="transition-group")return Nz},getNamespace(e,t,n){let r=t?t.ns:n;if(t&&r===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(i=>i.type===6&&i.name==="encoding"&&i.value!=null&&(i.value.content==="text/html"||i.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(r=0);else t&&r===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(r=0);if(r===0){if(e==="svg")return 1;if(e==="math")return 2}return r}},Woe=e=>{e.type===1&&e.props.forEach((t,n)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[n]={type:7,name:"bind",arg:dt("style",!0,t.loc),exp:joe(t.value.content,t.loc),modifiers:[],loc:t.loc})})},joe=(e,t)=>{const n=X7(e);return dt(JSON.stringify(n),!1,t,3)};function nu(e,t){return dn(e,t)}const Goe=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(nu(53,i)),t.children.length&&(n.onError(nu(54,i)),t.children.length=0),{props:[Nn(dt("innerHTML",!0,i),r||dt("",!0))]}},qoe=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(nu(55,i)),t.children.length&&(n.onError(nu(56,i)),t.children.length=0),{props:[Nn(dt("textContent",!0),r?Ys(r,n)>0?r:Gn(n.helperString(rE),[r],i):dt("",!0))]}},Xoe=(e,t,n)=>{const r=Ez(e,t,n);if(!r.props.length||t.tagType===1)return r;e.arg&&n.onError(nu(58,e.arg.loc));const{tag:i}=t,s=n.isCustomElement(i);if(i==="input"||i==="textarea"||i==="select"||s){let a=Az,o=!1;if(i==="input"||s){const l=iE(t,"type");if(l){if(l.type===7)a=bk;else if(l.value)switch(l.value.content){case"radio":a=wz;break;case"checkbox":a=Sz;break;case"file":o=!0,n.onError(nu(59,e.loc));break}}else Oae(t)&&(a=bk)}else i==="select"&&(a=Tz);o||(r.needRuntime=n.helper(a))}else n.onError(nu(57,e.loc));return r.props=r.props.filter(a=>!(a.key.type===4&&a.key.content==="modelValue")),r},Yoe=Rs("passive,once,capture"),Koe=Rs("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),Joe=Rs("left,right"),Dz=Rs("onkeyup,onkeydown,onkeypress",!0),Zoe=(e,t,n,r)=>{const i=[],s=[],a=[];for(let o=0;o<t.length;o++){const l=t[o];l==="native"&&s1("COMPILER_V_ON_NATIVE",n)||Yoe(l)?a.push(l):Joe(l)?Wi(e)?Dz(e.content)?i.push(l):s.push(l):(i.push(l),s.push(l)):Koe(l)?s.push(l):i.push(l)}return{keyModifiers:i,nonKeyModifiers:s,eventOptionModifiers:a}},vI=(e,t)=>Wi(e)&&e.content.toLowerCase()==="onclick"?dt(t,!0):e.type!==4?za(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,Qoe=(e,t,n)=>bz(e,t,n,r=>{const{modifiers:i}=e;if(!i.length)return r;let{key:s,value:a}=r.props[0];const{keyModifiers:o,nonKeyModifiers:l,eventOptionModifiers:c}=Zoe(s,i,n,e.loc);if(l.includes("right")&&(s=vI(s,"onContextmenu")),l.includes("middle")&&(s=vI(s,"onMouseup")),l.length&&(a=Gn(n.helper(kz),[a,JSON.stringify(l)])),o.length&&(!Wi(s)||Dz(s.content))&&(a=Gn(n.helper(Cz),[a,JSON.stringify(o)])),c.length){const u=c.map(jh).join("");s=Wi(s)?dt(`${s.content}${u}`,!0):za(["(",s,`) + "${u}"`])}return{props:[Nn(s,a)]}}),ele=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(nu(61,i)),{props:[],needRuntime:n.helper(Fz)}},tle=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&t.removeNode()},nle=[Woe],rle={cloak:zoe,html:Goe,text:qoe,model:Xoe,on:Qoe,show:ele};function ile(e,t={}){return Uoe(e,Ut({},Voe,t,{nodeTransforms:[tle,...nle,...t.nodeTransforms||[]],directiveTransforms:Ut({},rle,t.directiveTransforms||{}),transformHoist:null}))}/**
* vue v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const yI=new WeakMap;function sle(e){let t=yI.get(e??Mt);return t||(t=Object.create(null),yI.set(e??Mt,t)),t}function ale(e,t){if(!ft(e))if(e.nodeType)e=e.innerHTML;else return Jn;const n=e,r=sle(t),i=r[n];if(i)return i;if(e[0]==="#"){const l=document.querySelector(e);e=l?l.innerHTML:""}const s=Ut({hoistStatic:!0,onError:void 0,onWarn:Jn},t);!s.isCustomElement&&typeof customElements<"u"&&(s.isCustomElement=l=>!!customElements.get(l));const{code:a}=ile(e,s),o=new Function("Vue",a)(pae);return o._rc=!0,r[n]=o}bU(ale);var ole=!1;/*!
 * pinia v2.2.1
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let Mz;const oE=e=>Mz=e,Rz=Symbol();function Ek(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ym;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ym||(ym={}));function lle(){const e=o3(!0),t=e.run(()=>zn({}));let n=[],r=[];const i=jb({install(s){oE(i),i._a=s,s.provide(Rz,i),s.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(s){return!this._a&&!ole?r.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const $z=()=>{};function _I(e,t,n,r=$z){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&l3()&&Q7(i),i}function vd(e,...t){e.slice().forEach(n=>{n(...t)})}const cle=e=>e(),bI=Symbol(),XS=Symbol();function wk(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Ek(i)&&Ek(r)&&e.hasOwnProperty(n)&&!Dn(r)&&!Rl(r)?e[n]=wk(i,r):e[n]=r}return e}const ule=Symbol();function fle(e){return!Ek(e)||!e.hasOwnProperty(ule)}const{assign:Tc}=Object;function hle(e){return!!(Dn(e)&&e.effect)}function dle(e,t,n,r){const{state:i,actions:s,getters:a}=t,o=n.state.value[e];let l;function c(){o||(n.state.value[e]=i?i():{});const u=xB(n.state.value[e]);return Tc(u,s,Object.keys(a||{}).reduce((f,h)=>(f[h]=jb(tu(()=>{oE(n);const d=n._s.get(e);return a[h].call(d,d)})),f),{}))}return l=Iz(e,c,t,n,r,!0),l}function Iz(e,t,n={},r,i,s){let a;const o=Tc({actions:{}},n),l={deep:!0};let c,u,f=[],h=[],d;const p=r.state.value[e];!s&&!p&&(r.state.value[e]={}),zn({});let g;function m(A){let S;c=u=!1,typeof A=="function"?(A(r.state.value[e]),S={type:ym.patchFunction,storeId:e,events:d}):(wk(r.state.value[e],A),S={type:ym.patchObject,payload:A,storeId:e,events:d});const k=g=Symbol();Jl().then(()=>{g===k&&(c=!0)}),u=!0,vd(f,S,r.state.value[e])}const x=s?function(){const{state:S}=n,k=S?S():{};this.$patch(T=>{Tc(T,k)})}:$z;function v(){a.stop(),f=[],h=[],r._s.delete(e)}const y=(A,S="")=>{if(bI in A)return A[XS]=S,A;const k=function(){oE(r);const T=Array.from(arguments),O=[],C=[];function D(L){O.push(L)}function N(L){C.push(L)}vd(h,{args:T,name:k[XS],store:b,after:D,onError:N});let R;try{R=A.apply(this&&this.$id===e?this:b,T)}catch(L){throw vd(C,L),L}return R instanceof Promise?R.then(L=>(vd(O,L),L)).catch(L=>(vd(C,L),Promise.reject(L))):(vd(O,R),R)};return k[bI]=!0,k[XS]=S,k},_={_p:r,$id:e,$onAction:_I.bind(null,h),$patch:m,$reset:x,$subscribe(A,S={}){const k=_I(f,A,S.detached,()=>T()),T=a.run(()=>Ll(()=>r.state.value[e],O=>{(S.flush==="sync"?u:c)&&A({storeId:e,type:ym.direct,events:d},O)},Tc({},l,S)));return k},$dispose:v},b=rs(_);r._s.set(e,b);const E=(r._a&&r._a.runWithContext||cle)(()=>r._e.run(()=>(a=o3()).run(()=>t({action:y}))));for(const A in E){const S=E[A];if(Dn(S)&&!hle(S)||Rl(S))s||(p&&fle(S)&&(Dn(S)?S.value=p[A]:wk(S,p[A])),r.state.value[e][A]=S);else if(typeof S=="function"){const k=y(S,A);E[A]=k,o.actions[A]=S}}return Tc(b,E),Tc(Ct(b),E),Object.defineProperty(b,"$state",{get:()=>r.state.value[e],set:A=>{m(S=>{Tc(S,A)})}}),r._p.forEach(A=>{Tc(b,a.run(()=>A({store:b,app:r._a,pinia:r,options:o})))}),p&&s&&n.hydrate&&n.hydrate(b.$state,p),c=!0,u=!0,b}function ple(e,t,n){let r,i;const s=typeof t=="function";r=e,i=s?n:t;function a(o,l){const c=UB();return o=o||(c?s0(Rz,null):null),o&&oE(o),o=Mz,o._s.has(r)||(s?Iz(r,t,i,o):dle(r,i,o)),o._s.get(r)}return a.$id=r,a}var Si="top",As="bottom",Ts="right",Ai="left",lE="auto",Sp=[Si,As,Ts,Ai],gh="start",N0="end",Lz="clippingParents",J3="viewport",Id="popper",Pz="reference",Sk=Sp.reduce(function(e,t){return e.concat([t+"-"+gh,t+"-"+N0])},[]),Z3=[].concat(Sp,[lE]).reduce(function(e,t){return e.concat([t,t+"-"+gh,t+"-"+N0])},[]),Bz="beforeRead",Uz="read",zz="afterRead",Hz="beforeMain",Vz="main",Wz="afterMain",jz="beforeWrite",Gz="write",qz="afterWrite",Xz=[Bz,Uz,zz,Hz,Vz,Wz,jz,Gz,qz];function Lo(e){return e?(e.nodeName||"").toLowerCase():null}function ks(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function mh(e){var t=ks(e).Element;return e instanceof t||e instanceof Element}function na(e){var t=ks(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Q3(e){if(typeof ShadowRoot>"u")return!1;var t=ks(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function gle(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},s=t.elements[n];!na(s)||!Lo(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var o=i[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function mle(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],s=t.attributes[r]||{},a=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),o=a.reduce(function(l,c){return l[c]="",l},{});!na(i)||!Lo(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const e4={name:"applyStyles",enabled:!0,phase:"write",fn:gle,effect:mle,requires:["computeStyles"]};function Fo(e){return e.split("-")[0]}var Kf=Math.max,H_=Math.min,D0=Math.round;function Ak(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Yz(){return!/^((?!chrome|android).)*safari/i.test(Ak())}function M0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&na(e)&&(i=e.offsetWidth>0&&D0(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&D0(r.height)/e.offsetHeight||1);var a=mh(e)?ks(e):window,o=a.visualViewport,l=!Yz()&&n,c=(r.left+(l&&o?o.offsetLeft:0))/i,u=(r.top+(l&&o?o.offsetTop:0))/s,f=r.width/i,h=r.height/s;return{width:f,height:h,top:u,right:c+f,bottom:u+h,left:c,x:c,y:u}}function t4(e){var t=M0(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Kz(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Q3(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Zl(e){return ks(e).getComputedStyle(e)}function xle(e){return["table","td","th"].indexOf(Lo(e))>=0}function Vu(e){return((mh(e)?e.ownerDocument:e.document)||window.document).documentElement}function cE(e){return Lo(e)==="html"?e:e.assignedSlot||e.parentNode||(Q3(e)?e.host:null)||Vu(e)}function EI(e){return!na(e)||Zl(e).position==="fixed"?null:e.offsetParent}function vle(e){var t=/firefox/i.test(Ak()),n=/Trident/i.test(Ak());if(n&&na(e)){var r=Zl(e);if(r.position==="fixed")return null}var i=cE(e);for(Q3(i)&&(i=i.host);na(i)&&["html","body"].indexOf(Lo(i))<0;){var s=Zl(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function sx(e){for(var t=ks(e),n=EI(e);n&&xle(n)&&Zl(n).position==="static";)n=EI(n);return n&&(Lo(n)==="html"||Lo(n)==="body"&&Zl(n).position==="static")?t:n||vle(e)||t}function n4(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function _m(e,t,n){return Kf(e,H_(t,n))}function yle(e,t,n){var r=_m(e,t,n);return r>n?n:r}function Jz(){return{top:0,right:0,bottom:0,left:0}}function Zz(e){return Object.assign({},Jz(),e)}function Qz(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var _le=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Zz(typeof t!="number"?t:Qz(t,Sp))};function ble(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,o=Fo(n.placement),l=n4(o),c=[Ai,Ts].indexOf(o)>=0,u=c?"height":"width";if(!(!s||!a)){var f=_le(i.padding,n),h=t4(s),d=l==="y"?Si:Ai,p=l==="y"?As:Ts,g=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],m=a[l]-n.rects.reference[l],x=sx(s),v=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,y=g/2-m/2,_=f[d],b=v-h[u]-f[p],w=v/2-h[u]/2+y,E=_m(_,w,b),A=l;n.modifiersData[r]=(t={},t[A]=E,t.centerOffset=E-w,t)}}function Ele(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Kz(t.elements.popper,i)&&(t.elements.arrow=i))}const eH={name:"arrow",enabled:!0,phase:"main",fn:ble,effect:Ele,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function R0(e){return e.split("-")[1]}var wle={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Sle(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:D0(n*i)/i||0,y:D0(r*i)/i||0}}function wI(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,h=a.x,d=h===void 0?0:h,p=a.y,g=p===void 0?0:p,m=typeof u=="function"?u({x:d,y:g}):{x:d,y:g};d=m.x,g=m.y;var x=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),y=Ai,_=Si,b=window;if(c){var w=sx(n),E="clientHeight",A="clientWidth";if(w===ks(n)&&(w=Vu(n),Zl(w).position!=="static"&&o==="absolute"&&(E="scrollHeight",A="scrollWidth")),w=w,i===Si||(i===Ai||i===Ts)&&s===N0){_=As;var S=f&&w===b&&b.visualViewport?b.visualViewport.height:w[E];g-=S-r.height,g*=l?1:-1}if(i===Ai||(i===Si||i===As)&&s===N0){y=Ts;var k=f&&w===b&&b.visualViewport?b.visualViewport.width:w[A];d-=k-r.width,d*=l?1:-1}}var T=Object.assign({position:o},c&&wle),O=u===!0?Sle({x:d,y:g},ks(n)):{x:d,y:g};if(d=O.x,g=O.y,l){var C;return Object.assign({},T,(C={},C[_]=v?"0":"",C[y]=x?"0":"",C.transform=(b.devicePixelRatio||1)<=1?"translate("+d+"px, "+g+"px)":"translate3d("+d+"px, "+g+"px, 0)",C))}return Object.assign({},T,(t={},t[_]=v?g+"px":"",t[y]=x?d+"px":"",t.transform="",t))}function Ale(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,o=n.roundOffsets,l=o===void 0?!0:o,c={placement:Fo(t.placement),variation:R0(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,wI(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,wI(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const r4={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ale,data:{}};var Fv={passive:!0};function Tle(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,o=a===void 0?!0:a,l=ks(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Fv)}),o&&l.addEventListener("resize",n.update,Fv),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Fv)}),o&&l.removeEventListener("resize",n.update,Fv)}}const i4={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Tle,data:{}};var kle={left:"right",right:"left",bottom:"top",top:"bottom"};function Vy(e){return e.replace(/left|right|bottom|top/g,function(t){return kle[t]})}var Cle={start:"end",end:"start"};function SI(e){return e.replace(/start|end/g,function(t){return Cle[t]})}function s4(e){var t=ks(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function a4(e){return M0(Vu(e)).left+s4(e).scrollLeft}function Fle(e,t){var n=ks(e),r=Vu(e),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;var c=Yz();(c||!c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o+a4(e),y:l}}function Ole(e){var t,n=Vu(e),r=s4(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=Kf(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Kf(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+a4(e),l=-r.scrollTop;return Zl(i||n).direction==="rtl"&&(o+=Kf(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function o4(e){var t=Zl(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function tH(e){return["html","body","#document"].indexOf(Lo(e))>=0?e.ownerDocument.body:na(e)&&o4(e)?e:tH(cE(e))}function bm(e,t){var n;t===void 0&&(t=[]);var r=tH(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=ks(r),a=i?[s].concat(s.visualViewport||[],o4(r)?r:[]):r,o=t.concat(a);return i?o:o.concat(bm(cE(a)))}function Tk(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Nle(e,t){var n=M0(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function AI(e,t,n){return t===J3?Tk(Fle(e,n)):mh(t)?Nle(t,n):Tk(Ole(Vu(e)))}function Dle(e){var t=bm(cE(e)),n=["absolute","fixed"].indexOf(Zl(e).position)>=0,r=n&&na(e)?sx(e):e;return mh(r)?t.filter(function(i){return mh(i)&&Kz(i,r)&&Lo(i)!=="body"}):[]}function Mle(e,t,n,r){var i=t==="clippingParents"?Dle(e):[].concat(t),s=[].concat(i,[n]),a=s[0],o=s.reduce(function(l,c){var u=AI(e,c,r);return l.top=Kf(u.top,l.top),l.right=H_(u.right,l.right),l.bottom=H_(u.bottom,l.bottom),l.left=Kf(u.left,l.left),l},AI(e,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function nH(e){var t=e.reference,n=e.element,r=e.placement,i=r?Fo(r):null,s=r?R0(r):null,a=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2,l;switch(i){case Si:l={x:a,y:t.y-n.height};break;case As:l={x:a,y:t.y+t.height};break;case Ts:l={x:t.x+t.width,y:o};break;case Ai:l={x:t.x-n.width,y:o};break;default:l={x:t.x,y:t.y}}var c=i?n4(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case gh:l[c]=l[c]-(t[u]/2-n[u]/2);break;case N0:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function $0(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,s=n.strategy,a=s===void 0?e.strategy:s,o=n.boundary,l=o===void 0?Lz:o,c=n.rootBoundary,u=c===void 0?J3:c,f=n.elementContext,h=f===void 0?Id:f,d=n.altBoundary,p=d===void 0?!1:d,g=n.padding,m=g===void 0?0:g,x=Zz(typeof m!="number"?m:Qz(m,Sp)),v=h===Id?Pz:Id,y=e.rects.popper,_=e.elements[p?v:h],b=Mle(mh(_)?_:_.contextElement||Vu(e.elements.popper),l,u,a),w=M0(e.elements.reference),E=nH({reference:w,element:y,strategy:"absolute",placement:i}),A=Tk(Object.assign({},y,E)),S=h===Id?A:w,k={top:b.top-S.top+x.top,bottom:S.bottom-b.bottom+x.bottom,left:b.left-S.left+x.left,right:S.right-b.right+x.right},T=e.modifiersData.offset;if(h===Id&&T){var O=T[i];Object.keys(k).forEach(function(C){var D=[Ts,As].indexOf(C)>=0?1:-1,N=[Si,As].indexOf(C)>=0?"y":"x";k[C]+=O[N]*D})}return k}function Rle(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Z3:l,u=R0(r),f=u?o?Sk:Sk.filter(function(p){return R0(p)===u}):Sp,h=f.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=f);var d=h.reduce(function(p,g){return p[g]=$0(e,{placement:g,boundary:i,rootBoundary:s,padding:a})[Fo(g)],p},{});return Object.keys(d).sort(function(p,g){return d[p]-d[g]})}function $le(e){if(Fo(e)===lE)return[];var t=Vy(e);return[SI(e),t,SI(t)]}function Ile(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!0:a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,g=n.allowedAutoPlacements,m=t.options.placement,x=Fo(m),v=x===m,y=l||(v||!p?[Vy(m)]:$le(m)),_=[m].concat(y).reduce(function(ve,Oe){return ve.concat(Fo(Oe)===lE?Rle(t,{placement:Oe,boundary:u,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:g}):Oe)},[]),b=t.rects.reference,w=t.rects.popper,E=new Map,A=!0,S=_[0],k=0;k<_.length;k++){var T=_[k],O=Fo(T),C=R0(T)===gh,D=[Si,As].indexOf(O)>=0,N=D?"width":"height",R=$0(t,{placement:T,boundary:u,rootBoundary:f,altBoundary:h,padding:c}),L=D?C?Ts:Ai:C?As:Si;b[N]>w[N]&&(L=Vy(L));var I=Vy(L),Y=[];if(s&&Y.push(R[O]<=0),o&&Y.push(R[L]<=0,R[I]<=0),Y.every(function(ve){return ve})){S=T,A=!1;break}E.set(T,Y)}if(A)for(var X=p?3:1,oe=function(Oe){var Pe=_.find(function(Ge){var z=E.get(Ge);if(z)return z.slice(0,Oe).every(function(q){return q})});if(Pe)return S=Pe,"break"},xe=X;xe>0;xe--){var _e=oe(xe);if(_e==="break")break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}}const rH={name:"flip",enabled:!0,phase:"main",fn:Ile,requiresIfExists:["offset"],data:{_skip:!1}};function TI(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function kI(e){return[Si,Ts,As,Ai].some(function(t){return e[t]>=0})}function Lle(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,a=$0(t,{elementContext:"reference"}),o=$0(t,{altBoundary:!0}),l=TI(a,r),c=TI(o,i,s),u=kI(l),f=kI(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const iH={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Lle};function Ple(e,t,n){var r=Fo(e),i=[Ai,Si].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[Ai,Ts].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}function Ble(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=i===void 0?[0,0]:i,a=Z3.reduce(function(u,f){return u[f]=Ple(f,t.rects,s),u},{}),o=a[t.placement],l=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}const sH={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ble};function Ule(e){var t=e.state,n=e.name;t.modifiersData[n]=nH({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const l4={name:"popperOffsets",enabled:!0,phase:"read",fn:Ule,data:{}};function zle(e){return e==="x"?"y":"x"}function Hle(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!1:a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,h=n.tether,d=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=$0(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),x=Fo(t.placement),v=R0(t.placement),y=!v,_=n4(x),b=zle(_),w=t.modifiersData.popperOffsets,E=t.rects.reference,A=t.rects.popper,S=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,k=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(w){if(s){var C,D=_==="y"?Si:Ai,N=_==="y"?As:Ts,R=_==="y"?"height":"width",L=w[_],I=L+m[D],Y=L-m[N],X=d?-A[R]/2:0,oe=v===gh?E[R]:A[R],xe=v===gh?-A[R]:-E[R],_e=t.elements.arrow,ve=d&&_e?t4(_e):{width:0,height:0},Oe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Jz(),Pe=Oe[D],Ge=Oe[N],z=_m(0,E[R],ve[R]),q=y?E[R]/2-X-z-Pe-k.mainAxis:oe-z-Pe-k.mainAxis,G=y?-E[R]/2+X+z+Ge+k.mainAxis:xe+z+Ge+k.mainAxis,H=t.elements.arrow&&sx(t.elements.arrow),J=H?_==="y"?H.clientTop||0:H.clientLeft||0:0,F=(C=T==null?void 0:T[_])!=null?C:0,B=L+q-F-J,K=L+G-F,Z=_m(d?H_(I,B):I,L,d?Kf(Y,K):Y);w[_]=Z,O[_]=Z-L}if(o){var Q,te=_==="x"?Si:Ai,de=_==="x"?As:Ts,me=w[b],ye=b==="y"?"height":"width",pe=me+m[te],ce=me-m[de],Se=[Si,Ai].indexOf(x)!==-1,ae=(Q=T==null?void 0:T[b])!=null?Q:0,We=Se?pe:me-E[ye]-A[ye]-ae+k.altAxis,Xe=Se?me+E[ye]+A[ye]-ae-k.altAxis:ce,tt=d&&Se?yle(We,me,Xe):_m(d?We:pe,me,d?Xe:ce);w[b]=tt,O[b]=tt-me}t.modifiersData[r]=O}}const aH={name:"preventOverflow",enabled:!0,phase:"main",fn:Hle,requiresIfExists:["offset"]};function Vle(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Wle(e){return e===ks(e)||!na(e)?s4(e):Vle(e)}function jle(e){var t=e.getBoundingClientRect(),n=D0(t.width)/e.offsetWidth||1,r=D0(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Gle(e,t,n){n===void 0&&(n=!1);var r=na(t),i=na(t)&&jle(t),s=Vu(t),a=M0(e,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Lo(t)!=="body"||o4(s))&&(o=Wle(t)),na(t)?(l=M0(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=a4(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function qle(e){var t=new Map,n=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function i(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!n.has(o)){var l=t.get(o);l&&i(l)}}),r.push(s)}return e.forEach(function(s){n.has(s.name)||i(s)}),r}function Xle(e){var t=qle(e);return Xz.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function Yle(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Kle(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var CI={placement:"bottom",modifiers:[],strategy:"absolute"};function FI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function uE(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,s=i===void 0?CI:i;return function(o,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},CI,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},f=[],h=!1,d={state:u,setOptions:function(x){var v=typeof x=="function"?x(u.options):x;g(),u.options=Object.assign({},s,u.options,v),u.scrollParents={reference:mh(o)?bm(o):o.contextElement?bm(o.contextElement):[],popper:bm(l)};var y=Xle(Kle([].concat(r,u.options.modifiers)));return u.orderedModifiers=y.filter(function(_){return _.enabled}),p(),d.update()},forceUpdate:function(){if(!h){var x=u.elements,v=x.reference,y=x.popper;if(FI(v,y)){u.rects={reference:Gle(v,sx(y),u.options.strategy==="fixed"),popper:t4(y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(k){return u.modifiersData[k.name]=Object.assign({},k.data)});for(var _=0;_<u.orderedModifiers.length;_++){if(u.reset===!0){u.reset=!1,_=-1;continue}var b=u.orderedModifiers[_],w=b.fn,E=b.options,A=E===void 0?{}:E,S=b.name;typeof w=="function"&&(u=w({state:u,options:A,name:S,instance:d})||u)}}}},update:Yle(function(){return new Promise(function(m){d.forceUpdate(),m(u)})}),destroy:function(){g(),h=!0}};if(!FI(o,l))return d;d.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){u.orderedModifiers.forEach(function(m){var x=m.name,v=m.options,y=v===void 0?{}:v,_=m.effect;if(typeof _=="function"){var b=_({state:u,name:x,instance:d,options:y}),w=function(){};f.push(b||w)}})}function g(){f.forEach(function(m){return m()}),f=[]}return d}}var Jle=uE(),Zle=[i4,l4,r4,e4],Qle=uE({defaultModifiers:Zle}),ece=[i4,l4,r4,e4,sH,rH,aH,eH,iH],c4=uE({defaultModifiers:ece});const oH=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Wz,afterRead:zz,afterWrite:qz,applyStyles:e4,arrow:eH,auto:lE,basePlacements:Sp,beforeMain:Hz,beforeRead:Bz,beforeWrite:jz,bottom:As,clippingParents:Lz,computeStyles:r4,createPopper:c4,createPopperBase:Jle,createPopperLite:Qle,detectOverflow:$0,end:N0,eventListeners:i4,flip:rH,hide:iH,left:Ai,main:Vz,modifierPhases:Xz,offset:sH,placements:Z3,popper:Id,popperGenerator:uE,popperOffsets:l4,preventOverflow:aH,read:Uz,reference:Pz,right:Ts,start:gh,top:Si,variationPlacements:Sk,viewport:J3,write:Gz},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const bc=new Map,YS={set(e,t,n){bc.has(e)||bc.set(e,new Map);const r=bc.get(e);if(!r.has(t)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(t,n)},get(e,t){return bc.has(e)&&bc.get(e).get(t)||null},remove(e,t){if(!bc.has(e))return;const n=bc.get(e);n.delete(t),n.size===0&&bc.delete(e)}},tce=1e6,nce=1e3,kk="transitionend",lH=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),rce=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),ice=e=>{do e+=Math.floor(Math.random()*tce);while(document.getElementById(e));return e},sce=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),i=Number.parseFloat(n);return!r&&!i?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*nce)},cH=e=>{e.dispatchEvent(new Event(kk))},Bl=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),gu=e=>Bl(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(lH(e)):null,Ap=e=>{if(!Bl(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const r=e.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return t},mu=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",uH=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?uH(e.parentNode):null},V_=()=>{},ax=e=>{e.offsetHeight},fH=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,KS=[],ace=e=>{document.readyState==="loading"?(KS.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of KS)t()}),KS.push(e)):e()},sa=()=>document.documentElement.dir==="rtl",pa=e=>{ace(()=>{const t=fH();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}})},Hi=(e,t=[],n=e)=>typeof e=="function"?e(...t):n,hH=(e,t,n=!0)=>{if(!n){Hi(e);return}const i=sce(t)+5;let s=!1;const a=({target:o})=>{o===t&&(s=!0,t.removeEventListener(kk,a),Hi(e))};t.addEventListener(kk,a),setTimeout(()=>{s||cH(t)},i)},u4=(e,t,n,r)=>{const i=e.length;let s=e.indexOf(t);return s===-1?!n&&r?e[i-1]:e[0]:(s+=n?1:-1,r&&(s=(s+i)%i),e[Math.max(0,Math.min(s,i-1))])},oce=/[^.]*(?=\..*)\.|.*/,lce=/\..*/,cce=/::\d+$/,JS={};let OI=1;const dH={mouseenter:"mouseover",mouseleave:"mouseout"},uce=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function pH(e,t){return t&&`${t}::${OI++}`||e.uidEvent||OI++}function gH(e){const t=pH(e);return e.uidEvent=t,JS[t]=JS[t]||{},JS[t]}function fce(e,t){return function n(r){return f4(r,{delegateTarget:e}),n.oneOff&&be.off(e,r.type,t),t.apply(e,[r])}}function hce(e,t,n){return function r(i){const s=e.querySelectorAll(t);for(let{target:a}=i;a&&a!==this;a=a.parentNode)for(const o of s)if(o===a)return f4(i,{delegateTarget:a}),r.oneOff&&be.off(e,i.type,t,n),n.apply(a,[i])}}function mH(e,t,n=null){return Object.values(e).find(r=>r.callable===t&&r.delegationSelector===n)}function xH(e,t,n){const r=typeof t=="string",i=r?n:t||n;let s=vH(e);return uce.has(s)||(s=e),[r,i,s]}function NI(e,t,n,r,i){if(typeof t!="string"||!e)return;let[s,a,o]=xH(t,n,r);t in dH&&(a=(p=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return p.call(this,g)})(a));const l=gH(e),c=l[o]||(l[o]={}),u=mH(c,a,s?n:null);if(u){u.oneOff=u.oneOff&&i;return}const f=pH(a,t.replace(oce,"")),h=s?hce(e,n,a):fce(e,a);h.delegationSelector=s?n:null,h.callable=a,h.oneOff=i,h.uidEvent=f,c[f]=h,e.addEventListener(o,h,s)}function Ck(e,t,n,r,i){const s=mH(t[n],r,i);s&&(e.removeEventListener(n,s,!!i),delete t[n][s.uidEvent])}function dce(e,t,n,r){const i=t[n]||{};for(const[s,a]of Object.entries(i))s.includes(r)&&Ck(e,t,n,a.callable,a.delegationSelector)}function vH(e){return e=e.replace(lce,""),dH[e]||e}const be={on(e,t,n,r){NI(e,t,n,r,!1)},one(e,t,n,r){NI(e,t,n,r,!0)},off(e,t,n,r){if(typeof t!="string"||!e)return;const[i,s,a]=xH(t,n,r),o=a!==t,l=gH(e),c=l[a]||{},u=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;Ck(e,l,a,s,i?n:null);return}if(u)for(const f of Object.keys(l))dce(e,l,f,t.slice(1));for(const[f,h]of Object.entries(c)){const d=f.replace(cce,"");(!o||t.includes(d))&&Ck(e,l,a,h.callable,h.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;const r=fH(),i=vH(t),s=t!==i;let a=null,o=!0,l=!0,c=!1;s&&r&&(a=r.Event(t,n),r(e).trigger(a),o=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),c=a.isDefaultPrevented());const u=f4(new Event(t,{bubbles:o,cancelable:!0}),n);return c&&u.preventDefault(),l&&e.dispatchEvent(u),u.defaultPrevented&&a&&a.preventDefault(),u}};function f4(e,t={}){for(const[n,r]of Object.entries(t))try{e[n]=r}catch{Object.defineProperty(e,n,{configurable:!0,get(){return r}})}return e}function DI(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function ZS(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Ul={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${ZS(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${ZS(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let i=r.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=DI(e.dataset[r])}return t},getDataAttribute(e,t){return DI(e.getAttribute(`data-bs-${ZS(t)}`))}};class ox{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const r=Bl(n)?Ul.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...Bl(n)?Ul.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[r,i]of Object.entries(n)){const s=t[r],a=Bl(s)?"element":rce(s);if(!new RegExp(i).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${a}" but expected type "${i}".`)}}}const pce="5.3.3";class Qa extends ox{constructor(t,n){super(),t=gu(t),t&&(this._element=t,this._config=this._getConfig(n),YS.set(this._element,this.constructor.DATA_KEY,this))}dispose(){YS.remove(this._element,this.constructor.DATA_KEY),be.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,r=!0){hH(t,n,r)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return YS.get(gu(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return pce}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const QS=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>lH(n)).join(","):null},nt={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(n=>n.matches(t))},parents(e,t){const n=[];let r=e.parentNode.closest(t);for(;r;)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!mu(n)&&Ap(n))},getSelectorFromElement(e){const t=QS(e);return t&&nt.findOne(t)?t:null},getElementFromSelector(e){const t=QS(e);return t?nt.findOne(t):null},getMultipleElementsFromSelector(e){const t=QS(e);return t?nt.find(t):[]}},fE=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,r=e.NAME;be.on(document,n,`[data-bs-dismiss="${r}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),mu(this))return;const s=nt.getElementFromSelector(this)||this.closest(`.${r}`);e.getOrCreateInstance(s)[t]()})},gce="alert",mce="bs.alert",yH=`.${mce}`,xce=`close${yH}`,vce=`closed${yH}`,yce="fade",_ce="show";class hE extends Qa{static get NAME(){return gce}close(){if(be.trigger(this._element,xce).defaultPrevented)return;this._element.classList.remove(_ce);const n=this._element.classList.contains(yce);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),be.trigger(this._element,vce),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=hE.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}fE(hE,"close");pa(hE);const bce="button",Ece="bs.button",wce=`.${Ece}`,Sce=".data-api",Ace="active",MI='[data-bs-toggle="button"]',Tce=`click${wce}${Sce}`;class dE extends Qa{static get NAME(){return bce}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Ace))}static jQueryInterface(t){return this.each(function(){const n=dE.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}be.on(document,Tce,MI,e=>{e.preventDefault();const t=e.target.closest(MI);dE.getOrCreateInstance(t).toggle()});pa(dE);const kce="swipe",Tp=".bs.swipe",Cce=`touchstart${Tp}`,Fce=`touchmove${Tp}`,Oce=`touchend${Tp}`,Nce=`pointerdown${Tp}`,Dce=`pointerup${Tp}`,Mce="touch",Rce="pen",$ce="pointer-event",Ice=40,Lce={endCallback:null,leftCallback:null,rightCallback:null},Pce={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class W_ extends ox{constructor(t,n){super(),this._element=t,!(!t||!W_.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Lce}static get DefaultType(){return Pce}static get NAME(){return kce}dispose(){be.off(this._element,Tp)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Hi(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Ice)return;const n=t/this._deltaX;this._deltaX=0,n&&Hi(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(be.on(this._element,Nce,t=>this._start(t)),be.on(this._element,Dce,t=>this._end(t)),this._element.classList.add($ce)):(be.on(this._element,Cce,t=>this._start(t)),be.on(this._element,Fce,t=>this._move(t)),be.on(this._element,Oce,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Rce||t.pointerType===Mce)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Bce="carousel",Uce="bs.carousel",Wu=`.${Uce}`,_H=".data-api",zce="ArrowLeft",Hce="ArrowRight",Vce=500,cg="next",yd="prev",Ld="left",Wy="right",Wce=`slide${Wu}`,eA=`slid${Wu}`,jce=`keydown${Wu}`,Gce=`mouseenter${Wu}`,qce=`mouseleave${Wu}`,Xce=`dragstart${Wu}`,Yce=`load${Wu}${_H}`,Kce=`click${Wu}${_H}`,bH="carousel",Ov="active",Jce="slide",Zce="carousel-item-end",Qce="carousel-item-start",eue="carousel-item-next",tue="carousel-item-prev",EH=".active",wH=".carousel-item",nue=EH+wH,rue=".carousel-item img",iue=".carousel-indicators",sue="[data-bs-slide], [data-bs-slide-to]",aue='[data-bs-ride="carousel"]',oue={[zce]:Wy,[Hce]:Ld},lue={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},cue={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class lx extends Qa{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=nt.findOne(iue,this._element),this._addEventListeners(),this._config.ride===bH&&this.cycle()}static get Default(){return lue}static get DefaultType(){return cue}static get NAME(){return Bce}next(){this._slide(cg)}nextWhenVisible(){!document.hidden&&Ap(this._element)&&this.next()}prev(){this._slide(yd)}pause(){this._isSliding&&cH(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){be.one(this._element,eA,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){be.one(this._element,eA,()=>this.to(t));return}const r=this._getItemIndex(this._getActive());if(r===t)return;const i=t>r?cg:yd;this._slide(i,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&be.on(this._element,jce,t=>this._keydown(t)),this._config.pause==="hover"&&(be.on(this._element,Gce,()=>this.pause()),be.on(this._element,qce,()=>this._maybeEnableCycle())),this._config.touch&&W_.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of nt.find(rue,this._element))be.on(r,Xce,i=>i.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Ld)),rightCallback:()=>this._slide(this._directionToOrder(Wy)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Vce+this._config.interval))}};this._swipeHelper=new W_(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=oue[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=nt.findOne(EH,this._indicatorsElement);n.classList.remove(Ov),n.removeAttribute("aria-current");const r=nt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);r&&(r.classList.add(Ov),r.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const r=this._getActive(),i=t===cg,s=n||u4(this._getItems(),r,i,this._config.wrap);if(s===r)return;const a=this._getItemIndex(s),o=d=>be.trigger(this._element,d,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(r),to:a});if(o(Wce).defaultPrevented||!r||!s)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=s;const u=i?Qce:Zce,f=i?eue:tue;s.classList.add(f),ax(s),r.classList.add(u),s.classList.add(u);const h=()=>{s.classList.remove(u,f),s.classList.add(Ov),r.classList.remove(Ov,f,u),this._isSliding=!1,o(eA)};this._queueCallback(h,r,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(Jce)}_getActive(){return nt.findOne(nue,this._element)}_getItems(){return nt.find(wH,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return sa()?t===Ld?yd:cg:t===Ld?cg:yd}_orderToDirection(t){return sa()?t===yd?Ld:Wy:t===yd?Wy:Ld}static jQueryInterface(t){return this.each(function(){const n=lx.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}be.on(document,Kce,sue,function(e){const t=nt.getElementFromSelector(this);if(!t||!t.classList.contains(bH))return;e.preventDefault();const n=lx.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");if(r){n.to(r),n._maybeEnableCycle();return}if(Ul.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});be.on(window,Yce,()=>{const e=nt.find(aue);for(const t of e)lx.getOrCreateInstance(t)});pa(lx);const uue="collapse",fue="bs.collapse",cx=`.${fue}`,hue=".data-api",due=`show${cx}`,pue=`shown${cx}`,gue=`hide${cx}`,mue=`hidden${cx}`,xue=`click${cx}${hue}`,tA="show",Vd="collapse",Nv="collapsing",vue="collapsed",yue=`:scope .${Vd} .${Vd}`,_ue="collapse-horizontal",bue="width",Eue="height",wue=".collapse.show, .collapse.collapsing",Fk='[data-bs-toggle="collapse"]',Sue={parent:null,toggle:!0},Aue={parent:"(null|element)",toggle:"boolean"};class l1 extends Qa{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const r=nt.find(Fk);for(const i of r){const s=nt.getSelectorFromElement(i),a=nt.find(s).filter(o=>o===this._element);s!==null&&a.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Sue}static get DefaultType(){return Aue}static get NAME(){return uue}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(wue).filter(o=>o!==this._element).map(o=>l1.getOrCreateInstance(o,{toggle:!1}))),t.length&&t[0]._isTransitioning||be.trigger(this._element,due).defaultPrevented)return;for(const o of t)o.hide();const r=this._getDimension();this._element.classList.remove(Vd),this._element.classList.add(Nv),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Nv),this._element.classList.add(Vd,tA),this._element.style[r]="",be.trigger(this._element,pue)},a=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[r]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||be.trigger(this._element,gue).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,ax(this._element),this._element.classList.add(Nv),this._element.classList.remove(Vd,tA);for(const i of this._triggerArray){const s=nt.getElementFromSelector(i);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Nv),this._element.classList.add(Vd),be.trigger(this._element,mue)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(t=this._element){return t.classList.contains(tA)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=gu(t.parent),t}_getDimension(){return this._element.classList.contains(_ue)?bue:Eue}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Fk);for(const n of t){const r=nt.getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(t){const n=nt.find(yue,this._config.parent);return nt.find(t,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const r of t)r.classList.toggle(vue,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const r=l1.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}be.on(document,xue,Fk,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const t of nt.getMultipleElementsFromSelector(this))l1.getOrCreateInstance(t,{toggle:!1}).toggle()});pa(l1);const RI="dropdown",Tue="bs.dropdown",qh=`.${Tue}`,h4=".data-api",kue="Escape",$I="Tab",Cue="ArrowUp",II="ArrowDown",Fue=2,Oue=`hide${qh}`,Nue=`hidden${qh}`,Due=`show${qh}`,Mue=`shown${qh}`,SH=`click${qh}${h4}`,AH=`keydown${qh}${h4}`,Rue=`keyup${qh}${h4}`,Pd="show",$ue="dropup",Iue="dropend",Lue="dropstart",Pue="dropup-center",Bue="dropdown-center",Pf='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Uue=`${Pf}.${Pd}`,jy=".dropdown-menu",zue=".navbar",Hue=".navbar-nav",Vue=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Wue=sa()?"top-end":"top-start",jue=sa()?"top-start":"top-end",Gue=sa()?"bottom-end":"bottom-start",que=sa()?"bottom-start":"bottom-end",Xue=sa()?"left-start":"right-start",Yue=sa()?"right-start":"left-start",Kue="top",Jue="bottom",Zue={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Que={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Oo extends Qa{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=nt.next(this._element,jy)[0]||nt.prev(this._element,jy)[0]||nt.findOne(jy,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Zue}static get DefaultType(){return Que}static get NAME(){return RI}toggle(){return this._isShown()?this.hide():this.show()}show(){if(mu(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!be.trigger(this._element,Due,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Hue))for(const r of[].concat(...document.body.children))be.on(r,"mouseover",V_);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Pd),this._element.classList.add(Pd),be.trigger(this._element,Mue,t)}}hide(){if(mu(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!be.trigger(this._element,Oue,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))be.off(r,"mouseover",V_);this._popper&&this._popper.destroy(),this._menu.classList.remove(Pd),this._element.classList.remove(Pd),this._element.setAttribute("aria-expanded","false"),Ul.removeDataAttribute(this._menu,"popper"),be.trigger(this._element,Nue,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Bl(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${RI.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof oH>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Bl(this._config.reference)?t=gu(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=c4(t,this._menu,n)}_isShown(){return this._menu.classList.contains(Pd)}_getPlacement(){const t=this._parent;if(t.classList.contains(Iue))return Xue;if(t.classList.contains(Lue))return Yue;if(t.classList.contains(Pue))return Kue;if(t.classList.contains(Bue))return Jue;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains($ue)?n?jue:Wue:n?que:Gue}_detectNavbar(){return this._element.closest(zue)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ul.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Hi(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const r=nt.find(Vue,this._menu).filter(i=>Ap(i));r.length&&u4(r,n,t===II,!r.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=Oo.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===Fue||t.type==="keyup"&&t.key!==$I)return;const n=nt.find(Uue);for(const r of n){const i=Oo.getInstance(r);if(!i||i._config.autoClose===!1)continue;const s=t.composedPath(),a=s.includes(i._menu);if(s.includes(i._element)||i._config.autoClose==="inside"&&!a||i._config.autoClose==="outside"&&a||i._menu.contains(t.target)&&(t.type==="keyup"&&t.key===$I||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:i._element};t.type==="click"&&(o.clickEvent=t),i._completeHide(o)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),r=t.key===kue,i=[Cue,II].includes(t.key);if(!i&&!r||n&&!r)return;t.preventDefault();const s=this.matches(Pf)?this:nt.prev(this,Pf)[0]||nt.next(this,Pf)[0]||nt.findOne(Pf,t.delegateTarget.parentNode),a=Oo.getOrCreateInstance(s);if(i){t.stopPropagation(),a.show(),a._selectMenuItem(t);return}a._isShown()&&(t.stopPropagation(),a.hide(),s.focus())}}be.on(document,AH,Pf,Oo.dataApiKeydownHandler);be.on(document,AH,jy,Oo.dataApiKeydownHandler);be.on(document,SH,Oo.clearMenus);be.on(document,Rue,Oo.clearMenus);be.on(document,SH,Pf,function(e){e.preventDefault(),Oo.getOrCreateInstance(this).toggle()});pa(Oo);const TH="backdrop",efe="fade",LI="show",PI=`mousedown.bs.${TH}`,tfe={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},nfe={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class kH extends ox{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return tfe}static get DefaultType(){return nfe}static get NAME(){return TH}show(t){if(!this._config.isVisible){Hi(t);return}this._append();const n=this._getElement();this._config.isAnimated&&ax(n),n.classList.add(LI),this._emulateAnimation(()=>{Hi(t)})}hide(t){if(!this._config.isVisible){Hi(t);return}this._getElement().classList.remove(LI),this._emulateAnimation(()=>{this.dispose(),Hi(t)})}dispose(){this._isAppended&&(be.off(this._element,PI),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(efe),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=gu(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),be.on(t,PI,()=>{Hi(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){hH(t,this._getElement(),this._config.isAnimated)}}const rfe="focustrap",ife="bs.focustrap",j_=`.${ife}`,sfe=`focusin${j_}`,afe=`keydown.tab${j_}`,ofe="Tab",lfe="forward",BI="backward",cfe={autofocus:!0,trapElement:null},ufe={autofocus:"boolean",trapElement:"element"};class CH extends ox{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return cfe}static get DefaultType(){return ufe}static get NAME(){return rfe}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),be.off(document,j_),be.on(document,sfe,t=>this._handleFocusin(t)),be.on(document,afe,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,be.off(document,j_))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const r=nt.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===BI?r[r.length-1].focus():r[0].focus()}_handleKeydown(t){t.key===ofe&&(this._lastTabNavDirection=t.shiftKey?BI:lfe)}}const UI=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zI=".sticky-top",Dv="padding-right",HI="margin-right";class Ok{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Dv,n=>n+t),this._setElementAttributes(UI,Dv,n=>n+t),this._setElementAttributes(zI,HI,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Dv),this._resetElementAttributes(UI,Dv),this._resetElementAttributes(zI,HI)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,r){const i=this.getWidth(),s=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+i)return;this._saveInitialAttribute(a,n);const o=window.getComputedStyle(a).getPropertyValue(n);a.style.setProperty(n,`${r(Number.parseFloat(o))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,n){const r=t.style.getPropertyValue(n);r&&Ul.setDataAttribute(t,n,r)}_resetElementAttributes(t,n){const r=i=>{const s=Ul.getDataAttribute(i,n);if(s===null){i.style.removeProperty(n);return}Ul.removeDataAttribute(i,n),i.style.setProperty(n,s)};this._applyManipulationCallback(t,r)}_applyManipulationCallback(t,n){if(Bl(t)){n(t);return}for(const r of nt.find(t,this._element))n(r)}}const ffe="modal",hfe="bs.modal",aa=`.${hfe}`,dfe=".data-api",pfe="Escape",gfe=`hide${aa}`,mfe=`hidePrevented${aa}`,FH=`hidden${aa}`,OH=`show${aa}`,xfe=`shown${aa}`,vfe=`resize${aa}`,yfe=`click.dismiss${aa}`,_fe=`mousedown.dismiss${aa}`,bfe=`keydown.dismiss${aa}`,Efe=`click${aa}${dfe}`,VI="modal-open",wfe="fade",WI="show",nA="modal-static",Sfe=".modal.show",Afe=".modal-dialog",Tfe=".modal-body",kfe='[data-bs-toggle="modal"]',Cfe={backdrop:!0,focus:!0,keyboard:!0},Ffe={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class I0 extends Qa{constructor(t,n){super(t,n),this._dialog=nt.findOne(Afe,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ok,this._addEventListeners()}static get Default(){return Cfe}static get DefaultType(){return Ffe}static get NAME(){return ffe}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||be.trigger(this._element,OH,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(VI),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||be.trigger(this._element,gfe).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(WI),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){be.off(window,aa),be.off(this._dialog,aa),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new kH({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new CH({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=nt.findOne(Tfe,this._dialog);n&&(n.scrollTop=0),ax(this._element),this._element.classList.add(WI);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,be.trigger(this._element,xfe,{relatedTarget:t})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){be.on(this._element,bfe,t=>{if(t.key===pfe){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),be.on(window,vfe,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),be.on(this._element,_fe,t=>{be.one(this._element,yfe,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(VI),this._resetAdjustments(),this._scrollBar.reset(),be.trigger(this._element,FH)})}_isAnimated(){return this._element.classList.contains(wfe)}_triggerBackdropTransition(){if(be.trigger(this._element,mfe).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(nA)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(nA),this._queueCallback(()=>{this._element.classList.remove(nA),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!t){const i=sa()?"paddingLeft":"paddingRight";this._element.style[i]=`${n}px`}if(!r&&t){const i=sa()?"paddingRight":"paddingLeft";this._element.style[i]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const r=I0.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](n)}})}}be.on(document,Efe,kfe,function(e){const t=nt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),be.one(t,OH,i=>{i.defaultPrevented||be.one(t,FH,()=>{Ap(this)&&this.focus()})});const n=nt.findOne(Sfe);n&&I0.getInstance(n).hide(),I0.getOrCreateInstance(t).toggle(this)});fE(I0);pa(I0);const Ofe="offcanvas",Nfe="bs.offcanvas",oc=`.${Nfe}`,NH=".data-api",Dfe=`load${oc}${NH}`,Mfe="Escape",jI="show",GI="showing",qI="hiding",Rfe="offcanvas-backdrop",DH=".offcanvas.show",$fe=`show${oc}`,Ife=`shown${oc}`,Lfe=`hide${oc}`,XI=`hidePrevented${oc}`,MH=`hidden${oc}`,Pfe=`resize${oc}`,Bfe=`click${oc}${NH}`,Ufe=`keydown.dismiss${oc}`,zfe='[data-bs-toggle="offcanvas"]',Hfe={backdrop:!0,keyboard:!0,scroll:!1},Vfe={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class xu extends Qa{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Hfe}static get DefaultType(){return Vfe}static get NAME(){return Ofe}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||be.trigger(this._element,$fe,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ok().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(GI);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(jI),this._element.classList.remove(GI),be.trigger(this._element,Ife,{relatedTarget:t})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||be.trigger(this._element,Lfe).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(qI),this._backdrop.hide();const n=()=>{this._element.classList.remove(jI,qI),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ok().reset(),be.trigger(this._element,MH)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){be.trigger(this._element,XI);return}this.hide()},n=!!this._config.backdrop;return new kH({className:Rfe,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new CH({trapElement:this._element})}_addEventListeners(){be.on(this._element,Ufe,t=>{if(t.key===Mfe){if(this._config.keyboard){this.hide();return}be.trigger(this._element,XI)}})}static jQueryInterface(t){return this.each(function(){const n=xu.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}be.on(document,Bfe,zfe,function(e){const t=nt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),mu(this))return;be.one(t,MH,()=>{Ap(this)&&this.focus()});const n=nt.findOne(DH);n&&n!==t&&xu.getInstance(n).hide(),xu.getOrCreateInstance(t).toggle(this)});be.on(window,Dfe,()=>{for(const e of nt.find(DH))xu.getOrCreateInstance(e).show()});be.on(window,Pfe,()=>{for(const e of nt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&xu.getOrCreateInstance(e).hide()});fE(xu);pa(xu);const Wfe=/^aria-[\w-]*$/i,RH={"*":["class","dir","id","lang","role",Wfe],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},jfe=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Gfe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,qfe=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?jfe.has(n)?!!Gfe.test(e.nodeValue):!0:t.filter(r=>r instanceof RegExp).some(r=>r.test(n))};function Xfe(e,t,n){if(!e.length)return e;if(n&&typeof n=="function")return n(e);const i=new window.DOMParser().parseFromString(e,"text/html"),s=[].concat(...i.body.querySelectorAll("*"));for(const a of s){const o=a.nodeName.toLowerCase();if(!Object.keys(t).includes(o)){a.remove();continue}const l=[].concat(...a.attributes),c=[].concat(t["*"]||[],t[o]||[]);for(const u of l)qfe(u,c)||a.removeAttribute(u.nodeName)}return i.body.innerHTML}const Yfe="TemplateFactory",Kfe={allowList:RH,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Jfe={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Zfe={entry:"(string|element|function|null)",selector:"(string|element)"};class Qfe extends ox{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Kfe}static get DefaultType(){return Jfe}static get NAME(){return Yfe}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,s]of Object.entries(this._config.content))this._setContent(t,s,i);const n=t.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&n.classList.add(...r.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,r]of Object.entries(t))super._typeCheckConfig({selector:n,entry:r},Zfe)}_setContent(t,n,r){const i=nt.findOne(r,t);if(i){if(n=this._resolvePossibleFunction(n),!n){i.remove();return}if(Bl(n)){this._putElementInTemplate(gu(n),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(n);return}i.textContent=n}}_maybeSanitize(t){return this._config.sanitize?Xfe(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Hi(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const ehe="tooltip",the=new Set(["sanitize","allowList","sanitizeFn"]),rA="fade",nhe="modal",Mv="show",rhe=".tooltip-inner",YI=`.${nhe}`,KI="hide.bs.modal",ug="hover",iA="focus",ihe="click",she="manual",ahe="hide",ohe="hidden",lhe="show",che="shown",uhe="inserted",fhe="click",hhe="focusin",dhe="focusout",phe="mouseenter",ghe="mouseleave",mhe={AUTO:"auto",TOP:"top",RIGHT:sa()?"left":"right",BOTTOM:"bottom",LEFT:sa()?"right":"left"},xhe={allowList:RH,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},vhe={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class kp extends Qa{constructor(t,n){if(typeof oH>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return xhe}static get DefaultType(){return vhe}static get NAME(){return ehe}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),be.off(this._element.closest(YI),KI,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=be.trigger(this._element,this.constructor.eventName(lhe)),r=(uH(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!r)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),be.trigger(this._element,this.constructor.eventName(uhe))),this._popper=this._createPopper(i),i.classList.add(Mv),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))be.on(o,"mouseover",V_);const a=()=>{be.trigger(this._element,this.constructor.eventName(che)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||be.trigger(this._element,this.constructor.eventName(ahe)).defaultPrevented)return;if(this._getTipElement().classList.remove(Mv),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))be.off(i,"mouseover",V_);this._activeTrigger[ihe]=!1,this._activeTrigger[iA]=!1,this._activeTrigger[ug]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),be.trigger(this._element,this.constructor.eventName(ohe)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(rA,Mv),n.classList.add(`bs-${this.constructor.NAME}-auto`);const r=ice(this.constructor.NAME).toString();return n.setAttribute("id",r),this._isAnimated()&&n.classList.add(rA),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Qfe({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[rhe]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(rA)}_isShown(){return this.tip&&this.tip.classList.contains(Mv)}_createPopper(t){const n=Hi(this._config.placement,[this,t,this._element]),r=mhe[n.toUpperCase()];return c4(this._element,t,this._getPopperConfig(r))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Hi(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...n,...Hi(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")be.on(this._element,this.constructor.eventName(fhe),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(n!==she){const r=n===ug?this.constructor.eventName(phe):this.constructor.eventName(hhe),i=n===ug?this.constructor.eventName(ghe):this.constructor.eventName(dhe);be.on(this._element,r,this._config.selector,s=>{const a=this._initializeOnDelegatedTarget(s);a._activeTrigger[s.type==="focusin"?iA:ug]=!0,a._enter()}),be.on(this._element,i,this._config.selector,s=>{const a=this._initializeOnDelegatedTarget(s);a._activeTrigger[s.type==="focusout"?iA:ug]=a._element.contains(s.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},be.on(this._element.closest(YI),KI,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=Ul.getDataAttributes(this._element);for(const r of Object.keys(n))the.has(r)&&delete n[r];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:gu(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,r]of Object.entries(this._config))this.constructor.Default[n]!==r&&(t[n]=r);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=kp.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}pa(kp);const yhe="popover",_he=".popover-header",bhe=".popover-body",Ehe={...kp.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},whe={...kp.DefaultType,content:"(null|string|element|function)"};class d4 extends kp{static get Default(){return Ehe}static get DefaultType(){return whe}static get NAME(){return yhe}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[_he]:this._getTitle(),[bhe]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=d4.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}pa(d4);const She="scrollspy",Ahe="bs.scrollspy",p4=`.${Ahe}`,The=".data-api",khe=`activate${p4}`,JI=`click${p4}`,Che=`load${p4}${The}`,Fhe="dropdown-item",_d="active",Ohe='[data-bs-spy="scroll"]',sA="[href]",Nhe=".nav, .list-group",ZI=".nav-link",Dhe=".nav-item",Mhe=".list-group-item",Rhe=`${ZI}, ${Dhe} > ${ZI}, ${Mhe}`,$he=".dropdown",Ihe=".dropdown-toggle",Lhe={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Phe={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class pE extends Qa{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Lhe}static get DefaultType(){return Phe}static get NAME(){return She}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=gu(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(be.off(this._config.target,JI),be.on(this._config.target,JI,sA,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const r=this._rootElement||window,i=n.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:i,behavior:"smooth"});return}r.scrollTop=i}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=a=>this._targetLinks.get(`#${a.target.id}`),r=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(n(a))},i=(this._rootElement||document.documentElement).scrollTop,s=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const a of t){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(a));continue}const o=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&o){if(r(a),!i)return;continue}!s&&!o&&r(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=nt.find(sA,this._config.target);for(const n of t){if(!n.hash||mu(n))continue;const r=nt.findOne(decodeURI(n.hash),this._element);Ap(r)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,r))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(_d),this._activateParents(t),be.trigger(this._element,khe,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Fhe)){nt.findOne(Ihe,t.closest($he)).classList.add(_d);return}for(const n of nt.parents(t,Nhe))for(const r of nt.prev(n,Rhe))r.classList.add(_d)}_clearActiveClass(t){t.classList.remove(_d);const n=nt.find(`${sA}.${_d}`,t);for(const r of n)r.classList.remove(_d)}static jQueryInterface(t){return this.each(function(){const n=pE.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}be.on(window,Che,()=>{for(const e of nt.find(Ohe))pE.getOrCreateInstance(e)});pa(pE);const Bhe="tab",Uhe="bs.tab",Xh=`.${Uhe}`,zhe=`hide${Xh}`,Hhe=`hidden${Xh}`,Vhe=`show${Xh}`,Whe=`shown${Xh}`,jhe=`click${Xh}`,Ghe=`keydown${Xh}`,qhe=`load${Xh}`,Xhe="ArrowLeft",QI="ArrowRight",Yhe="ArrowUp",e6="ArrowDown",aA="Home",t6="End",Bf="active",n6="fade",oA="show",Khe="dropdown",$H=".dropdown-toggle",Jhe=".dropdown-menu",lA=`:not(${$H})`,Zhe='.list-group, .nav, [role="tablist"]',Qhe=".nav-item, .list-group-item",ede=`.nav-link${lA}, .list-group-item${lA}, [role="tab"]${lA}`,IH='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',cA=`${ede}, ${IH}`,tde=`.${Bf}[data-bs-toggle="tab"], .${Bf}[data-bs-toggle="pill"], .${Bf}[data-bs-toggle="list"]`;class L0 extends Qa{constructor(t){super(t),this._parent=this._element.closest(Zhe),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),be.on(this._element,Ghe,n=>this._keydown(n)))}static get NAME(){return Bhe}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),r=n?be.trigger(n,zhe,{relatedTarget:t}):null;be.trigger(t,Vhe,{relatedTarget:n}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(Bf),this._activate(nt.getElementFromSelector(t));const r=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(oA);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),be.trigger(t,Whe,{relatedTarget:n})};this._queueCallback(r,t,t.classList.contains(n6))}_deactivate(t,n){if(!t)return;t.classList.remove(Bf),t.blur(),this._deactivate(nt.getElementFromSelector(t));const r=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(oA);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),be.trigger(t,Hhe,{relatedTarget:n})};this._queueCallback(r,t,t.classList.contains(n6))}_keydown(t){if(![Xhe,QI,Yhe,e6,aA,t6].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(i=>!mu(i));let r;if([aA,t6].includes(t.key))r=n[t.key===aA?0:n.length-1];else{const i=[QI,e6].includes(t.key);r=u4(n,t.target,i,!0)}r&&(r.focus({preventScroll:!0}),L0.getOrCreateInstance(r).show())}_getChildren(){return nt.find(cA,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const r of n)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),r=this._getOuterElement(t);t.setAttribute("aria-selected",n),r!==t&&this._setAttributeIfNotExists(r,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=nt.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const r=this._getOuterElement(t);if(!r.classList.contains(Khe))return;const i=(s,a)=>{const o=nt.findOne(s,r);o&&o.classList.toggle(a,n)};i($H,Bf),i(Jhe,oA),r.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,r){t.hasAttribute(n)||t.setAttribute(n,r)}_elemIsActive(t){return t.classList.contains(Bf)}_getInnerElement(t){return t.matches(cA)?t:nt.findOne(cA,t)}_getOuterElement(t){return t.closest(Qhe)||t}static jQueryInterface(t){return this.each(function(){const n=L0.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}be.on(document,jhe,IH,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!mu(this)&&L0.getOrCreateInstance(this).show()});be.on(window,qhe,()=>{for(const e of nt.find(tde))L0.getOrCreateInstance(e)});pa(L0);const nde="toast",rde="bs.toast",ju=`.${rde}`,ide=`mouseover${ju}`,sde=`mouseout${ju}`,ade=`focusin${ju}`,ode=`focusout${ju}`,lde=`hide${ju}`,cde=`hidden${ju}`,ude=`show${ju}`,fde=`shown${ju}`,hde="fade",r6="hide",Rv="show",$v="showing",dde={animation:"boolean",autohide:"boolean",delay:"number"},pde={animation:!0,autohide:!0,delay:5e3};class ux extends Qa{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return pde}static get DefaultType(){return dde}static get NAME(){return nde}show(){if(be.trigger(this._element,ude).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(hde);const n=()=>{this._element.classList.remove($v),be.trigger(this._element,fde),this._maybeScheduleHide()};this._element.classList.remove(r6),ax(this._element),this._element.classList.add(Rv,$v),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||be.trigger(this._element,lde).defaultPrevented)return;const n=()=>{this._element.classList.add(r6),this._element.classList.remove($v,Rv),be.trigger(this._element,cde)};this._element.classList.add($v),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Rv),super.dispose()}isShown(){return this._element.classList.contains(Rv)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const r=t.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){be.on(this._element,ide,t=>this._onInteraction(t,!0)),be.on(this._element,sde,t=>this._onInteraction(t,!1)),be.on(this._element,ade,t=>this._onInteraction(t,!0)),be.on(this._element,ode,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=ux.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}fE(ux);pa(ux);function zl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gde(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cp(e){let t,n,r;e.length!==2?(t=zl,n=(o,l)=>zl(e(o),l),r=(o,l)=>e(o)-l):(t=e===zl||e===gde?e:mde,n=e,r=e);function i(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(o,l,c=0,u=o.length){const f=i(o,l,c,u-1);return f>c&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:a,right:s}}function mde(){return 0}function LH(e){return e===null?NaN:+e}function*xde(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const PH=Cp(zl),vu=PH.right,vde=PH.left;Cp(LH).center;function yde(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i));else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i))}if(n>1)return s/(n-1)}function _de(e,t){const n=yde(e,t);return n&&Math.sqrt(n)}class Ti{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],a=t+s,o=Math.abs(t)<Math.abs(s)?t-(a-s):s-(a-t);o&&(n[r++]=o),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,s=i-(a-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=a+i,i==r-a&&(a=r))}return a}}class i6 extends Map{constructor(t,n=zH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Nk(this,t))}has(t){return super.has(Nk(this,t))}set(t,n){return super.set(BH(this,t),n)}delete(t){return super.delete(UH(this,t))}}class G_ extends Set{constructor(t,n=zH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Nk(this,t))}add(t){return super.add(BH(this,t))}delete(t){return super.delete(UH(this,t))}}function Nk({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function BH({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function UH({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function zH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bde(e,t){return Array.from(t,n=>e[n])}function Ede(e=zl){if(e===zl)return HH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function HH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const wde=Math.sqrt(50),Sde=Math.sqrt(10),Ade=Math.sqrt(2);function q_(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=wde?10:s>=Sde?5:s>=Ade?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?q_(e,t,n*2):[o,l,c]}function Dk(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?q_(t,e,n):q_(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function Mk(e,t,n){return t=+t,e=+e,n=+n,q_(e,t,n)[2]}function yu(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Mk(t,e,n):Mk(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Jf(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Rk(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function VH(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?HH:Ede(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/l+h)),p=Math.min(r,Math.floor(t+(l-c)*f/l+h));VH(e,t,d,p,i)}const s=e[t];let a=n,o=r;for(fg(e,n,t),i(e[r],s)>0&&fg(e,n,r);a<o;){for(fg(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}i(e[n],s)===0?fg(e,n,o):(++o,fg(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function fg(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $k(e,t,n){if(e=Float64Array.from(xde(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Rk(e);if(t>=1)return Jf(e);var r,i=(r-1)*t,s=Math.floor(i),a=Jf(VH(e,s).subarray(0,s+1)),o=Rk(e.subarray(s+1));return a+(o-a)*(i-s)}}function WH(e,t,n=LH){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e),o=+n(e[s+1],s+1,e);return a+(o-a)*(i-s)}}function Af(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function jH(e,t){return $k(e,.5,t)}function*Tde(e){for(const t of e)yield*t}function GH(e){return Array.from(Tde(e))}function ms(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function qH(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function kde(e,...t){e=new G_(e),t=t.map(Cde);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Cde(e){return e instanceof G_?e:new G_(e)}function Fde(...e){const t=new G_;for(const n of e)for(const r of n)t.add(r);return t}var Ode={value:()=>{}};function g4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gy(n)}function Gy(e){this._=e}function Nde(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gy.prototype=g4.prototype={constructor:Gy,on:function(e,t){var n=this._,r=Nde(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=Dde(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=s6(n[i],e.name,t);else if(t==null)for(i in n)n[i]=s6(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gy(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Dde(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function s6(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ode,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ik="http://www.w3.org/1999/xhtml";const a6={svg:"http://www.w3.org/2000/svg",xhtml:Ik,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gE(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),a6.hasOwnProperty(t)?{space:a6[t],local:e}:e}function Mde(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ik&&t.documentElement.namespaceURI===Ik?t.createElement(e):t.createElementNS(n,e)}}function Rde(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function XH(e){var t=gE(e);return(t.local?Rde:Mde)(t)}function $de(){}function m4(e){return e==null?$de:function(){return this.querySelector(e)}}function Ide(e){typeof e!="function"&&(e=m4(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new Ci(r,this._parents)}function YH(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Lde(){return[]}function KH(e){return e==null?Lde:function(){return this.querySelectorAll(e)}}function Pde(e){return function(){return YH(e.apply(this,arguments))}}function Bde(e){typeof e=="function"?e=Pde(e):e=KH(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new Ci(r,i)}function JH(e){return function(){return this.matches(e)}}function ZH(e){return function(t){return t.matches(e)}}var Ude=Array.prototype.find;function zde(e){return function(){return Ude.call(this.children,e)}}function Hde(){return this.firstElementChild}function Vde(e){return this.select(e==null?Hde:zde(typeof e=="function"?e:ZH(e)))}var Wde=Array.prototype.filter;function jde(){return Array.from(this.children)}function Gde(e){return function(){return Wde.call(this.children,e)}}function qde(e){return this.selectAll(e==null?jde:Gde(typeof e=="function"?e:ZH(e)))}function Xde(e){typeof e!="function"&&(e=JH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new Ci(r,this._parents)}function QH(e){return new Array(e.length)}function Yde(){return new Ci(this._enter||this._groups.map(QH),this._parents)}function X_(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}X_.prototype={constructor:X_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Kde(e){return function(){return e}}function Jde(e,t,n,r,i,s){for(var a=0,o,l=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new X_(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function Zde(e,t,n,r,i,s,a){var o,l,c=new Map,u=t.length,f=s.length,h=new Array(u),d;for(o=0;o<u;++o)(l=t[o])&&(h[o]=d=a.call(l,l.__data__,o,t)+"",c.has(d)?i[o]=l:c.set(d,l));for(o=0;o<f;++o)d=a.call(e,s[o],o,s)+"",(l=c.get(d))?(r[o]=l,l.__data__=s[o],c.delete(d)):n[o]=new X_(e,s[o]);for(o=0;o<u;++o)(l=t[o])&&c.get(h[o])===l&&(i[o]=l)}function Qde(e){return e.__data__}function e0e(e,t){if(!arguments.length)return Array.from(this,Qde);var n=t?Zde:Jde,r=this._parents,i=this._groups;typeof e!="function"&&(e=Kde(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],h=f.length,d=t0e(e.call(u,u&&u.__data__,c,r)),p=d.length,g=o[c]=new Array(p),m=a[c]=new Array(p),x=l[c]=new Array(h);n(u,f,g,m,x,d,t);for(var v=0,y=0,_,b;v<p;++v)if(_=g[v]){for(v>=y&&(y=v+1);!(b=m[y])&&++y<p;);_._next=b||null}}return a=new Ci(a,r),a._enter=o,a._exit=l,a}function t0e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function n0e(){return new Ci(this._exit||this._groups.map(QH),this._parents)}function r0e(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function i0e(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],f=c.length,h=o[l]=new Array(f),d,p=0;p<f;++p)(d=c[p]||u[p])&&(h[p]=d);for(;l<i;++l)o[l]=n[l];return new Ci(o,this._parents)}function s0e(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function a0e(e){e||(e=o0e);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new Ci(i,this._parents).order()}function o0e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function l0e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function c0e(){return Array.from(this)}function u0e(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function f0e(){let e=0;for(const t of this)++e;return e}function h0e(){return!this.node()}function d0e(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function p0e(e){return function(){this.removeAttribute(e)}}function g0e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function m0e(e,t){return function(){this.setAttribute(e,t)}}function x0e(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function v0e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function y0e(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _0e(e,t){var n=gE(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?g0e:p0e:typeof t=="function"?n.local?y0e:v0e:n.local?x0e:m0e)(n,t))}function eV(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function b0e(e){return function(){this.style.removeProperty(e)}}function E0e(e,t,n){return function(){this.style.setProperty(e,t,n)}}function w0e(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function S0e(e,t,n){return arguments.length>1?this.each((t==null?b0e:typeof t=="function"?w0e:E0e)(e,t,n??"")):P0(this.node(),e)}function P0(e,t){return e.style.getPropertyValue(t)||eV(e).getComputedStyle(e,null).getPropertyValue(t)}function A0e(e){return function(){delete this[e]}}function T0e(e,t){return function(){this[e]=t}}function k0e(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function C0e(e,t){return arguments.length>1?this.each((t==null?A0e:typeof t=="function"?k0e:T0e)(e,t)):this.node()[e]}function tV(e){return e.trim().split(/^|\s+/)}function x4(e){return e.classList||new nV(e)}function nV(e){this._node=e,this._names=tV(e.getAttribute("class")||"")}nV.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rV(e,t){for(var n=x4(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function iV(e,t){for(var n=x4(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function F0e(e){return function(){rV(this,e)}}function O0e(e){return function(){iV(this,e)}}function N0e(e,t){return function(){(t.apply(this,arguments)?rV:iV)(this,e)}}function D0e(e,t){var n=tV(e+"");if(arguments.length<2){for(var r=x4(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?N0e:t?F0e:O0e)(n,t))}function M0e(){this.textContent=""}function R0e(e){return function(){this.textContent=e}}function $0e(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function I0e(e){return arguments.length?this.each(e==null?M0e:(typeof e=="function"?$0e:R0e)(e)):this.node().textContent}function L0e(){this.innerHTML=""}function P0e(e){return function(){this.innerHTML=e}}function B0e(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function U0e(e){return arguments.length?this.each(e==null?L0e:(typeof e=="function"?B0e:P0e)(e)):this.node().innerHTML}function z0e(){this.nextSibling&&this.parentNode.appendChild(this)}function H0e(){return this.each(z0e)}function V0e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function W0e(){return this.each(V0e)}function j0e(e){var t=typeof e=="function"?e:XH(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function G0e(){return null}function q0e(e,t){var n=typeof e=="function"?e:XH(e),r=t==null?G0e:typeof t=="function"?t:m4(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function X0e(){var e=this.parentNode;e&&e.removeChild(this)}function Y0e(){return this.each(X0e)}function K0e(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function J0e(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Z0e(e){return this.select(e?J0e:K0e)}function Q0e(e){return arguments.length?this.property("__data__",e):this.node().__data__}function epe(e){return function(t){e.call(this,t,this.__data__)}}function tpe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function npe(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function rpe(e,t,n){return function(){var r=this.__on,i,s=epe(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ipe(e,t,n){var r=tpe(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?rpe:npe,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function sV(e,t,n){var r=eV(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function spe(e,t){return function(){return sV(this,e,t)}}function ape(e,t){return function(){return sV(this,e,t.apply(this,arguments))}}function ope(e,t){return this.each((typeof t=="function"?ape:spe)(e,t))}function*lpe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var v4=[null];function Ci(e,t){this._groups=e,this._parents=t}function Fp(){return new Ci([[document.documentElement]],v4)}function cpe(){return this}Ci.prototype=Fp.prototype={constructor:Ci,select:Ide,selectAll:Bde,selectChild:Vde,selectChildren:qde,filter:Xde,data:e0e,enter:Yde,exit:n0e,join:r0e,merge:i0e,selection:cpe,order:s0e,sort:a0e,call:l0e,nodes:c0e,node:u0e,size:f0e,empty:h0e,each:d0e,attr:_0e,style:S0e,property:C0e,classed:D0e,text:I0e,html:U0e,raise:H0e,lower:W0e,append:j0e,insert:q0e,remove:Y0e,clone:Z0e,datum:Q0e,on:ipe,dispatch:ope,[Symbol.iterator]:lpe};function Aa(e){return typeof e=="string"?new Ci([[document.querySelector(e)]],[document.documentElement]):new Ci([[e]],v4)}function upe(e){return typeof e=="string"?new Ci([document.querySelectorAll(e)],[document.documentElement]):new Ci([YH(e)],v4)}function Op(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function fx(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Gu(){}var xh=.7,B0=1/xh,o0="\\s*([+-]?\\d+)\\s*",c1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",No="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fpe=/^#([0-9a-f]{3,8})$/,hpe=new RegExp(`^rgb\\(${o0},${o0},${o0}\\)$`),dpe=new RegExp(`^rgb\\(${No},${No},${No}\\)$`),ppe=new RegExp(`^rgba\\(${o0},${o0},${o0},${c1}\\)$`),gpe=new RegExp(`^rgba\\(${No},${No},${No},${c1}\\)$`),mpe=new RegExp(`^hsl\\(${c1},${No},${No}\\)$`),xpe=new RegExp(`^hsla\\(${c1},${No},${No},${c1}\\)$`),o6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Op(Gu,vh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:l6,formatHex:l6,formatHex8:vpe,formatHsl:ype,formatRgb:c6,toString:c6});function l6(){return this.rgb().formatHex()}function vpe(){return this.rgb().formatHex8()}function ype(){return aV(this).formatHsl()}function c6(){return this.rgb().formatRgb()}function vh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fpe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?u6(t):n===3?new fr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Iv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Iv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hpe.exec(e))?new fr(t[1],t[2],t[3],1):(t=dpe.exec(e))?new fr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ppe.exec(e))?Iv(t[1],t[2],t[3],t[4]):(t=gpe.exec(e))?Iv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mpe.exec(e))?d6(t[1],t[2]/100,t[3]/100,1):(t=xpe.exec(e))?d6(t[1],t[2]/100,t[3]/100,t[4]):o6.hasOwnProperty(e)?u6(o6[e]):e==="transparent"?new fr(NaN,NaN,NaN,0):null}function u6(e){return new fr(e>>16&255,e>>8&255,e&255,1)}function Iv(e,t,n,r){return r<=0&&(e=t=n=NaN),new fr(e,t,n,r)}function y4(e){return e instanceof Gu||(e=vh(e)),e?(e=e.rgb(),new fr(e.r,e.g,e.b,e.opacity)):new fr}function _u(e,t,n,r){return arguments.length===1?y4(e):new fr(e,t,n,r??1)}function fr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Op(fr,_u,fx(Gu,{brighter(e){return e=e==null?B0:Math.pow(B0,e),new fr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xh:Math.pow(xh,e),new fr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fr(Zf(this.r),Zf(this.g),Zf(this.b),Y_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f6,formatHex:f6,formatHex8:_pe,formatRgb:h6,toString:h6}));function f6(){return`#${Uf(this.r)}${Uf(this.g)}${Uf(this.b)}`}function _pe(){return`#${Uf(this.r)}${Uf(this.g)}${Uf(this.b)}${Uf((isNaN(this.opacity)?1:this.opacity)*255)}`}function h6(){const e=Y_(this.opacity);return`${e===1?"rgb(":"rgba("}${Zf(this.r)}, ${Zf(this.g)}, ${Zf(this.b)}${e===1?")":`, ${e})`}`}function Y_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Uf(e){return e=Zf(e),(e<16?"0":"")+e.toString(16)}function d6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Na(e,t,n,r)}function aV(e){if(e instanceof Na)return new Na(e.h,e.s,e.l,e.opacity);if(e instanceof Gu||(e=vh(e)),!e)return new Na;if(e instanceof Na)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Na(a,o,l,e.opacity)}function K_(e,t,n,r){return arguments.length===1?aV(e):new Na(e,t,n,r??1)}function Na(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Op(Na,K_,fx(Gu,{brighter(e){return e=e==null?B0:Math.pow(B0,e),new Na(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xh:Math.pow(xh,e),new Na(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new fr(uA(e>=240?e-240:e+120,i,r),uA(e,i,r),uA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Na(p6(this.h),Lv(this.s),Lv(this.l),Y_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Y_(this.opacity);return`${e===1?"hsl(":"hsla("}${p6(this.h)}, ${Lv(this.s)*100}%, ${Lv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function p6(e){return e=(e||0)%360,e<0?e+360:e}function Lv(e){return Math.max(0,Math.min(1,e||0))}function uA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const oV=Math.PI/180,lV=180/Math.PI,J_=18,cV=.96422,uV=1,fV=.82521,hV=4/29,l0=6/29,dV=3*l0*l0,bpe=l0*l0*l0;function pV(e){if(e instanceof Do)return new Do(e.l,e.a,e.b,e.opacity);if(e instanceof Al)return gV(e);e instanceof fr||(e=y4(e));var t=pA(e.r),n=pA(e.g),r=pA(e.b),i=fA((.2225045*t+.7168786*n+.0606169*r)/uV),s,a;return t===n&&n===r?s=a=i:(s=fA((.4360747*t+.3850649*n+.1430804*r)/cV),a=fA((.0139322*t+.0971045*n+.7141733*r)/fV)),new Do(116*i-16,500*(s-i),200*(i-a),e.opacity)}function Z_(e,t,n,r){return arguments.length===1?pV(e):new Do(e,t,n,r??1)}function Do(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Op(Do,Z_,fx(Gu,{brighter(e){return new Do(this.l+J_*(e??1),this.a,this.b,this.opacity)},darker(e){return new Do(this.l-J_*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=cV*hA(t),e=uV*hA(e),n=fV*hA(n),new fr(dA(3.1338561*t-1.6168667*e-.4906146*n),dA(-.9787684*t+1.9161415*e+.033454*n),dA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function fA(e){return e>bpe?Math.pow(e,1/3):e/dV+hV}function hA(e){return e>l0?e*e*e:dV*(e-hV)}function dA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function pA(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Epe(e){if(e instanceof Al)return new Al(e.h,e.c,e.l,e.opacity);if(e instanceof Do||(e=pV(e)),e.a===0&&e.b===0)return new Al(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*lV;return new Al(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Q_(e,t,n,r){return arguments.length===1?Epe(e):new Al(e,t,n,r??1)}function Al(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function gV(e){if(isNaN(e.h))return new Do(e.l,0,0,e.opacity);var t=e.h*oV;return new Do(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Op(Al,Q_,fx(Gu,{brighter(e){return new Al(this.h,this.c,this.l+J_*(e??1),this.opacity)},darker(e){return new Al(this.h,this.c,this.l-J_*(e??1),this.opacity)},rgb(){return gV(this).rgb()}}));var mV=-.14861,_4=1.78277,b4=-.29227,mE=-.90649,u1=1.97294,g6=u1*mE,m6=u1*_4,x6=_4*b4-mE*mV;function wpe(e){if(e instanceof Qf)return new Qf(e.h,e.s,e.l,e.opacity);e instanceof fr||(e=y4(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(x6*r+g6*t-m6*n)/(x6+g6-m6),s=r-i,a=(u1*(n-i)-b4*s)/mE,o=Math.sqrt(a*a+s*s)/(u1*i*(1-i)),l=o?Math.atan2(a,s)*lV-120:NaN;return new Qf(l<0?l+360:l,o,i,e.opacity)}function Lk(e,t,n,r){return arguments.length===1?wpe(e):new Qf(e,t,n,r??1)}function Qf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Op(Qf,Lk,fx(Gu,{brighter(e){return e=e==null?B0:Math.pow(B0,e),new Qf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xh:Math.pow(xh,e),new Qf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*oV,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new fr(255*(t+n*(mV*r+_4*i)),255*(t+n*(b4*r+mE*i)),255*(t+n*(u1*r)),this.opacity)}}));function xV(e,t,n,r,i){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*r+a*i)/6}function vV(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],a=r>0?e[r-1]:2*i-s,o=r<t-1?e[r+2]:2*s-i;return xV((n-r/t)*t,a,i,s,o)}}function yV(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],a=e[(r+1)%t],o=e[(r+2)%t];return xV((n-r/t)*t,i,s,a,o)}}const xE=e=>()=>e;function _V(e,t){return function(n){return e+n*t}}function Spe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function vE(e,t){var n=t-e;return n?_V(e,n>180||n<-180?n-360*Math.round(n/360):n):xE(isNaN(e)?t:e)}function Ape(e){return(e=+e)==1?hr:function(t,n){return n-t?Spe(t,n,e):xE(isNaN(t)?n:t)}}function hr(e,t){var n=t-e;return n?_V(e,n):xE(isNaN(e)?t:e)}const f1=function e(t){var n=Ape(t);function r(i,s){var a=n((i=_u(i)).r,(s=_u(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=hr(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function bV(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=_u(t[a]),r[a]=o.r||0,i[a]=o.g||0,s[a]=o.b||0;return r=e(r),i=e(i),s=e(s),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=s(l),o+""}}}var Tpe=bV(vV),kpe=bV(yV);function E4(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function EV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cpe(e,t){return(EV(t)?E4:wV)(e,t)}function wV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Ha(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function SV(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ws(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w4(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ha(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Pk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gA=new RegExp(Pk.source,"g");function Fpe(e){return function(){return e}}function Ope(e){return function(t){return e(t)+""}}function S4(e,t){var n=Pk.lastIndex=gA.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=Pk.exec(e))&&(i=gA.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Ws(r,i)})),n=gA.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Ope(l[0].x):Fpe(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function Ha(e,t){var n=typeof t,r;return t==null||n==="boolean"?xE(t):(n==="number"?Ws:n==="string"?(r=vh(t))?(t=r,f1):S4:t instanceof vh?f1:t instanceof Date?SV:EV(t)?E4:Array.isArray(t)?wV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?w4:Ws)(e,t)}function Npe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Dpe(e,t){var n=vE(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function hx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var v6=180/Math.PI,Bk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function AV(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*v6,skewX:Math.atan(l)*v6,scaleX:a,scaleY:o}}var Pv;function Mpe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Bk:AV(t.a,t.b,t.c,t.d,t.e,t.f)}function Rpe(e){return e==null||(Pv||(Pv=document.createElementNS("http://www.w3.org/2000/svg","g")),Pv.setAttribute("transform",e),!(e=Pv.transform.baseVal.consolidate()))?Bk:(e=e.matrix,AV(e.a,e.b,e.c,e.d,e.e,e.f))}function TV(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,p){if(c!==f||u!==h){var g=d.push("translate(",null,t,null,n);p.push({i:g-4,x:Ws(c,f)},{i:g-2,x:Ws(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function a(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ws(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function o(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ws(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,d,p){if(c!==f||u!==h){var g=d.push(i(d)+"scale(",null,",",null,")");p.push({i:g-4,x:Ws(c,f)},{i:g-2,x:Ws(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),a(c.rotate,u.rotate,f,h),o(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var p=-1,g=h.length,m;++p<g;)f[(m=h[p]).i]=m.x(d);return f.join("")}}}var kV=TV(Mpe,"px, ","px)","deg)"),CV=TV(Rpe,", ",")",")"),$pe=1e-12;function y6(e){return((e=Math.exp(e))+1/e)/2}function Ipe(e){return((e=Math.exp(e))-1/e)/2}function Lpe(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ppe=function e(t,n,r){function i(s,a){var o=s[0],l=s[1],c=s[2],u=a[0],f=a[1],h=a[2],d=u-o,p=f-l,g=d*d+p*p,m,x;if(g<$pe)x=Math.log(h/c)/t,m=function(E){return[o+E*d,l+E*p,c*Math.exp(t*E*x)]};else{var v=Math.sqrt(g),y=(h*h-c*c+r*g)/(2*c*n*v),_=(h*h-c*c-r*g)/(2*h*n*v),b=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(_*_+1)-_);x=(w-b)/t,m=function(E){var A=E*x,S=y6(b),k=c/(n*v)*(S*Lpe(t*A+b)-Ipe(b));return[o+k*d,l+k*p,c*S/y6(t*A+b)]}}return m.duration=x*1e3*t/Math.SQRT2,m}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,l=o*o;return e(a,o,l)},i}(Math.SQRT2,2,4);function FV(e){return function(t,n){var r=e((t=K_(t)).h,(n=K_(n)).h),i=hr(t.s,n.s),s=hr(t.l,n.l),a=hr(t.opacity,n.opacity);return function(o){return t.h=r(o),t.s=i(o),t.l=s(o),t.opacity=a(o),t+""}}}const Bpe=FV(vE);var Upe=FV(hr);function zpe(e,t){var n=hr((e=Z_(e)).l,(t=Z_(t)).l),r=hr(e.a,t.a),i=hr(e.b,t.b),s=hr(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=s(a),e+""}}function OV(e){return function(t,n){var r=e((t=Q_(t)).h,(n=Q_(n)).h),i=hr(t.c,n.c),s=hr(t.l,n.l),a=hr(t.opacity,n.opacity);return function(o){return t.h=r(o),t.c=i(o),t.l=s(o),t.opacity=a(o),t+""}}}const Hpe=OV(vE);var Vpe=OV(hr);function NV(e){return function t(n){n=+n;function r(i,s){var a=e((i=Lk(i)).h,(s=Lk(s)).h),o=hr(i.s,s.s),l=hr(i.l,s.l),c=hr(i.opacity,s.opacity);return function(u){return i.h=a(u),i.s=o(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}const Wpe=NV(vE);var jpe=NV(hr);function A4(e,t){t===void 0&&(t=e,e=Ha);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function Gpe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const qpe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Ha,interpolateArray:Cpe,interpolateBasis:vV,interpolateBasisClosed:yV,interpolateCubehelix:Wpe,interpolateCubehelixLong:jpe,interpolateDate:SV,interpolateDiscrete:Npe,interpolateHcl:Hpe,interpolateHclLong:Vpe,interpolateHsl:Bpe,interpolateHslLong:Upe,interpolateHue:Dpe,interpolateLab:zpe,interpolateNumber:Ws,interpolateNumberArray:E4,interpolateObject:w4,interpolateRgb:f1,interpolateRgbBasis:Tpe,interpolateRgbBasisClosed:kpe,interpolateRound:hx,interpolateString:S4,interpolateTransformCss:kV,interpolateTransformSvg:CV,interpolateZoom:Ppe,piecewise:A4,quantize:Gpe},Symbol.toStringTag,{value:"Module"}));var U0=0,Bg=0,hg=0,DV=1e3,e2,Ug,t2=0,yh=0,yE=0,h1=typeof performance=="object"&&performance.now?performance:Date,MV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _E(){return yh||(MV(Xpe),yh=h1.now()+yE)}function Xpe(){yh=0}function d1(){this._call=this._time=this._next=null}d1.prototype=T4.prototype={constructor:d1,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?_E():+n)+(t==null?0:+t),!this._next&&Ug!==this&&(Ug?Ug._next=this:e2=this,Ug=this),this._call=e,this._time=n,Uk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uk())}};function T4(e,t,n){var r=new d1;return r.restart(e,t,n),r}function Ype(){_E(),++U0;for(var e=e2,t;e;)(t=yh-e._time)>=0&&e._call.call(void 0,t),e=e._next;--U0}function _6(){yh=(t2=h1.now())+yE,U0=Bg=0;try{Ype()}finally{U0=0,Jpe(),yh=0}}function Kpe(){var e=h1.now(),t=e-t2;t>DV&&(yE-=t,t2=e)}function Jpe(){for(var e,t=e2,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:e2=n);Ug=e,Uk(r)}function Uk(e){if(!U0){Bg&&(Bg=clearTimeout(Bg));var t=e-yh;t>24?(e<1/0&&(Bg=setTimeout(_6,e-h1.now()-yE)),hg&&(hg=clearInterval(hg))):(hg||(t2=h1.now(),hg=setInterval(Kpe,DV)),U0=1,MV(_6))}}function b6(e,t,n){var r=new d1;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Zpe(e,t,n){var r=new d1,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,a,o){a=+a,o=o==null?_E():+o,r._restart(function l(c){c+=i,r._restart(l,i+=a,o),s(c)},a,o)},r.restart(e,t,n),r)}var Qpe=g4("start","end","cancel","interrupt"),ege=[],RV=0,E6=1,zk=2,qy=3,w6=4,Hk=5,Xy=6;function bE(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;tge(e,n,{name:t,index:r,group:i,on:Qpe,tween:ege,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:RV})}function k4(e,t){var n=eo(e,t);if(n.state>RV)throw new Error("too late; already scheduled");return n}function qo(e,t){var n=eo(e,t);if(n.state>qy)throw new Error("too late; already running");return n}function eo(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function tge(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=T4(s,0,n.time);function s(c){n.state=E6,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,f,h,d;if(n.state!==E6)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===qy)return b6(a);d.state===w6?(d.state=Xy,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[u]):+u<t&&(d.state=Xy,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[u])}if(b6(function(){n.state===qy&&(n.state=w6,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=zk,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zk){for(n.state=qy,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Hk,1),f=-1,h=i.length;++f<h;)i[f].call(e,u);n.state===Hk&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Xy,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function nge(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>zk&&r.state<Hk,r.state=Xy,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function rge(e){return this.each(function(){nge(this,e)})}function ige(e,t){var n,r;return function(){var i=qo(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function sge(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=qo(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function age(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=eo(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?ige:sge)(n,e,t))}function C4(e,t,n){var r=e._id;return e.each(function(){var i=qo(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return eo(i,r).value[t]}}function $V(e,t){var n;return(typeof t=="number"?Ws:t instanceof vh?f1:(n=vh(t))?(t=n,f1):S4)(e,t)}function oge(e){return function(){this.removeAttribute(e)}}function lge(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cge(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function uge(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function fge(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function hge(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function dge(e,t){var n=gE(e),r=n==="transform"?CV:$V;return this.attrTween(e,typeof t=="function"?(n.local?hge:fge)(n,r,C4(this,"attr."+e,t)):t==null?(n.local?lge:oge)(n):(n.local?uge:cge)(n,r,t))}function pge(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function gge(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function mge(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&gge(e,s)),n}return i._value=t,i}function xge(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&pge(e,s)),n}return i._value=t,i}function vge(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=gE(e);return this.tween(n,(r.local?mge:xge)(r,t))}function yge(e,t){return function(){k4(this,e).delay=+t.apply(this,arguments)}}function _ge(e,t){return t=+t,function(){k4(this,e).delay=t}}function bge(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yge:_ge)(t,e)):eo(this.node(),t).delay}function Ege(e,t){return function(){qo(this,e).duration=+t.apply(this,arguments)}}function wge(e,t){return t=+t,function(){qo(this,e).duration=t}}function Sge(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ege:wge)(t,e)):eo(this.node(),t).duration}function Age(e,t){if(typeof t!="function")throw new Error;return function(){qo(this,e).ease=t}}function Tge(e){var t=this._id;return arguments.length?this.each(Age(t,e)):eo(this.node(),t).ease}function kge(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;qo(this,e).ease=n}}function Cge(e){if(typeof e!="function")throw new Error;return this.each(kge(this._id,e))}function Fge(e){typeof e!="function"&&(e=JH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new Ql(r,this._parents,this._name,this._id)}function Oge(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],c=n[o],u=l.length,f=a[o]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;o<r;++o)a[o]=t[o];return new Ql(a,this._parents,this._name,this._id)}function Nge(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Dge(e,t,n){var r,i,s=Nge(t)?k4:qo;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function Mge(e,t){var n=this._id;return arguments.length<2?eo(this.node(),n).on.on(e):this.each(Dge(n,e,t))}function Rge(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $ge(){return this.on("end.remove",Rge(this._id))}function Ige(e){var t=this._name,n=this._id;typeof e!="function"&&(e=m4(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,f,h=0;h<l;++h)(u=o[h])&&(f=e.call(u,u.__data__,h,o))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,bE(c[h],t,n,h,c,eo(u,n)));return new Ql(s,this._parents,t,n)}function Lge(e){var t=this._name,n=this._id;typeof e!="function"&&(e=KH(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),d,p=eo(u,n),g=0,m=h.length;g<m;++g)(d=h[g])&&bE(d,t,n,g,h,p);s.push(h),a.push(u)}return new Ql(s,a,t,n)}var Pge=Fp.prototype.constructor;function Bge(){return new Pge(this._groups,this._parents)}function Uge(e,t){var n,r,i;return function(){var s=P0(this,e),a=(this.style.removeProperty(e),P0(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function IV(e){return function(){this.style.removeProperty(e)}}function zge(e,t,n){var r,i=n+"",s;return function(){var a=P0(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function Hge(e,t,n){var r,i,s;return function(){var a=P0(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),P0(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o))}}function Vge(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var l=qo(this,e),c=l.on,u=l.value[s]==null?o||(o=IV(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function Wge(e,t,n){var r=(e+="")=="transform"?kV:$V;return t==null?this.styleTween(e,Uge(e,r)).on("end.style."+e,IV(e)):typeof t=="function"?this.styleTween(e,Hge(e,r,C4(this,"style."+e,t))).each(Vge(this._id,e)):this.styleTween(e,zge(e,r,t),n).on("end.style."+e,null)}function jge(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Gge(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&jge(e,a,n)),r}return s._value=t,s}function qge(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Gge(e,t,n??""))}function Xge(e){return function(){this.textContent=e}}function Yge(e){return function(){var t=e(this);this.textContent=t??""}}function Kge(e){return this.tween("text",typeof e=="function"?Yge(C4(this,"text",e)):Xge(e==null?"":e+""))}function Jge(e){return function(t){this.textContent=e.call(this,t)}}function Zge(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Jge(i)),t}return r._value=e,r}function Qge(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Zge(e))}function eme(){for(var e=this._name,t=this._id,n=PV(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=eo(l,t);bE(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ql(r,this._parents,e,n)}function tme(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=qo(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),i===0&&s()})}var nme=0;function Ql(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function LV(e){return Fp().transition(e)}function PV(){return++nme}var cl=Fp.prototype;Ql.prototype=LV.prototype={constructor:Ql,select:Ige,selectAll:Lge,selectChild:cl.selectChild,selectChildren:cl.selectChildren,filter:Fge,merge:Oge,selection:Bge,transition:eme,call:cl.call,nodes:cl.nodes,node:cl.node,size:cl.size,empty:cl.empty,each:cl.each,on:Mge,attr:dge,attrTween:vge,style:Wge,styleTween:qge,text:Kge,textTween:Qge,remove:$ge,tween:age,delay:bge,duration:Sge,ease:Tge,easeVarying:Cge,end:tme,[Symbol.iterator]:cl[Symbol.iterator]};function Yy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var rme={time:null,delay:0,duration:250,ease:Yy};function ime(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function sme(e){var t,n;e instanceof Ql?(t=e._id,e=e._name):(t=PV(),(n=rme).time=_E(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&bE(l,e,t,c,a,n||ime(l,t));return new Ql(r,this._parents,e,t)}Fp.prototype.interrupt=rge;Fp.prototype.transition=sme;const Vk=Math.PI,Wk=2*Vk,Tf=1e-6,ame=Wk-Tf;function BV(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ome(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BV;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let F4=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BV:ome(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-t,c=i-n,u=a-t,f=o-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Tf)if(!(Math.abs(f*l-c*u)>Tf)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-a,p=i-o,g=l*l+c*c,m=d*d+p*p,x=Math.sqrt(g),v=Math.sqrt(h),y=s*Math.tan((Vk-Math.acos((g+h-m)/(2*x*v)))/2),_=y/v,b=y/x;Math.abs(_-1)>Tf&&this._append`L${t+_*u},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*d>u*p)},${this._x1=t+b*l},${this._y1=n+b*c}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=t+o,u=n+l,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Tf||Math.abs(this._y1-u)>Tf)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%Wk+Wk),h>ame?this._append`A${r},${r},0,1,${f},${t-o},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>Tf&&this._append`A${r},${r},0,${+(h>=Vk)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function EE(){return new F4}EE.prototype=F4.prototype;const Hl=11102230246251565e-32,Lr=134217729,lme=(3+8*Hl)*Hl;function mA(e,t,n,r,i){let s,a,o,l,c=t[0],u=r[0],f=0,h=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=r[++h]);let d=0;if(f<e&&h<n)for(u>c==u>-c?(a=c+s,o=s-(a-c),c=t[++f]):(a=u+s,o=s-(a-u),u=r[++h]),s=a,o!==0&&(i[d++]=o);f<e&&h<n;)u>c==u>-c?(a=s+c,l=a-s,o=s-(a-l)+(c-l),c=t[++f]):(a=s+u,l=a-s,o=s-(a-l)+(u-l),u=r[++h]),s=a,o!==0&&(i[d++]=o);for(;f<e;)a=s+c,l=a-s,o=s-(a-l)+(c-l),c=t[++f],s=a,o!==0&&(i[d++]=o);for(;h<n;)a=s+u,l=a-s,o=s-(a-l)+(u-l),u=r[++h],s=a,o!==0&&(i[d++]=o);return(s!==0||d===0)&&(i[d++]=s),d}function cme(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function dx(e){return new Float64Array(e)}const ume=(3+16*Hl)*Hl,fme=(2+12*Hl)*Hl,hme=(9+64*Hl)*Hl*Hl,bd=dx(4),S6=dx(8),A6=dx(12),T6=dx(16),ui=dx(4);function dme(e,t,n,r,i,s,a){let o,l,c,u,f,h,d,p,g,m,x,v,y,_,b,w,E,A;const S=e-i,k=n-i,T=t-s,O=r-s;_=S*O,h=Lr*S,d=h-(h-S),p=S-d,h=Lr*O,g=h-(h-O),m=O-g,b=p*m-(_-d*g-p*g-d*m),w=T*k,h=Lr*T,d=h-(h-T),p=T-d,h=Lr*k,g=h-(h-k),m=k-g,E=p*m-(w-d*g-p*g-d*m),x=b-E,f=b-x,bd[0]=b-(x+f)+(f-E),v=_+x,f=v-_,y=_-(v-f)+(x-f),x=y-w,f=y-x,bd[1]=y-(x+f)+(f-w),A=v+x,f=A-v,bd[2]=v-(A-f)+(x-f),bd[3]=A;let C=cme(4,bd),D=fme*a;if(C>=D||-C>=D||(f=e-S,o=e-(S+f)+(f-i),f=n-k,c=n-(k+f)+(f-i),f=t-T,l=t-(T+f)+(f-s),f=r-O,u=r-(O+f)+(f-s),o===0&&l===0&&c===0&&u===0)||(D=hme*a+lme*Math.abs(C),C+=S*u+O*o-(T*c+k*l),C>=D||-C>=D))return C;_=o*O,h=Lr*o,d=h-(h-o),p=o-d,h=Lr*O,g=h-(h-O),m=O-g,b=p*m-(_-d*g-p*g-d*m),w=l*k,h=Lr*l,d=h-(h-l),p=l-d,h=Lr*k,g=h-(h-k),m=k-g,E=p*m-(w-d*g-p*g-d*m),x=b-E,f=b-x,ui[0]=b-(x+f)+(f-E),v=_+x,f=v-_,y=_-(v-f)+(x-f),x=y-w,f=y-x,ui[1]=y-(x+f)+(f-w),A=v+x,f=A-v,ui[2]=v-(A-f)+(x-f),ui[3]=A;const N=mA(4,bd,4,ui,S6);_=S*u,h=Lr*S,d=h-(h-S),p=S-d,h=Lr*u,g=h-(h-u),m=u-g,b=p*m-(_-d*g-p*g-d*m),w=T*c,h=Lr*T,d=h-(h-T),p=T-d,h=Lr*c,g=h-(h-c),m=c-g,E=p*m-(w-d*g-p*g-d*m),x=b-E,f=b-x,ui[0]=b-(x+f)+(f-E),v=_+x,f=v-_,y=_-(v-f)+(x-f),x=y-w,f=y-x,ui[1]=y-(x+f)+(f-w),A=v+x,f=A-v,ui[2]=v-(A-f)+(x-f),ui[3]=A;const R=mA(N,S6,4,ui,A6);_=o*u,h=Lr*o,d=h-(h-o),p=o-d,h=Lr*u,g=h-(h-u),m=u-g,b=p*m-(_-d*g-p*g-d*m),w=l*c,h=Lr*l,d=h-(h-l),p=l-d,h=Lr*c,g=h-(h-c),m=c-g,E=p*m-(w-d*g-p*g-d*m),x=b-E,f=b-x,ui[0]=b-(x+f)+(f-E),v=_+x,f=v-_,y=_-(v-f)+(x-f),x=y-w,f=y-x,ui[1]=y-(x+f)+(f-w),A=v+x,f=A-v,ui[2]=v-(A-f)+(x-f),ui[3]=A;const L=mA(R,A6,4,ui,T6);return T6[L-1]}function Bv(e,t,n,r,i,s){const a=(t-s)*(n-i),o=(e-i)*(r-s),l=a-o,c=Math.abs(a+o);return Math.abs(l)>=ume*c?l:-dme(e,t,n,r,i,s,c)}const k6=Math.pow(2,-52),Uv=new Uint32Array(512);class n2{static from(t,n=vme,r=yme){const i=t.length,s=new Float64Array(i*2);for(let a=0;a<i;a++){const o=t[a];s[2*a]=n(o),s[2*a+1]=r(o)}return new n2(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,a=t.length>>1;let o=1/0,l=1/0,c=-1/0,u=-1/0;for(let S=0;S<a;S++){const k=t[2*S],T=t[2*S+1];k<o&&(o=k),T<l&&(l=T),k>c&&(c=k),T>u&&(u=T),this._ids[S]=S}const f=(o+c)/2,h=(l+u)/2;let d,p,g;for(let S=0,k=1/0;S<a;S++){const T=xA(f,h,t[2*S],t[2*S+1]);T<k&&(d=S,k=T)}const m=t[2*d],x=t[2*d+1];for(let S=0,k=1/0;S<a;S++){if(S===d)continue;const T=xA(m,x,t[2*S],t[2*S+1]);T<k&&T>0&&(p=S,k=T)}let v=t[2*p],y=t[2*p+1],_=1/0;for(let S=0;S<a;S++){if(S===d||S===p)continue;const k=mme(m,x,v,y,t[2*S],t[2*S+1]);k<_&&(g=S,_=k)}let b=t[2*g],w=t[2*g+1];if(_===1/0){for(let T=0;T<a;T++)this._dists[T]=t[2*T]-t[0]||t[2*T+1]-t[1];Wd(this._ids,this._dists,0,a-1);const S=new Uint32Array(a);let k=0;for(let T=0,O=-1/0;T<a;T++){const C=this._ids[T],D=this._dists[C];D>O&&(S[k++]=C,O=D)}this.hull=S.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Bv(m,x,v,y,b,w)<0){const S=p,k=v,T=y;p=g,v=b,y=w,g=S,b=k,w=T}const E=xme(m,x,v,y,b,w);this._cx=E.x,this._cy=E.y;for(let S=0;S<a;S++)this._dists[S]=xA(t[2*S],t[2*S+1],E.x,E.y);Wd(this._ids,this._dists,0,a-1),this._hullStart=d;let A=3;r[d]=n[g]=p,r[p]=n[d]=g,r[g]=n[p]=d,i[d]=0,i[p]=1,i[g]=2,s.fill(-1),s[this._hashKey(m,x)]=d,s[this._hashKey(v,y)]=p,s[this._hashKey(b,w)]=g,this.trianglesLen=0,this._addTriangle(d,p,g,-1,-1,-1);for(let S=0,k,T;S<this._ids.length;S++){const O=this._ids[S],C=t[2*O],D=t[2*O+1];if(S>0&&Math.abs(C-k)<=k6&&Math.abs(D-T)<=k6||(k=C,T=D,O===d||O===p||O===g))continue;let N=0;for(let X=0,oe=this._hashKey(C,D);X<this._hashSize&&(N=s[(oe+X)%this._hashSize],!(N!==-1&&N!==r[N]));X++);N=n[N];let R=N,L;for(;L=r[R],Bv(C,D,t[2*R],t[2*R+1],t[2*L],t[2*L+1])>=0;)if(R=L,R===N){R=-1;break}if(R===-1)continue;let I=this._addTriangle(R,O,r[R],-1,-1,i[R]);i[O]=this._legalize(I+2),i[R]=I,A++;let Y=r[R];for(;L=r[Y],Bv(C,D,t[2*Y],t[2*Y+1],t[2*L],t[2*L+1])<0;)I=this._addTriangle(Y,O,L,i[O],-1,i[Y]),i[O]=this._legalize(I+2),r[Y]=Y,A--,Y=L;if(R===N)for(;L=n[R],Bv(C,D,t[2*L],t[2*L+1],t[2*R],t[2*R+1])<0;)I=this._addTriangle(L,O,R,-1,i[R],i[L]),this._legalize(I+2),i[L]=I,r[R]=R,A--,R=L;this._hullStart=n[O]=R,r[R]=n[Y]=O,r[O]=Y,s[this._hashKey(C,D)]=O,s[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array(A);for(let S=0,k=this._hullStart;S<A;S++)this.hull[S]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(pme(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,a=0;for(;;){const o=r[t],l=t-t%3;if(a=l+(t+2)%3,o===-1){if(s===0)break;t=Uv[--s];continue}const c=o-o%3,u=l+(t+1)%3,f=c+(o+2)%3,h=n[a],d=n[t],p=n[u],g=n[f];if(gme(i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[o]=h;const x=r[f];if(x===-1){let y=this._hullStart;do{if(this._hullTri[y]===f){this._hullTri[y]=t;break}y=this._hullPrev[y]}while(y!==this._hullStart)}this._link(t,x),this._link(o,r[a]),this._link(a,f);const v=c+(o+1)%3;s<Uv.length&&(Uv[s++]=v)}else{if(s===0)break;t=Uv[--s]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,a){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,s),this._link(o+2,a),this.trianglesLen+=3,o}}function pme(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function xA(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function gme(e,t,n,r,i,s,a,o){const l=e-a,c=t-o,u=n-a,f=r-o,h=i-a,d=s-o,p=l*l+c*c,g=u*u+f*f,m=h*h+d*d;return l*(f*m-g*d)-c*(u*m-g*h)+p*(u*d-f*h)<0}function mme(e,t,n,r,i,s){const a=n-e,o=r-t,l=i-e,c=s-t,u=a*a+o*o,f=l*l+c*c,h=.5/(a*c-o*l),d=(c*u-o*f)*h,p=(a*f-l*u)*h;return d*d+p*p}function xme(e,t,n,r,i,s){const a=n-e,o=r-t,l=i-e,c=s-t,u=a*a+o*o,f=l*l+c*c,h=.5/(a*c-o*l),d=e+(c*u-o*f)*h,p=t+(a*f-l*u)*h;return{x:d,y:p}}function Wd(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],a=t[s];let o=i-1;for(;o>=n&&t[e[o]]>a;)e[o+1]=e[o--];e[o+1]=s}else{const i=n+r>>1;let s=n+1,a=r;dg(e,i,s),t[e[n]]>t[e[r]]&&dg(e,n,r),t[e[s]]>t[e[r]]&&dg(e,s,r),t[e[n]]>t[e[s]]&&dg(e,n,s);const o=e[s],l=t[o];for(;;){do s++;while(t[e[s]]<l);do a--;while(t[e[a]]>l);if(a<s)break;dg(e,s,a)}e[n+1]=e[a],e[a]=o,r-s+1>=a-n?(Wd(e,t,s,r),Wd(e,t,n,a-1)):(Wd(e,t,n,a-1),Wd(e,t,s,r))}}function dg(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function vme(e){return e[0]}function yme(e){return e[1]}const C6=1e-6;class zf{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>C6||Math.abs(this._y1-s)>C6)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class jk{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let _me=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,a;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,x=r.length,v,y;g<x;g+=3,m+=2){const _=r[g]*2,b=r[g+1]*2,w=r[g+2]*2,E=t[_],A=t[_+1],S=t[b],k=t[b+1],T=t[w],O=t[w+1],C=S-E,D=k-A,N=T-E,R=O-A,L=(C*R-D*N)*2;if(Math.abs(L)<1e-9){if(s===void 0){s=a=0;for(const Y of n)s+=t[Y*2],a+=t[Y*2+1];s/=n.length,a/=n.length}const I=1e9*Math.sign((s-E)*R-(a-A)*N);v=(E+T)/2-I*R,y=(A+O)/2+I*N}else{const I=1/L,Y=C*C+D*D,X=N*N+R*R;v=E+(R*Y-D*X)*I,y=A+(C*X-N*Y)*I}o[m]=v,o[m+1]=y}let l=n[n.length-1],c,u=l*4,f,h=t[2*l],d,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],c=u,f=h,d=p,u=l*4,h=t[2*l],p=t[2*l+1],i[c+2]=i[u]=d-p,i[c+3]=i[u+1]=h-f}render(t){const n=t==null?t=new zf:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:a,vectors:o}=this;if(s.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const h=r[u];if(h<u)continue;const d=Math.floor(u/3)*2,p=Math.floor(h/3)*2,g=a[d],m=a[d+1],x=a[p],v=a[p+1];this._renderSegment(g,m,x,v,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(i[c]/3)*2,h=a[f],d=a[f+1],p=l*4,g=this._project(h,d,o[p+2],o[p+3]);g&&this._renderSegment(h,d,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new zf:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new zf:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new jk;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let a;const o=this._regioncode(t,n),l=this._regioncode(r,i);o===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,o,l))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,a=n.length;s<a;s+=2)for(let o=0,l=i.length;o<l;o+=2)if(n[s]===i[o]&&n[s+1]===i[o+1]&&n[(s+2)%a]===i[(o+l-2)%l]&&n[(s+3)%a]===i[(o+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,a=r[t];if(a===-1)return null;const o=[];let l=a;do{const c=Math.floor(l/3);if(o.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==a&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,a,o=n[r-2],l=n[r-1],c,u=this._regioncode(o,l),f,h=0;for(let d=0;d<r;d+=2)if(s=o,a=l,o=n[d],l=n[d+1],c=u,u=this._regioncode(o,l),c===0&&u===0)f=h,h=0,i?i.push(o,l):i=[o,l];else{let p,g,m,x,v;if(c===0){if((p=this._clipSegment(s,a,o,l,c,u))===null)continue;[g,m,x,v]=p}else{if((p=this._clipSegment(o,l,s,a,u,c))===null)continue;[x,v,g,m]=p,f=h,h=this._edgecode(g,m),f&&h&&this._edge(t,f,h,i,i.length),i?i.push(g,m):i=[g,m]}f=h,h=this._edgecode(x,v),f&&h&&this._edge(t,f,h,i,i.length),i?i.push(x,v):i=[x,v]}if(i)f=h,h=this._edgecode(i[0],i[1]),f&&h&&this._edge(t,f,h,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,a){const o=s<a;for(o&&([t,n,r,i,s,a]=[r,i,t,n,a,s]);;){if(s===0&&a===0)return o?[r,i,t,n]:[t,n,r,i];if(s&a)return null;let l,c,u=s||a;u&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):u&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):u&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(r=l,i=c,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,a){let o=Array.from(n),l;if((l=this._project(o[0],o[1],r,i))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],s,a))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let c=0,u=o.length,f,h=this._edgecode(o[u-2],o[u-1]);c<u;c+=2)f=h,h=this._edgecode(o[c],o[c+1]),f&&h&&(c=this._edge(t,f,h,o,c),u=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,r,i,s){for(;n!==r;){let a,o;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,o=this.ymin;break}(i[s]!==a||i[s+1]!==o)&&this.contains(t,a,o)&&(i.splice(s,0,a,o),s+=2)}return s}_project(t,n,r,i){let s=1/0,a,o,l;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<s&&(l=this.ymin,o=t+(s=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<s&&(l=this.ymax,o=t+(s=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<s&&(o=this.xmax,l=n+(s=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<s&&(o=this.xmin,l=n+(s=a)*i)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const bme=2*Math.PI,Ed=Math.pow;function Eme(e){return e[0]}function wme(e){return e[1]}function Sme(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function Ame(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class O4{static from(t,n=Eme,r=wme,i){return new O4("length"in t?Tme(t,n,r,i):Float64Array.from(kme(t,n,r,i)))}constructor(t){this._delaunator=new n2(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Sme(t)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,d=n.length/2;h<d;++h){const p=Ame(n[2*h],n[2*h+1],f);n[2*h]=p[0],n[2*h+1]=p[1]}this._delaunator=new n2(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(r[l]===-1||a[u]===-1)&&(a[u]=l)}for(let l=0,c=i.length;l<c;++l)o[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new _me(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:a,collinear:o}=this;if(o){const f=o.indexOf(t);f>0&&(yield o[f-1]),f<o.length-1&&(yield o[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=a[c],c=c%3===2?c-2:c+1,a[c]!==t)return;if(c=s[c],c===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:a,halfedges:o,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=Ed(n-c[t*2],2)+Ed(r-c[t*2+1],2);const h=i[t];let d=h;do{let p=l[d];const g=Ed(n-c[p*2],2)+Ed(r-c[p*2+1],2);if(g<f&&(f=g,u=p),d=d%3===2?d-2:d+1,l[d]!==t)break;if(d=o[d],d===-1){if(d=s[(a[t]+1)%s.length],d!==p&&Ed(n-c[d*2],2)+Ed(r-c[d*2+1],2)<f)return d;break}}while(d!==h);return u}render(t){const n=t==null?t=new zf:void 0,{points:r,halfedges:i,triangles:s}=this;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l<a)continue;const c=s[a]*2,u=s[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new zf:void 0,{points:i}=this;for(let s=0,a=i.length;s<a;s+=2){const o=i[s],l=i[s+1];t.moveTo(o+n,l),t.arc(o,l,n,0,bme)}return r&&r.value()}renderHull(t){const n=t==null?t=new zf:void 0,{hull:r,points:i}=this,s=r[0]*2,a=r.length;t.moveTo(i[s],i[s+1]);for(let o=1;o<a;++o){const l=2*r[o];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new jk;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new zf:void 0,{points:i,triangles:s}=this,a=s[t*=3]*2,o=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[o],i[o+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new jk;return this.renderTriangle(t,n),n.value()}}function Tme(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let a=0;a<i;++a){const o=e[a];s[a*2]=t.call(r,o,a,e),s[a*2+1]=n.call(r,o,a,e)}return s}function*kme(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var F6={},vA={},yA=34,pg=10,_A=13;function UV(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Cme(e,t){var n=UV(e);return function(r,i){return t(n(r),i,e)}}function O6(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function $i(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Fme(e){return e<0?"-"+$i(-e,6):e>9999?"+"+$i(e,6):$i(e,4)}function Ome(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Fme(e.getUTCFullYear())+"-"+$i(e.getUTCMonth()+1,2)+"-"+$i(e.getUTCDate(),2)+(i?"T"+$i(t,2)+":"+$i(n,2)+":"+$i(r,2)+"."+$i(i,3)+"Z":r?"T"+$i(t,2)+":"+$i(n,2)+":"+$i(r,2)+"Z":n||t?"T"+$i(t,2)+":"+$i(n,2)+"Z":"")}function zV(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,p,g=i(f,function(m,x){if(d)return d(m,x-1);p=m,d=h?Cme(m,h):UV(m)});return g.columns=p||[],g}function i(f,h){var d=[],p=f.length,g=0,m=0,x,v=p<=0,y=!1;f.charCodeAt(p-1)===pg&&--p,f.charCodeAt(p-1)===_A&&--p;function _(){if(v)return vA;if(y)return y=!1,F6;var w,E=g,A;if(f.charCodeAt(E)===yA){for(;g++<p&&f.charCodeAt(g)!==yA||f.charCodeAt(++g)===yA;);return(w=g)>=p?v=!0:(A=f.charCodeAt(g++))===pg?y=!0:A===_A&&(y=!0,f.charCodeAt(g)===pg&&++g),f.slice(E+1,w-1).replace(/""/g,'"')}for(;g<p;){if((A=f.charCodeAt(w=g++))===pg)y=!0;else if(A===_A)y=!0,f.charCodeAt(g)===pg&&++g;else if(A!==n)continue;return f.slice(E,w)}return v=!0,f.slice(E,p)}for(;(x=_())!==vA;){for(var b=[];x!==F6&&x!==vA;)b.push(x),x=_();h&&(b=h(b,m++))==null||d.push(b)}return d}function s(f,h){return f.map(function(d){return h.map(function(p){return u(d[p])}).join(e)})}function a(f,h){return h==null&&(h=O6(f)),[h.map(u).join(e)].concat(s(f,h)).join(`
`)}function o(f,h){return h==null&&(h=O6(f)),s(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?Ome(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:o,formatRows:l,formatRow:c,formatValue:u}}var Nme=zV(","),HV=Nme.parse;function Dme(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Mme(e,t){return fetch(e,t).then(Dme)}function Rme(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Mme(t,n).then(function(i){return e(i,r)})}}var $me=Rme(HV);function Ime(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,a=n.length,o,l=0,c=0;for(s=0;s<a;++s)o=n[s],l+=o.x,c+=o.y;for(l=(l/a-e)*r,c=(c/a-t)*r,s=0;s<a;++s)o=n[s],o.x-=l,o.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Lme(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return VV(this.cover(t,n),t,n,e)}function VV(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,a={data:r},o=e._x0,l=e._y0,c=e._x1,u=e._y1,f,h,d,p,g,m,x,v;if(!s)return e._root=a,e;for(;s.length;)if((g=t>=(f=(o+c)/2))?o=f:c=f,(m=n>=(h=(l+u)/2))?l=h:u=h,i=s,!(s=s[x=m<<1|g]))return i[x]=a,e;if(d=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===d&&n===p)return a.next=s,i?i[x]=a:e._root=a,e;do i=i?i[x]=new Array(4):e._root=new Array(4),(g=t>=(f=(o+c)/2))?o=f:c=f,(m=n>=(h=(l+u)/2))?l=h:u=h;while((x=m<<1|g)===(v=(p>=h)<<1|d>=f));return i[v]=s,i[x]=a,e}function Pme(e){var t,n,r=e.length,i,s,a=new Array(r),o=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(a[n]=i,o[n]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>f&&(f=s));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<r;++n)VV(this,a[n],o[n],e[n]);return this}function Bme(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var a=i-n||1,o=this._root,l,c;n>e||e>=i||r>t||t>=s;)switch(c=(t<r)<<1|e<n,l=new Array(4),l[c]=o,o=l,a*=2,c){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Ume(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function zme(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function bi(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Hme(e,t,n){var r,i=this._x0,s=this._y0,a,o,l,c,u=this._x1,f=this._y1,h=[],d=this._root,p,g;for(d&&h.push(new bi(d,i,s,u,f)),n==null?n=1/0:(i=e-n,s=t-n,u=e+n,f=t+n,n*=n);p=h.pop();)if(!(!(d=p.node)||(a=p.x0)>u||(o=p.y0)>f||(l=p.x1)<i||(c=p.y1)<s))if(d.length){var m=(a+l)/2,x=(o+c)/2;h.push(new bi(d[3],m,x,l,c),new bi(d[2],a,x,m,c),new bi(d[1],m,o,l,x),new bi(d[0],a,o,m,x)),(g=(t>=x)<<1|e>=m)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-g],h[h.length-1-g]=p)}else{var v=e-+this._x.call(null,d.data),y=t-+this._y.call(null,d.data),_=v*v+y*y;if(_<n){var b=Math.sqrt(n=_);i=e-b,s=t-b,u=e+b,f=t+b,r=d.data}}return r}function Vme(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,c=this._y1,u,f,h,d,p,g,m,x;if(!n)return this;if(n.length)for(;;){if((p=u>=(h=(a+l)/2))?a=h:l=h,(g=f>=(d=(o+c)/2))?o=d:c=d,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,x=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[m]=s:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function Wme(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function jme(){return this._root}function Gme(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function qme(e){var t=[],n,r=this._root,i,s,a,o,l;for(r&&t.push(new bi(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&r.length){var c=(s+o)/2,u=(a+l)/2;(i=r[3])&&t.push(new bi(i,c,u,o,l)),(i=r[2])&&t.push(new bi(i,s,u,c,l)),(i=r[1])&&t.push(new bi(i,c,a,o,u)),(i=r[0])&&t.push(new bi(i,s,a,c,u))}return this}function Xme(e){var t=[],n=[],r;for(this._root&&t.push(new bi(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,c=r.y1,u=(a+l)/2,f=(o+c)/2;(s=i[0])&&t.push(new bi(s,a,o,u,f)),(s=i[1])&&t.push(new bi(s,u,o,l,f)),(s=i[2])&&t.push(new bi(s,a,f,u,c)),(s=i[3])&&t.push(new bi(s,u,f,l,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Yme(e){return e[0]}function Kme(e){return arguments.length?(this._x=e,this):this._x}function Jme(e){return e[1]}function Zme(e){return arguments.length?(this._y=e,this):this._y}function N4(e,t,n){var r=new D4(t??Yme,n??Jme,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function D4(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function N6(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Di=N4.prototype=D4.prototype;Di.copy=function(){var e=new D4(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=N6(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=N6(r));return e};Di.add=Lme;Di.addAll=Pme;Di.cover=Bme;Di.data=Ume;Di.extent=zme;Di.find=Hme;Di.remove=Vme;Di.removeAll=Wme;Di.root=jme;Di.size=Gme;Di.visit=qme;Di.visitAfter=Xme;Di.x=Kme;Di.y=Zme;function wi(e){return function(){return e}}function Hc(e){return(e()-.5)*1e-6}function Qme(e){return e.x+e.vx}function e1e(e){return e.y+e.vy}function t1e(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=wi(e==null?1:+e));function a(){for(var c,u=t.length,f,h,d,p,g,m,x=0;x<s;++x)for(f=N4(t,Qme,e1e).visitAfter(o),c=0;c<u;++c)h=t[c],g=n[h.index],m=g*g,d=h.x+h.vx,p=h.y+h.vy,f.visit(v);function v(y,_,b,w,E){var A=y.data,S=y.r,k=g+S;if(A){if(A.index>h.index){var T=d-A.x-A.vx,O=p-A.y-A.vy,C=T*T+O*O;C<k*k&&(T===0&&(T=Hc(r),C+=T*T),O===0&&(O=Hc(r),C+=O*O),C=(k-(C=Math.sqrt(C)))/C*i,h.vx+=(T*=C)*(k=(S*=S)/(m+S)),h.vy+=(O*=C)*k,A.vx-=T*(k=1-k),A.vy-=O*k)}return}return _>d+k||w<d-k||b>p+k||E<p-k}}function o(c){if(c.data)return c.r=n[c.data.index];for(var u=c.r=0;u<4;++u)c[u]&&c[u].r>c.r&&(c.r=c[u].r)}function l(){if(t){var c,u=t.length,f;for(n=new Array(u),c=0;c<u;++c)f=t[c],n[f.index]=+e(f,c,t)}}return a.initialize=function(c,u){t=c,r=u,l()},a.iterations=function(c){return arguments.length?(s=+c,a):s},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(e=typeof c=="function"?c:wi(+c),l(),a):e},a}function n1e(e){return e.index}function D6(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function r1e(e){var t=n1e,n=f,r,i=wi(30),s,a,o,l,c,u=1;e==null&&(e=[]);function f(m){return 1/Math.min(o[m.source.index],o[m.target.index])}function h(m){for(var x=0,v=e.length;x<u;++x)for(var y=0,_,b,w,E,A,S,k;y<v;++y)_=e[y],b=_.source,w=_.target,E=w.x+w.vx-b.x-b.vx||Hc(c),A=w.y+w.vy-b.y-b.vy||Hc(c),S=Math.sqrt(E*E+A*A),S=(S-s[y])/S*m*r[y],E*=S,A*=S,w.vx-=E*(k=l[y]),w.vy-=A*k,b.vx+=E*(k=1-k),b.vy+=A*k}function d(){if(a){var m,x=a.length,v=e.length,y=new Map(a.map((b,w)=>[t(b,w,a),b])),_;for(m=0,o=new Array(x);m<v;++m)_=e[m],_.index=m,typeof _.source!="object"&&(_.source=D6(y,_.source)),typeof _.target!="object"&&(_.target=D6(y,_.target)),o[_.source.index]=(o[_.source.index]||0)+1,o[_.target.index]=(o[_.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)_=e[m],l[m]=o[_.source.index]/(o[_.source.index]+o[_.target.index]);r=new Array(v),p(),s=new Array(v),g()}}function p(){if(a)for(var m=0,x=e.length;m<x;++m)r[m]=+n(e[m],m,e)}function g(){if(a)for(var m=0,x=e.length;m<x;++m)s[m]=+i(e[m],m,e)}return h.initialize=function(m,x){a=m,c=x,d()},h.links=function(m){return arguments.length?(e=m,d(),h):e},h.id=function(m){return arguments.length?(t=m,h):t},h.iterations=function(m){return arguments.length?(u=+m,h):u},h.strength=function(m){return arguments.length?(n=typeof m=="function"?m:wi(+m),p(),h):n},h.distance=function(m){return arguments.length?(i=typeof m=="function"?m:wi(+m),g(),h):i},h}const i1e=1664525,s1e=1013904223,M6=4294967296;function a1e(){let e=1;return()=>(e=(i1e*e+s1e)%M6)/M6}function o1e(e){return e.x}function l1e(e){return e.y}var c1e=10,u1e=Math.PI*(3-Math.sqrt(5));function f1e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,o=new Map,l=T4(f),c=g4("tick","end"),u=a1e();e==null&&(e=[]);function f(){h(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function h(g){var m,x=e.length,v;g===void 0&&(g=1);for(var y=0;y<g;++y)for(n+=(s-n)*i,o.forEach(function(_){_(n)}),m=0;m<x;++m)v=e[m],v.fx==null?v.x+=v.vx*=a:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=a:(v.y=v.fy,v.vy=0);return t}function d(){for(var g=0,m=e.length,x;g<m;++g){if(x=e[g],x.index=g,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var v=c1e*Math.sqrt(.5+g),y=g*u1e;x.x=v*Math.cos(y),x.y=v*Math.sin(y)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function p(g){return g.initialize&&g.initialize(e,u),g}return d(),t={tick:h,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,d(),o.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(a=1-g,t):1-a},randomSource:function(g){return arguments.length?(u=g,o.forEach(p),t):u},force:function(g,m){return arguments.length>1?(m==null?o.delete(g):o.set(g,p(m)),t):o.get(g)},find:function(g,m,x){var v=0,y=e.length,_,b,w,E,A;for(x==null?x=1/0:x*=x,v=0;v<y;++v)E=e[v],_=g-E.x,b=m-E.y,w=_*_+b*b,w<x&&(A=E,x=w);return A},on:function(g,m){return arguments.length>1?(c.on(g,m),t):c.on(g)}}}function h1e(){var e,t,n,r,i=wi(-30),s,a=1,o=1/0,l=.81;function c(d){var p,g=e.length,m=N4(e,o1e,l1e).visitAfter(f);for(r=d,p=0;p<g;++p)t=e[p],m.visit(h)}function u(){if(e){var d,p=e.length,g;for(s=new Array(p),d=0;d<p;++d)g=e[d],s[g.index]=+i(g,d,e)}}function f(d){var p=0,g,m,x=0,v,y,_;if(d.length){for(v=y=_=0;_<4;++_)(g=d[_])&&(m=Math.abs(g.value))&&(p+=g.value,x+=m,v+=m*g.x,y+=m*g.y);d.x=v/x,d.y=y/x}else{g=d,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}d.value=p}function h(d,p,g,m){if(!d.value)return!0;var x=d.x-t.x,v=d.y-t.y,y=m-p,_=x*x+v*v;if(y*y/l<_)return _<o&&(x===0&&(x=Hc(n),_+=x*x),v===0&&(v=Hc(n),_+=v*v),_<a&&(_=Math.sqrt(a*_)),t.vx+=x*d.value*r/_,t.vy+=v*d.value*r/_),!0;if(d.length||_>=o)return;(d.data!==t||d.next)&&(x===0&&(x=Hc(n),_+=x*x),v===0&&(v=Hc(n),_+=v*v),_<a&&(_=Math.sqrt(a*_)));do d.data!==t&&(y=s[d.data.index]*r/_,t.vx+=x*y,t.vy+=v*y);while(d=d.next)}return c.initialize=function(d,p){e=d,n=p,u()},c.strength=function(d){return arguments.length?(i=typeof d=="function"?d:wi(+d),u(),c):i},c.distanceMin=function(d){return arguments.length?(a=d*d,c):Math.sqrt(a)},c.distanceMax=function(d){return arguments.length?(o=d*d,c):Math.sqrt(o)},c.theta=function(d){return arguments.length?(l=d*d,c):Math.sqrt(l)},c}function d1e(e){var t=wi(.1),n,r,i;typeof e!="function"&&(e=wi(e==null?0:+e));function s(o){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vx+=(i[l]-u.x)*r[l]*o}function a(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(t=typeof o=="function"?o:wi(+o),a(),s):t},s.x=function(o){return arguments.length?(e=typeof o=="function"?o:wi(+o),a(),s):e},s}function p1e(e){var t=wi(.1),n,r,i;typeof e!="function"&&(e=wi(e==null?0:+e));function s(o){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vy+=(i[l]-u.y)*r[l]*o}function a(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(t=typeof o=="function"?o:wi(+o),a(),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:wi(+o),a(),s):e},s}function g1e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function r2(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function z0(e){return e=r2(Math.abs(e)),e?e[1]:NaN}function m1e(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function x1e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var v1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _h(e){if(!(t=v1e.exec(e)))throw new Error("invalid format: "+e);var t;return new M4({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_h.prototype=M4.prototype;function M4(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}M4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function y1e(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var WV;function _1e(e,t){var n=r2(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(WV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+r2(e,Math.max(0,t+s-1))[0]}function R6(e,t){var n=r2(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:g1e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>R6(e*100,t),r:R6,s:_1e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function I6(e){return e}var L6=Array.prototype.map,P6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jV(e){var t=e.grouping===void 0||e.thousands===void 0?I6:m1e(L6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?I6:x1e(L6.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=_h(f);var h=f.fill,d=f.align,p=f.sign,g=f.symbol,m=f.zero,x=f.width,v=f.comma,y=f.precision,_=f.trim,b=f.type;b==="n"?(v=!0,b="g"):$6[b]||(y===void 0&&(y=12),_=!0,b="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var w=g==="$"?n:g==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",E=g==="$"?r:/[%p]/.test(b)?a:"",A=$6[b],S=/[defgprs%]/.test(b);y=y===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function k(T){var O=w,C=E,D,N,R;if(b==="c")C=A(T)+C,T="";else{T=+T;var L=T<0||1/T<0;if(T=isNaN(T)?l:A(Math.abs(T),y),_&&(T=y1e(T)),L&&+T==0&&p!=="+"&&(L=!1),O=(L?p==="("?p:o:p==="-"||p==="("?"":p)+O,C=(b==="s"?P6[8+WV/3]:"")+C+(L&&p==="("?")":""),S){for(D=-1,N=T.length;++D<N;)if(R=T.charCodeAt(D),48>R||R>57){C=(R===46?i+T.slice(D+1):T.slice(D))+C,T=T.slice(0,D);break}}}v&&!m&&(T=t(T,1/0));var I=O.length+T.length+C.length,Y=I<x?new Array(x-I+1).join(h):"";switch(v&&m&&(T=t(Y+T,Y.length?x-C.length:1/0),Y=""),d){case"<":T=O+T+C+Y;break;case"=":T=O+Y+T+C;break;case"^":T=Y.slice(0,I=Y.length>>1)+O+T+C+Y.slice(I);break;default:T=Y+O+T+C;break}return s(T)}return k.toString=function(){return f+""},k}function u(f,h){var d=c((f=_h(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(z0(h)/3)))*3,g=Math.pow(10,-p),m=P6[8+p/3];return function(x){return d(g*x)+m}}return{format:c,formatPrefix:u}}var zv,wE,R4;b1e({thousands:",",grouping:[3],currency:["$",""]});function b1e(e){return zv=jV(e),wE=zv.format,R4=zv.formatPrefix,zv}function GV(e){return Math.max(0,-z0(Math.abs(e)))}function qV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(z0(t)/3)))*3-z0(Math.abs(e)))}function XV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,z0(t)-z0(e))+1}var et=1e-6,i2=1e-12,xt=Math.PI,An=xt/2,s2=xt/4,Fi=xt*2,On=180/xt,pt=xt/180,kt=Math.abs,Np=Math.atan,oa=Math.atan2,rt=Math.cos,Hv=Math.ceil,YV=Math.exp,Gk=Math.hypot,a2=Math.log,bA=Math.pow,Je=Math.sin,Ks=Math.sign||function(e){return e>0?1:e<0?-1:0},Oi=Math.sqrt,$4=Math.tan;function KV(e){return e>1?0:e<-1?xt:Math.acos(e)}function Ki(e){return e>1?An:e<-1?-An:Math.asin(e)}function Sr(){}function o2(e,t){e&&U6.hasOwnProperty(e.type)&&U6[e.type](e,t)}var B6={Feature:function(e,t){o2(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)o2(n[r].geometry,t)}},U6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){qk(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)qk(n[r],t,0)},Polygon:function(e,t){z6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)z6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)o2(n[r],t)}};function qk(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function z6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)qk(e[n],t,1);t.polygonEnd()}function wl(e,t){e&&B6.hasOwnProperty(e.type)?B6[e.type](e,t):o2(e,t)}var l2=new Ti,c2=new Ti,JV,ZV,Xk,Yk,Kk,Po={point:Sr,lineStart:Sr,lineEnd:Sr,polygonStart:function(){l2=new Ti,Po.lineStart=E1e,Po.lineEnd=w1e},polygonEnd:function(){var e=+l2;c2.add(e<0?Fi+e:e),this.lineStart=this.lineEnd=this.point=Sr},sphere:function(){c2.add(Fi)}};function E1e(){Po.point=S1e}function w1e(){QV(JV,ZV)}function S1e(e,t){Po.point=QV,JV=e,ZV=t,e*=pt,t*=pt,Xk=e,Yk=rt(t=t/2+s2),Kk=Je(t)}function QV(e,t){e*=pt,t*=pt,t=t/2+s2;var n=e-Xk,r=n>=0?1:-1,i=r*n,s=rt(t),a=Je(t),o=Kk*a,l=Yk*s+o*rt(i),c=o*r*Je(i);l2.add(oa(c,l)),Xk=e,Yk=s,Kk=a}function A1e(e){return c2=new Ti,wl(e,Po),c2*2}function u2(e){return[oa(e[1],e[0]),Ki(e[2])]}function bh(e){var t=e[0],n=e[1],r=rt(n);return[r*rt(t),r*Je(t),Je(n)]}function Vv(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function H0(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function EA(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Wv(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function f2(e){var t=Oi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var yn,Ui,En,hs,kf,eW,tW,c0,Em,Rc,ec,yl={point:Jk,lineStart:H6,lineEnd:V6,polygonStart:function(){yl.point=rW,yl.lineStart=T1e,yl.lineEnd=k1e,Em=new Ti,Po.polygonStart()},polygonEnd:function(){Po.polygonEnd(),yl.point=Jk,yl.lineStart=H6,yl.lineEnd=V6,l2<0?(yn=-(En=180),Ui=-(hs=90)):Em>et?hs=90:Em<-et&&(Ui=-90),ec[0]=yn,ec[1]=En},sphere:function(){yn=-(En=180),Ui=-(hs=90)}};function Jk(e,t){Rc.push(ec=[yn=e,En=e]),t<Ui&&(Ui=t),t>hs&&(hs=t)}function nW(e,t){var n=bh([e*pt,t*pt]);if(c0){var r=H0(c0,n),i=[r[1],-r[0],0],s=H0(i,r);f2(s),s=u2(s);var a=e-kf,o=a>0?1:-1,l=s[0]*On*o,c,u=kt(a)>180;u^(o*kf<l&&l<o*e)?(c=s[1]*On,c>hs&&(hs=c)):(l=(l+360)%360-180,u^(o*kf<l&&l<o*e)?(c=-s[1]*On,c<Ui&&(Ui=c)):(t<Ui&&(Ui=t),t>hs&&(hs=t))),u?e<kf?fs(yn,e)>fs(yn,En)&&(En=e):fs(e,En)>fs(yn,En)&&(yn=e):En>=yn?(e<yn&&(yn=e),e>En&&(En=e)):e>kf?fs(yn,e)>fs(yn,En)&&(En=e):fs(e,En)>fs(yn,En)&&(yn=e)}else Rc.push(ec=[yn=e,En=e]);t<Ui&&(Ui=t),t>hs&&(hs=t),c0=n,kf=e}function H6(){yl.point=nW}function V6(){ec[0]=yn,ec[1]=En,yl.point=Jk,c0=null}function rW(e,t){if(c0){var n=e-kf;Em.add(kt(n)>180?n+(n>0?360:-360):n)}else eW=e,tW=t;Po.point(e,t),nW(e,t)}function T1e(){Po.lineStart()}function k1e(){rW(eW,tW),Po.lineEnd(),kt(Em)>et&&(yn=-(En=180)),ec[0]=yn,ec[1]=En,c0=null}function fs(e,t){return(t-=e)<0?t+360:t}function C1e(e,t){return e[0]-t[0]}function W6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function F1e(e){var t,n,r,i,s,a,o;if(hs=En=-(yn=Ui=1/0),Rc=[],wl(e,yl),n=Rc.length){for(Rc.sort(C1e),t=1,r=Rc[0],s=[r];t<n;++t)i=Rc[t],W6(r,i[0])||W6(r,i[1])?(fs(r[0],i[1])>fs(r[0],r[1])&&(r[1]=i[1]),fs(i[0],r[1])>fs(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(a=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(o=fs(r[1],i[0]))>a&&(a=o,yn=i[0],En=r[1])}return Rc=ec=null,yn===1/0||Ui===1/0?[[NaN,NaN],[NaN,NaN]]:[[yn,Ui],[En,hs]]}var zg,h2,d2,p2,g2,m2,x2,v2,Zk,Qk,eC,iW,sW,xi,vi,yi,Ma={sphere:Sr,point:I4,lineStart:j6,lineEnd:G6,polygonStart:function(){Ma.lineStart=D1e,Ma.lineEnd=M1e},polygonEnd:function(){Ma.lineStart=j6,Ma.lineEnd=G6}};function I4(e,t){e*=pt,t*=pt;var n=rt(t);px(n*rt(e),n*Je(e),Je(t))}function px(e,t,n){++zg,d2+=(e-d2)/zg,p2+=(t-p2)/zg,g2+=(n-g2)/zg}function j6(){Ma.point=O1e}function O1e(e,t){e*=pt,t*=pt;var n=rt(t);xi=n*rt(e),vi=n*Je(e),yi=Je(t),Ma.point=N1e,px(xi,vi,yi)}function N1e(e,t){e*=pt,t*=pt;var n=rt(t),r=n*rt(e),i=n*Je(e),s=Je(t),a=oa(Oi((a=vi*s-yi*i)*a+(a=yi*r-xi*s)*a+(a=xi*i-vi*r)*a),xi*r+vi*i+yi*s);h2+=a,m2+=a*(xi+(xi=r)),x2+=a*(vi+(vi=i)),v2+=a*(yi+(yi=s)),px(xi,vi,yi)}function G6(){Ma.point=I4}function D1e(){Ma.point=R1e}function M1e(){aW(iW,sW),Ma.point=I4}function R1e(e,t){iW=e,sW=t,e*=pt,t*=pt,Ma.point=aW;var n=rt(t);xi=n*rt(e),vi=n*Je(e),yi=Je(t),px(xi,vi,yi)}function aW(e,t){e*=pt,t*=pt;var n=rt(t),r=n*rt(e),i=n*Je(e),s=Je(t),a=vi*s-yi*i,o=yi*r-xi*s,l=xi*i-vi*r,c=Gk(a,o,l),u=Ki(c),f=c&&-u/c;Zk.add(f*a),Qk.add(f*o),eC.add(f*l),h2+=u,m2+=u*(xi+(xi=r)),x2+=u*(vi+(vi=i)),v2+=u*(yi+(yi=s)),px(xi,vi,yi)}function $1e(e){zg=h2=d2=p2=g2=m2=x2=v2=0,Zk=new Ti,Qk=new Ti,eC=new Ti,wl(e,Ma);var t=+Zk,n=+Qk,r=+eC,i=Gk(t,n,r);return i<i2&&(t=m2,n=x2,r=v2,h2<et&&(t=d2,n=p2,r=g2),i=Gk(t,n,r),i<i2)?[NaN,NaN]:[oa(n,t)*On,Ki(r/i)*On]}function tC(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function nC(e,t){return kt(e)>xt&&(e-=Math.round(e/Fi)*Fi),[e,t]}nC.invert=nC;function oW(e,t,n){return(e%=Fi)?t||n?tC(X6(e),Y6(t,n)):X6(e):t||n?Y6(t,n):nC}function q6(e){return function(t,n){return t+=e,kt(t)>xt&&(t-=Math.round(t/Fi)*Fi),[t,n]}}function X6(e){var t=q6(e);return t.invert=q6(-e),t}function Y6(e,t){var n=rt(e),r=Je(e),i=rt(t),s=Je(t);function a(o,l){var c=rt(l),u=rt(o)*c,f=Je(o)*c,h=Je(l),d=h*n+u*r;return[oa(f*i-d*s,u*n-h*r),Ki(d*i+f*s)]}return a.invert=function(o,l){var c=rt(l),u=rt(o)*c,f=Je(o)*c,h=Je(l),d=h*i-f*s;return[oa(f*i+h*s,u*n+d*r),Ki(d*n-u*r)]},a}function I1e(e){e=oW(e[0]*pt,e[1]*pt,e.length>2?e[2]*pt:0);function t(n){return n=e(n[0]*pt,n[1]*pt),n[0]*=On,n[1]*=On,n}return t.invert=function(n){return n=e.invert(n[0]*pt,n[1]*pt),n[0]*=On,n[1]*=On,n},t}function L1e(e,t,n,r,i,s){if(n){var a=rt(t),o=Je(t),l=r*n;i==null?(i=t+r*Fi,s=t-l/2):(i=K6(a,i),s=K6(a,s),(r>0?i<s:i>s)&&(i+=r*Fi));for(var c,u=i;r>0?u>s:u<s;u-=l)c=u2([a,-o*rt(u),-o*Je(u)]),e.point(c[0],c[1])}}function K6(e,t){t=bh(t),t[0]-=e,f2(t);var n=KV(-t[1]);return((-t[2]<0?-n:n)+Fi-et)%Fi}function lW(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Sr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ky(e,t){return kt(e[0]-t[0])<et&&kt(e[1]-t[1])<et}function jv(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function cW(e,t,n,r,i){var s=[],a=[],o,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],x=p[g],v;if(Ky(m,x)){if(!m[2]&&!x[2]){for(i.lineStart(),o=0;o<g;++o)i.point((m=p[o])[0],m[1]);i.lineEnd();return}x[0]+=2*et}s.push(v=new jv(m,p,null,!0)),a.push(v.o=new jv(m,null,v,!1)),s.push(v=new jv(x,p,null,!1)),a.push(v.o=new jv(x,null,v,!0))}}),!!s.length){for(a.sort(t),J6(s),J6(a),o=0,l=a.length;o<l;++o)a[o].e=n=!n;for(var c=s[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,l=u.length;o<l;++o)i.point((f=u[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,o=u.length-1;o>=0;--o)i.point((f=u[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);i.lineEnd()}}}function J6(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function wA(e){return kt(e[0])<=xt?e[0]:Ks(e[0])*((kt(e[0])+xt)%Fi-xt)}function P1e(e,t){var n=wA(t),r=t[1],i=Je(r),s=[Je(n),-rt(n),0],a=0,o=0,l=new Ti;i===1?r=An+et:i===-1&&(r=-An-et);for(var c=0,u=e.length;c<u;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],p=wA(d),g=d[1]/2+s2,m=Je(g),x=rt(g),v=0;v<h;++v,p=_,m=w,x=E,d=y){var y=f[v],_=wA(y),b=y[1]/2+s2,w=Je(b),E=rt(b),A=_-p,S=A>=0?1:-1,k=S*A,T=k>xt,O=m*w;if(l.add(oa(O*S*Je(k),x*E+O*rt(k))),a+=T?A+S*Fi:A,T^p>=n^_>=n){var C=H0(bh(d),bh(y));f2(C);var D=H0(s,C);f2(D);var N=(T^A>=0?-1:1)*Ki(D[2]);(r>N||r===N&&(C[0]||C[1]))&&(o+=T^A>=0?1:-1)}}return(a<-et||a<et&&l<-i2)^o&1}function uW(e,t,n,r){return function(i){var s=t(i),a=lW(),o=t(a),l=!1,c,u,f,h={point:d,lineStart:g,lineEnd:m,polygonStart:function(){h.point=x,h.lineStart=v,h.lineEnd=y,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=m,u=GH(u);var _=P1e(c,r);u.length?(l||(i.polygonStart(),l=!0),cW(u,U1e,_,n,i)):_&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(_,b){e(_,b)&&i.point(_,b)}function p(_,b){s.point(_,b)}function g(){h.point=p,s.lineStart()}function m(){h.point=d,s.lineEnd()}function x(_,b){f.push([_,b]),o.point(_,b)}function v(){o.lineStart(),f=[]}function y(){x(f[0][0],f[0][1]),o.lineEnd();var _=o.clean(),b=a.result(),w,E=b.length,A,S,k;if(f.pop(),c.push(f),f=null,!!E){if(_&1){if(S=b[0],(A=S.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),w=0;w<A;++w)i.point((k=S[w])[0],k[1]);i.lineEnd()}return}E>1&&_&2&&b.push(b.pop().concat(b.shift())),u.push(b.filter(B1e))}}return h}}function B1e(e){return e.length>1}function U1e(e,t){return((e=e.x)[0]<0?e[1]-An-et:An-e[1])-((t=t.x)[0]<0?t[1]-An-et:An-t[1])}const Z6=uW(function(){return!0},z1e,V1e,[-xt,-An]);function z1e(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,a){var o=s>0?xt:-xt,l=kt(s-t);kt(l-xt)<et?(e.point(t,n=(n+a)/2>0?An:-An),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(s,n),i=0):r!==o&&l>=xt&&(kt(t-r)<et&&(t-=r*et),kt(s-o)<et&&(s-=o*et),n=H1e(t,n,s,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),i=0),e.point(t=s,n=a),r=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function H1e(e,t,n,r){var i,s,a=Je(e-n);return kt(a)>et?Np((Je(t)*(s=rt(r))*Je(n)-Je(r)*(i=rt(t))*Je(e))/(i*s*a)):(t+r)/2}function V1e(e,t,n,r){var i;if(e==null)i=n*An,r.point(-xt,i),r.point(0,i),r.point(xt,i),r.point(xt,0),r.point(xt,-i),r.point(0,-i),r.point(-xt,-i),r.point(-xt,0),r.point(-xt,i);else if(kt(e[0]-t[0])>et){var s=e[0]<t[0]?xt:-xt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function W1e(e){var t=rt(e),n=2*pt,r=t>0,i=kt(t)>et;function s(u,f,h,d){L1e(d,e,n,h,u,f)}function a(u,f){return rt(u)*rt(f)>t}function o(u){var f,h,d,p,g;return{lineStart:function(){p=d=!1,g=1},point:function(m,x){var v=[m,x],y,_=a(m,x),b=r?_?0:c(m,x):_?c(m+(m<0?xt:-xt),x):0;if(!f&&(p=d=_)&&u.lineStart(),_!==d&&(y=l(f,v),(!y||Ky(f,y)||Ky(v,y))&&(v[2]=1)),_!==d)g=0,_?(u.lineStart(),y=l(v,f),u.point(y[0],y[1])):(y=l(f,v),u.point(y[0],y[1],2),u.lineEnd()),f=y;else if(i&&f&&r^_){var w;!(b&h)&&(w=l(v,f,!0))&&(g=0,r?(u.lineStart(),u.point(w[0][0],w[0][1]),u.point(w[1][0],w[1][1]),u.lineEnd()):(u.point(w[1][0],w[1][1]),u.lineEnd(),u.lineStart(),u.point(w[0][0],w[0][1],3)))}_&&(!f||!Ky(f,v))&&u.point(v[0],v[1]),f=v,d=_,h=b},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return g|(p&&d)<<1}}}function l(u,f,h){var d=bh(u),p=bh(f),g=[1,0,0],m=H0(d,p),x=Vv(m,m),v=m[0],y=x-v*v;if(!y)return!h&&u;var _=t*x/y,b=-t*v/y,w=H0(g,m),E=Wv(g,_),A=Wv(m,b);EA(E,A);var S=w,k=Vv(E,S),T=Vv(S,S),O=k*k-T*(Vv(E,E)-1);if(!(O<0)){var C=Oi(O),D=Wv(S,(-k-C)/T);if(EA(D,E),D=u2(D),!h)return D;var N=u[0],R=f[0],L=u[1],I=f[1],Y;R<N&&(Y=N,N=R,R=Y);var X=R-N,oe=kt(X-xt)<et,xe=oe||X<et;if(!oe&&I<L&&(Y=L,L=I,I=Y),xe?oe?L+I>0^D[1]<(kt(D[0]-N)<et?L:I):L<=D[1]&&D[1]<=I:X>xt^(N<=D[0]&&D[0]<=R)){var _e=Wv(S,(-k+C)/T);return EA(_e,E),[D,u2(_e)]}}}function c(u,f){var h=r?e:xt-e,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return uW(a,o,s,r?[0,-e]:[-xt,e-xt])}function j1e(e,t,n,r,i,s){var a=e[0],o=e[1],l=t[0],c=t[1],u=0,f=1,h=l-a,d=c-o,p;if(p=n-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=i-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}if(p=r-o,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=s-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=a+u*h,e[1]=o+u*d),f<1&&(t[0]=a+f*h,t[1]=o+f*d),!0}}}}}var Hg=1e9,Gv=-Hg;function fW(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function s(c,u,f,h){var d=0,p=0;if(c==null||(d=a(c,f))!==(p=a(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==p);else h.point(u[0],u[1])}function a(c,u){return kt(c[0]-e)<et?u>0?0:3:kt(c[0]-n)<et?u>0?2:1:kt(c[1]-t)<et?u>0?1:0:u>0?3:2}function o(c,u){return l(c.x,u.x)}function l(c,u){var f=a(c,1),h=a(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=lW(),h,d,p,g,m,x,v,y,_,b,w,E={point:A,lineStart:O,lineEnd:C,polygonStart:k,polygonEnd:T};function A(N,R){i(N,R)&&u.point(N,R)}function S(){for(var N=0,R=0,L=d.length;R<L;++R)for(var I=d[R],Y=1,X=I.length,oe=I[0],xe,_e,ve=oe[0],Oe=oe[1];Y<X;++Y)xe=ve,_e=Oe,oe=I[Y],ve=oe[0],Oe=oe[1],_e<=r?Oe>r&&(ve-xe)*(r-_e)>(Oe-_e)*(e-xe)&&++N:Oe<=r&&(ve-xe)*(r-_e)<(Oe-_e)*(e-xe)&&--N;return N}function k(){u=f,h=[],d=[],w=!0}function T(){var N=S(),R=w&&N,L=(h=GH(h)).length;(R||L)&&(c.polygonStart(),R&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),L&&cW(h,o,N,s,c),c.polygonEnd()),u=c,h=d=p=null}function O(){E.point=D,d&&d.push(p=[]),b=!0,_=!1,v=y=NaN}function C(){h&&(D(g,m),x&&_&&f.rejoin(),h.push(f.result())),E.point=A,_&&u.lineEnd()}function D(N,R){var L=i(N,R);if(d&&p.push([N,R]),b)g=N,m=R,x=L,b=!1,L&&(u.lineStart(),u.point(N,R));else if(L&&_)u.point(N,R);else{var I=[v=Math.max(Gv,Math.min(Hg,v)),y=Math.max(Gv,Math.min(Hg,y))],Y=[N=Math.max(Gv,Math.min(Hg,N)),R=Math.max(Gv,Math.min(Hg,R))];j1e(I,Y,e,t,n,r)?(_||(u.lineStart(),u.point(I[0],I[1])),u.point(Y[0],Y[1]),L||u.lineEnd(),w=!1):L&&(u.lineStart(),u.point(N,R),w=!1)}v=N,y=R,_=L}return E}}function Q6(e,t,n){var r=ms(e,t-et,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function e5(e,t,n){var r=ms(e,t-et,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function G1e(){var e,t,n,r,i,s,a,o,l=10,c=l,u=90,f=360,h,d,p,g,m=2.5;function x(){return{type:"MultiLineString",coordinates:v()}}function v(){return ms(Hv(r/u)*u,n,u).map(p).concat(ms(Hv(o/f)*f,a,f).map(g)).concat(ms(Hv(t/l)*l,e,l).filter(function(y){return kt(y%u)>et}).map(h)).concat(ms(Hv(s/c)*c,i,c).filter(function(y){return kt(y%f)>et}).map(d))}return x.lines=function(){return v().map(function(y){return{type:"LineString",coordinates:y}})},x.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(a).slice(1),p(n).reverse().slice(1),g(o).reverse().slice(1))]}},x.extent=function(y){return arguments.length?x.extentMajor(y).extentMinor(y):x.extentMinor()},x.extentMajor=function(y){return arguments.length?(r=+y[0][0],n=+y[1][0],o=+y[0][1],a=+y[1][1],r>n&&(y=r,r=n,n=y),o>a&&(y=o,o=a,a=y),x.precision(m)):[[r,o],[n,a]]},x.extentMinor=function(y){return arguments.length?(t=+y[0][0],e=+y[1][0],s=+y[0][1],i=+y[1][1],t>e&&(y=t,t=e,e=y),s>i&&(y=s,s=i,i=y),x.precision(m)):[[t,s],[e,i]]},x.step=function(y){return arguments.length?x.stepMajor(y).stepMinor(y):x.stepMinor()},x.stepMajor=function(y){return arguments.length?(u=+y[0],f=+y[1],x):[u,f]},x.stepMinor=function(y){return arguments.length?(l=+y[0],c=+y[1],x):[l,c]},x.precision=function(y){return arguments.length?(m=+y,h=Q6(s,i,90),d=e5(t,e,m),p=Q6(o,a,90),g=e5(r,n,m),x):m},x.extentMajor([[-180,-90+et],[180,90-et]]).extentMinor([[-180,-80-et],[180,80+et]])}const p1=e=>e;var SA=new Ti,rC=new Ti,hW,dW,iC,sC,Sl={point:Sr,lineStart:Sr,lineEnd:Sr,polygonStart:function(){Sl.lineStart=q1e,Sl.lineEnd=Y1e},polygonEnd:function(){Sl.lineStart=Sl.lineEnd=Sl.point=Sr,SA.add(kt(rC)),rC=new Ti},result:function(){var e=SA/2;return SA=new Ti,e}};function q1e(){Sl.point=X1e}function X1e(e,t){Sl.point=pW,hW=iC=e,dW=sC=t}function pW(e,t){rC.add(sC*e-iC*t),iC=e,sC=t}function Y1e(){pW(hW,dW)}var V0=1/0,y2=V0,g1=-V0,_2=g1,b2={point:K1e,lineStart:Sr,lineEnd:Sr,polygonStart:Sr,polygonEnd:Sr,result:function(){var e=[[V0,y2],[g1,_2]];return g1=_2=-(y2=V0=1/0),e}};function K1e(e,t){e<V0&&(V0=e),e>g1&&(g1=e),t<y2&&(y2=t),t>_2&&(_2=t)}var aC=0,oC=0,Vg=0,E2=0,w2=0,jd=0,lC=0,cC=0,Wg=0,gW,mW,wo,So,Gs={point:Eh,lineStart:t5,lineEnd:n5,polygonStart:function(){Gs.lineStart=Q1e,Gs.lineEnd=exe},polygonEnd:function(){Gs.point=Eh,Gs.lineStart=t5,Gs.lineEnd=n5},result:function(){var e=Wg?[lC/Wg,cC/Wg]:jd?[E2/jd,w2/jd]:Vg?[aC/Vg,oC/Vg]:[NaN,NaN];return aC=oC=Vg=E2=w2=jd=lC=cC=Wg=0,e}};function Eh(e,t){aC+=e,oC+=t,++Vg}function t5(){Gs.point=J1e}function J1e(e,t){Gs.point=Z1e,Eh(wo=e,So=t)}function Z1e(e,t){var n=e-wo,r=t-So,i=Oi(n*n+r*r);E2+=i*(wo+e)/2,w2+=i*(So+t)/2,jd+=i,Eh(wo=e,So=t)}function n5(){Gs.point=Eh}function Q1e(){Gs.point=txe}function exe(){xW(gW,mW)}function txe(e,t){Gs.point=xW,Eh(gW=wo=e,mW=So=t)}function xW(e,t){var n=e-wo,r=t-So,i=Oi(n*n+r*r);E2+=i*(wo+e)/2,w2+=i*(So+t)/2,jd+=i,i=So*e-wo*t,lC+=i*(wo+e),cC+=i*(So+t),Wg+=i*3,Eh(wo=e,So=t)}function vW(e){this._context=e}vW.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Fi);break}}},result:Sr};var uC=new Ti,AA,yW,_W,jg,Gg,m1={point:Sr,lineStart:function(){m1.point=nxe},lineEnd:function(){AA&&bW(yW,_W),m1.point=Sr},polygonStart:function(){AA=!0},polygonEnd:function(){AA=null},result:function(){var e=+uC;return uC=new Ti,e}};function nxe(e,t){m1.point=bW,yW=jg=e,_W=Gg=t}function bW(e,t){jg-=e,Gg-=t,uC.add(Oi(jg*jg+Gg*Gg)),jg=e,Gg=t}let r5,S2,i5,s5;class a5{constructor(t){this._append=t==null?EW:rxe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==i5||this._append!==S2){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,i5=r,S2=this._append,s5=this._,this._=i}this._+=s5;break}}}result(){const t=this._;return this._="",t.length?t:null}}function EW(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function rxe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return EW;if(t!==r5){const n=10**t;r5=t,S2=function(i){let s=1;this._+=i[0];for(const a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return S2}function wW(e,t){let n=3,r=4.5,i,s;function a(o){return o&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),wl(o,i(s))),s.result()}return a.area=function(o){return wl(o,i(Sl)),Sl.result()},a.measure=function(o){return wl(o,i(m1)),m1.result()},a.bounds=function(o){return wl(o,i(b2)),b2.result()},a.centroid=function(o){return wl(o,i(Gs)),Gs.result()},a.projection=function(o){return arguments.length?(i=o==null?(e=null,p1):(e=o).stream,a):e},a.context=function(o){return arguments.length?(s=o==null?(t=null,new a5(n)):new vW(t=o),typeof r!="function"&&s.pointRadius(r),a):t},a.pointRadius=function(o){return arguments.length?(r=typeof o=="function"?o:(s.pointRadius(+o),+o),a):r},a.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(s=new a5(n)),a},a.projection(e).digits(n).context(t)}function SE(e){return function(t){var n=new fC;for(var r in e)n[r]=e[r];return n.stream=t,n}}function fC(){}fC.prototype={constructor:fC,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function L4(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),wl(n,e.stream(b2)),t(b2.result()),r!=null&&e.clipExtent(r),e}function AE(e,t,n){return L4(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),o=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,l])},n)}function P4(e,t,n){return AE(e,[[0,0],t],n)}function B4(e,t,n){return L4(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),a=(i-s*(r[1][0]+r[0][0]))/2,o=-s*r[0][1];e.scale(150*s).translate([a,o])},n)}function U4(e,t,n){return L4(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),a=-s*r[0][0],o=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,o])},n)}var o5=16,ixe=rt(30*pt);function l5(e,t){return+t?axe(e,t):sxe(e)}function sxe(e){return SE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function axe(e,t){function n(r,i,s,a,o,l,c,u,f,h,d,p,g,m){var x=c-r,v=u-i,y=x*x+v*v;if(y>4*t&&g--){var _=a+h,b=o+d,w=l+p,E=Oi(_*_+b*b+w*w),A=Ki(w/=E),S=kt(kt(w)-1)<et||kt(s-f)<et?(s+f)/2:oa(b,_),k=e(S,A),T=k[0],O=k[1],C=T-r,D=O-i,N=v*C-x*D;(N*N/y>t||kt((x*C+v*D)/y-.5)>.3||a*h+o*d+l*p<ixe)&&(n(r,i,s,a,o,l,T,O,S,_/=E,b/=E,w,g,m),m.point(T,O),n(T,O,S,_,b,w,c,u,f,h,d,p,g,m))}}return function(r){var i,s,a,o,l,c,u,f,h,d,p,g,m={point:x,lineStart:v,lineEnd:_,polygonStart:function(){r.polygonStart(),m.lineStart=b},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function x(A,S){A=e(A,S),r.point(A[0],A[1])}function v(){f=NaN,m.point=y,r.lineStart()}function y(A,S){var k=bh([A,S]),T=e(A,S);n(f,h,u,d,p,g,f=T[0],h=T[1],u=A,d=k[0],p=k[1],g=k[2],o5,r),r.point(f,h)}function _(){m.point=x,r.lineEnd()}function b(){v(),m.point=w,m.lineEnd=E}function w(A,S){y(i=A,S),s=f,a=h,o=d,l=p,c=g,m.point=y}function E(){n(f,h,u,d,p,g,s,a,i,o,l,c,o5,r),m.lineEnd=_,_()}return m}}var oxe=SE({point:function(e,t){this.stream.point(e*pt,t*pt)}});function lxe(e){return SE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function cxe(e,t,n,r,i){function s(a,o){return a*=r,o*=i,[t+e*a,n-e*o]}return s.invert=function(a,o){return[(a-t)/e*r,(n-o)/e*i]},s}function c5(e,t,n,r,i,s){if(!s)return cxe(e,t,n,r,i);var a=rt(s),o=Je(s),l=a*e,c=o*e,u=a/e,f=o/e,h=(o*n-a*t)/e,d=(o*t+a*n)/e;function p(g,m){return g*=r,m*=i,[l*g-c*m+t,n-c*g-l*m]}return p.invert=function(g,m){return[r*(u*g-f*m+h),i*(d-f*g-u*m)]},p}function Xo(e){return SW(function(){return e})()}function SW(e){var t,n=150,r=480,i=250,s=0,a=0,o=0,l=0,c=0,u,f=0,h=1,d=1,p=null,g=Z6,m=null,x,v,y,_=p1,b=.5,w,E,A,S,k;function T(N){return A(N[0]*pt,N[1]*pt)}function O(N){return N=A.invert(N[0],N[1]),N&&[N[0]*On,N[1]*On]}T.stream=function(N){return S&&k===N?S:S=oxe(lxe(u)(g(w(_(k=N)))))},T.preclip=function(N){return arguments.length?(g=N,p=void 0,D()):g},T.postclip=function(N){return arguments.length?(_=N,m=x=v=y=null,D()):_},T.clipAngle=function(N){return arguments.length?(g=+N?W1e(p=N*pt):(p=null,Z6),D()):p*On},T.clipExtent=function(N){return arguments.length?(_=N==null?(m=x=v=y=null,p1):fW(m=+N[0][0],x=+N[0][1],v=+N[1][0],y=+N[1][1]),D()):m==null?null:[[m,x],[v,y]]},T.scale=function(N){return arguments.length?(n=+N,C()):n},T.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],C()):[r,i]},T.center=function(N){return arguments.length?(s=N[0]%360*pt,a=N[1]%360*pt,C()):[s*On,a*On]},T.rotate=function(N){return arguments.length?(o=N[0]%360*pt,l=N[1]%360*pt,c=N.length>2?N[2]%360*pt:0,C()):[o*On,l*On,c*On]},T.angle=function(N){return arguments.length?(f=N%360*pt,C()):f*On},T.reflectX=function(N){return arguments.length?(h=N?-1:1,C()):h<0},T.reflectY=function(N){return arguments.length?(d=N?-1:1,C()):d<0},T.precision=function(N){return arguments.length?(w=l5(E,b=N*N),D()):Oi(b)},T.fitExtent=function(N,R){return AE(T,N,R)},T.fitSize=function(N,R){return P4(T,N,R)},T.fitWidth=function(N,R){return B4(T,N,R)},T.fitHeight=function(N,R){return U4(T,N,R)};function C(){var N=c5(n,0,0,h,d,f).apply(null,t(s,a)),R=c5(n,r-N[0],i-N[1],h,d,f);return u=oW(o,l,c),E=tC(t,R),A=tC(u,E),w=l5(E,b),D()}function D(){return S=k=null,T}return function(){return t=e.apply(this,arguments),T.invert=t.invert&&O,C()}}function z4(e){var t=0,n=xt/3,r=SW(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*pt,n=s[1]*pt):[t*On,n*On]},i}function uxe(e){var t=rt(e);function n(r,i){return[r*t,Je(i)/t]}return n.invert=function(r,i){return[r/t,Ki(i*t)]},n}function fxe(e,t){var n=Je(e),r=(n+Je(t))/2;if(kt(r)<et)return uxe(e);var i=1+n*(2*r-n),s=Oi(i)/r;function a(o,l){var c=Oi(i-2*r*Je(l))/r;return[c*Je(o*=r),s-c*rt(o)]}return a.invert=function(o,l){var c=s-l,u=oa(o,kt(c))*Ks(c);return c*r<0&&(u-=xt*Ks(o)*Ks(c)),[u/r,Ki((i-(o*o+c*c)*r*r)/(2*r))]},a}function A2(){return z4(fxe).scale(155.424).center([0,33.6442])}function AW(){return A2().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hxe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function dxe(){var e,t,n=AW(),r,i=A2().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=A2().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],p=h[1];return l=null,r.point(d,p),l||(s.point(d,p),l)||(o.point(d,p),l)}u.invert=function(h){var d=n.scale(),p=n.translate(),g=(h[0]-p[0])/d,m=(h[1]-p[1])/d;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=hxe([n.stream(t=h),i.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),a.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),a.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),p=+h[0],g=+h[1];return r=n.translate(h).clipExtent([[p-.455*d,g-.238*d],[p+.455*d,g+.238*d]]).stream(c),s=i.translate([p-.307*d,g+.201*d]).clipExtent([[p-.425*d+et,g+.12*d+et],[p-.214*d-et,g+.234*d-et]]).stream(c),o=a.translate([p-.205*d,g+.212*d]).clipExtent([[p-.214*d+et,g+.166*d+et],[p-.115*d-et,g+.234*d-et]]).stream(c),f()},u.fitExtent=function(h,d){return AE(u,h,d)},u.fitSize=function(h,d){return P4(u,h,d)},u.fitWidth=function(h,d){return B4(u,h,d)},u.fitHeight=function(h,d){return U4(u,h,d)};function f(){return e=t=null,u}return u.scale(1070)}function TW(e){return function(t,n){var r=rt(t),i=rt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Je(t),s*Je(n)]}}function gx(e){return function(t,n){var r=Oi(t*t+n*n),i=e(r),s=Je(i),a=rt(i);return[oa(t*s,r*a),Ki(r&&n*s/r)]}}var kW=TW(function(e){return Oi(2/(1+e))});kW.invert=gx(function(e){return 2*Ki(e/2)});function pxe(){return Xo(kW).scale(124.75).clipAngle(180-.001)}var CW=TW(function(e){return(e=KV(e))&&e/Je(e)});CW.invert=gx(function(e){return e});function gxe(){return Xo(CW).scale(79.4188).clipAngle(180-.001)}function TE(e,t){return[e,a2($4((An+t)/2))]}TE.invert=function(e,t){return[e,2*Np(YV(t))-An]};function mxe(){return FW(TE).scale(961/Fi)}function FW(e){var t=Xo(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,a=null,o,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=o=l=c=null:(a=+f[0][0],o=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):a==null?null:[[a,o],[l,c]]};function u(){var f=xt*r(),h=t(I1e(t.rotate()).invert([0,0]));return s(a==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===TE?[[Math.max(h[0]-f,a),o],[Math.min(h[0]+f,l),c]]:[[a,Math.max(h[1]-f,o)],[l,Math.min(h[1]+f,c)]])}return u()}function qv(e){return $4((An+e)/2)}function xxe(e,t){var n=rt(e),r=e===t?Je(e):a2(n/rt(t))/a2(qv(t)/qv(e)),i=n*bA(qv(e),r)/r;if(!r)return TE;function s(a,o){i>0?o<-An+et&&(o=-An+et):o>An-et&&(o=An-et);var l=i/bA(qv(o),r);return[l*Je(r*a),i-l*rt(r*a)]}return s.invert=function(a,o){var l=i-o,c=Ks(r)*Oi(a*a+l*l),u=oa(a,kt(l))*Ks(l);return l*r<0&&(u-=xt*Ks(a)*Ks(l)),[u/r,2*Np(bA(i/c,1/r))-An]},s}function vxe(){return z4(xxe).scale(109.5).parallels([30,30])}function T2(e,t){return[e,t]}T2.invert=T2;function yxe(){return Xo(T2).scale(152.63)}function _xe(e,t){var n=rt(e),r=e===t?Je(e):(n-rt(t))/(t-e),i=n/r+e;if(kt(r)<et)return T2;function s(a,o){var l=i-o,c=r*a;return[l*Je(c),i-l*rt(c)]}return s.invert=function(a,o){var l=i-o,c=oa(a,kt(l))*Ks(l);return l*r<0&&(c-=xt*Ks(a)*Ks(l)),[c/r,i-Ks(r)*Oi(a*a+l*l)]},s}function bxe(){return z4(_xe).scale(131.154).center([0,13.9389])}var wm=1.340264,Sm=-.081106,Am=893e-6,Tm=.003796,k2=Oi(3)/2,Exe=12;function OW(e,t){var n=Ki(k2*Je(t)),r=n*n,i=r*r*r;return[e*rt(n)/(k2*(wm+3*Sm*r+i*(7*Am+9*Tm*r))),n*(wm+Sm*r+i*(Am+Tm*r))]}OW.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,a,o,l;s<Exe&&(o=n*(wm+Sm*r+i*(Am+Tm*r))-t,l=wm+3*Sm*r+i*(7*Am+9*Tm*r),n-=a=o/l,r=n*n,i=r*r*r,!(kt(a)<i2));++s);return[k2*e*(wm+3*Sm*r+i*(7*Am+9*Tm*r))/rt(n),Ki(Je(n)/k2)]};function wxe(){return Xo(OW).scale(177.158)}function NW(e,t){var n=rt(t),r=rt(e)*n;return[n*Je(e)/r,Je(t)/r]}NW.invert=gx(Np);function Sxe(){return Xo(NW).scale(144.049).clipAngle(60)}function Axe(){var e=1,t=0,n=0,r=1,i=1,s=0,a,o,l=null,c,u,f,h=1,d=1,p=SE({point:function(_,b){var w=y([_,b]);this.stream.point(w[0],w[1])}}),g=p1,m,x;function v(){return h=e*r,d=e*i,m=x=null,y}function y(_){var b=_[0]*h,w=_[1]*d;if(s){var E=w*a-b*o;b=b*a+w*o,w=E}return[b+t,w+n]}return y.invert=function(_){var b=_[0]-t,w=_[1]-n;if(s){var E=w*a+b*o;b=b*a-w*o,w=E}return[b/h,w/d]},y.stream=function(_){return m&&x===_?m:m=p(g(x=_))},y.postclip=function(_){return arguments.length?(g=_,l=c=u=f=null,v()):g},y.clipExtent=function(_){return arguments.length?(g=_==null?(l=c=u=f=null,p1):fW(l=+_[0][0],c=+_[0][1],u=+_[1][0],f=+_[1][1]),v()):l==null?null:[[l,c],[u,f]]},y.scale=function(_){return arguments.length?(e=+_,v()):e},y.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],v()):[t,n]},y.angle=function(_){return arguments.length?(s=_%360*pt,o=Je(s),a=rt(s),v()):s*On},y.reflectX=function(_){return arguments.length?(r=_?-1:1,v()):r<0},y.reflectY=function(_){return arguments.length?(i=_?-1:1,v()):i<0},y.fitExtent=function(_,b){return AE(y,_,b)},y.fitSize=function(_,b){return P4(y,_,b)},y.fitWidth=function(_,b){return B4(y,_,b)},y.fitHeight=function(_,b){return U4(y,_,b)},y}function DW(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}DW.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(kt(i)>et&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Txe(){return Xo(DW).scale(175.295)}function MW(e,t){return[rt(t)*Je(e),Je(t)]}MW.invert=gx(Ki);function kxe(){return Xo(MW).scale(249.5).clipAngle(90+et)}function RW(e,t){var n=rt(t),r=1+rt(e)*n;return[n*Je(e)/r,Je(t)/r]}RW.invert=gx(function(e){return 2*Np(e)});function Cxe(){return Xo(RW).scale(250).clipAngle(142)}function $W(e,t){return[a2($4((An+t)/2)),-e]}$W.invert=function(e,t){return[-t,2*Np(YV(e))-An]};function Fxe(){var e=FW($W),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Oxe(e,t){return e.parent===t.parent?1:2}function Nxe(e){return e.reduce(Dxe,0)/e.length}function Dxe(e,t){return e+t.x}function Mxe(e){return 1+e.reduce(Rxe,0)}function Rxe(e,t){return Math.max(e,t.y)}function $xe(e){for(var t;t=e.children;)e=t[0];return e}function Ixe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Lxe(){var e=Oxe,t=1,n=1,r=!1;function i(s){var a,o=0;s.eachAfter(function(h){var d=h.children;d?(h.x=Nxe(d),h.y=Mxe(d)):(h.x=a?o+=e(h,a):0,h.y=0,a=h)});var l=$xe(s),c=Ixe(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(r?function(h){h.x=(h.x-s.x)*t,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(s.y?h.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Pxe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Bxe(){return this.eachAfter(Pxe)}function Uxe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function zxe(e,t){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Hxe(e,t){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Vxe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Wxe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function jxe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Gxe(e){for(var t=this,n=qxe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function qxe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Xxe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Yxe(){return Array.from(this)}function Kxe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Jxe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Zxe(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function H4(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=tve)):t===void 0&&(t=eve);for(var n=new W0(e),r,i=[n],s,a,o,l;r=i.pop();)if((a=t(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new W0(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(IW)}function Qxe(){return H4(this).eachBefore(nve)}function eve(e){return e.children}function tve(e){return Array.isArray(e)?e[1]:null}function nve(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function IW(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function W0(e){this.data=e,this.depth=this.height=0,this.parent=null}W0.prototype=H4.prototype={constructor:W0,count:Bxe,each:Uxe,eachAfter:Hxe,eachBefore:zxe,find:Vxe,sum:Wxe,sort:jxe,path:Gxe,ancestors:Xxe,descendants:Yxe,leaves:Kxe,links:Jxe,copy:Qxe,[Symbol.iterator]:Zxe};function Jy(e){return e==null?null:LW(e)}function LW(e){if(typeof e!="function")throw new Error;return e}function Of(){return 0}function Bd(e){return function(){return e}}const rve=1664525,ive=1013904223,u5=4294967296;function sve(){let e=1;return()=>(e=(rve*e+ive)%u5)/u5}function ave(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ove(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function lve(e,t){for(var n=0,r=(e=ove(Array.from(e),t)).length,i=[],s,a;n<r;)s=e[n],a&&PW(a,s)?++n:(a=uve(i=cve(i,s)),n=0);return a}function cve(e,t){var n,r;if(TA(t,e))return[t];for(n=0;n<e.length;++n)if(Xv(t,e[n])&&TA(qg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Xv(qg(e[n],e[r]),t)&&Xv(qg(e[n],t),e[r])&&Xv(qg(e[r],t),e[n])&&TA(BW(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Xv(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function PW(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function TA(e,t){for(var n=0;n<t.length;++n)if(!PW(e,t[n]))return!1;return!0}function uve(e){switch(e.length){case 1:return fve(e[0]);case 2:return qg(e[0],e[1]);case 3:return BW(e[0],e[1],e[2])}}function fve(e){return{x:e.x,y:e.y,r:e.r}}function qg(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,a=t.y,o=t.r,l=s-n,c=a-r,u=o-i,f=Math.sqrt(l*l+c*c);return{x:(n+s+l/f*u)/2,y:(r+a+c/f*u)/2,r:(f+i+o)/2}}function BW(e,t,n){var r=e.x,i=e.y,s=e.r,a=t.x,o=t.y,l=t.r,c=n.x,u=n.y,f=n.r,h=r-a,d=r-c,p=i-o,g=i-u,m=l-s,x=f-s,v=r*r+i*i-s*s,y=v-a*a-o*o+l*l,_=v-c*c-u*u+f*f,b=d*p-h*g,w=(p*_-g*y)/(b*2)-r,E=(g*m-p*x)/b,A=(d*y-h*_)/(b*2)-i,S=(h*x-d*m)/b,k=E*E+S*S-1,T=2*(s+w*E+A*S),O=w*w+A*A-s*s,C=-(Math.abs(k)>1e-6?(T+Math.sqrt(T*T-4*k*O))/(2*k):O/T);return{x:r+w+E*C,y:i+A+S*C,r:C}}function f5(e,t,n){var r=e.x-t.x,i,s,a=e.y-t.y,o,l,c=r*r+a*a;c?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(c+l-s)/(2*c),o=Math.sqrt(Math.max(0,l/c-i*i)),n.x=e.x-i*r-o*a,n.y=e.y-i*a+o*r):(i=(c+s-l)/(2*c),o=Math.sqrt(Math.max(0,s/c-i*i)),n.x=t.x+i*r-o*a,n.y=t.y+i*a+o*r)):(n.x=t.x+n.r,n.y=t.y)}function h5(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function d5(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function Yv(e){this._=e,this.next=null,this.previous=null}function hve(e,t){if(!(s=(e=ave(e)).length))return 0;var n,r,i,s,a,o,l,c,u,f,h;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;f5(r,n,i=e[2]),n=new Yv(n),r=new Yv(r),i=new Yv(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){f5(n._,r._,i=e[l]),i=new Yv(i),c=r.next,u=n.previous,f=r._.r,h=n._.r;do if(f<=h){if(h5(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.next}else{if(h5(u._,i._)){n=u,n.next=r,r.previous=n,--l;continue e}h+=u._.r,u=u.previous}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=d5(n);(i=i.next)!==r;)(o=d5(i))<a&&(n=i,a=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=lve(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function dve(e){return Math.sqrt(e.value)}function pve(){var e=null,t=1,n=1,r=Of;function i(s){const a=sve();return s.x=t/2,s.y=n/2,e?s.eachBefore(p5(e)).eachAfter(kA(r,.5,a)).eachBefore(g5(1)):s.eachBefore(p5(dve)).eachAfter(kA(Of,1,a)).eachAfter(kA(r,s.r/Math.min(t,n),a)).eachBefore(g5(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=Jy(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Bd(+s),i):r},i}function p5(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function kA(e,t,n){return function(r){if(i=r.children){var i,s,a=i.length,o=e(r)*t||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=hve(i,n),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function g5(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function UW(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function mx(e,t,n,r,i){for(var s=e.children,a,o=-1,l=s.length,c=e.value&&(r-t)/e.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function gve(){var e=1,t=1,n=0,r=!1;function i(a){var o=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/o,a.eachBefore(s(t,o)),r&&a.eachBefore(UW),a}function s(a,o){return function(l){l.children&&mx(l,l.x0,a*(l.depth+1)/o,l.x1,a*(l.depth+2)/o);var c=l.x0,u=l.y0,f=l.x1-n,h=l.y1-n;f<c&&(c=f=(c+f)/2),h<u&&(u=h=(u+h)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=h}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var mve={depth:-1},m5={},CA={};function xve(e){return e.id}function vve(e){return e.parentId}function x5(){var e=xve,t=vve,n;function r(i){var s=Array.from(i),a=e,o=t,l,c,u,f,h,d,p,g,m=new Map;if(n!=null){const x=s.map((_,b)=>yve(n(_,b,i))),v=x.map(v5),y=new Set(x).add("");for(const _ of v)y.has(_)||(y.add(_),x.push(_),v.push(v5(_)),s.push(CA));a=(_,b)=>x[b],o=(_,b)=>v[b]}for(u=0,l=s.length;u<l;++u)c=s[u],d=s[u]=new W0(c),(p=a(c,u,i))!=null&&(p+="")&&(g=d.id=p,m.set(g,m.has(g)?m5:d)),(p=o(c,u,i))!=null&&(p+="")&&(d.parent=p);for(u=0;u<l;++u)if(d=s[u],p=d.parent){if(h=m.get(p),!h)throw new Error("missing: "+p);if(h===m5)throw new Error("ambiguous: "+p);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===CA&&f.children.length===1;)f=f.children[0],--l;for(let x=s.length-1;x>=0&&(d=s[x],d.data===CA);--x)d.data=null}if(f.parent=mve,f.eachBefore(function(x){x.depth=x.parent.depth+1,--l}).eachBefore(IW),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Jy(i),r):e},r.parentId=function(i){return arguments.length?(t=Jy(i),r):t},r.path=function(i){return arguments.length?(n=Jy(i),r):n},r}function yve(e){e=`${e}`;let t=e.length;return hC(e,t-1)&&!hC(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function v5(e){let t=e.length;if(t<2)return"";for(;--t>1&&!hC(e,t););return e.slice(0,t)}function hC(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function _ve(e,t){return e.parent===t.parent?1:2}function FA(e){var t=e.children;return t?t[0]:e.t}function OA(e){var t=e.children;return t?t[t.length-1]:e.t}function bve(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Eve(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function wve(e,t,n){return e.a.parent===t.parent?e.a:n}function Zy(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Zy.prototype=Object.create(W0.prototype);function Sve(e){for(var t=new Zy(e,0),n,r=[t],i,s,a,o;n=r.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)r.push(i=n.children[a]=new Zy(s[a],a)),i.parent=n;return(t.parent=new Zy(null,0)).children=[t],t}function Ave(){var e=_ve,t=1,n=1,r=null;function i(c){var u=Sve(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(a),r)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(v){v.x<f.x&&(f=v),v.x>h.x&&(h=v),v.depth>d.depth&&(d=v)});var p=f===h?1:e(f,h)/2,g=p-f.x,m=t/(h.x+p+g),x=n/(d.depth||1);c.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*x})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){Eve(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+e(c._,h._));c.parent.A=o(c,h,c.parent.A||f[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,u,f){if(u){for(var h=c,d=c,p=u,g=h.parent.children[0],m=h.m,x=d.m,v=p.m,y=g.m,_;p=OA(p),h=FA(h),p&&h;)g=FA(g),d=OA(d),d.a=c,_=p.z+v-h.z-m+e(p._,h._),_>0&&(bve(wve(p,c,f),c,_),m+=_,x+=_),v+=p.m,m+=h.m,y+=g.m,x+=d.m;p&&!OA(d)&&(d.t=p,d.m+=v-x),h&&!FA(g)&&(g.t=h,g.m+=m-y,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}function kE(e,t,n,r,i){for(var s=e.children,a,o=-1,l=s.length,c=e.value&&(i-n)/e.value;++o<l;)a=s[o],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var zW=(1+Math.sqrt(5))/2;function HW(e,t,n,r,i,s){for(var a=[],o=t.children,l,c,u=0,f=0,h=o.length,d,p,g=t.value,m,x,v,y,_,b,w;u<h;){d=i-n,p=s-r;do m=o[f++].value;while(!m&&f<h);for(x=v=m,b=Math.max(p/d,d/p)/(g*e),w=m*m*b,_=Math.max(v/w,w/x);f<h;++f){if(m+=c=o[f].value,c<x&&(x=c),c>v&&(v=c),w=m*m*b,y=Math.max(v/w,w/x),y>_){m-=c;break}_=y}a.push(l={value:m,dice:d<p,children:o.slice(u,f)}),l.dice?mx(l,n,r,i,g?r+=p*m/g:s):kE(l,n,r,g?n+=d*m/g:i,s),g-=m,u=f}return a}const VW=function e(t){function n(r,i,s,a,o){HW(t,r,i,s,a,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(zW);function Tve(){var e=VW,t=!1,n=1,r=1,i=[0],s=Of,a=Of,o=Of,l=Of,c=Of;function u(h){return h.x0=h.y0=0,h.x1=n,h.y1=r,h.eachBefore(f),i=[0],t&&h.eachBefore(UW),h}function f(h){var d=i[h.depth],p=h.x0+d,g=h.y0+d,m=h.x1-d,x=h.y1-d;m<p&&(p=m=(p+m)/2),x<g&&(g=x=(g+x)/2),h.x0=p,h.y0=g,h.x1=m,h.y1=x,h.children&&(d=i[h.depth+1]=s(h)/2,p+=c(h)-d,g+=a(h)-d,m-=o(h)-d,x-=l(h)-d,m<p&&(p=m=(p+m)/2),x<g&&(g=x=(g+x)/2),e(h,p,g,m,x))}return u.round=function(h){return arguments.length?(t=!!h,u):t},u.size=function(h){return arguments.length?(n=+h[0],r=+h[1],u):[n,r]},u.tile=function(h){return arguments.length?(e=LW(h),u):e},u.padding=function(h){return arguments.length?u.paddingInner(h).paddingOuter(h):u.paddingInner()},u.paddingInner=function(h){return arguments.length?(s=typeof h=="function"?h:Bd(+h),u):s},u.paddingOuter=function(h){return arguments.length?u.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):u.paddingTop()},u.paddingTop=function(h){return arguments.length?(a=typeof h=="function"?h:Bd(+h),u):a},u.paddingRight=function(h){return arguments.length?(o=typeof h=="function"?h:Bd(+h),u):o},u.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Bd(+h),u):l},u.paddingLeft=function(h){return arguments.length?(c=typeof h=="function"?h:Bd(+h),u):c},u}function kve(e,t,n,r,i){var s=e.children,a,o=s.length,l,c=new Array(o+1);for(c[0]=l=a=0;a<o;++a)c[a+1]=l+=s[a].value;u(0,o,e.value,t,n,r,i);function u(f,h,d,p,g,m,x){if(f>=h-1){var v=s[f];v.x0=p,v.y0=g,v.x1=m,v.y1=x;return}for(var y=c[f],_=d/2+y,b=f+1,w=h-1;b<w;){var E=b+w>>>1;c[E]<_?b=E+1:w=E}_-c[b-1]<c[b]-_&&f+1<b&&--b;var A=c[b]-y,S=d-A;if(m-p>x-g){var k=d?(p*S+m*A)/d:m;u(f,b,A,p,g,k,x),u(b,h,S,k,g,m,x)}else{var T=d?(g*S+x*A)/d:x;u(f,b,A,p,g,m,T),u(b,h,S,p,T,m,x)}}}function Cve(e,t,n,r,i){(e.depth&1?kE:mx)(e,t,n,r,i)}const Fve=function e(t){function n(r,i,s,a,o){if((l=r._squarify)&&l.ratio===t)for(var l,c,u,f,h=-1,d,p=l.length,g=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?mx(c,i,s,a,g?s+=(o-s)*c.value/g:o):kE(c,i,s,g?i+=(a-i)*c.value/g:a,o),g-=c.value}else r._squarify=l=HW(t,r,i,s,a,o),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(zW);function Yo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function qu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const dC=Symbol("implicit");function V4(){var e=new i6,t=[],n=[],r=dC;function i(s){let a=e.get(s);if(a===void 0){if(r!==dC)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new i6;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return V4(t,n).unknown(r)},Yo.apply(i,arguments),i}function Ove(e){return function(){return e}}function pC(e){return+e}var y5=[0,1];function ji(e){return e}function gC(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ove(isNaN(t)?NaN:.5)}function Nve(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Dve(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=gC(i,r),s=n(a,s)):(r=gC(r,i),s=n(s,a)),function(o){return s(r(o))}}function Mve(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=gC(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var l=vu(e,o,1,r)-1;return s[l](i[l](o))}}function xx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function CE(){var e=y5,t=y5,n=Ha,r,i,s,a=ji,o,l,c;function u(){var h=Math.min(e.length,t.length);return a!==ji&&(a=Nve(e[0],e[h-1])),o=h>2?Mve:Dve,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=o(e.map(r),t,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=o(t,e.map(r),Ws)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,pC),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=hx,u()},f.clamp=function(h){return arguments.length?(a=h?!0:ji,u()):a!==ji},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,u()}}function WW(){return CE()(ji,ji)}function jW(e,t,n,r){var i=yu(e,t,n),s;switch(r=_h(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=qV(i,a))&&(r.precision=s),R4(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=XV(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=GV(i))&&(r.precision=s-(r.type==="%")*2);break}}return wE(r)}function Yh(e){var t=e.domain;return e.ticks=function(n){var r=t();return Dk(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return jW(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=Mk(a,o,n),c===l)return r[i]=a,r[s]=o,t(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function GW(){var e=WW();return e.copy=function(){return xx(e,GW())},Yo.apply(e,arguments),Yh(e)}function qW(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,pC),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return qW(e).unknown(t)},e=arguments.length?Array.from(e,pC):[0,1],Yh(n)}function XW(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function _5(e){return Math.log(e)}function b5(e){return Math.exp(e)}function Rve(e){return-Math.log(-e)}function $ve(e){return-Math.exp(-e)}function Ive(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Lve(e){return e===10?Ive:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Pve(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function E5(e){return(t,n)=>-e(-t,n)}function W4(e){const t=e(_5,b5),n=t.domain;let r=10,i,s;function a(){return i=Pve(r),s=Lve(r),n()[0]<0?(i=E5(i),s=E5(s),e(Rve,$ve)):e(_5,b5),t}return t.base=function(o){return arguments.length?(r=+o,a()):r},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),d=i(u),p,g;const m=o==null?10:+o;let x=[];if(!(r%1)&&d-h<m){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(p=1;p<r;++p)if(g=h<0?p/s(-h):p*s(h),!(g<c)){if(g>u)break;x.push(g)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(g=h>0?p/s(-h):p*s(h),!(g<c)){if(g>u)break;x.push(g)}x.length*2<m&&(x=Dk(c,u,m))}else x=Dk(h,d,Math.min(d-h,m)).map(s);return f?x.reverse():x},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=_h(l)).precision==null&&(l.trim=!0),l=wE(l)),o===1/0)return l;const c=Math.max(1,r*o/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>n(XW(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function YW(){const e=W4(CE()).domain([1,10]);return e.copy=()=>xx(e,YW()).base(e.base()),Yo.apply(e,arguments),e}function w5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function S5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function j4(e){var t=1,n=e(w5(t),S5(t));return n.constant=function(r){return arguments.length?e(w5(t=+r),S5(t)):t},Yh(n)}function KW(){var e=j4(CE());return e.copy=function(){return xx(e,KW()).constant(e.constant())},Yo.apply(e,arguments)}function A5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Bve(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Uve(e){return e<0?-e*e:e*e}function G4(e){var t=e(ji,ji),n=1;function r(){return n===1?e(ji,ji):n===.5?e(Bve,Uve):e(A5(n),A5(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Yh(t)}function q4(){var e=G4(CE());return e.copy=function(){return xx(e,q4()).exponent(e.exponent())},Yo.apply(e,arguments),e}function zve(){return q4.apply(null,arguments).exponent(.5)}function JW(){var e=[],t=[],n=[],r;function i(){var a=0,o=Math.max(1,t.length);for(n=new Array(o-1);++a<o;)n[a-1]=WH(e,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:t[vu(n,a)]}return s.invertExtent=function(a){var o=t.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let o of a)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(zl),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return JW().domain(e).range(t).unknown(r)},Yo.apply(s,arguments)}function ZW(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[vu(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return ZW().domain([e,t]).range(i).unknown(s)},Yo.apply(Yh(a),arguments)}function QW(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[vu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return QW().domain(e).range(t).unknown(n)},Yo.apply(i,arguments)}const NA=new Date,DA=new Date;function rr(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),t(s,o),e(s);while(c<s&&s<a);return l},i.filter=s=>rr(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),n&&(i.count=(s,a)=>(NA.setTime(+s),DA.setTime(+a),e(NA),e(DA),Math.floor(n(NA,DA))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const j0=rr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);j0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?rr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):j0);j0.range;const Tl=1e3,Js=Tl*60,kl=Js*60,tc=kl*24,X4=tc*7,T5=tc*30,MA=tc*365,Cl=rr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Tl)},(e,t)=>(t-e)/Tl,e=>e.getUTCSeconds());Cl.range;const FE=rr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tl)},(e,t)=>{e.setTime(+e+t*Js)},(e,t)=>(t-e)/Js,e=>e.getMinutes());FE.range;const OE=rr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Js)},(e,t)=>(t-e)/Js,e=>e.getUTCMinutes());OE.range;const NE=rr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tl-e.getMinutes()*Js)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getHours());NE.range;const DE=rr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*kl)},(e,t)=>(t-e)/kl,e=>e.getUTCHours());DE.range;const Vl=rr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Js)/tc,e=>e.getDate()-1);Vl.range;const ru=rr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tc,e=>e.getUTCDate()-1);ru.range;const ej=rr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tc,e=>Math.floor(e/tc));ej.range;function Kh(e){return rr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Js)/X4)}const Dp=Kh(0),C2=Kh(1),Hve=Kh(2),Vve=Kh(3),G0=Kh(4),Wve=Kh(5),jve=Kh(6);Dp.range;C2.range;Hve.range;Vve.range;G0.range;Wve.range;jve.range;function Jh(e){return rr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/X4)}const Mp=Jh(0),F2=Jh(1),Gve=Jh(2),qve=Jh(3),q0=Jh(4),Xve=Jh(5),Yve=Jh(6);Mp.range;F2.range;Gve.range;qve.range;q0.range;Xve.range;Yve.range;const x1=rr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());x1.range;const v1=rr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());v1.range;const Bo=rr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Bo.range;const Uo=rr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Uo.range;function tj(e,t,n,r,i,s){const a=[[Cl,1,Tl],[Cl,5,5*Tl],[Cl,15,15*Tl],[Cl,30,30*Tl],[s,1,Js],[s,5,5*Js],[s,15,15*Js],[s,30,30*Js],[i,1,kl],[i,3,3*kl],[i,6,6*kl],[i,12,12*kl],[r,1,tc],[r,2,2*tc],[n,1,X4],[t,1,T5],[t,3,3*T5],[e,1,MA]];function o(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),p=d?d.range(c,+u+1):[];return h?p.reverse():p}function l(c,u,f){const h=Math.abs(u-c)/f,d=Cp(([,,m])=>m).right(a,h);if(d===a.length)return e.every(yu(c/MA,u/MA,f));if(d===0)return j0.every(Math.max(yu(c,u,f),1));const[p,g]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return p.every(g)}return[o,l]}const[Kve,Jve]=tj(Uo,v1,Mp,ej,DE,OE),[Zve,Qve]=tj(Bo,x1,Dp,Vl,NE,FE);function RA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $A(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function gg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function nj(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=mg(i),u=xg(i),f=mg(s),h=xg(s),d=mg(a),p=xg(a),g=mg(o),m=xg(o),x=mg(l),v=xg(l),y={a:L,A:I,b:Y,B:X,c:null,d:D5,e:D5,f:Eye,g:Dye,G:Rye,H:yye,I:_ye,j:bye,L:rj,m:wye,M:Sye,p:oe,q:xe,Q:$5,s:I5,S:Aye,u:Tye,U:kye,V:Cye,w:Fye,W:Oye,x:null,X:null,y:Nye,Y:Mye,Z:$ye,"%":R5},_={a:_e,A:ve,b:Oe,B:Pe,c:null,d:M5,e:M5,f:Bye,g:Yye,G:Jye,H:Iye,I:Lye,j:Pye,L:sj,m:Uye,M:zye,p:Ge,q:z,Q:$5,s:I5,S:Hye,u:Vye,U:Wye,V:jye,w:Gye,W:qye,x:null,X:null,y:Xye,Y:Kye,Z:Zye,"%":R5},b={a:k,A:T,b:O,B:C,c:D,d:O5,e:O5,f:gye,g:F5,G:C5,H:N5,I:N5,j:fye,L:pye,m:uye,M:hye,p:S,q:cye,Q:xye,s:vye,S:dye,u:iye,U:sye,V:aye,w:rye,W:oye,x:N,X:R,y:F5,Y:C5,Z:lye,"%":mye};y.x=w(n,y),y.X=w(r,y),y.c=w(t,y),_.x=w(n,_),_.X=w(r,_),_.c=w(t,_);function w(q,G){return function(H){var J=[],F=-1,B=0,K=q.length,Z,Q,te;for(H instanceof Date||(H=new Date(+H));++F<K;)q.charCodeAt(F)===37&&(J.push(q.slice(B,F)),(Q=k5[Z=q.charAt(++F)])!=null?Z=q.charAt(++F):Q=Z==="e"?" ":"0",(te=G[Z])&&(Z=te(H,Q)),J.push(Z),B=F+1);return J.push(q.slice(B,F)),J.join("")}}function E(q,G){return function(H){var J=gg(1900,void 0,1),F=A(J,q,H+="",0),B,K;if(F!=H.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(G&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(B=$A(gg(J.y,0,1)),K=B.getUTCDay(),B=K>4||K===0?F2.ceil(B):F2(B),B=ru.offset(B,(J.V-1)*7),J.y=B.getUTCFullYear(),J.m=B.getUTCMonth(),J.d=B.getUTCDate()+(J.w+6)%7):(B=RA(gg(J.y,0,1)),K=B.getDay(),B=K>4||K===0?C2.ceil(B):C2(B),B=Vl.offset(B,(J.V-1)*7),J.y=B.getFullYear(),J.m=B.getMonth(),J.d=B.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),K="Z"in J?$A(gg(J.y,0,1)).getUTCDay():RA(gg(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(K+5)%7:J.w+J.U*7-(K+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,$A(J)):RA(J)}}function A(q,G,H,J){for(var F=0,B=G.length,K=H.length,Z,Q;F<B;){if(J>=K)return-1;if(Z=G.charCodeAt(F++),Z===37){if(Z=G.charAt(F++),Q=b[Z in k5?G.charAt(F++):Z],!Q||(J=Q(q,H,J))<0)return-1}else if(Z!=H.charCodeAt(J++))return-1}return J}function S(q,G,H){var J=c.exec(G.slice(H));return J?(q.p=u.get(J[0].toLowerCase()),H+J[0].length):-1}function k(q,G,H){var J=d.exec(G.slice(H));return J?(q.w=p.get(J[0].toLowerCase()),H+J[0].length):-1}function T(q,G,H){var J=f.exec(G.slice(H));return J?(q.w=h.get(J[0].toLowerCase()),H+J[0].length):-1}function O(q,G,H){var J=x.exec(G.slice(H));return J?(q.m=v.get(J[0].toLowerCase()),H+J[0].length):-1}function C(q,G,H){var J=g.exec(G.slice(H));return J?(q.m=m.get(J[0].toLowerCase()),H+J[0].length):-1}function D(q,G,H){return A(q,t,G,H)}function N(q,G,H){return A(q,n,G,H)}function R(q,G,H){return A(q,r,G,H)}function L(q){return a[q.getDay()]}function I(q){return s[q.getDay()]}function Y(q){return l[q.getMonth()]}function X(q){return o[q.getMonth()]}function oe(q){return i[+(q.getHours()>=12)]}function xe(q){return 1+~~(q.getMonth()/3)}function _e(q){return a[q.getUTCDay()]}function ve(q){return s[q.getUTCDay()]}function Oe(q){return l[q.getUTCMonth()]}function Pe(q){return o[q.getUTCMonth()]}function Ge(q){return i[+(q.getUTCHours()>=12)]}function z(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var G=w(q+="",y);return G.toString=function(){return q},G},parse:function(q){var G=E(q+="",!1);return G.toString=function(){return q},G},utcFormat:function(q){var G=w(q+="",_);return G.toString=function(){return q},G},utcParse:function(q){var G=E(q+="",!0);return G.toString=function(){return q},G}}}var k5={"-":"",_:" ",0:"0"},yr=/^\s*\d+/,eye=/^%/,tye=/[\\^$*+?|[\]().{}]/g;function zt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function nye(e){return e.replace(tye,"\\$&")}function mg(e){return new RegExp("^(?:"+e.map(nye).join("|")+")","i")}function xg(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function rye(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function iye(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function sye(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function aye(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function oye(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function C5(e,t,n){var r=yr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function F5(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lye(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cye(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function uye(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function O5(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function fye(e,t,n){var r=yr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function N5(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function hye(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function dye(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function pye(e,t,n){var r=yr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function gye(e,t,n){var r=yr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mye(e,t,n){var r=eye.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function xye(e,t,n){var r=yr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function vye(e,t,n){var r=yr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function D5(e,t){return zt(e.getDate(),t,2)}function yye(e,t){return zt(e.getHours(),t,2)}function _ye(e,t){return zt(e.getHours()%12||12,t,2)}function bye(e,t){return zt(1+Vl.count(Bo(e),e),t,3)}function rj(e,t){return zt(e.getMilliseconds(),t,3)}function Eye(e,t){return rj(e,t)+"000"}function wye(e,t){return zt(e.getMonth()+1,t,2)}function Sye(e,t){return zt(e.getMinutes(),t,2)}function Aye(e,t){return zt(e.getSeconds(),t,2)}function Tye(e){var t=e.getDay();return t===0?7:t}function kye(e,t){return zt(Dp.count(Bo(e)-1,e),t,2)}function ij(e){var t=e.getDay();return t>=4||t===0?G0(e):G0.ceil(e)}function Cye(e,t){return e=ij(e),zt(G0.count(Bo(e),e)+(Bo(e).getDay()===4),t,2)}function Fye(e){return e.getDay()}function Oye(e,t){return zt(C2.count(Bo(e)-1,e),t,2)}function Nye(e,t){return zt(e.getFullYear()%100,t,2)}function Dye(e,t){return e=ij(e),zt(e.getFullYear()%100,t,2)}function Mye(e,t){return zt(e.getFullYear()%1e4,t,4)}function Rye(e,t){var n=e.getDay();return e=n>=4||n===0?G0(e):G0.ceil(e),zt(e.getFullYear()%1e4,t,4)}function $ye(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+zt(t/60|0,"0",2)+zt(t%60,"0",2)}function M5(e,t){return zt(e.getUTCDate(),t,2)}function Iye(e,t){return zt(e.getUTCHours(),t,2)}function Lye(e,t){return zt(e.getUTCHours()%12||12,t,2)}function Pye(e,t){return zt(1+ru.count(Uo(e),e),t,3)}function sj(e,t){return zt(e.getUTCMilliseconds(),t,3)}function Bye(e,t){return sj(e,t)+"000"}function Uye(e,t){return zt(e.getUTCMonth()+1,t,2)}function zye(e,t){return zt(e.getUTCMinutes(),t,2)}function Hye(e,t){return zt(e.getUTCSeconds(),t,2)}function Vye(e){var t=e.getUTCDay();return t===0?7:t}function Wye(e,t){return zt(Mp.count(Uo(e)-1,e),t,2)}function aj(e){var t=e.getUTCDay();return t>=4||t===0?q0(e):q0.ceil(e)}function jye(e,t){return e=aj(e),zt(q0.count(Uo(e),e)+(Uo(e).getUTCDay()===4),t,2)}function Gye(e){return e.getUTCDay()}function qye(e,t){return zt(F2.count(Uo(e)-1,e),t,2)}function Xye(e,t){return zt(e.getUTCFullYear()%100,t,2)}function Yye(e,t){return e=aj(e),zt(e.getUTCFullYear()%100,t,2)}function Kye(e,t){return zt(e.getUTCFullYear()%1e4,t,4)}function Jye(e,t){var n=e.getUTCDay();return e=n>=4||n===0?q0(e):q0.ceil(e),zt(e.getUTCFullYear()%1e4,t,4)}function Zye(){return"+0000"}function R5(){return"%"}function $5(e){return+e}function I5(e){return Math.floor(+e/1e3)}var wd,Y4,oj,K4,lj;Qye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qye(e){return wd=nj(e),Y4=wd.format,oj=wd.parse,K4=wd.utcFormat,lj=wd.utcParse,wd}function e_e(e){return new Date(e)}function t_e(e){return e instanceof Date?+e:+new Date(+e)}function J4(e,t,n,r,i,s,a,o,l,c){var u=WW(),f=u.invert,h=u.domain,d=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),x=c("%a %d"),v=c("%b %d"),y=c("%B"),_=c("%Y");function b(w){return(l(w)<w?d:o(w)<w?p:a(w)<w?g:s(w)<w?m:r(w)<w?i(w)<w?x:v:n(w)<w?y:_)(w)}return u.invert=function(w){return new Date(f(w))},u.domain=function(w){return arguments.length?h(Array.from(w,t_e)):h().map(e_e)},u.ticks=function(w){var E=h();return e(E[0],E[E.length-1],w??10)},u.tickFormat=function(w,E){return E==null?b:c(E)},u.nice=function(w){var E=h();return(!w||typeof w.range!="function")&&(w=t(E[0],E[E.length-1],w??10)),w?h(XW(E,w)):u},u.copy=function(){return xx(u,J4(e,t,n,r,i,s,a,o,l,c))},u}function n_e(){return Yo.apply(J4(Zve,Qve,Bo,x1,Dp,Vl,NE,FE,Cl,Y4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function r_e(){return Yo.apply(J4(Kve,Jve,Uo,v1,Mp,ru,DE,OE,Cl,K4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ME(){var e=0,t=1,n,r,i,s,a=ji,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(a=f,c):a};function u(f){return function(h){var d,p;return arguments.length?([d,p]=h,a=f(d,p),c):[a(0),a(1)]}}return c.range=u(Ha),c.rangeRound=u(hx),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),c}}function Xu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Z4(){var e=Yh(ME()(ji));return e.copy=function(){return Xu(e,Z4())},qu.apply(e,arguments)}function cj(){var e=W4(ME()).domain([1,10]);return e.copy=function(){return Xu(e,cj()).base(e.base())},qu.apply(e,arguments)}function uj(){var e=j4(ME());return e.copy=function(){return Xu(e,uj()).constant(e.constant())},qu.apply(e,arguments)}function Q4(){var e=G4(ME());return e.copy=function(){return Xu(e,Q4()).exponent(e.exponent())},qu.apply(e,arguments)}function i_e(){return Q4.apply(null,arguments).exponent(.5)}function RE(){var e=0,t=.5,n=1,r=1,i,s,a,o,l,c=ji,u,f=!1,h;function d(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-s)*(r*g<r*s?o:l),c(f?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),s=u(t=+t),a=u(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,d):[e,t,n]},d.clamp=function(g){return arguments.length?(f=!!g,d):f},d.interpolator=function(g){return arguments.length?(c=g,d):c};function p(g){return function(m){var x,v,y;return arguments.length?([x,v,y]=m,c=A4(g,[x,v,y]),d):[c(0),c(.5),c(1)]}}return d.range=p(Ha),d.rangeRound=p(hx),d.unknown=function(g){return arguments.length?(h=g,d):h},function(g){return u=g,i=g(e),s=g(t),a=g(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,d}}function fj(){var e=Yh(RE()(ji));return e.copy=function(){return Xu(e,fj())},qu.apply(e,arguments)}function hj(){var e=W4(RE()).domain([.1,1,10]);return e.copy=function(){return Xu(e,hj()).base(e.base())},qu.apply(e,arguments)}function dj(){var e=j4(RE());return e.copy=function(){return Xu(e,dj()).constant(e.constant())},qu.apply(e,arguments)}function eO(){var e=G4(RE());return e.copy=function(){return Xu(e,eO()).exponent(e.exponent())},qu.apply(e,arguments)}function s_e(){return eO.apply(null,arguments).exponent(.5)}function Ko(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const a_e=Ko("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),o_e=Ko("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),l_e=Ko("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),c_e=Ko("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),u_e=Ko("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),f_e=Ko("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),h_e=Ko("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),d_e=Ko("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),p_e=Ko("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),g_e=Ko("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function yt(e){return function(){return e}}const L5=Math.abs,Pr=Math.atan2,hf=Math.cos,m_e=Math.max,IA=Math.min,uo=Math.sin,Hf=Math.sqrt,Ur=1e-12,X0=Math.PI,O2=X0/2,km=2*X0;function x_e(e){return e>1?0:e<-1?X0:Math.acos(e)}function P5(e){return e>=1?O2:e<=-1?-O2:Math.asin(e)}function $E(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new F4(t)}function v_e(e){return e.innerRadius}function y_e(e){return e.outerRadius}function __e(e){return e.startAngle}function b_e(e){return e.endAngle}function E_e(e){return e&&e.padAngle}function w_e(e,t,n,r,i,s,a,o){var l=n-e,c=r-t,u=a-i,f=o-s,h=f*l-u*c;if(!(h*h<Ur))return h=(u*(t-s)-f*(e-i))/h,[e+h*l,t+h*c]}function Kv(e,t,n,r,i,s,a){var o=e-n,l=t-r,c=(a?s:-s)/Hf(o*o+l*l),u=c*l,f=-c*o,h=e+u,d=t+f,p=n+u,g=r+f,m=(h+p)/2,x=(d+g)/2,v=p-h,y=g-d,_=v*v+y*y,b=i-s,w=h*g-p*d,E=(y<0?-1:1)*Hf(m_e(0,b*b*_-w*w)),A=(w*y-v*E)/_,S=(-w*v-y*E)/_,k=(w*y+v*E)/_,T=(-w*v+y*E)/_,O=A-m,C=S-x,D=k-m,N=T-x;return O*O+C*C>D*D+N*N&&(A=k,S=T),{cx:A,cy:S,x01:-u,y01:-f,x11:A*(i/b-1),y11:S*(i/b-1)}}function mC(){var e=v_e,t=y_e,n=yt(0),r=null,i=__e,s=b_e,a=E_e,o=null,l=$E(c);function c(){var u,f,h=+e.apply(this,arguments),d=+t.apply(this,arguments),p=i.apply(this,arguments)-O2,g=s.apply(this,arguments)-O2,m=L5(g-p),x=g>p;if(o||(o=u=l()),d<h&&(f=d,d=h,h=f),!(d>Ur))o.moveTo(0,0);else if(m>km-Ur)o.moveTo(d*hf(p),d*uo(p)),o.arc(0,0,d,p,g,!x),h>Ur&&(o.moveTo(h*hf(g),h*uo(g)),o.arc(0,0,h,g,p,x));else{var v=p,y=g,_=p,b=g,w=m,E=m,A=a.apply(this,arguments)/2,S=A>Ur&&(r?+r.apply(this,arguments):Hf(h*h+d*d)),k=IA(L5(d-h)/2,+n.apply(this,arguments)),T=k,O=k,C,D;if(S>Ur){var N=P5(S/h*uo(A)),R=P5(S/d*uo(A));(w-=N*2)>Ur?(N*=x?1:-1,_+=N,b-=N):(w=0,_=b=(p+g)/2),(E-=R*2)>Ur?(R*=x?1:-1,v+=R,y-=R):(E=0,v=y=(p+g)/2)}var L=d*hf(v),I=d*uo(v),Y=h*hf(b),X=h*uo(b);if(k>Ur){var oe=d*hf(y),xe=d*uo(y),_e=h*hf(_),ve=h*uo(_),Oe;if(m<X0)if(Oe=w_e(L,I,_e,ve,oe,xe,Y,X)){var Pe=L-Oe[0],Ge=I-Oe[1],z=oe-Oe[0],q=xe-Oe[1],G=1/uo(x_e((Pe*z+Ge*q)/(Hf(Pe*Pe+Ge*Ge)*Hf(z*z+q*q)))/2),H=Hf(Oe[0]*Oe[0]+Oe[1]*Oe[1]);T=IA(k,(h-H)/(G-1)),O=IA(k,(d-H)/(G+1))}else T=O=0}E>Ur?O>Ur?(C=Kv(_e,ve,L,I,d,O,x),D=Kv(oe,xe,Y,X,d,O,x),o.moveTo(C.cx+C.x01,C.cy+C.y01),O<k?o.arc(C.cx,C.cy,O,Pr(C.y01,C.x01),Pr(D.y01,D.x01),!x):(o.arc(C.cx,C.cy,O,Pr(C.y01,C.x01),Pr(C.y11,C.x11),!x),o.arc(0,0,d,Pr(C.cy+C.y11,C.cx+C.x11),Pr(D.cy+D.y11,D.cx+D.x11),!x),o.arc(D.cx,D.cy,O,Pr(D.y11,D.x11),Pr(D.y01,D.x01),!x))):(o.moveTo(L,I),o.arc(0,0,d,v,y,!x)):o.moveTo(L,I),!(h>Ur)||!(w>Ur)?o.lineTo(Y,X):T>Ur?(C=Kv(Y,X,oe,xe,h,-T,x),D=Kv(L,I,_e,ve,h,-T,x),o.lineTo(C.cx+C.x01,C.cy+C.y01),T<k?o.arc(C.cx,C.cy,T,Pr(C.y01,C.x01),Pr(D.y01,D.x01),!x):(o.arc(C.cx,C.cy,T,Pr(C.y01,C.x01),Pr(C.y11,C.x11),!x),o.arc(0,0,h,Pr(C.cy+C.y11,C.cx+C.x11),Pr(D.cy+D.y11,D.cx+D.x11),x),o.arc(D.cx,D.cy,T,Pr(D.y11,D.x11),Pr(D.y01,D.x01),!x))):o.arc(0,0,h,b,_,x)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-X0/2;return[hf(f)*u,uo(f)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:yt(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:yt(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:yt(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:yt(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:yt(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:yt(+u),c):s},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:yt(+u),c):a},c.context=function(u){return arguments.length?(o=u??null,c):o},c}function tO(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pj(e){this._context=e}pj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function nO(e){return new pj(e)}function gj(e){return e[0]}function mj(e){return e[1]}function xj(e,t){var n=yt(!0),r=null,i=nO,s=null,a=$E(o);e=typeof e=="function"?e:e===void 0?gj:yt(e),t=typeof t=="function"?t:t===void 0?mj:yt(t);function o(l){var c,u=(l=tO(l)).length,f,h=!1,d;for(r==null&&(s=i(d=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,c,l),+t(f,c,l));if(d)return s=null,d+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:yt(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:yt(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:yt(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function vj(e,t,n){var r=null,i=yt(!0),s=null,a=nO,o=null,l=$E(c);e=typeof e=="function"?e:e===void 0?gj:yt(+e),t=typeof t=="function"?t:yt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?mj:yt(+n);function c(f){var h,d,p,g=(f=tO(f)).length,m,x=!1,v,y=new Array(g),_=new Array(g);for(s==null&&(o=a(v=l())),h=0;h<=g;++h){if(!(h<g&&i(m=f[h],h,f))===x)if(x=!x)d=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=d;--p)o.point(y[p],_[p]);o.lineEnd(),o.areaEnd()}x&&(y[h]=+e(m,h,f),_[h]=+t(m,h,f),o.point(r?+r(m,h,f):y[h],n?+n(m,h,f):_[h]))}if(v)return o=null,v+""||null}function u(){return xj().defined(i).curve(a).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:yt(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yt(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yt(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:yt(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yt(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yt(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yt(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),c):a},c.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),c):s},c}function S_e(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function A_e(e){return e}function T_e(){var e=A_e,t=S_e,n=null,r=yt(0),i=yt(km),s=yt(0);function a(o){var l,c=(o=tO(o)).length,u,f,h=0,d=new Array(c),p=new Array(c),g=+r.apply(this,arguments),m=Math.min(km,Math.max(-km,i.apply(this,arguments)-g)),x,v=Math.min(Math.abs(m)/c,s.apply(this,arguments)),y=v*(m<0?-1:1),_;for(l=0;l<c;++l)(_=p[d[l]=l]=+e(o[l],l,o))>0&&(h+=_);for(t!=null?d.sort(function(b,w){return t(p[b],p[w])}):n!=null&&d.sort(function(b,w){return n(o[b],o[w])}),l=0,f=h?(m-c*y)/h:0;l<c;++l,g=x)u=d[l],_=p[u],x=g+(_>0?_*f:0)+y,p[u]={data:o[u],index:l,value:_,startAngle:g,endAngle:x,padAngle:v};return p}return a.value=function(o){return arguments.length?(e=typeof o=="function"?o:yt(+o),a):e},a.sortValues=function(o){return arguments.length?(t=o,n=null,a):t},a.sort=function(o){return arguments.length?(n=o,t=null,a):n},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:yt(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:yt(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:yt(+o),a):s},a}const k_e={draw(e,t){const n=Hf(t/X0);e.moveTo(n,0),e.arc(0,0,n,0,km)}};function C_e(e,t){let n=null,r=$E(i);e=typeof e=="function"?e:yt(e||k_e),t=typeof t=="function"?t:yt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:yt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:yt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function bu(){}function N2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function IE(e){this._context=e}IE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:N2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:N2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function F_e(e){return new IE(e)}function yj(e){this._context=e}yj.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:N2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function O_e(e){return new yj(e)}function _j(e){this._context=e}_j.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:N2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function N_e(e){return new _j(e)}function bj(e,t){this._basis=new IE(e),this._beta=t}bj.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,a=t[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(r+l*s),this._beta*t[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const D_e=function e(t){function n(r){return t===1?new IE(r):new bj(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function D2(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function rO(e,t){this._context=e,this._k=(1-t)/6}rO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:D2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:D2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const M_e=function e(t){function n(r){return new rO(r,t)}return n.tension=function(r){return e(+r)},n}(0);function iO(e,t){this._context=e,this._k=(1-t)/6}iO.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:D2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R_e=function e(t){function n(r){return new iO(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sO(e,t){this._context=e,this._k=(1-t)/6}sO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:D2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $_e=function e(t){function n(r){return new sO(r,t)}return n.tension=function(r){return e(+r)},n}(0);function aO(e,t,n){var r=e._x1,i=e._y1,s=e._x2,a=e._y2;if(e._l01_a>Ur){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Ur){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,a,e._x2,e._y2)}function Ej(e,t){this._context=e,this._alpha=t}Ej.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:aO(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const I_e=function e(t){function n(r){return t?new Ej(r,t):new rO(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function wj(e,t){this._context=e,this._alpha=t}wj.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:aO(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const L_e=function e(t){function n(r){return t?new wj(r,t):new iO(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Sj(e,t){this._context=e,this._alpha=t}Sj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:aO(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P_e=function e(t){function n(r){return t?new Sj(r,t):new sO(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Aj(e){this._context=e}Aj.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function B_e(e){return new Aj(e)}function B5(e){return e<0?-1:1}function U5(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(B5(s)+B5(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function z5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function LA(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function M2(e){this._context=e}M2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:LA(this,this._t0,z5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,LA(this,z5(this,n=U5(this,e,t)),n);break;default:LA(this,this._t0,n=U5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Tj(e){this._context=new kj(e)}(Tj.prototype=Object.create(M2.prototype)).point=function(e,t){M2.prototype.point.call(this,t,e)};function kj(e){this._context=e}kj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function U_e(e){return new M2(e)}function z_e(e){return new Tj(e)}function Cj(e){this._context=e}Cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=H5(e),i=H5(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function H5(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function H_e(e){return new Cj(e)}function LE(e,t){this._context=e,this._t=t}LE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function V_e(e){return new LE(e,.5)}function W_e(e){return new LE(e,0)}function j_e(e){return new LE(e,1)}function Xg(e,t,n){this.k=e,this.x=t,this.y=n}Xg.prototype={constructor:Xg,scale:function(e){return e===1?this:new Xg(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Xg(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Xg.prototype;const Rp=ple("cartogram",()=>{const e=zn(0),t=zn(""),n=zn(""),r=zn(""),i=zn({}),s=zn({showGrid:!0,showBase:window.innerWidth>768}),a=tu(()=>e.value<100);return{loadingProgress:e,currentMapName:t,currentVersionName:n,stringKey:r,versions:i,options:s,isLoading:a}}),G_e={key:0,class:"d-flex p-2",style:{"max-width":"30%"}},q_e=["disabled"],X_e=["value"],Y_e=["href"],K_e=se("i",{class:"fas fa-file-download"},null,-1),J_e=[K_e],Z_e=3,Q_e=vr({__name:"CMenuSelectMap",props:{isEmbed:{type:Boolean},maps:{}},emits:["map_changed"],setup(e,{emit:t}){const n=Rp(),r=e,i=t;let s;Hu(async()=>{new URLSearchParams(window.location.search),s=null,a()});async function a(){var o=s||(n.stringKey?"/static/userdata/"+n.stringKey+"/data.csv":"/static/cartdata/"+n.currentMapName+"/data.csv");let l=await $me(o);n.versions={};for(let c=Z_e;c<l.columns.length;c++){let u=l.columns[c].match(/\(([^)]+)\)$/),f=u?u[1].trim():"",h=l.columns[c].replace("("+f+")","").trim();n.versions[c.toString()]={key:c.toString(),header:l.columns[c],name:h,unit:f}}n.currentVersionName=(l.columns.length-1).toString(),n.loadingProgress=100,i("map_changed",l)}return(o,l)=>r.isEmbed?Cr("",!0):(je(),Qe("div",G_e,[E0(se("select",{class:"form-select","onUpdate:modelValue":l[0]||(l[0]=c=>Wt(n).currentMapName=c),onChange:a,disabled:Wt(n).stringKey.length>0},[(je(!0),Qe(qt,null,Il(r.maps,(c,u)=>(je(),Qe("option",{value:u},Ua(c.name),9,X_e))),256))],40,q_e),[[O3,Wt(n).currentMapName]]),se("a",{class:"btn btn-primary ms-2",title:"Download template",href:"/static/cartdata/"+Wt(n).currentMapName+"/data.csv"},J_e,8,Y_e)]))}}),e2e={class:"btn-group d-flex flex-shrink-1 p-2",style:{"min-width":"40px"},role:"group","aria-label":"Data"},t2e=["disabled"],n2e=se("i",{class:"fas fa-play"},null,-1),r2e=[n2e],i2e=["onClick"],s2e={key:0,class:"fas fa-check"},a2e=vr({__name:"CMenuSelectVersion",props:{versions:{},currentVersionName:{}},emits:["version_changed"],setup(e,{emit:t}){const n=e,r=t,i=rs({isPlaying:!1});function s(){i.isPlaying=!0;let a=Object.keys(n.versions),o=0;r("version_changed",a[o++]);let l=setInterval(function(){r("version_changed",a[o++]),o>=a.length&&(clearInterval(l),i.isPlaying=!1)},1e3)}return(a,o)=>(je(),Qe("div",e2e,[Object.keys(n.versions).length>2?(je(),Qe("button",{key:0,class:"btn btn-primary",onClick:o[0]||(o[0]=l=>s()),disabled:i.isPlaying},r2e,8,t2e)):Cr("",!0),(je(!0),Qe(qt,null,Il(n.versions,(l,c)=>(je(),Qe("button",{type:"button",class:Bu(["btn btn-outline-primary version",{active:n.currentVersionName===c.toString()}]),onClick:()=>{r("version_changed",c.toString())}},[Co(Ua(l.name)+" ",1),n.versions.length===2&&n.currentVersionName===c.toString()?(je(),Qe("i",s2e)):Cr("",!0)],10,i2e))),256))]))}});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var qs=1200,Ud,o2e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],oO={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},lO=function(e){o2e.indexOf(e)!=-1&&(oO[0]=e)};function l2e(){lO(1252)}var Ra=function(e){qs=e,lO(e)};function Fj(){Ra(1200),l2e()}function V5(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e.charCodeAt(n);return t}function Oj(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}function c2e(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e[2*n]+(e[2*n+1]<<8));return t.join("")}function Nj(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var Yg=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return t==255&&n==254?Oj(e.slice(2)):t==254&&n==255?Nj(e.slice(2)):t==65279?e.slice(1):e},Jv=function(t){return String.fromCharCode(t)},W5=function(t){return String.fromCharCode(t)},u2e=null,Vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function j5(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0,l=0,c=0;c<e.length;)n=e.charCodeAt(c++),s=n>>2,r=e.charCodeAt(c++),a=(n&3)<<4|r>>4,i=e.charCodeAt(c++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),t+=Vc.charAt(s)+Vc.charAt(a)+Vc.charAt(o)+Vc.charAt(l);return t}function Cs(e){var t="",n=0,r=0,i=0,s=0,a=0,o=0,l=0;if(e.slice(0,5)=="data:"){var c=e.slice(0,1024).indexOf(";base64,");c>-1&&(e=e.slice(c+8))}e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)s=Vc.indexOf(e.charAt(c++)),a=Vc.indexOf(e.charAt(c++)),n=s<<2|a>>4,t+=String.fromCharCode(n),o=Vc.indexOf(e.charAt(c++)),r=(a&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(r)),l=Vc.indexOf(e.charAt(c++)),i=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(i));return t}var _t=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Yu=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,n){return n?new Buffer(t,n):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}(),y1=function(){if(typeof Buffer>"u")return!1;var e=Yu([65,0]);if(!e)return!1;var t=e.toString("utf16le");return t.length==1}();function Eu(e){return _t?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function G5(e){return _t?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var ds=function(t){return _t?Yu(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)&255})};function nc(e){if(Array.isArray(e))return e.map(function(r){return String.fromCharCode(r)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function cO(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return cO(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var Uc=_t?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Yu(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)i=e[t].length,e[t]instanceof Uint8Array?r.set(e[t],n):typeof e[t]=="string"?r.set(new Uint8Array(ds(e[t])),n):r.set(new Uint8Array(e[t]),n);return r}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function f2e(e){for(var t=[],n=0,r=e.length+250,i=Eu(e.length+255),s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a<128)i[n++]=a;else if(a<2048)i[n++]=192|a>>6&31,i[n++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=e.charCodeAt(++s)&1023;i[n++]=240|a>>8&7,i[n++]=128|a>>2&63,i[n++]=128|o>>6&15|(a&3)<<4,i[n++]=128|o&63}else i[n++]=224|a>>12&15,i[n++]=128|a>>6&63,i[n++]=128|a&63;n>r&&(t.push(i.slice(0,n)),n=0,i=Eu(65535),r=65530)}return t.push(i.slice(0,n)),Uc(t)}var Gi=/\u0000/g,Kg=/[\u0001-\u0006]/g;function u0(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function $a(e,t){var n=""+e;return n.length>=t?n:At("0",t-n.length)+n}function uO(e,t){var n=""+e;return n.length>=t?n:At(" ",t-n.length)+n}function R2(e,t){var n=""+e;return n.length>=t?n:n+At(" ",t-n.length)}function h2e(e,t){var n=""+Math.round(e);return n.length>=t?n:At("0",t-n.length)+n}function d2e(e,t){var n=""+e;return n.length>=t?n:At("0",t-n.length)+n}var q5=Math.pow(2,32);function Sd(e,t){if(e>q5||e<-q5)return h2e(e,t);var n=Math.round(e);return d2e(n,t)}function $2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var X5=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],PA=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function p2e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var st={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Y5={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},g2e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function I2(e,t,n){for(var r=e<0?-1:1,i=e*r,s=0,a=1,o=0,l=1,c=0,u=0,f=Math.floor(i);c<t&&(f=Math.floor(i),o=f*a+s,u=f*c+l,!(i-f<5e-8));)i=1/(i-f),s=a,a=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=s):(u=c,o=a)),!n)return[0,r*o,u];var h=Math.floor(r*o/u);return[h,r*o-h*u,u]}function m2e(e){var t=e.toPrecision(16);if(t.indexOf("e")>-1){var n=t.slice(0,t.indexOf("e"));return n=n.indexOf(".")>-1?n.slice(0,n.slice(0,2)=="0."?17:16):n.slice(0,15)+At("0",n.length-15),n+t.slice(t.indexOf("e"))}var r=t.indexOf(".")>-1?t.slice(0,t.slice(0,2)=="0."?17:16):t.slice(0,15)+At("0",t.length-15);return Number(r)}function _l(e,t,n){if(e>2958465||e<0)return null;e=m2e(e);var r=e|0,i=Math.floor(86400*(e-r)),s=0,a=[],o={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=_2e(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}function fO(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function x2e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function v2e(e){var t=e<0?12:11,n=fO(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10),n.length<=t)?n:e.toExponential(5)}function y2e(e){var t=fO(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function _1(e){if(!isFinite(e))return isNaN(e)?"#NUM!":"#DIV/0!";var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),n;return t>=-4&&t<=-1?n=e.toPrecision(10+t):Math.abs(t)<=9?n=v2e(e):t===10?n=e.toFixed(10).substr(0,12):n=y2e(e),fO(x2e(n.toUpperCase()))}function wh(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):_1(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Fs(14,nr(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function _2e(e,t){t[0]-=581;var n=e.getDay();return e<60&&(n=(n+6)%7),n}function b2e(e,t,n,r){var i="",s=0,a=0,o=n.y,l,c=0;switch(e){case 98:o=n.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=n.m,c=t.length;break;case 3:return PA[n.m-1][1];case 5:return PA[n.m-1][0];default:return PA[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=n.d,c=t.length;break;case 3:return X5[n.q][0];default:return X5[n.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return n.u===0&&(t=="s"||t=="ss")?$a(n.S,t.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(n.S+n.u)),s>=60*a&&(s=0),t==="s"?s===0?"0":""+s/a:(i=$a(s,2+r),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+(r==0?Math.round(n.S+n.u):n.S);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?$a(l,c):"";return u}function Fl(e){var t=3;if(e.length<=t)return e;for(var n=e.length%t,r=e.substr(0,n);n!=e.length;n+=t)r+=(r.length>0?",":"")+e.substr(n,t);return r}var Dj=/%/g;function E2e(e,t,n){var r=t.replace(Dj,""),i=t.length-r.length;return Wl(e,r,n*Math.pow(10,2*i))+At("%",i)}function w2e(e,t,n){for(var r=t.length-1;t.charCodeAt(r-1)===44;)--r;return Wl(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}function Mj(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Mj(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var a=Math.floor(Math.log(t)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var Rj=/# (\?+)( ?)\/( ?)(\d+)/;function S2e(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),s=Math.floor(i/r),a=i-s*r,o=r;return n+(s===0?"":""+s)+" "+(a===0?At(" ",e[1].length+1+e[4].length):uO(a,e[1].length)+e[2]+"/"+e[3]+$a(o,e[4].length))}function A2e(e,t,n){return n+(t===0?"":""+t)+At(" ",e[1].length+2+e[4].length)}var $j=/^#*0*\.([0#]+)/,Ij=/\)[^)]*[0#]/,Lj=/\(###\) ###\\?-####/;function pi(e){for(var t="",n,r=0;r!=e.length;++r)switch(n=e.charCodeAt(r)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(n)}return t}function K5(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function J5(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function T2e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function k2e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Hs(e,t,n){if(e.charCodeAt(0)===40&&!t.match(Ij)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Hs("n",r,n):"("+Hs("n",r,-n)+")"}if(t.charCodeAt(t.length-1)===44)return w2e(e,t,n);if(t.indexOf("%")!==-1)return E2e(e,t,n);if(t.indexOf("E")!==-1)return Mj(t,n);if(t.charCodeAt(0)===36)return"$"+Hs(e,t.substr(t.charAt(1)==" "?2:1),n);var i,s,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Sd(l,t.length);if(t.match(/^[#?]+$/))return i=Sd(n,0),i==="0"&&(i=""),i.length>t.length?i:pi(t.substr(0,t.length-i.length))+i;if(s=t.match(Rj))return S2e(s,l,c);if(t.match(/^#+0+$/))return c+Sd(l,t.length-t.indexOf("0"));if(s=t.match($j))return i=K5(n,s[1].length).replace(/^([^\.]+)$/,"$1."+pi(s[1])).replace(/\.$/,"."+pi(s[1])).replace(/\.(\d*)$/,function(p,g){return"."+g+At("0",pi(s[1]).length-g.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+K5(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Fl(Sd(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Hs(e,t,-n):Fl(""+(Math.floor(n)+T2e(n,s[1].length)))+"."+$a(J5(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Hs(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=u0(Hs(e,t.replace(/[\\-]/g,""),n)),a=0,u0(u0(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return a<i.length?i.charAt(a++):p==="0"?"0":""}));if(t.match(Lj))return i=Hs(e,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=I2(l,Math.pow(10,a)-1,!1),i=""+c,u=Wl("n",s[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=R2(o[2],a),u.length<s[4].length&&(u=pi(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=I2(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?uO(o[1],a)+s[2]+"/"+s[3]+R2(o[2],a):At(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=Sd(n,0),t.length<=i.length?i:pi(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=t.indexOf(".")-a,h=t.length-i.length-f;return pi(t.substr(0,f)+i+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return a=J5(n,s[1].length),n<0?"-"+Hs(e,t,-n):Fl(k2e(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?$a(0,3-p.length):"")+p})+"."+$a(a,s[1].length);switch(t){case"###,##0.00":return Hs(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var d=Fl(Sd(l,0));return d!=="0"?c+d:"";case"###,###.00":return Hs(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Hs(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function C2e(e,t,n){for(var r=t.length-1;t.charCodeAt(r-1)===44;)--r;return Wl(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}function F2e(e,t,n){var r=t.replace(Dj,""),i=t.length-r.length;return Wl(e,r,n*Math.pow(10,2*i))+At("%",i)}function Pj(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Pj(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function po(e,t,n){if(e.charCodeAt(0)===40&&!t.match(Ij)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?po("n",r,n):"("+po("n",r,-n)+")"}if(t.charCodeAt(t.length-1)===44)return C2e(e,t,n);if(t.indexOf("%")!==-1)return F2e(e,t,n);if(t.indexOf("E")!==-1)return Pj(t,n);if(t.charCodeAt(0)===36)return"$"+po(e,t.substr(t.charAt(1)==" "?2:1),n);var i,s,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+$a(l,t.length);if(t.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>t.length?i:pi(t.substr(0,t.length-i.length))+i;if(s=t.match(Rj))return A2e(s,l,c);if(t.match(/^#+0+$/))return c+$a(l,t.length-t.indexOf("0"));if(s=t.match($j))return i=(""+n).replace(/^([^\.]+)$/,"$1."+pi(s[1])).replace(/\.$/,"."+pi(s[1])),i=i.replace(/\.(\d*)$/,function(p,g){return"."+g+At("0",pi(s[1]).length-g.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Fl(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+po(e,t,-n):Fl(""+n)+"."+At("0",s[1].length);if(s=t.match(/^#,#*,#0/))return po(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=u0(po(e,t.replace(/[\\-]/g,""),n)),a=0,u0(u0(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return a<i.length?i.charAt(a++):p==="0"?"0":""}));if(t.match(Lj))return i=po(e,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=I2(l,Math.pow(10,a)-1,!1),i=""+c,u=Wl("n",s[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=R2(o[2],a),u.length<s[4].length&&(u=pi(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=I2(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?uO(o[1],a)+s[2]+"/"+s[3]+R2(o[2],a):At(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:pi(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=t.indexOf(".")-a,h=t.length-i.length-f;return pi(t.substr(0,f)+i+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+po(e,t,-n):Fl(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?$a(0,3-p.length):"")+p})+"."+$a(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var d=Fl(""+l);return d!=="0"?c+d:"";default:if(t.match(/\.[0#?]*$/))return po(e,t.slice(0,t.lastIndexOf(".")),n)+pi(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Wl(e,t,n){return(n|0)===n?po(e,t,n):Hs(e,t,n)}function O2e(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),n===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Bj=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ja(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":$2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(r=n;e.charAt(t++)!=="]"&&t<e.length;)r+=e.charAt(t);if(r.match(Bj))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||n=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function N2e(e,t,n,r){for(var i=[],s="",a=0,o="",l="t",c,u,f,h="H";a<e.length;)switch(o=e.charAt(a)){case"G":if(!$2(e,a))throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(f=e.charCodeAt(++a))!==34&&a<e.length;)s+=String.fromCharCode(f);i[i.length]={t:"t",v:s},++a;break;case"\\":var d=e.charAt(++a),p=d==="("||d===")"?d:"t";i[i.length]={t:p,v:d},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:t},++a;break;case"B":case"b":if(e.charAt(a+1)==="1"||e.charAt(a+1)==="2"){if(c==null&&(c=_l(t,n,e.charAt(a+1)==="2"),c==null))return"";i[i.length]={t:"X",v:e.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=_l(t,n),c==null))return"";for(s=o;++a<e.length&&e.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var g={t:o,v:o};if(c==null&&(c=_l(t,n)),e.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?e.charAt(a+2):o),g.t="T",h="h",a+=3):e.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",a+=5,h="h"):e.substr(a,5).toUpperCase()==="/"?(c!=null&&(g.v=c.H>=12?"":""),g.t="T",a+=5,h="h"):(g.t="t",++a),c==null&&g.t==="T")return"";i[i.length]=g,l=o;break;case"[":for(s=o;e.charAt(a++)!=="]"&&a<e.length;)s+=e.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Bj)){if(c==null&&(c=_l(t,n),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",ja(e)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=o;++a<e.length&&(o=e.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(e.charAt(a)==" "||e.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<e.length&&"0123456789".indexOf(e.charAt(++a))>-1;)s+=e.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"t",v:o},++a;break}var m=0,x=0,v;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=h,l="h",m<1&&(m=1);break;case"s":(v=i[a].v.match(/\.0+$/))&&(x=Math.max(x,v[0].length-1),m=4),m<3&&(m=3);case"d":case"y":case"e":l=i[a].t;break;case"M":l=i[a].t,m<2&&(m=2);break;case"m":l==="s"&&(i[a].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&i[a].v.match(/[Hh]/)&&(m=1),m<2&&i[a].v.match(/[Mm]/)&&(m=2),m<3&&i[a].v.match(/[Ss]/)&&(m=3)}var y;switch(m){case 0:break;case 1:case 2:case 3:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H),c.H>=24&&(c.H=0,++c.D,y=_l(c.D),y.u=c.u,y.S=c.S,y.M=c.M,y.H=c.H,c=y);break;case 4:switch(x){case 1:c.u=Math.round(c.u*10)/10;break;case 2:c.u=Math.round(c.u*100)/100;break;case 3:c.u=Math.round(c.u*1e3)/1e3;break}c.u>=1&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H),c.H>=24&&(c.H=0,++c.D,y=_l(c.D),y.u=c.u,y.S=c.S,y.M=c.M,y.H=c.H,c=y);break}var _="",b;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=b2e(i[a].t.charCodeAt(0),i[a].v,c,x),i[a].t="t";break;case"n":case"?":for(b=a+1;i[b]!=null&&((o=i[b].t)==="?"||o==="D"||(o===" "||o==="t")&&i[b+1]!=null&&(i[b+1].t==="?"||i[b+1].t==="t"&&i[b+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[b].v==="/"||i[b].v===" "&&i[b+1]!=null&&i[b+1].t=="?"));)i[a].v+=i[b].v,i[b]={v:"",t:";"},++b;_+=i[a].v,a=b-1;break;case"G":i[a].t="t",i[a].v=wh(t,n);break}var w="",E,A;if(_.length>0){_.charCodeAt(0)==40?(E=t<0&&_.charCodeAt(0)===45?-t:t,A=Wl("n",_,E)):(E=t<0&&r>1?-t:t,A=Wl("n",_,E),E<0&&i[0]&&i[0].t=="t"&&(A=A.substr(1),i[0].v="-"+i[0].v)),b=A.length-1;var S=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){S=a;break}var k=i.length;if(S===i.length&&A.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(b>=i[a].v.length-1?(b-=i[a].v.length,i[a].v=A.substr(b+1,i[a].v.length)):b<0?i[a].v="":(i[a].v=A.substr(0,b+1),b=-1),i[a].t="t",k=a);b>=0&&k<i.length&&(i[k].v=A.substr(0,b+1)+i[k].v)}else if(S!==i.length&&A.indexOf("E")===-1){for(b=A.indexOf(".")-1,a=S;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(u=i[a].v.indexOf(".")>-1&&a===S?i[a].v.indexOf(".")-1:i[a].v.length-1,w=i[a].v.substr(u+1);u>=0;--u)b>=0&&(i[a].v.charAt(u)==="0"||i[a].v.charAt(u)==="#")&&(w=A.charAt(b--)+w);i[a].v=w,i[a].t="t",k=a}for(b>=0&&k<i.length&&(i[k].v=A.substr(0,b+1)+i[k].v),b=A.indexOf(".")+1,a=S;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==S)){for(u=i[a].v.indexOf(".")>-1&&a===S?i[a].v.indexOf(".")+1:0,w=i[a].v.substr(0,u);u<i[a].v.length;++u)b<A.length&&(w+=A.charAt(b++));i[a].v=w,i[a].t="t",k=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(E=r>1&&t<0&&a>0&&i[a-1].v==="-"?-t:t,i[a].v=Wl(i[a].t,i[a].v,E),i[a].t="t");var T="";for(a=0;a!==i.length;++a)i[a]!=null&&(T+=i[a].v);return T}var Z5=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Q5(e,t){if(t==null)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0;break}return!1}function D2e(e,t){var n=O2e(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof t!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(typeof t=="number"&&!isFinite(t)&&(t=0),n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=t>0?n[0]:t<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var a=n[0].match(Z5),o=n[1].match(Z5);return Q5(t,a)?[r,n[0]]:Q5(t,o)?[r,n[1]]:[r,n[a!=null&&o!=null?2:1]]}return[r,s]}function Fs(e,t,n){n==null&&(n={});var r="";switch(typeof e){case"string":e=="m/d/yy"&&n.dateNF?r=n.dateNF:r=e;break;case"number":e==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:st)[e],r==null&&(r=n.table&&n.table[Y5[e]]||st[Y5[e]]),r==null&&(r=g2e[e]||"General");break}if($2(r,0))return wh(t,n);t instanceof Date&&(t=nr(t,n.date1904));var i=D2e(r,t);if($2(i[1]))return wh(t,n);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else{if(t===""||t==null)return"";if(isNaN(t)&&i[1].indexOf("0")>-1)return"#NUM!";if(!isFinite(t)&&i[1].indexOf("0")>-1)return"#DIV/0!"}return N2e(i[1],t,n,i[0])}function M2e(e,t){if(typeof t!="number"){t=+t||-1;for(var n=0;n<392;++n){if(st[n]==null){t<0&&(t=n);continue}if(st[n]==e){t=n;break}}t<0&&(t=391)}return st[t]=e,t}function Uj(){st=p2e()}var R2e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},L2=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function $2e(e){var t=typeof e=="number"?st[e]:e;return t=t.replace(L2,"(\\d+)"),L2.lastIndex=0,new RegExp("^"+t+"$")}function I2e(e,t,n){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(t.match(L2)||[]).forEach(function(f,h){var d=parseInt(n[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=d;break;case"d":s=d;break;case"h":a=d;break;case"s":l=d;break;case"m":a>=0?o=d:i=d;break}}),L2.lastIndex=0,l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var L2e={"d.m":"d\\.m"};function eh(e,t){return M2e(L2e[e]||e,t)}var e8=function(){var e={};e.version="1.2.0";function t(){for(var E=0,A=new Array(256),S=0;S!=256;++S)E=S,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,A[S]=E;return typeof Int32Array<"u"?new Int32Array(A):A}var n=t();function r(E){var A=0,S=0,k=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(k=0;k!=256;++k)T[k]=E[k];for(k=0;k!=256;++k)for(S=E[k],A=256+k;A<4096;A+=256)S=T[A]=S>>>8^E[S&255];var O=[];for(k=1;k!=16;++k)O[k-1]=typeof Int32Array<"u"&&typeof T.subarray=="function"?T.subarray(k*256,k*256+256):T.slice(k*256,k*256+256);return O}var i=r(n),s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],f=i[6],h=i[7],d=i[8],p=i[9],g=i[10],m=i[11],x=i[12],v=i[13],y=i[14];function _(E,A){for(var S=A^-1,k=0,T=E.length;k<T;)S=S>>>8^n[(S^E.charCodeAt(k++))&255];return~S}function b(E,A){for(var S=A^-1,k=E.length-15,T=0;T<k;)S=y[E[T++]^S&255]^v[E[T++]^S>>8&255]^x[E[T++]^S>>16&255]^m[E[T++]^S>>>24]^g[E[T++]]^p[E[T++]]^d[E[T++]]^h[E[T++]]^f[E[T++]]^u[E[T++]]^c[E[T++]]^l[E[T++]]^o[E[T++]]^a[E[T++]]^s[E[T++]]^n[E[T++]];for(k+=15;T<k;)S=S>>>8^n[(S^E[T++])&255];return~S}function w(E,A){for(var S=A^-1,k=0,T=E.length,O=0,C=0;k<T;)O=E.charCodeAt(k++),O<128?S=S>>>8^n[(S^O)&255]:O<2048?(S=S>>>8^n[(S^(192|O>>6&31))&255],S=S>>>8^n[(S^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,C=E.charCodeAt(k++)&1023,S=S>>>8^n[(S^(240|O>>8&7))&255],S=S>>>8^n[(S^(128|O>>2&63))&255],S=S>>>8^n[(S^(128|C>>6&15|(O&3)<<4))&255],S=S>>>8^n[(S^(128|C&63))&255]):(S=S>>>8^n[(S^(224|O>>12&15))&255],S=S>>>8^n[(S^(128|O>>6&63))&255],S=S>>>8^n[(S^(128|O&63))&255]);return~S}return e.table=n,e.bstr=_,e.buf=b,e.str=w,e}(),Tt=function(){var t={};t.version="1.2.2";function n(M,W){for(var P=M.split("/"),U=W.split("/"),V=0,j=0,ne=Math.min(P.length,U.length);V<ne;++V){if(j=P[V].length-U[V].length)return j;if(P[V]!=U[V])return P[V]<U[V]?-1:1}return P.length-U.length}function r(M){if(M.charAt(M.length-1)=="/")return M.slice(0,-1).indexOf("/")===-1?M:r(M.slice(0,-1));var W=M.lastIndexOf("/");return W===-1?M:M.slice(0,W+1)}function i(M){if(M.charAt(M.length-1)=="/")return i(M.slice(0,-1));var W=M.lastIndexOf("/");return W===-1?M:M.slice(W+1)}function s(M,W){typeof W=="string"&&(W=new Date(W));var P=W.getHours();P=P<<6|W.getMinutes(),P=P<<5|W.getSeconds()>>>1,M.write_shift(2,P);var U=W.getFullYear()-1980;U=U<<4|W.getMonth()+1,U=U<<5|W.getDate(),M.write_shift(2,U)}function a(M){var W=M.read_shift(2)&65535,P=M.read_shift(2)&65535,U=new Date,V=P&31;P>>>=5;var j=P&15;P>>>=4,U.setMilliseconds(0),U.setFullYear(P+1980),U.setMonth(j-1),U.setDate(V);var ne=W&31;W>>>=5;var ue=W&63;return W>>>=6,U.setHours(W),U.setMinutes(ue),U.setSeconds(ne<<1),U}function o(M){jn(M,0);for(var W={},P=0;M.l<=M.length-4;){var U=M.read_shift(2),V=M.read_shift(2),j=M.l+V,ne={};switch(U){case 21589:P=M.read_shift(1),P&1&&(ne.mtime=M.read_shift(4)),V>5&&(P&2&&(ne.atime=M.read_shift(4)),P&4&&(ne.ctime=M.read_shift(4))),ne.mtime&&(ne.mt=new Date(ne.mtime*1e3));break;case 1:{var ue=M.read_shift(4),ee=M.read_shift(4);ne.usz=ee*Math.pow(2,32)+ue,ue=M.read_shift(4),ee=M.read_shift(4),ne.csz=ee*Math.pow(2,32)+ue}break}M.l=j,W[U]=ne}return W}var l;function c(){return l||(l=P2e)}function u(M,W){if(M[0]==80&&M[1]==75)return p$(M,W);if((M[0]|32)==109&&(M[1]|32)==105)return Rne(M,W);if(M.length<512)throw new Error("CFB file size "+M.length+" < 512");var P=3,U=512,V=0,j=0,ne=0,ue=0,ee=0,re=[],ie=M.slice(0,512);jn(ie,0);var Ae=f(ie);switch(P=Ae[0],P){case 3:U=512;break;case 4:U=4096;break;case 0:if(Ae[1]==0)return p$(M,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+P)}U!==512&&(ie=M.slice(0,U),jn(ie,28));var De=M.slice(0,U);h(ie,P);var Ue=ie.read_shift(4,"i");if(P===3&&Ue!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ue);ie.l+=4,ne=ie.read_shift(4,"i"),ie.l+=4,ie.chk("00100000","Mini Stream Cutoff Size: "),ue=ie.read_shift(4,"i"),V=ie.read_shift(4,"i"),ee=ie.read_shift(4,"i"),j=ie.read_shift(4,"i");for(var Te=-1,Re=0;Re<109&&(Te=ie.read_shift(4,"i"),!(Te<0));++Re)re[Re]=Te;var lt=d(M,U);m(ee,j,lt,U,re);var cn=v(lt,ne,re,U);ne<cn.length&&(cn[ne].name="!Directory"),V>0&&ue!==C&&(cn[ue].name="!MiniFAT"),cn[re[0]].name="!FAT",cn.fat_addrs=re,cn.ssz=U;var vn={},$r=[],ig=[],sg=[];y(ne,cn,lt,$r,V,vn,ig,ue),p(ig,sg,$r),$r.shift();var ag={FileIndex:ig,FullPaths:sg};return W&&W.raw&&(ag.raw={header:De,sectors:lt}),ag}function f(M){if(M[M.l]==80&&M[M.l+1]==75)return[0,0];M.chk(D,"Header Signature: "),M.l+=16;var W=M.read_shift(2,"u");return[M.read_shift(2,"u"),W]}function h(M,W){var P=9;switch(M.l+=2,P=M.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+P);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+P);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+P)}M.chk("0600","Mini Sector Shift: "),M.chk("000000000000","Reserved: ")}function d(M,W){for(var P=Math.ceil(M.length/W)-1,U=[],V=1;V<P;++V)U[V-1]=M.slice(V*W,(V+1)*W);return U[P-1]=M.slice(P*W),U}function p(M,W,P){for(var U=0,V=0,j=0,ne=0,ue=0,ee=P.length,re=[],ie=[];U<ee;++U)re[U]=ie[U]=U,W[U]=P[U];for(;ue<ie.length;++ue)U=ie[ue],V=M[U].L,j=M[U].R,ne=M[U].C,re[U]===U&&(V!==-1&&re[V]!==V&&(re[U]=re[V]),j!==-1&&re[j]!==j&&(re[U]=re[j])),ne!==-1&&(re[ne]=U),V!==-1&&U!=re[U]&&(re[V]=re[U],ie.lastIndexOf(V)<ue&&ie.push(V)),j!==-1&&U!=re[U]&&(re[j]=re[U],ie.lastIndexOf(j)<ue&&ie.push(j));for(U=1;U<ee;++U)re[U]===U&&(j!==-1&&re[j]!==j?re[U]=re[j]:V!==-1&&re[V]!==V&&(re[U]=re[V]));for(U=1;U<ee;++U)if(M[U].type!==0){if(ue=U,ue!=re[ue])do ue=re[ue],W[U]=W[ue]+"/"+W[U];while(ue!==0&&re[ue]!==-1&&ue!=re[ue]);re[U]=-1}for(W[0]+="/",U=1;U<ee;++U)M[U].type!==2&&(W[U]+="/")}function g(M,W,P){for(var U=M.start,V=M.size,j=[],ne=U;P&&V>0&&ne>=0;)j.push(W.slice(ne*O,ne*O+O)),V-=O,ne=Nf(P,ne*4);return j.length===0?Un(0):Uc(j).slice(0,M.size)}function m(M,W,P,U,V){var j=C;if(M===C){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(M!==-1){var ne=P[M],ue=(U>>>2)-1;if(!ne)return;for(var ee=0;ee<ue&&(j=Nf(ne,ee*4))!==C;++ee)V.push(j);W>=1&&m(Nf(ne,U-4),W-1,P,U,V)}}function x(M,W,P,U,V){var j=[],ne=[];V||(V=[]);var ue=U-1,ee=0,re=0;for(ee=W;ee>=0;){V[ee]=!0,j[j.length]=ee,ne.push(M[ee]);var ie=P[Math.floor(ee*4/U)];if(re=ee*4&ue,U<4+re)throw new Error("FAT boundary crossed: "+ee+" 4 "+U);if(!M[ie])break;ee=Nf(M[ie],re)}return{nodes:j,data:l8([ne])}}function v(M,W,P,U){var V=M.length,j=[],ne=[],ue=[],ee=[],re=U-1,ie=0,Ae=0,De=0,Ue=0;for(ie=0;ie<V;++ie)if(ue=[],De=ie+W,De>=V&&(De-=V),!ne[De]){ee=[];var Te=[];for(Ae=De;Ae>=0;){Te[Ae]=!0,ne[Ae]=!0,ue[ue.length]=Ae,ee.push(M[Ae]);var Re=P[Math.floor(Ae*4/U)];if(Ue=Ae*4&re,U<4+Ue)throw new Error("FAT boundary crossed: "+Ae+" 4 "+U);if(!M[Re]||(Ae=Nf(M[Re],Ue),Te[Ae]))break}j[De]={nodes:ue,data:l8([ee])}}return j}function y(M,W,P,U,V,j,ne,ue){for(var ee=0,re=U.length?2:0,ie=W[M].data,Ae=0,De=0,Ue;Ae<ie.length;Ae+=128){var Te=ie.slice(Ae,Ae+128);jn(Te,64),De=Te.read_shift(2),Ue=mO(Te,0,De-re),U.push(Ue);var Re={name:Ue,type:Te.read_shift(1),color:Te.read_shift(1),L:Te.read_shift(4,"i"),R:Te.read_shift(4,"i"),C:Te.read_shift(4,"i"),clsid:Te.read_shift(16),state:Te.read_shift(4,"i"),start:0,size:0},lt=Te.read_shift(2)+Te.read_shift(2)+Te.read_shift(2)+Te.read_shift(2);lt!==0&&(Re.ct=_(Te,Te.l-8));var cn=Te.read_shift(2)+Te.read_shift(2)+Te.read_shift(2)+Te.read_shift(2);cn!==0&&(Re.mt=_(Te,Te.l-8)),Re.start=Te.read_shift(4,"i"),Re.size=Te.read_shift(4,"i"),Re.size<0&&Re.start<0&&(Re.size=Re.type=0,Re.start=C,Re.name=""),Re.type===5?(ee=Re.start,V>0&&ee!==C&&(W[ee].name="!StreamData")):Re.size>=4096?(Re.storage="fat",W[Re.start]===void 0&&(W[Re.start]=x(P,Re.start,W.fat_addrs,W.ssz)),W[Re.start].name=Re.name,Re.content=W[Re.start].data.slice(0,Re.size)):(Re.storage="minifat",Re.size<0?Re.size=0:ee!==C&&Re.start!==C&&W[ee]&&(Re.content=g(Re,W[ee].data,(W[ue]||{}).data))),Re.content&&jn(Re.content,0),j[Ue]=Re,ne.push(Re)}}function _(M,W){return new Date((ps(M,W+4)/1e7*Math.pow(2,32)+ps(M,W)/1e7-11644473600)*1e3)}function b(M,W){return c(),u(l.readFileSync(M),W)}function w(M,W){var P=W&&W.type;switch(P||_t&&Buffer.isBuffer(M)&&(P="buffer"),P||"base64"){case"file":return b(M,W);case"base64":return u(ds(Cs(M)),W);case"binary":return u(ds(M),W)}return u(M,W)}function E(M,W){var P=W||{},U=P.root||"Root Entry";if(M.FullPaths||(M.FullPaths=[]),M.FileIndex||(M.FileIndex=[]),M.FullPaths.length!==M.FileIndex.length)throw new Error("inconsistent CFB structure");M.FullPaths.length===0&&(M.FullPaths[0]=U+"/",M.FileIndex[0]={name:U,type:5}),P.CLSID&&(M.FileIndex[0].clsid=P.CLSID),A(M)}function A(M){var W="Sh33tJ5";if(!Tt.find(M,"/"+W)){var P=Un(4);P[0]=55,P[1]=P[3]=50,P[2]=54,M.FileIndex.push({name:W,type:2,content:P,size:4,L:69,R:69,C:69}),M.FullPaths.push(M.FullPaths[0]+W),S(M)}}function S(M,W){E(M);for(var P=!1,U=!1,V=M.FullPaths.length-1;V>=0;--V){var j=M.FileIndex[V];switch(j.type){case 0:U?P=!0:(M.FileIndex.pop(),M.FullPaths.pop());break;case 1:case 2:case 5:U=!0,isNaN(j.R*j.L*j.C)&&(P=!0),j.R>-1&&j.L>-1&&j.R==j.L&&(P=!0);break;default:P=!0;break}}if(!(!P&&!W)){var ne=new Date(1987,1,19),ue=0,ee=Object.create?Object.create(null):{},re=[];for(V=0;V<M.FullPaths.length;++V)ee[M.FullPaths[V]]=!0,M.FileIndex[V].type!==0&&re.push([M.FullPaths[V],M.FileIndex[V]]);for(V=0;V<re.length;++V){var ie=r(re[V][0]);for(U=ee[ie];!U;){for(;r(ie)&&!ee[r(ie)];)ie=r(ie);re.push([ie,{name:i(ie).replace("/",""),type:1,clsid:R,ct:ne,mt:ne,content:null}]),ee[ie]=!0,ie=r(re[V][0]),U=ee[ie]}}for(re.sort(function(Ue,Te){return n(Ue[0],Te[0])}),M.FullPaths=[],M.FileIndex=[],V=0;V<re.length;++V)M.FullPaths[V]=re[V][0],M.FileIndex[V]=re[V][1];for(V=0;V<re.length;++V){var Ae=M.FileIndex[V],De=M.FullPaths[V];if(Ae.name=i(De).replace("/",""),Ae.L=Ae.R=Ae.C=-(Ae.color=1),Ae.size=Ae.content?Ae.content.length:0,Ae.start=0,Ae.clsid=Ae.clsid||R,V===0)Ae.C=re.length>1?1:-1,Ae.size=0,Ae.type=5;else if(De.slice(-1)=="/"){for(ue=V+1;ue<re.length&&r(M.FullPaths[ue])!=De;++ue);for(Ae.C=ue>=re.length?-1:ue,ue=V+1;ue<re.length&&r(M.FullPaths[ue])!=r(De);++ue);Ae.R=ue>=re.length?-1:ue,Ae.type=1}else r(M.FullPaths[V+1]||"")==r(De)&&(Ae.R=V+1),Ae.type=2}}}function k(M,W){var P=W||{};if(P.fileType=="mad")return $ne(M,P);switch(S(M),P.fileType){case"zip":return Cne(M,P)}var U=function(Ue){for(var Te=0,Re=0,lt=0;lt<Ue.FileIndex.length;++lt){var cn=Ue.FileIndex[lt];if(cn.content){var vn=cn.content.length;vn>0&&(vn<4096?Te+=vn+63>>6:Re+=vn+511>>9)}}for(var $r=Ue.FullPaths.length+3>>2,ig=Te+7>>3,sg=Te+127>>7,ag=ig+Re+$r+sg,cf=ag+127>>7,IS=cf<=109?0:Math.ceil((cf-109)/127);ag+cf+IS+127>>7>cf;)IS=++cf<=109?0:Math.ceil((cf-109)/127);var ol=[1,IS,cf,sg,$r,Re,Te,0];return Ue.FileIndex[0].size=Te<<6,ol[7]=(Ue.FileIndex[0].start=ol[0]+ol[1]+ol[2]+ol[3]+ol[4]+ol[5])+(ol[6]+7>>3),ol}(M),V=Un(U[7]<<9),j=0,ne=0;{for(j=0;j<8;++j)V.write_shift(1,N[j]);for(j=0;j<8;++j)V.write_shift(2,0);for(V.write_shift(2,62),V.write_shift(2,3),V.write_shift(2,65534),V.write_shift(2,9),V.write_shift(2,6),j=0;j<3;++j)V.write_shift(2,0);for(V.write_shift(4,0),V.write_shift(4,U[2]),V.write_shift(4,U[0]+U[1]+U[2]+U[3]-1),V.write_shift(4,0),V.write_shift(4,4096),V.write_shift(4,U[3]?U[0]+U[1]+U[2]-1:C),V.write_shift(4,U[3]),V.write_shift(-4,U[1]?U[0]-1:C),V.write_shift(4,U[1]),j=0;j<109;++j)V.write_shift(-4,j<U[2]?U[1]+j:-1)}if(U[1])for(ne=0;ne<U[1];++ne){for(;j<236+ne*127;++j)V.write_shift(-4,j<U[2]?U[1]+j:-1);V.write_shift(-4,ne===U[1]-1?C:ne+1)}var ue=function(Ue){for(ne+=Ue;j<ne-1;++j)V.write_shift(-4,j+1);Ue&&(++j,V.write_shift(-4,C))};for(ne=j=0,ne+=U[1];j<ne;++j)V.write_shift(-4,L.DIFSECT);for(ne+=U[2];j<ne;++j)V.write_shift(-4,L.FATSECT);ue(U[3]),ue(U[4]);for(var ee=0,re=0,ie=M.FileIndex[0];ee<M.FileIndex.length;++ee)ie=M.FileIndex[ee],ie.content&&(re=ie.content.length,!(re<4096)&&(ie.start=ne,ue(re+511>>9)));for(ue(U[6]+7>>3);V.l&511;)V.write_shift(-4,L.ENDOFCHAIN);for(ne=j=0,ee=0;ee<M.FileIndex.length;++ee)ie=M.FileIndex[ee],ie.content&&(re=ie.content.length,!(!re||re>=4096)&&(ie.start=ne,ue(re+63>>6)));for(;V.l&511;)V.write_shift(-4,L.ENDOFCHAIN);for(j=0;j<U[4]<<2;++j){var Ae=M.FullPaths[j];if(!Ae||Ae.length===0){for(ee=0;ee<17;++ee)V.write_shift(4,0);for(ee=0;ee<3;++ee)V.write_shift(4,-1);for(ee=0;ee<12;++ee)V.write_shift(4,0);continue}ie=M.FileIndex[j],j===0&&(ie.start=ie.size?ie.start-1:C);var De=j===0&&P.root||ie.name;if(De.length>31&&(console.error("Name "+De+" will be truncated to "+De.slice(0,31)),De=De.slice(0,31)),re=2*(De.length+1),V.write_shift(64,De,"utf16le"),V.write_shift(2,re),V.write_shift(1,ie.type),V.write_shift(1,ie.color),V.write_shift(-4,ie.L),V.write_shift(-4,ie.R),V.write_shift(-4,ie.C),ie.clsid)V.write_shift(16,ie.clsid,"hex");else for(ee=0;ee<4;++ee)V.write_shift(4,0);V.write_shift(4,ie.state||0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,ie.start),V.write_shift(4,ie.size),V.write_shift(4,0)}for(j=1;j<M.FileIndex.length;++j)if(ie=M.FileIndex[j],ie.size>=4096)if(V.l=ie.start+1<<9,_t&&Buffer.isBuffer(ie.content))ie.content.copy(V,V.l,0,ie.size),V.l+=ie.size+511&-512;else{for(ee=0;ee<ie.size;++ee)V.write_shift(1,ie.content[ee]);for(;ee&511;++ee)V.write_shift(1,0)}for(j=1;j<M.FileIndex.length;++j)if(ie=M.FileIndex[j],ie.size>0&&ie.size<4096)if(_t&&Buffer.isBuffer(ie.content))ie.content.copy(V,V.l,0,ie.size),V.l+=ie.size+63&-64;else{for(ee=0;ee<ie.size;++ee)V.write_shift(1,ie.content[ee]);for(;ee&63;++ee)V.write_shift(1,0)}if(_t)V.l=V.length;else for(;V.l<V.length;)V.write_shift(1,0);return V}function T(M,W){var P=M.FullPaths.map(function(ee){return ee.toUpperCase()}),U=P.map(function(ee){var re=ee.split("/");return re[re.length-(ee.slice(-1)=="/"?2:1)]}),V=!1;W.charCodeAt(0)===47?(V=!0,W=P[0].slice(0,-1)+W):V=W.indexOf("/")!==-1;var j=W.toUpperCase(),ne=V===!0?P.indexOf(j):U.indexOf(j);if(ne!==-1)return M.FileIndex[ne];var ue=!j.match(Kg);for(j=j.replace(Gi,""),ue&&(j=j.replace(Kg,"!")),ne=0;ne<P.length;++ne)if((ue?P[ne].replace(Kg,"!"):P[ne]).replace(Gi,"")==j||(ue?U[ne].replace(Kg,"!"):U[ne]).replace(Gi,"")==j)return M.FileIndex[ne];return null}var O=64,C=-2,D="d0cf11e0a1b11ae1",N=[208,207,17,224,161,177,26,225],R="00000000000000000000000000000000",L={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:C,FREESECT:-1,HEADER_SIGNATURE:D,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:R,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function I(M,W,P){c();var U=k(M,P);l.writeFileSync(W,U)}function Y(M){for(var W=new Array(M.length),P=0;P<M.length;++P)W[P]=String.fromCharCode(M[P]);return W.join("")}function X(M,W){var P=k(M,W);switch(W&&W.type||"buffer"){case"file":return c(),l.writeFileSync(W.filename,P),P;case"binary":return typeof P=="string"?P:Y(P);case"base64":return j5(typeof P=="string"?P:Y(P));case"buffer":if(_t)return Buffer.isBuffer(P)?P:Yu(P);case"array":return typeof P=="string"?ds(P):P}return P}var oe;function xe(M){try{var W=M.InflateRaw,P=new W;if(P._processChunk(new Uint8Array([3,0]),P._finishFlushFlag),P.bytesRead)oe=M;else throw new Error("zlib does not expose bytesRead")}catch(U){console.error("cannot use native zlib: "+(U.message||U))}}function _e(M,W){if(!oe)return rg(M,W);var P=oe.InflateRaw,U=new P,V=U._processChunk(M.slice(M.l),U._finishFlushFlag);return M.l+=U.bytesRead,V}function ve(M){return oe?oe.deflateRawSync(M):It(M)}var Oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Pe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ge=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function z(M){var W=(M<<1|M<<11)&139536|(M<<5|M<<15)&558144;return(W>>16|W>>8|W)&255}for(var q=typeof Uint8Array<"u",G=q?new Uint8Array(256):[],H=0;H<256;++H)G[H]=z(H);function J(M,W){var P=G[M&255];return W<=8?P>>>8-W:(P=P<<8|G[M>>8&255],W<=16?P>>>16-W:(P=P<<8|G[M>>16&255],P>>>24-W))}function F(M,W){var P=W&7,U=W>>>3;return(M[U]|(P<=6?0:M[U+1]<<8))>>>P&3}function B(M,W){var P=W&7,U=W>>>3;return(M[U]|(P<=5?0:M[U+1]<<8))>>>P&7}function K(M,W){var P=W&7,U=W>>>3;return(M[U]|(P<=4?0:M[U+1]<<8))>>>P&15}function Z(M,W){var P=W&7,U=W>>>3;return(M[U]|(P<=3?0:M[U+1]<<8))>>>P&31}function Q(M,W){var P=W&7,U=W>>>3;return(M[U]|(P<=1?0:M[U+1]<<8))>>>P&127}function te(M,W,P){var U=W&7,V=W>>>3,j=(1<<P)-1,ne=M[V]>>>U;return P<8-U||(ne|=M[V+1]<<8-U,P<16-U)||(ne|=M[V+2]<<16-U,P<24-U)||(ne|=M[V+3]<<24-U),ne&j}function de(M,W,P){var U=W&7,V=W>>>3;return U<=5?M[V]|=(P&7)<<U:(M[V]|=P<<U&255,M[V+1]=(P&7)>>8-U),W+3}function me(M,W,P){var U=W&7,V=W>>>3;return P=(P&1)<<U,M[V]|=P,W+1}function ye(M,W,P){var U=W&7,V=W>>>3;return P<<=U,M[V]|=P&255,P>>>=8,M[V+1]=P,W+8}function pe(M,W,P){var U=W&7,V=W>>>3;return P<<=U,M[V]|=P&255,P>>>=8,M[V+1]=P&255,M[V+2]=P>>>8,W+16}function ce(M,W){var P=M.length,U=2*P>W?2*P:W+5,V=0;if(P>=W)return M;if(_t){var j=G5(U);if(M.copy)M.copy(j);else for(;V<M.length;++V)j[V]=M[V];return j}else if(q){var ne=new Uint8Array(U);if(ne.set)ne.set(M);else for(;V<P;++V)ne[V]=M[V];return ne}return M.length=U,M}function Se(M){for(var W=new Array(M),P=0;P<M;++P)W[P]=0;return W}function ae(M,W,P){var U=1,V=0,j=0,ne=0,ue=0,ee=M.length,re=q?new Uint16Array(32):Se(32);for(j=0;j<32;++j)re[j]=0;for(j=ee;j<P;++j)M[j]=0;ee=M.length;var ie=q?new Uint16Array(ee):Se(ee);for(j=0;j<ee;++j)re[V=M[j]]++,U<V&&(U=V),ie[j]=0;for(re[0]=0,j=1;j<=U;++j)re[j+16]=ue=ue+re[j-1]<<1;for(j=0;j<ee;++j)ue=M[j],ue!=0&&(ie[j]=re[ue+16]++);var Ae=0;for(j=0;j<ee;++j)if(Ae=M[j],Ae!=0)for(ue=J(ie[j],U)>>U-Ae,ne=(1<<U+4-Ae)-1;ne>=0;--ne)W[ue|ne<<Ae]=Ae&15|j<<4;return U}var We=q?new Uint16Array(512):Se(512),Xe=q?new Uint16Array(32):Se(32);if(!q){for(var tt=0;tt<512;++tt)We[tt]=0;for(tt=0;tt<32;++tt)Xe[tt]=0}(function(){for(var M=[],W=0;W<32;W++)M.push(5);ae(M,Xe,32);var P=[];for(W=0;W<=143;W++)P.push(8);for(;W<=255;W++)P.push(9);for(;W<=279;W++)P.push(7);for(;W<=287;W++)P.push(8);ae(P,We,288)})();var ct=function(){for(var W=q?new Uint8Array(32768):[],P=0,U=0;P<Ge.length-1;++P)for(;U<Ge[P+1];++U)W[U]=P;for(;U<32768;++U)W[U]=29;var V=q?new Uint8Array(259):[];for(P=0,U=0;P<Pe.length-1;++P)for(;U<Pe[P+1];++U)V[U]=P;function j(ue,ee){for(var re=0;re<ue.length;){var ie=Math.min(65535,ue.length-re),Ae=re+ie==ue.length;for(ee.write_shift(1,+Ae),ee.write_shift(2,ie),ee.write_shift(2,~ie&65535);ie-- >0;)ee[ee.l++]=ue[re++]}return ee.l}function ne(ue,ee){for(var re=0,ie=0,Ae=q?new Uint16Array(32768):[];ie<ue.length;){var De=Math.min(65535,ue.length-ie);if(De<10){for(re=de(ee,re,+(ie+De==ue.length)),re&7&&(re+=8-(re&7)),ee.l=re/8|0,ee.write_shift(2,De),ee.write_shift(2,~De&65535);De-- >0;)ee[ee.l++]=ue[ie++];re=ee.l*8;continue}re=de(ee,re,+(ie+De==ue.length)+2);for(var Ue=0;De-- >0;){var Te=ue[ie];Ue=(Ue<<5^Te)&32767;var Re=-1,lt=0;if((Re=Ae[Ue])&&(Re|=ie&-32768,Re>ie&&(Re-=32768),Re<ie))for(;ue[Re+lt]==ue[ie+lt]&&lt<250;)++lt;if(lt>2){Te=V[lt],Te<=22?re=ye(ee,re,G[Te+1]>>1)-1:(ye(ee,re,3),re+=5,ye(ee,re,G[Te-23]>>5),re+=3);var cn=Te<8?0:Te-4>>2;cn>0&&(pe(ee,re,lt-Pe[Te]),re+=cn),Te=W[ie-Re],re=ye(ee,re,G[Te]>>3),re-=3;var vn=Te<4?0:Te-2>>1;vn>0&&(pe(ee,re,ie-Re-Ge[Te]),re+=vn);for(var $r=0;$r<lt;++$r)Ae[Ue]=ie&32767,Ue=(Ue<<5^ue[ie])&32767,++ie;De-=lt-1}else Te<=143?Te=Te+48:re=me(ee,re,1),re=ye(ee,re,G[Te]),Ae[Ue]=ie&32767,++ie}re=ye(ee,re,0)-1}return ee.l=(re+7)/8|0,ee.l}return function(ee,re){return ee.length<8?j(ee,re):ne(ee,re)}}();function It(M){var W=Un(50+Math.floor(M.length*1.1)),P=ct(M,W);return W.slice(0,P)}var Ne=q?new Uint16Array(32768):Se(32768),gt=q?new Uint16Array(32768):Se(32768),xn=q?new Uint16Array(128):Se(128),sn=1,Ls=1;function Cn(M,W){var P=Z(M,W)+257;W+=5;var U=Z(M,W)+1;W+=5;var V=K(M,W)+4;W+=4;for(var j=0,ne=q?new Uint8Array(19):Se(19),ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ee=1,re=q?new Uint8Array(8):Se(8),ie=q?new Uint8Array(8):Se(8),Ae=ne.length,De=0;De<V;++De)ne[Oe[De]]=j=B(M,W),ee<j&&(ee=j),re[j]++,W+=3;var Ue=0;for(re[0]=0,De=1;De<=ee;++De)ie[De]=Ue=Ue+re[De-1]<<1;for(De=0;De<Ae;++De)(Ue=ne[De])!=0&&(ue[De]=ie[Ue]++);var Te=0;for(De=0;De<Ae;++De)if(Te=ne[De],Te!=0){Ue=G[ue[De]]>>8-Te;for(var Re=(1<<7-Te)-1;Re>=0;--Re)xn[Ue|Re<<Te]=Te&7|De<<3}var lt=[];for(ee=1;lt.length<P+U;)switch(Ue=xn[Q(M,W)],W+=Ue&7,Ue>>>=3){case 16:for(j=3+F(M,W),W+=2,Ue=lt[lt.length-1];j-- >0;)lt.push(Ue);break;case 17:for(j=3+B(M,W),W+=3;j-- >0;)lt.push(0);break;case 18:for(j=11+Q(M,W),W+=7;j-- >0;)lt.push(0);break;default:lt.push(Ue),ee<Ue&&(ee=Ue);break}var cn=lt.slice(0,P),vn=lt.slice(P);for(De=P;De<286;++De)cn[De]=0;for(De=U;De<30;++De)vn[De]=0;return sn=ae(cn,Ne,286),Ls=ae(vn,gt,30),W}function ci(M,W){if(M[0]==3&&!(M[1]&3))return[Eu(W),2];for(var P=0,U=0,V=G5(W||1<<18),j=0,ne=V.length>>>0,ue=0,ee=0;!(U&1);){if(U=B(M,P),P+=3,U>>>1)U>>1==1?(ue=9,ee=5):(P=Cn(M,P),ue=sn,ee=Ls);else{P&7&&(P+=8-(P&7));var re=M[P>>>3]|M[(P>>>3)+1]<<8;if(P+=32,re>0)for(!W&&ne<j+re&&(V=ce(V,j+re),ne=V.length);re-- >0;)V[j++]=M[P>>>3],P+=8;continue}for(;;){!W&&ne<j+32767&&(V=ce(V,j+32767),ne=V.length);var ie=te(M,P,ue),Ae=U>>>1==1?We[ie]:Ne[ie];if(P+=Ae&15,Ae>>>=4,!(Ae>>>8&255))V[j++]=Ae;else{if(Ae==256)break;Ae-=257;var De=Ae<8?0:Ae-4>>2;De>5&&(De=0);var Ue=j+Pe[Ae];De>0&&(Ue+=te(M,P,De),P+=De),ie=te(M,P,ee),Ae=U>>>1==1?Xe[ie]:gt[ie],P+=Ae&15,Ae>>>=4;var Te=Ae<4?0:Ae-2>>1,Re=Ge[Ae];for(Te>0&&(Re+=te(M,P,Te),P+=Te),!W&&ne<Ue&&(V=ce(V,Ue+100),ne=V.length);j<Ue;)V[j]=V[j-Re],++j}}}return W?[V,P+7>>>3]:[V.slice(0,j),P+7>>>3]}function rg(M,W){var P=M.slice(M.l||0),U=ci(P,W);return M.l+=U[1],U[0]}function d$(M,W){if(M)typeof console<"u"&&console.error(W);else throw new Error(W)}function p$(M,W){var P=M;jn(P,0);var U=[],V=[],j={FileIndex:U,FullPaths:V};E(j,{root:W.root});for(var ne=P.length-4;(P[ne]!=80||P[ne+1]!=75||P[ne+2]!=5||P[ne+3]!=6)&&ne>=0;)--ne;P.l=ne+4,P.l+=4;var ue=P.read_shift(2);P.l+=6;var ee=P.read_shift(4);for(P.l=ee,ne=0;ne<ue;++ne){P.l+=20;var re=P.read_shift(4),ie=P.read_shift(4),Ae=P.read_shift(2),De=P.read_shift(2),Ue=P.read_shift(2);P.l+=8;var Te=P.read_shift(4),Re=o(P.slice(P.l+Ae,P.l+Ae+De));P.l+=Ae+De+Ue;var lt=P.l;P.l=Te+4,Re&&Re[1]&&((Re[1]||{}).usz&&(ie=Re[1].usz),(Re[1]||{}).csz&&(re=Re[1].csz)),kne(P,re,ie,j,Re),P.l=lt}return j}function kne(M,W,P,U,V){M.l+=2;var j=M.read_shift(2),ne=M.read_shift(2),ue=a(M);if(j&8257)throw new Error("Unsupported ZIP encryption");for(var ee=M.read_shift(4),re=M.read_shift(4),ie=M.read_shift(4),Ae=M.read_shift(2),De=M.read_shift(2),Ue="",Te=0;Te<Ae;++Te)Ue+=String.fromCharCode(M[M.l++]);if(De){var Re=o(M.slice(M.l,M.l+De));(Re[21589]||{}).mt&&(ue=Re[21589].mt),(Re[1]||{}).usz&&(ie=Re[1].usz),(Re[1]||{}).csz&&(re=Re[1].csz),V&&((V[21589]||{}).mt&&(ue=V[21589].mt),(V[1]||{}).usz&&(ie=V[1].usz),(V[1]||{}).csz&&(re=V[1].csz))}M.l+=De;var lt=M.slice(M.l,M.l+re);switch(ne){case 8:lt=_e(M,ie);break;case 0:M.l+=re;break;default:throw new Error("Unsupported ZIP Compression method "+ne)}var cn=!1;j&8&&(ee=M.read_shift(4),ee==134695760&&(ee=M.read_shift(4),cn=!0),re=M.read_shift(4),ie=M.read_shift(4)),re!=W&&d$(cn,"Bad compressed size: "+W+" != "+re),ie!=P&&d$(cn,"Bad uncompressed size: "+P+" != "+ie),$S(U,Ue,lt,{unsafe:!0,mt:ue})}function Cne(M,W){var P=W||{},U=[],V=[],j=Un(1),ne=P.compression?8:0,ue=0,ee=0,re=0,ie=0,Ae=0,De=M.FullPaths[0],Ue=De,Te=M.FileIndex[0],Re=[],lt=0;for(ee=1;ee<M.FullPaths.length;++ee)if(Ue=M.FullPaths[ee].slice(De.length),Te=M.FileIndex[ee],!(!Te.size||!Te.content||Array.isArray(Te.content)&&Te.content.length==0||Ue=="Sh33tJ5")){var cn=ie,vn=Un(Ue.length);for(re=0;re<Ue.length;++re)vn.write_shift(1,Ue.charCodeAt(re)&127);vn=vn.slice(0,vn.l),Re[Ae]=typeof Te.content=="string"?e8.bstr(Te.content,0):e8.buf(Te.content,0);var $r=typeof Te.content=="string"?ds(Te.content):Te.content;ne==8&&($r=ve($r)),j=Un(30),j.write_shift(4,67324752),j.write_shift(2,20),j.write_shift(2,ue),j.write_shift(2,ne),Te.mt?s(j,Te.mt):j.write_shift(4,0),j.write_shift(-4,Re[Ae]),j.write_shift(4,$r.length),j.write_shift(4,Te.content.length),j.write_shift(2,vn.length),j.write_shift(2,0),ie+=j.length,U.push(j),ie+=vn.length,U.push(vn),ie+=$r.length,U.push($r),j=Un(46),j.write_shift(4,33639248),j.write_shift(2,0),j.write_shift(2,20),j.write_shift(2,ue),j.write_shift(2,ne),j.write_shift(4,0),j.write_shift(-4,Re[Ae]),j.write_shift(4,$r.length),j.write_shift(4,Te.content.length),j.write_shift(2,vn.length),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(4,0),j.write_shift(4,cn),lt+=j.l,V.push(j),lt+=vn.length,V.push(vn),++Ae}return j=Un(22),j.write_shift(4,101010256),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,Ae),j.write_shift(2,Ae),j.write_shift(4,lt),j.write_shift(4,ie),j.write_shift(2,0),Uc([Uc(U),Uc(V),j])}var fv={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Fne(M,W){if(M.ctype)return M.ctype;var P=M.name||"",U=P.match(/\.([^\.]+)$/);return U&&fv[U[1]]||W&&(U=(P=W).match(/[\.\\]([^\.\\])+$/),U&&fv[U[1]])?fv[U[1]]:"application/octet-stream"}function One(M){for(var W=j5(M),P=[],U=0;U<W.length;U+=76)P.push(W.slice(U,U+76));return P.join(`\r
`)+`\r
`}function Nne(M){var W=M.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(re){var ie=re.charCodeAt(0).toString(16).toUpperCase();return"="+(ie.length==1?"0"+ie:ie)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var P=[],U=W.split(`\r
`),V=0;V<U.length;++V){var j=U[V];if(j.length==0){P.push("");continue}for(var ne=0;ne<j.length;){var ue=76,ee=j.slice(ne,ne+ue);ee.charAt(ue-1)=="="?ue--:ee.charAt(ue-2)=="="?ue-=2:ee.charAt(ue-3)=="="&&(ue-=3),ee=j.slice(ne,ne+ue),ne+=ue,ne<j.length&&(ee+="="),P.push(ee)}}return P.join(`\r
`)}function Dne(M){for(var W=[],P=0;P<M.length;++P){for(var U=M[P];P<=M.length&&U.charAt(U.length-1)=="=";)U=U.slice(0,U.length-1)+M[++P];W.push(U)}for(var V=0;V<W.length;++V)W[V]=W[V].replace(/[=][0-9A-Fa-f]{2}/g,function(j){return String.fromCharCode(parseInt(j.slice(1),16))});return ds(W.join(`\r
`))}function Mne(M,W,P){for(var U="",V="",j="",ne,ue=0;ue<10;++ue){var ee=W[ue];if(!ee||ee.match(/^\s*$/))break;var re=ee.match(/^([^:]*?):\s*([^\s].*)$/);if(re)switch(re[1].toLowerCase()){case"content-location":U=re[2].trim();break;case"content-type":j=re[2].trim();break;case"content-transfer-encoding":V=re[2].trim();break}}switch(++ue,V.toLowerCase()){case"base64":ne=ds(Cs(W.slice(ue).join("")));break;case"quoted-printable":ne=Dne(W.slice(ue));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+V)}var ie=$S(M,U.slice(P.length),ne,{unsafe:!0});j&&(ie.ctype=j)}function Rne(M,W){if(Y(M.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var P=W&&W.root||"",U=(_t&&Buffer.isBuffer(M)?M.toString("binary"):Y(M)).split(`\r
`),V=0,j="";for(V=0;V<U.length;++V)if(j=U[V],!!/^Content-Location:/i.test(j)&&(j=j.slice(j.indexOf("file")),P||(P=j.slice(0,j.lastIndexOf("/")+1)),j.slice(0,P.length)!=P))for(;P.length>0&&(P=P.slice(0,P.length-1),P=P.slice(0,P.lastIndexOf("/")+1),j.slice(0,P.length)!=P););var ne=(U[1]||"").match(/boundary="(.*?)"/);if(!ne)throw new Error("MAD cannot find boundary");var ue="--"+(ne[1]||""),ee=[],re=[],ie={FileIndex:ee,FullPaths:re};E(ie);var Ae,De=0;for(V=0;V<U.length;++V){var Ue=U[V];Ue!==ue&&Ue!==ue+"--"||(De++&&Mne(ie,U.slice(Ae,V),P),Ae=V)}return ie}function $ne(M,W){var P=W||{},U=P.boundary||"SheetJS";U="------="+U;for(var V=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+U.slice(2)+'"',"","",""],j=M.FullPaths[0],ne=j,ue=M.FileIndex[0],ee=1;ee<M.FullPaths.length;++ee)if(ne=M.FullPaths[ee].slice(j.length),ue=M.FileIndex[ee],!(!ue.size||!ue.content||ne=="Sh33tJ5")){ne=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(lt){return"_x"+lt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(lt){return"_u"+lt.charCodeAt(0).toString(16)+"_"});for(var re=ue.content,ie=_t&&Buffer.isBuffer(re)?re.toString("binary"):Y(re),Ae=0,De=Math.min(1024,ie.length),Ue=0,Te=0;Te<=De;++Te)(Ue=ie.charCodeAt(Te))>=32&&Ue<128&&++Ae;var Re=Ae>=De*4/5;V.push(U),V.push("Content-Location: "+(P.root||"file:///C:/SheetJS/")+ne),V.push("Content-Transfer-Encoding: "+(Re?"quoted-printable":"base64")),V.push("Content-Type: "+Fne(ue,ne)),V.push(""),V.push(Re?Nne(ie):One(ie))}return V.push(U+`--\r
`),V.join(`\r
`)}function Ine(M){var W={};return E(W,M),W}function $S(M,W,P,U){var V=U&&U.unsafe;V||E(M);var j=!V&&Tt.find(M,W);if(!j){var ne=M.FullPaths[0];W.slice(0,ne.length)==ne?ne=W:(ne.slice(-1)!="/"&&(ne+="/"),ne=(ne+W).replace("//","/")),j={name:i(W),type:2},M.FileIndex.push(j),M.FullPaths.push(ne),V||Tt.utils.cfb_gc(M)}return j.content=P,j.size=P?P.length:0,U&&(U.CLSID&&(j.clsid=U.CLSID),U.mt&&(j.mt=U.mt),U.ct&&(j.ct=U.ct)),j}function Lne(M,W){E(M);var P=Tt.find(M,W);if(P){for(var U=0;U<M.FileIndex.length;++U)if(M.FileIndex[U]==P)return M.FileIndex.splice(U,1),M.FullPaths.splice(U,1),!0}return!1}function Pne(M,W,P){E(M);var U=Tt.find(M,W);if(U){for(var V=0;V<M.FileIndex.length;++V)if(M.FileIndex[V]==U)return M.FileIndex[V].name=i(P),M.FullPaths[V]=P,!0}return!1}function Bne(M){S(M,!0)}return t.find=T,t.read=w,t.parse=u,t.write=X,t.writeFile=I,t.utils={cfb_new:Ine,cfb_add:$S,cfb_del:Lne,cfb_mov:Pne,cfb_gc:Bne,ReadShift:Fm,CheckField:uG,prep_blob:jn,bconcat:Uc,use_zlib:xe,_deflateRaw:It,_inflateRaw:rg,consts:L},t}(),P2e;function B2e(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(r){if(!r.message||r.message.indexOf("onstruct")==-1)throw r}throw new Error("Cannot access file "+e)}function Zs(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function hO(e){for(var t=[],n=Zs(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}var zj=Date.UTC(1899,11,30,0,0,0),U2e=Date.UTC(1899,11,31,0,0,0),z2e=Date.UTC(1904,0,1,0,0,0);function nr(e,t){var n=e.getTime(),r=(n-zj)/(24*60*60*1e3);return t?(r-=1462,r<-1402?r-1:r):r<60?r-1:r}function iu(e){if(e>=60&&e<61)return e;var t=new Date;return t.setTime((e>60?e:e+1)*24*60*60*1e3+zj),t}function H2e(e){var t=0,n=0,r=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(n=1,s>3&&(r=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=n*parseInt(i[s],10)}return t}var V2e=/^(\d+):(\d+)(:\d+)?(\.\d+)?$/,W2e=/^(\d+)-(\d+)-(\d+)$/,Hj=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)?(\.\d+)?$/;function Nr(e,t){if(e instanceof Date)return e;var n=e.match(V2e);if(n)return new Date((t?z2e:U2e)+((parseInt(n[1],10)*60+parseInt(n[2],10))*60+(n[3]?parseInt(n[3].slice(1),10):0))*1e3+(n[4]?parseInt((n[4]+"000").slice(1,4),10):0));if(n=e.match(W2e),n)return new Date(Date.UTC(+n[1],+n[2]-1,+n[3],0,0,0,0));if(n=e.match(Hj),n)return new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],n[6]&&parseInt(n[6].slice(1),10)||0,n[7]&&parseInt((n[7]+"0000").slice(1,4),10)||0));var r=new Date(e);return r}function Sh(e,t){if(_t&&Buffer.isBuffer(e)){if(t&&y1){if(e[0]==255&&e[1]==254)return Jg(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Jg(Nj(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Jg(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Jg(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return n[s]||s})}catch{}var r=[],i=0;try{for(i=0;i<e.length-65536;i+=65536)r.push(String.fromCharCode.apply(0,e.slice(i,i+65536)));r.push(String.fromCharCode.apply(0,e.slice(i)))}catch{try{for(;i<e.length-16384;i+=16384)r.push(String.fromCharCode.apply(0,e.slice(i,i+16384)));r.push(String.fromCharCode.apply(0,e.slice(i)))}catch{for(;i!=e.length;++i)r.push(String.fromCharCode(e[i]))}}return r.join("")}function Hn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Hn(e[n]));return t}function At(e,t){for(var n="";n.length<t;)n+=e;return n}function _s(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(t=Number(r))||(r=r.replace(/[(]([^()]*)[)]/,function(i,s){return n=-n,s}),!isNaN(t=Number(r)))?t/n:t}var j2e=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/,G2e=/^([01]?\d|2[0-3])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))$/,q2e=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)(\.\d+)?[Z]?$/,X2e=new Date("6/9/69 00:00 UTC").valueOf()==-177984e5;function Y2e(e){return e[2]?e[3]?e[4]?new Date(Date.UTC(1899,11,31,+e[1]%12+(e[7]=="p"?12:0),+e[2],+e[4],parseFloat(e[3])*1e3)):new Date(Date.UTC(1899,11,31,e[7]=="p"?12:0,+e[1],+e[2],parseFloat(e[3])*1e3)):e[5]?new Date(Date.UTC(1899,11,31,+e[1]%12+(e[7]=="p"?12:0),+e[2],+e[5],e[6]?parseFloat(e[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+e[1]%12+(e[7]=="p"?12:0),+e[2],0,0)):new Date(Date.UTC(1899,11,31,+e[1]%12+(e[7]=="p"?12:0),0,0,0))}function K2e(e){return e[2]?e[3]?e[4]?new Date(Date.UTC(1899,11,31,+e[1],+e[2],+e[4],parseFloat(e[3])*1e3)):new Date(Date.UTC(1899,11,31,0,+e[1],+e[2],parseFloat(e[3])*1e3)):e[5]?new Date(Date.UTC(1899,11,31,+e[1],+e[2],+e[5],e[6]?parseFloat(e[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+e[1],+e[2],0,0)):new Date(Date.UTC(1899,11,31,+e[1],0,0,0))}var J2e=["january","february","march","april","may","june","july","august","september","october","november","december"];function b1(e){if(q2e.test(e))return e.indexOf("Z")==-1?PE(new Date(e)):new Date(e);var t=e.toLowerCase(),n=t.replace(/\s+/g," ").trim(),r=n.match(j2e);if(r)return Y2e(r);if(r=n.match(G2e),r)return K2e(r);if(r=n.match(Hj),r)return new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],r[6]&&parseInt(r[6].slice(1),10)||0,r[7]&&parseInt((r[7]+"0000").slice(1,4),10)||0));var i=new Date(X2e&&e.indexOf("UTC")==-1?e+" UTC":e),s=new Date(NaN),a=i.getYear();i.getMonth();var o=i.getDate();if(isNaN(o))return s;if(t.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(t=t.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),t.length>3&&J2e.indexOf(t)==-1)return s}else if(t.replace(/[ap]m?/,"").match(/[a-z]/))return s;return a<0||a>8099||e.match(/[^-0-9:,\/\\\ ]/)?s:i}var Z2e=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(n,r,i){if(e||typeof r=="string")return n.split(r);for(var s=n.split(r),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}}();function Ah(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}function PE(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))}function dO(e){var t=e.slice(0,1024),n=t.indexOf("<!DOCTYPE");if(n==-1)return e;var r=e.match(/<[\w]/);return r?e.slice(0,n)+e.slice(r.index):e}function pO(e,t,n){for(var r=[],i=e.indexOf(t);i>-1;){var s=e.indexOf(n,i+t.length);if(s==-1)break;r.push(e.slice(i,s+n.length)),i=e.indexOf(t,s+n.length)}return r.length>0?r:null}function vx(e,t,n){var r=[],i=0,s=e.indexOf(t);if(s==-1)return e;for(;s>-1;){r.push(e.slice(i,s));var a=e.indexOf(n,s+t.length);if(a==-1)break;(s=e.indexOf(t,i=a+n.length))==-1&&r.push(e.slice(i))}return r.join("")}var Q2e={" ":1,"	":1,"\r":1,"\n":1,">":1};function th(e,t){for(var n=e.indexOf("<"+t),r=t.length+1,i=e.length;n>=0&&n<=i-r&&!Q2e[e.charAt(n+r)];)n=e.indexOf("<"+t,n+1);if(n===-1)return null;var s=e.indexOf(">",n+t.length);if(s===-1)return null;var a="</"+t+">",o=e.indexOf(a,s);return o==-1?null:[e.slice(n,o+a.length),e.slice(s+1,o)]}var cr=function(){var e={};return function(n,r){var i=e[r];i||(e[r]=i=[new RegExp("<(?:\\w+:)?"+r+"\\b[^<>]*>","g"),new RegExp("</(?:\\w+:)?"+r+">","g")]),i[0].lastIndex=i[1].lastIndex=0;var s=i[0].exec(n);if(!s)return null;var a=s.index,o=i[0].lastIndex;if(i[1].lastIndex=i[0].lastIndex,s=i[1].exec(n),!s)return null;var l=s.index,c=i[1].lastIndex;return[n.slice(a,c),n.slice(o,l)]}}(),Vj=function(){var e={};return function(n,r){var i=[],s=e[r];s||(e[r]=s=[new RegExp("<(?:\\w+:)?"+r+"\\b[^<>]*>","g"),new RegExp("</(?:\\w+:)?"+r+">","g")]),s[0].lastIndex=s[1].lastIndex=0;for(var a;a=s[0].exec(n);){var o=a.index;if(s[1].lastIndex=s[0].lastIndex,a=s[1].exec(n),!a)return null;var l=s[1].lastIndex;i.push(n.slice(o,l)),s[0].lastIndex=s[1].lastIndex}return i.length==0?null:i}}(),ebe=function(){var e={};return function(n,r){var i=[],s=e[r];s||(e[r]=s=[new RegExp("<(?:\\w+:)?"+r+"\\b[^<>]*>","g"),new RegExp("</(?:\\w+:)?"+r+">","g")]),s[0].lastIndex=s[1].lastIndex=0;for(var a,o=0,l=0;a=s[0].exec(n);){if(o=a.index,i.push(n.slice(l,o)),l=o,s[1].lastIndex=s[0].lastIndex,a=s[1].exec(n),!a)return null;l=s[1].lastIndex,s[0].lastIndex=s[1].lastIndex}return i.push(n.slice(l)),i.length==0?"":i.join("")}}(),tbe=function(){var e={};return function(n,r){var i=[],s=e[r];s||(e[r]=s=[new RegExp("<"+r+"\\b[^<>]*>","ig"),new RegExp("</"+r+">","ig")]),s[0].lastIndex=s[1].lastIndex=0;for(var a;a=s[0].exec(n);){var o=a.index;if(s[1].lastIndex=s[0].lastIndex,a=s[1].exec(n),!a)return null;var l=s[1].lastIndex;i.push(n.slice(o,l)),s[0].lastIndex=s[1].lastIndex}return i.length==0?null:i}}();function Wj(e){return e?e.content&&e.type?Sh(e.content,!0):e.data?Yg(e.data):e.asNodeBuffer&&_t?Yg(e.asNodeBuffer().toString("binary")):e.asBinary?Yg(e.asBinary()):e._data&&e._data.getContent?Yg(Sh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function jj(e){if(!e)return null;if(e.data)return V5(e.data);if(e.asNodeBuffer&&_t)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?V5(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function nbe(e){return e&&e.name.slice(-4)===".bin"?jj(e):Wj(e)}function Vs(e,t){for(var n=e.FullPaths||Zs(e.files),r=t.toLowerCase().replace(/[\/]/g,"\\"),i=r.replace(/\\/g,"/"),s=0;s<n.length;++s){var a=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==a||i==a)return e.files?e.files[n[s]]:e.FileIndex[s]}return null}function gO(e,t){var n=Vs(e,t);if(n==null)throw new Error("Cannot find file "+t+" in zip");return n}function Pn(e,t,n){if(!n)return nbe(gO(e,t));if(!t)return null;try{return Pn(e,t)}catch{return null}}function Ei(e,t,n){if(!n)return Wj(gO(e,t));if(!t)return null;try{return Ei(e,t)}catch{return null}}function rbe(e,t,n){return jj(gO(e,t))}function t8(e){for(var t=e.FullPaths||Zs(e.files),n=[],r=0;r<t.length;++r)t[r].slice(-1)!="/"&&n.push(t[r].replace(/^Root Entry[\/]/,""));return n.sort()}function ibe(e,t,n){if(e.FullPaths){if(Array.isArray(n)&&typeof n[0]=="string"&&(n=n.join("")),typeof n=="string"){var r;return _t?r=Yu(n):r=f2e(n),Tt.utils.cfb_add(e,t,r)}Tt.utils.cfb_add(e,t,n)}else e.file(t,n)}function Gj(e,t){switch(t.type){case"base64":return Tt.read(e,{type:"base64"});case"binary":return Tt.read(e,{type:"binary"});case"buffer":case"array":return Tt.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Gd(e,t){if(e.charAt(0)=="/")return e.slice(1);var n=t.split("/");t.slice(-1)!="/"&&n.pop();for(var r=e.split("/");r.length!==0;){var i=r.shift();i===".."?n.pop():i!=="."&&n.push(i)}return n.join("/")}var qj=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Xj=/\s([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,n8=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?<>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'"<>\s=]+))*\s*[\/\?]?>/mg,sbe=/<[^<>]*>/g,Mr=qj.match(n8)?n8:sbe,abe=/<\w*:/,obe=/<(\/?)\w+:/;function ze(e,t,n){for(var r={},i=0,s=0;i!==e.length&&!((s=e.charCodeAt(i))===32||s===10||s===13);++i);if(t||(r[0]=e.slice(0,i)),i===e.length)return r;var a=e.match(Xj),o=0,l="",c=0,u="",f="",h=1;if(a)for(c=0;c!=a.length;++c){for(f=a[c].slice(1),s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(u=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(i=f.charCodeAt(s+1))==34||i==39?1:0,l=f.slice(s+1+h,f.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),r[u]=l,r[u.toLowerCase()]=l;else{var d=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(r[d]&&u.slice(o-3,o)=="ext")continue;r[d]=l,r[d.toLowerCase()]=l}}return r}function lbe(e,t,n){for(var r={},i=0,s=0;i!==e.length&&!((s=e.charCodeAt(i))===32||s===10||s===13);++i);if(i===e.length)return r;var a=e.match(Xj),o="",l=0,c="",u="",f=1;if(a)for(l=0;l!=a.length;++l){for(u=a[l].slice(1),s=0;s!=u.length&&u.charCodeAt(s)!==61;++s);for(c=u.slice(0,s).trim();u.charCodeAt(s+1)==32;)++s;f=(i=u.charCodeAt(s+1))==34||i==39?1:0,o=u.slice(s+1+f,u.length-f),c.indexOf("_")>0&&(c=c.slice(0,c.indexOf("_"))),r[c]=o,r[c.toLowerCase()]=o}return r}function ga(e){return e.replace(obe,"<$1")}var Yj={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},cbe=hO(Yj),Et=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;function n(r){var i=r+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(e,function(o,l){return Yj[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=i.indexOf("]]>");return n(i.slice(0,s))+i.slice(s+9,a)+n(i.slice(a+3))}return function(i,s){var a=n(i);return s?a.replace(/\r\n/g,`
`):a}}(),ube=/[&<>'"]/g,fbe=/[\u0000-\u001f]/g;function Cm(e){var t=e+"";return t.replace(ube,function(n){return cbe[n]}).replace(/\n/g,"<br/>").replace(fbe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}var r8=function(){var e=/&#(\d+);/g;function t(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(e,t)}}();function Gt(e){switch(e){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function BA(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0;n<e.length;){if(r=e.charCodeAt(n++),r<128){t+=String.fromCharCode(r);continue}if(i=e.charCodeAt(n++),r>191&&r<224){a=(r&31)<<6,a|=i&63,t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(n++),r<240){t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=e.charCodeAt(n++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function i8(e){var t=Eu(2*e.length),n,r,i=1,s=0,a=0,o;for(r=0;r<e.length;r+=i)i=1,(o=e.charCodeAt(r))<128?n=o:o<224?(n=(o&31)*64+(e.charCodeAt(r+1)&63),i=2):o<240?(n=(o&15)*4096+(e.charCodeAt(r+1)&63)*64+(e.charCodeAt(r+2)&63),i=3):(i=4,n=(o&7)*262144+(e.charCodeAt(r+1)&63)*4096+(e.charCodeAt(r+2)&63)*64+(e.charCodeAt(r+3)&63),n-=65536,a=55296+(n>>>10&1023),n=56320+(n&1023)),a!==0&&(t[s++]=a&255,t[s++]=a>>>8,a=0),t[s++]=n%256,t[s++]=n>>>8;return t.slice(0,s).toString("ucs2")}function s8(e){return Yu(e,"binary").toString("utf8")}var Zv="foo bar baz",Qt=_t&&(s8(Zv)==BA(Zv)&&s8||i8(Zv)==BA(Zv)&&i8)||BA,Jg=_t?function(e){return Yu(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)))}return t.join("")},Kj=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/(^|[^\t\n\r ])[\t\n\r ]+$/,"$1").replace(/>\s+/g,">").replace(/\b\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^<>]*>/g,""),i=0;i<e.length;++i)r=r.replace(e[i][0],e[i][1]);return r}}(),hbe=/<\/?(?:vt:)?variant>/g,dbe=/<(?:vt:)([^<"'>]*)>([\s\S]*)</;function a8(e,t){var n=ze(e),r=Vj(e,n.baseType)||[],i=[];if(r.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return i}return r.forEach(function(s){var a=s.replace(hbe,"").match(dbe);a&&i.push({v:Qt(a[2]),t:a[1]})}),i}var pbe=/(^\s|\s$|\n)/;function gbe(e){return Zs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function mbe(e,t,n){return"<"+e+(n!=null?gbe(n):"")+(t!=null?(t.match(pbe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function BE(e){if(_t&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Qt(nc(cO(e)));throw new Error("Bad input format: expected Buffer or string")}var Bn=/<([\/]?)([^\s?><!\/:"]*:|)([^\s?<>:\/"]+)(?:\s+[^<>=?"'\s]+="[^"]*?")*\s*[\/]?>/mg,xbe={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},vbe=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function ybe(e,t){for(var n=1-2*(e[t+7]>>>7),r=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),i=e[t+6]&15,s=5;s>=0;--s)i=i*256+e[t+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function _be(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,a=r?-t:t;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[n+o]=s&255;e[n+6]=(i&15)<<4|s&15,e[n+7]=i>>4|r}var o8=function(e){for(var t=[],n=10240,r=0;r<e[0].length;++r)if(e[0][r])for(var i=0,s=e[0][r].length;i<s;i+=n)t.push.apply(t,e[0][r].slice(i,i+n));return t},l8=_t?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Yu(t)})):o8(e)}:o8,c8=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(Ol(e,i)));return r.join("").replace(Gi,"")},mO=_t?function(e,t,n){return!Buffer.isBuffer(e)||!y1?c8(e,t,n):e.toString("utf16le",t,n).replace(Gi,"")}:c8,u8=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},Jj=_t?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):u8(e,t,n)}:u8,f8=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(zd(e,i)));return r.join("")},yx=_t?function(t,n,r){return Buffer.isBuffer(t)?t.toString("utf8",n,r):f8(t,n,r)}:f8,Zj=function(e,t){var n=ps(e,t);return n>0?yx(e,t+4,t+4+n-1):""},Qj=Zj,eG=function(e,t){var n=ps(e,t);return n>0?yx(e,t+4,t+4+n-1):""},tG=eG,nG=function(e,t){var n=2*ps(e,t);return n>0?yx(e,t+4,t+4+n-1):""},rG=nG,iG=function(t,n){var r=ps(t,n);return r>0?mO(t,n+4,n+4+r):""},sG=iG,aG=function(e,t){var n=ps(e,t);return n>0?yx(e,t+4,t+4+n):""},oG=aG,lG=function(e,t){return ybe(e,t)},P2=lG,cG=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};_t&&(Qj=function(t,n){if(!Buffer.isBuffer(t))return Zj(t,n);var r=t.readUInt32LE(n);return r>0?t.toString("utf8",n+4,n+4+r-1):""},tG=function(t,n){if(!Buffer.isBuffer(t))return eG(t,n);var r=t.readUInt32LE(n);return r>0?t.toString("utf8",n+4,n+4+r-1):""},rG=function(t,n){if(!Buffer.isBuffer(t)||!y1)return nG(t,n);var r=2*t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+r-1)},sG=function(t,n){if(!Buffer.isBuffer(t)||!y1)return iG(t,n);var r=t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+r)},oG=function(t,n){if(!Buffer.isBuffer(t))return aG(t,n);var r=t.readUInt32LE(n);return t.toString("utf8",n+4,n+4+r)},P2=function(t,n){return Buffer.isBuffer(t)?t.readDoubleLE(n):lG(t,n)},cG=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var zd=function(e,t){return e[t]},Ol=function(e,t){return e[t+1]*256+e[t]},bbe=function(e,t){var n=e[t+1]*256+e[t];return n<32768?n:(65535-n+1)*-1},ps=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Nf=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Ebe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Fm(e,t){var n="",r,i,s=[],a,o,l,c;switch(t){case"dbcs":if(c=this.l,_t&&Buffer.isBuffer(this)&&y1)n=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)n+=String.fromCharCode(Ol(this,c)),c+=2;e*=2;break;case"utf8":n=yx(this,this.l,this.l+e);break;case"utf16le":e*=2,n=mO(this,this.l,this.l+e);break;case"wstr":return Fm.call(this,e,"dbcs");case"lpstr-ansi":n=Qj(this,this.l),e=4+ps(this,this.l);break;case"lpstr-cp":n=tG(this,this.l),e=4+ps(this,this.l);break;case"lpwstr":n=rG(this,this.l),e=4+2*ps(this,this.l);break;case"lpp4":e=4+ps(this,this.l),n=sG(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ps(this,this.l),n=oG(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,n="";(a=zd(this,this.l+e++))!==0;)s.push(Jv(a));n=s.join("");break;case"_wstr":for(e=0,n="";(a=Ol(this,this.l+e))!==0;)s.push(Jv(a)),e+=2;e+=2,n=s.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=zd(this,c),this.l=c+1,o=Fm.call(this,e-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Jv(Ol(this,c))),c+=2}n=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=zd(this,c),this.l=c+1,o=Fm.call(this,e-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Jv(zd(this,c))),c+=1}n=s.join("");break;default:switch(e){case 1:return r=zd(this,this.l),this.l++,r;case 2:return r=(t==="i"?bbe:Ol)(this,this.l),this.l+=2,r;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(r=(e>0?Nf:Ebe)(this,this.l),this.l+=4,r):(i=ps(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return e==8?i=P2(this,this.l):i=P2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:n=Jj(this,this.l,e);break}}return this.l+=e,n}var wbe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},Sbe=function(e,t,n){e[n]=t&255,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},Abe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255};function Tbe(e,t,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=t.length;++i)Abe(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if(n==="sbcs"||n=="cpstr"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;r=t.length}else if(n==="hex"){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var a=t.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:r=1,this[this.l]=t&255;break;case 2:r=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:r=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:r=4,wbe(this,t,this.l);break;case 8:if(r=8,n==="f"){_be(this,t,this.l);break}case 16:break;case-4:r=4,Sbe(this,t,this.l);break}return this.l+=r,this}function uG(e,t){var n=Jj(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function jn(e,t){e.l=t,e.read_shift=Fm,e.chk=uG,e.write_shift=Tbe}function ai(e,t){e.l+=t}function Un(e){var t=Eu(e);return jn(t,0),t}function lc(e,t,n){if(e){var r,i,s;jn(e,e.l||0);for(var a=e.length,o=0,l=0;e.l<a;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var c=W2[o]||W2[65535];for(r=e.read_shift(1),s=r&127,i=1;i<4&&r&128;++i)s+=((r=e.read_shift(1))&127)<<7*i;l=e.l+s;var u=c.f&&c.f(e,s,n);if(e.l=l,t(u,c,o))return}}}function xC(){var e=[],t=_t?16384:2048;_t&&Un(t).copy;var n=function(u){var f=Un(u);return jn(f,0),f},r=n(t),i=function(){r&&(r.l&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&e.push(r)),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=n(Math.max(u+1,t)))},a=function(){return i(),Uc(e)},o=function(){return i(),e},l=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(t)};return{next:s,push:l,end:a,_bufs:e,end2:o}}function Om(e,t,n){var r=Hn(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function h8(e,t,n){var r=Hn(e);return r.s=Om(r.s,t.s,n),r.e=Om(r.e,t.s,n),r}function Nm(e,t){if(e.cRel&&e.c<0)for(e=Hn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Hn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=Dt(e);return!e.cRel&&e.cRel!=null&&(n=Fbe(n)),!e.rRel&&e.rRel!=null&&(n=kbe(n)),n}function UA(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Pt(e.s.c)+":"+(e.e.cRel?"":"$")+Pt(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Xt(e.s.r)+":"+(e.e.rRel?"":"$")+Xt(e.e.r):Nm(e.s,t.biff)+":"+Nm(e.e,t.biff)}function xO(e){return parseInt(Cbe(e),10)-1}function Xt(e){return""+(e+1)}function kbe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Cbe(e){return e.replace(/\$(\d+)$/,"$1")}function vO(e){for(var t=Obe(e),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function Pt(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Fbe(e){return e.replace(/^([A-Z])/,"$$$1")}function Obe(e){return e.replace(/^\$([A-Z])/,"$1")}function Nbe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Kr(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function Dt(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function Zh(e){var t=e.indexOf(":");return t==-1?{s:Kr(e),e:Kr(e)}:{s:Kr(e.slice(0,t)),e:Kr(e.slice(t+1))}}function wt(e,t){return typeof t>"u"||typeof t=="number"?wt(e.s,e.e):(typeof e!="string"&&(e=Dt(e)),typeof t!="string"&&(t=Dt(t)),e==t?e:e+":"+t)}function Dbe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e.replace(/'/g,"''")+"'":e}function Mn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=e.length;for(n=0;r<s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===s||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function d8(e,t){var n=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Fs(e.z,n?nr(t):t)}catch{}try{return e.w=Fs((e.XF||{}).numFmtId||(n?14:0),n?nr(t):t)}catch{return""+t}}function wu(e,t,n){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),e.t=="e"?Ji[e.v]||e.v:t==null?d8(e,e.v):d8(e,t))}function Ku(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function Mbe(e){var t={},n=e||{};return n.dense&&(t["!data"]=[]),t}function fG(e,t,n){var r=n||{},i=e?e["!data"]!=null:r.dense,s=e||(i?{"!data":[]}:{});i&&!s["!data"]&&(s["!data"]=[]);var a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Kr(r.origin):r.origin;a=l.r,o=l.c}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=Mn(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=s["!ref"]?u.e.r+1:0)}else c.s.c=c.e.c=c.s.r=c.e.r=0;for(var f=[],h=!1,d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");var p=a+d;i&&(s["!data"][p]||(s["!data"][p]=[]),f=s["!data"][p]);for(var g=t[d],m=0;m!=g.length;++m)if(!(typeof g[m]>"u")){var x={v:g[m],t:""},v=o+m;if(c.s.r>p&&(c.s.r=p),c.s.c>v&&(c.s.c=v),c.e.r<p&&(c.e.r=p),c.e.c<v&&(c.e.c=v),h=!0,g[m]&&typeof g[m]=="object"&&!Array.isArray(g[m])&&!(g[m]instanceof Date))x=g[m];else if(Array.isArray(x.v)&&(x.f=g[m][1],x.v=x.v[0]),x.v===null)if(x.f)x.t="n";else if(r.nullError)x.t="e",x.v=0;else if(r.sheetStubs)x.t="z";else continue;else typeof x.v=="number"?isFinite(x.v)?x.t="n":isNaN(x.v)?(x.t="e",x.v=15):(x.t="e",x.v=7):typeof x.v=="boolean"?x.t="b":x.v instanceof Date?(x.z=r.dateNF||st[14],r.UTC||(x.v=PE(x.v)),r.cellDates?(x.t="d",x.w=Fs(x.z,nr(x.v,r.date1904))):(x.t="n",x.v=nr(x.v,r.date1904),x.w=Fs(x.z,x.v))):x.t="s";if(i)f[v]&&f[v].z&&(x.z=f[v].z),f[v]=x;else{var y=Pt(v)+(p+1);s[y]&&s[y].z&&(x.z=s[y].z),s[y]=x}}}return h&&c.s.c<104e5&&(s["!ref"]=wt(c)),s}function $p(e,t){return fG(null,e,t)}function Rbe(e){return e.read_shift(4,"i")}function ti(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function $be(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function yO(e,t){var n=e.l,r=e.read_shift(1),i=ti(e),s=[],a={t:i,h:i};if(r&1){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push($be(e));a.r=s}else a.r=[{ich:0,ifnt:0}];return e.l=n+t,a}var Ibe=yO;function ma(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function Qh(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var Lbe=ti;function UE(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var Pbe=ti,vC=UE;function zE(e){var t=e.slice(e.l,e.l+4),n=t[0]&1,r=t[0]&2;e.l+=4;var i=r===0?P2([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Nf(t,0)>>2;return n?i/100:i}function hG(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var ed=hG;function qr(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Bbe(e){var t={},n=e.read_shift(1),r=n>>>1,i=e.read_shift(1),s=e.read_shift(2,"i"),a=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=i;var c=nh[i];c&&(t.rgb=w1(c));break;case 2:t.rgb=w1([a,o,l]);break;case 3:t.theme=i;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function Ube(e){var t=e.read_shift(1);e.l++;var n={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return n}function dG(e,t){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=e.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[e.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function zbe(e){return dG(e,1)}function Hbe(e){return dG(e,2)}var _O=2,Li=3,Qv=11,p8=12,B2=19,ey=64,Vbe=65,Wbe=71,jbe=4108,Gbe=4126,ar=80,pG=81,qbe=[ar,pG],Xbe={1:{n:"CodePage",t:_O},2:{n:"Category",t:ar},3:{n:"PresentationFormat",t:ar},4:{n:"ByteCount",t:Li},5:{n:"LineCount",t:Li},6:{n:"ParagraphCount",t:Li},7:{n:"SlideCount",t:Li},8:{n:"NoteCount",t:Li},9:{n:"HiddenCount",t:Li},10:{n:"MultimediaClipCount",t:Li},11:{n:"ScaleCrop",t:Qv},12:{n:"HeadingPairs",t:jbe},13:{n:"TitlesOfParts",t:Gbe},14:{n:"Manager",t:ar},15:{n:"Company",t:ar},16:{n:"LinksUpToDate",t:Qv},17:{n:"CharacterCount",t:Li},19:{n:"SharedDoc",t:Qv},22:{n:"HyperlinksChanged",t:Qv},23:{n:"AppVersion",t:Li,p:"version"},24:{n:"DigSig",t:Vbe},26:{n:"ContentType",t:ar},27:{n:"ContentStatus",t:ar},28:{n:"Language",t:ar},29:{n:"Version",t:ar},255:{},2147483648:{n:"Locale",t:B2},2147483651:{n:"Behavior",t:B2},1919054434:{}},Ybe={1:{n:"CodePage",t:_O},2:{n:"Title",t:ar},3:{n:"Subject",t:ar},4:{n:"Author",t:ar},5:{n:"Keywords",t:ar},6:{n:"Comments",t:ar},7:{n:"Template",t:ar},8:{n:"LastAuthor",t:ar},9:{n:"RevNumber",t:ar},10:{n:"EditTime",t:ey},11:{n:"LastPrinted",t:ey},12:{n:"CreatedDate",t:ey},13:{n:"ModifiedDate",t:ey},14:{n:"PageCount",t:Li},15:{n:"WordCount",t:Li},16:{n:"CharCount",t:Li},17:{n:"Thumbnail",t:Wbe},18:{n:"Application",t:ar},19:{n:"DocSecurity",t:Li},255:{},2147483648:{n:"Locale",t:B2},2147483651:{n:"Behavior",t:B2},1919054434:{}},g8={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Kbe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Jbe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Zbe=Jbe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),nh=Hn(Zbe),Ji={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Ar={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},gG=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],m8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function Qbe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function eEe(e){var t=Qbe();if(!e||!e.match)return t;var n={};if((e.match(Mr)||[]).forEach(function(r){var i=ze(r);switch(i[0].replace(abe,"<")){case"<?xml":break;case"<Types":t.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[i.Extension.toLowerCase()]=i.ContentType;break;case"<Override":t[m8[i.ContentType]]!==void 0&&t[m8[i.ContentType]].push(i.PartName);break}}),t.xmlns!==xbe.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}var qd={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function yC(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Dm(e,t){var n={"!id":{}};if(!e)return n;t.charAt(0)!=="/"&&(t="/"+t);var r={};return(e.match(Mr)||[]).forEach(function(i){var s=ze(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=Et(s.Target),a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Gd(s.Target,t);n[o]=a,r[s.Id]=a}}),n["!id"]=r,n}var tEe="application/vnd.oasis.opendocument.spreadsheet";function nEe(e,t){for(var n=BE(e),r,i;r=Bn.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(i=ze(r[0],!1),i.path=="/"&&i.type!==tEe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw r}}var x8=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function mG(e){var t={};e=Qt(e);for(var n=0;n<x8.length;++n){var r=x8[n],i=th(e,r[0]);i!=null&&i.length>0&&(t[r[1]]=Et(i[1])),r[2]==="date"&&t[r[1]]&&(t[r[1]]=Nr(t[r[1]]))}return t}var rEe=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function xG(e,t,n,r){var i=[];if(typeof e=="string")i=a8(e,r);else for(var s=0;s<e.length;++s)i=i.concat(e[s].map(function(u){return{v:u}}));var a=typeof t=="string"?a8(t,r).map(function(u){return u.v}):t,o=0,l=0;if(a.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":n.NamedRanges=l,n.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=a.slice(o,o+l);break}o+=l}}function iEe(e,t,n){var r={};return t||(t={}),e=Qt(e),rEe.forEach(function(i){var s=(cr(e,i[0])||[])[1];switch(i[2]){case"string":s&&(t[i[1]]=Et(s));break;case"bool":t[i[1]]=s==="true";break;case"raw":var a=th(e,i[0]);a&&a.length>0&&(r[i[1]]=a[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&xG(r.HeadingPairs,r.TitlesOfParts,t,n),t}var sEe=/<[^<>]+>[^<]*/g;function aEe(e,t){var n={},r="",i=e.match(sEe);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=ze(a);switch(ga(o[0])){case"<?xml":break;case"<Properties":break;case"<property":r=Et(o.name);break;case"</property>":r=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":n[r]=Et(u);break;case"bool":n[r]=Gt(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(u,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(u);break;case"filetime":case"date":n[r]=Nr(u);break;case"cy":case"error":n[r]=Et(u);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(t.WTF)throw new Error(a)}}}return n}var oEe={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},zA;function lEe(e,t,n){zA||(zA=hO(oEe)),t=zA[t]||t,e[t]=n}function bO(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function cEe(e,t,n){var r=e.l,i=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-r&3;)++e.l;return i}function uEe(e,t,n){var r=e.read_shift(0,"lpwstr");return r}function vG(e,t,n){return t===31?uEe(e):cEe(e,t,n)}function Mm(e,t,n){return vG(e,t,n===!1?0:4)}function fEe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return vG(e,t,0)}function hEe(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r){var i=e.l;n[r]=e.read_shift(0,"lpwstr").replace(Gi,""),e.l-i&2&&(e.l+=2)}return n}function dEe(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r)n[r]=e.read_shift(0,"lpstr-cp").replace(Gi,"");return n}function pEe(e){var t=e.l,n=U2(e,pG);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var r=U2(e,Li);return[n,r]}function gEe(e){for(var t=e.read_shift(4),n=[],r=0;r<t/2;++r)n.push(pEe(e));return n}function v8(e,t){for(var n=e.read_shift(4),r={},i=0;i!=n;++i){var s=e.read_shift(4),a=e.read_shift(4);r[s]=e.read_shift(a,t===1200?"utf16le":"utf8").replace(Gi,"").replace(Kg,"!"),t===1200&&a%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),r}function yG(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),n}function mEe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function U2(e,t,n){var r=e.read_shift(2),i,s=n||{};if(e.l+=2,t!==p8&&r!==t&&qbe.indexOf(t)===-1&&!((t&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+t+" saw "+r);switch(t===p8?r:t){case 2:return i=e.read_shift(2,"i"),s.raw||(e.l+=2),i;case 3:return i=e.read_shift(4,"i"),i;case 11:return e.read_shift(4)!==0;case 19:return i=e.read_shift(4),i;case 30:e.l+=4,val=Mm(e,e[e.l-4]).replace(/(^|[^\u0000])\u0000+$/,"$1");break;case 31:e.l+=4,val=Mm(e,e[e.l-4]).replace(/(^|[^\u0000])\u0000+$/,"$1");break;case 64:return bO(e);case 65:return yG(e);case 71:return mEe(e);case 80:return Mm(e,r,!s.raw).replace(Gi,"");case 81:return fEe(e,r).replace(Gi,"");case 4108:return gEe(e);case 4126:case 4127:return r==4127?hEe(e):dEe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+r)}}function y8(e,t){var n=e.l,r=e.read_shift(4),i=e.read_shift(4),s=[],a=0,o=0,l=-1,c={};for(a=0;a!=i;++a){var u=e.read_shift(4),f=e.read_shift(4);s[a]=[u,f+n]}s.sort(function(v,y){return v[1]-y[1]});var h={};for(a=0;a!=i;++a){if(e.l!==s[a][1]){var d=!0;if(a>0&&t)switch(t[s[a-1][0]].t){case 2:e.l+2===s[a][1]&&(e.l+=2,d=!1);break;case 80:e.l<=s[a][1]&&(e.l=s[a][1],d=!1);break;case 4108:e.l<=s[a][1]&&(e.l=s[a][1],d=!1);break}if((!t||a==0)&&e.l<=s[a][1]&&(d=!1,e.l=s[a][1]),d)throw new Error("Read Error: Expected address "+s[a][1]+" at "+e.l+" :"+a)}if(t){if(s[a][0]==0&&s.length>a+1&&s[a][1]==s[a+1][1])continue;var p=t[s[a][0]];if(h[p.n]=U2(e,p.t,{raw:!0}),p.p==="version"&&(h[p.n]=String(h[p.n]>>16)+"."+("0000"+String(h[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(h[p.n]){case 0:h[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ra(o=h[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[p.n])}}else if(s[a][0]===1){if(o=h.CodePage=U2(e,_O),Ra(o),l!==-1){var g=e.l;e.l=s[l][1],c=v8(e,o),e.l=g}}else if(s[a][0]===0){if(o===0){l=a,e.l=s[a+1][1];continue}c=v8(e,o)}else{var m=c[s[a][0]],x;switch(e[e.l]){case 65:e.l+=4,x=yG(e);break;case 30:e.l+=4,x=Mm(e,e[e.l-4]).replace(/(^|[^\u0000])\u0000+$/,"$1");break;case 31:e.l+=4,x=Mm(e,e[e.l-4]).replace(/(^|[^\u0000])\u0000+$/,"$1");break;case 3:e.l+=4,x=e.read_shift(4,"i");break;case 19:e.l+=4,x=e.read_shift(4);break;case 5:e.l+=4,x=e.read_shift(8,"f");break;case 11:e.l+=4,x=Fn(e,4);break;case 64:e.l+=4,x=Nr(bO(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[m]=x}}return e.l=n+r,h}function _8(e,t,n){var r=e.content;if(!r)return{};jn(r,0);var i,s,a,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var c=r.read_shift(4),u=r.read_shift(16);if(u!==Tt.utils.consts.HEADER_CLSID&&u!==n)throw new Error("Bad PropertySet CLSID "+u);if(i=r.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=r.read_shift(16),o=r.read_shift(4),i===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);i===2&&(a=r.read_shift(16),l=r.read_shift(4));var f=y8(r,t),h={SystemIdentifier:c};for(var d in f)h[d]=f[d];if(h.FMTID=s,i===1)return h;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var p;try{p=y8(r,null)}catch{}for(d in p)h[d]=p[d];return h.FMTID=[s,a],h}function Ec(e,t){return e.read_shift(t),null}function xEe(e,t,n){for(var r=[],i=e.l+t;e.l<i;)r.push(n(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return r}function Fn(e,t){return e.read_shift(t)===1}function bn(e){return e.read_shift(2,"u")}function _G(e,t){return xEe(e,t,bn)}function bG(e){var t=e.read_shift(1),n=e.read_shift(1);return n===1?t:t===1}function Y0(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",s=qs;if(n&&n.biff>=8&&(qs=1200),!n||n.biff==8){var a=e.read_shift(1);a&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?e.read_shift(r,i):"";return qs=s,o}function vEe(e){var t=qs;qs=1200;var n=e.read_shift(2),r=e.read_shift(1),i=r&4,s=r&8,a=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),i&&(l=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",f=n===0?"":e.read_shift(n,u);return s&&(e.l+=4*o),i&&(e.l+=l),c.t=f,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),qs=t,c}function Th(e,t,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}var i=e.read_shift(1);return i===0?r=e.read_shift(t,"sbcs-cont"):r=e.read_shift(t,"dbcs-cont"),r}function _x(e,t,n){var r=e.read_shift(n&&n.biff==2?1:2);return r===0?(e.l++,""):Th(e,r,n)}function td(e,t,n){if(n.biff>5)return _x(e,t,n);var r=e.read_shift(1);return r===0?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function yEe(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}function _Ee(e){var t=e.read_shift(4),n=e.l,r=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),e.l=n);var i=e.read_shift((r?t-24:t)>>1,"utf16le").replace(Gi,"");return r&&(e.l+=24),i}function bEe(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var r=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=e.read_shift(4);if(i===0)return n+r.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=e.read_shift(s>>1,"utf16le").replace(Gi,"");return n+a}function EEe(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return _Ee(e);case"0303000000000000c000000000000046":return bEe(e);default:throw new Error("Unsupported Moniker "+n)}}function ty(e){var t=e.read_shift(4),n=t>0?e.read_shift(t,"utf16le").replace(Gi,""):"";return n}function wEe(e,t){var n=e.l+t,r=e.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var i=e.read_shift(2);e.l+=2;var s,a,o,l,c="",u,f;i&16&&(s=ty(e,n-e.l)),i&128&&(a=ty(e,n-e.l)),(i&257)===257&&(o=ty(e,n-e.l)),(i&257)===1&&(l=EEe(e,n-e.l)),i&8&&(c=ty(e,n-e.l)),i&32&&(u=e.read_shift(16)),i&64&&(f=bO(e)),e.l=n;var h=a||o||l||"";h&&c&&(h+="#"+c),h||(h="#"+c),i&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var d={Target:h};return u&&(d.guid=u),f&&(d.time=f),s&&(d.Tooltip=s),d}function EG(e){var t=e.read_shift(1),n=e.read_shift(1),r=e.read_shift(1),i=e.read_shift(1);return[t,n,r,i]}function wG(e,t){var n=EG(e);return n[3]=0,n}function to(e,t,n){var r=e.read_shift(2),i=e.read_shift(2),s={r,c:i,ixfe:0};if(n&&n.biff==2||t==7){var a=e.read_shift(1);s.ixfe=a&63,e.l+=2}else s.ixfe=e.read_shift(2);return s}function SEe(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}function AEe(e,t,n){return t===0?"":td(e,t,n)}function TEe(e,t,n){var r=n.biff>8?4:2,i=e.read_shift(r),s=e.read_shift(r,"i"),a=e.read_shift(r,"i");return[i,s,a]}function SG(e){var t=e.read_shift(2),n=zE(e);return[t,n]}function kEe(e,t,n){e.l+=4,t-=4;var r=e.l+t,i=Y0(e,t,n),s=e.read_shift(2);if(r-=e.l,s!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+s);return e.l+=s,i}function HE(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2);return{s:{c:r,r:t},e:{c:i,r:n}}}function AG(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(1),i=e.read_shift(1);return{s:{c:r,r:t},e:{c:i,r:n}}}var CEe=AG;function TG(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2);return e.l+=12,[n,t,r]}function FEe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function OEe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Br(e){e.l+=2,e.l+=e.read_shift(2)}var NEe={0:Br,4:Br,5:Br,6:Br,7:OEe,8:Br,9:Br,10:Br,11:Br,12:Br,13:FEe,14:Br,15:Br,16:Br,17:Br,18:Br,19:Br,20:Br,21:TG};function DEe(e,t){for(var n=e.l+t,r=[];e.l<n;){var i=e.read_shift(2);e.l-=2;try{r[i]=NEe[i](e,n-e.l)}catch{return e.l=n,r}}return e.l!=n&&(e.l=n),r}function ny(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),t-=2,t>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function MEe(e,t){return t===0||e.read_shift(2),1200}function REe(e,t,n){if(n.enc)return e.l+=t,"";var r=e.l,i=td(e,0,n);return e.read_shift(t+r-e.l),i}function $Ee(e,t,n){var r=n&&n.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function IEe(e,t,n){var r="";if(n.biff==4)return r=Y0(e,0,n),r.length===0&&(r="Sheet1"),{name:r};var i=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}return r=Y0(e,0,n),r.length===0&&(r="Sheet1"),{pos:i,hs:s,dt:a,name:r}}function LEe(e,t){for(var n=e.l+t,r=e.read_shift(4),i=e.read_shift(4),s=[],a=0;a!=i&&e.l<n;++a)s.push(vEe(e));return s.Count=r,s.Unique=i,s}function PEe(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}function BEe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var r=e.read_shift(1);return e.l+=3,r&7&&(t.level=r&7),r&32&&(t.hidden=!0),r&64&&(t.hpt=n/20),t}function UEe(e){var t=SEe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var n=e.read_shift(4);return n!==0}function zEe(e){return e.read_shift(2),e.read_shift(4)}function b8(e,t,n){var r=0;n&&n.biff==2||(r=e.read_shift(2));var i=e.read_shift(2);n&&n.biff==2&&(r=1-(i>>15),i&=32767);var s={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[s,i]}function HEe(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,n],Dim:[r,i],Flags:s,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function VEe(e,t,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=e.read_shift(2);return{RTL:r&64}}function WEe(){}function jEe(e,t,n){var r={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return r.name=Y0(e,0,n),r}function GEe(e,t,n){var r=to(e,t,n);return r.isst=e.read_shift(4),r}function qEe(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=e.l+t,i=to(e,t,n),s=_x(e,r-e.l,n);return i.val=s,i}function XEe(e,t,n){var r=e.read_shift(2),i=td(e,0,n);return[r,i]}var YEe=td;function E8(e,t,n){var r=e.l+t,i=n.biff==8||!n.biff?4:2,s=e.read_shift(i),a=e.read_shift(i),o=e.read_shift(2),l=e.read_shift(2);return e.l=r,{s:{r:s,c:o},e:{r:a,c:l}}}function KEe(e){var t=e.read_shift(2),n=e.read_shift(2),r=SG(e);return{r:t,c:n,ixfe:r[0],rknum:r[1]}}function JEe(e,t){for(var n=e.l+t-2,r=e.read_shift(2),i=e.read_shift(2),s=[];e.l<n;)s.push(SG(e));if(e.l!==n)throw new Error("MulRK read error");var a=e.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r,c:i,C:a,rkrec:s}}function ZEe(e,t){for(var n=e.l+t-2,r=e.read_shift(2),i=e.read_shift(2),s=[];e.l<n;)s.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var a=e.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r,c:i,C:a,ixfe:s}}function QEe(e,t,n,r){var i={},s=e.read_shift(4),a=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return i.patternType=Kbe[o>>26],r.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function ewe(e,t,n){var r={};return r.ifnt=e.read_shift(2),r.numFmtId=e.read_shift(2),r.flags=e.read_shift(2),r.fStyle=r.flags>>2&1,t-=6,r.data=QEe(e,t,r.fStyle,n),r}function twe(e){var t={};return t.ifnt=e.read_shift(1),e.l++,t.flags=e.read_shift(1),t.numFmtId=t.flags&63,t.flags>>=6,t.fStyle=0,t.data={},t}function nwe(e){var t={};return t.ifnt=e.read_shift(1),t.numFmtId=e.read_shift(1),t.flags=e.read_shift(2),t.fStyle=t.flags>>2&1,t.data={},t}function rwe(e){var t={};return t.ifnt=e.read_shift(1),t.numFmtId=e.read_shift(1),t.flags=e.read_shift(2),t.fStyle=t.flags>>2&1,t.data={},t}function iwe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function swe(e,t,n){var r=to(e,6,n),i=bG(e);return r.val=i,r.t=i===!0||i===!1?"b":"e",r}function awe(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=to(e,6,n),i=qr(e);return r.val=i,r}var w8=AEe;function owe(e,t,n){var r=e.l+t,i=e.read_shift(2),s=e.read_shift(2);if(n.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=Th(e,s),o=[];r>e.l;)o.push(_x(e));return[s,i,a,o]}function S8(e,t,n){var r=e.read_shift(2),i,s={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(i=kEe(e,t-2,n)),s.body=i||e.read_shift(t-2),typeof i=="string"&&(s.Name=i),s}function A8(e,t,n){var r=e.l+t,i=e.read_shift(2),s=e.read_shift(1),a=e.read_shift(1),o=e.read_shift(n&&n.biff==2?1:2),l=0;(!n||n.biff>=5)&&(n.biff!=5&&(e.l+=2),l=e.read_shift(2),n.biff==5&&(e.l+=2),e.l+=4);var c=Th(e,a,n);i&32&&(c=gG[c.charCodeAt(0)]);var u=r-e.l;n&&n.biff==2&&--u;var f=r==e.l||o===0||!(u>0)?[]:ITe(e,u,n,o);return{chKey:s,Name:c,itab:l,rgce:f}}function kG(e,t,n){if(n.biff<8||!(n.biff>8)&&t==e[e.l]+(e[e.l+1]==3?1:0)+1)return T8(e,t,n);for(var r=[],i=e.l+t,s=e.read_shift(n.biff>8?4:2);s--!==0;)r.push(TEe(e,n.biff>8?12:6,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function T8(e,t,n){e[e.l+1]==3&&e[e.l]++;var r=Y0(e,t,n);return r.charCodeAt(0)==3?r.slice(1):r}function lwe(e,t,n){if(n.biff<8){e.l+=t;return}var r=e.read_shift(2),i=e.read_shift(2),s=Th(e,r,n),a=Th(e,i,n);return[s,a]}function cwe(e,t,n){var r=AG(e);e.l++;var i=e.read_shift(1);return t-=8,[LTe(e,t,n),i,r]}function k8(e,t,n){var r=CEe(e);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[r,RTe(e,t,n)]}function uwe(e){var t=e.read_shift(4)!==0,n=e.read_shift(4)!==0,r=e.read_shift(4);return[t,n,r]}function fwe(e,t,n){var r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),o=td(e,0,n);return[{r,c:i},o,a,s]}function hwe(e,t,n){if(n&&n.biff<8){var r=e.read_shift(2),i=e.read_shift(2);if(r==65535||r==-1)return;var s=e.read_shift(2),a=e.read_shift(Math.min(s,2048),"cpstr");return[{r,c:i},a]}return fwe(e,t,n)}function dwe(e,t){for(var n=[],r=e.read_shift(2);r--;)n.push(HE(e));return n}function pwe(e,t,n){if(n&&n.biff<8)return mwe(e,t,n);var r=TG(e),i=DEe(e,t-22,r[1]);return{cmo:r,ft:i}}var gwe={8:function(e,t){var n=e.l+t;e.l+=10;var r=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=n,{fmt:r}}};function mwe(e,t,n){e.l+=4;var r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var a=[];return a.push((gwe[r]||ai)(e,t,n)),{cmo:[i,r,s],ft:a}}function xwe(e,t,n){var r=e.l,i="";try{e.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:a=yEe(e,6,n);var o=e.read_shift(2);e.read_shift(2),bn(e,2);var l=e.read_shift(2);e.l+=l;for(var c=1;c<e.lens.length-1;++c){if(e.l-r!=e.lens[c])throw new Error("TxO: bad continue record");var u=e[e.l],f=Th(e,e.lens[c+1]-e.lens[c]-1);if(i+=f,i.length>=(u?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return e.l=r+t,{t:i}}catch{return e.l=r+t,{t:i}}}function vwe(e,t){var n=HE(e);e.l+=16;var r=wEe(e,t-24);return[n,r]}function ywe(e,t){e.read_shift(2);var n=HE(e),r=e.read_shift((t-10)/2,"dbcs-cont");return r=r.replace(Gi,""),[n,r]}function _we(e){var t=[0,0],n;return n=e.read_shift(2),t[0]=g8[n]||n,n=e.read_shift(2),t[1]=g8[n]||n,t}function bwe(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(wG(e));return n}function Ewe(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(wG(e));return n}function wwe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function CG(e,t,n){if(!n.cellStyles)return ai(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),s=e.read_shift(r),a=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);r==2&&(e.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function Swe(e,t){var n={};return t<32||(e.l+=16,n.header=qr(e),n.footer=qr(e),e.l+=2),n}function Awe(e,t,n){var r={area:!1};if(n.biff!=5)return e.l+=t,r;var i=e.read_shift(1);return e.l+=3,i&16&&(r.area=!0),r}var Twe=to,kwe=_G,Cwe=_x;function Fwe(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i={fmt:t,env:n,len:r,data:e.slice(e.l,e.l+r)};return e.l+=r,i}function Owe(e,t,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=to(e,7,n),i=td(e,t-7,n);return r.t="str",r.val=i,r}function Nwe(e,t,n){var r=to(e,7,n),i=qr(e);return r.t="n",r.val=i,r}function Dwe(e,t,n){var r=to(e,7,n),i=e.read_shift(2);return r.t="n",r.val=i,r}function Mwe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Rwe(e,t,n){var r=e.l+7,i=to(e,6,n);e.l=r;var s=bG(e);return i.val=s,i.t=s===!0||s===!1?"b":"e",i}function $we(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Iwe(e,t,n){var r=e.l+t,i=to(e,6,n),s=e.read_shift(2),a=Th(e,s,n);return e.l=r,i.t="str",i.val=a,i}function Lwe(e){var t=e.read_shift(4),n=e.read_shift(1),r=e.read_shift(n,"sbcs");return r.length===0&&(r="Sheet1"),{flags:t,name:r}}var Pwe=[2,3,48,49,131,139,140,245],C8=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=hO({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(o,l){var c=[],u=Eu(1);switch(l.type){case"base64":u=ds(Cs(o));break;case"binary":u=ds(o);break;case"buffer":case"array":u=o;break}jn(u,0);var f=u.read_shift(1),h=!!(f&136),d=!1,p=!1;switch(f){case 2:break;case 3:break;case 48:d=!0,h=!0;break;case 49:d=!0,h=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,m=521;f==2&&(g=u.read_shift(2)),u.l+=3,f!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(m=u.read_shift(2));var x=u.read_shift(2);l.codepage,f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&e[u[u.l]],u.l+=1,u.l+=2),p&&(u.l+=36);for(var v=[],y={},_=Math.min(u.length,f==2?521:m-10-(d?264:0)),b=p?32:11;u.l<_&&u[u.l]!=13;)switch(y={},y.name=nc(u.slice(u.l,u.l+b)).replace(/[\u0000\r\n][\S\s]*$/g,""),u.l+=b,y.type=String.fromCharCode(u.read_shift(1)),f!=2&&!p&&(y.offset=u.read_shift(4)),y.len=u.read_shift(1),f==2&&(y.offset=u.read_shift(2)),y.dec=u.read_shift(1),y.name.length&&v.push(y),f!=2&&(u.l+=p?13:14),y.type){case"B":(!d||y.len!=8)&&l.WTF&&console.log("Skipping "+y.name+":"+y.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+y.name+":"+y.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+y.type)}if(u[u.l]!==13&&(u.l=m-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=m;var w=0,E=0;for(c[0]=[],E=0;E!=v.length;++E)c[0][E]=v[E].name;for(;g-- >0;){if(u[u.l]===42){u.l+=x;continue}for(++u.l,c[++w]=[],E=0,E=0;E!=v.length;++E){var A=u.slice(u.l,u.l+v[E].len);u.l+=v[E].len,jn(A,0);var S=nc(A);switch(v[E].type){case"C":S.trim().length&&(c[w][E]=S.replace(/([^\s])\s+$/,"$1"));break;case"D":S.length===8?(c[w][E]=new Date(Date.UTC(+S.slice(0,4),+S.slice(4,6)-1,+S.slice(6,8),0,0,0,0)),l&&l.UTC||(c[w][E]=Ah(c[w][E]))):c[w][E]=S;break;case"F":c[w][E]=parseFloat(S.trim());break;case"+":case"I":c[w][E]=p?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(S.trim().toUpperCase()){case"Y":case"T":c[w][E]=!0;break;case"N":case"F":c[w][E]=!1;break;case"":case"\0":case"?":break;default:throw new Error("DBF Unrecognized L:|"+S+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[w][E]="##MEMO##"+(p?parseInt(S.trim(),10):A.read_shift(4));break;case"N":S=S.replace(/\u0000/g,"").trim(),S&&S!="."&&(c[w][E]=+S||0);break;case"@":c[w][E]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":{var k=A.read_shift(4),T=A.read_shift(4);if(k==0&&T==0)break;c[w][E]=new Date((k-2440588)*864e5+T),l&&l.UTC||(c[w][E]=Ah(c[w][E]))}break;case"Y":c[w][E]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[w][E]=-A.read_shift(-8,"f");break;case"B":if(d&&v[E].len==8){c[w][E]=A.read_shift(8,"f");break}case"G":case"P":A.l+=v[E].len;break;case"0":if(v[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+v[E].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=v,c}function r(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=$p(n(o,c),c);return u["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,u}function i(o,l){try{var c=Ku(r(o,l),l);return c.bookType="dbf",c}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){if(!o["!ref"])throw new Error("Cannot export empty sheet to DBF");var c=l||{},u=qs;if(+c.codepage>=0&&Ra(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var f=xC(),h=wC(o,{header:1,raw:!0,cellDates:!0}),d=h[0],p=h.slice(1),g=o["!cols"]||[],m=0,x=0,v=0,y=1;for(m=0;m<d.length;++m){if(((g[m]||{}).DBF||{}).name){d[m]=g[m].DBF.name,++v;continue}if(d[m]!=null){if(++v,typeof d[m]=="number"&&(d[m]=d[m].toString(10)),typeof d[m]!="string")throw new Error("DBF Invalid column name "+d[m]+" |"+typeof d[m]+"|");if(d.indexOf(d[m])!==m){for(x=0;x<1024;++x)if(d.indexOf(d[m]+"_"+x)==-1){d[m]+="_"+x;break}}}}var _=Mn(o["!ref"]),b=[],w=[],E=[];for(m=0;m<=_.e.c-_.s.c;++m){var A="",S="",k=0,T=[];for(x=0;x<p.length;++x)p[x][m]!=null&&T.push(p[x][m]);if(T.length==0||d[m]==null){b[m]="?";continue}for(x=0;x<T.length;++x){switch(typeof T[x]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=T[x]instanceof Date?"D":"C";break;default:S="C"}k=Math.max(k,String(T[x]).length),A=A&&A!=S?"C":S}k>250&&(k=250),S=((g[m]||{}).DBF||{}).type,S=="C"&&g[m].DBF.len>k&&(k=g[m].DBF.len),A=="B"&&S=="N"&&(A="N",E[m]=g[m].DBF.dec,k=g[m].DBF.len),w[m]=A=="C"||S=="N"?k:s[A]||0,y+=w[m],b[m]=A}var O=f.next(32);for(O.write_shift(4,318902576),O.write_shift(4,p.length),O.write_shift(2,296+32*v),O.write_shift(2,y),m=0;m<4;++m)O.write_shift(4,0);var C=+t[qs]||3;for(O.write_shift(4,0|C<<8),e[C]!=+c.codepage&&(c.codepage&&console.error("DBF Unsupported codepage "+qs+", using 1252"),qs=1252),m=0,x=0;m<d.length;++m)if(d[m]!=null){var D=f.next(32),N=(d[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,N,"sbcs"),D.write_shift(1,b[m]=="?"?"C":b[m],"sbcs"),D.write_shift(4,x),D.write_shift(1,w[m]||s[b[m]]||0),D.write_shift(1,E[m]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),x+=w[m]||s[b[m]]||0}var R=f.next(264);for(R.write_shift(4,13),m=0;m<65;++m)R.write_shift(4,0);for(m=0;m<p.length;++m){var L=f.next(y);for(L.write_shift(1,0),x=0;x<d.length;++x)if(d[x]!=null)switch(b[x]){case"L":L.write_shift(1,p[m][x]==null?63:p[m][x]?84:70);break;case"B":L.write_shift(8,p[m][x]||0,"f");break;case"N":var I="0";for(typeof p[m][x]=="number"&&(I=p[m][x].toFixed(E[x]||0)),I.length>w[x]&&(I=I.slice(0,w[x])),v=0;v<w[x]-I.length;++v)L.write_shift(1,32);L.write_shift(1,I,"sbcs");break;case"D":p[m][x]?(L.write_shift(4,("0000"+p[m][x].getFullYear()).slice(-4),"sbcs"),L.write_shift(2,("00"+(p[m][x].getMonth()+1)).slice(-2),"sbcs"),L.write_shift(2,("00"+p[m][x].getDate()).slice(-2),"sbcs")):L.write_shift(8,"00000000","sbcs");break;case"C":var Y=L.l,X=String(p[m][x]!=null?p[m][x]:"").slice(0,w[x]);for(L.write_shift(1,X,"cpstr"),Y+=w[x]-L.l,v=0;v<Y;++v)L.write_shift(1,32);break}}return qs=u,f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}}(),Bwe=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Zs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1").replace("{","\\{")+"|\\|)","gm");try{t=new RegExp("\x1BN("+Zs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm")}catch{}var n=function(d,p){var g=e[p];return typeof g=="number"?W5(g):g},r=function(d,p,g){var m=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return m==59?d:W5(m)};e["|"]=254;var i=function(d){return d.replace(/\n/g,"\x1B :").replace(/\r/g,"\x1B =")};function s(d,p){switch(p.type){case"base64":return a(Cs(d),p);case"binary":return a(d,p);case"buffer":return a(_t&&Buffer.isBuffer(d)?d.toString("binary"):nc(d),p);case"array":return a(Sh(d),p)}throw new Error("Unrecognized type "+p.type)}function a(d,p){var g=d.split(/[\n\r]+/),m=-1,x=-1,v=0,y=0,_=[],b=[],w=null,E={},A=[],S=[],k=[],T=0,O,C={Workbook:{WBProps:{},Names:[]}};for(+p.codepage>=0&&Ra(+p.codepage);v!==g.length;++v){T=0;var D=g[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),N=D.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),R=N[0],L;if(D.length>0)switch(R){case"ID":break;case"E":break;case"B":break;case"O":for(y=1;y<N.length;++y)switch(N[y].charAt(0)){case"V":{var I=parseInt(N[y].slice(1),10);I>=1&&I<=4&&(C.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(N[1].charAt(0)){case"P":b.push(D.slice(3).replace(/;;/g,";"));break}break;case"NN":{var Y={Sheet:0};for(y=1;y<N.length;++y)switch(N[y].charAt(0)){case"N":Y.Name=N[y].slice(1);break;case"E":Y.Ref=(p&&p.sheet||"Sheet1")+"!"+rh(N[y].slice(1));break}C.Workbook.Names.push(Y)}break;case"C":var X=!1,oe=!1,xe=!1,_e=!1,ve=-1,Oe=-1,Pe="",Ge="z",z="";for(y=1;y<N.length;++y)switch(N[y].charAt(0)){case"A":z=N[y].slice(1);break;case"X":x=parseInt(N[y].slice(1),10)-1,oe=!0;break;case"Y":for(m=parseInt(N[y].slice(1),10)-1,oe||(x=0),O=_.length;O<=m;++O)_[O]=[];break;case"K":L=N[y].slice(1),L.charAt(0)==='"'?(L=L.slice(1,L.length-1),Ge="s"):L==="TRUE"||L==="FALSE"?(L=L==="TRUE",Ge="b"):L.charAt(0)=="#"&&Ar[L]!=null?(Ge="e",L=Ar[L]):isNaN(_s(L))||(L=_s(L),Ge="n",w!==null&&ja(w)&&p.cellDates&&(L=iu(C.Workbook.WBProps.date1904?L+1462:L),Ge=typeof L=="number"?"n":"d")),X=!0;break;case"E":_e=!0,Pe=rh(N[y].slice(1),{r:m,c:x});break;case"S":xe=!0;break;case"G":break;case"R":ve=parseInt(N[y].slice(1),10)-1;break;case"C":Oe=parseInt(N[y].slice(1),10)-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}if(X&&(_[m][x]?(_[m][x].t=Ge,_[m][x].v=L):_[m][x]={t:Ge,v:L},w&&(_[m][x].z=w),p.cellText!==!1&&w&&(_[m][x].w=Fs(_[m][x].z,_[m][x].v,{date1904:C.Workbook.WBProps.date1904})),w=null),xe){if(_e)throw new Error("SYLK shared formula cannot have own formula");var q=ve>-1&&_[ve][Oe];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");Pe=LG(q[1],{r:m-ve,c:x-Oe})}Pe&&(_[m][x]?_[m][x].f=Pe:_[m][x]={t:"n",f:Pe}),z&&(_[m][x]||(_[m][x]={t:"z"}),_[m][x].c=[{a:"SheetJSYLK",t:z}]);break;case"F":var G=0;for(y=1;y<N.length;++y)switch(N[y].charAt(0)){case"X":x=parseInt(N[y].slice(1),10)-1,++G;break;case"Y":for(m=parseInt(N[y].slice(1),10)-1,O=_.length;O<=m;++O)_[O]=[];break;case"M":T=parseInt(N[y].slice(1),10)/20;break;case"F":break;case"G":break;case"P":w=b[parseInt(N[y].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(k=N[y].slice(1).split(" "),O=parseInt(k[0],10);O<=parseInt(k[1],10);++O)T=parseInt(k[2],10),S[O-1]=T===0?{hidden:!0}:{wch:T};break;case"C":x=parseInt(N[y].slice(1),10)-1,S[x]||(S[x]={});break;case"R":m=parseInt(N[y].slice(1),10)-1,A[m]||(A[m]={}),T>0?(A[m].hpt=T,A[m].hpx=S1(T)):T===0&&(A[m].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}G<1&&(w=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}}return A.length>0&&(E["!rows"]=A),S.length>0&&(E["!cols"]=S),S.forEach(function(H){K0(H)}),p&&p.sheetRows&&(_=_.slice(0,p.sheetRows)),[_,E,C]}function o(d,p){var g=s(d,p),m=g[0],x=g[1],v=g[2],y=Hn(p);y.date1904=(((v||{}).Workbook||{}).WBProps||{}).date1904;var _=$p(m,y);Zs(x).forEach(function(w){_[w]=x[w]});var b=Ku(_,p);return Zs(v).forEach(function(w){b[w]=v[w]}),b.bookType="sylk",b}function l(d,p,g,m,x,v){var y="C;Y"+(g+1)+";X"+(m+1)+";K";switch(d.t){case"n":y+=isFinite(d.v)?d.v||0:Ji[isNaN(d.v)?36:7],d.f&&!d.F&&(y+=";E"+yAe(d.f,{r:g,c:m}));break;case"b":y+=d.v?"TRUE":"FALSE";break;case"e":y+=d.w||Ji[d.v]||d.v;break;case"d":y+=nr(Nr(d.v,v),v);break;case"s":y+='"'+(d.v==null?"":String(d.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return y}function c(d,p,g){var m="C;Y"+(p+1)+";X"+(g+1)+";A";return m+=i(d.map(function(x){return x.t}).join("")),m}function u(d,p){p.forEach(function(g,m){var x="F;W"+(m+1)+" "+(m+1)+" ";g.hidden?x+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=H2(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=V2(g.wpx)),typeof g.wch=="number"&&(x+=Math.round(g.wch))),x.charAt(x.length-1)!=" "&&d.push(x)})}function f(d,p){p.forEach(function(g,m){var x="F;";g.hidden?x+="M0;":g.hpt?x+="M"+20*g.hpt+";":g.hpx&&(x+="M"+20*$G(g.hpx)+";"),x.length>2&&d.push(x+"R"+(m+1))})}function h(d,p,g){p||(p={}),p._formats=["General"];var m=["ID;PSheetJS;N;E"],x=[],v=Mn(d["!ref"]||"A1"),y,_=d["!data"]!=null,b=`\r
`,w=(((g||{}).Workbook||{}).WBProps||{}).date1904,E="General";m.push("P;PGeneral");var A=v.s.r,S=v.s.c,k=[];if(d["!ref"]){for(A=v.s.r;A<=v.e.r;++A)if(!(_&&!d["!data"][A])){for(k=[],S=v.s.c;S<=v.e.c;++S)y=_?d["!data"][A][S]:d[Pt(S)+Xt(A)],!(!y||!y.c)&&k.push(c(y.c,A,S));k.length&&x.push(k.join(b))}}if(d["!ref"]){for(A=v.s.r;A<=v.e.r;++A)if(!(_&&!d["!data"][A])){for(k=[],S=v.s.c;S<=v.e.c;++S)if(y=_?d["!data"][A][S]:d[Pt(S)+Xt(A)],!(!y||y.v==null&&(!y.f||y.F))){if((y.z||(y.t=="d"?st[14]:"General"))!=E){var T=p._formats.indexOf(y.z);T==-1&&(p._formats.push(y.z),T=p._formats.length-1,m.push("P;P"+y.z.replace(/;/g,";;"))),k.push("F;P"+T+";Y"+(A+1)+";X"+(S+1))}k.push(l(y,d,A,S,p,w))}x.push(k.join(b))}}return m.push("F;P0;DG0G8;M255"),d["!cols"]&&u(m,d["!cols"]),d["!rows"]&&f(m,d["!rows"]),d["!ref"]&&m.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" ")),m.push("O;L;D;B"+(w?";V4":"")+";K47;G100 0.001"),delete p._formats,m.join(b)+b+x.join(b)+b+"E"+b}return{to_workbook:o,from_sheet:h}}(),Uwe=function(){function e(o,l){switch(l.type){case"base64":return t(Cs(o),l);case"binary":return t(o,l);case"buffer":return t(_t&&Buffer.isBuffer(o)?o.toString("binary"):nc(o),l);case"array":return t(Sh(o),l)}throw new Error("Unrecognized type "+l.type)}function t(o,l){for(var c=o.split(`
`),u=-1,f=-1,h=0,d=[];h!==c.length;++h){if(c[h].trim()==="BOT"){d[++u]=[],f=0;continue}if(!(u<0)){var p=c[h].trim().split(","),g=p[0],m=p[1];++h;for(var x=c[h]||"";(x.match(/["]/g)||[]).length&1&&h<c.length-1;)x+=`
`+c[++h];switch(x=x.trim(),+g){case-1:if(x==="BOT"){d[++u]=[],f=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?d[u][f]=!0:x==="FALSE"?d[u][f]=!1:isNaN(_s(m))?isNaN(b1(m).getDate())?d[u][f]=m:(d[u][f]=Nr(m),l&&l.UTC||(d[u][f]=Ah(d[u][f]))):d[u][f]=_s(m),++f;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),d[u][f++]=x!==""?x:null;break}if(x==="EOD")break}}return l&&l.sheetRows&&(d=d.slice(0,l.sheetRows)),d}function n(o,l){return $p(e(o,l),l)}function r(o,l){var c=Ku(n(o,l),l);return c.bookType="dif",c}function i(o,l){return"0,"+String(o)+`\r
`+l}function s(o){return`1,0\r
"`+o.replace(/"/g,'""')+'"'}function a(o){if(!o["!ref"])throw new Error("Cannot export empty sheet to DIF");for(var l=Mn(o["!ref"]),c=o["!data"]!=null,u=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(l.e.r-l.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(l.e.c-l.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],f=l.s.r;f<=l.e.r;++f){for(var h=c?o["!data"][f]:[],d=`-1,0\r
BOT\r
`,p=l.s.c;p<=l.e.c;++p){var g=c?h&&h[p]:o[Dt({r:f,c:p})];if(g==null){d+=`1,0\r
""\r
`;continue}switch(g.t){case"n":g.w!=null?d+="0,"+g.w+`\r
V`:g.v!=null?d+=i(g.v,"V"):g.f!=null&&!g.F?d+=s("="+g.f):d+=`1,0\r
""`;break;case"b":d+=g.v?i(1,"TRUE"):i(0,"FALSE");break;case"s":d+=s(isNaN(+g.v)?g.v:'="'+g.v+'"');break;case"d":g.w||(g.w=Fs(g.z||st[14],nr(Nr(g.v)))),d+=i(g.w,"V");break;default:d+=`1,0\r
""`}d+=`\r
`}u.push(d)}return u.join("")+`-1,0\r
EOD`}return{to_workbook:r,to_sheet:n,from_sheet:a}}(),zwe=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(f,h){for(var d=f.split(`
`),p=-1,g=-1,m=0,x=[];m!==d.length;++m){var v=d[m].trim().split(":");if(v[0]==="cell"){var y=Kr(v[1]);if(x.length<=y.r)for(p=x.length;p<=y.r;++p)x[p]||(x[p]=[]);switch(p=y.r,g=y.c,v[2]){case"t":x[p][g]=e(v[3]);break;case"v":x[p][g]=+v[3];break;case"vtf":var _=v[v.length-1];case"vtc":switch(v[3]){case"nl":x[p][g]=!!+v[4];break;default:x[p][g]=v[v.length-1].charAt(0)=="#"?{t:"e",v:Ar[v[v.length-1]]}:+v[4];break}v[2]=="vtf"&&(x[p][g]=[x[p][g],_])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function r(f,h){return $p(n(f,h),h)}function i(f,h){return Ku(r(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var h=[],d=[],p,g="",m=Zh(f["!ref"]),x=f["!data"]!=null,v=m.s.r;v<=m.e.r;++v)for(var y=m.s.c;y<=m.e.c;++y)if(g=Dt({r:v,c:y}),p=x?(f["!data"][v]||[])[y]:f[g],!(!p||p.v==null||p.t==="z")){switch(d=["cell",g,"t"],p.t){case"s":d.push(t(p.v));break;case"b":d[2]="vt"+(p.f?"f":"c"),d[3]="nl",d[4]=p.v?"1":"0",d[5]=t(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var _=nr(Nr(p.v));d[2]="vtc",d[3]="nd",d[4]=""+_,d[5]=p.w||Fs(p.z||st[14],_);break;case"n":isFinite(p.v)?p.f?(d[2]="vtf",d[3]="n",d[4]=p.v,d[5]=t(p.f)):(d[2]="v",d[3]=p.v):(d[2]="vt"+(p.f?"f":"c"),d[3]="e"+Ji[isNaN(p.v)?36:7],d[4]="0",d[5]=p.f||d[3].slice(1),d[6]="e",d[7]=d[3].slice(1));break;case"e":continue}h.push(d.join(":"))}return h.push("sheet:c:"+(m.e.c-m.s.c+1)+":r:"+(m.e.r-m.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(f){return[s,a,o,a,c(f),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}}(),E1=function(){function e(u,f,h,d,p){p.raw?f[h][d]=u:u===""||(u==="TRUE"?f[h][d]=!0:u==="FALSE"?f[h][d]=!1:isNaN(_s(u))?isNaN(b1(u).getDate())?u.charCodeAt(0)==35&&Ar[u]!=null?f[h][d]={t:"e",v:Ar[u],w:u}:f[h][d]=u:f[h][d]=Nr(u):f[h][d]=_s(u))}function t(u,f){var h=f||{},d=[];if(!u||u.length===0)return d;for(var p=u.split(/[\r\n]/),g=p.length-1;g>=0&&p[g].length===0;)--g;for(var m=10,x=0,v=0;v<=g;++v)x=p[v].indexOf(" "),x==-1?x=p[v].length:x++,m=Math.max(m,x);for(v=0;v<=g;++v){d[v]=[];var y=0;for(e(p[v].slice(0,m).trim(),d,v,y,h),y=1;y<=(p[v].length-m)/10+1;++y)e(p[v].slice(m+(y-1)*10,m+y*10).trim(),d,v,y,h)}return h.sheetRows&&(d=d.slice(0,h.sheetRows)),d}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var f={},h=!1,d=0,p=0;d<u.length;++d)(p=u.charCodeAt(d))==34?h=!h:!h&&p in n&&(f[p]=(f[p]||0)+1);p=[];for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&p.push([f[d],d]);if(!p.length){f=r;for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&p.push([f[d],d])}return p.sort(function(g,m){return g[0]-m[0]||r[g[1]]-r[m[1]]}),n[p.pop()[1]]||44}function s(u,f){var h=f||{},d="",p={};h.dense&&(p["!data"]=[]);var g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(d=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(d=u.charAt(4),u=u.slice(6)):d=i(u.slice(0,1024)):h&&h.FS?d=h.FS:d=i(u.slice(0,1024));var m=0,x=0,v=0,y=0,_=0,b=d.charCodeAt(0),w=!1,E=0,A=u.charCodeAt(0),S=h.dateNF!=null?$2e(h.dateNF):null;function k(){var T=u.slice(y,_);T.slice(-1)=="\r"&&(T=T.slice(0,-1));var O={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),h.cellText!==!1&&(O.w=T),T.length===0)O.t="z";else if(h.raw)O.t="s",O.v=T;else if(T.trim().length===0)O.t="s",O.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(O.t="s",O.v=T.slice(2,-1).replace(/""/g,'"')):_Ae(T)?(O.t="s",O.f=T.slice(1),O.v=T):(O.t="s",O.v=T);else if(T=="TRUE")O.t="b",O.v=!0;else if(T=="FALSE")O.t="b",O.v=!1;else if(!isNaN(v=_s(T)))O.t="n",O.v=v;else if(!isNaN((v=b1(T)).getDate())||S&&T.match(S)){if(O.z=h.dateNF||st[14],S&&T.match(S)){var C=I2e(T,h.dateNF,T.match(S)||[]);v=Nr(C),h&&h.UTC===!1&&(v=Ah(v))}else h&&h.UTC===!1?v=Ah(v):h.cellText!==!1&&h.dateNF&&(O.w=Fs(O.z,v));h.cellDates?(O.t="d",O.v=v):(O.t="n",O.v=nr(v)),h.cellNF||delete O.z}else T.charCodeAt(0)==35&&Ar[T]!=null?(O.t="e",O.w=T,O.v=Ar[T]):(O.t="s",O.v=T);if(O.t=="z"||(h.dense?(p["!data"][m]||(p["!data"][m]=[]),p["!data"][m][x]=O):p[Dt({c:x,r:m})]=O),y=_+1,A=u.charCodeAt(y),g.e.c<x&&(g.e.c=x),g.e.r<m&&(g.e.r=m),E==b)++x;else if(x=0,++m,h.sheetRows&&h.sheetRows<=m)return!0}e:for(;_<u.length;++_)switch(E=u.charCodeAt(_)){case 34:A===34&&(w=!w);break;case 13:if(w)break;u.charCodeAt(_+1)==10&&++_;case b:case 10:if(!w&&k())break e;break}return _-y>0&&k(),p["!ref"]=wt(g),p}function a(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,f):$p(t(u,f),f)}function o(u,f){var h="",d=f.type=="string"?[0,0,0,0]:CO(u,f);switch(f.type){case"base64":h=Cs(u);break;case"binary":h=u;break;case"buffer":f.codepage==65001?h=u.toString("utf8"):f.codepage&&typeof Ud<"u"?h=Ud.utils.decode(f.codepage,u):h=_t&&Buffer.isBuffer(u)?u.toString("binary"):nc(u);break;case"array":h=Sh(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+f.type)}return d[0]==239&&d[1]==187&&d[2]==191?h=Qt(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Qt(h):f.type=="binary"&&typeof Ud<"u"&&f.codepage&&(h=Ud.utils.decode(f.codepage,Ud.utils.encode(28591,h))),h.slice(0,19)=="socialcalc:version:"?zwe.to_sheet(f.type=="string"?h:Qt(h),f):a(h,f)}function l(u,f){return Ku(o(u,f),f)}function c(u){var f=[];if(!u["!ref"])return"";for(var h=Mn(u["!ref"]),d,p=u["!data"]!=null,g=h.s.r;g<=h.e.r;++g){for(var m=[],x=h.s.c;x<=h.e.c;++x){var v=Dt({r:g,c:x});if(d=p?(u["!data"][g]||[])[x]:u[v],!d||d.v==null){m.push("          ");continue}for(var y=(d.w||(wu(d),d.w)||"").slice(0,10);y.length<10;)y+=" ";m.push(y+(x===0?" ":""))}f.push(m.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function Hwe(e,t){var n=t||{},r=!!n.WTF;n.WTF=!0;try{var i=Bwe.to_workbook(e,n);return n.WTF=r,i}catch(s){if(n.WTF=r,s.message.indexOf("SYLK bad record ID")==-1&&r)throw s;return E1.to_workbook(e,t)}}var Rm=function(){function e(z,q,G){if(z){jn(z,z.l||0);for(var H=G.Enum||_e;z.l<z.length;){var J=z.read_shift(2),F=H[J]||H[65535],B=z.read_shift(2),K=z.l+B,Z=F.f&&F.f(z,B,G);if(z.l=K,q(Z,F,J))return}}}function t(z,q){switch(q.type){case"base64":return r(ds(Cs(z)),q);case"binary":return r(ds(z),q);case"buffer":case"array":return r(z,q)}throw"Unsupported type "+q.type}var n=["mmmm","dd-mmm-yyyy","dd-mmm","mmm-yyyy","@","mm/dd","hh:mm:ss AM/PM","hh:mm AM/PM","mm/dd/yyyy","mm/dd","hh:mm:ss","hh:mm"];function r(z,q){if(!z)return z;var G=q||{},H={},J="Sheet1",F="",B=0,K={},Z=[],Q=[],te=[];G.dense&&(te=H["!data"]=[]);var de={s:{r:0,c:0},e:{r:0,c:0}},me=G.sheetRows||0,ye={};if(z[4]==81&&z[5]==80&&z[6]==87)return Ge(z,q);if(z[2]==0&&(z[3]==8||z[3]==9)&&z.length>=16&&z[14]==5&&z[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(z[2]==2)G.Enum=_e,e(z,function(ae,We,Xe){switch(Xe){case 0:G.vers=ae,ae>=4096&&(G.qpro=!0);break;case 255:G.vers=ae,G.works=!0;break;case 6:de=ae;break;case 204:ae&&(F=ae);break;case 222:F=ae;break;case 15:case 51:(!G.qpro&&!G.works||Xe==51)&&ae[1].v.charCodeAt(0)<48&&(ae[1].v=ae[1].v.slice(1)),(G.works||G.works2)&&(ae[1].v=ae[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:(ae[2]&112)==112&&(ae[2]&15)>1&&(ae[2]&15)<15&&(ae[1].z=G.dateNF||n[(ae[2]&15)-1]||st[14],G.cellDates&&(ae[1].v=iu(ae[1].v),ae[1].t=typeof ae[1].v=="number"?"n":"d")),G.qpro&&ae[3]>B&&(H["!ref"]=wt(de),K[J]=H,Z.push(J),H={},G.dense&&(te=H["!data"]=[]),de={s:{r:0,c:0},e:{r:0,c:0}},B=ae[3],J=F||"Sheet"+(B+1),F="");var tt=G.dense?(te[ae[0].r]||[])[ae[0].c]:H[Dt(ae[0])];if(tt){tt.t=ae[1].t,tt.v=ae[1].v,ae[1].z!=null&&(tt.z=ae[1].z),ae[1].f!=null&&(tt.f=ae[1].f),ye=tt;break}G.dense?(te[ae[0].r]||(te[ae[0].r]=[]),te[ae[0].r][ae[0].c]=ae[1]):H[Dt(ae[0])]=ae[1],ye=ae[1];break;case 21509:G.works2=!0;break;case 21506:ae==5281&&(ye.z="hh:mm:ss",G.cellDates&&ye.t=="n"&&(ye.v=iu(ye.v),ye.t=typeof ye.v=="number"?"n":"d"));break}},G);else if(z[2]==26||z[2]==14)G.Enum=ve,z[2]==14&&(G.qpro=!0,z.l=0),e(z,function(ae,We,Xe){switch(Xe){case 204:J=ae;break;case 22:ae[1].v.charCodeAt(0)<48&&(ae[1].v=ae[1].v.slice(1)),ae[1].v=ae[1].v.replace(/\x0F./g,function(tt){return String.fromCharCode(tt.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(ae[3]>B&&(H["!ref"]=wt(de),K[J]=H,Z.push(J),H={},G.dense&&(te=H["!data"]=[]),de={s:{r:0,c:0},e:{r:0,c:0}},B=ae[3],J="Sheet"+(B+1)),me>0&&ae[0].r>=me)break;G.dense?(te[ae[0].r]||(te[ae[0].r]=[]),te[ae[0].r][ae[0].c]=ae[1]):H[Dt(ae[0])]=ae[1],de.e.c<ae[0].c&&(de.e.c=ae[0].c),de.e.r<ae[0].r&&(de.e.r=ae[0].r);break;case 27:ae[14e3]&&(Q[ae[14e3][0]]=ae[14e3][1]);break;case 1537:Q[ae[0]]=ae[1],ae[0]==B&&(J=ae[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+z[2]);if(H["!ref"]=wt(de),K[F||J]=H,Z.push(F||J),!Q.length)return{SheetNames:Z,Sheets:K};for(var pe={},ce=[],Se=0;Se<Q.length;++Se)K[Z[Se]]?(ce.push(Q[Se]||Z[Se]),pe[Q[Se]]=K[Q[Se]]||K[Z[Se]]):(ce.push(Q[Se]),pe[Q[Se]]={"!ref":"A1"});return{SheetNames:ce,Sheets:pe}}function i(z,q){var G=q||{};if(+G.codepage>=0&&Ra(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var H=xC();if(!z["!ref"])throw new Error("Cannot export empty sheet to WK1");var J=Mn(z["!ref"]),F=z["!data"]!=null,B=[];as(H,0,a(1030)),as(H,6,c(J));for(var K=Math.min(J.e.r,8191),Z=J.s.c;Z<=J.e.c;++Z)B[Z]=Pt(Z);for(var Q=J.s.r;Q<=K;++Q){var te=Xt(Q);for(Z=J.s.c;Z<=J.e.c;++Z){var de=F?(z["!data"][Q]||[])[Z]:z[B[Z]+te];if(!(!de||de.t=="z"))switch(de.t){case"n":(de.v|0)==de.v&&de.v>=-32768&&de.v<=32767?as(H,13,m(Q,Z,de)):as(H,14,v(Q,Z,de));break;case"d":var me=nr(de.v);(me|0)==me&&me>=-32768&&me<=32767?as(H,13,m(Q,Z,{t:"n",v:me,z:de.z||st[14]})):as(H,14,v(Q,Z,{t:"n",v:me,z:de.z||st[14]}));break;default:var ye=wu(de);as(H,15,d(Q,Z,ye.slice(0,239)))}}}return as(H,1),H.end()}function s(z,q){var G=q||{};if(+G.codepage>=0&&Ra(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var H=xC();as(H,0,o(z));for(var J=0,F=0;J<z.SheetNames.length;++J)(z.Sheets[z.SheetNames[J]]||{})["!ref"]&&as(H,27,xe(z.SheetNames[J],F++));var B=0;for(J=0;J<z.SheetNames.length;++J){var K=z.Sheets[z.SheetNames[J]];if(!(!K||!K["!ref"])){for(var Z=Mn(K["!ref"]),Q=K["!data"]!=null,te=[],de=Math.min(Z.e.r,8191),me=Z.s.r;me<=de;++me)for(var ye=Xt(me),pe=Z.s.c;pe<=Z.e.c;++pe){me===Z.s.r&&(te[pe]=Pt(pe));var ce=te[pe]+ye,Se=Q?(K["!data"][me]||[])[pe]:K[ce];if(!(!Se||Se.t=="z"))if(Se.t=="n")as(H,23,C(me,pe,B,Se.v));else{var ae=wu(Se);as(H,22,k(me,pe,B,ae.slice(0,239)))}}++B}}return as(H,1),H.end()}function a(z){var q=Un(2);return q.write_shift(2,z),q}function o(z){var q=Un(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var G=0,H=0,J=0,F=0;F<z.SheetNames.length;++F){var B=z.SheetNames[F],K=z.Sheets[B];if(!(!K||!K["!ref"])){++J;var Z=Zh(K["!ref"]);G<Z.e.r&&(G=Z.e.r),H<Z.e.c&&(H=Z.e.c)}}return G>8191&&(G=8191),q.write_shift(2,G),q.write_shift(1,J),q.write_shift(1,H),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function l(z,q,G){var H={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&G.qpro?(H.s.c=z.read_shift(1),z.l++,H.s.r=z.read_shift(2),H.e.c=z.read_shift(1),z.l++,H.e.r=z.read_shift(2),H):(H.s.c=z.read_shift(2),H.s.r=z.read_shift(2),q==12&&G.qpro&&(z.l+=2),H.e.c=z.read_shift(2),H.e.r=z.read_shift(2),q==12&&G.qpro&&(z.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function c(z){var q=Un(8);return q.write_shift(2,z.s.c),q.write_shift(2,z.s.r),q.write_shift(2,z.e.c),q.write_shift(2,z.e.r),q}function u(z,q,G){var H=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(H[0].c=z.read_shift(1),H[3]=z.read_shift(1),H[0].r=z.read_shift(2),z.l+=2):G.works?(H[0].c=z.read_shift(2),H[0].r=z.read_shift(2),H[2]=z.read_shift(2)):(H[2]=z.read_shift(1),H[0].c=z.read_shift(2),H[0].r=z.read_shift(2)),H}function f(z){return z.z&&ja(z.z)?240|(n.indexOf(z.z)+1||2):255}function h(z,q,G){var H=z.l+q,J=u(z,q,G);if(J[1].t="s",(G.vers&65534)==20768){z.l++;var F=z.read_shift(1);return J[1].v=z.read_shift(F,"utf8"),J}return G.qpro&&z.l++,J[1].v=z.read_shift(H-z.l,"cstr"),J}function d(z,q,G){var H=Un(7+G.length);H.write_shift(1,255),H.write_shift(2,q),H.write_shift(2,z),H.write_shift(1,39);for(var J=0;J<H.length;++J){var F=G.charCodeAt(J);H.write_shift(1,F>=128?95:F)}return H.write_shift(1,0),H}function p(z,q,G){var H=z.l+q,J=u(z,q,G);if(J[1].t="s",G.vers==20768){var F=z.read_shift(1);return J[1].v=z.read_shift(F,"utf8"),J}return J[1].v=z.read_shift(H-z.l,"cstr"),J}function g(z,q,G){var H=u(z,q,G);return H[1].v=z.read_shift(2,"i"),H}function m(z,q,G){var H=Un(7);return H.write_shift(1,f(G)),H.write_shift(2,q),H.write_shift(2,z),H.write_shift(2,G.v,"i"),H}function x(z,q,G){var H=u(z,q,G);return H[1].v=z.read_shift(8,"f"),H}function v(z,q,G){var H=Un(13);return H.write_shift(1,f(G)),H.write_shift(2,q),H.write_shift(2,z),H.write_shift(8,G.v,"f"),H}function y(z,q,G){var H=z.l+q,J=u(z,q,G);if(J[1].v=z.read_shift(8,"f"),G.qpro)z.l=H;else{var F=z.read_shift(2);E(z.slice(z.l,z.l+F),J),z.l+=F}return J}function _(z,q,G){var H=q&32768;return q&=-32769,q=(H?z:0)+(q>=8192?q-16384:q),(H?"":"$")+(G?Pt(q):Xt(q))}var b={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],54:["DATE",3],63:["ROUND",2],64:["TIME",3],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function E(z,q){jn(z,0);for(var G=[],H=0,J="",F="",B="",K="";z.l<z.length;){var Z=z[z.l++];switch(Z){case 0:G.push(z.read_shift(8,"f"));break;case 1:F=_(q[0].c,z.read_shift(2),!0),J=_(q[0].r,z.read_shift(2),!1),G.push(F+J);break;case 2:{var Q=_(q[0].c,z.read_shift(2),!0),te=_(q[0].r,z.read_shift(2),!1);F=_(q[0].c,z.read_shift(2),!0),J=_(q[0].r,z.read_shift(2),!1),G.push(Q+te+":"+F+J)}break;case 3:if(z.l<z.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(z.read_shift(2));break;case 6:{for(var de="";Z=z[z.l++];)de+=String.fromCharCode(Z);G.push('"'+de.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:K=G.pop(),B=G.pop(),G.push(["AND","OR"][Z-20]+"("+B+","+K+")");break;default:if(Z<32&&w[Z])K=G.pop(),B=G.pop(),G.push(B+w[Z]+K);else if(b[Z]){if(H=b[Z][1],H==69&&(H=z[z.l++]),H>G.length){console.error("WK1 bad formula parse 0x"+Z.toString(16)+":|"+G.join("|")+"|");return}var me=G.slice(-H);G.length-=H,G.push(b[Z][0]+"("+me.join(",")+")")}else return Z<=7?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=24?console.error("WK1 unsupported op "+Z.toString(16)):Z<=30?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=115?console.error("WK1 unsupported function opcode "+Z.toString(16)):console.error("WK1 unrecognized opcode "+Z.toString(16))}}G.length==1?q[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function A(z){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=z.read_shift(2),q[3]=z[z.l++],q[0].c=z[z.l++],q}function S(z,q){var G=A(z);return G[1].t="s",G[1].v=z.read_shift(q-4,"cstr"),G}function k(z,q,G,H){var J=Un(6+H.length);J.write_shift(2,z),J.write_shift(1,G),J.write_shift(1,q),J.write_shift(1,39);for(var F=0;F<H.length;++F){var B=H.charCodeAt(F);J.write_shift(1,B>=128?95:B)}return J.write_shift(1,0),J}function T(z,q){var G=A(z);G[1].v=z.read_shift(2);var H=G[1].v>>1;if(G[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return G[1].v=H,G}function O(z,q){var G=A(z),H=z.read_shift(4),J=z.read_shift(4),F=z.read_shift(2);if(F==65535)return H===0&&J===3221225472?(G[1].t="e",G[1].v=15):H===0&&J===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var B=F&32768;return F=(F&32767)-16446,G[1].v=(1-B*2)*(J*Math.pow(2,F+32)+H*Math.pow(2,F)),G}function C(z,q,G,H){var J=Un(14);if(J.write_shift(2,z),J.write_shift(1,G),J.write_shift(1,q),H==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var F=0,B=0,K=0,Z=0;return H<0&&(F=1,H=-H),B=Math.log2(H)|0,H/=Math.pow(2,B-31),Z=H>>>0,Z&2147483648||(H/=2,++B,Z=H>>>0),H-=Z,Z|=2147483648,Z>>>=0,H*=Math.pow(2,32),K=H>>>0,J.write_shift(4,K),J.write_shift(4,Z),B+=16383+(F?32768:0),J.write_shift(2,B),J}function D(z,q){var G=O(z);return z.l+=q-14,G}function N(z,q){var G=A(z),H=z.read_shift(4);return G[1].v=H>>6,G}function R(z,q){var G=A(z),H=z.read_shift(8,"f");return G[1].v=H,G}function L(z,q){var G=R(z);return z.l+=q-12,G}function I(z,q){return z[z.l+q-1]==0?z.read_shift(q,"cstr"):""}function Y(z,q){var G=z[z.l++];G>q-1&&(G=q-1);for(var H="";H.length<G;)H+=String.fromCharCode(z[z.l++]);return H}function X(z,q,G){if(!(!G.qpro||q<21)){var H=z.read_shift(1);z.l+=17,z.l+=1,z.l+=2;var J=z.read_shift(q-21,"cstr");return[H,J]}}function oe(z,q){for(var G={},H=z.l+q;z.l<H;){var J=z.read_shift(2);if(J==14e3){for(G[J]=[0,""],G[J][0]=z.read_shift(2);z[z.l];)G[J][1]+=String.fromCharCode(z[z.l]),z.l++;z.l++}}return G}function xe(z,q){var G=Un(5+z.length);G.write_shift(2,14e3),G.write_shift(2,q);for(var H=0;H<z.length;++H){var J=z.charCodeAt(H);G[G.l++]=J>127?95:J}return G[G.l++]=0,G}var _e={0:{n:"BOF",f:bn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:y},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:I},222:{n:"SHEETNAMELP",f:Y},255:{n:"BOF",f:bn},21506:{n:"WKSNF",f:bn},65535:{n:""}},ve={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:oe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:N},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:L},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:I},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}},Oe={5:"dd-mmm-yy",6:"dd-mmm",7:"mmm-yy",8:"mm/dd/yy",10:"hh:mm:ss AM/PM",11:"hh:mm AM/PM",14:"dd-mmm-yyyy",15:"mmm-yyyy",34:"0.00",50:"0.00;[Red]0.00",66:"0.00;(0.00)",82:"0.00;[Red](0.00)",162:'"$"#,##0.00;\\("$"#,##0.00\\)',288:"0%",304:"0E+00",320:"# ?/?"};function Pe(z){var q=z.read_shift(2),G=z.read_shift(1);if(G!=0)throw"unsupported QPW string type "+G.toString(16);return z.read_shift(q,"sbcs-cont")}function Ge(z,q){jn(z,0);var G=q||{},H={};G.dense&&(H["!data"]=[]);var J=[],F="",B={s:{r:-1,c:-1},e:{r:-1,c:-1}},K=0,Z=0,Q=0,te=0,de={SheetNames:[],Sheets:{}},me=[];e:for(;z.l<z.length;){var ye=z.read_shift(2),pe=z.read_shift(2),ce=z.slice(z.l,z.l+pe);switch(jn(ce,0),ye){case 1:if(ce.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 8:break;case 10:for(var Se=ce.read_shift(4),ae=(ce.length-ce.l)/Se|0,We=0;We<Se;++We){var Xe=ce.l+ae,tt={};ce.l+=2,tt.numFmtId=ce.read_shift(2),Oe[tt.numFmtId]&&(tt.z=Oe[tt.numFmtId]),ce.l=Xe,me.push(tt)}break;case 1025:break;case 1026:break;case 1031:for(ce.l+=12;ce.l<ce.length;)K=ce.read_shift(2),Z=ce.read_shift(1),J.push(ce.read_shift(K,"cstr"));break;case 1032:break;case 1537:{var ct=ce.read_shift(2);H={},G.dense&&(H["!data"]=[]),B.s.c=ce.read_shift(2),B.e.c=ce.read_shift(2),B.s.r=ce.read_shift(4),B.e.r=ce.read_shift(4),ce.l+=4,ce.l+2<ce.length&&(K=ce.read_shift(2),Z=ce.read_shift(1),F=K==0?"":ce.read_shift(K,"cstr")),F||(F=Pt(ct))}break;case 1538:{if(B.s.c>255||B.s.r>999999)break;B.e.c<B.s.c&&(B.e.c=B.s.c),B.e.r<B.s.r&&(B.e.r=B.s.r),H["!ref"]=wt(B),Sx(de,H,F)}break;case 2561:Q=ce.read_shift(2),B.e.c<Q&&(B.e.c=Q),B.s.c>Q&&(B.s.c=Q),te=ce.read_shift(4),B.s.r>te&&(B.s.r=te),te=ce.read_shift(4),B.e.r<te&&(B.e.r=te);break;case 3073:{te=ce.read_shift(4),K=ce.read_shift(4),B.s.r>te&&(B.s.r=te),B.e.r<te+K-1&&(B.e.r=te+K-1);for(var It=Pt(Q);ce.l<ce.length;){var Ne={t:"z"},gt=ce.read_shift(1),xn=-1;gt&128&&(xn=ce.read_shift(2));var sn=gt&64?ce.read_shift(2)-1:0;switch(gt&31){case 0:break;case 1:break;case 2:Ne={t:"n",v:ce.read_shift(2)};break;case 3:Ne={t:"n",v:ce.read_shift(2,"i")};break;case 4:Ne={t:"n",v:zE(ce)};break;case 5:Ne={t:"n",v:ce.read_shift(8,"f")};break;case 7:Ne={t:"s",v:J[Z=ce.read_shift(4)-1]};break;case 8:Ne={t:"n",v:ce.read_shift(8,"f")},ce.l+=2,ce.l+=4,isNaN(Ne.v)&&(Ne={t:"e",v:15});break;default:throw"Unrecognized QPW cell type "+(gt&31)}xn!=-1&&(me[xn-1]||{}).z&&(Ne.z=me[xn-1].z);var Ls=0;if(gt&32)switch(gt&31){case 2:Ls=ce.read_shift(2);break;case 3:Ls=ce.read_shift(2,"i");break;case 7:Ls=ce.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(gt&31)}if(!(!G.sheetStubs&&Ne.t=="z")){var Cn=Hn(Ne);Ne.t=="n"&&Ne.z&&ja(Ne.z)&&G.cellDates&&(Cn.v=iu(Ne.v),Cn.t=typeof Cn.v=="number"?"n":"d"),H["!data"]!=null?(H["!data"][te]||(H["!data"][te]=[]),H["!data"][te][Q]=Cn):H[It+Xt(te)]=Cn}for(++te,--K;sn-- >0&&K>=0;){if(gt&32)switch(gt&31){case 2:Ne={t:"n",v:Ne.v+Ls&65535};break;case 3:Ne={t:"n",v:Ne.v+Ls&65535},Ne.v>32767&&(Ne.v-=65536);break;case 7:Ne={t:"s",v:J[Z=Z+Ls>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(gt&31)}else switch(gt&31){case 1:Ne={t:"z"};break;case 2:Ne={t:"n",v:ce.read_shift(2)};break;case 7:Ne={t:"s",v:J[Z=ce.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(gt&31)}!G.sheetStubs&&Ne.t=="z"||(H["!data"]!=null?(H["!data"][te]||(H["!data"][te]=[]),H["!data"][te][Q]=Ne):H[It+Xt(te)]=Ne),++te,--K}}}break;case 3074:{Q=ce.read_shift(2),te=ce.read_shift(4);var ci=Pe(ce);H["!data"]!=null?(H["!data"][te]||(H["!data"][te]=[]),H["!data"][te][Q]={t:"s",v:ci}):H[Pt(Q)+Xt(te)]={t:"s",v:ci}}break}z.l+=pe}return de}return{sheet_to_wk1:i,book_to_wk3:s,to_workbook:t}}();function Vwe(e){var t={},n=e.match(Mr),r=0,i=!1;if(n)for(;r!=n.length;++r){var s=ze(n[r]);switch(s[0].replace(/<\w*:/g,"<")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=oO[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return t}var Wwe=function(){function e(r){var i=cr(r,"t");if(!i)return{t:"s",v:""};var s={t:"s",v:Et(i[1])},a=cr(r,"rPr");return a&&(s.s=Vwe(a[1])),s}var t=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(i){return i.replace(t,"").split(n).map(e).filter(function(s){return s.v})}}(),jwe=function(){var t=/(\r\n|\n)/g;function n(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),i}function r(i){var s=[[],i.v,[]];return i.v?(i.s&&n(i.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(r).join("")}}(),Gwe=/<(?:\w+:)?t\b[^<>]*>([^<]*)<\/(?:\w+:)?t>/g,qwe=/<(?:\w+:)?r\b[^<>]*>/;function EO(e,t){var n=t?t.cellHTML:!0,r={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=Et(Qt(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),r.r=Qt(e),n&&(r.h=Cm(r.t))):e.match(qwe)&&(r.r=Qt(e),r.t=Et(Qt((ebe(e,"rPh").match(Gwe)||[]).join("").replace(Mr,"")),!0),n&&(r.h=jwe(Wwe(r.r)))),r):{t:""}}var Xwe=/<(?:\w+:)?(?:si|sstItem)>/g,Ywe=/<\/(?:\w+:)?(?:si|sstItem)>/;function Kwe(e,t){var n=[],r="";if(!e)return n;var i=cr(e,"sst");if(i){r=i[1].replace(Xwe,"").split(Ywe);for(var s=0;s!=r.length;++s){var a=EO(r[s].trim(),t);a!=null&&(n[n.length]=a)}i=ze(i[0].slice(0,i[0].indexOf(">"))),n.Count=i.count,n.Unique=i.uniqueCount}return n}function Jwe(e){return[e.read_shift(4),e.read_shift(4)]}function Zwe(e,t){var n=[],r=!1;return lc(e,function(s,a,o){switch(o){case 159:n.Count=s[0],n.Unique=s[1];break;case 19:n.push(s);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(a.T,!r||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function FG(e){for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function jl(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function Qwe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=jl(e,4),t.U=jl(e,4),t.W=jl(e,4),t}function eSe(e){for(var t=e.read_shift(4),n=e.l+t-4,r={},i=e.read_shift(4),s=[];i-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(r.name=e.read_shift(0,"lpp4"),r.comps=s,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return r}function tSe(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(eSe(e));return t}function nSe(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function rSe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=jl(e,4),t.U=jl(e,4),t.W=jl(e,4),t}function iSe(e){var t=rSe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function OG(e,t){var n=e.l+t,r={};r.Flags=e.read_shift(4)&63,e.l+=4,r.AlgID=e.read_shift(4);var i=!1;switch(r.AlgID){case 26126:case 26127:case 26128:i=r.Flags==36;break;case 26625:i=r.Flags==4;break;case 0:i=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=e.read_shift(4),r.KeySize=e.read_shift(4),r.ProviderType=e.read_shift(4),e.l+=8,r.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,r}function NG(e,t){var n={},r=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,r),e.l=r,n}function sSe(e){var t=jl(e);switch(t.Minor){case 2:return[t.Minor,aSe(e)];case 3:return[t.Minor,oSe()];case 4:return[t.Minor,lSe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function aSe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var n=e.read_shift(4),r=OG(e,n),i=NG(e,e.length-e.l);return{t:"Std",h:r,v:i}}function oSe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function lSe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),r={};return n.replace(Mr,function(s){var a=ze(s);switch(ga(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){r[o]=a[o]});break;case"<dataIntegrity":r.encryptedHmacKey=a.encryptedHmacKey,r.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(a);break;default:throw a[0]}}),r}function cSe(e,t){var n={},r=n.EncryptionVersionInfo=jl(e,4);if(t-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=e.read_shift(4),t-=4;var i=e.read_shift(4);return t-=4,n.EncryptionHeader=OG(e,i),t-=i,n.EncryptionVerifier=NG(e,t),n}function uSe(e){var t={},n=t.EncryptionVersionInfo=jl(e,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function fSe(e){var t=0,n,r=FG(e),i=r.length+1,s,a,o,l,c;for(n=Eu(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)a=n[s],o=t&16384?1:0,l=t<<1&32767,c=o|l,t=c^a;return t^52811}var DG=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(a){return(a/2|a*128)&255},i=function(a,o){return r(a^o)},s=function(a){for(var o=t[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],f=0;f!=7;++f)u&64&&(o^=n[l]),u*=2,--l;return o};return function(a){for(var o=FG(a),l=s(o),c=o.length,u=Eu(16),f=0;f!=16;++f)u[f]=0;var h,d,p;for((c&1)===1&&(h=l>>8,u[c]=i(e[0],h),--c,h=l&255,d=o[o.length-1],u[c]=i(d,h));c>0;)--c,h=l>>8,u[c]=i(o[c],h),--c,h=l&255,u[c]=i(o[c],h);for(c=15,p=15-o.length;p>0;)h=l>>8,u[c]=i(e[p],h),--c,--p,h=l&255,u[c]=i(o[c],h),--c,--p;return u}}(),hSe=function(e,t,n,r,i){i||(i=t),r||(r=DG(e));var s,a;for(s=0;s!=t.length;++s)a=t[s],a^=r[n],a=(a>>5|a<<3)&255,i[s]=a,++n;return[i,n,r]},dSe=function(e){var t=0,n=DG(e);return function(r){var i=hSe("",r,t,n);return t=i[1],i[0]}};function pSe(e,t,n,r){var i={key:bn(e),verificationBytes:bn(e)};return n.password&&(i.verifier=fSe(n.password)),r.valid=i.verificationBytes===i.verifier,r.valid&&(r.insitu=dSe(n.password)),i}function gSe(e,t,n){var r=n||{};return r.Info=e.read_shift(2),e.l-=2,r.Info===1?r.Data=uSe(e):r.Data=cSe(e,t),r}function mSe(e,t,n){var r={Type:n.biff>=8?e.read_shift(2):0};return r.Type?gSe(e,t-2,r):pSe(e,n.biff>=8?t:t-2,n,r),r}function xSe(e,t){switch(t.type){case"base64":return ry(Cs(e),t);case"binary":return ry(e,t);case"buffer":return ry(_t&&Buffer.isBuffer(e)?e.toString("binary"):nc(e),t);case"array":return ry(Sh(e),t)}throw new Error("Unrecognized type "+t.type)}function ry(e,t){var n=t||{},r={},i=n.dense;i&&(r["!data"]=[]);var s=pO(e,"\\trowd","\\row");if(!s)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:s.length-1}},o=[];return s.forEach(function(l,c){i&&(o=r["!data"][c]=[]);for(var u=/\\[\w\-]+\b/g,f=0,h,d=-1,p=[];(h=u.exec(l))!=null;){var g=l.slice(f,u.lastIndex-h[0].length);switch(g.charCodeAt(0)==32&&(g=g.slice(1)),g.length&&p.push(g),h[0]){case"\\cell":if(++d,p.length){var m={v:p.join(""),t:"s"};m.v=="TRUE"||m.v=="FALSE"?(m.v=m.v=="TRUE",m.t="b"):isNaN(_s(m.v))?Ar[m.v]!=null&&(m.t="e",m.w=m.v,m.v=Ar[m.v]):(m.t="n",n.cellText!==!1&&(m.w=m.v),m.v=_s(m.v)),i?o[d]=m:r[Dt({r:c,c:d})]=m}p=[];break;case"\\par":p.push(`
`);break}f=u.lastIndex}d>a.e.c&&(a.e.c=d)}),r["!ref"]=wt(a),r}function vSe(e,t){var n=Ku(xSe(e,t),t);return n.bookType="rtf",n}function ySe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function w1(e){for(var t=0,n=1;t!=3;++t)n=n*256+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function _Se(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=i-s;if(a===0)return[0,0,t];var o=0,l=0,c=i+s;switch(l=a/(c>1?2-c:c),i){case t:o=((n-r)/a+6)%6;break;case n:o=(r-t)/a+2;break;case r:o=(t-n)/a+4;break}return[o/6,l,c/2]}function bSe(e){var t=e[0],n=e[1],r=e[2],i=n*2*(r<.5?r:1-r),s=r-i/2,a=[s,s,s],o=6*t,l;if(n!==0)switch(o|0){case 0:case 6:l=i*o,a[0]+=i,a[1]+=l;break;case 1:l=i*(2-o),a[0]+=l,a[1]+=i;break;case 2:l=i*(o-2),a[1]+=i,a[2]+=l;break;case 3:l=i*(4-o),a[1]+=l,a[2]+=i;break;case 4:l=i*(o-4),a[2]+=i,a[0]+=l;break;case 5:l=i*(6-o),a[2]+=l,a[0]+=i;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function z2(e,t){if(t===0)return e;var n=_Se(ySe(e));return t<0?n[2]=n[2]*(1+t):n[2]=1-(1-n[2])*(1-t),w1(bSe(n))}var MG=6,ESe=15,wSe=1,_i=MG;function H2(e){return Math.floor((e+Math.round(128/_i)/256)*_i)}function V2(e){return Math.floor((e-5)/_i*100+.5)/100}function _C(e){return Math.round((e*_i+5)/_i*256)/256}function HA(e){return _C(V2(H2(e)))}function wO(e){var t=Math.abs(e-HA(e)),n=_i;if(t>.005)for(_i=wSe;_i<ESe;++_i)Math.abs(e-HA(e))<=t&&(t=Math.abs(e-HA(e)),n=_i);_i=n}function K0(e){e.width?(e.wpx=H2(e.width),e.wch=V2(e.wpx),e.MDW=_i):e.wpx?(e.wch=V2(e.wpx),e.width=_C(e.wch),e.MDW=_i):typeof e.wch=="number"&&(e.width=_C(e.wch),e.wpx=H2(e.width),e.MDW=_i),e.customWidth&&delete e.customWidth}var SSe=96,RG=SSe;function $G(e){return e*96/RG}function S1(e){return e*RG/96}var ASe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function TSe(e,t,n,r){t.Borders=[];var i={},s=!1;(e.match(Mr)||[]).forEach(function(a){var o=ze(a);switch(ga(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=Gt(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=Gt(o.diagonalDown)),t.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function kSe(e,t,n,r){t.Fills=[];var i={},s=!1;(e.match(Mr)||[]).forEach(function(a){var o=ze(a);switch(ga(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},t.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function CSe(e,t,n,r){t.Fonts=[];var i={},s=!1;(e.match(Mr)||[]).forEach(function(a){var o=ze(a);switch(ga(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=Qt(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?Gt(o.val):1;break;case"<b/>":i.bold=1;break;case"</b>":case"</b":break;case"<i":i.italic=o.val?Gt(o.val):1;break;case"<i/>":i.italic=1;break;case"</i>":case"</i":break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"</u>":case"</u":break;case"<strike":i.strike=o.val?Gt(o.val):1;break;case"<strike/>":i.strike=1;break;case"</strike>":case"</strike":break;case"<outline":i.outline=o.val?Gt(o.val):1;break;case"<outline/>":i.outline=1;break;case"</outline>":case"</outline":break;case"<shadow":i.shadow=o.val?Gt(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"</shadow>":case"</shadow":break;case"<condense":i.condense=o.val?Gt(o.val):1;break;case"<condense/>":i.condense=1;break;case"</condense>":case"</condense":break;case"<extend":i.extend=o.val?Gt(o.val):1;break;case"<extend/>":i.extend=1;break;case"</extend>":case"</extend":break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":case"</sz":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":case"</vertAlign":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":case"</family":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":case"</scheme":break;case"<charset":if(o.val=="1")break;o.codepage=oO[parseInt(o.val,10)];break;case"<charset/>":case"</charset>":case"</charset":break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=Gt(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=nh[i.color.index];i.color.index==81&&(l=nh[1]),l||(l=nh[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&n.themeElements&&n.themeElements.clrScheme&&(i.color.rgb=z2(n.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":case"</color":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":case"</AlternateContent":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function FSe(e,t,n){t.NumberFmt=[];for(var r=Zs(st),i=0;i<r.length;++i)t.NumberFmt[r[i]]=st[r[i]];var s=e.match(Mr);if(s)for(i=0;i<s.length;++i){var a=ze(s[i]);switch(ga(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Et(Qt(a.formatCode)),l=parseInt(a.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}eh(o,l)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var iy=["numFmtId","fillId","fontId","borderId","xfId"],sy=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function OSe(e,t,n){t.CellXf=[];var r,i=!1;(e.match(Mr)||[]).forEach(function(s){var a=ze(s),o=0;switch(ga(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":case"<xf>":for(r=a,delete r[0],o=0;o<iy.length;++o)r[iy[o]]&&(r[iy[o]]=parseInt(r[iy[o]],10));for(o=0;o<sy.length;++o)r[sy[o]]&&(r[sy[o]]=Gt(r[sy[o]]));if(t.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[r.numFmtId]==t.NumberFmt[o]){r.numFmtId=o;break}}t.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":case"<alignment>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Gt(a.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":case"<protection>":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var NSe=function(){return function(n,r,i){var s={};if(!n)return s;n=dO(vx(n,"<!--","-->"));var a;return(a=cr(n,"numFmts"))&&FSe(a[0],s,i),(a=cr(n,"fonts"))&&CSe(a[0],s,r,i),(a=cr(n,"fills"))&&kSe(a[0],s,r,i),(a=cr(n,"borders"))&&TSe(a[0],s,r,i),(a=cr(n,"cellXfs"))&&OSe(a[0],s,i),s}}();function DSe(e,t){var n=e.read_shift(2),r=ti(e);return[n,r]}function MSe(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=Ube(e);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=e.read_shift(2);switch(s===700&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=e.read_shift(1);a!=0&&(r.underline=a);var o=e.read_shift(1);o>0&&(r.family=o);var l=e.read_shift(1);switch(l>0&&(r.charset=l),e.l++,r.color=Bbe(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ti(e),r}var RSe=ai;function $Se(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}var ISe=ai;function LSe(e,t,n){var r={};r.NumberFmt=[];for(var i in st)r.NumberFmt[i]=st[i];r.CellXf=[],r.Fonts=[];var s=[],a=!1;return lc(e,function(l,c,u){switch(u){case 44:r.NumberFmt[l[0]]=l[1],eh(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=z2(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(u),a=!0;break;case 38:s.pop(),a=!1;break;default:if(c.T>0)s.push(u);else if(c.T<0)s.pop();else if(!a||n.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),r}var PSe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function BSe(e,t,n){t.themeElements.clrScheme=[];var r={};(e[0].match(Mr)||[]).forEach(function(i){var s=ze(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=s.val;break;case"</a:srgbClr>":break;case"<a:sysClr":r.rgb=s.lastClr;break;case"</a:sysClr>":break;case"</a:dk1>":case"</a:lt1>":case"<a:dk1>":case"<a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[PSe.indexOf(s[0])]=r,r={}):r.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function USe(e,t,n){t.themeElements={};var r;if(!(r=th(e,"a:clrScheme")))throw new Error("clrScheme not found in themeElements");if(BSe(r,t,n),!(r=th(e,"a:fontScheme")))throw new Error("fontScheme not found in themeElements");if(!(r=th(e,"a:fmtScheme")))throw new Error("fmtScheme not found in themeElements")}function IG(e,t){(!e||e.length===0)&&(e=zSe());var n,r={};if(!(n=th(e,"a:themeElements")))throw new Error("themeElements not found in theme");return USe(n[0],r,t),r.raw=e,r}function zSe(e,t){var n=[qj];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function HSe(e,t,n){var r=e.l+t,i=e.read_shift(4);if(i!==124226){if(!n.cellStyles){e.l=r;return}var s=e.slice(e.l);e.l=r;var a;try{a=Gj(s,{type:"array"})}catch{return}var o=Ei(a,"theme/theme/theme1.xml",!0);if(o)return IG(o,n)}}function VSe(e){return e.read_shift(4)}function WSe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=jSe(e,4);break;case 2:t.xclrValue=EG(e);break;case 3:t.xclrValue=VSe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function jSe(e,t){return ai(e,t)}function GSe(e,t){return ai(e,t)}function qSe(e){var t=e.read_shift(2),n=e.read_shift(2)-4,r=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=WSe(e);break;case 6:r[1]=GSe(e,n);break;case 14:case 15:r[1]=e.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return r}function XSe(e,t){var n=e.l+t;e.l+=2;var r=e.read_shift(2);e.l+=2;for(var i=e.read_shift(2),s=[];i-- >0;)s.push(qSe(e,n-e.l));return{ixfe:r,ext:s}}function YSe(e,t){t.forEach(function(n){switch(n[0]){}})}function KSe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ti(e)}}function JSe(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function ZSe(e){return e.l+=4,e.read_shift(4)!=0}function QSe(e,t,n){var r={Types:[],Cell:[],Value:[]},i=n||{},s=[],a=!1,o=2;return lc(e,function(l,c,u){switch(u){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?r.Cell.push({type:r.Types[f[0]-1].name,index:f[1]}):o==0&&r.Value.push({type:r.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(u),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!c.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function eAe(e,t,n){var r={Types:[],Cell:[],Value:[]};if(!e)return r;var i=!1,s=2,a;return e.replace(Mr,function(o){var l=ze(o);switch(ga(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<r.Types.length;++c)r.Types[c].name==l.name&&(a=r.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):s==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!i&&(n!=null&&n.WTF))throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function tAe(e){var t=[];if(!e)return t;var n=1;return(e.match(Mr)||[]).forEach(function(r){var i=ze(r);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?n=i.i:i.i=n,t.push(i);break}}),t}function nAe(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=Dt(n);var r=e.read_shift(1);return r&2&&(t.l="1"),r&8&&(t.a="1"),t}function rAe(e,t,n){var r=[];return lc(e,function(s,a,o){switch(o){case 63:r.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function iAe(e,t,n,r){if(!e)return e;var i=r||{},s=!1;lc(e,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function sAe(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^<>]*r:id="([^<>"]*)"/)||["",""])[1];return t["!id"][n].Target}function aAe(e,t,n){var r=0;(Vj(e,"shape")||[]).forEach(function(i){var s="",a=!0,o=-1,l=-1,c=-1;switch(i.replace(Mr,function(f,h){var d=ze(f);switch(ga(d[0])){case"<ClientData":d.ObjectType&&(s=d.ObjectType);break;case"<Visible":case"<Visible/>":a=!1;break;case"<Row":case"<Row>":o=h+f.length;break;case"</Row>":l=+i.slice(o,h).trim();break;case"<Column":case"<Column>":o=h+f.length;break;case"</Column>":c=+i.slice(o,h).trim();break}return""}),s){case"Note":var u=T1(t,l>=0&&c>=0?Dt({r:l,c}):n[r].ref);u.c&&(u.c.hidden=a),++r;break}})}function F8(e,t,n,r){var i=e["!data"]!=null,s;t.forEach(function(a){var o=Kr(a.ref);if(!(o.r<0||o.c<0)){if(i?(e["!data"][o.r]||(e["!data"][o.r]=[]),s=e["!data"][o.r][o.c]):s=e[a.ref],!s){s={t:"z"},i?e["!data"][o.r][o.c]=s:e[a.ref]=s;var l=Mn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=wt(l);e["!ref"]=c}s.c||(s.c=[]);var u={a:a.author,t:a.t,r:a.r,T:n};a.h&&(u.h=a.h);for(var f=s.c.length-1;f>=0;--f){if(!n&&s.c[f].T)return;n&&!s.c[f].T&&s.c.splice(f,1)}if(n&&r){for(f=0;f<r.length;++f)if(u.a==r[f].id){u.a=r[f].name||u.a;break}}s.c.push(u)}})}function oAe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],i=cr(e,"authors");i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^<>]*>(.*)/);o&&n.push(o[1])}});var s=cr(e,"commentList");return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^<>]*>/);if(o){var l=ze(o[0]),c={author:l.authorId&&n[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=Kr(l.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=cr(a,"text"),h=!!f&&!!f[1]&&EO(f[1])||{r:"",t:"",h:""};c.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),c.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=h.h),r.push(c)}}}}),r}function lAe(e,t){var n=[],r=!1,i={},s=0;return e.replace(Mr,function(o,l){var c=ze(o);switch(ga(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&n.push(i);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":i.t=e.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),n}function cAe(e,t){var n=[],r=!1;return e.replace(Mr,function(s){var a=ze(s);switch(ga(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),n}function uAe(e){var t={};t.iauthor=e.read_shift(4);var n=ed(e);return t.rfx=n.s,t.ref=Dt(n.s),e.l+=16,t}var fAe=ti;function hAe(e,t){var n=[],r=[],i={},s=!1;return lc(e,function(o,l,c){switch(c){case 632:r.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=r[i.iauthor],delete i.iauthor,t.sheetRows&&i.rfx&&t.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,n.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),n}var dAe="application/vnd.ms-office.vbaProject";function pAe(e){var t=Tt.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var i=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Tt.utils.cfb_add(t,i,e.FileIndex[r].content)}}),Tt.write(t)}function gAe(){return{"!type":"dialog"}}function mAe(){return{"!type":"dialog"}}function xAe(){return{"!type":"macro"}}function vAe(){return{"!type":"macro"}}var rh=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=t.c:--u,l?c+=t.r:--c,i+(o?"":"$")+Pt(u)+(l?"":"$")+Xt(c)}return function(i,s){return t=s,i.replace(e,n)}}(),SO=/(^|[^._A-Z0-9])(\$?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])(\$?)(\d{1,7})(?![_.\(A-Za-z0-9])/g;try{SO=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g}catch{}var yAe=function(){return function(t,n){return t.replace(SO,function(r,i,s,a,o,l){var c=vO(a)-(s?0:n.c),u=xO(l)-(o?0:n.r),f=o=="$"?u+1:u==0?"":"["+u+"]",h=s=="$"?c+1:c==0?"":"["+c+"]";return i+"R"+f+"C"+h})}}();function LG(e,t){return e.replace(SO,function(n,r,i,s,a,o){return r+(i=="$"?i+s:Pt(vO(s)+t.c))+(a=="$"?a+o:Xt(xO(o)+t.r))})}function O8(e,t,n){var r=Zh(t),i=r.s,s=Kr(n),a={r:s.r-i.r,c:s.c-i.c};return LG(e,a)}function _Ae(e){return e.length!=1}function N8(e){return e.replace(/_xlfn\./g,"")}function Ln(e){e.l+=1}function Su(e,t){var n=e.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function PG(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return BG(e);n.biff==12&&(r=4)}var i=e.read_shift(r),s=e.read_shift(r),a=Su(e),o=Su(e);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function BG(e){var t=Su(e),n=Su(e),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function bAe(e,t,n){if(n.biff<8)return BG(e);var r=e.read_shift(n.biff==12?4:2),i=e.read_shift(n.biff==12?4:2),s=Su(e),a=Su(e);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function UG(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return EAe(e);var r=e.read_shift(n&&n.biff==12?4:2),i=Su(e);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function EAe(e){var t=Su(e),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}function wAe(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function SAe(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return AAe(e);var i=e.read_shift(r>=12?4:2),s=e.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function AAe(e){var t=e.read_shift(2),n=e.read_shift(1),r=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,r==1&&t>=8192&&(t=t-16384),i==1&&n>=128&&(n=n-256),{r:t,c:n,cRel:i,rRel:r}}function TAe(e,t,n){var r=(e[e.l++]&96)>>5,i=PG(e,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function kAe(e,t,n){var r=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var a=PG(e,s,n);return[r,i,a]}function CAe(e,t,n){var r=(e[e.l++]&96)>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function FAe(e,t,n){var r=(e[e.l++]&96)>>5,i=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[r,i]}function OAe(e,t,n){var r=(e[e.l++]&96)>>5,i=bAe(e,t-1,n);return[r,i]}function NAe(e,t,n){var r=(e[e.l++]&96)>>5;return e.l+=n.biff==2?6:n.biff==12?14:7,[r]}function D8(e){var t=e[e.l+1]&1,n=1;return e.l+=4,[t,n]}function DAe(e,t,n){e.l+=2;for(var r=e.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(e.read_shift(n&&n.biff==2?1:2));return i}function MAe(e,t,n){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(n&&n.biff==2?1:2)]}function RAe(e,t,n){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(n&&n.biff==2?1:2)]}function $Ae(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function IAe(e,t,n){var r=e[e.l+1]&255?1:0;return e.l+=n&&n.biff==2?3:4,[r]}function zG(e){var t=e.read_shift(1),n=e.read_shift(1);return[t,n]}function LAe(e){return e.read_shift(2),zG(e)}function PAe(e){return e.read_shift(2),zG(e)}function BAe(e,t,n){var r=(e[e.l]&96)>>5;e.l+=1;var i=UG(e,0,n);return[r,i]}function UAe(e,t,n){var r=(e[e.l]&96)>>5;e.l+=1;var i=SAe(e,0,n);return[r,i]}function zAe(e,t,n){var r=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);n&&n.biff==5&&(e.l+=12);var s=UG(e,0,n);return[r,i,s]}function HAe(e,t,n){var r=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[VTe[i],WG[i],r]}function VAe(e,t,n){var r=e[e.l++],i=e.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,e.read_shift(1)]:WAe(e);return[i,(s[0]===0?WG:HTe)[s[1]]]}function WAe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function jAe(e,t,n){e.l+=n&&n.biff==2?3:4}function GAe(e,t,n){if(e.l++,n&&n.biff==12)return[e.read_shift(4,"i"),0];var r=e.read_shift(2),i=e.read_shift(n&&n.biff==2?1:2);return[r,i]}function qAe(e){return e.l++,Ji[e.read_shift(1)]}function XAe(e){return e.l++,e.read_shift(2)}function YAe(e){return e.l++,e.read_shift(1)!==0}function KAe(e){return e.l++,qr(e)}function JAe(e,t,n){return e.l++,Y0(e,t-1,n)}function ZAe(e,t){var n=[e.read_shift(1)];if(t==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Fn(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:n[1]=Ji[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:n[1]=qr(e);break;case 2:n[1]=td(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function QAe(e,t,n){for(var r=e.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?ed:HE)(e));return i}function eTe(e,t,n){var r=0,i=0;n.biff==12?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=ZAe(e,n.biff);return a}function tTe(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[r,0,s]}function nTe(e,t,n){if(n.biff==5)return rTe(e);var r=e.read_shift(1)>>>5&3,i=e.read_shift(2),s=e.read_shift(4);return[r,i,s]}function rTe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}function iTe(e,t,n){var r=e.read_shift(1)>>>5&3;e.l+=n&&n.biff==2?3:4;var i=e.read_shift(n&&n.biff==2?1:2);return[r,i]}function sTe(e,t,n){var r=e.read_shift(1)>>>5&3,i=e.read_shift(n&&n.biff==2?1:2);return[r,i]}function aTe(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,n.biff==12&&(e.l+=2),[r]}function oTe(e,t,n){var r=(e[e.l++]&96)>>5,i=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[r,i]}var lTe=ai,cTe=ai,uTe=ai;function bx(e,t,n){return e.l+=2,[wAe(e)]}function AO(e){return e.l+=6,[]}var fTe=bx,hTe=AO,dTe=AO,pTe=bx;function HG(e){return e.l+=2,[bn(e),e.read_shift(2)&1]}var gTe=bx,mTe=HG,xTe=AO,vTe=bx,yTe=bx,_Te=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function bTe(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2),a=_Te[n>>2&31];return{ixti:t,coltype:n&3,rt:a,idx:r,c:i,C:s}}function ETe(e){return e.l+=2,[e.read_shift(4)]}function wTe(e,t,n){return e.l+=5,e.l+=2,e.l+=n.biff==2?1:4,["PTGSHEET"]}function STe(e,t,n){return e.l+=n.biff==2?4:5,["PTGENDSHEET"]}function ATe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function TTe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function kTe(e){return e.l+=4,[0,0]}var M8={1:{n:"PtgExp",f:GAe},2:{n:"PtgTbl",f:uTe},3:{n:"PtgAdd",f:Ln},4:{n:"PtgSub",f:Ln},5:{n:"PtgMul",f:Ln},6:{n:"PtgDiv",f:Ln},7:{n:"PtgPower",f:Ln},8:{n:"PtgConcat",f:Ln},9:{n:"PtgLt",f:Ln},10:{n:"PtgLe",f:Ln},11:{n:"PtgEq",f:Ln},12:{n:"PtgGe",f:Ln},13:{n:"PtgGt",f:Ln},14:{n:"PtgNe",f:Ln},15:{n:"PtgIsect",f:Ln},16:{n:"PtgUnion",f:Ln},17:{n:"PtgRange",f:Ln},18:{n:"PtgUplus",f:Ln},19:{n:"PtgUminus",f:Ln},20:{n:"PtgPercent",f:Ln},21:{n:"PtgParen",f:Ln},22:{n:"PtgMissArg",f:Ln},23:{n:"PtgStr",f:JAe},26:{n:"PtgSheet",f:wTe},27:{n:"PtgEndSheet",f:STe},28:{n:"PtgErr",f:qAe},29:{n:"PtgBool",f:YAe},30:{n:"PtgInt",f:XAe},31:{n:"PtgNum",f:KAe},32:{n:"PtgArray",f:NAe},33:{n:"PtgFunc",f:HAe},34:{n:"PtgFuncVar",f:VAe},35:{n:"PtgName",f:tTe},36:{n:"PtgRef",f:BAe},37:{n:"PtgArea",f:TAe},38:{n:"PtgMemArea",f:iTe},39:{n:"PtgMemErr",f:lTe},40:{n:"PtgMemNoMem",f:cTe},41:{n:"PtgMemFunc",f:sTe},42:{n:"PtgRefErr",f:aTe},43:{n:"PtgAreaErr",f:CAe},44:{n:"PtgRefN",f:UAe},45:{n:"PtgAreaN",f:OAe},46:{n:"PtgMemAreaN",f:ATe},47:{n:"PtgMemNoMemN",f:TTe},57:{n:"PtgNameX",f:nTe},58:{n:"PtgRef3d",f:zAe},59:{n:"PtgArea3d",f:kAe},60:{n:"PtgRefErr3d",f:oTe},61:{n:"PtgAreaErr3d",f:FAe},255:{}},CTe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},FTe={1:{n:"PtgElfLel",f:HG},2:{n:"PtgElfRw",f:vTe},3:{n:"PtgElfCol",f:fTe},6:{n:"PtgElfRwV",f:yTe},7:{n:"PtgElfColV",f:pTe},10:{n:"PtgElfRadical",f:gTe},11:{n:"PtgElfRadicalS",f:xTe},13:{n:"PtgElfColS",f:hTe},15:{n:"PtgElfColSV",f:dTe},16:{n:"PtgElfRadicalLel",f:mTe},25:{n:"PtgList",f:bTe},29:{n:"PtgSxName",f:ETe},255:{}},OTe={0:{n:"PtgAttrNoop",f:kTe},1:{n:"PtgAttrSemi",f:IAe},2:{n:"PtgAttrIf",f:RAe},4:{n:"PtgAttrChoose",f:DAe},8:{n:"PtgAttrGoto",f:MAe},16:{n:"PtgAttrSum",f:jAe},32:{n:"PtgAttrBaxcel",f:D8},33:{n:"PtgAttrBaxcel",f:D8},64:{n:"PtgAttrSpace",f:LAe},65:{n:"PtgAttrSpaceSemi",f:PAe},128:{n:"PtgAttrIfError",f:$Ae},255:{}};function Ex(e,t,n,r){if(r.biff<8)return ai(e,t);for(var i=e.l+t,s=[],a=0;a!==n.length;++a)switch(n[a][0]){case"PtgArray":n[a][1]=eTe(e,0,r),s.push(n[a][1]);break;case"PtgMemArea":n[a][2]=QAe(e,n[a][1],r),s.push(n[a][2]);break;case"PtgExp":r&&r.biff==12&&(n[a][1][1]=e.read_shift(4),s.push(n[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[a][0]}return t=i-e.l,t!==0&&s.push(ai(e,t)),s}function wx(e,t,n){for(var r=e.l+t,i,s,a=[];r!=e.l;)t=r-e.l,s=e[e.l],i=M8[s]||M8[CTe[s]],(s===24||s===25)&&(i=(s===24?FTe:OTe)[e[e.l+1]]),!i||!i.f?ai(e,t):a.push([i.n,i.f(e,t,n)]);return a}function NTe(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var DTe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function MTe(e,t){var n=e.lastIndexOf("!"),r=t.lastIndexOf("!");return n==-1&&r==-1?e+":"+t:n>0&&r>0&&e.slice(0,n).toLowerCase()==t.slice(0,r).toLowerCase()?e+":"+t.slice(r+1):(console.error("Cannot hydrate range",e,t),e+":"+t)}function VG(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=r[1]==-1?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return n.SID!=null?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];case 355:default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[r[0]][0][3]?(i=r[1]==-1?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function R8(e,t,n){var r=VG(e,t,n);return r=="#REF"?r:Dbe(r,n)}function Wr(e,t,n,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0},e:{c:0,r:0}},o=[],l,c,u,f=0,h=0,d,p="";if(!e[0]||!e[0][0])return"";for(var g=-1,m="",x=0,v=e[0].length;x<v;++x){var y=e[0][x];switch(y[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(e[0][g][1][0]){case 0:m=At(" ",e[0][g][1][1]);break;case 1:m=At("\r",e[0][g][1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}c=c+m,g=-1}o.push(c+DTe[y[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(MTe(c,l));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Om(y[1][1],a,i),o.push(Nm(u,s));break;case"PtgRefN":u=n?Om(y[1][1],n,i):y[1][1],o.push(Nm(u,s));break;case"PtgRef3d":f=y[1][1],u=Om(y[1][2],a,i),p=R8(r,f,i),o.push(p+"!"+Nm(u,s));break;case"PtgFunc":case"PtgFuncVar":var _=y[1][0],b=y[1][1];_||(_=0),_&=127;var w=_==0?[]:o.slice(-_);o.length-=_,b==="User"&&(b=w.shift()),o.push(b+"("+w.join(",")+")");break;case"PtgBool":o.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(y[1]);break;case"PtgNum":o.push(String(y[1]));break;case"PtgStr":o.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(y[1]);break;case"PtgAreaN":d=h8(y[1][1],n?{s:n}:a,i),o.push(UA(d,i));break;case"PtgArea":d=h8(y[1][1],a,i),o.push(UA(d,i));break;case"PtgArea3d":f=y[1][1],d=y[1][2],p=R8(r,f,i),o.push(p+"!"+UA(d,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=y[1][2];var E=(r.names||[])[h-1]||(r[0]||[])[h],A=E?E.Name:"SH33TJSNAME"+String(h);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var S=y[1][1];h=y[1][2];var k;if(i.biff<=5)S<0&&(S=-S),r[S]&&(k=r[S][h]);else{var T="";if(((r[S]||[])[0]||[])[0]==14849||(((r[S]||[])[0]||[])[0]==1025?r[S][h]&&r[S][h].itab>0&&(T=r.SheetNames[r[S][h].itab-1]+"!"):T=r.SheetNames[h-1]+"!"),r[S]&&r[S][h])T+=r[S][h].Name;else if(r[0]&&r[0][h])T+=r[0][h].Name;else{var O=(VG(r,S,i)||"").split(";;");O[h-1]?T=O[h-1]:T+="SH33TJSERRX"}o.push(T);break}k||(k={Name:"SH33TJSERRY"}),o.push(k.Name);break;case"PtgParen":var C="(",D=")";if(g>=0){switch(m="",e[0][g][1][0]){case 2:C=At(" ",e[0][g][1][1])+C;break;case 3:C=At("\r",e[0][g][1][1])+C;break;case 4:D=At(" ",e[0][g][1][1])+D;break;case 5:D=At("\r",e[0][g][1][1])+D;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}o.push(C+o.pop()+D);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:y[1][1],r:y[1][0]};var N={c:n.c,r:n.r};if(r.sharedf[Dt(u)]){var R=r.sharedf[Dt(u)];o.push(Wr(R,a,N,r,i))}else{var L=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Wr(c[1],a,N,r,i)),L=!0;break}L||o.push(y[1])}break;case"PtgArray":o.push("{"+NTe(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var I=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&g>=0&&I.indexOf(e[0][x][0])==-1){y=e[0][g];var Y=!0;switch(y[1][0]){case 4:Y=!1;case 0:m=At(" ",y[1][1]);break;case 5:Y=!1;case 1:m=At("\r",y[1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}o.push((Y?m:"")+o.pop()+(Y?"":m)),g=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]=="TRUE"?!0:o[0]=="FALSE"?!1:o[0]}function RTe(e,t,n){var r=e.l+t,i=n.biff==2?1:2,s,a=e.read_shift(i);if(a==65535)return[[],ai(e,t-2)];var o=wx(e,a,n);return t!==a+i&&(s=Ex(e,t-a-i,o,n)),e.l=r,[o,s]}function $Te(e,t,n){var r=e.l+t,i=n.biff==2?1:2,s,a=e.read_shift(i);if(a==65535)return[[],ai(e,t-2)];var o=wx(e,a,n);return t!==a+i&&(s=Ex(e,t-a-i,o,n)),e.l=r,[o,s]}function ITe(e,t,n,r){var i=e.l+t,s=wx(e,r,n),a;return i!==e.l&&(a=Ex(e,i-e.l,s,n)),[s,a]}function LTe(e,t,n){var r=e.l+t,i,s=e.read_shift(2),a=wx(e,s,n);return s==65535?[[],ai(e,t-2)]:(t!==s+2&&(i=Ex(e,r-s-2,a,n)),[a,i])}function PTe(e){var t;if(Ol(e,e.l+6)!==65535)return[qr(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function VA(e,t,n){var r=e.l+t,i=to(e,6,n),s=PTe(e),a=e.read_shift(1);n.biff!=2&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var o=$Te(e,r-e.l,n);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function VE(e,t,n){var r=e.read_shift(4),i=wx(e,r,n),s=e.read_shift(4),a=s>0?Ex(e,s,i,n):null;return[i,a]}var BTe=VE,WE=VE,UTe=VE,zTe=VE,HTe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},WG={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},VTe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function $8(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,n){return n.replace(/\./g,"")}),e=e.replace(/\$'([^']|'')+'/g,function(t){return t.slice(1)}),e=e.replace(/\$([^\]\. #$]+)/g,function(t,n){return n.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?t:n}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function WA(e){e=e.replace(/\$'([^']|'')+'/g,function(r){return r.slice(1)}),e=e.replace(/\$([^\]\. #$]+)/g,function(r,i){return i.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?r:i});var t=e.split(":"),n=t[0].split(".")[0];return[n,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var $m={},f0={};function Im(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(n=[1,1,1,1,.5,.5]),e.left==null&&(e.left=n[0]),e.right==null&&(e.right=n[1]),e.top==null&&(e.top=n[2]),e.bottom==null&&(e.bottom=n[3]),e.header==null&&(e.header=n[4]),e.footer==null&&(e.footer=n[5])}}function jG(e,t,n,r,i,s,a){try{r.cellNF&&(e.z=st[t])}catch(l){if(r.WTF)throw l}if(!(e.t==="z"&&!r.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Nr(e.v)),(!r||r.cellText!==!1)&&e.t!=="z")try{if(st[t]==null&&eh(R2e[t]||"General",t),e.t==="e")e.w=e.w||Ji[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=_1(e.v);else if(e.t==="d"){var o=nr(e.v,!!a);(o|0)===o?e.w=o.toString(10):e.w=_1(o)}else{if(e.v===void 0)return"";e.w=wh(e.v,f0)}else e.t==="d"?e.w=Fs(t,nr(e.v,!!a),f0):e.w=Fs(t,e.v,f0)}catch(l){if(r.WTF)throw l}if(r.cellStyles&&n!=null)try{e.s=s.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=z2(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),r.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=z2(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),r.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(r.WTF&&s.Fills)throw l}}}function WTe(e,t){var n=Mn(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=wt(n))}var jTe=/<(?:\w+:)?mergeCell ref=["'][A-Z0-9:]+['"]\s*[\/]?>/g,GTe=/<(?:\w+:)?hyperlink [^<>]*>/mg,qTe=/"(\w*:\w*)"/,XTe=/<(?:\w+:)?col\b[^<>]*[\/]?>/g,YTe=/<(?:\w+:)?autoFilter[^>]*/g,KTe=/<(?:\w+:)?pageMargins[^<>]*\/>/g,GG=/<(?:\w+:)?sheetPr\b[^<>]*?\/>/;function JTe(e,t,n,r,i,s,a){if(!e)return e;r||(r={"!id":{}});var o={};t.dense&&(o["!data"]=[]);var l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",f=cr(e,"sheetData");f?(c=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):c=u=e;var h=c.match(GG);h?TO(h[0],o,i,n):(h=cr(c,"sheetPr"))&&ZTe(h[0],h[1]||"",o,i,n);var d=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(d>0){var p=c.slice(d,d+50).match(qTe);p&&!(t&&t.nodim)&&WTe(o,p[1])}var g=cr(c,"sheetViews");g&&g[1]&&ike(g[1],i);var m=[];if(t.cellStyles){var x=c.match(XTe);x&&tke(m,x)}f&&ske(f[1],o,t,l,s,a,i);var v=u.match(YTe);v&&(o["!autofilter"]=nke(v[0]));var y=[],_=u.match(jTe);if(_)for(d=0;d!=_.length;++d)y[d]=Mn(_[d].slice(_[d].indexOf("=")+2));var b=u.match(GTe);b&&QTe(o,b,r);var w=u.match(KTe);w&&(o["!margins"]=eke(ze(w[0])));var E;if((E=u.match(/legacyDrawing r:id="(.*?)"/))&&(o["!legrel"]=E[1]),t&&t.nodim&&(l.s.c=l.s.r=0),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=wt(l)),t.sheetRows>0&&o["!ref"]){var A=Mn(o["!ref"]);t.sheetRows<=+A.e.r&&(A.e.r=t.sheetRows-1,A.e.r>l.e.r&&(A.e.r=l.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>l.e.c&&(A.e.c=l.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),o["!fullref"]=o["!ref"],o["!ref"]=wt(A))}return m.length>0&&(o["!cols"]=m),y.length>0&&(o["!merges"]=y),r["!id"][o["!legrel"]]&&(o["!legdrawel"]=r["!id"][o["!legrel"]]),o}function TO(e,t,n,r){var i=ze(e);n.Sheets[r]||(n.Sheets[r]={}),i.codeName&&(n.Sheets[r].CodeName=Et(Qt(i.codeName)))}function ZTe(e,t,n,r,i){TO(e.slice(0,e.indexOf(">")),n,r,i)}function QTe(e,t,n){for(var r=e["!data"]!=null,i=0;i!=t.length;++i){var s=ze(Qt(t[i]),!0);if(!s.ref)return;var a=((n||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+Et(s.location))):(s.Target="#"+Et(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Mn(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Pt(c)+Xt(l);r?(e["!data"][l]||(e["!data"][l]=[]),e["!data"][l][c]||(e["!data"][l][c]={t:"z",v:void 0}),e["!data"][l][c].l=s):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=s)}}}function eke(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(n){e[n]&&(t[n]=parseFloat(e[n]))}),t}function tke(e,t){for(var n=!1,r=0;r!=t.length;++r){var i=ze(t[r],!0);i.hidden&&(i.hidden=Gt(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!n&&i.width&&(n=!0,wO(i.width)),K0(i);s<=a;)e[s++]=Hn(i)}}function nke(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var rke=/<(?:\w:)?sheetView(?:[^<>a-z][^<>]*)?\/?>/g;function ike(e,t){t.Views||(t.Views=[{}]),(e.match(rke)||[]).forEach(function(n,r){var i=ze(n);t.Views[r]||(t.Views[r]={}),+i.zoomScale&&(t.Views[r].zoom=+i.zoomScale),i.rightToLeft&&Gt(i.rightToLeft)&&(t.Views[r].RTL=!0)})}var ske=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/ref=["']([^"']*)["']/;return function(s,a,o,l,c,u,f){for(var h=0,d="",p=[],g=[],m=0,x=0,v=0,y="",_,b,w=0,E=0,A,S,k=0,T=0,O=Array.isArray(u.CellXf),C,D=[],N=[],R=a["!data"]!=null,L=[],I={},Y=!1,X=!!o.sheetStubs,oe=!!((f||{}).WBProps||{}).date1904,xe=s.split(t),_e=0,ve=xe.length;_e!=ve;++_e){d=xe[_e].trim();var Oe=d.length;if(Oe!==0){var Pe=0;e:for(h=0;h<Oe;++h)switch(d[h]){case">":if(d[h-1]!="/"){++h;break e}if(o&&o.cellStyles){if(b=ze(d.slice(Pe,h),!0),w=b.r!=null?parseInt(b.r,10):w+1,E=-1,o.sheetRows&&o.sheetRows<w)continue;I={},Y=!1,b.ht&&(Y=!0,I.hpt=parseFloat(b.ht),I.hpx=S1(I.hpt)),b.hidden&&Gt(b.hidden)&&(Y=!0,I.hidden=!0),b.outlineLevel!=null&&(Y=!0,I.level=+b.outlineLevel),Y&&(L[w-1]=I)}break;case"<":Pe=h;break}if(Pe>=h)break;if(b=ze(d.slice(Pe,h),!0),w=b.r!=null?parseInt(b.r,10):w+1,E=-1,!(o.sheetRows&&o.sheetRows<w)){o.nodim||(l.s.r>w-1&&(l.s.r=w-1),l.e.r<w-1&&(l.e.r=w-1)),o&&o.cellStyles&&(I={},Y=!1,b.ht&&(Y=!0,I.hpt=parseFloat(b.ht),I.hpx=S1(I.hpt)),b.hidden&&Gt(b.hidden)&&(Y=!0,I.hidden=!0),b.outlineLevel!=null&&(Y=!0,I.level=+b.outlineLevel),Y&&(L[w-1]=I)),p=d.slice(h).split(e);for(var Ge=0;Ge!=p.length&&p[Ge].trim().charAt(0)=="<";++Ge);for(p=p.slice(Ge),h=0;h!=p.length;++h)if(d=p[h].trim(),d.length!==0){if(g=d.match(n),m=h,x=0,v=0,d="<c "+(d.slice(0,1)=="<"?">":"")+d,g!=null&&g.length===2){for(m=0,y=g[1],x=0;x!=y.length&&!((v=y.charCodeAt(x)-64)<1||v>26);++x)m=26*m+v;--m,E=m}else++E;for(x=0;x!=d.length&&d.charCodeAt(x)!==62;++x);if(++x,b=ze(d.slice(0,x),!0),b.r||(b.r=Dt({r:w-1,c:E})),y=d.slice(x),_={t:""},(g=cr(y,"v"))!=null&&g[1]!==""&&(_.v=Et(g[1])),o.cellFormula){if((g=cr(y,"f"))!=null){if(g[1]=="")g[0].indexOf('t="shared"')>-1&&(S=ze(g[0]),N[S.si]&&(_.f=O8(N[S.si][1],N[S.si][2],b.r)));else if(_.f=Et(Qt(g[1]),!0),o.xlfn||(_.f=N8(_.f)),g[0].indexOf('t="array"')>-1)_.F=(y.match(r)||[])[1],_.F.indexOf(":")>-1&&D.push([Mn(_.F),_.F]);else if(g[0].indexOf('t="shared"')>-1){S=ze(g[0]);var z=Et(Qt(g[1]));o.xlfn||(z=N8(z)),N[parseInt(S.si,10)]=[S,z,b.r]}}else(g=y.match(/<f[^<>]*\/>/))&&(S=ze(g[0]),N[S.si]&&(_.f=O8(N[S.si][1],N[S.si][2],b.r)));var q=Kr(b.r);for(x=0;x<D.length;++x)q.r>=D[x][0].s.r&&q.r<=D[x][0].e.r&&q.c>=D[x][0].s.c&&q.c<=D[x][0].e.c&&(_.F=D[x][1])}if(b.t==null&&_.v===void 0)if(_.f||_.F)_.v=0,_.t="n";else if(X)_.t="z";else continue;else _.t=b.t||"n";switch(l.s.c>E&&(l.s.c=E),l.e.c<E&&(l.e.c=E),_.t){case"n":if(_.v==""||_.v==null){if(!X)continue;_.t="z"}else _.v=parseFloat(_.v);break;case"s":if(typeof _.v>"u"){if(!X)continue;_.t="z"}else A=$m[parseInt(_.v,10)],_.v=A.t,_.r=A.r,o.cellHTML&&(_.h=A.h);break;case"str":_.t="s",_.v=_.v!=null?Et(Qt(_.v),!0):"",o.cellHTML&&(_.h=Cm(_.v));break;case"inlineStr":g=cr(y,"is"),_.t="s",g!=null&&(A=EO(g[1]))?(_.v=A.t,o.cellHTML&&(_.h=A.h)):_.v="";break;case"b":_.v=Gt(_.v);break;case"d":o.cellDates?_.v=Nr(_.v,oe):(_.v=nr(Nr(_.v,oe),oe),_.t="n");break;case"e":(!o||o.cellText!==!1)&&(_.w=_.v),_.v=Ar[_.v];break}if(k=T=0,C=null,O&&b.s!==void 0&&(C=u.CellXf[b.s],C!=null&&(C.numFmtId!=null&&(k=C.numFmtId),o.cellStyles&&C.fillId!=null&&(T=C.fillId))),jG(_,k,T,o,c,u,oe),o.cellDates&&O&&_.t=="n"&&ja(st[k])&&(_.v=iu(_.v+(oe?1462:0)),_.t=typeof _.v=="number"?"n":"d"),b.cm&&o.xlmeta){var G=(o.xlmeta.Cell||[])[+b.cm-1];G&&G.type=="XLDAPR"&&(_.D=!0)}var H;o.nodim&&(H=Kr(b.r),l.s.r>H.r&&(l.s.r=H.r),l.e.r<H.r&&(l.e.r=H.r)),R?(H=Kr(b.r),a["!data"][H.r]||(a["!data"][H.r]=[]),a["!data"][H.r][H.c]=_):a[b.r]=_}}}}L.length>0&&(a["!rows"]=L)}}();function ake(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}var oke=ed;function lke(){}function cke(e,t){var n={},r=e[e.l];return++e.l,n.above=!(r&64),n.left=!(r&128),e.l+=18,n.name=Lbe(e),n}function uke(e){var t=ma(e);return[t]}function fke(e){var t=Qh(e);return[t]}function hke(e){var t=ma(e),n=e.read_shift(1);return[t,n,"b"]}function dke(e){var t=Qh(e),n=e.read_shift(1);return[t,n,"b"]}function pke(e){var t=ma(e),n=e.read_shift(1);return[t,n,"e"]}function gke(e){var t=Qh(e),n=e.read_shift(1);return[t,n,"e"]}function mke(e){var t=ma(e),n=e.read_shift(4);return[t,n,"s"]}function xke(e){var t=Qh(e),n=e.read_shift(4);return[t,n,"s"]}function vke(e){var t=ma(e),n=qr(e);return[t,n,"n"]}function qG(e){var t=Qh(e),n=qr(e);return[t,n,"n"]}function yke(e){var t=ma(e),n=zE(e);return[t,n,"n"]}function _ke(e){var t=Qh(e),n=zE(e);return[t,n,"n"]}function bke(e){var t=ma(e),n=yO(e);return[t,n,"is"]}function Eke(e){var t=ma(e),n=ti(e);return[t,n,"str"]}function wke(e){var t=Qh(e),n=ti(e);return[t,n,"str"]}function Ske(e,t,n){var r=e.l+t,i=ma(e);i.r=n["!row"];var s=e.read_shift(1),a=[i,s,"b"];if(n.cellFormula){e.l+=2;var o=WE(e,r-e.l,n);a[3]=Wr(o,null,i,n.supbooks,n)}else e.l=r;return a}function Ake(e,t,n){var r=e.l+t,i=ma(e);i.r=n["!row"];var s=e.read_shift(1),a=[i,s,"e"];if(n.cellFormula){e.l+=2;var o=WE(e,r-e.l,n);a[3]=Wr(o,null,i,n.supbooks,n)}else e.l=r;return a}function Tke(e,t,n){var r=e.l+t,i=ma(e);i.r=n["!row"];var s=qr(e),a=[i,s,"n"];if(n.cellFormula){e.l+=2;var o=WE(e,r-e.l,n);a[3]=Wr(o,null,i,n.supbooks,n)}else e.l=r;return a}function kke(e,t,n){var r=e.l+t,i=ma(e);i.r=n["!row"];var s=ti(e),a=[i,s,"str"];if(n.cellFormula){e.l+=2;var o=WE(e,r-e.l,n);a[3]=Wr(o,null,i,n.supbooks,n)}else e.l=r;return a}var Cke=ed;function Fke(e,t){var n=e.l+t,r=ed(e),i=UE(e),s=ti(e),a=ti(e),o=ti(e);e.l=n;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function Oke(){}function Nke(e,t,n){var r=e.l+t,i=hG(e),s=e.read_shift(1),a=[i];if(a[2]=s,n.cellFormula){var o=BTe(e,r-e.l,n);a[1]=o}else e.l=r;return a}function Dke(e,t,n){var r=e.l+t,i=ed(e),s=[i];if(n.cellFormula){var a=zTe(e,r-e.l,n);s[1]=a,e.l=r}else e.l=r;return s}var Mke=["left","right","top","bottom","header","footer"];function Rke(e){var t={};return Mke.forEach(function(n){t[n]=qr(e)}),t}function $ke(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Ike(){}function Lke(){}function Pke(e,t,n,r,i,s,a){if(!e)return e;var o=t||{};r||(r={"!id":{}});var l={};o.dense&&(l["!data"]=[]);var c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,d,p,g,m,x,v,y,_,b,w=[];o.biff=12,o["!row"]=0;var E=0,A=!1,S=[],k={},T=o.supbooks||i.supbooks||[[]];if(T.sharedf=k,T.arrayf=S,T.SheetNames=i.SheetNames||i.Sheets.map(function(Y){return Y.name}),!o.supbooks&&(o.supbooks=T,i.Names))for(var O=0;O<i.Names.length;++O)T[0][O+1]=i.Names[O];var C=[],D=[],N=!1;W2[16]={n:"BrtShortReal",f:qG};var R,L=1462*+!!((i||{}).WBProps||{}).date1904;if(lc(e,function(X,oe,xe){if(!h)switch(xe){case 148:c=X;break;case 0:d=X,o.sheetRows&&o.sheetRows<=d.r&&(h=!0),_=Xt(m=d.r),o["!row"]=d.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=S1(X.hpt)),D[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:X[2]},X[2]){case"n":p.v=X[1];break;case"s":y=$m[X[1]],p.v=y.t,p.r=y.r;break;case"b":p.v=!!X[1];break;case"e":p.v=X[1],o.cellText!==!1&&(p.w=Ji[p.v]);break;case"str":p.t="s",p.v=X[1];break;case"is":p.t="s",p.v=X[1].t;break}if((g=a.CellXf[X[0].iStyleRef])&&jG(p,g.numFmtId,null,o,s,a,L>0),x=X[0].c==-1?x+1:X[0].c,o.dense?(l["!data"][m]||(l["!data"][m]=[]),l["!data"][m][x]=p):l[Pt(x)+_]=p,o.cellFormula){for(A=!1,E=0;E<S.length;++E){var _e=S[E];d.r>=_e[0].s.r&&d.r<=_e[0].e.r&&x>=_e[0].s.c&&x<=_e[0].e.c&&(p.F=wt(_e[0]),A=!0)}!A&&X.length>3&&(p.f=X[3])}if(u.s.r>d.r&&(u.s.r=d.r),u.s.c>x&&(u.s.c=x),u.e.r<d.r&&(u.e.r=d.r),u.e.c<x&&(u.e.c=x),o.cellDates&&g&&p.t=="n"&&ja(st[g.numFmtId])){var ve=_l(p.v+L);ve&&(p.t="d",p.v=new Date(Date.UTC(ve.y,ve.m-1,ve.d,ve.H,ve.M,ve.S,ve.u)))}R&&(R.type=="XLDAPR"&&(p.D=!0),R=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;p={t:"z",v:void 0},x=X[0].c==-1?x+1:X[0].c,o.dense?(l["!data"][m]||(l["!data"][m]=[]),l["!data"][m][x]=p):l[Pt(x)+_]=p,u.s.r>d.r&&(u.s.r=d.r),u.s.c>x&&(u.s.c=x),u.e.r<d.r&&(u.e.r=d.r),u.e.c<x&&(u.e.c=x),R&&(R.type=="XLDAPR"&&(p.D=!0),R=void 0);break;case 176:w.push(X);break;case 49:R=((o.xlmeta||{}).Cell||[])[X-1];break;case 494:var Oe=r["!id"][X.relId];for(Oe?(X.Target=Oe.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=Oe):X.relId==""&&(X.Target="#"+X.loc),m=X.rfx.s.r;m<=X.rfx.e.r;++m)for(x=X.rfx.s.c;x<=X.rfx.e.c;++x)o.dense?(l["!data"][m]||(l["!data"][m]=[]),l["!data"][m][x]||(l["!data"][m][x]={t:"z",v:void 0}),l["!data"][m][x].l=X):(v=Pt(x)+Xt(m),l[v]||(l[v]={t:"z",v:void 0}),l[v].l=X);break;case 426:if(!o.cellFormula)break;S.push(X),b=o.dense?l["!data"][m][x]:l[Pt(x)+_],b.f=Wr(X[1],u,{r:d.r,c:x},T,o),b.F=wt(X[0]);break;case 427:if(!o.cellFormula)break;k[Dt(X[0].s)]=X[1],b=o.dense?l["!data"][m][x]:l[Pt(x)+_],b.f=Wr(X[1],u,{r:d.r,c:x},T,o);break;case 60:if(!o.cellStyles)break;for(;X.e>=X.s;)C[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},N||(N=!0,wO(X.w/256)),K0(C[X.e+1]);break;case 551:X&&(l["!legrel"]=X);break;case 161:l["!autofilter"]={ref:wt(X)};break;case 476:l["!margins"]=X;break;case 147:i.Sheets[n]||(i.Sheets[n]={}),X.name&&(i.Sheets[n].CodeName=X.name),(X.above||X.left)&&(l["!outline"]={above:X.above,left:X.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),X.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!oe.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+xe.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=wt(c||u)),o.sheetRows&&l["!ref"]){var I=Mn(l["!ref"]);o.sheetRows<=+I.e.r&&(I.e.r=o.sheetRows-1,I.e.r>u.e.r&&(I.e.r=u.e.r),I.e.r<I.s.r&&(I.s.r=I.e.r),I.e.c>u.e.c&&(I.e.c=u.e.c),I.e.c<I.s.c&&(I.s.c=I.e.c),l["!fullref"]=l["!ref"],l["!ref"]=wt(I))}return w.length>0&&(l["!merges"]=w),C.length>0&&(l["!cols"]=C),D.length>0&&(l["!rows"]=D),r["!id"][l["!legrel"]]&&(l["!legdrawel"]=r["!id"][l["!legrel"]]),l}function Bke(e){var t=[],n=e.match(/^<c:numCache>/),r;(e.match(/<c:pt idx="(\d*)"[^<>\/]*><c:v>([^<])<\/c:v><\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*)"[^<>\/]*><c:v>([^<]*)<\/c:v><\/c:pt>/);a&&(t[+a[1]]=n?+a[2]:a[2])});var i=Et((th(e,"c:formatCode")||["","General"])[1]);return(pO(e,"<c:f>","</c:f>")||[]).forEach(function(s){r=s.replace(/<[^<>]*>/g,"")}),[t,i,r]}function Uke(e,t,n,r,i,s){var a=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(pO(e,"<c:numCache>","</c:numCache>")||[]).forEach(function(f){var h=Bke(f);u.s.r=u.s.c=0,u.e.c=o,c=Pt(o),h[0].forEach(function(d,p){a["!data"]?(a["!data"][p]||(a["!data"][p]=[]),a["!data"][p][o]={t:"n",v:d,z:h[1]}):a[c+Xt(p)]={t:"n",v:d,z:h[1]},l=p}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=wt(u)),a}function zke(e,t,n,r,i){if(!e)return e;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=e.match(GG);return o&&TO(o[0],s,i,n),(a=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}function Hke(e,t){e.l+=10;var n=ti(e);return{name:n}}function Vke(e,t,n,r,i){if(!e)return e;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return lc(e,function(l,c,u){switch(u){case 550:s["!rel"]=l;break;case 651:i.Sheets[n]||(i.Sheets[n]={}),l.name&&(i.Sheets[n].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}var XG=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Wke=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],jke=[],Gke=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function I8(e,t){for(var n=0;n!=e.length;++n)for(var r=e[n],i=0;i!=t.length;++i){var s=t[i];if(r[s[0]]==null)r[s[0]]=s[1];else switch(s[2]){case"bool":typeof r[s[0]]=="string"&&(r[s[0]]=Gt(r[s[0]]));break;case"int":typeof r[s[0]]=="string"&&(r[s[0]]=parseInt(r[s[0]],10));break}}}function L8(e,t){for(var n=0;n!=t.length;++n){var r=t[n];if(e[r[0]]==null)e[r[0]]=r[1];else switch(r[2]){case"bool":typeof e[r[0]]=="string"&&(e[r[0]]=Gt(e[r[0]]));break;case"int":typeof e[r[0]]=="string"&&(e[r[0]]=parseInt(e[r[0]],10));break}}}function YG(e){L8(e.WBProps,XG),L8(e.CalcPr,Gke),I8(e.WBView,Wke),I8(e.Sheets,jke),f0.date1904=Gt(e.WBProps.date1904)}var qke=":][*?/\\".split("");function Xke(e,t){try{if(e=="")throw new Error("Sheet name cannot be blank");if(e.length>31)throw new Error("Sheet name cannot exceed 31 chars");if(e.charCodeAt(0)==39||e.charCodeAt(e.length-1)==39)throw new Error("Sheet name cannot start or end with apostrophe (')");if(e.toLowerCase()=="history")throw new Error("Sheet name cannot be 'History'");qke.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")})}catch(n){throw n}return!0}var Yke=/<\w+:workbook/;function Kke(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,i="xmlns",s={},a=0;if(e.replace(Mr,function(l,c){var u=ze(l);switch(ga(u[0])){case"<?xml":break;case"<workbook":l.match(Yke)&&(i="xmlns"+l.match(/<(\w+):/)[1]),n.xmlns=u[i];break;case"</workbook>":break;case"<fileVersion":delete u[0],n.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":XG.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":n.WBProps[f[0]]=Gt(u[f[0]]);break;case"int":n.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:n.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(n.WBProps.CodeName=Qt(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],n.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Et(Qt(u.name)),delete u[0],n.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":s={},s.Name=Qt(u.name),u.comment&&(s.Comment=u.comment),u.localSheetId&&(s.Sheet=+u.localSheetId),Gt(u.hidden||"0")&&(s.Hidden=!0),a=c+l.length;break;case"</definedName>":s.Ref=Et(Qt(e.slice(a,c))),n.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete u[0],n.CalcPr=u;break;case"<calcPr/>":delete u[0],n.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),vbe.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return YG(n),n}function Jke(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=vC(e),n.name=ti(e),n}function Zke(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?ti(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function Qke(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function eCe(e,t,n){var r=e.l+t,i=e.read_shift(4);e.l+=1;var s=e.read_shift(4),a=Pbe(e),o,l="";try{o=UTe(e,0,n);try{l=UE(e)}catch{}}catch{console.error("Could not parse defined name "+a)}i&32&&(a="_xlnm."+a),e.l=r;var c={Name:a,Ptg:o,Flags:i};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function tCe(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],i=!1;t||(t={}),t.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],W2[16]={n:"BrtFRTArchID$",f:Qke},lc(e,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),n.Sheets.push(l);break;case 153:n.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=l.Ptg?Wr(l.Ptg,null,null,a,t):"#REF!",delete t.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(u),i=!0;break;case 36:r.pop(),i=!1;break;case 37:r.push(u),i=!0;break;case 38:r.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||t.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),YG(n),n.Names=s,n.supbooks=a,n}function nCe(e,t,n){return t.slice(-4)===".bin"?tCe(e,n):Kke(e,n)}function rCe(e,t,n,r,i,s,a,o){return t.slice(-4)===".bin"?Pke(e,r,n,i,s,a,o):JTe(e,r,n,i,s,a,o)}function iCe(e,t,n,r,i,s,a,o){return t.slice(-4)===".bin"?Vke(e,r,n,i,s):zke(e,r,n,i,s)}function sCe(e,t,n,r,i,s,a,o){return t.slice(-4)===".bin"?xAe():vAe()}function aCe(e,t,n,r,i,s,a,o){return t.slice(-4)===".bin"?gAe():mAe()}function oCe(e,t,n,r){return t.slice(-4)===".bin"?LSe(e,n,r):NSe(e,n,r)}function lCe(e,t,n){return t.slice(-4)===".bin"?Zwe(e,n):Kwe(e,n)}function cCe(e,t,n){return t.slice(-4)===".bin"?hAe(e,n):oAe(e,n)}function uCe(e,t,n){return t.slice(-4)===".bin"?rAe(e):tAe(e)}function fCe(e,t,n,r){return n.slice(-4)===".bin"?iAe(e,t,n,r):void 0}function hCe(e,t,n){return t.slice(-4)===".bin"?QSe(e,t,n):eAe(e,t,n)}var KG=/\b((?:\w+:)?[\w]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,JG=/\b((?:\w+:)?[\w]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function _a(e,t){var n=e.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var i=e.match(KG),s,a,o,l;if(i)for(l=0;l!=i.length;++l)s=i[l].match(JG),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),r[o]=s[2].slice(1,s[2].length-1));return r}function dCe(e){var t=e.split(/\s+/),n={};if(t.length===1)return n;var r=e.match(KG),i,s,a,o;if(r)for(o=0;o!=r.length;++o)i=r[o].match(JG),(s=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),n[a]=i[2].slice(1,i[2].length-1));return n}var Lm;function pCe(e,t,n){var r=Lm[e]||Et(e);return r==="General"?wh(t):Fs(r,t,{date1904:!!n})}function gCe(e,t,n,r){var i=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Gt(r);break;case"i2":case"int":i=parseInt(r,10);break;case"r4":case"float":i=parseFloat(r);break;case"date":case"dateTime.tz":i=Nr(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[Et(t)]=i}function mCe(e,t,n,r){if(e.t!=="z"){if(!n||n.cellText!==!1)try{e.t==="e"?e.w=e.w||Ji[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=_1(e.v):e.w=wh(e.v):e.w=pCe(t||"General",e.v,r)}catch(a){if(n.WTF)throw a}try{var i=Lm[t]||t||"General";if(n.cellNF&&(e.z=i),n.cellDates&&e.t=="n"&&ja(i)){var s=_l(e.v+(r?1462:0));s&&(e.t="d",e.v=new Date(Date.UTC(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u)))}}catch(a){if(n.WTF)throw a}}}function xCe(e,t,n){if(n.cellStyles&&t.Interior){var r=t.Interior;r.Pattern&&(r.patternType=ASe[r.Pattern]||r.Pattern)}e[t.ID]=t}function vCe(e,t,n,r,i,s,a,o,l,c,u){var f="General",h=r.StyleID,d={};c=c||{};var p=[],g=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&a&&(h=a.StyleID);s[h]!==void 0;){var m=s[h];if(m.nf&&(f=m.nf),m.Interior&&p.push(m.Interior),!m.Parent)break;h=m.Parent}switch(n.Type){case"Boolean":r.t="b",r.v=Gt(e);break;case"String":r.t="s",r.r=r8(Et(e)),r.v=e.indexOf("<")>-1?Et(t||e).replace(/<[^<>]*>/g,""):r.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),r.v=nr(Nr(e,u),u),r.v!==r.v&&(r.v=Et(e)),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+e),r.t||(r.t="n");break;case"Error":r.t="e",r.v=Ar[e],c.cellText!==!1&&(r.w=e);break;default:e==""&&t==""?r.t="z":(r.t="s",r.v=r8(t||e));break}if(mCe(r,f,c,u),c.cellFormula!==!1)if(r.Formula){var x=Et(r.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),r.f=rh(x,i),delete r.Formula,r.ArrayRange=="RC"?r.F=rh("RC:RC",i):r.ArrayRange&&(r.F=rh(r.ArrayRange,i),l.push([Mn(r.F),r.F]))}else for(g=0;g<l.length;++g)i.r>=l[g][0].s.r&&i.r<=l[g][0].e.r&&i.c>=l[g][0].s.c&&i.c<=l[g][0].e.c&&(r.F=l[g][1]);c.cellStyles&&(p.forEach(function(v){!d.patternType&&v.patternType&&(d.patternType=v.patternType)}),r.s=d),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function yCe(e){return gG.indexOf("_xlnm."+e)>-1?"_xlnm."+e:e}function _Ce(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function jA(e,t){var n=t||{};Uj();var r=Yg(BE(e));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=Qt(r));var i=r.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=Hn(n);return a.type="string",E1.to_workbook(r,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(te){i.indexOf("<"+te)>=0&&(s=!0)}),s)return FCe(r,n);Lm={"General Number":"General","General Date":st[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":st[15],"Short Date":st[14],"Long Time":st[19],"Medium Time":st[18],"Short Time":st[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:st[2],Standard:st[4],Percent:st[10],Scientific:st[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},f=[],h={},d="";n.dense&&(h["!data"]=[]);var p={},g={},m=_a('<Data ss:Type="String">'),x=0,v=0,y=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},b={},w={},E="",A=0,S=[],k={},T={},O=0,C=[],D=[],N={},R=[],L,I=!1,Y=[],X=[],oe={},xe=0,_e=0,ve={Sheets:[],WBProps:{date1904:!1}},Oe={};Bn.lastIndex=0,r=vx(r,"<!--","-->");for(var Pe="";o=Bn.exec(r);)switch(o[3]=(Pe=o[3]).toLowerCase()){case"data":if(Pe=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?vCe(r.slice(x,o.index),E,m,l[l.length-1][0]=="comment"?N:p,{c:v,r:y},b,R[v],g,Y,n,ve.WBProps.date1904):(E="",m=_a(o[0]),x=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(D.length>0&&(p.c=D),(!n.sheetRows||n.sheetRows>y)&&p.v!==void 0&&(n.dense?(h["!data"][y]||(h["!data"][y]=[]),h["!data"][y][v]=p):h[Pt(v)+Xt(y)]=p),p.HRef&&(p.l={Target:Et(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(xe=v+(parseInt(p.MergeAcross,10)|0),_e=y+(parseInt(p.MergeDown,10)|0),(xe>v||_e>y)&&S.push({s:{c:v,r:y},e:{c:xe,r:_e}})),!n.sheetStubs)p.MergeAcross?v=xe+1:++v;else if(p.MergeAcross||p.MergeDown){for(var Ge=v;Ge<=xe;++Ge)for(var z=y;z<=_e;++z)(Ge>v||z>y)&&(n.dense?(h["!data"][z]||(h["!data"][z]=[]),h["!data"][z][Ge]={t:"z"}):h[Pt(Ge)+Xt(z)]={t:"z"});v=xe+1}else++v;else p=dCe(o[0]),p.Index&&(v=+p.Index-1),v<_.s.c&&(_.s.c=v),v>_.e.c&&(_.e.c=v),o[0].slice(-2)==="/>"&&++v,D=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(y<_.s.r&&(_.s.r=y),y>_.e.r&&(_.e.r=y),o[0].slice(-2)==="/>"&&(g=_a(o[0]),g.Index&&(y=+g.Index-1)),v=0,++y):(g=_a(o[0]),g.Index&&(y=+g.Index-1),oe={},(g.AutoFitHeight=="0"||g.Height)&&(oe.hpx=parseInt(g.Height,10),oe.hpt=$G(oe.hpx),X[y]=oe),g.Hidden=="1"&&(oe.hidden=!0,X[y]=oe));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(d),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(h["!ref"]=wt(_),n.sheetRows&&n.sheetRows<=_.e.r&&(h["!fullref"]=h["!ref"],_.e.r=n.sheetRows-1,h["!ref"]=wt(_))),S.length&&(h["!merges"]=S),R.length>0&&(h["!cols"]=R),X.length>0&&(h["!rows"]=X),u[d]=h}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},y=v=0,l.push([o[3],!1]),c=_a(o[0]),d=Et(c.Name),h={},n.dense&&(h["!data"]=[]),S=[],Y=[],X=[],Oe={name:d,Hidden:0},ve.Sheets.push(Oe);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),R=[],I=!1}break;case"style":o[1]==="/"?xCe(b,w,n):w=_a(o[0]);break;case"numberformat":w.nf=Et(_a(o[0]).Format||"General"),Lm[w.nf]&&(w.nf=Lm[w.nf]);for(var q=0;q!=392&&st[q]!=w.nf;++q);if(q==392){for(q=57;q!=392;++q)if(st[q]==null){eh(w.nf,q);break}}break;case"column":if(l[l.length-1][0]!=="table"||o[1]==="/")break;if(L=_a(o[0]),L.Hidden&&(L.hidden=!0,delete L.Hidden),L.Width&&(L.wpx=parseInt(L.Width,10)),!I&&L.wpx>10){I=!0,_i=MG;for(var G=0;G<R.length;++G)R[G]&&K0(R[G])}I&&K0(L),R[L.Index-1||R.length]=L;for(var H=0;H<+L.Span;++H)R[R.length]=Hn(L);break;case"namedrange":if(o[1]==="/")break;ve.Names||(ve.Names=[]);var J=ze(o[0]),F={Name:yCe(J.Name),Ref:rh(J.RefersTo.slice(1),{r:0,c:0})};ve.Sheets.length>0&&(F.Sheet=ve.Sheets.length-1),ve.Names.push(F);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=r.slice(A,o.index):A=o.index+o[0].length;break;case"interior":if(!n.cellStyles)break;w.Interior=_a(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?lEe(k,Pe,r.slice(O,o.index)):O=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));_Ce(N),D.push(N)}else l.push([o[3],!1]),c=_a(o[0]),Gt(c.ShowAlways||"0")||(D.hidden=!0),N={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var B=_a(o[0]);h["!autofilter"]={ref:rh(B.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return H8(r,n);var K=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:K=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:K=!1}break;case"excelworkbook":switch(o[3]){case"date1904":ve.WBProps.date1904=!0;break;case"hidehorizontalscrollbar":break;case"hideverticalscrollbar":break;case"hideworkbooktabs":break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:K=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:K=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(O,o.index)){case"SheetHidden":Oe.Hidden=1;break;case"SheetVeryHidden":Oe.Hidden=2;break}else O=o.index+o[0].length;break;case"header":h["!margins"]||Im(h["!margins"]={},"xlml"),isNaN(+ze(o[0]).Margin)||(h["!margins"].header=+ze(o[0]).Margin);break;case"footer":h["!margins"]||Im(h["!margins"]={},"xlml"),isNaN(+ze(o[0]).Margin)||(h["!margins"].footer=+ze(o[0]).Margin);break;case"pagemargins":var Z=ze(o[0]);h["!margins"]||Im(h["!margins"]={},"xlml"),isNaN(+Z.Top)||(h["!margins"].top=+Z.Top),isNaN(+Z.Left)||(h["!margins"].left=+Z.Left),isNaN(+Z.Right)||(h["!margins"].right=+Z.Right),isNaN(+Z.Bottom)||(h["!margins"].bottom=+Z.Bottom);break;case"displayrighttoleft":ve.Views||(ve.Views=[]),ve.Views[0]||(ve.Views[0]={}),ve.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:K=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:K=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:K=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:K=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:K=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:K=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:K=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:K=!1}break;case"smarttags":break;default:K=!1;break}if(K||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?gCe(T,Pe,C,r.slice(O,o.index)):(C=o,O=o.index+o[0].length);break}if(n.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Q={};return!n.bookSheets&&!n.bookProps&&(Q.Sheets=u),Q.SheetNames=f,Q.Workbook=ve,Q.SSF=Hn(st),Q.Props=k,Q.Custprops=T,Q.bookType="xlml",Q}function bC(e,t){switch(kO(t=t||{}),t.type||"base64"){case"base64":return jA(Cs(e),t);case"binary":case"buffer":case"file":return jA(e,t);case"array":return jA(nc(e),t)}}function bCe(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=zbe(n),n.length-n.l<=4)return t;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(t.UnicodeClipboardFormat=Hbe(n),r=n.read_shift(4),r==0||r>40))return t;n.l-=4,t.Reserved2=n.read_shift(0,"lpwstr")}var ECe=[60,1084,2066,2165,2175];function wCe(e,t,n,r,i){var s=r,a=[],o=n.slice(n.l,n.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),n.l+=s;for(var l=Ol(n,n.l),c=EC[l],u=0;c!=null&&ECe.indexOf(l)>-1;)s=Ol(n,n.l+2),u=n.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=n.slice(u,n.l+4+s),a.push(o),n.l+=4+s,c=EC[l=Ol(n,n.l)];var f=Uc(a);jn(f,0);var h=0;f.lens=[];for(var d=0;d<a.length;++d)f.lens.push(h),h+=a[d].length;if(f.length<r)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+r;return t.f(f,f.length,i)}function fo(e,t,n){if(e.t!=="z"&&e.XF){var r=0;try{r=e.z||e.XF.numFmtId||0,t.cellNF&&e.z==null&&(e.z=st[r])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Ji[e.v]:r===0||r=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=_1(e.v):e.w=wh(e.v):e.w=Fs(r,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&r&&e.t=="n"&&ja(st[r]||String(r))){var i=_l(e.v+(n?1462:0));i&&(e.t="d",e.v=new Date(Date.UTC(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u)))}}}function ay(e,t,n){return{v:e,ixfe:t,t:n}}function SCe(e,t){var n={opts:{}},r={},i={};t.dense&&(i["!data"]=[]);var s={},a={},o=null,l=[],c="",u={},f,h="",d,p,g,m,x={},v=[],y,_,b=[],w=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},A={},S=!1,k=function(Ne){return Ne<8?nh[Ne]:Ne<64&&w[Ne-8]||nh[Ne]},T=function(Ne,gt){var xn=Ne.XF.data;if(!(!xn||!xn.patternType||!gt||!gt.cellStyles)){Ne.s={},Ne.s.patternType=xn.patternType;var sn;(sn=w1(k(xn.icvFore)))&&(Ne.s.fgColor={rgb:sn}),(sn=w1(k(xn.icvBack)))&&(Ne.s.bgColor={rgb:sn})}},O=function(Ne,gt,xn){if(!(!S&&xe>1)&&!(xn.sheetRows&&Ne.r>=xn.sheetRows)){if(xn.cellStyles&&gt.XF&&gt.XF.data&&T(gt,xn),delete gt.ixfe,delete gt.XF,f=Ne,h=Dt(Ne),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),Ne.r<a.s.r&&(a.s.r=Ne.r),Ne.c<a.s.c&&(a.s.c=Ne.c),Ne.r+1>a.e.r&&(a.e.r=Ne.r+1),Ne.c+1>a.e.c&&(a.e.c=Ne.c+1),xn.cellFormula&&gt.f){for(var sn=0;sn<v.length;++sn)if(!(v[sn][0].s.c>Ne.c||v[sn][0].s.r>Ne.r)&&!(v[sn][0].e.c<Ne.c||v[sn][0].e.r<Ne.r)){gt.F=wt(v[sn][0]),(v[sn][0].s.c!=Ne.c||v[sn][0].s.r!=Ne.r)&&delete gt.f,gt.f&&(gt.f=""+Wr(v[sn][1],a,Ne,X,C));break}}xn.dense?(i["!data"][Ne.r]||(i["!data"][Ne.r]=[]),i["!data"][Ne.r][Ne.c]=gt):i[h]=gt}},C={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:v,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(C.password=t.password);var D,N=[],R=[],L=[],I=[],Y=!1,X=[];X.SheetNames=C.snames,X.sharedf=C.sharedf,X.arrayf=C.arrayf,X.names=[],X.XTI=[];var oe=0,xe=0,_e=0,ve=[],Oe=[],Pe;C.codepage=1200,Ra(1200);for(var Ge=!1;e.l<e.length-1;){var z=e.l,q=e.read_shift(2);if(q===0&&oe===10)break;var G=e.l===e.length?0:e.read_shift(2),H=EC[q];if(xe==0&&[9,521,1033,2057].indexOf(q)==-1)break;if(H&&H.f){if(t.bookSheets&&oe===133&&q!==133)break;if(oe=q,H.r===2||H.r==12){var J=e.read_shift(2);if(G-=2,!C.enc&&J!==q&&((J&255)<<8|J>>8)!==q)throw new Error("rt mismatch: "+J+"!="+q);H.r==12&&(e.l+=10,G-=10)}var F={};if(q===10?F=H.f(e,G,C):F=wCe(q,H,e,G,C),xe==0&&[9,521,1033,2057].indexOf(oe)===-1)continue;switch(q){case 34:n.opts.Date1904=E.WBProps.date1904=F;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(C.enc||(e.l=0),C.enc=F,!t.password)throw new Error("File is password-protected");if(F.valid==null)throw new Error("Encryption scheme unsupported");if(!F.valid)throw new Error("Password is incorrect");break;case 92:C.lastuser=F;break;case 66:var B=Number(F);switch(B){case 21010:B=1200;break;case 32768:B=1e4;break;case 32769:B=1252;break}Ra(C.codepage=B),Ge=!0;break;case 317:C.rrtabid=F;break;case 25:C.winlocked=F;break;case 439:n.opts.RefreshAll=F;break;case 12:n.opts.CalcCount=F;break;case 16:n.opts.CalcDelta=F;break;case 17:n.opts.CalcIter=F;break;case 13:n.opts.CalcMode=F;break;case 14:n.opts.CalcPrecision=F;break;case 95:n.opts.CalcSaveRecalc=F;break;case 15:C.CalcRefMode=F;break;case 2211:n.opts.FullCalc=F;break;case 129:F.fDialog&&(i["!type"]="dialog"),F.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),F.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 67:case 579:case 1091:case 224:b.push(F);break;case 430:X.push([F]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(F);break;case 24:case 536:Pe={Name:F.Name,Ref:Wr(F.rgce,a,null,X,C)},F.itab>0&&(Pe.Sheet=F.itab-1),X.names.push(Pe),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(F),F.Name=="_xlnm._FilterDatabase"&&F.itab>0&&F.rgce&&F.rgce[0]&&F.rgce[0][0]&&F.rgce[0][0][0]=="PtgArea3d"&&(Oe[F.itab-1]={ref:wt(F.rgce[0][0][1][2])});break;case 22:C.ExternCount=F;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(F),X.XTI=X.XTI.concat(F);break;case 2196:if(C.biff<8)break;Pe!=null&&(Pe.Comment=F[1]);break;case 18:i["!protect"]=F;break;case 19:F!==0&&C.WTF&&console.error("Password verifier: "+F);break;case 133:s[C.biff==4?C.snames.length:F.pos]=F,C.snames.push(F.name);break;case 10:{if(--xe?!S:S)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=wt(a),t.sheetRows&&t.sheetRows<=a.e.r){var K=a.e.r;a.e.r=t.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=wt(a),a.e.r=K}a.e.r++,a.e.c++}N.length>0&&(i["!merges"]=N),R.length>0&&(i["!objects"]=R),L.length>0&&(i["!cols"]=L),I.length>0&&(i["!rows"]=I),E.Sheets.push(A)}c===""?u=i:r[c]=i,i={},t.dense&&(i["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(C.biff===8&&(C.biff={9:2,521:3,1033:4}[q]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[F.BIFFVer]||8),C.biffguess=F.BIFFVer==0,F.BIFFVer==0&&F.dt==4096&&(C.biff=5,Ge=!0,Ra(C.codepage=28591)),C.biff==4&&F.dt&256&&(S=!0),C.biff==8&&F.BIFFVer==0&&F.dt==16&&(C.biff=2),xe++&&!S)break;if(i={},t.dense&&(i["!data"]=[]),C.biff<8&&!Ge&&(Ge=!0,Ra(C.codepage=t.codepage||1252)),C.biff==4&&S)c=(s[C.snames.indexOf(c)+1]||{name:""}).name;else if(C.biff<5||F.BIFFVer==0&&F.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var Z={pos:e.l-G,name:c};s[Z.pos]=Z,C.snames.push(c)}else c=(s[z]||{name:""}).name;F.dt==32&&(i["!type"]="chart"),F.dt==64&&(i["!type"]="macro"),N=[],R=[],C.arrayf=v=[],L=[],I=[],Y=!1,A={Hidden:(s[z]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(t.dense?(i["!data"][F.r]||[])[F.c]:i[Pt(F.c)+Xt(F.r)])&&++F.c,y={ixfe:F.ixfe,XF:b[F.ixfe]||{},v:F.val,t:"n"},_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O({c:F.c,r:F.r},y,t);break;case 5:case 517:y={ixfe:F.ixfe,XF:b[F.ixfe],v:F.val,t:F.t},_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O({c:F.c,r:F.r},y,t);break;case 638:y={ixfe:F.ixfe,XF:b[F.ixfe],v:F.rknum,t:"n"},_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O({c:F.c,r:F.r},y,t);break;case 189:for(var Q=F.c;Q<=F.C;++Q){var te=F.rkrec[Q-F.c][0];y={ixfe:te,XF:b[te],v:F.rkrec[Q-F.c][1],t:"n"},_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O({c:Q,r:F.r},y,t)}break;case 6:case 518:case 1030:{if(F.val=="String"){o=F;break}if(y=ay(F.val,F.cell.ixfe,F.tt),y.XF=b[y.ixfe],t.cellFormula){var de=F.formula;if(de&&de[0]&&de[0][0]&&de[0][0][0]=="PtgExp"){var me=de[0][0][1][0],ye=de[0][0][1][1],pe=Dt({r:me,c:ye});x[pe]?y.f=""+Wr(F.formula,a,F.cell,X,C):y.F=((t.dense?(i["!data"][me]||[])[ye]:i[pe])||{}).F}else y.f=""+Wr(F.formula,a,F.cell,X,C)}_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O(F.cell,y,t),o=F}break;case 7:case 519:if(o)o.val=F,y=ay(F,o.cell.ixfe,"s"),y.XF=b[y.ixfe],t.cellFormula&&(y.f=""+Wr(o.formula,a,o.cell,X,C)),_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O(o.cell,y,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{v.push(F);var ce=Dt(F[0].s);if(d=t.dense?(i["!data"][F[0].s.r]||[])[F[0].s.c]:i[ce],t.cellFormula&&d){if(!o||!ce||!d)break;d.f=""+Wr(F[1],a,F[0],X,C),d.F=wt(F[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;x[Dt(o.cell)]=F[0],d=t.dense?(i["!data"][o.cell.r]||[])[o.cell.c]:i[Dt(o.cell)],(d||{}).f=""+Wr(F[0],a,f,X,C)}}break;case 253:y=ay(l[F.isst].t,F.ixfe,"s"),l[F.isst].h&&(y.h=l[F.isst].h),y.XF=b[y.ixfe],_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O({c:F.c,r:F.r},y,t);break;case 513:t.sheetStubs&&(y={ixfe:F.ixfe,XF:b[F.ixfe],t:"z"},_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O({c:F.c,r:F.r},y,t));break;case 190:if(t.sheetStubs)for(var Se=F.c;Se<=F.C;++Se){var ae=F.ixfe[Se-F.c];y={ixfe:ae,XF:b[ae],t:"z"},_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O({c:Se,r:F.r},y,t)}break;case 214:case 516:case 4:y=ay(F.val,F.ixfe,"s"),y.XF=b[y.ixfe],_e>0&&(y.z=y.XF&&y.XF.numFmtId&&ve[y.XF.numFmtId]||ve[y.ixfe>>8&63]),fo(y,t,n.opts.Date1904),O({c:F.c,r:F.r},y,t);break;case 0:case 512:xe===1&&(a=F);break;case 252:l=F;break;case 1054:if(C.biff>=3&&C.biff<=4){ve[_e++]=F[1];for(var We=0;We<_e+163&&st[We]!=F[1];++We);We>=163&&eh(F[1],_e+163)}else eh(F[1],F[0]);break;case 30:{ve[_e++]=F;for(var Xe=0;Xe<_e+163&&st[Xe]!=F;++Xe);Xe>=163&&eh(F,_e+163)}break;case 229:N=N.concat(F);break;case 93:R[F.cmo[0]]=C.lastobj=F;break;case 438:C.lastobj.TxO=F;break;case 127:C.lastobj.ImData=F;break;case 440:for(m=F[0].s.r;m<=F[0].e.r;++m)for(g=F[0].s.c;g<=F[0].e.c;++g)d=t.dense?(i["!data"][m]||[])[g]:i[Dt({c:g,r:m})],d&&(d.l=F[1]);break;case 2048:for(m=F[0].s.r;m<=F[0].e.r;++m)for(g=F[0].s.c;g<=F[0].e.c;++g)d=t.dense?(i["!data"][m]||[])[g]:i[Dt({c:g,r:m})],d&&d.l&&(d.l.Tooltip=F[1]);break;case 28:{if(d=t.dense?(i["!data"][F[0].r]||[])[F[0].c]:i[Dt(F[0])],d||(t.dense?(i["!data"][F[0].r]||(i["!data"][F[0].r]=[]),d=i["!data"][F[0].r][F[0].c]={t:"z"}):d=i[Dt(F[0])]={t:"z"},a.e.r=Math.max(a.e.r,F[0].r),a.s.r=Math.min(a.s.r,F[0].r),a.e.c=Math.max(a.e.c,F[0].c),a.s.c=Math.min(a.s.c,F[0].c)),d.c||(d.c=[]),C.biff<=5&&C.biff>=2)p={a:"SheetJ5",t:F[1]};else{var tt=R[F[2]];p={a:F[1],t:tt.TxO.t},F[3]!=null&&!(F[3]&2)&&(d.c.hidden=!0)}d.c.push(p)}break;case 2173:YSe(b[F.ixfe],F.ext);break;case 125:{if(!C.cellStyles)break;for(;F.e>=F.s;)L[F.e--]={width:F.w/256,level:F.level||0,hidden:!!(F.flags&1)},Y||(Y=!0,wO(F.w/256)),K0(L[F.e+1])}break;case 520:{var ct={};F.level!=null&&(I[F.r]=ct,ct.level=F.level),F.hidden&&(I[F.r]=ct,ct.hidden=!0),F.hpt&&(I[F.r]=ct,ct.hpt=F.hpt,ct.hpx=S1(F.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Im(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[q]]=F;break;case 161:i["!margins"]||Im(i["!margins"]={}),i["!margins"].header=F.header,i["!margins"].footer=F.footer;break;case 574:F.RTL&&(E.Views[0].RTL=!0);break;case 146:w=F;break;case 2198:D=F;break;case 140:_=F;break;case 442:c?A.CodeName=F||A.name:E.WBProps.CodeName=F||"ThisWorkbook";break}}else H||console.error("Missing Info for XLS Record 0x"+q.toString(16)),e.l+=G}return n.SheetNames=Zs(s).sort(function(It,Ne){return Number(It)-Number(Ne)}).map(function(It){return s[It].name}),t.bookSheets||(n.Sheets=r),!n.SheetNames.length&&u["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=u)):n.Preamble=u,n.Sheets&&Oe.forEach(function(It,Ne){n.Sheets[n.SheetNames[Ne]]["!autofilter"]=It}),n.Strings=l,n.SSF=Hn(st),C.enc&&(n.Encryption=C.enc),D&&(n.Themes=D),n.Metadata={},_!==void 0&&(n.Metadata.Country=_),X.names.length>0&&(E.Names=X.names),n.Workbook=E,n}var P8={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ACe(e,t,n){var r=Tt.find(e,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var i=_8(r,Xbe,P8.DSI);for(var s in i)t[s]=i[s]}catch(c){if(n.WTF)throw c}var a=Tt.find(e,"/!SummaryInformation");if(a&&a.size>0)try{var o=_8(a,Ybe,P8.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(c){if(n.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(xG(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}function ZG(e,t){t||(t={}),kO(t),Fj(),t.codepage&&lO(t.codepage);var n,r;if(e.FullPaths){if(Tt.find(e,"/encryption"))throw new Error("File is password-protected");n=Tt.find(e,"!CompObj"),r=Tt.find(e,"/Workbook")||Tt.find(e,"/Book")}else{switch(t.type){case"base64":e=ds(Cs(e));break;case"binary":e=ds(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}jn(e,0),r={content:e}}var i,s;if(n&&bCe(n),t.bookProps&&!t.bookSheets)i={};else{var a=_t?"buffer":"array";if(r&&r.content)i=SCe(r.content,t);else if((s=Tt.find(e,"PerfectOffice_MAIN"))&&s.content)i=Rm.to_workbook(s.content,(t.type=a,t));else if((s=Tt.find(e,"NativeContent_MAIN"))&&s.content)i=Rm.to_workbook(s.content,(t.type=a,t));else throw(s=Tt.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Tt.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=pAe(e))}var o={};return e.FullPaths&&ACe(e,o,t),i.Props=i.Custprops=o,t.bookFiles&&(i.cfb=e),i}var W2={0:{f:ake},1:{f:uke},2:{f:yke},3:{f:pke},4:{f:hke},5:{f:vke},6:{f:Eke},7:{f:mke},8:{f:kke},9:{f:Tke},10:{f:Ske},11:{f:Ake},12:{f:fke},13:{f:_ke},14:{f:gke},15:{f:dke},16:{f:qG},17:{f:wke},18:{f:xke},19:{f:yO},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:eCe},40:{},42:{},43:{f:MSe},44:{f:DSe},45:{f:RSe},46:{f:ISe},47:{f:$Se},48:{},49:{f:Rbe},50:{},51:{f:JSe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:CG},62:{f:bke},63:{f:nAe},64:{f:Ike},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ai,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:$ke},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:cke},148:{f:oke,p:16},151:{f:Oke},152:{},153:{f:Zke},154:{},155:{},156:{f:Jke},157:{},158:{},159:{T:1,f:Jwe},160:{T:-1},161:{T:1,f:ed},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Cke},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:KSe},336:{T:-1},337:{f:ZSe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:vC},357:{},358:{},359:{},360:{T:1},361:{},362:{f:kG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Nke},427:{f:Dke},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Rke},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:lke},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Fke},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:vC},551:{f:UE},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:fAe},633:{T:1},634:{T:-1},635:{T:1,f:uAe},636:{T:-1},637:{f:Ibe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Hke},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Lke},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},EC={6:{f:VA},10:{f:Ec},12:{f:bn},13:{f:bn},14:{f:Fn},15:{f:Fn},16:{f:qr},17:{f:Fn},18:{f:Fn},19:{f:bn},20:{f:w8},21:{f:w8},23:{f:kG},24:{f:A8},25:{f:Fn},26:{},27:{},28:{f:hwe},29:{},34:{f:Fn},35:{f:S8},38:{f:qr},39:{f:qr},40:{f:qr},41:{f:qr},42:{f:Fn},43:{f:Fn},47:{f:mSe},49:{f:jEe},51:{f:bn},60:{},61:{f:HEe},64:{f:Fn},65:{f:WEe},66:{f:bn},77:{},80:{},81:{},82:{},85:{f:bn},89:{},90:{},91:{},92:{f:REe},93:{f:pwe},94:{},95:{f:Fn},96:{},97:{},99:{f:Fn},125:{f:CG},128:{f:iwe},129:{f:$Ee},130:{f:bn},131:{f:Fn},132:{f:Fn},133:{f:IEe},134:{},140:{f:_we},141:{f:bn},144:{},146:{f:Ewe},151:{},152:{},153:{},154:{},155:{},156:{f:bn},157:{},158:{},160:{f:kwe},161:{f:Swe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:JEe},190:{f:ZEe},193:{f:Ec},197:{},198:{},199:{},200:{},201:{},202:{f:Fn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:bn},220:{},221:{f:Fn},222:{},224:{f:ewe},225:{f:MEe},226:{f:Ec},227:{},229:{f:dwe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:LEe},253:{f:GEe},255:{f:PEe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:_G},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Fn},353:{f:Ec},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:owe},431:{f:Fn},432:{},433:{},434:{},437:{},438:{f:xwe},439:{f:Fn},440:{f:vwe},441:{},442:{f:_x},443:{},444:{f:bn},445:{},446:{},448:{f:Ec},449:{f:zEe,r:2},450:{f:Ec},512:{f:E8},513:{f:Twe},515:{f:awe},516:{f:qEe},517:{f:swe},519:{f:Cwe},520:{f:BEe},523:{},545:{f:k8},549:{f:b8},566:{},574:{f:VEe},638:{f:KEe},659:{},1048:{},1054:{f:XEe},1084:{},1212:{f:cwe},2048:{f:ywe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:ny},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ec},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:wwe,r:12},2173:{f:XSe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Fn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:lwe,r:12},2197:{},2198:{f:HSe,r:12},2199:{},2200:{},2201:{},2202:{f:uwe,r:12},2203:{f:Ec},2204:{},2205:{},2206:{},2207:{},2211:{f:UEe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:bn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Awe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:bwe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:E8},1:{},2:{f:Dwe},3:{f:Nwe},4:{f:Owe},5:{f:Rwe},7:{f:Mwe},8:{},9:{f:ny},11:{},22:{f:bn},30:{f:YEe},31:{},32:{},33:{f:k8},36:{},37:{f:b8},50:{f:$we},62:{},52:{},67:{f:twe},68:{f:bn},69:{},86:{},126:{},127:{f:Fwe},135:{},136:{},137:{},143:{f:Lwe},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Iwe},223:{},234:{},354:{},421:{},518:{f:VA},521:{f:ny},536:{f:A8},547:{f:S8},561:{},579:{f:nwe},1030:{f:VA},1033:{f:ny},1091:{f:rwe},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function as(e,t,n,r){var i=t;if(!isNaN(i)){var s=(n||[]).length||0,a=e.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&cG(n)&&e.push(n)}}function B8(e,t){var n=t||{},r=n.dense!=null?n.dense:u2e,i={};r&&(i["!data"]=[]),e=vx(e,"<!--","-->");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),o=s.index,l=a&&a.index||e.length,c=Z2e(e.slice(o,l),/(:?<tr[^<>]*>)/i,"<tr>"),u=-1,f=0,h=0,d=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var m=c[o].trim(),x=m.slice(0,3).toLowerCase();if(x=="<tr"){if(++u,n.sheetRows&&n.sheetRows<=u){--u;break}f=0;continue}if(!(x!="<td"&&x!="<th")){var v=m.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var y=v[l].trim();if(y.match(/<t[dh]/i)){for(var _=y,b=0;_.charAt(0)=="<"&&(b=_.indexOf(">"))>-1;)_=_.slice(b+1);for(var w=0;w<g.length;++w){var E=g[w];E.s.c==f&&E.s.r<u&&u<=E.e.r&&(f=E.e.c+1,w=-1)}var A=ze(y.slice(0,y.indexOf(">")));d=A.colspan?+A.colspan:1,((h=+A.rowspan)>1||d>1)&&g.push({s:{r:u,c:f},e:{r:u+(h||1)-1,c:f+d-1}});var S=A.t||A["data-t"]||"";if(!_.length){f+=d;continue}if(_=Kj(_),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>f&&(p.s.c=f),p.e.c<f&&(p.e.c=f),!_.length){f+=d;continue}var k={t:"s",v:_};n.raw||!_.trim().length||S=="s"||(_==="TRUE"?k={t:"b",v:!0}:_==="FALSE"?k={t:"b",v:!1}:isNaN(_s(_))?isNaN(b1(_).getDate())?_.charCodeAt(0)==35&&Ar[_]!=null&&(k.t="e",k.w=_,k.v=Ar[_]):(k={t:"d",v:Nr(_)},n.UTC===!1&&(k.v=Ah(k.v)),n.cellDates||(k={t:"n",v:nr(k.v)}),k.z=n.dateNF||st[14]):k={t:"n",v:_s(_)}),k.cellText!==!1&&(k.w=_),r?(i["!data"][u]||(i["!data"][u]=[]),i["!data"][u][f]=k):i[Dt({r:u,c:f})]=k,f+=d}}}}return i["!ref"]=wt(p),g.length&&(i["!merges"]=g),i}function TCe(e,t,n,r){for(var i=e["!merges"]||[],s=[],a={},o=e["!data"]!=null,l=t.s.c;l<=t.e.c;++l){for(var c=0,u=0,f=0;f<i.length;++f)if(!(i[f].s.r>n||i[f].s.c>l)&&!(i[f].e.r<n||i[f].e.c<l)){if(i[f].s.r<n||i[f].s.c<l){c=-1;break}c=i[f].e.r-i[f].s.r+1,u=i[f].e.c-i[f].s.c+1;break}if(!(c<0)){var h=Pt(l)+Xt(n),d=o?(e["!data"][n]||[])[l]:e[h];d&&d.t=="n"&&d.v!=null&&!isFinite(d.v)&&(isNaN(d.v)?d={t:"e",v:36,w:Ji[36]}:d={t:"e",v:7,w:Ji[7]});var p=d&&d.v!=null&&(d.h||Cm(d.w||(wu(d),d.w)||""))||"";a={},c>1&&(a.rowspan=c),u>1&&(a.colspan=u),r.editable?p='<span contenteditable="true">'+p+"</span>":d&&(a["data-t"]=d&&d.t||"z",d.v!=null&&(a["data-v"]=Cm(d.v instanceof Date?d.v.toISOString():d.v)),d.z!=null&&(a["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+Cm(d.l.Target)+'">'+p+"</a>")),a.id=(r.id||"sjs")+"-"+h,s.push(mbe("td",p,a))}}var g="<tr>";return g+s.join("")+"</tr>"}var kCe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',CCe="</body></html>";function FCe(e,t){var n=tbe(e,"table");if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1){var r=Ku(B8(n[0],t),t);return r.bookType="html",r}var i=FO();return n.forEach(function(s,a){Sx(i,B8(s,t),"Sheet"+(a+1))}),i.bookType="html",i}function OCe(e,t,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function NCe(e,t){var n=t||{},r=n.header!=null?n.header:kCe,i=n.footer!=null?n.footer:CCe,s=[r],a=Zh(e["!ref"]||"A1");if(s.push(OCe(e,a,n)),e["!ref"])for(var o=a.s.r;o<=a.e.r;++o)s.push(TCe(e,a,o,n));return s.push("</table>"+i),s.join("")}function QG(e,t,n){var r=t.rows;if(!r)throw"Unsupported origin when "+t.tagName+" is not a TABLE";var i=n||{},s=e["!data"]!=null,a=0,o=0;if(i.origin!=null)if(typeof i.origin=="number")a=i.origin;else{var l=typeof i.origin=="string"?Kr(i.origin):i.origin;a=l.r,o=l.c}var c=Math.min(i.sheetRows||1e7,r.length),u={s:{r:0,c:0},e:{r:a,c:o}};if(e["!ref"]){var f=Zh(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),a==-1&&(u.e.r=a=f.e.r+1)}var h=[],d=0,p=e["!rows"]||(e["!rows"]=[]),g=0,m=0,x=0,v=0,y=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<r.length&&m<c;++g){var b=r[g];if(U8(b)){if(i.display)continue;p[m]={hidden:!0}}var w=b.cells;for(x=v=0;x<w.length;++x){var E=w[x];if(!(i.display&&U8(E))){var A=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):Kj(E.innerHTML),S=E.getAttribute("data-z")||E.getAttribute("z");for(d=0;d<h.length;++d){var k=h[d];k.s.c==v+o&&k.s.r<m+a&&m+a<=k.e.r&&(v=k.e.c+1-o,d=-1)}_=+E.getAttribute("colspan")||1,((y=+E.getAttribute("rowspan")||1)>1||_>1)&&h.push({s:{r:m+a,c:v+o},e:{r:m+a+(y||1)-1,c:v+o+(_||1)-1}});var T={t:"s",v:A},O=E.getAttribute("data-t")||E.getAttribute("t")||"";A!=null&&(A.length==0?T.t=O||"z":i.raw||A.trim().length==0||O=="s"||(O=="e"&&Ji[+A]?T={t:"e",v:+A,w:Ji[+A]}:A==="TRUE"?T={t:"b",v:!0}:A==="FALSE"?T={t:"b",v:!1}:isNaN(_s(A))?isNaN(b1(A).getDate())?A.charCodeAt(0)==35&&Ar[A]!=null&&(T={t:"e",v:Ar[A],w:A}):(T={t:"d",v:Nr(A)},i.UTC&&(T.v=PE(T.v)),i.cellDates||(T={t:"n",v:nr(T.v)}),T.z=i.dateNF||st[14]):T={t:"n",v:_s(A)})),T.z===void 0&&S!=null&&(T.z=S);var C="",D=E.getElementsByTagName("A");if(D&&D.length)for(var N=0;N<D.length&&!(D[N].hasAttribute("href")&&(C=D[N].getAttribute("href"),C.charAt(0)!="#"));++N);C&&C.charAt(0)!="#"&&C.slice(0,11).toLowerCase()!="javascript:"&&(T.l={Target:C}),s?(e["!data"][m+a]||(e["!data"][m+a]=[]),e["!data"][m+a][v+o]=T):e[Dt({c:v+o,r:m+a})]=T,u.e.c<v+o&&(u.e.c=v+o),v+=_}}++m}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,m-1+a),e["!ref"]=wt(u),m>=c&&(e["!fullref"]=wt((u.e.r=r.length-g+m-1+a,u))),e}function eq(e,t){var n=t||{},r={};return n.dense&&(r["!data"]=[]),QG(r,e,t)}function DCe(e,t){var n=Ku(eq(e,t),t);return n}function U8(e){var t="",n=MCe(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function MCe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function RCe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^<>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=Et(t.replace(/<[^<>]*>/g,""));return[n]}function tq(e,t,n){var r=n||{},i=BE(e);Bn.lastIndex=0,i=dO(vx(i,"<!--","-->"));for(var s,a,o="",l="",c,u=0,f=-1,h="";s=Bn.exec(i);)switch(s[3]=s[3].replace(/_[\s\S]*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":s[1]==="/"?(a["truncate-on-overflow"]=="false"&&(o.match(/h/)?o=o.replace(/h+/,"[$&]"):o.match(/m/)?o=o.replace(/m+/,"[$&]"):o.match(/s/)&&(o=o.replace(/s+/,"[$&]"))),r[a.name]=o,o=""):s[0].charAt(s[0].length-2)!=="/"&&(o="",a=ze(s[0],!1));break;case"boolean-style":s[1]==="/"?(r[a.name]="General",o=""):s[0].charAt(s[0].length-2)!=="/"&&(o="",a=ze(s[0],!1));break;case"boolean":o+="General";break;case"text":s[1]==="/"?(h=i.slice(f,Bn.lastIndex-s[0].length),h=="%"&&a[0]=="<number:percentage-style"?o+="%":o+='"'+h.replace(/"/g,'""')+'"'):s[0].charAt(s[0].length-2)!=="/"&&(f=Bn.lastIndex);break;case"day":switch(c=ze(s[0],!1),c.style){case"short":o+="d";break;case"long":o+="dd";break;default:o+="dd";break}break;case"day-of-week":switch(c=ze(s[0],!1),c.style){case"short":o+="ddd";break;case"long":o+="dddd";break;default:o+="ddd";break}break;case"era":switch(c=ze(s[0],!1),c.style){case"short":o+="ee";break;case"long":o+="eeee";break;default:o+="eeee";break}break;case"hours":switch(c=ze(s[0],!1),c.style){case"short":o+="h";break;case"long":o+="hh";break;default:o+="hh";break}break;case"minutes":switch(c=ze(s[0],!1),c.style){case"short":o+="m";break;case"long":o+="mm";break;default:o+="mm";break}break;case"month":switch(c=ze(s[0],!1),c.textual&&(o+="mm"),c.style){case"short":o+="m";break;case"long":o+="mm";break;default:o+="m";break}break;case"seconds":{switch(c=ze(s[0],!1),c.style){case"short":o+="s";break;case"long":o+="ss";break;default:o+="ss";break}c["decimal-places"]&&(o+="."+At("0",+c["decimal-places"]))}break;case"year":switch(c=ze(s[0],!1),c.style){case"short":o+="yy";break;case"long":o+="yyyy";break;default:o+="yy";break}break;case"am-pm":o+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+s[3]);break;case"fill-character":s[1]==="/"?(h=i.slice(f,Bn.lastIndex-s[0].length),o+='"'+h.replace(/"/g,'""')+'"*'):s[0].charAt(s[0].length-2)!=="/"&&(f=Bn.lastIndex);break;case"scientific-number":c=ze(s[0],!1),o+="0."+At("0",+c["min-decimal-places"]||+c["decimal-places"]||2)+At("?",+c["decimal-places"]-+c["min-decimal-places"]||0)+"E"+(Gt(c["forced-exponent-sign"])?"+":"")+At("0",+c["min-exponent-digits"]||2);break;case"fraction":c=ze(s[0],!1),+c["min-integer-digits"]?o+=At("0",+c["min-integer-digits"]):o+="#",o+=" ",o+=At("?",+c["min-numerator-digits"]||1),o+="/",+c["denominator-value"]?o+=c["denominator-value"]:o+=At("?",+c["min-denominator-digits"]||1);break;case"currency-symbol":s[1]==="/"?o+='"'+i.slice(f,Bn.lastIndex-s[0].length).replace(/"/g,'""')+'"':s[0].charAt(s[0].length-2)!=="/"?f=Bn.lastIndex:o+="$";break;case"text-properties":switch(c=ze(s[0],!1),(c.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":o="[Red]"+o;break}break;case"text-content":o+="@";break;case"map":c=ze(s[0],!1),Et(c.condition)=="value()>=0"?o=r[c["apply-style-name"]]+";"+o:console.error("ODS number format may be incorrect: "+c.condition);break;case"number":if(s[1]==="/")break;c=ze(s[0],!1),l="",l+=At("0",+c["min-integer-digits"]||1),Gt(c.grouping)&&(l=Fl(At("#",Math.max(0,4-l.length))+l)),(+c["min-decimal-places"]||+c["decimal-places"])&&(l+="."),+c["min-decimal-places"]&&(l+=At("0",+c["min-decimal-places"]||1)),+c["decimal-places"]-(+c["min-decimal-places"]||0)&&(l+=At("0",+c["decimal-places"]-(+c["min-decimal-places"]||0))),o+=l;break;case"embedded-text":s[1]==="/"?u==0?o+='"'+i.slice(f,Bn.lastIndex-s[0].length).replace(/"/g,'""')+'"':o=o.slice(0,u)+'"'+i.slice(f,Bn.lastIndex-s[0].length).replace(/"/g,'""')+'"'+o.slice(u):s[0].charAt(s[0].length-2)!=="/"&&(f=Bn.lastIndex,u=-+ze(s[0],!1).position||0);break}return r}function nq(e,t,n){var r=t||{},i=BE(e),s=[],a,o,l,c="",u=0,f,h,d={},p=[],g={};r.dense&&(g["!data"]=[]);var m,x,v={value:""},y={},_="",b=0,w="",E=0,A=[],S=[],k=-1,T=-1,O={s:{r:1e6,c:1e7},e:{r:0,c:0}},C=0,D=n||{},N={},R=[],L={},I=0,Y=0,X=[],oe=1,xe=1,_e=[],ve={Names:[],WBProps:{}},Oe={},Pe=["",""],Ge=[],z={},q="",G=0,H=!1,J=!1,F=0;for(Bn.lastIndex=0,i=dO(vx(i,"<!--","-->"));m=Bn.exec(i);)switch(m[3]=m[3].replace(/_[\s\S]*$/,"")){case"table":case"":m[1]==="/"?(O.e.c>=O.s.c&&O.e.r>=O.s.r?g["!ref"]=wt(O):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=O.e.r&&(g["!fullref"]=g["!ref"],O.e.r=r.sheetRows-1,g["!ref"]=wt(O)),R.length&&(g["!merges"]=R),X.length&&(g["!rows"]=X),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),p.push(f.name),d[f.name]=g,J=!1):m[0].charAt(m[0].length-2)!=="/"&&(f=ze(m[0],!1),k=T=-1,O.s.r=O.s.c=1e7,O.e.r=O.e.c=0,g={},r.dense&&(g["!data"]=[]),R=[],X=[],J=!0);break;case"table-row-group":m[1]==="/"?--C:++C;break;case"table-row":case"":if(m[1]==="/"){k+=oe,oe=1;break}if(h=ze(m[0],!1),h.?k=h.-1:k==-1&&(k=0),oe=+h["number-rows-repeated"]||1,oe<10)for(F=0;F<oe;++F)C>0&&(X[k+F]={level:C});T=-1;break;case"covered-table-cell":if(m[1]!=="/")if(++T,v=ze(m[0],!1),xe=parseInt(v["number-columns-repeated"]||"1",10)||1,r.sheetStubs){for(;xe-- >0;)r.dense?(g["!data"][k]||(g["!data"][k]=[]),g["!data"][k][T]={t:"z"}):g[Dt({r:k,c:T})]={t:"z"},++T;--T}else T+=xe-1;_="",A=[];break;case"table-cell":case"":if(m[0].charAt(m[0].length-2)==="/")++T,v=ze(m[0],!1),xe=parseInt(v["number-columns-repeated"]||"1",10)||1,x={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(x.f=$8(Et(v.formula))),v["style-name"]&&N[v["style-name"]]&&(x.z=N[v["style-name"]]),(v.||v["value-type"])=="string"&&(x.t="s",x.v=Et(v["string-value"]||""),r.dense?(g["!data"][k]||(g["!data"][k]=[]),g["!data"][k][T]=x):g[Pt(T)+Xt(k)]=x),T+=xe-1;else if(m[1]!=="/"){++T,_=w="",b=E=0,A=[],S=[],xe=1;var B=oe?k+oe-1:k;if(T>O.e.c&&(O.e.c=T),T<O.s.c&&(O.s.c=T),k<O.s.r&&(O.s.r=k),B>O.e.r&&(O.e.r=B),v=ze(m[0],!1),y=lbe(m[0]),Ge=[],z={},x={t:v.||v["value-type"],v:null},v["style-name"]&&N[v["style-name"]]&&(x.z=N[v["style-name"]]),r.cellFormula)if(v.formula&&(v.formula=Et(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(I=parseInt(v["number-matrix-rows-spanned"],10)||0,Y=parseInt(v["number-matrix-columns-spanned"],10)||0,L={s:{r:k,c:T},e:{r:k+I-1,c:T+Y-1}},x.F=wt(L),_e.push([L,x.F])),v.formula)x.f=$8(v.formula);else for(F=0;F<_e.length;++F)k>=_e[F][0].s.r&&k<=_e[F][0].e.r&&T>=_e[F][0].s.c&&T<=_e[F][0].e.c&&(x.F=_e[F][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(I=parseInt(v["number-rows-spanned"]||"1",10)||1,Y=parseInt(v["number-columns-spanned"]||"1",10)||1,I*Y>1&&(L={s:{r:k,c:T},e:{r:k+I-1,c:T+Y-1}},R.push(L))),v["number-columns-repeated"]&&(xe=parseInt(v["number-columns-repeated"],10)),x.t){case"boolean":x.t="b",x.v=Gt(v["boolean-value"])||+v["boolean-value"]>=1;break;case"float":x.t="n",x.v=parseFloat(v.value),r.cellDates&&x.z&&ja(x.z)&&(x.v=iu(x.v+(ve.WBProps.date1904?1462:0)),x.t=typeof x.v=="number"?"n":"d");break;case"percentage":x.t="n",x.v=parseFloat(v.value);break;case"currency":x.t="n",x.v=parseFloat(v.value);break;case"date":x.t="d",x.v=Nr(v["date-value"],ve.WBProps.date1904),r.cellDates||(x.t="n",x.v=nr(x.v,ve.WBProps.date1904)),x.z||(x.z="m/d/yy");break;case"time":x.t="n",x.v=H2e(v["time-value"])/86400,r.cellDates&&(x.v=iu(x.v),x.t=typeof x.v=="number"?"n":"d"),x.z||(x.z="HH:MM:SS");break;case"number":x.t="n",x.v=parseFloat(v.);break;default:if(x.t==="string"||x.t==="text"||!x.t)x.t="s",v["string-value"]!=null&&(_=Et(v["string-value"]),A=[]);else throw new Error("Unsupported value type "+x.t)}}else{if(H=!1,y["calcext:value-type"]=="error"&&Ar[_]!=null&&(x.t="e",x.w=_,x.v=Ar[_]),x.t==="s"&&(x.v=_||"",A.length&&(x.R=A),H=b==0),Oe.Target&&(x.l=Oe),Ge.length>0&&(x.c=Ge,Ge=[]),_&&r.cellText!==!1&&(x.w=_),H&&(x.t="z",delete x.v),(!H||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=k))for(var K=0;K<oe;++K){if(xe=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(g["!data"][k+K]||(g["!data"][k+K]=[]),g["!data"][k+K][T]=K==0?x:Hn(x);--xe>0;)g["!data"][k+K][T+xe]=Hn(x);else for(g[Dt({r:k+K,c:T})]=x;--xe>0;)g[Dt({r:k+K,c:T+xe})]=Hn(x);O.e.c<=T&&(O.e.c=T)}xe=parseInt(v["number-columns-repeated"]||"1",10),T+=xe-1,xe=0,x={},_="",A=[]}Oe={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!0]);break;case"annotation":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a;z.t=_,A.length&&(z.R=A),z.a=q,Ge.push(z),_=w,b=E,A=S}else if(m[0].charAt(m[0].length-2)!=="/"){s.push([m[3],!1]);var Z=ze(m[0],!0);Z.display&&Gt(Z.display)||(Ge.hidden=!0),w=_,E=b,S=A,_="",b=0,A=[]}q="",G=0;break;case"creator":m[1]==="/"?q=i.slice(G,m.index):G=m.index+m[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!1]);_="",b=0,A=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(m[1]==="/"){var Q=Bn.lastIndex;tq(i.slice(l,Bn.lastIndex),t,D),Bn.lastIndex=Q}else m[0].charAt(m[0].length-2)!=="/"&&(l=Bn.lastIndex-m[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var te=ze(m[0],!1);te.family=="table-cell"&&D[te["data-style-name"]]&&(N[te.name]=D[te["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(m[0].slice(-2)==="/>")break;if(m[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=i.slice(u,m.index);break}else u=m.index+m[0].length;break;case"named-range":o=ze(m[0],!1),Pe=WA(o["cell-range-address"]);var de={Name:o.name,Ref:Pe[0]+"!"+Pe[1]};J&&(de.Sheet=p.length),ve.Names.push(de);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(o=ze(m[0],!1),o["date-value"]){case"1904-01-01":ve.WBProps.date1904=!0;break}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(m[1]==="/"&&(!v||!v["string-value"])){var me=RCe(i.slice(b,m.index));_=(_.length>0?_+`
`:"")+me[0]}else m[0].slice(-2)=="/>"?_+=`
`:(ze(m[0],!1),b=m.index+m[0].length);break;case"s":break;case"database-range":if(m[1]==="/")break;try{Pe=WA(ze(m[0])["target-range-address"]),d[Pe[0]]["!autofilter"]={ref:Pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"filter-set-item":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(m[1]!=="/"){if(Oe=ze(m[0],!1),!Oe.href)break;Oe.Target=Et(Oe.href),delete Oe.href,Oe.Target.charAt(0)=="#"&&Oe.Target.indexOf(".")>-1?(Pe=WA(Oe.Target.slice(1)),Oe.Target="#"+Pe[0]+"!"+Pe[1]):Oe.Target.match(/^\.\.[\\\/]/)&&(Oe.Target=Oe.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(m[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(m)}}var ye={Sheets:d,SheetNames:p,Workbook:ve};return r.bookSheets&&delete ye.Sheets,ye}function z8(e,t){t=t||{},Vs(e,"META-INF/manifest.xml")&&nEe(Pn(e,"META-INF/manifest.xml"),t);var n=Ei(e,"styles.xml"),r=n&&tq(Qt(n)),i=Ei(e,"content.xml");if(!i)throw new Error("Missing content.xml in ODS / UOF file");var s=nq(Qt(i),t,r);return Vs(e,"meta.xml")&&(s.Props=mG(Pn(e,"meta.xml"))),s.bookType="ods",s}function H8(e,t){var n=nq(e,t);return n.bookType="fods",n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var Tr=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function A1(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function h0(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Qt(nc(e))}function rq(e){for(var t=0,n=0;n<e.length;++n)t+=e[n].length;var r=new Uint8Array(t),i=0;for(n=0;n<e.length;++n){var s=e[n],a=s.length;if(a<250)for(var o=0;o<a;++o)r[i++]=s[o];else r.set(s,i),i+=a}return r}function Pm(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function $Ce(e,t){for(var n=(e[t+15]&127)<<7|e[t+14]>>1,r=e[t+14]&1,i=t+13;i>=t;--i)r=r*256+e[i];return(e[t+15]&128?-r:r)*Math.pow(10,n-6176)}function j2(e,t){var n=t.l,r=e[n]&127;e:if(e[n++]>=128&&(r|=(e[n]&127)<<7,e[n++]<128||(r|=(e[n]&127)<<14,e[n++]<128)||(r|=(e[n]&127)<<21,e[n++]<128)||(r+=(e[n]&127)*Math.pow(2,28),++n,e[n++]<128)||(r+=(e[n]&127)*Math.pow(2,35),++n,e[n++]<128)||(r+=(e[n]&127)*Math.pow(2,42),++n,e[n++]<128)))break e;return t.l=n,r}function Nt(e){var t=0,n=e[t]&127;return e[t++]<128||(n|=(e[t]&127)<<7,e[t++]<128)||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128)||(n|=(e[t]&15)<<28),n}function mt(e){for(var t=[],n={l:0};n.l<e.length;){var r=n.l,i=j2(e,n),s=i&7;i=i/8|0;var a,o=n.l;switch(s){case 0:{for(;e[o++]>=128;);a=e[Tr](n.l,o),n.l=o}break;case 1:a=e[Tr](o,o+8),n.l=o+8;break;case 2:{var l=j2(e,n);a=e[Tr](n.l,n.l+l),n.l+=l}break;case 5:a=e[Tr](o,o+4),n.l=o+4;break;default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:a,type:s};t[i]==null&&(t[i]=[]),t[i].push(c)}return t}function jE(e,t){return(e==null?void 0:e.map(function(n){return t(n.data)}))||[]}function ICe(e){for(var t,n=[],r={l:0};r.l<e.length;){var i=j2(e,r),s=mt(e[Tr](r.l,r.l+i));r.l+=i;var a={id:Nt(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=mt(o.data),c=Nt(l[3][0].data);a.messages.push({meta:l,data:e[Tr](r.l,r.l+c)}),r.l+=c}),(t=s[3])!=null&&t[0]&&(a.merge=Nt(s[3][0].data)>>>0>0),n.push(a)}return n}function LCe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n={l:0},r=j2(t,n),i=[],s=n.l;s<t.length;){var a=t[s]&3;if(a==0){var o=t[s++]>>2;if(o<60)++o;else{var l=o-59;o=t[s],l>1&&(o|=t[s+1]<<8),l>2&&(o|=t[s+2]<<16),l>3&&(o|=t[s+3]<<24),o>>>=0,o++,s+=l}i.push(t[Tr](s,s+o)),s+=o;continue}else{var c=0,u=0;if(a==1?(u=(t[s]>>2&7)+4,c=(t[s++]&224)<<3,c|=t[s++]):(u=(t[s++]>>2)+1,a==2?(c=t[s]|t[s+1]<<8,s+=2):(c=(t[s]|t[s+1]<<8|t[s+2]<<16|t[s+3]<<24)>>>0,s+=4)),c==0)throw new Error("Invalid offset 0");for(var f=i.length-1,h=c;f>=0&&h>=i[f].length;)h-=i[f].length,--f;if(f<0)if(h==0)h=i[f=0].length;else throw new Error("Invalid offset beyond length");if(u<h)i.push(i[f][Tr](i[f].length-h,i[f].length-h+u));else{for(h>0&&(i.push(i[f][Tr](i[f].length-h)),u-=h),++f;u>=i[f].length;)i.push(i[f]),u-=i[f].length,++f;u&&i.push(i[f][Tr](0,u))}i.length>25&&(i=[rq(i)])}}for(var d=0,p=0;p<i.length;++p)d+=i[p].length;if(d!=r)throw new Error("Unexpected length: ".concat(d," != ").concat(r));return i}function PCe(e){Array.isArray(e)&&(e=new Uint8Array(e));for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push.apply(t,LCe(r,e[Tr](n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return t.length==1?t[0]:rq(t)}var BCe=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[],fmla:[],ferr:[],cmnt:[]}};function iq(e,t,n,r,i){var s,a,o,l,c=t&255,u=t>>8,f=u>=5?i:r;e:if(n&(u>4?8:4)&&e.t=="n"&&c==7){var h=(s=f[7])!=null&&s[0]?Nt(f[7][0].data):-1;if(h==-1)break e;var d=(a=f[15])!=null&&a[0]?Nt(f[15][0].data):-1,p=(o=f[16])!=null&&o[0]?Nt(f[16][0].data):-1,g=(l=f[40])!=null&&l[0]?Nt(f[40][0].data):-1,m=e.v,x=m;t:if(g){if(m==0){d=p=2;break t}m>=604800?d=1:m>=86400?d=2:m>=3600?d=4:m>=60?d=8:m>=1?d=16:d=32,Math.floor(m)!=m?p=32:m%60?p=16:m%3600?p=8:m%86400?p=4:m%604800&&(p=2),p<d&&(p=d)}if(d==-1||p==-1)break e;var v=[],y=[];d==1&&(x=m/604800,p==1?y.push('d"d"'):(x|=0,m-=604800*x),v.push(x+(h==2?" week"+(x==1?"":"s"):h==1?"w":""))),d<=2&&p>=2&&(x=m/86400,p>2&&(x|=0,m-=86400*x),y.push('d"d"'),v.push(x+(h==2?" day"+(x==1?"":"s"):h==1?"d":""))),d<=4&&p>=4&&(x=m/3600,p>4&&(x|=0,m-=3600*x),y.push((d>=4?"[h]":"h")+'"h"'),v.push(x+(h==2?" hour"+(x==1?"":"s"):h==1?"h":""))),d<=8&&p>=8&&(x=m/60,p>8&&(x|=0,m-=60*x),y.push((d>=8?"[m]":"m")+'"m"'),h==0?v.push((d==8&&p==8||x>=10?"":"0")+x):v.push(x+(h==2?" minute"+(x==1?"":"s"):h==1?"m":""))),d<=16&&p>=16&&(x=m,p>16&&(x|=0,m-=x),y.push((d>=16?"[s]":"s")+'"s"'),h==0?v.push((p==16&&d==16||x>=10?"":"0")+x):v.push(x+(h==2?" second"+(x==1?"":"s"):h==1?"s":""))),p>=32&&(x=Math.round(1e3*m),d<32&&y.push('.000"ms"'),h==0?v.push((x>=100?"":x>=10?"0":"00")+x):v.push(x+(h==2?" millisecond"+(x==1?"":"s"):h==1?"ms":""))),e.w=v.join(h==0?":":" "),e.z=y.join(h==0?'":"':" "),h==0&&(e.w=e.w.replace(/:(\d\d\d)$/,".$1"))}}function UCe(e,t,n,r){var i=A1(e),s=i.getUint32(4,!0),a=-1,o=-1,l=-1,c=NaN,u=0,f=new Date(Date.UTC(2001,0,1)),h=n>1?12:8;s&2&&(l=i.getUint32(h,!0),h+=4),h+=Pm(s&(n>1?3468:396))*4,s&512&&(a=i.getUint32(h,!0),h+=4),h+=Pm(s&(n>1?12288:4096))*4,s&16&&(o=i.getUint32(h,!0),h+=4),s&32&&(c=i.getFloat64(h,!0),h+=8),s&64&&(f.setTime(f.getTime()+(u=i.getFloat64(h,!0))*1e3),h+=8),n>1&&(s=i.getUint32(8,!0)>>>16,s&255&&(l==-1&&(l=i.getUint32(h,!0)),h+=4));var d,p=e[n>=4?1:2];switch(p){case 0:return;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:t.sst[o]};break;case 5:r!=null&&r.cellDates?d={t:"d",v:f}:d={t:"n",v:u/86400+35430,z:st[14]};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1){var g=t.rsst[a];d={t:"s",v:g.v},g.l&&(d.l={Target:g.l})}else throw new Error("Unsupported cell type ".concat(e[Tr](0,4)));break;default:throw new Error("Unsupported cell type ".concat(e[Tr](0,4)))}return l>-1&&iq(d,p|n<<8,s,t.ofmt[l],t.nfmt[l]),p==7&&(d.v/=86400),d}function zCe(e,t,n){var r=A1(e);r.getUint32(4,!0);var i=r.getUint32(8,!0),s=12,a=-1,o=-1,l=-1,c=NaN,u=NaN,f=0,h=new Date(Date.UTC(2001,0,1));i&1&&(c=$Ce(e,s),s+=16),i&2&&(u=r.getFloat64(s,!0),s+=8),i&4&&(h.setTime(h.getTime()+(f=r.getFloat64(s,!0))*1e3),s+=8),i&8&&(o=r.getUint32(s,!0),s+=4),i&16&&(a=r.getUint32(s,!0),s+=4),s+=Pm(i&480)*4,i&512&&(r.getUint32(s,!0),s+=4),s+=Pm(i&1024)*4,i&2048&&(r.getUint32(s,!0),s+=4);var d,p=e[1];switch(p){case 0:d={t:"z"};break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:t.sst[o]};break;case 5:n!=null&&n.cellDates?d={t:"d",v:h}:d={t:"n",v:f/86400+35430,z:st[14]};break;case 6:d={t:"b",v:u>0};break;case 7:d={t:"n",v:u};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1){var g=t.rsst[a];d={t:"s",v:g.v},g.l&&(d.l={Target:g.l})}else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e[Tr](0,4)));break;case 10:d={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e[Tr](0,4)))}if(s+=Pm(i&4096)*4,i&516096&&(l==-1&&(l=r.getUint32(s,!0)),s+=4),i&524288){var m=r.getUint32(s,!0);s+=4,t.cmnt[m]&&(d.c=jCe(t.cmnt[m]))}return l>-1&&iq(d,p|1280,i>>13,t.ofmt[l],t.nfmt[l]),p==7&&(d.v/=86400),d}function HCe(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:case 4:return UCe(e,t,e[0],n);case 5:return zCe(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function or(e){var t=mt(e);return Nt(t[1][0].data)}function df(e,t){var n=mt(t.data),r=Nt(n[1][0].data),i=n[3],s=[];return(i||[]).forEach(function(a){var o,l,c=mt(a.data);if(c[1]){var u=Nt(c[1][0].data)>>>0;switch(r){case 1:s[u]=h0(c[3][0].data);break;case 8:{var f=e[or(c[9][0].data)][0],h=mt(f.data),d=e[or(h[1][0].data)][0],p=Nt(d.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=mt(d.data),m={v:g[3].map(function(y){return h0(y.data)}).join("")};s[u]=m;e:if((o=g==null?void 0:g[11])!=null&&o[0]){var x=(l=mt(g[11][0].data))==null?void 0:l[1];if(!x)break e;x.forEach(function(y){var _,b,w,E=mt(y.data);if((_=E[2])!=null&&_[0]){var A=e[or((b=E[2])==null?void 0:b[0].data)][0],S=Nt(A.meta[1][0].data);switch(S){case 2032:var k=mt(A.data);(w=k==null?void 0:k[2])!=null&&w[0]&&!m.l&&(m.l=h0(k[2][0].data));break;case 2039:break;default:console.log("unrecognized ObjectAttribute type ".concat(S))}}})}}break;case 2:s[u]=mt(c[6][0].data);break;case 3:s[u]=mt(c[5][0].data);break;case 10:{var v=e[or(c[10][0].data)][0];s[u]=sq(e,v.data)}break;default:throw r}}}),s}function VCe(e,t){var n,r,i,s,a,o,l,c,u,f,h,d,p,g,m=mt(e),x=Nt(m[1][0].data)>>>0,v=Nt(m[2][0].data)>>>0,y=((r=(n=m[8])==null?void 0:n[0])==null?void 0:r.data)&&Nt(m[8][0].data)>0||!1,_,b;if((s=(i=m[7])==null?void 0:i[0])!=null&&s.data&&t!=0)_=(o=(a=m[7])==null?void 0:a[0])==null?void 0:o.data,b=(c=(l=m[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(u=m[4])==null?void 0:u[0])!=null&&f.data&&t!=1)_=(d=(h=m[4])==null?void 0:h[0])==null?void 0:d.data,b=(g=(p=m[3])==null?void 0:p[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var w=y?4:1,E=A1(_),A=[],S=0;S<_.length/2;++S){var k=E.getUint16(S*2,!0);k<65535&&A.push([S,k])}if(A.length!=v)throw"Expected ".concat(v," cells, found ").concat(A.length);var T=[];for(S=0;S<A.length-1;++S)T[A[S][0]]=b[Tr](A[S][1]*w,A[S+1][1]*w);return A.length>=1&&(T[A[A.length-1][0]]=b[Tr](A[A.length-1][1]*w)),{R:x,cells:T}}function WCe(e,t){var n,r=mt(t.data),i=-1;(n=r==null?void 0:r[7])!=null&&n[0]&&(Nt(r[7][0].data)>>>0?i=1:i=0);var s=jE(r[5],function(a){return VCe(a,i)});return{nrows:Nt(r[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function sq(e,t){var n,r,i,s,a,o,l,c,u,f,h={t:"",a:""},d=mt(t);if((r=(n=d==null?void 0:d[1])==null?void 0:n[0])!=null&&r.data&&(h.t=h0((s=(i=d==null?void 0:d[1])==null?void 0:i[0])==null?void 0:s.data)||""),(o=(a=d==null?void 0:d[3])==null?void 0:a[0])!=null&&o.data){var p=e[or((c=(l=d==null?void 0:d[3])==null?void 0:l[0])==null?void 0:c.data)][0],g=mt(p.data);(f=(u=g[1])==null?void 0:u[0])!=null&&f.data&&(h.a=h0(g[1][0].data))}return d!=null&&d[4]&&(h.replies=[],d[4].forEach(function(m){var x=e[or(m.data)][0];h.replies.push(sq(e,x.data))})),h}function jCe(e){var t=[];return t.push({t:e.t||"",a:e.a,T:e.replies&&e.replies.length>0}),e.replies&&e.replies.forEach(function(n){t.push({t:n.t||"",a:n.a,T:!0})}),t}function GCe(e,t,n,r){var i,s,a,o,l,c,u,f,h,d,p,g,m,x,v=mt(t.data),y={s:{r:0,c:0},e:{r:0,c:0}};if(y.e.r=(Nt(v[6][0].data)>>>0)-1,y.e.r<0)throw new Error("Invalid row varint ".concat(v[6][0].data));if(y.e.c=(Nt(v[7][0].data)>>>0)-1,y.e.c<0)throw new Error("Invalid col varint ".concat(v[7][0].data));n["!ref"]=wt(y);var _=n["!data"]!=null,b=n,w=mt(v[4][0].data),E=BCe();(i=w[4])!=null&&i[0]&&(E.sst=df(e,e[or(w[4][0].data)][0])),(s=w[6])!=null&&s[0]&&(E.fmla=df(e,e[or(w[6][0].data)][0])),(a=w[11])!=null&&a[0]&&(E.ofmt=df(e,e[or(w[11][0].data)][0])),(o=w[12])!=null&&o[0]&&(E.ferr=df(e,e[or(w[12][0].data)][0])),(l=w[17])!=null&&l[0]&&(E.rsst=df(e,e[or(w[17][0].data)][0])),(c=w[19])!=null&&c[0]&&(E.cmnt=df(e,e[or(w[19][0].data)][0])),(u=w[22])!=null&&u[0]&&(E.nfmt=df(e,e[or(w[22][0].data)][0]));var A=mt(w[3][0].data),S=0;if(!((f=w[9])!=null&&f[0]))throw"NUMBERS file missing row tree";var k=mt(w[9][0].data)[1].map(function(N){return mt(N.data)});if(k.forEach(function(N){S=Nt(N[1][0].data);var R=Nt(N[2][0].data),L=A[1][R];if(!L)throw"NUMBERS missing tile "+R;var I=mt(L.data),Y=e[or(I[2][0].data)][0],X=Nt(Y.meta[1][0].data);if(X!=6002)throw new Error("6001 unexpected reference to ".concat(X));var oe=WCe(e,Y);oe.data.forEach(function(xe,_e){xe.forEach(function(ve,Oe){var Pe=HCe(ve,E,r);Pe&&(_?(b["!data"][S+_e]||(b["!data"][S+_e]=[]),b["!data"][S+_e][Oe]=Pe):n[Pt(Oe)+Xt(S+_e)]=Pe)})}),S+=oe.nrows}),(h=w[13])!=null&&h[0]){var T=e[or(w[13][0].data)][0],O=Nt(T.meta[1][0].data);if(O!=6144)throw new Error("Expected merge type 6144, found ".concat(O));n["!merges"]=(d=mt(T.data))==null?void 0:d[1].map(function(N){var R=mt(N.data),L=A1(mt(R[1][0].data)[1][0].data),I=A1(mt(R[2][0].data)[1][0].data);return{s:{r:L.getUint16(0,!0),c:L.getUint16(2,!0)},e:{r:L.getUint16(0,!0)+I.getUint16(0,!0)-1,c:L.getUint16(2,!0)+I.getUint16(2,!0)-1}}})}if(!((p=n["!merges"])!=null&&p.length)&&((g=v[47])!=null&&g[0])){var C=mt(v[47][0].data);if((m=C[2])!=null&&m[0]){var D=mt(C[2][0].data);(x=D[3])!=null&&x[0]&&(n["!merges"]=jE(D[3],function(N){var R,L,I,Y,X,oe=mt(N),xe=mt(oe[2][0].data),_e=mt(xe[1][0].data);if((R=_e[1])!=null&&R[0]){var ve=mt(_e[1][0].data),Oe=Nt(ve[1][0].data);if(Oe==67){var Pe=mt(ve[40][0].data);if(!(!((L=Pe[3])!=null&&L[0])||!((I=Pe[4])!=null&&I[0]))){var Ge=mt(Pe[3][0].data),z=mt(Pe[4][0].data),q=Nt(Ge[1][0].data),G=(Y=Ge[2])!=null&&Y[0]?Nt(Ge[2][0].data):q,H=Nt(z[1][0].data),J=(X=z[2])!=null&&X[0]?Nt(z[2][0].data):H;return{s:{r:H,c:q},e:{r:J,c:G}}}}}}).filter(function(N){return N!=null}))}}}function qCe(e,t,n){var r=mt(t.data),i={"!ref":"A1"};n!=null&&n.dense&&(i["!data"]=[]);var s=e[or(r[2][0].data)],a=Nt(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return GCe(e,s[0],i,n),i}function XCe(e,t,n){var r,i=mt(t.data),s={name:(r=i[1])!=null&&r[0]?h0(i[1][0].data):"",sheets:[]},a=jE(i[2],or);return a.forEach(function(o){e[o].forEach(function(l){var c=Nt(l.meta[1][0].data);c==6e3&&s.sheets.push(qCe(e,l,n))})}),s}function YCe(e,t,n){var r,i=FO();i.Workbook={WBProps:{date1904:!0}};var s=mt(t.data);if((r=s[2])!=null&&r[0])throw new Error("Keynote presentations are not supported");var a=jE(s[1],or);if(a.forEach(function(o){e[o].forEach(function(l){var c=Nt(l.meta[1][0].data);if(c==2){var u=XCe(e,l,n);u.sheets.forEach(function(f,h){Sx(i,f,h==0?u.name:u.name+"_"+h,!0)})}})}),i.SheetNames.length==0)throw new Error("Empty NUMBERS file");return i.bookType="numbers",i}function GA(e,t){var n,r,i,s,a,o,l,c={},u=[];if(e.FullPaths.forEach(function(h){if(h.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(h){if(h.name.match(/\.iwa$/)&&h.content[0]==0){var d;try{d=PCe(h.content)}catch(g){return console.log("?? "+h.content.length+" "+(g.message||g))}var p;try{p=ICe(d)}catch(g){return console.log("## "+(g.message||g))}p.forEach(function(g){c[g.id]=g.messages,u.push(g.id)})}}),!u.length)throw new Error("File has no messages");if((i=(r=(n=c==null?void 0:c[1])==null?void 0:n[0].meta)==null?void 0:r[1])!=null&&i[0].data&&Nt(c[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var f=((l=(o=(a=(s=c==null?void 0:c[1])==null?void 0:s[0])==null?void 0:a.meta)==null?void 0:o[1])==null?void 0:l[0].data)&&Nt(c[1][0].meta[1][0].data)==1&&c[1][0];if(f||u.forEach(function(h){c[h].forEach(function(d){var p=Nt(d.meta[1][0].data)>>>0;if(p==1)if(!f)f=d;else throw new Error("Document has multiple roots")})}),!f)throw new Error("Cannot find Document root");return YCe(c,f,t)}function KCe(e){return function(n){for(var r=0;r!=e.length;++r){var i=e[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function kO(e){KCe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function JCe(e){return qd.WS.indexOf(e)>-1?"sheet":e==qd.CS?"chart":e==qd.DS?"dialog":e==qd.MS?"macro":e&&e.length?e:"sheet"}function ZCe(e,t){if(!e)return 0;try{e=t.map(function(r){return r.id||(r.id=r.strRelID),[r.name,e["!id"][r.id].Target,JCe(e["!id"][r.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function QCe(e,t,n,r,i,s,a,o){if(!(!e||!e["!legdrawel"])){var l=Gd(e["!legdrawel"].Target,r),c=Ei(n,l,!0);c&&aAe(Qt(c),e,o||[])}}function eFe(e,t,n,r,i,s,a,o,l,c,u,f){try{s[r]=Dm(Ei(e,n,!0),t);var h=Pn(e,t),d;switch(o){case"sheet":d=rCe(h,t,i,l,s[r],c,u,f);break;case"chart":if(d=iCe(h,t,i,l,s[r],c,u,f),!d||!d["!drawel"])break;var p=Gd(d["!drawel"].Target,t),g=yC(p),m=sAe(Ei(e,p,!0),Dm(Ei(e,g,!0),p)),x=Gd(m,p),v=yC(x);d=Uke(Ei(e,x,!0),x,l,Dm(Ei(e,v,!0),x),c,d);break;case"macro":d=sCe(h,t,i,l,s[r],c,u,f);break;case"dialog":d=aCe(h,t,i,l,s[r],c,u,f);break;default:throw new Error("Unrecognized sheet type "+o)}a[r]=d;var y=[],_=[];s&&s[r]&&Zs(s[r]).forEach(function(b){var w="";if(s[r][b].Type==qd.CMNT){if(w=Gd(s[r][b].Target,t),y=cCe(Pn(e,w,!0),w,l),!y||!y.length)return;F8(d,y,!1)}s[r][b].Type==qd.TCMNT&&(w=Gd(s[r][b].Target,t),_=_.concat(lAe(Pn(e,w,!0),l)))}),_&&_.length&&F8(d,_,!0,l.people||[]),QCe(d,o,e,t,i,l,c,y)}catch(b){if(l.WTF)throw b}}function Bs(e){return e.charAt(0)=="/"?e.slice(1):e}function tFe(e,t){if(Uj(),t=t||{},kO(t),Vs(e,"META-INF/manifest.xml")||Vs(e,"objectdata.xml"))return z8(e,t);if(Vs(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof GA<"u"){if(e.FileIndex)return GA(e,t);var n=Tt.utils.cfb_new();return t8(e).forEach(function(N){ibe(n,N,rbe(e,N))}),GA(n,t)}throw new Error("Unsupported NUMBERS file")}if(!Vs(e,"[Content_Types].xml")){if(Vs(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(Vs(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var r=Tt.find(e,"Index.zip");if(r)return t=Hn(t),delete t.type,typeof r.content=="string"&&(t.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(r.content)?d0(new Uint8Array(r.content),t):d0(r.content,t);throw new Error("Unsupported ZIP file")}var i=t8(e),s=eEe(Ei(e,"[Content_Types].xml")),a=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Pn(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Pn(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if($m=[],s.sst)try{$m=lCe(Pn(e,Bs(s.sst)),s.sst,t)}catch(N){if(t.WTF)throw N}t.cellStyles&&s.themes.length&&(c=IG(Ei(e,s.themes[0].replace(/^\//,""),!0)||"",t)),s.style&&(u=oCe(Pn(e,Bs(s.style)),s.style,c,t))}s.links.map(function(N){try{var R=Dm(Ei(e,yC(Bs(N))),N);return fCe(Pn(e,Bs(N)),R,N,t)}catch{}});var f=nCe(Pn(e,Bs(s.workbooks[0])),s.workbooks[0],t),h={},d="";s.coreprops.length&&(d=Pn(e,Bs(s.coreprops[0]),!0),d&&(h=mG(d)),s.extprops.length!==0&&(d=Pn(e,Bs(s.extprops[0]),!0),d&&iEe(d,h,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(d=Ei(e,Bs(s.custprops[0]),!0),d&&(p=aEe(d,t)));var g={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(R){return R.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),t.bookProps&&(g.Props=h,g.Custprops=p),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var m={};t.bookDeps&&s.calcchain&&(m=uCe(Pn(e,Bs(s.calcchain)),s.calcchain));var x=0,v={},y,_;{var b=f.Sheets;h.Worksheets=b.length,h.SheetNames=[];for(var w=0;w!=b.length;++w)h.SheetNames[w]=b[w].name}var E=a?"bin":"xml",A=s.workbooks[0].lastIndexOf("/"),S=(s.workbooks[0].slice(0,A+1)+"_rels/"+s.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");Vs(e,S)||(S="xl/_rels/workbook."+E+".rels");var k=Dm(Ei(e,S,!0),S.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=hCe(Pn(e,Bs(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=cAe(Pn(e,Bs(s.people[0])),t)),k&&(k=ZCe(k,f.Sheets));var T=Pn(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(x=0;x!=h.Worksheets;++x){var O="sheet";if(k&&k[x]?(y="xl/"+k[x][1].replace(/[\/]?xl\//,""),Vs(e,y)||(y=k[x][1]),Vs(e,y)||(y=S.replace(/_rels\/[\S\s]*$/,"")+k[x][1]),O=k[x][2]):(y="xl/worksheets/sheet"+(x+1-T)+"."+E,y=y.replace(/sheet0\./,"sheet.")),_=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(x!=t.sheets)continue e;break;case"string":if(h.SheetNames[x].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var C=!1,D=0;D!=t.sheets.length;++D)typeof t.sheets[D]=="number"&&t.sheets[D]==x&&(C=1),typeof t.sheets[D]=="string"&&t.sheets[D].toLowerCase()==h.SheetNames[x].toLowerCase()&&(C=1);if(!C)continue e}}eFe(e,y,_,h.SheetNames[x],x,v,o,O,t,f,c,u)}return g={Directory:s,Workbook:f,Props:h,Custprops:p,Deps:m,Sheets:o,SheetNames:h.SheetNames,Strings:$m,Styles:u,Themes:c,SSF:Hn(st)},t&&t.bookFiles&&(e.files?(g.keys=i,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(N,R){N=N.replace(/^Root Entry[\/]/,""),g.keys.push(N),g.files[N]=e.FileIndex[R]}))),t&&t.bookVBA&&(s.vba.length>0?g.vbaraw=Pn(e,Bs(s.vba[0]),!0):s.defaults&&s.defaults.bin===dAe&&(g.vbaraw=Pn(e,"xl/vbaProject.bin",!0))),g.bookType=a?"xlsb":"xlsx",g}function nFe(e,t){var n=t||{},r="Workbook",i=Tt.find(e,r);try{if(r="/!DataSpaces/Version",i=Tt.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(Qwe(i.content),r="/!DataSpaces/DataSpaceMap",i=Tt.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=tSe(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=Tt.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=nSe(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=Tt.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);iSe(i.content)}catch{}if(r="/EncryptionInfo",i=Tt.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=sSe(i.content);if(r="/EncryptedPackage",i=Tt.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,n.password||"",n);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,n.password||"",n);throw new Error("File is password-protected")}function CO(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Cs(e.slice(0,12));break;case"binary":n=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function rFe(e,t){return Tt.find(e,"EncryptedPackage")?nFe(e,t):ZG(e,t)}function iFe(e,t){var n,r=e,i=t||{};return i.type||(i.type=_t&&Buffer.isBuffer(e)?"buffer":"base64"),n=Gj(r,i),tFe(n,i)}function aq(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return bC(e.slice(n),t);default:break e}return E1.to_workbook(e,t)}function sFe(e,t){var n="",r=CO(e,t);switch(t.type){case"base64":n=Cs(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=Sh(e);break;default:throw new Error("Unrecognized type "+t.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=Qt(n)),t.type="binary",aq(n,t)}function aFe(e,t){var n=e;return t.type=="base64"&&(n=Cs(n)),typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer&&(n=new Uint8Array(e)),n=_t&&Buffer.isBuffer(e)?e.slice(2).toString("utf16le"):typeof Uint8Array<"u"&&n instanceof Uint8Array?typeof TextDecoder<"u"?new TextDecoder("utf-16le").decode(n.slice(2)):c2e(n.slice(2)):Oj(n.slice(2)),t.type="binary",aq(n,t)}function oFe(e){return e.match(/[^\x00-\x7F]/)?Jg(e):e}function qA(e,t,n,r){return r?(n.type="string",E1.to_workbook(e,n)):E1.to_workbook(t,n)}function d0(e,t){Fj();var n=t||{};if(n.codepage&&typeof Ud>"u"&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return d0(new Uint8Array(e),(n=Hn(n),n.type="array",n));if(typeof Int8Array<"u"&&e instanceof Int8Array)return d0(new Uint8Array(e.buffer,e.byteOffset,e.length),n);typeof Uint8Array<"u"&&e instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=e,i=[0,0,0,0],s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),f0={},n.dateNF&&(f0.dateNF=n.dateNF),n.type||(n.type=_t&&Buffer.isBuffer(e)?"buffer":"base64"),n.type=="file"&&(n.type=_t?"buffer":"binary",r=B2e(e),typeof Uint8Array<"u"&&!_t&&(n.type="array")),n.type=="string"&&(s=!0,n.type="binary",n.codepage=65001,r=oFe(e)),n.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return n=Hn(n),n.type="array",d0(cO(r),n)}switch((i=CO(r,n))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return rFe(Tt.read(r,n),n);break;case 9:if(i[1]<=8)return ZG(r,n);break;case 60:return bC(r,n);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return Hwe(r,n);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return Uwe.to_workbook(r,n);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?iFe(r,n):qA(e,r,n,s);case 239:return i[3]===60?bC(r,n):qA(e,r,n,s);case 255:if(i[1]===254)return aFe(r,n);if(i[1]===0&&i[2]===2&&i[3]===0)return Rm.to_workbook(r,n);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Rm.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return C8.to_workbook(r,n);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return vSe(r,n);break;case 10:case 13:case 32:return sFe(r,n);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(i[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(i[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(i[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return Pwe.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?C8.to_workbook(r,n):qA(e,r,n,s)}function lFe(e,t,n,r,i,s,a){var o=Xt(n),l=a.defval,c=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),u=!0,f=e["!data"]!=null,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch{h.__rowNum__=n}else h.__rowNum__=n;if(!f||e["!data"][n])for(var d=t.s.c;d<=t.e.c;++d){var p=f?(e["!data"][n]||[])[d]:e[r[d]+o];if(p==null||p.t===void 0){if(l===void 0)continue;s[d]!=null&&(h[s[d]]=l);continue}var g=p.v;switch(p.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"b":case"n":if(!p.z||!ja(p.z)||(g=iu(g),typeof g=="number"))break;case"d":a&&(a.UTC||a.raw===!1)||(g=Ah(new Date(g)));break;default:throw new Error("unrecognized type "+p.t)}if(s[d]!=null){if(g==null)if(p.t=="e"&&g===null)h[s[d]]=null;else if(l!==void 0)h[s[d]]=l;else if(c&&g===null)h[s[d]]=null;else continue;else h[s[d]]=(p.t==="n"&&typeof a.rawNumbers=="boolean"?a.rawNumbers:c)?g:wu(p,g,a);g!=null&&(u=!1)}}return{row:h,isempty:u}}function wC(e,t){if(e==null||e["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=c.range!=null?c.range:e["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=Mn(u);break;case"number":l=Mn(e["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var f=Xt(l.s.r),h=[],d=[],p=0,g=0,m=e["!data"]!=null,x=l.s.r,v=0,y={};m&&!e["!data"][x]&&(e["!data"][x]=[]);var _=c.skipHidden&&e["!cols"]||[],b=c.skipHidden&&e["!rows"]||[];for(v=l.s.c;v<=l.e.c;++v)if(!(_[v]||{}).hidden)switch(h[v]=Pt(v),n=m?e["!data"][x][v]:e[h[v]+f],r){case 1:s[v]=v-l.s.c;break;case 2:s[v]=h[v];break;case 3:s[v]=c.header[v-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),o=a=wu(n,null,c),g=y[a]||0,!g)y[a]=1;else{do o=a+"_"+g++;while(y[o]);y[a]=g,y[o]=1}s[v]=o}for(x=l.s.r+i;x<=l.e.r;++x)if(!(b[x]||{}).hidden){var w=lFe(e,l,x,h,r,s,c);(w.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(d[p++]=w.row)}return d.length=p,d}var V8=/"/g;function cFe(e,t,n,r,i,s,a,o,l){for(var c=!0,u=[],f="",h=Xt(n),d=e["!data"]!=null,p=d&&e["!data"][n]||[],g=t.s.c;g<=t.e.c;++g)if(r[g]){var m=d?p[g]:e[r[g]+h];if(m==null)f="";else if(m.v!=null){c=!1,f=""+(l.rawNumbers&&m.t=="n"?m.v:wu(m,null,l));for(var x=0,v=0;x!==f.length;++x)if((v=f.charCodeAt(x))===i||v===s||v===34||l.forceQuotes){f='"'+f.replace(V8,'""')+'"';break}f=="ID"&&o==0&&u.length==0&&(f='"ID"')}else m.f!=null&&!m.F?(c=!1,f="="+m.f,f.indexOf(",")>=0&&(f='"'+f.replace(V8,'""')+'"')):f="";u.push(f)}if(l.strip)for(;u[u.length-1]==="";)--u.length;return l.blankrows===!1&&c?null:u.join(a)}function oq(e,t){var n=[],r=t??{};if(e==null||e["!ref"]==null)return"";for(var i=Mn(e["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),c="",u=[],f=r.skipHidden&&e["!cols"]||[],h=r.skipHidden&&e["!rows"]||[],d=i.s.c;d<=i.e.c;++d)(f[d]||{}).hidden||(u[d]=Pt(d));for(var p=0,g=i.s.r;g<=i.e.r;++g)(h[g]||{}).hidden||(c=cFe(e,i,g,u,a,l,s,p,r),c!=null&&(c||r.blankrows!==!1)&&n.push((p++?o:"")+c));return n.join("")}function uFe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var n=oq(e,t);return n}function fFe(e,t){var n="",r,i="";if(e==null||e["!ref"]==null)return[];var s=Mn(e["!ref"]),a="",o=[],l,c=[],u=e["!data"]!=null;for(l=s.s.c;l<=s.e.c;++l)o[l]=Pt(l);for(var f=s.s.r;f<=s.e.r;++f)for(a=Xt(f),l=s.s.c;l<=s.e.c;++l)if(n=o[l]+a,r=u?(e["!data"][f]||[])[l]:e[n],i="",r!==void 0){if(r.F!=null){if(n=r.F,!r.f)continue;i=r.f,n.indexOf(":")==-1&&(n=n+":"+n)}if(r.f!=null)i=r.f;else{if(t&&t.values===!1)continue;if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)i=""+r.v;else if(r.t=="b")i=r.v?"TRUE":"FALSE";else if(r.w!==void 0)i="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?i="'"+r.v:i=""+r.v}}c[c.length]=n+"="+i}return c}function lq(e,t,n){var r=n||{},i=e?e["!data"]!=null:r.dense,s=+!r.skipHeader,a=e||{};!e&&i&&(a["!data"]=[]);var o=0,l=0;if(a&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var c=typeof r.origin=="string"?Kr(r.origin):r.origin;o=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(a["!ref"]){var f=Mn(a["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var h=r.header||[],d=0,p=[];t.forEach(function(m,x){i&&!a["!data"][o+x+s]&&(a["!data"][o+x+s]=[]),i&&(p=a["!data"][o+x+s]),Zs(m).forEach(function(v){(d=h.indexOf(v))==-1&&(h[d=h.length]=v);var y=m[v],_="z",b="",w=i?"":Pt(l+d)+Xt(o+x+s),E=i?p[l+d]:a[w];y&&typeof y=="object"&&!(y instanceof Date)?i?p[l+d]=y:a[w]=y:(typeof y=="number"?_="n":typeof y=="boolean"?_="b":typeof y=="string"?_="s":y instanceof Date?(_="d",r.UTC||(y=PE(y)),r.cellDates||(_="n",y=nr(y)),b=E!=null&&E.z&&ja(E.z)?E.z:r.dateNF||st[14]):y===null&&r.nullError&&(_="e",y=0),E?(E.t=_,E.v=y,delete E.w,delete E.R,b&&(E.z=b)):i?p[l+d]=E={t:_,v:y}:a[w]=E={t:_,v:y},b&&(E.z=b))})}),u.e.c=Math.max(u.e.c,l+h.length-1);var g=Xt(o);if(i&&!a["!data"][o]&&(a["!data"][o]=[]),s)for(d=0;d<h.length;++d)i?a["!data"][o][d+l]={t:"s",v:h[d]}:a[Pt(d+l)+g]={t:"s",v:h[d]};return a["!ref"]=wt(u),a}function hFe(e,t){return lq(null,e,t)}function T1(e,t,n){if(typeof t=="string"){if(e["!data"]!=null){var r=Kr(t);return e["!data"][r.r]||(e["!data"][r.r]=[]),e["!data"][r.r][r.c]||(e["!data"][r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?T1(e,Dt(t)):T1(e,Pt(n||0)+Xt(t))}function dFe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function FO(e,t){var n={SheetNames:[],Sheets:{}};return e&&Sx(n,e,t||"Sheet1"),n}function Sx(e,t,n,r){var i=1;if(!n)for(;i<=65535&&e.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0&&n.length<32){var s=n.match(/\d+$/);i=s&&+s[0]||0;var a=s&&n.slice(0,s.index)||n;for(++i;i<=65535&&e.SheetNames.indexOf(n=a+i)!=-1;++i);}if(Xke(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function pFe(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=dFe(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n}function gFe(e,t){return e.z=t,e}function cq(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}function mFe(e,t,n){return cq(e,"#"+t,n)}function xFe(e,t,n){e.c||(e.c=[]),e.c.push({t,a:n||"SheetJS"})}function vFe(e,t,n,r){for(var i=typeof t!="string"?t:Mn(t),s=typeof t=="string"?t:wt(t),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=T1(e,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=n,r&&(l.D=!0))}var c=Zh(e["!ref"]);return c.s.r>i.s.r&&(c.s.r=i.s.r),c.s.c>i.s.c&&(c.s.c=i.s.c),c.e.r<i.e.r&&(c.e.r=i.e.r),c.e.c<i.e.c&&(c.e.c=i.e.c),e["!ref"]=wt(c),e}var yFe={encode_col:Pt,encode_row:Xt,encode_cell:Dt,encode_range:wt,decode_col:vO,decode_row:xO,split_cell:Nbe,decode_cell:Kr,decode_range:Zh,format_cell:wu,sheet_new:Mbe,sheet_add_aoa:fG,sheet_add_json:lq,sheet_add_dom:QG,aoa_to_sheet:$p,json_to_sheet:hFe,table_to_sheet:eq,table_to_book:DCe,sheet_to_csv:oq,sheet_to_txt:uFe,sheet_to_json:wC,sheet_to_html:NCe,sheet_to_formulae:fFe,sheet_to_row_object_array:wC,sheet_get_cell:T1,book_new:FO,book_append_sheet:Sx,book_set_sheet_visibility:pFe,cell_set_number_format:gFe,cell_set_hyperlink:cq,cell_set_internal_link:mFe,cell_add_comment:xFe,sheet_set_array_formula:vFe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const _Fe=se("i",{class:"fas fa-file-upload"},null,-1),bFe=[_Fe],EFe=vr({__name:"CMenuBtnUpload",emits:["change"],setup(e,{emit:t}){const n=Rp(),r=t,i=zn();async function s(){if(!i.value||!i.value.files)return;let o={fields:[],items:{}};var l=i.value.files[0],c={};if(!l||(await a(l).then(h=>{c=h}),!c||c.length<1))return;const u=3;let f=Object.keys(c[0]);o.fields=[{key:"0",label:"Region",editable:!1},{key:"1",label:"Abbreviation",editable:!0,type:"text"},{key:"2",label:"Color",editable:!0,type:"color"}];for(let h=u;h<f.length;h++)o.fields.push({key:h.toString(),label:f[h],editable:!0,type:"number",headerEditable:!0});for(let h=0;h<c.length;h++){let d=[c[h][f[0]],c[h][f[1]],c[h][f[2]]];for(let p=u;p<f.length;p++){let g=c[h][f[p]];typeof g=="string"&&(g=parseFloat(g)),d.push(g)}o.items[h]=d}r("change",o)}function a(o){return new Promise((l,c)=>{var h;let u=new FileReader,f=(h=o.name.split(".").pop())==null?void 0:h.slice(0,3);try{u.onloadend=function(d){var v;var p=(v=d.target)==null?void 0:v.result,g={};if(f==="xls"){var m=d0(p,{type:"binary"}),x=m.Sheets[m.SheetNames[0]];g=yFe.sheet_to_json(x)}else g=HV(p);l(g)}}catch(d){console.log(d),c(Error("Given file is corrupted or incorrect format."))}u.readAsBinaryString(o)})}return(o,l)=>(je(),Qe(qt,null,[se("button",{class:Bu(["btn btn-primary me-2",{disabled:Wt(n).isLoading}]),onClick:l[0]||(l[0]=c=>{var u;return(u=i.value)==null?void 0:u.click()}),id:"upload-button",title:"Upload data"},bFe,2),se("input",{ref_key:"csvInput",ref:i,type:"file",id:"csv",accept:"text/csv,.csv,.xlsx,.xls",style:{display:"none"},onChange:l[1]||(l[1]=c=>s())},null,544)],64))}}),wFe=se("i",{class:"far fa-edit"},null,-1),SFe=[wFe],AFe={class:"modal fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},TFe={class:"modal-dialog modal-dialog-scrollable"},kFe={class:"modal-content"},CFe={class:"modal-header"},FFe={class:"modal-title fs-5",id:"shareModalLabel"},OFe={class:"modal-body"},NFe={class:"bg-light"},DFe={class:"p-1"},MFe={key:0},RFe=["id","onUpdate:modelValue"],$Fe={class:"p-1"},IFe={key:0},LFe=["id","onUpdate:modelValue","type"],PFe=se("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cancel",-1),BFe=vr({__name:"CMenuBtnEdit",props:{maps:{},csvdata:{}},emits:["change"],setup(e,{emit:t}){const n=Rp(),r=e,i=rs({data:{fields:[],items:{}}}),s=t;function a(){if(i.data.fields=[],i.data.items={},!!r.csvdata.length){i.data.fields=[{key:"0",label:"Region",editable:!1},{key:"1",label:"Abbreviation",editable:!0,type:"text"},{key:"2",label:"Color",editable:!0,type:"color"}];for(const[c,u]of Object.entries(n.versions))i.data.fields.push({key:c,label:u.name+" ("+u.unit+")",editable:!0,type:"number",headerEditable:!0});for(let c=0;c<r.csvdata.length;c++){var l=[r.csvdata[c].Region,r.csvdata[c].Abbreviation,r.csvdata[c].Color];for(const[u,f]of Object.entries(n.versions))l.push(r.csvdata[c][f.header]);i.data.items[c]=l}}}function o(){s("change",i.data)}return(l,c)=>(je(),Qe(qt,null,[se("button",{class:Bu([{disabled:Wt(n).isLoading},"btn btn-primary me-2"]),"data-bs-toggle":"modal","data-bs-target":"#editModal",title:"Edit data",onClick:c[0]||(c[0]=u=>a())},SFe,2),se("div",AFe,[se("div",TFe,[se("div",kFe,[se("div",CFe,[se("h1",FFe," Update "+Ua(r.maps[Wt(n).currentMapName].name),1)]),se("div",OFe,[se("table",null,[se("tr",NFe,[(je(!0),Qe(qt,null,Il(i.data.fields,(u,f)=>(je(),Qe("th",DFe,[u.headerEditable?E0((je(),Qe("input",{key:1,type:"text",id:"input-h-"+u.key,"onUpdate:modelValue":h=>u.label=h},null,8,RFe)),[[e1,u.label]]):(je(),Qe("span",MFe,Ua(u.label),1))]))),256))]),(je(!0),Qe(qt,null,Il(i.data.items,(u,f)=>(je(),Qe("tr",null,[(je(!0),Qe(qt,null,Il(u,(h,d)=>(je(),Qe("td",$Fe,[i.data.fields[d].editable?E0((je(),Qe("input",{key:1,id:"input-"+f+"-"+d,"onUpdate:modelValue":p=>i.data.items[f][d]=p,type:i.data.fields[d].type},null,8,LFe)),[[N3,i.data.items[f][d]]]):(je(),Qe("span",IFe,Ua(h),1))]))),256))]))),256))])]),se("div",{class:"modal-footer modal-footer--sticky bg-white"},[PFe,se("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:o}," Save changes ")])])])])],64))}}),GE=e=>(Y1("data-v-dbb42a47"),e=e(),K1(),e),UFe={class:"navbar bg-light p-0"},zFe={class:"w-100 mw-100 d-flex align-items-start"},HFe={key:0,class:"p-2"},VFe=GE(()=>se("img",{src:"/static/img/gocart_final.svg",width:"80",alt:"go-cart.io logo"},null,-1)),WFe=[VFe],jFe={class:"py-2 d-flex flex-nowrap"},GFe={key:0,class:"text-nowrap"},qFe={class:"dropdown me-2"},XFe=GE(()=>se("button",{class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",title:"Customization"},[se("i",{class:"fas fa-cog"})],-1)),YFe={class:"dropdown-menu dropdown-menu-end p-2 container",style:{width:"220px"}},KFe={class:"row"},JFe=GE(()=>se("div",{class:"col-auto"},[se("label",{class:"form-check-label",for:"gridline-toggle-cartogram"},"Show grid lines")],-1)),ZFe={class:"col text-end"},QFe={class:"row"},e3e=GE(()=>se("div",{class:"col-auto"},[se("label",{class:"form-check-label",for:"gridline-toggle-cartogram"},"Show base map")],-1)),t3e={class:"col text-end"},n3e=vr({__name:"CMenuBar",props:{isEmbed:{type:Boolean,default:!1},maps:{}},emits:["map_changed","version_changed","loading_progress","confirm_data"],setup(e,{emit:t}){const n=Rp(),r=e,i=t,s=rs({csvdata:[]});function a(l){s.csvdata=l,i("map_changed",l)}function o(l){i("confirm_data",l)}return(l,c)=>(je(),Qe("nav",UFe,[se("div",zFe,[r.isEmbed?(je(),Qe("div",HFe,WFe)):Cr("",!0),vt(Q_e,{maps:r.maps,isEmbed:r.isEmbed,onMap_changed:a},null,8,["maps","isEmbed"]),vt(a2e,{versions:Wt(n).versions,currentVersionName:Wt(n).currentVersionName,onVersion_changed:c[0]||(c[0]=u=>i("version_changed",u))},null,8,["versions","currentVersionName"]),se("div",jFe,[r.isEmbed?Cr("",!0):(je(),Qe("span",GFe,[vt(EFe,{onChange:o}),vt(BFe,{maps:r.maps,csvdata:s.csvdata,onChange:o},null,8,["maps","csvdata"])])),se("div",qFe,[XFe,se("div",YFe,[se("div",KFe,[JFe,se("div",ZFe,[E0(se("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":c[1]||(c[1]=u=>Wt(n).options.showGrid=u)},null,512),[[t1,Wt(n).options.showGrid]])])]),se("div",QFe,[e3e,se("div",t3e,[E0(se("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":c[2]||(c[2]=u=>Wt(n).options.showBase=u)},null,512),[[t1,Wt(n).options.showBase]])])])])])])])]))}}),Ax=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},r3e=Ax(n3e,[["__scopeId","data-v-dbb42a47"]]);class i3e{constructor(){hv(this,"touches",{});hv(this,"length",0);hv(this,"thumbIndex",-1)}set(t){t instanceof TouchEvent?this.setTouches(t.touches):this.setPointer(t)}setPointer(t){this.updatePointer(t),this.thumbIndex=0}setTouches(t){switch(this.updateTouches(t),t.length){case 0:this.thumbIndex=-1;return;case 1:this.thumbIndex=t[0].identifier;return;case 2:if(this.thumbIndex===t[0].identifier||this.thumbIndex===t[1].identifier)return;this.thumbIndex=t[0].identifier;return;case 3:let n=Math.hypot(t[1].pageY-t[0].pageY,t[1].pageX-t[0].pageX),r=Math.hypot(t[2].pageY-t[1].pageY,t[2].pageX-t[1].pageX),i=Math.hypot(t[0].pageY-t[2].pageY,t[0].pageX-t[2].pageX);n<=r&&n<=i?this.thumbIndex=t[2].identifier:n>r&&r<=i?this.thumbIndex=t[0].identifier:this.thumbIndex=t[1].identifier;return;default:return}}update(t){t instanceof TouchEvent?this.updateTouches(t.touches):this.updatePointer(t)}updatePointer(t){this.touches={0:t},this.length=1}updateTouches(t){this.touches={},this.length=t.length;for(let n=0;n<t.length;n++)this.touches[t[n].identifier]=t[n]}clear(t){t instanceof TouchEvent?this.setTouches(t.touches):this.clearPointer()}clearPointer(){this.touches={},this.length=0,this.thumbIndex=0}getPoints(){try{if(this.length===1)return[this.getThumb()];if(this.length>1)return[this.getThumb(),this.getOthers()]}catch{}return[]}getThumb(){return[this.touches[this.thumbIndex].pageX,this.touches[this.thumbIndex].pageY]}getOthers(){if(this.length<2)return[];let t=0,n=0;for(const r in this.touches)r!==this.thumbIndex.toString()&&(t+=this.touches[r].pageX,n+=this.touches[r].pageY);return[t/(this.length-1),n/(this.length-1)]}}function s3e(e){var t=0;return e.forEach(n=>{t+=n.Area}),t}function a3e(e,t,n){var r=0,i=0,s=[],a=[];n.forEach(l=>{if(l[e]&&l[e].toString()!==""&&l[e].toString()!=="NA"){let c=typeof l[e]=="string"?Number(l[e]):l[e];i+=c}else s.push(l.Region)}),a=Array(s.length),t.forEach(l=>{let c=s.indexOf(l.Region);c>-1?a[c]=l.Area:r+=l.Area});const o=i/r;return a.forEach(function(l){i+=o*l,r+=l}),[r,i]}const Qy=[1,2,5,10,20,50];function uq(e){let t=99,n=Math.floor(Math.log10(e));const r=e/Math.pow(10,n);let i=Math.abs(r-t);return Qy.forEach(function(s){Math.abs(r-s)<i&&(i=Math.abs(r-s),t=s)}),[t,n]}function XA(){return[[1,0,0],[0,1,0],[0,0,1]]}function oy(e,t){return[[e,0,0],[0,t,0],[0,0,1]]}function vg(e){return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]}function o3e(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function wc(e,t){if(e.length!==3||t.length!==3)throw new Error("Both matrices should be 3x3.");const n=[[0,0,0],[0,0,0],[0,0,0]];for(let r=0;r<3;r++)for(let i=0;i<3;i++)for(let s=0;s<3;s++)n[r][i]+=e[r][s]*t[s][i];return n}function SC(e,t){var r;var n=e+"-icon";navigator.clipboard.writeText(t),(r=document.getElementById(n))==null||r.setAttribute("src","/static/img/clipboard-check.svg"),setTimeout(function(){var i;(i=document.getElementById(n))==null||i.setAttribute("src","/static/img/clipboard.svg")},2e3)}function YA(e,t,n){let r=t&&t!==""?"/static/userdata/"+t+"/":"/static/cartdata/"+e+"/";return n==="Land Area.json"?"/static/cartdata/"+e+"/Original.json":r+n}const l3e={key:0,class:"w-100 h-100"},c3e=["cx","cy","fill"],u3e={key:0},f3e=["x1","y1","x2","y2"],h3e=vr({__name:"CTouchVis",props:{touchInfo:{},touchLenght:{}},setup(e){const t=e,n=rs({points:[],midPoint:[]});return Hu(()=>{try{if(t.touchInfo.length>1){n.points=[t.touchInfo.getThumb()];for(const r in t.touchInfo.touches)r!==t.touchInfo.thumbIndex.toString()&&n.points.push([t.touchInfo.touches[r].pageX,t.touchInfo.touches[r].pageY]);n.midPoint=t.touchInfo.getOthers()}}catch(r){console.log(r)}}),(r,i)=>t.touchLenght>0&&n.points.length>0?(je(),Qe("svg",l3e,[(je(!0),Qe(qt,null,Il(n.points,(s,a)=>(je(),Qe("g",null,[se("circle",{cx:s[0],cy:s[1],fill:a===0?"red":"blue",r:"5"},null,8,c3e)]))),256)),t.touchLenght>2?(je(),Qe("g",u3e,[se("line",{x1:n.points[0][0],y1:n.points[0][1],x2:n.midPoint[0],y2:n.midPoint[1],style:{stroke:"rgb(255, 0, 0)","stroke-width":"2"}},null,8,f3e)])):Cr("",!0)])):Cr("",!0)}});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var d3e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),p3e=Object.prototype.hasOwnProperty;function AC(e,t){return p3e.call(e,t)}function TC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)AC(e,i)&&r.push(i);return r}function xs(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function kC(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Cf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fq(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function CC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(CC(e[t]))return!0}else if(typeof e=="object"){for(var r=TC(e),i=r.length,s=0;s<i;s++)if(CC(e[r[s]]))return!0}}return!1}function W8(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var hq=function(e){d3e(t,e);function t(n,r,i,s,a){var o=this.constructor,l=e.call(this,W8(n,{name:r,index:i,operation:s,tree:a}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=a,Object.setPrototypeOf(l,o.prototype),l.message=W8(n,{name:r,index:i,operation:s,tree:a}),l}return t}(Error),wn=hq,g3e=xs,Xd={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=G2(n,this.path);r&&(r=xs(r));var i=ih(n,{op:"remove",path:this.from}).removed;return ih(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=G2(n,this.from);return ih(n,{op:"add",path:this.path,value:xs(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:k1(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},m3e={add:function(e,t,n){return kC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Xd.move,copy:Xd.copy,test:Xd.test,_get:Xd._get};function G2(e,t){if(t=="")return e;var n={op:"_get",path:t};return ih(e,n),n.value}function ih(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):q2(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=G2(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=k1(e,t.value),a.test===!1)throw new wn("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new wn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return a}}else{r||(e=xs(e));var o=t.path||"",l=o.split("/"),c=e,u=1,f=l.length,h=void 0,d=void 0,p=void 0;for(typeof n=="function"?p=n:p=q2;;){if(d=l[u],d&&d.indexOf("~")!=-1&&(d=fq(d)),i&&(d=="__proto__"||d=="prototype"&&u>0&&l[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(c[d]===void 0?h=l.slice(0,u).join("/"):u==f-1&&(h=t.path),h!==void 0&&p(t,0,e,h)),u++,Array.isArray(c)){if(d==="-")d=c.length;else{if(n&&!kC(d))throw new wn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);kC(d)&&(d=~~d)}if(u>=f){if(n&&t.op==="add"&&d>c.length)throw new wn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var a=m3e[t.op].call(t,c,d,e);if(a.test===!1)throw new wn("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}}else if(u>=f){var a=Xd[t.op].call(t,c,d,e);if(a.test===!1)throw new wn("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}if(c=c[d],n&&u<f&&(!c||typeof c!="object"))throw new wn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function qE(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new wn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=xs(e));for(var s=new Array(t.length),a=0,o=t.length;a<o;a++)s[a]=ih(e,t[a],n,!0,i,a),e=s[a].newDocument;return s.newDocument=e,s}function x3e(e,t,n){var r=ih(e,t);if(r.test===!1)throw new wn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function q2(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new wn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Xd[e.op]){if(typeof e.path!="string")throw new wn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new wn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new wn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new wn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&CC(e.value))throw new wn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new wn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new wn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},o=dq([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new wn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new wn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function dq(e,t,n){try{if(!Array.isArray(e))throw new wn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)qE(xs(t),xs(e),n||!0);else{n=n||q2;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof wn)return i;throw i}}function k1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,a;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!k1(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(e);if(s=o.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!k1(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const v3e=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:wn,_areEquals:k1,applyOperation:ih,applyPatch:qE,applyReducer:x3e,deepClone:g3e,getValueByPointer:G2,validate:dq,validator:q2},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var OO=new WeakMap,y3e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),_3e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function b3e(e){return OO.get(e)}function E3e(e,t){return e.observers.get(t)}function w3e(e,t){e.observers.delete(t.callback)}function S3e(e,t){t.unobserve()}function A3e(e,t){var n=[],r,i=b3e(e);if(!i)i=new y3e(e),OO.set(e,i);else{var s=E3e(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=xs(e),t){r.callback=t,r.next=null;var a=function(){FC(r)},o=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return r.patches=n,r.object=e,r.unobserve=function(){FC(r),clearTimeout(r.next),w3e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},i.observers.set(t,new _3e(t,r)),r}function FC(e,t){t===void 0&&(t=!1);var n=OO.get(e.object);NO(n.value,e.object,e.patches,"",t),e.patches.length&&qE(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function NO(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=TC(t),a=TC(e),o=!1,l=a.length-1;l>=0;l--){var c=a[l],u=e[c];if(AC(t,c)&&!(t[c]===void 0&&u!==void 0&&Array.isArray(t)===!1)){var f=t[c];typeof u=="object"&&u!=null&&typeof f=="object"&&f!=null&&Array.isArray(u)===Array.isArray(f)?NO(u,f,n,r+"/"+Cf(c),i):u!==f&&(i&&n.push({op:"test",path:r+"/"+Cf(c),value:xs(u)}),n.push({op:"replace",path:r+"/"+Cf(c),value:xs(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Cf(c),value:xs(u)}),n.push({op:"remove",path:r+"/"+Cf(c)}),o=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!o&&s.length==a.length))for(var l=0;l<s.length;l++){var c=s[l];!AC(e,c)&&t[c]!==void 0&&n.push({op:"add",path:r+"/"+Cf(c),value:xs(t[c])})}}}function T3e(e,t,n){n===void 0&&(n=!1);var r=[];return NO(e,t,r,"",n),r}const k3e=Object.freeze(Object.defineProperty({__proto__:null,compare:T3e,generate:FC,observe:A3e,unobserve:S3e},Symbol.toStringTag,{value:"Module"}));Object.assign({},v3e,k3e,{JsonPatchError:hq,deepClone:xs,escapePathComponent:Cf,unescapePathComponent:fq});function C3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var F3e=/("(?:[^\\"]|\\.)*")|[:,]/g,O3e=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function a(o,l,c){var u,f,h,d,p,g,m,x,v,y,_,b;if(o&&typeof o.toJSON=="function"&&(o=o.toJSON()),_=JSON.stringify(o,s),_===void 0)return _;if(m=i-l.length-c,_.length<=m&&(v=_.replace(F3e,function(w,E){return E||w+" "}),v.length<=m))return v;if(s!=null&&(o=JSON.parse(_),s=void 0),typeof o=="object"&&o!==null){if(x=l+r,h=[],f=0,Array.isArray(o))for(y="[",u="]",m=o.length;f<m;f++)h.push(a(o[f],x,f===m-1?0:1)||"null");else for(y="{",u="}",g=Object.keys(o),m=g.length;f<m;f++)d=g[f],p=JSON.stringify(d)+": ",b=a(o[d],x,p.length+(f===m-1?0:1)),b!==void 0&&h.push(p+b);if(h.length>0)return[y,r+h.join(`,
`+x),u].join(`
`+l)}return _}(t,"",0)};const KA=C3e(O3e);function is(e,t,n){return e.fields=t||[],e.fname=n,e}function kn(e){return e==null?null:e.fname}function ni(e){return e==null?null:e.fields}function pq(e){return e.length===1?N3e(e[0]):D3e(e)}const N3e=e=>function(t){return t[e]},D3e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function he(e){throw Error(e)}function Jo(e){const t=[],n=e.length;let r=null,i=0,s="",a,o,l;e=e+"";function c(){t.push(s+e.substring(a,o)),s="",a=o+1}for(a=o=0;o<n;++o)if(l=e[o],l==="\\")s+=e.substring(a,o++),a=o;else if(l===r)c(),r=null,i=-1;else{if(r)continue;a===i&&l==='"'||a===i&&l==="'"?(a=o+1,r=l):l==="."&&!i?o>a?c():a=o+1:l==="["?(o>a&&c(),i=a=o+1):l==="]"&&(i||he("Access path missing open bracket: "+e),i>0&&c(),i=0,a=o+1)}return i&&he("Access path missing closing bracket: "+e),r&&he("Access path missing closing quote: "+e),o>a&&(o++,c()),t}function la(e,t,n){const r=Jo(e);return e=r.length===1?r[0]:e,is((n&&n.get||pq)(r),[e],t||e)}const Tx=la("id"),oi=is(e=>e,[],"identity"),zc=is(()=>0,[],"zero"),Ip=is(()=>1,[],"one"),ca=is(()=>!0,[],"true"),kc=is(()=>!1,[],"false");function M3e(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const gq=0,DO=1,MO=2,mq=3,xq=4;function RO(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M3e,r=e||gq;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=DO&&n(t||"error","ERROR",arguments),this},warn(){return r>=MO&&n(t||"warn","WARN",arguments),this},info(){return r>=mq&&n(t||"log","INFO",arguments),this},debug(){return r>=xq&&n(t||"log","DEBUG",arguments),this}}}var ge=Array.isArray;function $e(e){return e===Object(e)}const j8=e=>e!=="__proto__";function Lp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=R3e(r.signals,i.signals);else{const a=s==="legend"?{layout:1}:s==="style"?!0:null;Pp(r,s,i[s],a)}return r},{})}function Pp(e,t,n,r){if(!j8(t))return;let i,s;if($e(n)&&!ge(n)){s=$e(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Pp(s,i,n[i]):j8(i)&&(s[i]=n[i])}else e[t]=n}function R3e(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Ft(e){return e[e.length-1]}function Jr(e){return e==null||e===""?null:+e}const vq=e=>t=>e*Math.exp(t),yq=e=>t=>Math.log(e*t),_q=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),bq=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,X2=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function XE(e,t,n,r){const i=n(e[0]),s=n(Ft(e)),a=(s-i)*t;return[r(i-a),r(s-a)]}function Eq(e,t){return XE(e,t,Jr,oi)}function wq(e,t){var n=Math.sign(e[0]);return XE(e,t,yq(n),vq(n))}function Sq(e,t,n){return XE(e,t,X2(n),X2(1/n))}function Aq(e,t,n){return XE(e,t,_q(n),bq(n))}function YE(e,t,n,r,i){const s=r(e[0]),a=r(Ft(e)),o=t!=null?r(t):(s+a)/2;return[i(o+(s-o)*n),i(o+(a-o)*n)]}function $O(e,t,n){return YE(e,t,n,Jr,oi)}function IO(e,t,n){const r=Math.sign(e[0]);return YE(e,t,n,yq(r),vq(r))}function Y2(e,t,n,r){return YE(e,t,n,X2(r),X2(1/r))}function LO(e,t,n,r){return YE(e,t,n,_q(r),bq(r))}function Tq(e){return 1+~~(new Date(e).getMonth()/3)}function kq(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ie(e){return e!=null?ge(e)?e:[e]:[]}function Cq(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function ht(e){return typeof e=="function"}const $3e="descending";function PO(e,t,n){n=n||{},t=Ie(t)||[];const r=[],i=[],s={},a=n.comparator||I3e;return Ie(e).forEach((o,l)=>{o!=null&&(r.push(t[l]===$3e?-1:1),i.push(o=ht(o)?o:la(o,null,n)),(ni(o)||[]).forEach(c=>s[c]=1))}),i.length===0?null:is(a(i,r),Object.keys(s))}const KE=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),I3e=(e,t)=>e.length===1?L3e(e[0],t[0]):P3e(e,t,e.length),L3e=(e,t)=>function(n,r){return KE(e(n),e(r))*t},P3e=(e,t,n)=>(t.push(0),function(r,i){let s,a=0,o=-1;for(;a===0&&++o<n;)s=e[o],a=KE(s(r),s(i));return a*t[o]});function li(e){return ht(e)?e:()=>e}function BO(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function ut(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function zo(e,t){let n=0,r,i,s,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=a=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Fq(e,t){const n=e.length;let r=-1,i,s,a,o,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(o=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,o=r),a<s&&(a=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(o=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,o=r),a<s&&(a=s,l=r))}return[o,l]}const B3e=Object.prototype.hasOwnProperty;function Ze(e,t){return B3e.call(e,t)}const ly={};function Bp(e){let t={},n;function r(s){return Ze(t,s)&&t[s]!==ly}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,a){return r(s)||(++i.size,t[s]===ly&&--i.empty),t[s]=a,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=ly),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let a=0;for(const o in t){const l=t[o];l!==ly&&(!n||!n(l))&&(s[o]=l,++a)}i.size=a,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function Oq(e,t,n,r,i,s){if(!n&&n!==0)return s;const a=+n;let o=e[0],l=Ft(e),c;l<o&&(c=o,o=l,l=c),c=Math.abs(t-o);const u=Math.abs(l-t);return c<u&&c<=a?r:u<=a?i:s}function Fe(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ut(r,n)}function Yd(e,t,n,r){let i=t[0],s=t[t.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ju(e){return typeof e=="boolean"}function su(e){return Object.prototype.toString.call(e)==="[object Date]"}function Nq(e){return e&&ht(e[Symbol.iterator])}function $t(e){return typeof e=="number"}function Dq(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Le(e){return typeof e=="string"}function UO(e,t,n){e&&(e=t?Ie(e).map(o=>o.replace(/\\(.)/g,"$1")):Ie(e));const r=e&&e.length,i=n&&n.get||pq,s=o=>i(t?[o]:Jo(o));let a;if(!r)a=function(){return""};else if(r===1){const o=s(e[0]);a=function(l){return""+o(l)}}else{const o=e.map(s);a=function(l){let c=""+o[0](l),u=0;for(;++u<r;)c+="|"+o[u](l);return c}}return is(a,e,"key")}function Mq(e,t){const n=e[0],r=Ft(e),i=+t;return i?i===1?r:n+i*(r-n):n}const U3e=1e4;function Rq(e){e=+e||U3e;let t,n,r;const i=()=>{t={},n={},r=0},s=(a,o)=>(++r>e&&(n=t,t={},r=1),t[a]=o);return i(),{clear:i,has:a=>Ze(t,a)||Ze(n,a),get:a=>Ze(t,a)?t[a]:Ze(n,a)?s(a,n[a]):void 0,set:(a,o)=>Ze(t,a)?t[a]=o:s(a,o)}}function $q(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const a=r||new t.constructor(i+s);let o=0,l=0,c=0;for(;o<i&&l<s;++c)a[c]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<i;++o,++c)a[c]=t[o];for(;l<s;++l,++c)a[c]=n[l];return a}function Zg(e,t){let n="";for(;--t>=0;)n+=e;return n}function Iq(e,t,n,r){const i=n||" ",s=e+"",a=t-s.length;return a<=0?s:r==="left"?Zg(i,a)+s:r==="center"?Zg(i,~~(a/2))+s+Zg(i,Math.ceil(a/2)):s+Zg(i,a)}function kx(e){return e&&Ft(e)-e[0]||0}function Ce(e){return ge(e)?"["+e.map(Ce)+"]":$e(e)||Le(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function zO(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const z3e=e=>$t(e)||su(e)?e:Date.parse(e);function HO(e,t){return t=t||z3e,e==null||e===""?null:t(e)}function VO(e){return e==null||e===""?null:e+""}function Ga(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Lq(e,t,n,r){const i=r??"",s=e+"",a=s.length,o=Math.max(0,t-i.length);return a<=t?s:n==="left"?i+s.slice(a-o):n==="center"?s.slice(0,Math.ceil(o/2))+i+s.slice(a-~~(o/2)):s.slice(0,o)+i}function $c(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function H3e(e){return e}function V3e(e){if(e==null)return H3e;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],a=e.translate[1];return function(o,l){l||(t=n=0);var c=2,u=o.length,f=new Array(u);for(f[0]=(t+=o[0])*r+s,f[1]=(n+=o[1])*i+a;c<u;)f[c]=o[c],++c;return f}}function W3e(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function j3e(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return G8(e,n)})}:G8(e,t)}function G8(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Pq(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Pq(e,t){var n=V3e(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var h=r[u<0?~u:u],d=0,p=h.length;d<p;++d)f.push(n(h[d],d));u<0&&W3e(f,p)}function s(u){return n(u)}function a(u){for(var f=[],h=0,d=u.length;h<d;++h)i(u[h],f);return f.length<2&&f.push(f[0]),f}function o(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(o)}function c(u){var f=u.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":h=s(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(s);break;case"LineString":h=a(u.arcs);break;case"MultiLineString":h=u.arcs.map(a);break;case"Polygon":h=l(u.arcs);break;case"MultiPolygon":h=u.arcs.map(l);break;default:return null}return{type:f,coordinates:h}}return c(t)}function G3e(e,t){var n={},r={},i={},s=[],a=-1;t.forEach(function(c,u){var f=e.arcs[c<0?~c:c],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=t[++a],t[a]=c,t[u]=h)}),t.forEach(function(c){var u=o(c),f=u[0],h=u[1],d,p;if(d=i[f])if(delete i[d.end],d.push(c),d.end=h,p=r[h]){delete r[p.start];var g=p===d?d:d.concat(p);r[g.start=d.start]=i[g.end=p.end]=g}else r[d.start]=i[d.end]=d;else if(d=r[h])if(delete r[d.start],d.unshift(c),d.start=f,p=i[f]){delete i[p.end];var m=p===d?d:p.concat(d);r[m.start=p.start]=i[m.end=d.end]=m}else r[d.start]=i[d.end]=d;else d=[c],r[d.start=f]=i[d.end=h]=d});function o(c){var u=e.arcs[c<0?~c:c],f=u[0],h;return e.transform?(h=[0,0],u.forEach(function(d){h[0]+=d[0],h[1]+=d[1]})):h=u[u.length-1],c<0?[h,f]:[f,h]}function l(c,u){for(var f in c){var h=c[f];delete u[h.start],delete h.start,delete h.end,h.forEach(function(d){n[d<0?~d:d]=1}),s.push(h)}}return l(i,r),l(r,i),t.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}function q3e(e){return Pq(e,X3e.apply(this,arguments))}function X3e(e,t,n){var r,i,s;if(arguments.length>1)r=Y3e(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:G3e(e,r)}}function Y3e(e,t,n){var r=[],i=[],s;function a(f){var h=f<0?~f:f;(i[h]||(i[h]=[])).push({i:f,g:s})}function o(f){f.forEach(a)}function l(f){f.forEach(o)}function c(f){f.forEach(l)}function u(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":o(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":c(f.arcs);break}}return u(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Fr="year",Zi="quarter",ri="month",Qn="week",Qi="date",Xr="day",Ho="dayofyear",Os="hours",Ns="minutes",ua="seconds",qa="milliseconds",WO=[Fr,Zi,ri,Qn,Qi,Xr,Ho,Os,Ns,ua,qa],JA=WO.reduce((e,t,n)=>(e[t]=1+n,e),{});function jO(e){const t=Ie(e).slice(),n={};return t.length||he("Missing time unit."),t.forEach(i=>{Ze(JA,i)?n[i]=1:he(`Invalid time unit: ${i}.`)}),(n[Qn]||n[Xr]?1:0)+(n[Zi]||n[ri]||n[Qi]?1:0)+(n[Ho]?1:0)>1&&he(`Incompatible time units: ${e}`),t.sort((i,s)=>JA[i]-JA[s]),t}const K3e={[Fr]:"%Y ",[Zi]:"Q%q ",[ri]:"%b ",[Qi]:"%d ",[Qn]:"W%U ",[Xr]:"%a ",[Ho]:"%j ",[Os]:"%H:00",[Ns]:"00:%M",[ua]:":%S",[qa]:".%L",[`${Fr}-${ri}`]:"%Y-%m ",[`${Fr}-${ri}-${Qi}`]:"%Y-%m-%d ",[`${Os}-${Ns}`]:"%H:%M"};function Bq(e,t){const n=ut({},K3e,t),r=jO(e),i=r.length;let s="",a=0,o,l;for(a=0;a<i;)for(o=r.length;o>a;--o)if(l=r.slice(a,o).join("-"),n[l]!=null){s+=n[l],a=o;break}return s.trim()}const Df=new Date;function GO(e){return Df.setFullYear(e),Df.setMonth(0),Df.setDate(1),Df.setHours(0,0,0,0),Df}function Uq(e){return Hq(new Date(e))}function zq(e){return OC(new Date(e))}function Hq(e){return Vl.count(GO(e.getFullYear())-1,e)}function OC(e){return Dp.count(GO(e.getFullYear())-1,e)}function NC(e){return GO(e).getDay()}function J3e(e,t,n,r,i,s,a){if(0<=e&&e<100){const o=new Date(-1,t,n,r,i,s,a);return o.setFullYear(e),o}return new Date(e,t,n,r,i,s,a)}function Vq(e){return jq(new Date(e))}function Wq(e){return DC(new Date(e))}function jq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ru.count(t-1,e)}function DC(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Mp.count(t-1,e)}function MC(e){return Df.setTime(Date.UTC(e,0,1)),Df.getUTCDay()}function Z3e(e,t,n,r,i,s,a){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,r,i,s,a));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,r,i,s,a))}function Gq(e,t,n,r,i){const s=t||1,a=Ft(e),o=(x,v,y)=>(y=y||x,Q3e(n[y],r[y],x===a&&s,v)),l=new Date,c=Ga(e),u=c[Fr]?o(Fr):li(2012),f=c[ri]?o(ri):c[Zi]?o(Zi):zc,h=c[Qn]&&c[Xr]?o(Xr,1,Qn+Xr):c[Qn]?o(Qn,1):c[Xr]?o(Xr,1):c[Qi]?o(Qi,1):c[Ho]?o(Ho,1):Ip,d=c[Os]?o(Os):zc,p=c[Ns]?o(Ns):zc,g=c[ua]?o(ua):zc,m=c[qa]?o(qa):zc;return function(x){l.setTime(+x);const v=u(l);return i(v,f(l),h(l,v),d(l),p(l),g(l),m(l))}}function Q3e(e,t,n,r){const i=n<=1?e:r?(s,a)=>r+n*Math.floor((e(s,a)-r)/n):(s,a)=>n*Math.floor(e(s,a)/n);return t?(s,a)=>t(i(s,a),a):i}function J0(e,t,n){return t+e*7-(n+6)%7}const e4e={[Fr]:e=>e.getFullYear(),[Zi]:e=>Math.floor(e.getMonth()/3),[ri]:e=>e.getMonth(),[Qi]:e=>e.getDate(),[Os]:e=>e.getHours(),[Ns]:e=>e.getMinutes(),[ua]:e=>e.getSeconds(),[qa]:e=>e.getMilliseconds(),[Ho]:e=>Hq(e),[Qn]:e=>OC(e),[Qn+Xr]:(e,t)=>J0(OC(e),e.getDay(),NC(t)),[Xr]:(e,t)=>J0(1,e.getDay(),NC(t))},t4e={[Zi]:e=>3*e,[Qn]:(e,t)=>J0(e,0,NC(t))};function qq(e,t){return Gq(e,t||1,e4e,t4e,J3e)}const n4e={[Fr]:e=>e.getUTCFullYear(),[Zi]:e=>Math.floor(e.getUTCMonth()/3),[ri]:e=>e.getUTCMonth(),[Qi]:e=>e.getUTCDate(),[Os]:e=>e.getUTCHours(),[Ns]:e=>e.getUTCMinutes(),[ua]:e=>e.getUTCSeconds(),[qa]:e=>e.getUTCMilliseconds(),[Ho]:e=>jq(e),[Qn]:e=>DC(e),[Xr]:(e,t)=>J0(1,e.getUTCDay(),MC(t)),[Qn+Xr]:(e,t)=>J0(DC(e),e.getUTCDay(),MC(t))},r4e={[Zi]:e=>3*e,[Qn]:(e,t)=>J0(e,0,MC(t))};function Xq(e,t){return Gq(e,t||1,n4e,r4e,Z3e)}const i4e={[Fr]:Bo,[Zi]:x1.every(3),[ri]:x1,[Qn]:Dp,[Qi]:Vl,[Xr]:Vl,[Ho]:Vl,[Os]:NE,[Ns]:FE,[ua]:Cl,[qa]:j0},s4e={[Fr]:Uo,[Zi]:v1.every(3),[ri]:v1,[Qn]:Mp,[Qi]:ru,[Xr]:ru,[Ho]:ru,[Os]:DE,[Ns]:OE,[ua]:Cl,[qa]:j0};function Up(e){return i4e[e]}function zp(e){return s4e[e]}function Yq(e,t,n){return e?e.offset(t,n):void 0}function Kq(e,t,n){return Yq(Up(e),t,n)}function Jq(e,t,n){return Yq(zp(e),t,n)}function Zq(e,t,n,r){return e?e.range(t,n,r):void 0}function Qq(e,t,n,r){return Zq(Up(e),t,n,r)}function eX(e,t,n,r){return Zq(zp(e),t,n,r)}const Qg=1e3,em=Qg*60,tm=em*60,JE=tm*24,a4e=JE*7,q8=JE*30,RC=JE*365,tX=[Fr,ri,Qi,Os,Ns,ua,qa],nm=tX.slice(0,-1),rm=nm.slice(0,-1),im=rm.slice(0,-1),o4e=im.slice(0,-1),l4e=[Fr,Qn],X8=[Fr,ri],nX=[Fr],yg=[[nm,1,Qg],[nm,5,5*Qg],[nm,15,15*Qg],[nm,30,30*Qg],[rm,1,em],[rm,5,5*em],[rm,15,15*em],[rm,30,30*em],[im,1,tm],[im,3,3*tm],[im,6,6*tm],[im,12,12*tm],[o4e,1,JE],[l4e,1,a4e],[X8,1,q8],[X8,3,3*q8],[nX,1,RC]];function rX(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(kx(t))/n;let i=Cp(o=>o[2]).right(yg,r),s,a;return i===yg.length?(s=nX,a=yu(t[0]/RC,t[1]/RC,n)):i?(i=yg[r/yg[i-1][2]<yg[i][2]/r?i-1:i],s=i[0],a=i[1]):(s=tX,a=Math.max(yu(t[0],t[1],n),1)),{units:s,step:a}}function sm(e){const t={};return n=>t[n]||(t[n]=e(n))}function c4e(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=u4e(r,i);const a=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+a}}function u4e(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function iX(e){const t=sm(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=_h(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return c4e(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,a){a=_h(a??",f");const o=yu(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=qV(o,l))||(a.precision=c),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=XV(o,l))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=GV(o))||(a.precision=c-(a.type==="%")*2);break}}return t(a)}}}let $C;sX();function sX(){return $C=iX({format:wE,formatPrefix:R4})}function aX(e){return iX(jV(e))}function K2(e){return arguments.length?$C=aX(e):$C}function Y8(e,t,n){n=n||{},$e(n)||he(`Invalid time multi-format specifier: ${n}`);const r=t(ua),i=t(Ns),s=t(Os),a=t(Qi),o=t(Qn),l=t(ri),c=t(Zi),u=t(Fr),f=e(n[qa]||".%L"),h=e(n[ua]||":%S"),d=e(n[Ns]||"%I:%M"),p=e(n[Os]||"%I %p"),g=e(n[Qi]||n[Xr]||"%a %d"),m=e(n[Qn]||"%b %d"),x=e(n[ri]||"%B"),v=e(n[Zi]||"%B"),y=e(n[Fr]||"%Y");return _=>(r(_)<_?f:i(_)<_?h:s(_)<_?d:a(_)<_?p:l(_)<_?o(_)<_?g:m:u(_)<_?c(_)<_?x:v:y)(_)}function oX(e){const t=sm(e.format),n=sm(e.utcFormat);return{timeFormat:r=>Le(r)?t(r):Y8(t,Up,r),utcFormat:r=>Le(r)?n(r):Y8(n,zp,r),timeParse:sm(e.parse),utcParse:sm(e.utcParse)}}let IC;lX();function lX(){return IC=oX({format:Y4,parse:oj,utcFormat:K4,utcParse:lj})}function cX(e){return oX(nj(e))}function C1(e){return arguments.length?IC=cX(e):IC}const LC=(e,t)=>ut({},e,t);function uX(e,t){const n=e?aX(e):K2(),r=t?cX(t):C1();return LC(n,r)}function qO(e,t){const n=arguments.length;return n&&n!==2&&he("defaultLocale expects either zero or two arguments."),n?LC(K2(e),C1(t)):LC(K2(),C1())}function f4e(){return sX(),lX(),qO()}const h4e=/^(data:|([A-Za-z]+:)?\/\/)/,d4e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,p4e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,K8="file://";function g4e(e,t){return n=>({options:n||{},sanitize:x4e,load:m4e,fileAccess:!!t,file:v4e(t),http:_4e(e)})}async function m4e(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function x4e(e,t){t=ut({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,a;const o=d4e.test(e.replace(p4e,""));(e==null||typeof e!="string"||!o)&&he("Sanitize failure, invalid URI: "+Ce(e));const l=h4e.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),s=(i=e.startsWith(K8))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(K8.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function v4e(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):y4e}async function y4e(){he("No file system access.")}function _4e(e){return e?async function(t,n){const r=ut({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?ht(s[i])?s[i]():s.text():he(s.status+""+s.statusText)}:b4e}async function b4e(){he("No HTTP fetch method available.")}const E4e=e=>e!=null&&e===e,w4e=e=>e==="true"||e==="false"||e===!0||e===!1,S4e=e=>!Number.isNaN(Date.parse(e)),fX=e=>!Number.isNaN(+e)&&!(e instanceof Date),A4e=e=>fX(e)&&Number.isInteger(+e),PC={boolean:zO,integer:Jr,number:Jr,date:HO,string:VO,unknown:oi},cy=[w4e,A4e,fX,S4e],T4e=["boolean","integer","number","date"];function hX(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=cy.length,i=cy.map((s,a)=>a+1);for(let s=0,a=0,o,l;s<n;++s)for(l=t?e[s][t]:e[s],o=0;o<r;++o)if(i[o]&&E4e(l)&&!cy[o](l)&&(i[o]=0,++a,a===cy.length))return"string";return T4e[i.reduce((s,a)=>s===0?a:s,0)-1]}function dX(e,t){return t.reduce((n,r)=>(n[r]=hX(e,r),n),{})}function J8(e){const t=function(n,r){const i={delimiter:e};return XO(n,r?ut(r,i):i)};return t.responseType="text",t}function XO(e,t){return t.header&&(e=t.header.map(Ce).join(t.delimiter)+`
`+e),zV(t.delimiter).parse(e+"")}XO.responseType="text";function k4e(e){return typeof Buffer=="function"&&ht(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function YO(e,t){const n=t&&t.property?la(t.property):oi;return $e(e)&&!k4e(e)?C4e(n(e),t):n(JSON.parse(e))}YO.responseType="json";function C4e(e,t){return!ge(e)&&Nq(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const F4e={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function pX(e,t){let n,r,i,s;return e=YO(e,t),t&&t.feature?(n=j3e,i=t.feature):t&&t.mesh?(n=q3e,i=t.mesh,s=F4e[t.filter]):he("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):he("Invalid TopoJSON object: "+i),r&&r.features||[r]}pX.responseType="json";const e_={dsv:XO,csv:J8(","),tsv:J8("	"),json:YO,topojson:pX};function KO(e,t){return arguments.length>1?(e_[e]=t,this):Ze(e_,e)?e_[e]:null}function gX(e){const t=KO(e);return t&&t.responseType||"text"}function mX(e,t,n,r){t=t||{};const i=KO(t.type||"json");return i||he("Unknown data format type: "+t.type),e=i(e,t),t.parse&&O4e(e,t.parse,n,r),Ze(e,"columns")&&delete e.columns,e}function O4e(e,t,n,r){if(!e.length)return;const i=C1();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),a,o,l,c,u,f;t==="auto"&&(t=dX(e,s)),s=Object.keys(t);const h=s.map(d=>{const p=t[d];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!PC[p])throw Error("Illegal format pattern: "+d+":"+p);return PC[p]});for(l=0,u=e.length,f=s.length;l<u;++l)for(a=e[l],c=0;c<f;++c)o=s[c],a[o]=h[c](a[o])}const ZE=g4e(typeof fetch<"u"&&fetch,null);function QE(e){const t=e||oi,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}async function t_(e,t){try{await t(e)}catch(n){e.error(n)}}const xX=Symbol("vega_id");let N4e=1;function ew(e){return!!(e&&Ke(e))}function Ke(e){return e[xX]}function vX(e,t){return e[xX]=t,e}function jt(e){const t=e===Object(e)?e:{data:e};return Ke(t)?t:vX(t,N4e++)}function JO(e){return tw(e,jt({}))}function tw(e,t){for(const n in e)t[n]=e[n];return t}function yX(e,t){return vX(t,Ke(e))}function nd(e,t){return e?t?(n,r)=>e(n,r)||Ke(t(n))-Ke(t(r)):(n,r)=>e(n,r)||Ke(n)-Ke(r):null}function _X(e){return e&&e.constructor===rd}function rd(){const e=[],t=[],n=[],r=[],i=[];let s=null,a=!1;return{constructor:rd,insert(o){const l=Ie(o),c=l.length;for(let u=0;u<c;++u)e.push(l[u]);return this},remove(o){const l=ht(o)?r:t,c=Ie(o),u=c.length;for(let f=0;f<u;++f)l.push(c[f]);return this},modify(o,l,c){const u={field:l,value:li(c)};return ht(o)?(u.filter=o,i.push(u)):(u.tuple=o,n.push(u)),this},encode(o,l){return ht(o)?i.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return s=o,this},reflow(){return a=!0,this},pulse(o,l){const c={},u={};let f,h,d,p,g,m;for(f=0,h=l.length;f<h;++f)c[Ke(l[f])]=1;for(f=0,h=t.length;f<h;++f)g=t[f],c[Ke(g)]=-1;for(f=0,h=r.length;f<h;++f)p=r[f],l.forEach(v=>{p(v)&&(c[Ke(v)]=-1)});for(f=0,h=e.length;f<h;++f)g=e[f],m=Ke(g),c[m]?c[m]=1:o.add.push(jt(e[f]));for(f=0,h=l.length;f<h;++f)g=l[f],c[Ke(g)]<0&&o.rem.push(g);function x(v,y,_){_?v[y]=_(v):o.encode=y,a||(u[Ke(v)]=v)}for(f=0,h=n.length;f<h;++f)d=n[f],g=d.tuple,p=d.field,m=c[Ke(g)],m>0&&(x(g,p,d.value),o.modifies(p));for(f=0,h=i.length;f<h;++f)d=i[f],p=d.filter,l.forEach(v=>{p(v)&&c[Ke(v)]>0&&x(v,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?l.filter(v=>c[Ke(v)]>0):l.slice();else for(m in u)o.mod.push(u[m]);return(s||s==null&&(t.length||r.length))&&o.clean(!0),o}}}const n_="_:mod:_";function nw(){Object.defineProperty(this,n_,{writable:!0,value:{}})}nw.prototype={set(e,t,n,r){const i=this,s=i[e],a=i[n_];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,a[t+":"+e]=-1,a[e]=-1):(s!==n||r)&&(i[e]=n,a[e]=ge(n)?1+n.length:-1),i},modified(e,t){const n=this[n_];if(arguments.length){if(ge(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[n_]={},this}};let D4e=0;const M4e="pulse",R4e=new nw,$4e=1,I4e=2;function rn(e,t,n,r){this.id=++D4e,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Z8(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}rn.prototype={targets(){return this._targets||(this._targets=QE(Tx))},set(e){return this.value!==e?(this.value=e,1):0},skip:Z8($4e),modified:Z8(I4e),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new nw,i=this._argops=this._argops||[],s=[];let a,o,l,c;const u=(f,h,d)=>{d instanceof rn?(d!==this&&(t&&d.targets().add(this),s.push(d)),i.push({op:d,name:f,index:h})):r.set(f,h,d)};for(a in e)if(o=e[a],a===M4e)Ie(o).forEach(f=>{f instanceof rn?f!==this&&(f.targets().add(this),s.push(f)):he("Pulse parameters must be operator instances.")}),this.source=o;else if(ge(o))for(r.set(a,-1,Array(l=o.length)),c=0;c<l;++c)u(a,c,o[c]);else u(a,-1,o);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||R4e,n=this._argops;let r,i,s,a;if(n){const o=n.length;for(i=0;i<o;++i)r=n[i],s=r.op,a=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,a);if(n.initonly){for(i=0;i<o;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function L4e(e,t,n,r){let i=1,s;return e instanceof rn?s=e:e&&e.prototype instanceof rn?s=new e:ht(e)?s=new rn(null,e):(i=0,s=new rn(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function P4e(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let B4e=0;function rw(e,t,n){this.id=++B4e,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Cc(e,t,n){return new rw(e,t,n)}rw.prototype={_filter:ca,_apply:oi,targets(){return this._targets||(this._targets=QE(Tx))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Cc(e);return this.targets().add(t),t},apply(e){const t=Cc(null,e);return this.targets().add(t),t},merge(){const e=Cc();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Cc();return this.targets().add(Cc(null,null,BO(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Cc(null,null,()=>n=!0)),t.targets().add(Cc(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ca,this._targets=null}};function U4e(e,t,n,r){const i=this,s=Cc(n,r),a=function(c){c.dataflow=i;try{s.receive(c)}catch(u){i.error(u)}finally{i.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=Ie(e);const l=o.length;for(let c=0;c<l;++c)o[c].addEventListener(t,a);return s}function z4e(e,t){const n=this.locale();return mX(e,t,n.timeParse,n.utcParse)}function H4e(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function V4e(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:gX(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function W4e(e,t,n){const r=this,i=r._pending||j4e(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(ca).insert(s.data||[])),i.done(),s}function j4e(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const G4e={skip:!0};function q4e(e,t,n,r,i){return(e instanceof rn?Y4e:X4e)(this,e,t,n,r,i),this}function X4e(e,t,n,r,i,s){const a=ut({},s,G4e);let o,l;ht(n)||(n=li(n)),r===void 0?o=c=>e.touch(n(c)):ht(r)?(l=new rn(null,r,i,!1),o=c=>{l.evaluate(c);const u=n(c),f=l.value;_X(f)?e.pulse(u,f,s):e.update(u,f,a)}):o=c=>e.update(n(c),r,a),t.apply(o)}function Y4e(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const a=s||{},o=new rn(null,K4e(n,r),i,!1);o.modified(a.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function K4e(e,t){return t=ht(t)?t:li(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function J4e(e){e.rank=++this._rank}function Z4e(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&he("Cycle detected in dataflow graph.")}const J2={},yo=1,Ic=2,vl=4,Q4e=yo|Ic,Q8=yo|vl,Ad=yo|Ic|vl,eL=8,_g=16,tL=32,nL=64;function au(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function ZA(e,t){const n=[];return $c(e,t,r=>n.push(r)),n}function rL(e,t){const n={};return e.visit(t,r=>{n[Ke(r)]=1}),r=>n[Ke(r)]?null:r}function uy(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}au.prototype={StopPropagation:J2,ADD:yo,REM:Ic,MOD:vl,ADD_REM:Q4e,ADD_MOD:Q8,ALL:Ad,REFLOW:eL,SOURCE:_g,NO_SOURCE:tL,NO_FIELDS:nL,fork(e){return new au(this.dataflow).init(this,e)},clone(){const e=this.fork(Ad);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Ad|_g)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new au(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&nL)&&(n.fields=e.fields),t&yo?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ic?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&vl?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&tL?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Ad;return t&yo&&this.add.length||t&Ic&&this.rem.length||t&vl&&this.mod.length},reflow(e){if(e)return this.fork(Ad).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(vl,rL(this,yo))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ge(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ge(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&yo&&(n.addF=uy(n.addF,t)),e&Ic&&(n.remF=uy(n.remF,t)),e&vl&&(n.modF=uy(n.modF,t)),e&_g&&(n.srcF=uy(n.srcF,t)),n},materialize(e){e=e||Ad;const t=this;return e&yo&&t.addF&&(t.add=ZA(t.add,t.addF),t.addF=null),e&Ic&&t.remF&&(t.rem=ZA(t.rem,t.remF),t.remF=null),e&vl&&t.modF&&(t.mod=ZA(t.mod,t.modF),t.modF=null),e&_g&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&_g)return $c(n.source,n.srcF,r),n;e&yo&&$c(n.add,n.addF,r),e&Ic&&$c(n.rem,n.remF,r),e&vl&&$c(n.mod,n.modF,r);const i=n.source;if(e&eL&&i){const s=n.add.length+n.mod.length;s===i.length||(s?$c(i,rL(n,Q8),r):$c(i,n.srcF,r))}return n}};function ZO(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const o=i.fields||(i.fields={});for(const l in a.fields)o[l]=1}a.changed(i.ADD)&&(s|=i.ADD),a.changed(i.REM)&&(s|=i.REM),a.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Fe(ZO,au,{fork(e){const t=new au(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ge(e)?e.some(r=>n[r]):n[e]:0},filter(){he("MultiPulse does not support filtering.")},materialize(){he("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function eOe(e,t,n){const r=this,i=[];if(r._pulse)return bX(r);if(r._pending&&await r._pending,t&&await t_(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new au(r,s,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=QE(Tx);let a=0,o,l,c;try{for(;r._heap.size()>0;){if(o=r._heap.pop(),o.rank!==o.qrank){r._enqueue(o,!0);continue}l=o.run(r._getPulse(o,e)),l.then?l=await l:l.async&&(i.push(l.async),l=J2),l!==J2&&o._targets&&o._targets.forEach(u=>r._enqueue(u)),++a}}catch(u){r._heap.clear(),c=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${a} operators`),c&&(r._postrun=[],r.error(c)),r._postrun.length){const u=r._postrun.sort((f,h)=>h.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)await t_(r,u[f].callback)}return n&&await t_(r,n),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(h){r.error(h)}})})),r}async function tOe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function nOe(e,t,n){return this._pulse?bX(this):(this.evaluate(e,t,n),this)}function rOe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function bX(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function iOe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function sOe(e,t){const n=e.source,r=this._clock;return n&&ge(n)?new ZO(this,r,n.map(i=>i.pulse),t):this._input[e.id]||aOe(this._pulse,n&&n.pulse)}function aOe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==J2&&(e.source=t.source),e)}const QO={skip:!1,force:!1};function oOe(e,t){const n=t||QO;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function lOe(e,t,n){const r=n||QO;return(e.set(t)||r.force)&&this.touch(e,r),this}function cOe(e,t,n){this.touch(e,n||QO);const r=new au(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function uOe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),EX(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,fOe(t,0,e)):r=n,r}}}function EX(e,t,n,r){let i,s;const a=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(a,i)<0){e[n]=i,n=s;continue}break}return e[n]=a}function fOe(e,t,n){const r=t,i=e.length,s=e[t];let a=(t<<1)+1,o;for(;a<i;)o=a+1,o<i&&n(e[a],e[o])>=0&&(a=o),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=s,EX(e,r,t,n)}function p0(){this.logger(RO()),this.logLevel(DO),this._clock=0,this._rank=0,this._locale=qO();try{this._loader=ZE()}catch{}this._touched=QE(Tx),this._input={},this._pulse=null,this._heap=uOe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function bg(e){return function(){return this._log[e].apply(this,arguments)}}p0.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:bg("error"),warn:bg("warn"),info:bg("info"),debug:bg("debug"),logLevel:bg("level"),cleanThreshold:1e4,add:L4e,connect:P4e,rank:J4e,rerank:Z4e,pulse:cOe,touch:oOe,update:lOe,changeset:rd,ingest:H4e,parse:z4e,preload:W4e,request:V4e,events:U4e,on:q4e,evaluate:eOe,run:nOe,runAsync:tOe,runAfter:rOe,_enqueue:iOe,_getPulse:sOe};function le(e,t){rn.call(this,e,null,t)}Fe(le,rn,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Z0={};function wX(e){const t=SX(e);return t&&t.Definition||null}function SX(e){return e=e&&e.toLowerCase(),Ze(Z0,e)?Z0[e]:null}function*AX(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function eN(e,t,n){const r=Float64Array.from(AX(e,n));return r.sort(zl),t.map(i=>WH(r,i))}function tN(e,t){return eN(e,[.25,.5,.75],t)}function nN(e,t){const n=e.length,r=_de(e,t),i=tN(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function TX(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],a=e.extent[1],o,l,c,u,f,h;const d=e.span||a-s||Math.abs(s)||1;if(e.step)o=e.step;else if(e.steps){for(u=d/t,f=0,h=e.steps.length;f<h&&e.steps[f]<u;++f);o=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),c=e.minstep||0,o=Math.max(c,Math.pow(n,Math.round(Math.log(d)/r)-l));Math.ceil(d/o)>t;)o*=n;for(f=0,h=i.length;f<h;++f)u=o/i[f],u>=c&&d/u<=t&&(o=u)}u=Math.log(o);const p=u>=0?0:~~(-u/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(u=Math.floor(s/o+g)*o,s=s<u?u-o:u,a=Math.ceil(a/o)*o),{start:s,stop:a===s?s+o:a,step:o}}var fa=Math.random;function hOe(e){fa=e}function kX(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(AX(e,r)),s=i.length,a=t;let o,l,c,u;for(c=0,u=Array(a);c<a;++c){for(o=0,l=0;l<s;++l)o+=i[~~(fa()*s)];u[c]=o/s}return u.sort(zl),[$k(u,n/2),$k(u,1-n/2)]}function CX(e,t,n,r){r=r||(h=>h);const i=e.length,s=new Float64Array(i);let a=0,o=1,l=r(e[0]),c=l,u=l+t,f;for(;o<i;++o){if(f=r(e[o]),f>=u){for(c=(l+c)/2;a<o;++a)s[a]=c;u=f+t,l=f}c=f}for(c=(l+c)/2;a<o;++a)s[a]=c;return n?dOe(s,t+t/4):s}function dOe(e,t){const n=e.length;let r=0,i=1,s,a;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(a=i+(r+s-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=s}return e}function pOe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function gOe(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(a){return arguments.length?(n=a||0,i=r-n,s):n},max(a){return arguments.length?(r=a||0,i=r-n,s):r},sample(){return n+Math.floor(i*fa())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const o=Math.floor(a);return o<n?0:o>=r?1:(o-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(e).max(t)}const FX=Math.sqrt(2*Math.PI),mOe=Math.SQRT2;let Eg=NaN;function iw(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(Eg===Eg)n=Eg,Eg=NaN;else{do n=fa()*2-1,r=fa()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,Eg=r*s}return e+n*t}function rN(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*FX)}function sw(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const a=Math.exp(-i*i/2);let o;i<7.07106781186547?(o=.0352624965998911*i+.700383064443688,o=o*i+6.37396220353165,o=o*i+33.912866078383,o=o*i+112.079291497871,o=o*i+221.213596169931,o=o*i+220.206867912376,s=a*o,o=.0883883476483184*i+1.75566716318264,o=o*i+16.064177579207,o=o*i+86.7807322029461,o=o*i+296.564248779674,o=o*i+637.333633378831,o=o*i+793.826512519948,o=o*i+440.413735824752,s=s/o):(o=i+.65,o=i+4/o,o=i+3/o,o=i+2/o,o=i+1/o,s=a/o/2.506628274631)}return r>0?1-s:s}function aw(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*mOe*xOe(2*e-1)}function xOe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function iN(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>iw(n,r),pdf:s=>rN(s,n,r),cdf:s=>sw(s,n,r),icdf:s=>aw(s,n,r)};return i.mean(e).stdev(t)}function sN(e,t){const n=iN();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=nN(e)),i):t},sample(){return e[~~(fa()*r)]+t*n.sample()},pdf(s){let a=0,o=0;for(;o<r;++o)a+=n.pdf((s-e[o])/t);return a/t/r},cdf(s){let a=0,o=0;for(;o<r;++o)a+=n.cdf((s-e[o])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function aN(e,t){return e=e||0,t=t??1,Math.exp(e+iw()*t)}function oN(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*FX*e)}function lN(e,t,n){return sw(Math.log(e),t,n)}function cN(e,t,n){return Math.exp(aw(e,t,n))}function OX(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>aN(n,r),pdf:s=>oN(s,n,r),cdf:s=>lN(s,n,r),icdf:s=>cN(s,n,r)};return i.mean(e).stdev(t)}function NX(e,t){let n=0,r;function i(a){const o=[];let l=0,c;for(c=0;c<n;++c)l+=o[c]=a[c]==null?1:+a[c];for(c=0;c<n;++c)o[c]/=l;return o}const s={weights(a){return arguments.length?(r=i(t=a||[]),s):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),s.weights(t)):e},sample(){const a=fa();let o=e[n-1],l=r[0],c=0;for(;c<n-1;l+=r[++c])if(a<l){o=e[c];break}return o.sample()},pdf(a){let o=0,l=0;for(;l<n;++l)o+=r[l]*e[l].pdf(a);return o},cdf(a){let o=0,l=0;for(;l<n;++l)o+=r[l]*e[l].cdf(a);return o},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function uN(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*fa()}function fN(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function hN(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function dN(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function DX(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>uN(n,r),pdf:s=>fN(s,n,r),cdf:s=>hN(s,n,r),icdf:s=>dN(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function pN(e,t,n){let r=0,i=0;for(const s of e){const a=n(s);t(s)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Cx(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function ow(e,t,n,r){e=e.filter(d=>{let p=t(d),g=n(d);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((d,p)=>t(d)-t(p));const i=e.length,s=new Float64Array(i),a=new Float64Array(i);let o=0,l=0,c=0,u,f,h;for(h of e)s[o]=u=+t(h),a[o]=f=+n(h),++o,l+=(u-l)/o,c+=(f-c)/o;for(o=0;o<i;++o)s[o]-=l,a[o]-=c;return[s,a,l,c]}function Fx(e,t,n,r){let i=-1,s,a;for(const o of e)s=t(o),a=n(o),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&r(s,a,++i)}function Hp(e,t,n,r,i){let s=0,a=0;return Fx(e,t,n,(o,l)=>{const c=l-i(o),u=l-r;s+=c*c,a+=u*u}),1-s/a}function gN(e,t,n){let r=0,i=0,s=0,a=0,o=0;Fx(e,t,n,(u,f)=>{++o,r+=(u-r)/o,i+=(f-i)/o,s+=(u*f-s)/o,a+=(u*u-a)/o});const l=Cx(r,i,s,a),c=u=>l[0]+l[1]*u;return{coef:l,predict:c,rSquared:Hp(e,t,n,i,c)}}function MX(e,t,n){let r=0,i=0,s=0,a=0,o=0;Fx(e,t,n,(u,f)=>{++o,u=Math.log(u),r+=(u-r)/o,i+=(f-i)/o,s+=(u*f-s)/o,a+=(u*u-a)/o});const l=Cx(r,i,s,a),c=u=>l[0]+l[1]*Math.log(u);return{coef:l,predict:c,rSquared:Hp(e,t,n,i,c)}}function RX(e,t,n){const[r,i,s,a]=ow(e,t,n);let o=0,l=0,c=0,u=0,f=0,h,d,p;Fx(e,t,n,(v,y)=>{h=r[f++],d=Math.log(y),p=h*y,o+=(y*d-o)/f,l+=(p-l)/f,c+=(p*d-c)/f,u+=(h*p-u)/f});const[g,m]=Cx(l/a,o/a,c/a,u/a),x=v=>Math.exp(g+m*(v-s));return{coef:[Math.exp(g-m*s),m],predict:x,rSquared:Hp(e,t,n,a,x)}}function $X(e,t,n){let r=0,i=0,s=0,a=0,o=0,l=0;Fx(e,t,n,(f,h)=>{const d=Math.log(f),p=Math.log(h);++l,r+=(d-r)/l,i+=(p-i)/l,s+=(d*p-s)/l,a+=(d*d-a)/l,o+=(h-o)/l});const c=Cx(r,i,s,a),u=f=>c[0]*Math.pow(f,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:u,rSquared:Hp(e,t,n,o,u)}}function mN(e,t,n){const[r,i,s,a]=ow(e,t,n),o=r.length;let l=0,c=0,u=0,f=0,h=0,d,p,g,m;for(d=0;d<o;)p=r[d],g=i[d++],m=p*p,l+=(m-l)/d,c+=(m*p-c)/d,u+=(m*m-u)/d,f+=(p*g-f)/d,h+=(m*g-h)/d;const x=u-l*l,v=l*x-c*c,y=(h*l-f*c)/v,_=(f*x-h*c)/v,b=-y*l,w=E=>(E=E-s,y*E*E+_*E+b+a);return{coef:[b-_*s+y*s*s+a,_-2*y*s,y],predict:w,rSquared:Hp(e,t,n,a,w)}}function IX(e,t,n,r){if(r===0)return pN(e,t,n);if(r===1)return gN(e,t,n);if(r===2)return mN(e,t,n);const[i,s,a,o]=ow(e,t,n),l=i.length,c=[],u=[],f=r+1;let h,d,p,g,m;for(h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],h)*s[p];for(c.push(g),m=new Float64Array(f),d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],h+d);m[d]=g}u.push(m)}u.push(c);const x=yOe(u),v=y=>{y-=a;let _=o+x[0]+x[1]*y+x[2]*y*y;for(h=3;h<f;++h)_+=x[h]*Math.pow(y,h);return _};return{coef:vOe(f,x,-a,o),predict:v,rSquared:Hp(e,t,n,o,v)}}function vOe(e,t,n,r){const i=Array(e);let s,a,o,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(o=t[s],l=1,i[s]+=o,a=1;a<=s;++a)l*=(s+1-a)/a,i[s-a]+=o*Math.pow(n,a)*l;return i[0]+=r,i}function yOe(e){const t=e.length-1,n=[];let r,i,s,a,o;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(s=r;s<t+1;++s)o=e[s][r],e[s][r]=e[s][a],e[s][a]=o;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(o=0,s=i+1;s<t;++s)o+=e[s][i]*n[s];n[i]=(e[t][i]-o)/e[i][i]}return n}const iL=2,sL=1e-12;function LX(e,t,n,r){const[i,s,a,o]=ow(e,t,n,!0),l=i.length,c=Math.max(2,~~(r*l)),u=new Float64Array(l),f=new Float64Array(l),h=new Float64Array(l).fill(1);for(let d=-1;++d<=iL;){const p=[0,c-1];for(let m=0;m<l;++m){const x=i[m],v=p[0],y=p[1],_=x-i[v]>i[y]-x?v:y;let b=0,w=0,E=0,A=0,S=0;const k=1/Math.abs(i[_]-x||1);for(let C=v;C<=y;++C){const D=i[C],N=s[C],R=_Oe(Math.abs(x-D)*k)*h[C],L=D*R;b+=R,w+=L,E+=N*R,A+=N*L,S+=D*L}const[T,O]=Cx(w/b,E/b,A/b,S/b);u[m]=T+O*x,f[m]=Math.abs(s[m]-u[m]),bOe(i,m+1,p)}if(d===iL)break;const g=jH(f);if(Math.abs(g)<sL)break;for(let m=0,x,v;m<l;++m)x=f[m]/(6*g),h[m]=x>=1?sL:(v=1-x*x)*v}return EOe(i,u,a,o)}function _Oe(e){return(e=1-e*e*e)*e*e}function bOe(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function EOe(e,t,n,r){const i=e.length,s=[];let a=0,o=0,l=[],c;for(;a<i;++a)c=e[a]+n,l[0]===c?l[1]+=(t[a]-l[1])/++o:(o=0,l[1]+=r,l=[c,t[a]],s.push(l));return l[1]+=r,s}const wOe=.5*Math.PI/180;function lw(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],s=t[0],a=t[1],o=a-s,l=o/r,c=[i(s)],u=[];if(n===r){for(let g=1;g<r;++g)c.push(i(s+g/n*o));return c.push(i(a)),c}else{u.push(i(a));for(let g=n;--g>0;)u.push(i(s+g/n*o))}let f=c[0],h=u[u.length-1];const d=1/o,p=SOe(f[1],u);for(;h;){const g=i((f[0]+h[0])/2);g[0]-f[0]>=l&&AOe(f,g,h,d,p)>wOe?u.push(g):(f=h,c.push(h),u.pop()),h=u[u.length-1]}return c}function SOe(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const a=t[s][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function AOe(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-a)}function TOe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function BC(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:TOe(e)}function PX(e,t,n){return n||e+(t?"_"+t:"")}const QA=()=>{},kOe={init:QA,add:QA,rem:QA,idx:0},F1={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Ox=Object.keys(F1).filter(e=>e!=="__count__");function COe(e,t){return(n,r)=>ut({name:e,aggregate_param:r,out:n||e},kOe,t)}[...Ox,"__count__"].forEach(e=>{F1[e]=COe(e,F1[e])});function BX(e,t,n){return F1[e](n,t)}function UX(e,t){return e.idx-t.idx}function FOe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=F1[i]())})};return e.forEach(n),Object.values(t).sort(UX)}function OOe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function NOe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function DOe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function MOe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function zX(e,t){const n=t||oi,r=FOe(e),i=e.slice().sort(UX);function s(a){this._ops=r,this._out=i,this.cell=a,this.init()}return s.prototype.init=OOe,s.prototype.add=NOe,s.prototype.rem=DOe,s.prototype.set=MOe,s.prototype.get=n,s.fields=e.map(a=>a.out),s}function xN(e){this._key=e?la(e):Ke,this.reset()}const Rr=xN.prototype;Rr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Rr.add=function(e){this._add.push(e)};Rr.rem=function(e){this._rem.push(e)};Rr.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),a={};let o,l,c;for(o=0;o<i;++o)a[n(t[o])]=1;for(o=0,l=0;o<r;++o)a[n(c=e[o])]?a[n(c)]=0:s[l++]=c;return this._rem=[],this._add=s};Rr.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ze(n,s)||(n[s]=1,++i);return i};Rr.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=Fq(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Rr.argmin=function(e){return this.extent(e)[0]||{}};Rr.argmax=function(e){return this.extent(e)[1]||{}};Rr.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Rr.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Rr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=tN(this.values(),e),this._get=e),this._q};Rr.q1=function(e){return this.quartile(e)[0]};Rr.q2=function(e){return this.quartile(e)[1]};Rr.q3=function(e){return this.quartile(e)[2]};Rr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=kX(this.values(),1e3,.05,e),this._get=e),this._ci};Rr.ci0=function(e){return this.ci(e)[0]};Rr.ci1=function(e){return this.ci(e)[1]};function Au(e){le.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Au.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ox},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Fe(Au,le,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(o){let l,c,u,f;for(l in o)for(u=o[l].tuple,c=0;c<i;++c)r[c][f=u[n[c]]]=f}s(e._prev),s(t);function a(o,l,c){const u=n[c],f=r[c++];for(const h in f){const d=o?o+"|"+h:h;l[u]=f[h],c<i?a(d,l,c):t[d]||e.cell(d,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const y=Ie(ni(v)),_=y.length;let b=0,w;for(;b<_;++b)r[w=y[b]]||(r[w]=1,t.push(w))}this._dims=Ie(e.groupby),this._dnames=this._dims.map(v=>{const y=kn(v);return i(v),n.push(y),y}),this.cellkey=e.key?e.key:BC(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],a=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],c=s.length,u={};let f,h,d,p,g,m,x;for(c!==a.length&&he("Unmatched number of fields and aggregate ops."),x=0;x<c;++x){if(f=s[x],h=a[x],d=o[x]||null,f==null&&h!=="count"&&he("Null aggregate field specified."),g=kn(f),m=PX(h,g,l[x]),n.push(m),h==="count"){this._counts.push(m);continue}p=u[g],p||(i(f),p=u[g]=[],p.field=f,this._measures.push(p)),h!=="count"&&(this._countOnly=!1),p.push(BX(h,d,m))}return this._measures=this._measures.map(v=>zX(v,v.field)),Object.create(null)},cellkey:BC(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new xN),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let a=0;a<i;++a)s[n[a]]=r[a](e);return t?yX(t.tuple,s):jt(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,a=e.rem,o=e.mod;let l,c,u,f;if(r)for(c in r)l=r[c],(!i||l.num)&&a.push(l.tuple);for(u=0,f=this._alen;u<f;++u)s.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)l=n[u],(l.num===0&&i?a:o).push(this.celltuple(l)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});const ROe=1e-14;function vN(e){le.call(this,null,e)}vN.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Fe(vN,le,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,a=e.as||["bin0","bin1"],o=a[0],l=a[1];let c;return e.modified()?(t=t.reflow(!0),c=t.SOURCE):c=t.modified(ni(e.field))?t.ADD_MOD:t.ADD,t.visit(c,n?u=>{const f=r(u);u[o]=f,u[l]=f==null?null:i+s*(1+(f-i)/s)}:u=>u[o]=r(u)),t.modifies(n?a:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=TX(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,a,o;(a=e.anchor)!=null&&(o=a-(i+r*Math.floor((a-i)/r)),i+=o,s+=o);const l=function(c){let u=Jr(t(c));return u==null?null:u<i?-1/0:u>s?1/0:(u=Math.max(i,Math.min(u,s-r)),i+r*Math.floor(ROe+(u-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=is(l,ni(t),e.name||"bin_"+kn(t))}});function HX(e,t,n){const r=e;let i=t||[],s=n||[],a={},o=0;return{add:l=>s.push(l),remove:l=>a[r(l)]=++o,size:()=>i.length,data:(l,c)=>(o&&(i=i.filter(u=>!a[r(u)]),a={},o=0),c&&l&&i.sort(l),s.length&&(i=l?$q(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function yN(e){le.call(this,[],e)}yN.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Fe(yN,le,{transform(e,t){const n=t.fork(t.ALL),r=HX(Ke,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(nd(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function VX(e){rn.call(this,null,$Oe,e)}Fe(VX,rn);function $Oe(e){return this.value&&!e.modified()?this.value:PO(e.fields,e.orders)}function _N(e){le.call(this,null,e)}_N.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function IOe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Fe(_N,le,{transform(e,t){const n=f=>h=>{for(var d=IOe(o(h),e.case,s)||[],p,g=0,m=d.length;g<m;++g)a.test(p=d[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,a=this._stop,o=e.field,l=e.as||["text","count"],c=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,u)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,c;for(o in n)l=r[o],c=n[o]||0,!l&&c?(r[o]=l=jt({}),l[i]=o,l[s]=c,a.add.push(l)):c===0?(l&&a.rem.push(l),n[o]=null,r[o]=null):l[s]!==c&&(l[s]=c,a.mod.push(l));return a.modifies(t)}});function bN(e){le.call(this,null,e)}bN.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Fe(bN,le,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return a?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=LOe(o,i,s,e.filter||ca)):n.mod=o,n.source=this.value,n.modifies(r)}});function LOe(e,t,n,r){for(var i=[],s={},a=e.length,o=0,l,c;o<a;++o)for(s[t]=c=e[o],l=0;l<a;++l)s[n]=e[l],r(s)&&(i.push(jt(s)),s={},s[t]=c);return i}const aL={kde:sN,mixture:NX,normal:iN,lognormal:OX,uniform:DX},POe="distributions",oL="function",BOe="field";function WX(e,t){const n=e[oL];Ze(aL,n)||he("Unknown distribution function: "+n);const r=aL[n]();for(const i in e)i===BOe?r.data((e.from||t()).map(e[i])):i===POe?r[i](e[i].map(s=>WX(s,t))):typeof r[i]===oL&&r[i](e[i]);return r}function EN(e){le.call(this,null,e)}const jX=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],UOe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:jX},{name:"weights",type:"number",array:!0}]};EN.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:jX.concat(UOe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Fe(EN,le,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=WX(e.distribution,zOe(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&he("Invalid density method: "+a),!e.extent&&!r.data&&he("Missing density extent parameter."),a=r[a];const o=e.as||["value","density"],l=e.extent||zo(r.data()),c=lw(a,l,i,s).map(u=>{const f={};return f[o[0]]=u[0],f[o[1]]=u[1],jt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function zOe(e){return()=>e.materialize(e.SOURCE).source}function GX(e,t){return e?e.map((n,r)=>t[r]||kn(n)):null}function wN(e,t,n){const r=[],i=f=>f(l);let s,a,o,l,c,u;if(t==null)r.push(e.map(n));else for(s={},a=0,o=e.length;a<o;++a)l=e[a],c=t.map(i),u=s[c],u||(s[c]=u=[],u.dims=c,r.push(u)),u.push(n(l));return r}const qX="bin";function SN(e){le.call(this,null,e)}SN.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:qX}]};const HOe=(e,t)=>kx(zo(e,t))/30;Fe(SN,le,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=wN(t.source,e.groupby,oi),i=e.smooth||!1,s=e.field,a=e.step||HOe(n,s),o=nd((p,g)=>s(p)-s(g)),l=e.as||qX,c=r.length;let u=1/0,f=-1/0,h=0,d;for(;h<c;++h){const p=r[h].sort(o);d=-1;for(const g of CX(p,a,i,s))g<u&&(u=g),g>f&&(f=g),p[++d][l]=g}return this.value={start:u,stop:f,step:a},t.reflow(!0).modifies(l)}});function XX(e){rn.call(this,null,VOe,e),this.modified(!0)}Fe(XX,rn);function VOe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:is(n=>t(n,e),ni(t),kn(t))}function AN(e){le.call(this,[void 0,void 0],e)}AN.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Fe(AN,le,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],a=n[1];if((i||s==null)&&(s=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,o=>{const l=Jr(r(o));l!=null&&(l<s&&(s=l),l>a&&(a=l))}),!Number.isFinite(s)||!Number.isFinite(a)){let o=kn(r);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${s}, ${a}]`),s=a=void 0}this.value=[s,a]}});function TN(e,t){rn.call(this,e),this.parent=t,this.count=0}Fe(TN,rn,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function cw(e){le.call(this,{},e),this._keys=Bp();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Fe(cw,le,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ze(i,e)&&i[e],a,o;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[e])&&o.tuple,a=n.dataflow,s=new TN(n.fork(n.NO_SOURCE),this),a.add(s).connect(t(a,e,o)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,a=e.modified("key"),o=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const c=Ke(l),u=s.get(c);u!==void 0&&(s.delete(c),o(u).rem(l))}),t.visit(t.ADD,l=>{const c=r(l);s.set(Ke(l),c),o(c).add(l)}),a||t.modified(r.fields)?t.visit(t.MOD,l=>{const c=Ke(l),u=s.get(c),f=r(l);u===f?o(f).mod(l):(s.set(c,f),o(u).rem(l),o(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(s.get(Ke(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const c=Ke(l),u=s.get(c),f=r(l);u!==f&&(s.set(c,f),o(u).rem(l),o(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function YX(e){rn.call(this,null,WOe,e)}Fe(YX,rn);function WOe(e){return this.value&&!e.modified()?this.value:ge(e.name)?Ie(e.name).map(t=>la(t)):la(e.name,e.as)}function kN(e){le.call(this,Bp(),e)}kN.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Fe(kN,le,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,a=i.rem,o=i.mod,l=e.expr;let c=!0;t.visit(t.REM,f=>{const h=Ke(f);r.has(h)?r.delete(h):a.push(f)}),t.visit(t.ADD,f=>{l(f,e)?s.push(f):r.set(Ke(f),1)});function u(f){const h=Ke(f),d=l(f,e),p=r.get(h);d&&p?(r.delete(h),s.push(f)):!d&&!p?(r.set(h,1),a.push(f)):c&&d&&!p&&o.push(f)}return t.visit(t.MOD,u),e.modified()&&(c=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function CN(e){le.call(this,[],e)}CN.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Fe(CN,le,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=GX(r,e.as||[]),s=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=r.map(p=>p(o)),c=l.reduce((p,g)=>Math.max(p,g.length),0);let u=0,f,h,d;for(;u<c;++u){for(h=JO(o),f=0;f<a;++f)h[i[f]]=(d=l[f][u])==null?null:d;s&&(h[s]=u),n.add.push(h)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function FN(e){le.call(this,[],e)}FN.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Fe(FN,le,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(kn),s=e.as||["key","value"],a=s[0],o=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,c=>{for(let u=0,f;u<l;++u)f=JO(c),f[a]=i[u],f[o]=r[u](c),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function ON(e){le.call(this,null,e)}ON.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Fe(ON,le,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,a=>a[r]=n(a,e))}});function KX(e){le.call(this,[],e)}Fe(KX,le,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,a,o,l;if(s>0){for(a=[];--s>=0;)a.push(l=jt(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else o=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,i=i.slice(-s);return n.source=this.value=i,n}});const fy={value:"value",median:jH,mean:Af,min:Rk,max:Jf},jOe=[];function NN(e){le.call(this,[],e)}NN.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function GOe(e){var t=e.method||fy.value,n;if(fy[t]==null)he("Unrecognized imputation method: "+t);else return t===fy.value?(n=e.value!==void 0?e.value:0,()=>n):fy[t]}function qOe(e){const t=e.field;return n=>n?t(n):NaN}Fe(NN,le,{transform(e,t){var n=t.fork(t.ALL),r=GOe(e),i=qOe(e),s=kn(e.field),a=kn(e.key),o=(e.groupby||[]).map(kn),l=XOe(t.source,e.groupby,e.key,e.keyvals),c=[],u=this.value,f=l.domain.length,h,d,p,g,m,x,v,y,_,b;for(m=0,y=l.length;m<y;++m)for(h=l[m],p=h.values,d=NaN,v=0;v<f;++v)if(h[v]==null){for(g=l.domain[v],b={_impute:!0},x=0,_=p.length;x<_;++x)b[o[x]]=p[x];b[a]=g,b[s]=Number.isNaN(d)?d=r(h,i):d,c.push(jt(b))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=c,n}});function XOe(e,t,n,r){var i=x=>x(m),s=[],a=r?r.slice():[],o={},l={},c,u,f,h,d,p,g,m;for(a.forEach((x,v)=>o[x]=v+1),h=0,g=e.length;h<g;++h)m=e[h],p=n(m),d=o[p]||(o[p]=a.push(p)),u=(c=t?t.map(i):jOe)+"",(f=l[u])||(f=l[u]=[],s.push(f),f.values=c),f[d-1]=m;return s.domain=a,s}function DN(e){Au.call(this,e)}DN.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Ox},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Fe(DN,Au,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{ut(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function MN(e){le.call(this,null,e)}MN.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Fe(MN,le,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=wN(r,e.groupby,e.field),s=(e.groupby||[]).map(kn),a=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],c=[];let u=e.extent,f=e.steps||e.minsteps||25,h=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&he("Invalid density method: "+o),e.resolve==="shared"&&(u||(u=zo(r,e.field)),f=h=e.steps||h),i.forEach(d=>{const p=sN(d,a)[o],g=e.counts?d.length:1,m=u||zo(d);lw(p,m,f,h).forEach(x=>{const v={};for(let y=0;y<s.length;++y)v[s[y]]=d.dims[y];v[l[0]]=x[0],v[l[1]]=x[1]*g,c.push(jt(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function JX(e){rn.call(this,null,YOe,e)}Fe(JX,rn);function YOe(e){return this.value&&!e.modified()?this.value:UO(e.fields,e.flat)}function ZX(e){le.call(this,[],e),this._pending=null}Fe(ZX,le,{transform(e,t){const n=t.dataflow;return this._pending?eT(this,t,this._pending):KOe(e)?t.StopPropagation:e.values?eT(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Ie(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>eT(this,t,Ie(r.data)))}});function KOe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function eT(e,t,n){n.forEach(jt);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function RN(e){le.call(this,{},e)}RN.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Fe(RN,le,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,a=e.modified(),o=n.length;let l=a?t.SOURCE:t.ADD,c=t,u=e.as,f,h,d;return i?(h=i.length,o>1&&!u&&he('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==o*h&&he('The "as" parameter has too few output field names.'),u=u||i.map(kn),f=function(p){for(var g=0,m=0,x,v;g<o;++g)if(v=r.get(n[g](p)),v==null)for(x=0;x<h;++x,++m)p[u[m]]=s;else for(x=0;x<h;++x,++m)p[u[m]]=i[x](v)}):(u||he("Missing output field names."),f=function(p){for(var g=0,m;g<o;++g)m=r.get(n[g](p)),p[u[g]]=m??s}),a?c=t.reflow(!0):(d=n.some(p=>t.modified(p.fields)),l|=d?t.MOD:0),t.visit(l,f),c.modifies(u)}});function QX(e){rn.call(this,null,JOe,e)}Fe(QX,rn);function JOe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,a;for(s=0;s<n;++s)a=t[s],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function eY(e){rn.call(this,null,ZOe,e)}Fe(eY,rn);function ZOe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function tY(e){le.call(this,null,e)}Fe(tY,le,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function $N(e){Au.call(this,e)}$N.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Ox,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Fe($N,Au,{_transform:Au.prototype.transform,transform(e,t){return this._transform(QOe(e,t),t)}});function QOe(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ni(n).concat(ni(r)),a=tNe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(o=>eNe(o,n,r,s)),as:a.map(o=>o+""),modified:e.modified.bind(e)}}function eNe(e,t,n,r){return is(i=>t(i)===e?n(i):NaN,r,e+"")}function tNe(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const a=e(s);r[a]||(r[a]=1,i.push(a))}),i.sort(KE),t?i.slice(0,t):i}function nY(e){cw.call(this,e)}Fe(nY,cw,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ke(s),n,t,s);return(e.modified("field")||r&&t.modified(ni(r)))&&he("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const a=i(s);r(s).forEach(o=>a.mod(o))}),t.visit(t.ADD,s=>{const a=i(s);r(s).forEach(o=>a.add(jt(o)))}),t.visit(t.REM,s=>{const a=i(s);r(s).forEach(o=>a.rem(o))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function IN(e){le.call(this,null,e)}IN.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Fe(IN,le,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=GX(e.fields,e.as||[]),s=r?(o,l)=>nNe(o,l,r,i):tw;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,o=>{const l=Ke(o);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,o=>{const l=s(o,jt({}));a[Ke(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(s(o,a[Ke(o)]))}),n}});function nNe(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function rY(e){le.call(this,null,e)}Fe(rY,le,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function LN(e){le.call(this,null,e)}LN.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const rNe=1e-14;Fe(LN,le,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=wN(i,e.groupby,e.field),a=(e.groupby||[]).map(kn),o=[],l=e.step||.01,c=e.probs||ms(l/2,1-rNe,l),u=c.length;return s.forEach(f=>{const h=eN(f,c);for(let d=0;d<u;++d){const p={};for(let g=0;g<a.length;++g)p[a[g]]=f.dims[g];p[r[0]]=c[d],p[r[1]]=h[d],o.push(jt(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function iY(e){le.call(this,null,e)}Fe(iY,le,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ke(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=JO(i);r[Ke(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ke(i)];for(const a in i)s[a]=i[a],n.modifies(a);n.mod.push(s)})),n}});function PN(e){le.call(this,[],e),this.count=0}PN.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Fe(PN,le,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((u,f)=>(u[Ke(f)]=1,u),{});let a=this.value,o=this.count,l=0;function c(u){let f,h;a.length<i?a.push(u):(h=~~((o+1)*fa()),h<a.length&&h>=l&&(f=a[h],s[Ke(f)]&&n.rem.push(f),a[h]=u)),++o}if(t.rem.length&&(t.visit(t.REM,u=>{const f=Ke(u);s[f]&&(s[f]=-1,n.rem.push(u)),--o}),a=a.filter(u=>s[Ke(u)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(l=o=a.length,t.visit(t.SOURCE,u=>{s[Ke(u)]||c(u)}),l=-1),r&&a.length>i){const u=a.length-i;for(let f=0;f<u;++f)s[Ke(a[f])]=-1,n.rem.push(a[f]);a=a.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{s[Ke(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,c),(t.add.length||l<0)&&(n.add=a.filter(u=>!s[Ke(u)])),this.count=o,this.value=n.source=a,n}});function BN(e){le.call(this,null,e)}BN.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Fe(BN,le,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ms(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,jt(s)}),n.add=t.add.concat(this.value),n}});function sY(e){le.call(this,null,e),this.modified(!0)}Fe(sY,le,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function UN(e){le.call(this,null,e)}const aY=["unit0","unit1"];UN.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:WO,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:aY}]};Fe(UN,le,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),a=(i?zp:Up)(s.unit).offset,o=e.as||aY,l=o[0],c=o[1],u=s.step;let f=s.start||1/0,h=s.stop||-1/0,d=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ni(n)))&&(t=t.reflow(!0),d=t.SOURCE,f=1/0,h=-1/0),t.visit(d,p=>{const g=n(p);let m,x;g==null?(p[l]=null,r&&(p[c]=null)):(p[l]=m=x=s(g),r&&(p[c]=x=a(m,u)),m<f&&(f=m),x>h&&(h=x))}),s.start=f,s.stop=h,t.modifies(r?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:rX({extent:e.extent||zo(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=jO(r),a=this.value||{},o=(n?Xq:qq)(s,i);return o.unit=Ft(s),o.units=s,o.step=i,o.start=a.start,o.stop=a.stop,this.value=o}});function oY(e){le.call(this,Bp(),e)}Fe(oY,le,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=o=>i.set(r(o),o);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,o=>i.delete(r(o))),t.visit(t.ADD,s)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function lY(e){le.call(this,null,e)}Fe(lY,le,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(nd(e.sort)):t.source).map(e.field))}});function iNe(e,t,n,r){const i=O1[e](t,n);return{init:i.init||zc,update:function(s,a){a[r]=i.next(s)}}}const O1={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=O1.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||he("ntile num must be greater than zero.");const n=O1.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||he("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=sNe(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function sNe(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const aNe=Object.keys(O1);function cY(e){const t=Ie(e.ops),n=Ie(e.fields),r=Ie(e.params),i=Ie(e.aggregate_params),s=Ie(e.as),a=this.outputs=[],o=this.windows=[],l={},c={},u=[],f=[];let h=!0;function d(p){Ie(ni(p)).forEach(g=>l[g]=1)}d(e.sort),t.forEach((p,g)=>{const m=n[g],x=r[g],v=i[g]||null,y=kn(m),_=PX(p,y,s[g]);if(d(m),a.push(_),Ze(O1,p))o.push(iNe(p,m,x,_));else{if(m==null&&p!=="count"&&he("Null aggregate field specified."),p==="count"){u.push(_);return}h=!1;let b=c[y];b||(b=c[y]=[],b.field=m,f.push(b)),b.push(BX(p,v,_))}}),(u.length||f.length)&&(this.cell=oNe(f,u,h)),this.inputs=Object.keys(l)}const uY=cY.prototype;uY.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};uY.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<s;++a)r[a].update(e,t)};function oNe(e,t,n){e=e.map(l=>zX(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),a=0;a<i;++a)s[a]=new e[a](r);if(r.store)var o=r.data=new xN;return r.add=function(l){if(r.num+=1,!n){o&&o.add(l);for(let c=0;c<i;++c)s[c].add(s[c].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){o&&o.rem(l);for(let c=0;c<i;++c)s[c].rem(s[c].get(l),l)}},r.set=function(l){let c,u;for(o&&o.values(),c=0,u=t.length;c<u;++c)l[t[c]]=r.num;if(!n)for(c=0,u=s.length;c<u;++c)s[c].set(l)},r.init=function(){r.num=0,o&&o.reset();for(let l=0;l<i;++l)s[l].init()},r}function zN(e){le.call(this,{},e),this._mlen=0,this._mods=[]}zN.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:aNe.concat(Ox)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Fe(zN,le,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=nd(e.sort),i=BC(e.groupby),s=o=>this.group(i(o));let a=this.state;(!a||n)&&(a=this.state=new cY(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,o=>s(o).add(o))):(t.visit(t.REM,o=>s(o).remove(o)),t.visit(t.ADD,o=>s(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)lNe(this._mods[o],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=HX(Ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function lNe(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,a=r.frame||[null,0],o=e.data(n),l=o.length,c=s?Cp(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:i||li(-1)};t.init();for(let f=0;f<l;++f)cNe(u,a,f,l),s&&uNe(u,c),t.update(u,o[f])}function cNe(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function uNe(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<a&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const fNe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Au,bin:vN,collect:yN,compare:VX,countpattern:_N,cross:bN,density:EN,dotbin:SN,expression:XX,extent:AN,facet:cw,field:YX,filter:kN,flatten:CN,fold:FN,formula:ON,generate:KX,impute:NN,joinaggregate:DN,kde:MN,key:JX,load:ZX,lookup:RN,multiextent:QX,multivalues:eY,params:tY,pivot:$N,prefacet:nY,project:IN,proxy:rY,quantile:LN,relay:iY,sample:PN,sequence:BN,sieve:sY,subflow:TN,timeunit:UN,tupleindex:oY,values:lY,window:zN},Symbol.toStringTag,{value:"Module"}));function ou(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const hNe=()=>typeof Image<"u"?Image:null;function HN(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const dNe="identity",Q0="linear",rc="log",Nx="pow",Dx="sqrt",uw="symlog",kh="time",Ch="utc",Mo="sequential",Vp="diverging",ep="quantile",fw="quantize",hw="threshold",VN="ordinal",UC="point",fY="band",WN="bin-ordinal",ir="continuous",Mx="discrete",Rx="discretizing",xa="interpolating",jN="temporal";function pNe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function gNe(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,a,o,l,c;for(i<r&&(o=r,r=i,i=o),l=0,c=n.length;l<c;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function GN(){const e=V4().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,a=!1,o=0,l=0,c=.5;delete e.unknown;function u(){const f=t().length,h=r[1]<r[0],d=r[1-h],p=HN(f,o,l);let g=r[h-0];i=(d-g)/(p||1),a&&(i=Math.floor(i)),g+=(d-g-i*(f-o))*c,s=i*(1-o),a&&(g=Math.round(g),s=Math.round(s));const m=ms(f).map(x=>g+i*x);return n(h?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,u()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,u()):a},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,u()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),u()):o},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const h=r[1]<r[0],d=h?n().reverse():n(),p=d.length-1;let g=+f[0],m=+f[1],x,v,y;if(!(g!==g||m!==m)&&(m<g&&(y=g,g=m,m=y),!(m<d[0]||g>r[1-h])))return x=Math.max(0,vu(d,g)-1),v=g===m?x:vu(d,m)-1,g-d[x]>s+1e-10&&++x,h&&(y=x,x=p-v,v=p-y),x>v?void 0:t().slice(x,v+1)},e.invert=function(f){const h=e.invertRange([f,f]);return h&&h[0]},e.copy=function(){return GN().domain(t()).range(r).round(a).paddingInner(o).paddingOuter(l).align(c)},u()}function hY(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return hY(t())},e}function mNe(){return hY(GN().paddingInner(1))}var xNe=Array.prototype.map;function vNe(e){return xNe.call(e,Jr)}const yNe=Array.prototype.slice;function dY(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(vu(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=vNe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=yNe.call(r),n):t.slice()},n.tickFormat=function(r,i){return jW(e[0],Ft(e),r??10,i)},n.copy=function(){return dY().domain(n.domain()).range(n.range())},n}const Z2=new Map,pY=Symbol("vega_scale");function gY(e){return e[pY]=!0,e}function _Ne(e){return e&&e[pY]===!0}function bNe(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?pNe(s):s.invertExtent?gNe(s):void 0),s.type=e,gY(s)};return r.metadata=Ga(Ie(n)),r}function Ht(e,t,n){return arguments.length>1?(Z2.set(e,bNe(e,t,n)),this):mY(e)?Z2.get(e):void 0}Ht(dNe,qW);Ht(Q0,GW,ir);Ht(rc,YW,[ir,rc]);Ht(Nx,q4,ir);Ht(Dx,zve,ir);Ht(uw,KW,ir);Ht(kh,n_e,[ir,jN]);Ht(Ch,r_e,[ir,jN]);Ht(Mo,Z4,[ir,xa]);Ht(`${Mo}-${Q0}`,Z4,[ir,xa]);Ht(`${Mo}-${rc}`,cj,[ir,xa,rc]);Ht(`${Mo}-${Nx}`,Q4,[ir,xa]);Ht(`${Mo}-${Dx}`,i_e,[ir,xa]);Ht(`${Mo}-${uw}`,uj,[ir,xa]);Ht(`${Vp}-${Q0}`,fj,[ir,xa]);Ht(`${Vp}-${rc}`,hj,[ir,xa,rc]);Ht(`${Vp}-${Nx}`,eO,[ir,xa]);Ht(`${Vp}-${Dx}`,s_e,[ir,xa]);Ht(`${Vp}-${uw}`,dj,[ir,xa]);Ht(ep,JW,[Rx,ep]);Ht(fw,ZW,Rx);Ht(hw,QW,Rx);Ht(WN,dY,[Mx,Rx]);Ht(VN,V4,Mx);Ht(fY,GN,Mx);Ht(UC,mNe,Mx);function mY(e){return Z2.has(e)}function id(e,t){const n=Z2.get(e);return n&&n.metadata[t]}function qN(e){return id(e,ir)}function tp(e){return id(e,Mx)}function zC(e){return id(e,Rx)}function xY(e){return id(e,rc)}function ENe(e){return id(e,jN)}function vY(e){return id(e,xa)}function yY(e){return id(e,ep)}const wNe=["clamp","base","constant","exponent"];function _Y(e,t){const n=t[0],r=Ft(t)-n;return function(i){return e(n+i*r)}}function dw(e,t,n){return A4(XN(t||"rgb",n),e)}function bY(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function EY(e,t,n){const r=n-t;let i,s,a;return!r||!Number.isFinite(r)?li(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=Ht(s)().domain([t,n]).range([0,1]),wNe.forEach(o=>e[o]?a[o](e[o]()):0),a)}function XN(e,t){const n=qpe[SNe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function SNe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const ANe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},TNe={accent:o_e,category10:a_e,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:l_e,observable10:c_e,paired:u_e,pastel1:f_e,pastel2:h_e,set1:d_e,set2:p_e,set3:g_e,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function wY(e){if(ge(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function SY(e,t){for(const n in e)YN(n,t(e[n]))}const lL={};SY(TNe,wY);SY(ANe,e=>dw(wY(e)));function YN(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(lL[e]=t,this):lL[e]}const r_="symbol",kNe="discrete",CNe="gradient",FNe=e=>ge(e)?e.map(t=>String(t)):String(e),ONe=(e,t)=>e[1]-t[1],NNe=(e,t)=>t[1]-e[1];function KN(e,t,n){let r;return $t(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(kx(e.domain())/n||1)+1))),$e(t)&&(r=t.step,t=t.interval),Le(t)&&(t=e.type===kh?Up(t):e.type==Ch?zp(t):he("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function AY(e,t,n){let r=e.range(),i=r[0],s=Ft(r),a=ONe;if(i>s&&(r=s,s=i,i=r,a=NNe),i=Math.floor(i),s=Math.ceil(s),t=t.map(o=>[o,e(o)]).filter(o=>i<=o[1]&&o[1]<=s).sort(a).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Ft(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,c)=>!(c%2));t.length<3&&(t=o)}return t}function JN(e,t){return e.bins?AY(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function TY(e,t,n,r,i,s){const a=t.type;let o=FNe;if(a===kh||i===kh)o=e.timeFormat(r);else if(a===Ch||i===Ch)o=e.utcFormat(r);else if(xY(a)){const l=e.formatFloat(r);if(s||t.bins)o=l;else{const c=kY(t,n,!1);o=u=>c(u)?l(u):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(o=e.format(r));return o}function kY(e,t,n){const r=JN(e,t),i=e.base(),s=Math.log(i),a=Math.max(1,i*t/r.length),o=l=>{let c=l/Math.pow(i,Math.round(Math.log(l)/s));return c*i<i-.5&&(c*=i),c<=a};return n?r.filter(o):o}const HC={[ep]:"quantiles",[fw]:"thresholds",[hw]:"domain"},CY={[ep]:"quantiles",[fw]:"domain"};function FY(e,t){return e.bins?RNe(e.bins):e.type===rc?kY(e,t,!0):HC[e.type]?MNe(e[HC[e.type]]()):JN(e,t)}function DNe(e,t,n){const r=t[CY[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)s=Math.min(s,r[a]-r[a-1]);return e.formatSpan(0,s,3*10,n)}function MNe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function RNe(e){const t=e.slice(0,-1);return t.max=Ft(e),t}const $Ne=e=>HC[e.type]||e.bins;function OY(e,t,n,r,i,s,a){const o=CY[t.type]&&s!==kh&&s!==Ch?DNe(e,t,i):TY(e,t,n,i,s,a);return r===r_&&$Ne(t)?INe(o):r===kNe?LNe(o):PNe(o)}const INe=e=>(t,n,r)=>{const i=cL(r[n+1],cL(r.max,1/0)),s=uL(t,e),a=uL(i,e);return s&&a?s+"  "+a:a?"< "+a:" "+s},cL=(e,t)=>e??t,LNe=e=>(t,n)=>n?e(t):null,PNe=e=>t=>e(t),uL=(e,t)=>Number.isFinite(e)?t(e):null;function BNe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Ft(t),s=i-r;if(e.type===hw){const a=n?s/n:.1;r-=a,i+=a,s=i-r}return a=>(a-r)/s}function UNe(e,t,n,r){const i=r||t.type;return Le(n)&&ENe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===kh?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Ch?e.utcFormat("%A, %d %B %Y, %X UTC"):OY(e,t,5,null,n,r,!0)}function NY(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=UNe(e,t,n.format,n.formatType);if(zC(t.type)){const s=FY(t).slice(1).map(i),a=s.length;return`${a} boundar${a===1?"y":"ies"}: ${s.join(", ")}`}else if(tp(t.type)){const s=t.domain(),a=s.length,o=a>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${o}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Ft(s))}`}}let DY=0;function zNe(){DY=0}const Q2="p_";function ZN(e){return e&&e.gradient}function MY(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?Q2:"";return i||(i=e.id="gradient_"+DY++,r==="radial"?(e.x1=ho(e.x1,.5),e.y1=ho(e.y1,.5),e.r1=ho(e.r1,0),e.x2=ho(e.x2,.5),e.y2=ho(e.y2,.5),e.r2=ho(e.r2,.5),s=Q2):(e.x1=ho(e.x1,0),e.y1=ho(e.y1,0),e.x2=ho(e.x2,1),e.y2=ho(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function ho(e,t){return e??t}function RY(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const fL={basis:{curve:F_e},"basis-closed":{curve:O_e},"basis-open":{curve:N_e},bundle:{curve:D_e,tension:"beta",value:.85},cardinal:{curve:M_e,tension:"tension",value:0},"cardinal-open":{curve:$_e,tension:"tension",value:0},"cardinal-closed":{curve:R_e,tension:"tension",value:0},"catmull-rom":{curve:I_e,tension:"alpha",value:.5},"catmull-rom-closed":{curve:L_e,tension:"alpha",value:.5},"catmull-rom-open":{curve:P_e,tension:"alpha",value:.5},linear:{curve:nO},"linear-closed":{curve:B_e},monotone:{horizontal:z_e,vertical:U_e},natural:{curve:H_e},step:{curve:V_e},"step-after":{curve:j_e},"step-before":{curve:W_e}};function QN(e,t,n){var r=Ze(fL,e)&&fL[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const HNe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},VNe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,WNe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,jNe=/^((\s+,?\s*)|(,\s*))/,GNe=/^[01]/;function np(e){const t=[];return(e.match(VNe)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),a=HNe[s],o=qNe(s,a,r.slice(1).trim()),l=o.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...o.slice(0,a)]),l!==a){s==="m"&&(i=i==="M"?"L":"l");for(let c=a;c<l;c+=a)t.push([i,...o.slice(c,c+a)])}}),t}function qNe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const a=e==="a"&&(s===3||s===4)?GNe:WNe,o=n.slice(i).match(a);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");i+=o[0].length,r.push(+o[0]);const l=n.slice(i).match(jNe);l!==null&&(i+=l[0].length)}return r}const Tu=Math.PI/180,XNe=1e-14,Mf=Math.PI/2,Ao=Math.PI*2,Td=Math.sqrt(3)/2;var tT={},nT={},$Y=[].join;function YNe(e,t,n,r,i,s,a,o,l){const c=$Y.call(arguments);if(tT[c])return tT[c];const u=a*Tu,f=Math.sin(u),h=Math.cos(u);n=Math.abs(n),r=Math.abs(r);const d=h*(o-e)*.5+f*(l-t)*.5,p=h*(l-t)*.5-f*(o-e)*.5;let g=d*d/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=h/n,x=f/n,v=-f/r,y=h/r,_=m*o+x*l,b=v*o+y*l,w=m*e+x*t,E=v*e+y*t;let S=1/((w-_)*(w-_)+(E-b)*(E-b))-.25;S<0&&(S=0);let k=Math.sqrt(S);s==i&&(k=-k);const T=.5*(_+w)-k*(E-b),O=.5*(b+E)+k*(w-_),C=Math.atan2(b-O,_-T);let N=Math.atan2(E-O,w-T)-C;N<0&&s===1?N+=Ao:N>0&&s===0&&(N-=Ao);const R=Math.ceil(Math.abs(N/(Mf+.001))),L=[];for(let I=0;I<R;++I){const Y=C+I*N/R,X=C+(I+1)*N/R;L[I]=[T,O,Y,X,n,r,f,h]}return tT[c]=L}function KNe(e){const t=$Y.call(e);if(nT[t])return nT[t];var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7];const u=c*a,f=-l*o,h=l*a,d=c*o,p=Math.cos(i),g=Math.sin(i),m=Math.cos(s),x=Math.sin(s),v=.5*(s-i),y=Math.sin(v*.5),_=8/3*y*y/Math.sin(v),b=n+p-_*g,w=r+g+_*p,E=n+m,A=r+x,S=E+_*x,k=A-_*m;return nT[t]=[u*b+f*w,h*b+d*w,u*S+f*k,h*S+d*k,u*E+f*A,h*E+d*A]}const Us=["l",0,0,0,0,0,0,0];function JNe(e,t,n){const r=Us[0]=e[0];if(r==="a"||r==="A")Us[1]=t*e[1],Us[2]=n*e[2],Us[3]=e[3],Us[4]=e[4],Us[5]=e[5],Us[6]=t*e[6],Us[7]=n*e[7];else if(r==="h"||r==="H")Us[1]=t*e[1];else if(r==="v"||r==="V")Us[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Us[i]=(i%2==1?t:n)*e[i];return Us}function N1(e,t,n,r,i,s){var a,o=null,l=0,c=0,u=0,f=0,h,d,p,g,m=0,x=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,y=t.length;v<y;++v){switch(a=t[v],(i!==1||s!==1)&&(a=JNe(a,i,s)),a[0]){case"l":l+=a[1],c+=a[2],e.lineTo(l+n,c+r);break;case"L":l=a[1],c=a[2],e.lineTo(l+n,c+r);break;case"h":l+=a[1],e.lineTo(l+n,c+r);break;case"H":l=a[1],e.lineTo(l+n,c+r);break;case"v":c+=a[1],e.lineTo(l+n,c+r);break;case"V":c=a[1],e.lineTo(l+n,c+r);break;case"m":l+=a[1],c+=a[2],m=l,x=c,e.moveTo(l+n,c+r);break;case"M":l=a[1],c=a[2],m=l,x=c,e.moveTo(l+n,c+r);break;case"c":h=l+a[5],d=c+a[6],u=l+a[3],f=c+a[4],e.bezierCurveTo(l+a[1]+n,c+a[2]+r,u+n,f+r,h+n,d+r),l=h,c=d;break;case"C":l=a[5],c=a[6],u=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,u+n,f+r,l+n,c+r);break;case"s":h=l+a[3],d=c+a[4],u=2*l-u,f=2*c-f,e.bezierCurveTo(u+n,f+r,l+a[1]+n,c+a[2]+r,h+n,d+r),u=l+a[1],f=c+a[2],l=h,c=d;break;case"S":h=a[3],d=a[4],u=2*l-u,f=2*c-f,e.bezierCurveTo(u+n,f+r,a[1]+n,a[2]+r,h+n,d+r),l=h,c=d,u=a[1],f=a[2];break;case"q":h=l+a[3],d=c+a[4],u=l+a[1],f=c+a[2],e.quadraticCurveTo(u+n,f+r,h+n,d+r),l=h,c=d;break;case"Q":h=a[3],d=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,h+n,d+r),l=h,c=d,u=a[1],f=a[2];break;case"t":h=l+a[1],d=c+a[2],o[0].match(/[QqTt]/)===null?(u=l,f=c):o[0]==="t"?(u=2*l-p,f=2*c-g):o[0]==="q"&&(u=2*l-u,f=2*c-f),p=u,g=f,e.quadraticCurveTo(u+n,f+r,h+n,d+r),l=h,c=d,u=l+a[1],f=c+a[2];break;case"T":h=a[1],d=a[2],u=2*l-u,f=2*c-f,e.quadraticCurveTo(u+n,f+r,h+n,d+r),l=h,c=d;break;case"a":hL(e,l+n,c+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+c+r]),l+=a[6],c+=a[7];break;case"A":hL(e,l+n,c+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],c=a[7];break;case"z":case"Z":l=m,c=x,e.closePath();break}o=a}}function hL(e,t,n,r){const i=YNe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const a=KNe(i[s]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const dL=.5773502691896257,pL={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ao)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Td*n,i=r-n*dL,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Td*n,i=r-n*dL;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Td*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Td*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Td*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Td*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function IY(e){return Ze(pL,e)?pL[e]:ZNe(e)}var rT={};function ZNe(e){if(!Ze(rT,e)){const t=np(e);rT[e]={draw:function(n,r){N1(n,t,0,0,Math.sqrt(r)/2)}}}return rT[e]}const Sc=.448084975506;function QNe(e){return e.x}function eDe(e){return e.y}function tDe(e){return e.width}function nDe(e){return e.height}function ul(e){return typeof e=="function"?e:()=>+e}function hy(e,t,n){return Math.max(t,Math.min(e,n))}function LY(){var e=QNe,t=eDe,n=tDe,r=nDe,i=ul(0),s=i,a=i,o=i,l=null;function c(u,f,h){var d,p=f??+e.call(this,u),g=h??+t.call(this,u),m=+n.call(this,u),x=+r.call(this,u),v=Math.min(m,x)/2,y=hy(+i.call(this,u),0,v),_=hy(+s.call(this,u),0,v),b=hy(+a.call(this,u),0,v),w=hy(+o.call(this,u),0,v);if(l||(l=d=EE()),y<=0&&_<=0&&b<=0&&w<=0)l.rect(p,g,m,x);else{var E=p+m,A=g+x;l.moveTo(p+y,g),l.lineTo(E-_,g),l.bezierCurveTo(E-Sc*_,g,E,g+Sc*_,E,g+_),l.lineTo(E,A-w),l.bezierCurveTo(E,A-Sc*w,E-Sc*w,A,E-w,A),l.lineTo(p+b,A),l.bezierCurveTo(p+Sc*b,A,p,A-Sc*b,p,A-b),l.lineTo(p,g+y),l.bezierCurveTo(p,g+Sc*y,p+Sc*y,g,p+y,g),l.closePath()}if(d)return l=null,d+""||null}return c.x=function(u){return arguments.length?(e=ul(u),c):e},c.y=function(u){return arguments.length?(t=ul(u),c):t},c.width=function(u){return arguments.length?(n=ul(u),c):n},c.height=function(u){return arguments.length?(r=ul(u),c):r},c.cornerRadius=function(u,f,h,d){return arguments.length?(i=ul(u),s=f!=null?ul(f):i,o=h!=null?ul(h):i,a=d!=null?ul(d):s,c):i},c.context=function(u){return arguments.length?(l=u??null,c):l},c}function PY(){var e,t,n,r,i=null,s,a,o,l;function c(f,h,d){const p=d/2;if(s){var g=o-h,m=f-a;if(g||m){var x=Math.hypot(g,m),v=(g/=x)*l,y=(m/=x)*l,_=Math.atan2(m,g);i.moveTo(a-v,o-y),i.lineTo(f-g*p,h-m*p),i.arc(f,h,p,_-Math.PI,_),i.lineTo(a+v,o+y),i.arc(a,o,l,_,_+Math.PI)}else i.arc(f,h,p,0,Ao);i.closePath()}else s=1;a=f,o=h,l=p}function u(f){var h,d=f.length,p,g=!1,m;for(i==null&&(i=m=EE()),h=0;h<=d;++h)!(h<d&&r(p=f[h],h,f))===g&&(g=!g)&&(s=0),g&&c(+e(p,h,f),+t(p,h,f),+n(p,h,f));if(m)return i=null,m+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(f==null?i=null:i=f,u):i},u}function $x(e,t){return e??t}const Ix=e=>e.x||0,Lx=e=>e.y||0,rDe=e=>e.width||0,iDe=e=>e.height||0,sDe=e=>(e.x||0)+(e.width||0),aDe=e=>(e.y||0)+(e.height||0),oDe=e=>e.startAngle||0,lDe=e=>e.endAngle||0,cDe=e=>e.padAngle||0,uDe=e=>e.innerRadius||0,fDe=e=>e.outerRadius||0,hDe=e=>e.cornerRadius||0,dDe=e=>$x(e.cornerRadiusTopLeft,e.cornerRadius)||0,pDe=e=>$x(e.cornerRadiusTopRight,e.cornerRadius)||0,gDe=e=>$x(e.cornerRadiusBottomRight,e.cornerRadius)||0,mDe=e=>$x(e.cornerRadiusBottomLeft,e.cornerRadius)||0,xDe=e=>$x(e.size,64),vDe=e=>e.size||1,pw=e=>e.defined!==!1,yDe=e=>IY(e.shape||"circle"),_De=mC().startAngle(oDe).endAngle(lDe).padAngle(cDe).innerRadius(uDe).outerRadius(fDe).cornerRadius(hDe),bDe=vj().x(Ix).y1(Lx).y0(aDe).defined(pw),EDe=vj().y(Lx).x1(Ix).x0(sDe).defined(pw),wDe=xj().x(Ix).y(Lx).defined(pw),SDe=LY().x(Ix).y(Lx).width(rDe).height(iDe).cornerRadius(dDe,pDe,gDe,mDe),ADe=C_e().type(yDe).size(xDe),TDe=PY().x(Ix).y(Lx).defined(pw).size(vDe);function eD(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function kDe(e,t){return _De.context(e)(t)}function CDe(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?EDe:bDe).curve(QN(r,n.orient,n.tension)).context(e)(t)}function FDe(e,t){const n=t[0],r=n.interpolate||"linear";return wDe.curve(QN(r,n.orient,n.tension)).context(e)(t)}function Wp(e,t,n,r){return SDe.context(e)(t,n,r)}function ODe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function NDe(e,t){return ADe.context(e)(t)}function DDe(e,t){return TDe.context(e)(t)}var BY=1;function UY(){BY=1}function tD(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+BY++),a=i.clipping[s]||(i.clipping[s]={id:s});return ht(r)?a.path=r(null):eD(n)?a.path=Wp(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function Vn(e){this.clear(),e&&this.union(e)}Vn.prototype={clone(){return new Vn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:a}=this,o=Math.cos(e),l=Math.sin(e),c=t-t*o+n*l,u=n-t*l-n*o;return[o*r-l*i+c,l*r+o*i+u,o*r-l*a+c,l*r+o*a+u,o*s-l*i+c,l*s+o*i+u,o*s-l*a+c,l*s+o*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function gw(e){this.mark=e,this.bounds=this.bounds||new Vn}function mw(e){gw.call(this,e),this.items=this.items||[]}Fe(mw,gw);class zY{constructor(t){this._pending=0,this._loader=t||ZE()}pending(){return this._pending}sanitizeURL(t){const n=this;return gL(n),n._loader.sanitize(t,{context:"href"}).then(r=>(wg(n),r)).catch(()=>(wg(n),null))}loadImage(t){const n=this,r=hNe();return gL(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const a=new r,o=Ze(i,"crossOrigin")?i.crossOrigin:"anonymous";return o!=null&&(a.crossOrigin=o),a.onload=()=>wg(n),a.onerror=()=>wg(n),a.src=s,a}).catch(i=>(wg(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function gL(e){e._pending+=1}function wg(e){e._pending-=1}function cc(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?MDe(t,r):0))}return e}function MDe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const RDe=Ao-1e-8;let xw,i_,s_,Vf,VC,a_,WC,jC;const Wc=(e,t)=>xw.add(e,t),o_=(e,t)=>Wc(i_=e,s_=t),mL=e=>Wc(e,xw.y1),xL=e=>Wc(xw.x1,e),Rf=(e,t)=>VC*e+WC*t,$f=(e,t)=>a_*e+jC*t,iT=(e,t)=>Wc(Rf(e,t),$f(e,t)),sT=(e,t)=>o_(Rf(e,t),$f(e,t));function Px(e,t){return xw=e,t?(Vf=t*Tu,VC=jC=Math.cos(Vf),a_=Math.sin(Vf),WC=-a_):(VC=jC=1,Vf=a_=WC=0),$De}const $De={beginPath(){},closePath(){},moveTo:sT,lineTo:sT,rect(e,t,n,r){Vf?(iT(e+n,t),iT(e+n,t+r),iT(e,t+r),sT(e,t)):(Wc(e+n,t+r),o_(e,t))},quadraticCurveTo(e,t,n,r){const i=Rf(e,t),s=$f(e,t),a=Rf(n,r),o=$f(n,r);vL(i_,i,a,mL),vL(s_,s,o,xL),o_(a,o)},bezierCurveTo(e,t,n,r,i,s){const a=Rf(e,t),o=$f(e,t),l=Rf(n,r),c=$f(n,r),u=Rf(i,s),f=$f(i,s);yL(i_,a,l,u,mL),yL(s_,o,c,f,xL),o_(u,f)},arc(e,t,n,r,i,s){if(r+=Vf,i+=Vf,i_=n*Math.cos(i)+e,s_=n*Math.sin(i)+t,Math.abs(i-r)>RDe)Wc(e-n,t-n),Wc(e+n,t+n);else{const a=c=>Wc(n*Math.cos(c)+e,n*Math.sin(c)+t);let o,l;if(a(r),a(i),i!==r)if(r=r%Ao,r<0&&(r+=Ao),i=i%Ao,i<0&&(i+=Ao),i<r&&(s=!s,o=r,r=i,i=o),s)for(i-=Ao,o=r-r%Mf,l=0;l<4&&o>i;++l,o-=Mf)a(o);else for(o=r-r%Mf+Mf,l=0;l<4&&o<i;++l,o=o+Mf)a(o)}}};function vL(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function yL(e,t,n,r,i){const s=r-e+3*t-3*n,a=e+n-2*t,o=e-t;let l=0,c=0,u;Math.abs(s)>XNe?(u=a*a+o*s,u>=0&&(u=Math.sqrt(u),l=(-a+u)/s,c=(-a-u)/s)):l=.5*o/a,0<l&&l<1&&i(_L(l,e,t,n,r)),0<c&&c<1&&i(_L(c,e,t,n,r))}function _L(e,t,n,r,i){const s=1-e,a=s*s,o=e*e;return a*s*t+3*a*e*n+3*s*o*r+o*e*i}var lu=(lu=ou(1,1))?lu.getContext("2d"):null;const GC=new Vn;function nD(e){return function(t,n){if(!lu)return!0;e(lu,t),GC.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:a}=GC;for(let o=i;o<=a;++o)for(let l=r;l<=s;++l)if(lu.isPointInPath(l,o))return!0;return!1}}function rD(e,t){return t.contains(e.x||0,e.y||0)}function HY(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(GC.set(n,r,n+i,r+s))}function VY(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Kd(t,n,r,i,s)}function Kd(e,t,n,r,i){const{x1:s,y1:a,x2:o,y2:l}=e,c=r-t,u=i-n;let f=0,h=1,d,p,g,m;for(m=0;m<4;++m){if(m===0&&(d=-c,p=-(s-t)),m===1&&(d=c,p=o-t),m===2&&(d=-u,p=-(a-n)),m===3&&(d=u,p=l-n),Math.abs(d)<1e-10&&p<0)return!1;if(g=p/d,d<0){if(g>h)return!1;g>f&&(f=g)}else if(d>0){if(g<f)return!1;g<h&&(h=g)}}return!0}function rp(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Ea(e,t){return e??t}function bL(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function IDe(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Ea(t.x1,.5)*r,n.y1+Ea(t.y1,.5)*i,Math.max(r,i)*Ea(t.r1,0),n.x1+Ea(t.x2,.5)*r,n.y1+Ea(t.y2,.5)*i,Math.max(r,i)*Ea(t.r2,.5));else{const a=Ea(t.x1,0),o=Ea(t.y1,0),l=Ea(t.x2,1),c=Ea(t.y2,0);if(a===l||o===c||r===i)s=e.createLinearGradient(n.x1+a*r,n.y1+o*i,n.x1+l*r,n.y1+c*i);else{const u=ou(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=bL(f.createLinearGradient(a,o,l,c),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}}return bL(s,t.stops)}function WY(e,t,n){return ZN(n)?IDe(e,n,t.bounds):n}function eb(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=WY(e,t,t.fill),!0):!1}var LDe=[];function ip(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=WY(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||LDe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function PDe(e,t){return e.zindex-t.zindex||e.index-t.index}function iD(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(PDe)}function Xa(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=iD(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function tb(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=iD(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function sD(e){return function(t,n,r){Xa(n,i=>{(!r||r.intersects(i.bounds))&&jY(e,t,i,i)})}}function BDe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&jY(e,t,n.items[0],n.items)}}function jY(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(rp(t,n),n.fill&&eb(t,n,i)&&t.fill(),n.stroke&&ip(t,n,i)&&t.stroke()))}function vw(e){return e=e||ca,function(t,n,r,i,s,a){return r*=t.pixelRatio,i*=t.pixelRatio,tb(n,o=>{const l=o.bounds;if(!(l&&!l.contains(s,a)||!l)&&e(t,o,r,i,s,a))return o})}}function Bx(e,t){return function(n,r,i,s){var a=Array.isArray(r)?r[0]:r,o=t??a.fill,l=a.stroke&&n.isPointInStroke,c,u;return l&&(c=a.strokeWidth,u=a.strokeCap,n.lineWidth=c??1,n.lineCap=u??"butt"),e(n,r)?!1:o&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function aD(e){return vw(Bx(e))}function sh(e,t){return"translate("+e+","+t+")"}function oD(e){return"rotate("+e+")"}function UDe(e,t){return"scale("+e+","+t+")"}function GY(e){return sh(e.x||0,e.y||0)}function zDe(e){return sh(e.x||0,e.y||0)+(e.angle?" "+oD(e.angle):"")}function HDe(e){return sh(e.x||0,e.y||0)+(e.angle?" "+oD(e.angle):"")+(e.scaleX||e.scaleY?" "+UDe(e.scaleX||1,e.scaleY||1):"")}function lD(e,t,n){function r(a,o){a("transform",zDe(o)),a("d",t(null,o))}function i(a,o){return t(Px(a,o.angle),o),cc(a,o).translate(o.x||0,o.y||0)}function s(a,o){var l=o.x||0,c=o.y||0,u=o.angle||0;a.translate(l,c),u&&a.rotate(u*=Tu),a.beginPath(),t(a,o),u&&a.rotate(-u),a.translate(-l,-c)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:sD(s),pick:aD(s),isect:n||nD(s)}}var VDe=lD("arc",kDe);function WDe(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,a,o;--i>=0;)e[i].defined!==!1&&(o=Math.abs(e[i][r]-n),o<s&&(s=o,a=e[i]));return a}function jDe(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],a=i*i+s*s,a<n))return e[r];return null}function GDe(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function cD(e,t,n){function r(l,c){var u=c.mark.items;u.length&&l("d",t(null,u))}function i(l,c){var u=c.items;return u.length===0?l:(t(Px(l),u),cc(l,u[0]))}function s(l,c){l.beginPath(),t(l,c)}const a=Bx(s);function o(l,c,u,f,h,d){var p=c.items,g=c.bounds;return!p||!p.length||g&&!g.contains(h,d)?null:(u*=l.pixelRatio,f*=l.pixelRatio,a(l,p,u,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:BDe(s),pick:o,isect:rD,tip:n}}var qDe=cD("area",CDe,WDe);function XDe(e,t){var n=t.clip;e.save(),ht(n)?(e.beginPath(),n(e),e.clip()):qY(e,t.group)}function qY(e,t){e.beginPath(),eD(t)?Wp(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function XY(e){const t=Ea(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function YDe(e,t){e("transform",GY(t))}function YY(e,t){const n=XY(t);e("d",Wp(null,t,n,n))}function KDe(e,t){e("class","background"),e("aria-hidden",!0),YY(e,t)}function JDe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?YY(e,t):e("d","")}function ZDe(e,t,n){const r=t.clip?tD(n,t,t):null;e("clip-path",r)}function QDe(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),cc(e,t),e.translate(t.x||0,t.y||0)}function D1(e,t,n,r){const i=XY(t);e.beginPath(),Wp(e,t,(n||0)+i,(r||0)+i)}const eMe=Bx(D1),tMe=Bx(D1,!1),nMe=Bx(D1,!0);function rMe(e,t,n,r){Xa(t,i=>{const s=i.x||0,a=i.y||0,o=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(D1(e,i,s,a),rp(e,i),i.fill&&eb(e,i,l)&&e.fill(),i.stroke&&!o&&ip(e,i,l)&&e.stroke()),e.save(),e.translate(s,a),i.clip&&qY(e,i),n&&n.translate(-s,-a),Xa(i,c=>{(c.marktype==="group"||r==null||r.includes(c.marktype))&&this.draw(e,c,n,r)}),n&&n.translate(s,a),e.restore(),o&&i.stroke&&l&&(D1(e,i,s,a),rp(e,i),ip(e,i,l)&&e.stroke())})}function iMe(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const a=n*e.pixelRatio,o=r*e.pixelRatio;return tb(t,l=>{let c,u,f;const h=l.bounds;if(h&&!h.contains(i,s))return;u=l.x||0,f=l.y||0;const d=u+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(i<u||i>d||s<f||s>p))return;if(e.save(),e.translate(u,f),u=i-u,f=s-f,g&&eD(l)&&!nMe(e,l,a,o))return e.restore(),null;const m=l.strokeForeground,x=t.interactive!==!1;return x&&m&&l.stroke&&tMe(e,l,a,o)?(e.restore(),l):(c=tb(l,v=>sMe(v,u,f)?this.pick(v,n,r,u,f):null),!c&&x&&(l.fill||!m&&l.stroke)&&eMe(e,l,a,o)&&(c=l),e.restore(),c||null)})}function sMe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var aMe={type:"group",tag:"g",nested:!1,attr:YDe,bound:QDe,draw:rMe,pick:iMe,isect:HY,content:ZDe,background:KDe,foreground:JDe},M1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function uD(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function fD(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function hD(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function yw(e,t){return e==="center"?t/2:e==="right"?t:0}function _w(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function oMe(e,t,n){const r=uD(t,n),i=fD(t,r),s=hD(t,r),a=(t.x||0)-yw(t.align,i),o=(t.y||0)-_w(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,M1["xmlns:xlink"],"xlink:href"),e("transform",sh(a,o)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function lMe(e,t){const n=t.image,r=fD(t,n),i=hD(t,n),s=(t.x||0)-yw(t.align,r),a=(t.y||0)-_w(t.baseline,i);return e.set(s,a,s+r,a+i)}function cMe(e,t,n){Xa(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=uD(r,this);let s=fD(r,i),a=hD(r,i);if(s===0||a===0)return;let o=(r.x||0)-yw(r.align,s),l=(r.y||0)-_w(r.baseline,a),c,u,f,h;r.aspect!==!1&&(u=i.width/i.height,f=r.width/r.height,u===u&&f===f&&u!==f&&(f<u?(h=s/u,l+=(a-h)/2,a=h):(h=a*u,o+=(s-h)/2,s=h))),(i.complete||i.toDataURL)&&(rp(e,r),e.globalAlpha=(c=r.opacity)!=null?c:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,o,l,s,a))})}var uMe={type:"image",tag:"image",nested:!1,attr:oMe,bound:lMe,draw:cMe,pick:vw(),isect:ca,get:uD,xOffset:yw,yOffset:_w},fMe=cD("line",FDe,jDe);function hMe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",HDe(t)),e("d",t.path)}function l_(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,a=t.scaleY||1,o=(t.angle||0)*Tu,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=np(n)).path=n),o&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(o),N1(e,l,0,0,s,a),e.rotate(-o),e.translate(-r,-i)):N1(e,l,r,i,s,a)}function dMe(e,t){return l_(Px(e,t.angle),t)?e.set(0,0,0,0):cc(e,t,!0)}var pMe={type:"path",tag:"path",nested:!1,attr:hMe,bound:dMe,draw:sD(l_),pick:aD(l_),isect:nD(l_)};function gMe(e,t){e("d",Wp(null,t))}function mMe(e,t){var n,r;return cc(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function EL(e,t){e.beginPath(),Wp(e,t)}var xMe={type:"rect",tag:"path",nested:!1,attr:gMe,bound:mMe,draw:sD(EL),pick:aD(EL),isect:HY};function vMe(e,t){e("transform",GY(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function yMe(e,t){var n,r;return cc(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function KY(e,t,n){var r,i,s,a;return t.stroke&&ip(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,a),!0):!1}function _Me(e,t,n){Xa(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&KY(e,r,i)&&(rp(e,r),e.stroke())}})}function bMe(e,t,n,r){return e.isPointInStroke?KY(e,t,1)&&e.isPointInStroke(n,r):!1}var EMe={type:"rule",tag:"line",nested:!1,attr:vMe,bound:yMe,draw:_Me,pick:vw(bMe),isect:VY},wMe=lD("shape",ODe),SMe=lD("symbol",NDe,rD);const wL=Rq();var bs={height:Zo,measureWidth:dD,estimateWidth:nb,width:nb,canvas:JY};JY(!0);function JY(e){bs.width=e&&lu?dD:nb}function nb(e,t){return ZY(Cu(e,t),Zo(e))}function ZY(e,t){return~~(.8*e.length*t)}function dD(e,t){return Zo(e)<=0||!(t=Cu(e,t))?0:QY(t,bw(e))}function QY(e,t){const n=`(${t}) ${e}`;let r=wL.get(n);return r===void 0&&(lu.font=t,r=lu.measureText(e).width,wL.set(n,r)),r}function Zo(e){return e.fontSize!=null?+e.fontSize||0:11}function ku(e){return e.lineHeight!=null?e.lineHeight:Zo(e)+2}function AMe(e){return ge(e)?e.length>1?e:e[0]:e}function Ux(e){return AMe(e.lineBreak&&e.text&&!ge(e.text)?e.text.split(e.lineBreak):e.text)}function pD(e){const t=Ux(e);return(ge(t)?t.length-1:0)*ku(e)}function Cu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?kMe(e,n):n}function TMe(e){if(bs.width===dD){const t=bw(e);return n=>QY(n,t)}else if(bs.width===nb){const t=Zo(e);return n=>ZY(n,t)}else return t=>bs.width(e,t)}function kMe(e,t){var n=+e.limit,r=TMe(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",a=0,o=t.length,l;if(n-=r(i),s){for(;a<o;)l=a+o>>>1,r(t.slice(l))>n?a=l+1:o=l;return i+t.slice(a)}else{for(;a<o;)l=1+(a+o>>>1),r(t.slice(0,l))<n?a=l:o=l-1;return t.slice(0,a)+i}}function zx(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function bw(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Zo(e)+"px "+zx(e,t)}function gD(e){var t=e.baseline,n=Zo(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ku(e):t==="line-bottom"?.29*n-.5*ku(e):0)}const CMe={left:"start",center:"middle",right:"end"},Bm=new Vn;function Ew(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Mf,t+=r*Math.cos(i),n+=r*Math.sin(i)),Bm.x1=t,Bm.y1=n,Bm}function FMe(e,t){var n=t.dx||0,r=(t.dy||0)+gD(t),i=Ew(t),s=i.x1,a=i.y1,o=t.angle||0,l;e("text-anchor",CMe[t.align]||"start"),o?(l=sh(s,a)+" "+oD(o),(n||r)&&(l+=" "+sh(n,r))):l=sh(s+n,a+r),e("transform",l)}function mD(e,t,n){var r=bs.height(t),i=t.align,s=Ew(t),a=s.x1,o=s.y1,l=t.dx||0,c=(t.dy||0)+gD(t)-Math.round(.8*r),u=Ux(t),f;if(ge(u)?(r+=ku(t)*(u.length-1),f=u.reduce((h,d)=>Math.max(h,bs.width(t,d)),0)):f=bs.width(t,u),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=a,c+=o,l+f,c+r),t.angle&&!n)e.rotate(t.angle*Tu,a,o);else if(n===2)return e.rotatedPoints(t.angle*Tu,a,o);return e}function OMe(e,t,n){Xa(t,r=>{var i=r.opacity==null?1:r.opacity,s,a,o,l,c,u,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=bw(r),e.textAlign=r.align||"left",s=Ew(r),a=s.x1,o=s.y1,r.angle&&(e.save(),e.translate(a,o),e.rotate(r.angle*Tu),a=o=0),a+=r.dx||0,o+=(r.dy||0)+gD(r),u=Ux(r),rp(e,r),ge(u))for(c=ku(r),l=0;l<u.length;++l)f=Cu(r,u[l]),r.fill&&eb(e,r,i)&&e.fillText(f,a,o),r.stroke&&ip(e,r,i)&&e.strokeText(f,a,o),o+=c;else f=Cu(r,u),r.fill&&eb(e,r,i)&&e.fillText(f,a,o),r.stroke&&ip(e,r,i)&&e.strokeText(f,a,o);r.angle&&e.restore()}})}function NMe(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=Ew(t),o=a.x1,l=a.y1,c=mD(Bm,t,1),u=-t.angle*Tu,f=Math.cos(u),h=Math.sin(u),d=f*i-h*s+(o-f*o+h*l),p=h*i+f*s+(l-h*o-f*l);return c.contains(d,p)}function DMe(e,t){const n=mD(Bm,e,2);return Kd(t,n[0],n[1],n[2],n[3])||Kd(t,n[0],n[1],n[4],n[5])||Kd(t,n[4],n[5],n[6],n[7])||Kd(t,n[2],n[3],n[6],n[7])}var MMe={type:"text",tag:"text",nested:!1,attr:FMe,bound:mD,draw:OMe,pick:vw(NMe),isect:DMe},RMe=cD("trail",DDe,GDe),Ds={arc:VDe,area:qDe,group:aMe,image:uMe,line:fMe,path:pMe,rect:xMe,rule:EMe,shape:wMe,symbol:SMe,text:MMe,trail:RMe};function qC(e,t,n){var r=Ds[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Vn),e,n)}var SL={mark:null};function eK(e,t,n){var r=Ds[e.marktype],i=r.bound,s=e.items,a=s&&s.length,o,l,c,u;if(r.nested)return a?c=s[0]:(SL.mark=e,c=SL),u=qC(c,i,n),t=t&&t.union(u)||u,t;if(t=t||e.bounds&&e.bounds.clear()||new Vn,a)for(o=0,l=s.length;o<l;++o)t.union(qC(s[o],i,n));return e.bounds=t}const $Me=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function tK(e,t){return JSON.stringify(e,$Me,t)}function nK(e){const t=typeof e=="string"?JSON.parse(e):e;return rK(t)}function rK(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&rK(n[i]);return t&&eK(e),e}class iK{constructor(t){arguments.length?this.root=nK(t):(this.root=AL({marktype:"group",name:"root",role:"frame"}),this.root.items=[new mw(this.root)])}toJSON(t){return tK(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=AL(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function AL(e,t){const n={bounds:new Vn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function jc(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function xD(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Kn(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=jc(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function js(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function sK(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function ww(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function IMe(e,t,n,r){var i=e&&e.mark,s,a;if(i&&(s=Ds[i.marktype]).tip){for(a=ww(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=s.tip(i.items,a)}return e}let vD=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||ZE(),this._tooltip=n||LMe}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),a=jc(null,"a");for(const o in i)a.setAttribute(o,i[o]);a.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=IMe(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,a=s.width(),o=s.height();let l=s.x1+i[0]+r.left,c=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,c+=t.y||0;return{x:l,y:c,width:a,height:o,left:l,top:c,right:l+a,bottom:c+o}}};function LMe(e,t,n,r){e.element().setAttribute("title",r||"")}class Hx{constructor(t){this._el=null,this._bgcolor=null,this._loader=new zY(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(a=>{a&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const PMe="keydown",BMe="keypress",UMe="keyup",aK="dragenter",c_="dragleave",oK="dragover",XC="pointerdown",zMe="pointerup",rb="pointermove",u_="pointerout",lK="pointerover",YC="mousedown",HMe="mouseup",cK="mousemove",ib="mouseout",uK="mouseover",sb="click",VMe="dblclick",WMe="wheel",fK="mousewheel",ab="touchstart",ob="touchmove",lb="touchend",jMe=[PMe,BMe,UMe,aK,c_,oK,XC,zMe,rb,u_,lK,YC,HMe,cK,ib,uK,sb,VMe,WMe,fK,ab,ob,lb],KC=rb,Um=ib,JC=sb;class Vx extends vD{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=jMe,this.pointermove=kL([rb,cK],[lK,uK],[u_,ib]),this.dragover=kL([oK],[aK],[c_]),this.pointerout=CL([u_,ib]),this.dragleave=CL([c_])}initialize(t,n,r){return this._canvas=t&&xD(t,"canvas"),[sb,YC,XC,rb,u_,c_].forEach(i=>TL(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(fK,t)}pointerdown(t){this._down=this._active,this.fire(XC,t)}mousedown(t){this._down=this._active,this.fire(YC,t)}click(t){this._down===this._active&&(this.fire(sb,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ab,t,!0)}touchmove(t){this.fire(ob,t,!0)}touchend(t){this.fire(lb,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===JC&&i&&i.href?this.handleHref(n,i,i.href):(t===KC||t===Um)&&this.handleTooltip(n,i,t!==Um),s)for(let a=0,o=s.length;a<o;++a)s[a].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(TL(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=ww(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const a=this.context();return Ds[t.marktype].pick.call(this,a,t,n,r,i,s)}}const GMe=e=>e===ab||e===ob||e===lb?[ab,ob,lb]:[e];function TL(e,t){GMe(t).forEach(n=>qMe(e,n))}function qMe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function am(e,t,n){t.forEach(r=>e.fire(r,n))}function kL(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?am(this,e,r):((!i||!i.exit)&&am(this,n,r),this._active=s,am(this,t,r),am(this,e,r))}}function CL(e){return function(t){am(this,e,t),this._active=null}}function XMe(){return typeof window<"u"&&window.devicePixelRatio||1}function YMe(e,t,n,r,i,s){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=a?XMe():i;e.width=t*l,e.height=n*l;for(const c in s)o[c]=s[c];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class cb extends Hx{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Vn,this._tempb=new Vn}initialize(t,n,r,i,s,a){return this._options=a||{},this._canvas=this._options.externalContext?null:ou(1,1,this._options.type),t&&this._canvas&&(js(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)YMe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||he("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,a=this._height,o=this._dirty,l=KMe(i,s,a);r.save();const c=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):JMe(r,l.intersect(o),i);return this.clear(-i[0],-i[1],s,a),this.draw(r,t,c,n),r.restore(),o.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Ds[n.marktype];n.clip&&XDe(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,a=this.context();s.type!=="pdf"&&!s.externalContext&&a.clearRect(t,n,r,i),this._bgcolor!=null&&(a.fillStyle=this._bgcolor,a.fillRect(t,n,r,i))}}const KMe=(e,t,n)=>new Vn().set(0,0,t,n).translate(-e[0],-e[1]);function JMe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class hK extends vD{constructor(t,n){super(t,n);const r=this;r._hrefHandler=aT(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=aT(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Um)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(JC,this._hrefHandler),i.removeEventListener(KC,this._tooltipHandler),i.removeEventListener(Um,this._tooltipHandler)),this._svg=i=t&&xD(t,"svg"),i&&(i.addEventListener(JC,this._hrefHandler),i.addEventListener(KC,this._tooltipHandler),i.addEventListener(Um,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const a={type:t,handler:n,listener:aT(this,n)};(i[r]||(i[r]=[])).push(a),this._svg&&this._svg.addEventListener(r,a.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const aT=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},dK="aria-hidden",yD="aria-label",_D="role",bD="aria-roledescription",pK="graphics-object",ED="graphics-symbol",gK=(e,t,n)=>({[_D]:e,[bD]:t,[yD]:n||void 0}),ZMe=Ga(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),FL={axis:{desc:"axis",caption:tRe},legend:{desc:"legend",caption:nRe},"title-text":{desc:"title",caption:e=>`Title text '${NL(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${NL(e)}'`}},OL={ariaRole:_D,ariaRoleDescription:bD,description:yD};function mK(e,t){const n=t.aria===!1;if(e(dK,n||void 0),n||t.description==null)for(const r in OL)e(OL[r],void 0);else{const r=t.mark.marktype;e(yD,t.description),e(_D,t.ariaRole||(r==="group"?pK:ED)),e(bD,t.ariaRoleDescription||`${r} mark`)}}function xK(e){return e.aria===!1?{[dK]:!0}:ZMe[e.role]?null:FL[e.role]?eRe(e,FL[e.role]):QMe(e)}function QMe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return gK(n?pK:ED,`${t} mark container`,e.description)}function eRe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return gK(t.role||ED,t.desc,n.description||r(n))}catch{return null}}function NL(e){return Ie(e.text).join(" ")}function tRe(e){const t=e.datum,n=e.orient,r=t.title?vK(e):null,i=e.context,s=i.scales[t.scale].value,a=i.dataflow.locale(),o=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${tp(o)?"discrete":o} scale with ${NY(a,s,e)}`}function nRe(e){const t=e.datum,n=t.title?vK(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),a=e.context,o=a.scales[i[s[0]]].value,l=a.dataflow.locale();return iRe(r)+(n?` titled '${n}'`:"")+` for ${rRe(s)} with ${NY(l,o,e)}`}function vK(e){try{return Ie(Ft(e.items).items[0].text).join(" ")}catch{return null}}function rRe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ft(e)}function iRe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const yK=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),sRe=e=>yK(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function wD(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},a=(l,c)=>(c!=null&&(t+=` ${l}="${sRe(c)}"`),o),o={open(l){s(l),t="<"+l;for(var c=arguments.length,u=new Array(c>1?c-1:0),f=1;f<c;f++)u[f-1]=arguments[f];for(const h of u)for(const d in h)a(d,h[d]);return o},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),o},attr:a,text:l=>(n+=yK(l),o),toString:()=>e};return o}const _K=e=>bK(wD(),e)+"";function bK(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):bK(e,r)}return e.close()}const ub={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},fb={blend:"mix-blend-mode"},EK={fill:"none","stroke-miterlimit":10},Sg=0,DL="http://www.w3.org/2000/xmlns/",qn=M1.xmlns;class SD extends Hx{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Kn(t,0,"svg",qn),this._svg.setAttributeNS(DL,"xmlns",qn),this._svg.setAttributeNS(DL,"xmlns:xlink",M1["xmlns:xlink"]),this._svg.setAttribute("version",M1.version),this._svg.setAttribute("class","marks"),js(t,1),this._root=Kn(this._svg,Sg,"g",qn),Gc(this._root,EK),js(this._svg,Sg+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Gc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Kn(t,Sg,"rect",qn),Gc(r,{width:this._width,height:this._height,fill:n}));const i=_K(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),js(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,a,o,l,c;for(o=0,l=t.length;o<l;++o)if(r=t[o],i=r.mark,i.marktype!==s&&(s=i.marktype,a=Ds[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,ML(r,n),i.items.forEach(u=>{u.dirty=n})),!i.zdirty){if(r.exit){a.nested&&i.items.length?(c=i.items[0],c._svg&&this._update(a,c._svg,c)):r._svg&&(c=r._svg.parentNode,c&&c.removeChild(r._svg)),r._svg=null;continue}r=a.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,ML(r,n)):this._update(a,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,a=n.marktype,o=Ds[a],l=n.interactive===!1?"none":null,c=o.tag==="g",u=RL(n,t,r,"g",s);if(a!=="group"&&i!=null&&!i.includes(a))return js(u,0),n._svg;u.setAttribute("class",sK(n));const f=xK(n);for(const g in f)di(u,g,f[g]);c||di(u,"pointer-events",l),di(u,"clip-path",n.clip?tD(this,n,n.group):null);let h=null,d=0;const p=g=>{const m=this.isDirty(g),x=RL(g,u,h,o.tag,s);m&&(this._update(o,x,g),c&&lRe(this,x,g,i)),h=x,++d};return o.nested?n.items.length&&p(n.items[0]):Xa(n,p),js(u,d),u}_update(t,n,r){Nl=n,Vr=n.__values__,mK(zm,r),t.attr(zm,r,this);const i=uRe[t.type];i&&i.call(this,t,n,r),Nl&&this.style(Nl,r)}style(t,n){if(n!=null){for(const r in ub){let i=r==="font"?zx(n):n[r];if(i===Vr[r])continue;const s=ub[r];i==null?t.removeAttribute(s):(ZN(i)&&(i=MY(i,this._defs.gradient,wK())),t.setAttribute(s,i+"")),Vr[r]=i}for(const r in fb)f_(t,fb[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Kn(t,Sg+1,"defs",qn)),i=aRe(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Kn(t,Sg+1,"defs",qn)),i=oRe(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):js(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function ML(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function aRe(e,t,n){let r,i,s;if(t.gradient==="radial"){let a=Kn(e,n++,"pattern",qn);Gc(a,{id:Q2+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Kn(a,0,"rect",qn),Gc(a,{width:1,height:1,fill:`url(${wK()}#${t.id})`}),e=Kn(e,n++,"radialGradient",qn),Gc(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Kn(e,n++,"linearGradient",qn),Gc(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Kn(e,r,"stop",qn),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return js(e,r),n}function oRe(e,t,n){let r;return e=Kn(e,n,"clipPath",qn),e.setAttribute("id",t.id),t.path?(r=Kn(e,0,"path",qn),r.setAttribute("d",t.path)):(r=Kn(e,0,"rect",qn),Gc(r,{x:0,y:0,width:t.width,height:t.height})),js(e,1),n+1}function lRe(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Xa(n,a=>{i=e.mark(t,a,i,r),++s}),js(t,1+s)}function RL(e,t,n,r,i){let s=e._svg,a;if(!s&&(a=t.ownerDocument,s=jc(a,r,qn),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const o=jc(a,"path",qn);s.appendChild(o),o.__data__=e;const l=jc(a,"g",qn);s.appendChild(l),l.__data__=e;const c=jc(a,"path",qn);s.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||cRe(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function cRe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Nl=null,Vr=null;const uRe={group(e,t,n){const r=Nl=t.childNodes[2];Vr=r.__values__,e.foreground(zm,n,this),Vr=t.__values__,Nl=t.childNodes[1],e.content(zm,n,this);const i=Nl=t.childNodes[0];e.background(zm,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Vr.events&&(di(r,"pointer-events",s),di(i,"pointer-events",s),Vr.events=s),n.strokeForeground&&n.stroke){const a=n.fill;di(r,"display",null),this.style(i,n),di(i,"stroke",null),a&&(n.fill=null),Vr=r.__values__,this.style(r,n),a&&(n.fill=a),Nl=null}else di(r,"display","none")},image(e,t,n){n.smooth===!1?(f_(t,"image-rendering","optimizeSpeed"),f_(t,"image-rendering","pixelated")):f_(t,"image-rendering",null)},text(e,t,n){const r=Ux(n);let i,s,a,o;ge(r)?(s=r.map(l=>Cu(n,l)),i=s.join(`
`),i!==Vr.text&&(js(t,0),a=t.ownerDocument,o=ku(n),s.forEach((l,c)=>{const u=jc(a,"tspan",qn);u.__data__=n,u.textContent=l,c&&(u.setAttribute("x",0),u.setAttribute("dy",o)),t.appendChild(u)}),Vr.text=i)):(s=Cu(n,r),s!==Vr.text&&(t.textContent=s,Vr.text=s)),di(t,"font-family",zx(n)),di(t,"font-size",Zo(n)+"px"),di(t,"font-style",n.fontStyle),di(t,"font-variant",n.fontVariant),di(t,"font-weight",n.fontWeight)}};function zm(e,t,n){t!==Vr[e]&&(n?fRe(Nl,e,t,n):di(Nl,e,t),Vr[e]=t)}function f_(e,t,n){n!==Vr[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Vr[t]=n)}function Gc(e,t){for(const n in t)di(e,n,t[n])}function di(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function fRe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function wK(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class SK extends Hx{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=wD();n.open("svg",ut({},M1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",EK,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Ds[n.marktype],i=r.tag,s=[mK,r.attr];t.open("g",{class:sK(n),"clip-path":n.clip?tD(this,n,n.group):null},xK(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const a=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(i,this.attr(n,o,s,i!=="g"?i:null)),i==="text"){const c=Ux(o);if(ge(c)){const u={x:0,dy:ku(o)};for(let f=0;f<c.length;++f)t.open("tspan",f?u:null).text(Cu(o,c[f])).close()}else t.text(Cu(o,c))}else if(i==="g"){const c=o.strokeForeground,u=o.fill,f=o.stroke;c&&f&&(o.stroke=null),t.open("path",this.attr(n,o,r.background,"bgrect")).close(),t.open("g",this.attr(n,o,r.content)),Xa(o,h=>this.mark(t,h)),t.close(),c&&f?(u&&(o.fill=null),o.stroke=f,t.open("path",this.attr(n,o,r.foreground,"bgrect")).close(),u&&(o.fill=u)):t.open("path",this.attr(n,o,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&a(n.items[0]):Xa(n,a),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},a=(o,l,c,u)=>{s[u||o]=l};return Array.isArray(r)?r.forEach(o=>o(a,n,this)):r(a,n,this),i&&hRe(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const a=n[s],o=a.stops;a.gradient==="radial"?(t.open("pattern",{id:Q2+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):t.open("linearGradient",{id:s,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const s in r){const a=r[s];t.open("clipPath",{id:s}),a.path?t.open("path",{d:a.path}).close():t.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),t.close()}t.close()}}}function hRe(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=zx(t),e["font-size"]=Zo(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in ub){let o=t[a];const l=ub[a];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(ZN(o)&&(o=MY(o,i.gradient,"")),e[l]=o)}for(const a in fb){const o=t[a];o!=null&&(s=s||[],s.push(`${fb[a]}: ${o};`))}return s&&(e.style=s.join(" ")),e}const Ta={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function dRe(e){Ta.svgMarkTypes=e.svgMarkTypes??["text"],Ta.svgOnTop=e.svgOnTop??!0,Ta.debug=e.debug??!1}class ZC extends Hx{constructor(t){super(t),this._svgRenderer=new SD(t),this._canvasRenderer=new cb(t)}initialize(t,n,r,i,s){this._root_el=Kn(t,0,"div");const a=Kn(this._root_el,0,"div"),o=Kn(this._root_el,1,"div");return this._root_el.style.position="relative",Ta.debug||(a.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Ta.svgOnTop?o:a,this._canvasEl=Ta.svgOnTop?a:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Ta.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Ta.svgMarkTypes.includes(s));this._svgRenderer.render(t,Ta.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Ta.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class AK extends Vx{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Kn(Kn(t,0,"div"),Ta.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const TK="canvas",kK="hybrid",CK="png",FK="svg",OK="none",qc={Canvas:TK,PNG:CK,SVG:FK,Hybrid:kK,None:OK},Fh={};Fh[TK]=Fh[CK]={renderer:cb,headless:cb,handler:Vx};Fh[FK]={renderer:SD,headless:SK,handler:hK};Fh[kK]={renderer:ZC,headless:ZC,handler:AK};Fh[OK]={};function Sw(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Fh[e]=t,this):Fh[e]}function NK(e,t,n){const r=[],i=new Vn().union(t),s=e.marktype;return s?DK(e,i,n,r):s==="group"?MK(e,i,n,r):he("Intersect scene must be mark node or group item.")}function DK(e,t,n,r){if(pRe(e,t,n)){const i=e.items,s=e.marktype,a=i.length;let o=0;if(s==="group")for(;o<a;++o)MK(i[o],t,n,r);else for(const l=Ds[s].isect;o<a;++o){const c=i[o];RK(c,t,l)&&r.push(c)}}return r}function pRe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function MK(e,t,n,r){n&&n(e.mark)&&RK(e,t,Ds.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const a=e.x||0,o=e.y||0;t.translate(-a,-o);for(let l=0;l<s;++l)DK(i[l],t,n,r);t.translate(a,o)}return r}function RK(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const oT=new Vn;function $K(e){const t=e.clip;if(ht(t))t(Px(oT.clear()));else if(t)oT.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(oT)}const gRe=1e-9;function AD(e,t,n){return e===t?!0:n==="path"?IK(e,t):e instanceof Date&&t instanceof Date?+e==+t:$t(e)&&$t(t)?Math.abs(e-t)<=gRe:!e||!t||!$e(e)&&!$e(t)?e==t:mRe(e,t)}function IK(e,t){return AD(np(e),np(t))}function mRe(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!AD(e[i],t[i],i))return!1;return typeof e==typeof t}function xRe(){UY(),zNe()}const sp="top",Da="left",Ia="right",Fu="bottom",vRe="top-left",yRe="top-right",_Re="bottom-left",bRe="bottom-right",TD="start",QC="middle",gi="end",ERe="x",wRe="y",Aw="group",kD="axis",CD="title",SRe="frame",ARe="scope",FD="legend",LK="row-header",PK="row-footer",BK="row-title",UK="column-header",zK="column-footer",HK="column-title",TRe="padding",kRe="symbol",VK="fit",WK="fit-x",jK="fit-y",CRe="pad",OD="none",dy="all",eF="each",ND="flush",Xc="column",Yc="row";function GK(e){le.call(this,null,e)}Fe(GK,le,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Ds[i],a=s.bound;let o=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),o=py(r,a),r.items.forEach(c=>{c.bounds.clear().union(o)});else if(i===Aw||e.modified())switch(t.visit(t.MOD,c=>n.dirty(c)),o.clear(),r.items.forEach(c=>o.union(py(c,a))),r.role){case kD:case FD:case CD:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,c=>{o.union(py(c,a))}),t.visit(t.MOD,c=>{l=l||o.alignsWith(c.bounds),n.dirty(c),o.union(py(c,a))}),l&&(o.clear(),r.items.forEach(c=>o.union(c.bounds)));return $K(r),t.modifies("bounds")}});function py(e,t,n){return t(e.bounds.clear(),e,n)}const $L=":vega_identifier:";function DD(e){le.call(this,0,e)}DD.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Fe(DD,le,{transform(e,t){const n=FRe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function FRe(e){return e._signals[$L]||(e._signals[$L]=e.add(0))}function qK(e){le.call(this,null,e)}Fe(qK,le,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,ORe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Aw?mw:gw;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function ORe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function XK(e){le.call(this,null,e)}const IL={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!YK(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},YK=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),LL=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(YK(i,s=e[n].bounds,t))return!0},NRe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},DRe=(e,t,n)=>{var r=e.range(),i=new Vn;return t===sp||t===Fu?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},PL=e=>(e.forEach(t=>t.opacity=1),e),BL=(e,t)=>e.reflow(t.modified()).modifies("opacity");Fe(XK,le,{transform(e,t){const n=IL[e.method]||IL.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(PL(i),t=BL(t,e)),t;if(i=i.filter(NRe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=PL(i),t=BL(t,e),s.length>=3&&LL(s,r)){do s=n(s,r);while(s.length>=3&&LL(s,r));s.length<3&&!Ft(i).opacity&&(s.length>1&&(Ft(s).opacity=0),Ft(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=DRe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{a(l)||(l.opacity=0)}));const o=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function KK(e){le.call(this,null,e)}Fe(KK,le,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const zr=new Vn;function Jd(e,t,n){return e[t]===n?0:(e[t]=n,1)}function MRe(e){var t=e.items[0].orient;return t===Da||t===Ia}function RRe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function $Re(e,t,n,r){var i=t.items[0],s=i.datum,a=i.translate!=null?i.translate:.5,o=i.orient,l=RRe(s),c=i.range,u=i.offset,f=i.position,h=i.minExtent,d=i.maxExtent,p=s.title&&i.items[l[2]].items[0],g=i.titlePadding,m=i.bounds,x=p&&pD(p),v=0,y=0,_,b;switch(zr.clear().union(m),m.clear(),(_=l[0])>-1&&m.union(i.items[_].bounds),(_=l[1])>-1&&m.union(i.items[_].bounds),o){case sp:v=f||0,y=-u,b=Math.max(h,Math.min(d,-m.y1)),m.add(0,-b).add(c,0),p&&gy(e,p,b,g,x,0,-1,m);break;case Da:v=-u,y=f||0,b=Math.max(h,Math.min(d,-m.x1)),m.add(-b,0).add(0,c),p&&gy(e,p,b,g,x,1,-1,m);break;case Ia:v=n+u,y=f||0,b=Math.max(h,Math.min(d,m.x2)),m.add(0,0).add(b,c),p&&gy(e,p,b,g,x,1,1,m);break;case Fu:v=f||0,y=r+u,b=Math.max(h,Math.min(d,m.y2)),m.add(0,0).add(c,b),p&&gy(e,p,b,g,0,0,1,m);break;default:v=i.x,y=i.y}return cc(m.translate(v,y),i),Jd(i,"x",v+a)|Jd(i,"y",y+a)&&(i.bounds=zr,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function gy(e,t,n,r,i,s,a,o){const l=t.bounds;if(t.auto){const c=a*(n+i+r);let u=0,f=0;e.dirty(t),s?u=(t.x||0)-(t.x=c):f=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(l.translate(-u,-f)),e.dirty(t)}o.union(l)}const UL=(e,t)=>Math.floor(Math.min(e,t)),zL=(e,t)=>Math.ceil(Math.max(e,t));function IRe(e){var t=e.items,n=t.length,r=0,i,s;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===Aw)switch(i.role){case kD:case FD:case CD:break;case LK:a.rowheaders.push(...s);break;case PK:a.rowfooters.push(...s);break;case UK:a.colheaders.push(...s);break;case zK:a.colfooters.push(...s);break;case BK:a.rowtitle=s[0];break;case HK:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function LRe(e){return new Vn().set(0,0,e.width||0,e.height||0)}function PRe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function fn(e,t,n){const r=$e(e)?e[t]:e;return r??(n!==void 0?n:0)}function HL(e){return e<0?Math.ceil(-e):0}function JK(e,t,n){var r=!n.nodirty,i=n.bounds===ND?LRe:PRe,s=zr.set(0,0,0,0),a=fn(n.align,Xc),o=fn(n.align,Yc),l=fn(n.padding,Xc),c=fn(n.padding,Yc),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),h=t.length,d=Array(h),p=Array(u),g=0,m=Array(h),x=Array(f),v=0,y=Array(h),_=Array(h),b=Array(h),w,E,A,S,k,T,O,C,D,N,R;for(E=0;E<u;++E)p[E]=0;for(E=0;E<f;++E)x[E]=0;for(E=0;E<h;++E)T=t[E],k=b[E]=i(T),T.x=T.x||0,y[E]=0,T.y=T.y||0,_[E]=0,A=E%u,S=~~(E/u),g=Math.max(g,O=Math.ceil(k.x2)),v=Math.max(v,C=Math.ceil(k.y2)),p[A]=Math.max(p[A],O),x[S]=Math.max(x[S],C),d[E]=l+HL(k.x1),m[E]=c+HL(k.y1),r&&e.dirty(t[E]);for(E=0;E<h;++E)E%u===0&&(d[E]=0),E<u&&(m[E]=0);if(a===eF)for(A=1;A<u;++A){for(R=0,E=A;E<h;E+=u)R<d[E]&&(R=d[E]);for(E=A;E<h;E+=u)d[E]=R+p[A-1]}else if(a===dy){for(R=0,E=0;E<h;++E)E%u&&R<d[E]&&(R=d[E]);for(E=0;E<h;++E)E%u&&(d[E]=R+g)}else for(a=!1,A=1;A<u;++A)for(E=A;E<h;E+=u)d[E]+=p[A-1];if(o===eF)for(S=1;S<f;++S){for(R=0,E=S*u,w=E+u;E<w;++E)R<m[E]&&(R=m[E]);for(E=S*u;E<w;++E)m[E]=R+x[S-1]}else if(o===dy){for(R=0,E=u;E<h;++E)R<m[E]&&(R=m[E]);for(E=u;E<h;++E)m[E]=R+v}else for(o=!1,S=1;S<f;++S)for(E=S*u,w=E+u;E<w;++E)m[E]+=x[S-1];for(D=0,E=0;E<h;++E)D=d[E]+(E%u?D:0),y[E]+=D-t[E].x;for(A=0;A<u;++A)for(N=0,E=A;E<h;E+=u)N+=m[E],_[E]+=N-t[E].y;if(a&&fn(n.center,Xc)&&f>1)for(E=0;E<h;++E)k=a===dy?g:p[E%u],D=k-b[E].x2-t[E].x-y[E],D>0&&(y[E]+=D/2);if(o&&fn(n.center,Yc)&&u!==1)for(E=0;E<h;++E)k=o===dy?v:x[~~(E/u)],N=k-b[E].y2-t[E].y-_[E],N>0&&(_[E]+=N/2);for(E=0;E<h;++E)s.union(b[E].translate(y[E],_[E]));switch(D=fn(n.anchor,ERe),N=fn(n.anchor,wRe),fn(n.anchor,Xc)){case gi:D-=s.width();break;case QC:D-=s.width()/2}switch(fn(n.anchor,Yc)){case gi:N-=s.height();break;case QC:N-=s.height()/2}for(D=Math.round(D),N=Math.round(N),s.clear(),E=0;E<h;++E)t[E].mark.bounds.clear();for(E=0;E<h;++E)T=t[E],T.x+=y[E]+=D,T.y+=_[E]+=N,s.union(T.mark.bounds.union(T.bounds.translate(y[E],_[E]))),r&&e.dirty(T);return s}function BRe(e,t,n){var r=IRe(t),i=r.marks,s=n.bounds===ND?URe:zRe,a=n.offset,o=n.columns||i.length,l=o<=0?1:Math.ceil(i.length/o),c=l*o,u,f,h,d,p,g,m;const x=JK(e,i,n);x.empty()&&x.set(0,0,0,0),r.rowheaders&&(g=fn(n.headerBand,Yc,null),u=my(e,r.rowheaders,i,o,l,-fn(a,"rowHeader"),UL,0,s,"x1",0,o,1,g)),r.colheaders&&(g=fn(n.headerBand,Xc,null),f=my(e,r.colheaders,i,o,o,-fn(a,"columnHeader"),UL,1,s,"y1",0,1,o,g)),r.rowfooters&&(g=fn(n.footerBand,Yc,null),h=my(e,r.rowfooters,i,o,l,fn(a,"rowFooter"),zL,0,s,"x2",o-1,o,1,g)),r.colfooters&&(g=fn(n.footerBand,Xc,null),d=my(e,r.colfooters,i,o,o,fn(a,"columnFooter"),zL,1,s,"y2",c-o,1,o,g)),r.rowtitle&&(p=fn(n.titleAnchor,Yc),m=fn(a,"rowTitle"),m=p===gi?h+m:u-m,g=fn(n.titleBand,Yc,.5),VL(e,r.rowtitle,m,0,x,g)),r.coltitle&&(p=fn(n.titleAnchor,Xc),m=fn(a,"columnTitle"),m=p===gi?d+m:f-m,g=fn(n.titleBand,Xc,.5),VL(e,r.coltitle,m,1,x,g))}function URe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function zRe(e,t){return e.bounds[t]}function my(e,t,n,r,i,s,a,o,l,c,u,f,h,d){var p=n.length,g=0,m=0,x,v,y,_,b,w,E,A,S;if(!p)return g;for(x=u;x<p;x+=f)n[x]&&(g=a(g,l(n[x],c)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=s,v=0,_=t.length;v<_;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(x=u,v=0,_=t.length;v<_;++v,x+=f){for(w=t[v],b=w.mark.bounds,y=x;y>=0&&(E=n[y])==null;y-=h);o?(A=d==null?E.x:Math.round(E.bounds.x1+d*E.bounds.width()),S=g):(A=g,S=d==null?E.y:Math.round(E.bounds.y1+d*E.bounds.height())),b.union(w.bounds.translate(A-(w.x||0),S-(w.y||0))),w.x=A,w.y=S,e.dirty(w),m=a(m,b[c])}return m}function VL(e,t,n,r,i,s){if(t){e.dirty(t);var a=n,o=n;r?a=Math.round(i.x1+s*i.width()):o=Math.round(i.y1+s*i.height()),t.bounds.translate(a-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=o,e.dirty(t)}}function HRe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function VRe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function WRe(e,t,n,r,i,s,a){const o=HRe(n,t),l=VRe(e,o("offset",0)),c=o("anchor",TD),u=c===gi?1:c===QC?.5:0,f={align:eF,bounds:o("bounds",ND),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Da:f.anchor={x:Math.floor(r.x1)-l,column:gi,y:u*(a||r.height()+2*r.y1),row:c};break;case Ia:f.anchor={x:Math.ceil(r.x2)+l,y:u*(a||r.height()+2*r.y1),row:c};break;case sp:f.anchor={y:Math.floor(i.y1)-l,row:gi,x:u*(s||i.width()+2*i.x1),column:c};break;case Fu:f.anchor={y:Math.ceil(i.y2)+l,x:u*(s||i.width()+2*i.x1),column:c};break;case vRe:f.anchor={x:l,y:l};break;case yRe:f.anchor={x:s-l,y:l,column:gi};break;case _Re:f.anchor={x:l,y:a-l,row:gi};break;case bRe:f.anchor={x:s-l,y:a-l,column:gi,row:gi};break}return f}function jRe(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,a=n.x,o=n.y,l,c;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),qRe(e,n,n.items[0].items[0]),s=GRe(n,s),l=2*n.padding,c=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),c=Math.ceil(s.height()+c)),r.type===kRe&&XRe(n.items[0].items[0].items[0].items),i!==OD&&(n.x=a=0,n.y=o=0),n.width=l,n.height=c,cc(s.set(a,o,a+l,o+c),n),n.mark.bounds.clear().union(s),n}function GRe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function qRe(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&Ag(e,n,i,s);else{var a=t.items[1].items[0],o=a.anchor,l=t.titlePadding||0,c=r-a.x,u=r-a.y;switch(a.orient){case Da:i+=Math.ceil(a.bounds.width())+l;break;case Ia:case Fu:break;default:s+=a.bounds.height()+l}switch((i||s)&&Ag(e,n,i,s),a.orient){case Da:u+=kd(t,n,a,o,1,1);break;case Ia:c+=kd(t,n,a,gi,0,0)+l,u+=kd(t,n,a,o,1,1);break;case Fu:c+=kd(t,n,a,o,0,0),u+=kd(t,n,a,gi,-1,0,1)+l;break;default:c+=kd(t,n,a,o,0,0)}(c||u)&&Ag(e,a,c,u),(c=Math.round(a.bounds.x1-r))<0&&(Ag(e,n,-c,0),Ag(e,a,-c,0))}}function kd(e,t,n,r,i,s,a){const o=e.datum.type!=="symbol",l=n.datum.vgrad,c=o&&(s||!l)&&!a?t.items[0]:t,u=c.bounds[i?"y2":"x2"]-e.padding,f=l&&s?u:0,h=l&&s?0:u,d=i<=0?0:pD(n);return Math.round(r===TD?f:r===gi?h-d:.5*(u-d))}function Ag(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function XRe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function YRe(e,t,n,r,i){var s=t.items[0],a=s.frame,o=s.orient,l=s.anchor,c=s.offset,u=s.padding,f=s.items[0].items[0],h=s.items[1]&&s.items[1].items[0],d=o===Da||o===Ia?r:n,p=0,g=0,m=0,x=0,v=0,y;if(a!==Aw?o===Da?(p=i.y2,d=i.y1):o===Ia?(p=i.y1,d=i.y2):(p=i.x1,d=i.x2):o===Da&&(p=r,d=0),y=l===TD?p:l===gi?d:(p+d)/2,h&&h.text){switch(o){case sp:case Fu:v=f.bounds.height()+u;break;case Da:x=f.bounds.width()+u;break;case Ia:x=-f.bounds.width()-u;break}zr.clear().union(h.bounds),zr.translate(x-(h.x||0),v-(h.y||0)),Jd(h,"x",x)|Jd(h,"y",v)&&(e.dirty(h),h.bounds.clear().union(zr),h.mark.bounds.clear().union(zr),e.dirty(h)),zr.clear().union(h.bounds)}else zr.clear();switch(zr.union(f.bounds),o){case sp:g=y,m=i.y1-zr.height()-c;break;case Da:g=i.x1-zr.width()-c,m=y;break;case Ia:g=i.x2+zr.width()+c,m=y;break;case Fu:g=y,m=i.y2+c;break;default:g=s.x,m=s.y}return Jd(s,"x",g)|Jd(s,"y",m)&&(zr.translate(g,m),e.dirty(s),s.bounds.clear().union(zr),t.bounds.clear().union(zr),e.dirty(s)),s.bounds}function ZK(e){le.call(this,null,e)}Fe(ZK,le,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&BRe(n,r,e.layout),JRe(n,r,e)}),KRe(e.mark.group)?t.reflow():t}});function KRe(e){return e&&e.mark.role!=="legend-entry"}function JRe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),a=new Vn().set(0,0,i,s),o=a.clone(),l=a.clone(),c=[],u,f,h,d,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case kD:d=MRe(f)?o:l,d.union($Re(e,f,i,s));break;case CD:u=f;break;case FD:c.push(jRe(e,f));break;case SRe:case ARe:case LK:case PK:case BK:case UK:case zK:case HK:o.union(f.bounds),l.union(f.bounds);break;default:a.union(f.bounds)}if(c.length){const m={};c.forEach(x=>{h=x.orient||Ia,h!==OD&&(m[h]||(m[h]=[])).push(x)});for(const x in m){const v=m[x];JK(e,v,WRe(v,x,n.legends,o,l,i,s))}c.forEach(x=>{const v=x.bounds;if(v.equals(x._bounds)||(x.bounds=x._bounds,e.dirty(x),x.bounds=v,e.dirty(x)),n.autosize&&(n.autosize.type===VK||n.autosize.type===WK||n.autosize.type===jK))switch(x.orient){case Da:case Ia:a.add(v.x1,0).add(v.x2,0);break;case sp:case Fu:a.add(0,v.y1).add(0,v.y2)}else a.union(v)})}a.union(o).union(l),u&&a.union(YRe(e,u,i,s,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),ZRe(e,t,a,n)}function ZRe(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let a=e._width,o=e._height,l=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const h=Math.max(0,Math.ceil(n.x2-l)),d=Math.max(0,Math.ceil(n.y2-u));if(i.contains===TRe){const p=e.padding();a-=p.left+p.right,o-=p.top+p.bottom}s===OD?(c=0,f=0,l=a,u=o):s===VK?(l=Math.max(0,a-c-h),u=Math.max(0,o-f-d)):s===WK?(l=Math.max(0,a-c-h),o=u+f+d):s===jK?(a=l+c+h,u=Math.max(0,o-f-d)):s===CRe&&(a=l+c+h,o=u+f+d),e._resizeView(a,o,l,u,[c,f],i.resize)}const QRe=Object.freeze(Object.defineProperty({__proto__:null,bound:GK,identifier:DD,mark:qK,overlap:XK,render:KK,viewlayout:ZK},Symbol.toStringTag,{value:"Module"}));function QK(e){le.call(this,null,e)}Fe(QK,le,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,o=KN(s,a,e.minstep),l=e.format||TY(n,s,o,e.formatSpecifier,e.formatType,!!e.values),c=e.values?AY(s,e.values,o):JN(s,o);return i&&(r.rem=i),i=c.map((u,f)=>jt({index:f/(c.length-1||1),value:u,label:l(u)})),e.extra&&i.length&&i.push(jt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function eJ(e){le.call(this,null,e)}function e$e(){return jt({})}function t$e(e){const t=Bp().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Fe(eJ,le,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||e$e,s=e.key||Ke,a=this.value;return ge(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(s))&&he("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=t$e(s)),t.visit(t.ADD,o=>{const l=s(o);let c=a.get(l);c?c.exit?(a.empty--,r.add.push(c)):r.mod.push(c):(c=i(o),a.set(l,c),r.add.push(c)),c.datum=o,c.exit=!1}),t.visit(t.MOD,o=>{const l=s(o),c=a.get(l);c&&(c.datum=o,r.mod.push(c))}),t.visit(t.REM,o=>{const l=s(o),c=a.get(l);o===c.datum&&!c.exit&&(r.rem.push(c),c.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function tJ(e){le.call(this,null,e)}Fe(tJ,le,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(ge(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var a=s==="enter",o=i.update||kc,l=i.enter||kc,c=i.exit||kc,u=(s&&!a?i[s]:o)||kc;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),o(f,e)}),n.modifies(l.output),n.modifies(o.output),u!==kc&&u!==o&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&c!==kc&&(t.visit(t.REM,f=>{c(f,e)}),n.modifies(c.output)),a||u!==kc){const f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,h=>{const d=l(h,e)||r;(u(h,e)||d)&&n.mod.push(h)}),n.mod.length&&n.modifies(l.output)):t.visit(f,h=>{(u(h,e)||r)&&n.mod.push(h)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}});function nJ(e){le.call(this,[],e)}Fe(nJ,le,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||r_,a=e.scale,o=+e.limit,l=KN(a,e.count==null?5:e.count,e.minstep),c=!!e.values||s===r_,u=e.format||OY(n,a,l,s,e.formatSpecifier,e.formatType,c),f=e.values||FY(a,l),h,d,p,g,m;return i&&(r.rem=i),s===r_?(o&&f.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,o-1),m=!0):i=f,ht(p=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((x,v)=>Math.max(x,p(v,e)),0)):p=li(g=p||8),i=i.map((x,v)=>jt({index:v,label:u(x,v,i),value:x,offset:g,size:p(x,e)})),m&&(m=f[i.length],i.push(jt({index:i.length,label:`${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):s===CNe?(h=a.domain(),d=EY(a,h[0],Ft(h)),f.length<3&&!e.values&&h[0]!==Ft(h)&&(f=[h[0],Ft(h)]),i=f.map((x,v)=>jt({index:v,label:u(x,v,f),value:x,perc:d(x)}))):(p=f.length-1,d=BNe(a),i=f.map((x,v)=>jt({index:v,label:u(x,v,f),value:x,perc:v?d(x):0,perc2:v===p?1:d(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const n$e=e=>e.source.x,r$e=e=>e.source.y,i$e=e=>e.target.x,s$e=e=>e.target.y;function MD(e){le.call(this,{},e)}MD.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Fe(MD,le,{transform(e,t){var n=e.sourceX||n$e,r=e.sourceY||r$e,i=e.targetX||i$e,s=e.targetY||s$e,a=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",c=WL.get(l+"-"+o)||WL.get(l);return c||he("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[a]=c(n(u),r(u),i(u),s(u))}),t.reflow(e.modified()).modifies(a)}});const rJ=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,a$e=(e,t,n,r)=>rJ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),iJ=(e,t,n,r)=>{var i=n-e,s=r-t,a=Math.hypot(i,s)/2,o=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+o+" 0 1 "+n+","+r},o$e=(e,t,n,r)=>iJ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),sJ=(e,t,n,r)=>{const i=n-e,s=r-t,a=.2*(i+s),o=.2*(s-i);return"M"+e+","+t+"C"+(e+a)+","+(t+o)+" "+(n+o)+","+(r-a)+" "+n+","+r},l$e=(e,t,n,r)=>sJ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),c$e=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,u$e=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,f$e=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*o+"L"+r*a+","+r*o},h$e=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},d$e=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},p$e=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*a+","+l*o+" "+r*a+","+r*o},WL=Bp({line:rJ,"line-radial":a$e,arc:iJ,"arc-radial":o$e,curve:sJ,"curve-radial":l$e,"orthogonal-horizontal":c$e,"orthogonal-vertical":u$e,"orthogonal-radial":f$e,"diagonal-horizontal":h$e,"diagonal-vertical":d$e,"diagonal-radial":p$e});function RD(e){le.call(this,null,e)}RD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Fe(RD,le,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||Ip,a=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,c=l.map(s),u=c.length,f=a,h=(o-a)/qH(c),d=ms(u),p,g,m;for(e.sort&&d.sort((x,v)=>c[x]-c[v]),p=0;p<u;++p)m=c[d[p]],g=l[d[p]],g[r]=f,g[i]=f+=m*h;return this.value=c,t.reflow(e.modified()).modifies(n)}});const g$e=5;function m$e(e){const t=e.type;return!e.bins&&(t===Q0||t===Nx||t===Dx)}function aJ(e){return qN(e)&&e!==Mo}const x$e=Ga(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function oJ(e){le.call(this,null,e),this.modified(!0)}Fe(oJ,le,{transform(e,t){var n=t.dataflow,r=this.value,i=v$e(e);(!r||i!==r.type)&&(this.value=r=Ht(i)());for(i in e)if(!x$e[i]){if(i==="padding"&&aJ(r.type))continue;ht(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return S$e(r,e,w$e(r,e,_$e(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function v$e(e){var t=e.type,n="",r;return t===Mo?Mo+"-"+Q0:(y$e(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Mo+"-":r===3?Vp+"-":""),(n+t||Q0).toLowerCase())}function y$e(e){const t=e.type;return qN(t)&&t!==kh&&t!==Ch&&(e.scheme||e.range&&e.range.length&&e.range.every(Le))}function _$e(e,t,n){const r=b$e(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,a=t.zero||t.zero===void 0&&m$e(e),o,l;if(!i)return 0;if((a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[o]<0&&(i[o]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const c=l>i[o]?o+1:l<i[0]?0:o;c!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(c,0,l)}return aJ(s)&&t.padding&&i[0]!==Ft(i)&&(i=E$e(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(lJ(s,i,n)),s===VN&&e.unknown(t.domainImplicit?dC:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&KN(e,t.nice)||null),i.length}function b$e(e,t,n){return t?(e.domain(lJ(e.type,t,n)),t.length):-1}function E$e(e,t,n,r,i,s){var a=Math.abs(Ft(n)-n[0]),o=a/(a-2*r),l=e===rc?IO(t,null,o):e===Dx?Y2(t,null,o,.5):e===Nx?Y2(t,null,o,i||1):e===uw?LO(t,null,o,s||1):$O(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function lJ(e,t,n){if(xY(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Ce(t))}return t}function w$e(e,t,n){let r=t.bins;if(r&&!ge(r)){const i=e.domain(),s=i[0],a=Ft(i),o=r.step;let l=r.start==null?s:r.start,c=r.stop==null?a:r.stop;o||he("Scale bins parameter missing step property."),l<s&&(l=o*Math.ceil(s/o)),c>a&&(c=o*Math.floor(a/o)),r=ms(l,c+o/2,o)}return r?e.bins=r:e.bins&&delete e.bins,e.type===WN&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function S$e(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=A$e(r,t,n);else if(t.scheme&&(s=T$e(r,t,n),ht(s))){if(e.interpolator)return e.interpolator(s);he(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&vY(r))return e.interpolator(dw(tF(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(XN(t.interpolate,t.interpolateGamma)):ht(e.round)?e.round(i):ht(e.rangeRound)&&e.interpolate(i?hx:Ha),s&&e.range(tF(s,t.reverse))}function A$e(e,t,n){e!==fY&&e!==UC&&he("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===UC?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*HN(n,i,r)]}function T$e(e,t,n){var r=t.schemeExtent,i,s;return ge(t.scheme)?s=dw(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=YN(i),s||he(`Unrecognized scheme name: ${t.scheme}`)),n=e===hw?n+1:e===WN?n-1:e===ep||e===fw?+t.schemeCount||g$e:n,vY(e)?jL(s,r,t.reverse):ht(s)?bY(jL(s,r),n):e===VN?s:s.slice(0,n)}function jL(e,t,n){return ht(e)&&(t||n)?_Y(e,tF(t||[0,1],n)):e}function tF(e,t){return t?e.slice().reverse():e}function cJ(e){le.call(this,null,e)}Fe(cJ,le,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(nd(e.sort)),this.modified(n),t}});const GL="zero",uJ="center",fJ="normalize",hJ=["y0","y1"];function $D(e){le.call(this,null,e)}$D.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:GL,values:[GL,uJ,fJ]},{name:"as",type:"string",array:!0,length:2,default:hJ}]};Fe($D,le,{transform(e,t){var n=e.as||hJ,r=n[0],i=n[1],s=nd(e.sort),a=e.field||Ip,o=e.offset===uJ?k$e:e.offset===fJ?C$e:F$e,l,c,u,f;for(l=O$e(t.source,e.groupby,s,a),c=0,u=l.length,f=l.max;c<u;++c)o(l[c],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function k$e(e,t,n,r,i){for(var s=(t-e.sum)/2,a=e.length,o=0,l;o<a;++o)l=e[o],l[r]=s,l[i]=s+=Math.abs(n(l))}function C$e(e,t,n,r,i){for(var s=1/e.sum,a=0,o=e.length,l=0,c=0,u;l<o;++l)u=e[l],u[r]=a,u[i]=a=s*(c+=Math.abs(n(u)))}function F$e(e,t,n,r,i){for(var s=0,a=0,o=e.length,l=0,c,u;l<o;++l)u=e[l],c=+n(u),c<0?(u[r]=a,u[i]=a+=c):(u[r]=s,u[i]=s+=c)}function O$e(e,t,n,r){var i=[],s=g=>g(u),a,o,l,c,u,f,h,d,p;if(t==null)i.push(e.slice());else for(a={},o=0,l=e.length;o<l;++o)u=e[o],f=t.map(s),h=a[f],h||(a[f]=h=[],i.push(h)),h.push(u);for(f=0,p=0,c=i.length;f<c;++f){for(h=i[f],o=0,d=0,l=h.length;o<l;++o)d+=Math.abs(r(h[o]));h.sum=d,d>p&&(p=d),n&&h.sort(n)}return i.max=p,i}const N$e=Object.freeze(Object.defineProperty({__proto__:null,axisticks:QK,datajoin:eJ,encode:tJ,legendentries:nJ,linkpath:MD,pie:RD,scale:oJ,sortitems:cJ,stack:$D},Symbol.toStringTag,{value:"Module"}));var D$e=Math.abs,nF=Math.cos,hb=Math.sin,M$e=1e-6,dJ=Math.PI,rF=dJ/2,qL=R$e(2);function XL(e){return e>1?rF:e<-1?-rF:Math.asin(e)}function R$e(e){return e>0?Math.sqrt(e):0}function $$e(e,t){var n=e*hb(t),r=30,i;do t-=i=(t+hb(t)-n)/(1+nF(t));while(D$e(i)>M$e&&--r>0);return t/2}function I$e(e,t,n){function r(i,s){return[e*i*nF(s=$$e(n,s)),t*hb(s)]}return r.invert=function(i,s){return s=XL(s/t),[i/(e*nF(s)),XL((2*s+hb(2*s))/n)]},r}var L$e=I$e(qL/rF,qL,dJ);function P$e(){return Xo(L$e).scale(169.529)}const B$e=wW(),iF=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function U$e(e,t){return function n(){const r=t();return r.type=e,r.path=wW().projection(r),r.copy=r.copy||function(){const i=n();return iF.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},gY(r)}}function ID(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(db[e]=U$e(e,t),this):db[e]||null}function pJ(e){return e&&e.path||B$e}const db={albers:AW,albersusa:dxe,azimuthalequalarea:pxe,azimuthalequidistant:gxe,conicconformal:vxe,conicequalarea:A2,conicequidistant:bxe,equalEarth:wxe,equirectangular:yxe,gnomonic:Sxe,identity:Axe,mercator:mxe,mollweide:P$e,naturalEarth1:Txe,orthographic:kxe,stereographic:Cxe,transversemercator:Fxe};for(const e in db)ID(e,db[e]);function z$e(){}const fl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function gJ(){var e=1,t=1,n=o;function r(l,c){return c.map(u=>i(l,u))}function i(l,c){var u=[],f=[];return s(l,c,h=>{n(h,l,c),H$e(h)>0?u.push([h]):f.push(h)}),f.forEach(h=>{for(var d=0,p=u.length,g;d<p;++d)if(V$e((g=u[d])[0],h)!==-1){g.push(h);return}}),{type:"MultiPolygon",value:c,coordinates:u}}function s(l,c,u){var f=[],h=[],d,p,g,m,x,v;for(d=p=-1,m=l[0]>=c,fl[m<<1].forEach(y);++d<e-1;)g=m,m=l[d+1]>=c,fl[g|m<<1].forEach(y);for(fl[m<<0].forEach(y);++p<t-1;){for(d=-1,m=l[p*e+e]>=c,x=l[p*e]>=c,fl[m<<1|x<<2].forEach(y);++d<e-1;)g=m,m=l[p*e+e+d+1]>=c,v=x,x=l[p*e+d+1]>=c,fl[g|m<<1|x<<2|v<<3].forEach(y);fl[m|x<<3].forEach(y)}for(d=-1,x=l[p*e]>=c,fl[x<<2].forEach(y);++d<e-1;)v=x,x=l[p*e+d+1]>=c,fl[x<<2|v<<3].forEach(y);fl[x<<3].forEach(y);function y(_){var b=[_[0][0]+d,_[0][1]+p],w=[_[1][0]+d,_[1][1]+p],E=a(b),A=a(w),S,k;(S=h[E])?(k=f[A])?(delete h[S.end],delete f[k.start],S===k?(S.ring.push(w),u(S.ring)):f[S.start]=h[k.end]={start:S.start,end:k.end,ring:S.ring.concat(k.ring)}):(delete h[S.end],S.ring.push(w),h[S.end=A]=S):(S=f[A])?(k=h[E])?(delete f[S.start],delete h[k.end],S===k?(S.ring.push(w),u(S.ring)):f[k.start]=h[S.end]={start:k.start,end:S.end,ring:k.ring.concat(S.ring)}):(delete f[S.start],S.ring.unshift(b),f[S.start=E]=S):f[E]=h[A]={start:E,end:A,ring:[b,w]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function o(l,c,u){l.forEach(f=>{var h=f[0],d=f[1],p=h|0,g=d|0,m,x=c[g*e+p];h>0&&h<e&&p===h&&(m=c[g*e+p-1],f[0]=h+(u-m)/(x-m)-.5),d>0&&d<t&&g===d&&(m=c[(g-1)*e+p],f[1]=d+(u-m)/(x-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var c=Math.floor(l[0]),u=Math.floor(l[1]);return c>=0&&u>=0||he("invalid size"),e=c,t=u,r},r.smooth=function(l){return arguments.length?(n=l?o:z$e,r):n===o},r}function H$e(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function V$e(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=W$e(e,t[n]))return i;return 0}function W$e(e,t){for(var n=t[0],r=t[1],i=-1,s=0,a=e.length,o=a-1;s<a;o=s++){var l=e[s],c=l[0],u=l[1],f=e[o],h=f[0],d=f[1];if(j$e(l,f,t))return 0;u>r!=d>r&&n<(h-c)*(r-u)/(d-u)+c&&(i=-i)}return i}function j$e(e,t,n){var r;return G$e(e,t,n)&&q$e(e[r=+(e[0]===t[0])],n[r],t[r])}function G$e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function q$e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function mJ(e,t,n){return function(r){var i=zo(r),s=n?Math.min(i[0],0):i[0],a=i[1],o=a-s,l=t?yu(s,a,e):o/(e+1);return ms(s+l,a,l)}}function LD(e){le.call(this,null,e)}LD.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Fe(LD,le,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||oi,s=gJ().smooth(e.smooth!==!1),a=e.thresholds||X$e(r,i,e),o=e.as===null?null:e.as||"contour",l=[];return r.forEach(c=>{const u=i(c),f=s.size([u.width,u.height])(u.values,ge(a)?a:a(u.values));Y$e(f,u,c,e),f.forEach(h=>{l.push(tw(c,jt(o!=null?{[o]:h}:h)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function X$e(e,t,n){const r=mJ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Jf(t(i).values)))}function Y$e(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(ht(i)&&(i=i(n,r)),ht(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const a=($t(i)?i:i[0])||1,o=($t(i)?i:i[1])||1,l=s&&s[0]||0,c=s&&s[1]||0;e.forEach(xJ(t,a,o,l,c))}function xJ(e,t,n,r,i){const s=e.x1||0,a=e.y1||0,o=t*n<0;function l(f){f.forEach(c)}function c(f){o&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(l),f}}function YL(e,t,n){const r=e>=0?e:nN(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function lT(e){return ht(e)?e:li(+e)}function vJ(){var e=l=>l[0],t=l=>l[1],n=Ip,r=[-1,-1],i=960,s=500,a=2;function o(l,c){const u=YL(r[0],l,e)>>a,f=YL(r[1],l,t)>>a,h=u?u+2:0,d=f?f+2:0,p=2*h+(i>>a),g=2*d+(s>>a),m=new Float32Array(p*g),x=new Float32Array(p*g);let v=m;l.forEach(_=>{const b=h+(+e(_)>>a),w=d+(+t(_)>>a);b>=0&&b<p&&w>=0&&w<g&&(m[b+w*p]+=+n(_))}),u>0&&f>0?(Cd(p,g,m,x,u),Fd(p,g,x,m,f),Cd(p,g,m,x,u),Fd(p,g,x,m,f),Cd(p,g,m,x,u),Fd(p,g,x,m,f)):u>0?(Cd(p,g,m,x,u),Cd(p,g,x,m,u),Cd(p,g,m,x,u),v=x):f>0&&(Fd(p,g,m,x,f),Fd(p,g,x,m,f),Fd(p,g,m,x,f),v=x);const y=c?Math.pow(2,-2*a):1/qH(v);for(let _=0,b=p*g;_<b;++_)v[_]*=y;return{values:v,scale:1<<a,width:p,height:g,x1:h,y1:d,x2:h+(i>>a),y2:d+(s>>a)}}return o.x=function(l){return arguments.length?(e=lT(l),o):e},o.y=function(l){return arguments.length?(t=lT(l),o):t},o.weight=function(l){return arguments.length?(n=lT(l),o):n},o.size=function(l){if(!arguments.length)return[i,s];var c=+l[0],u=+l[1];return c>=0&&u>=0||he("invalid size"),i=c,s=u,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||he("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),o):1<<a},o.bandwidth=function(l){return arguments.length?(l=Ie(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&he("invalid bandwidth"),r=l,o):r},o}function Cd(e,t,n,r,i){const s=(i<<1)+1;for(let a=0;a<t;++a)for(let o=0,l=0;o<e+i;++o)o<e&&(l+=n[o+a*e]),o>=i&&(o>=s&&(l-=n[o-s+a*e]),r[o-i+a*e]=l/Math.min(o+1,e-1+s-o,s))}function Fd(e,t,n,r,i){const s=(i<<1)+1;for(let a=0;a<e;++a)for(let o=0,l=0;o<t+i;++o)o<t&&(l+=n[a+o*e]),o>=i&&(o>=s&&(l-=n[a+(o-s)*e]),r[a+(o-i)*e]=l/Math.min(o+1,t-1+s-o,s))}function PD(e){le.call(this,null,e)}PD.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const K$e=["x","y","weight","size","cellSize","bandwidth"];function yJ(e,t){return K$e.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Fe(PD,le,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=J$e(r,e.groupby),s=(e.groupby||[]).map(kn),a=yJ(vJ(),e),o=e.as||"grid",l=[];function c(u,f){for(let h=0;h<s.length;++h)u[s[h]]=f[h];return u}return l=i.map(u=>jt(c({[o]:a(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function J$e(e,t){var n=[],r=u=>u(o),i,s,a,o,l,c;if(t==null)n.push(e);else for(i={},s=0,a=e.length;s<a;++s)o=e[s],l=t.map(r),c=i[l],c||(i[l]=c=[],c.dims=l,n.push(c)),c.push(o);return n}function BD(e){le.call(this,null,e)}BD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Fe(BD,le,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=gJ().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||mJ(e.count||10,e.nice,!!i),a=e.size,o,l;return i||(i=t.materialize(t.SOURCE).source,o=yJ(vJ(),e)(i,!0),l=xJ(o,o.scale||1,o.scale||1,0,0),a=[o.width,o.height],i=o.values),s=ge(s)?s:s(i),i=r.size(a)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(jt),n}});const sF="Feature",UD="FeatureCollection",Z$e="MultiPoint";function zD(e){le.call(this,null,e)}zD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Fe(zD,le,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],a=i&&i[1],o=e.geojson||!i&&oi,l=t.ADD,c;c=e.modified()||t.changed(t.REM)||t.modified(ni(o))||s&&t.modified(ni(s))||a&&t.modified(ni(a)),(!this.value||c)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),o&&t.visit(l,u=>n.push(o(u))),s&&a&&(t.visit(l,u=>{var f=s(u),h=a(u);f!=null&&h!=null&&(f=+f)===f&&(h=+h)===h&&r.push([f,h])}),n=n.concat({type:sF,geometry:{type:Z$e,coordinates:r}})),this.value={type:UD,features:n}}});function HD(e){le.call(this,null,e)}HD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Fe(HD,le,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||oi,s=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=pJ(e.projection),n.materialize().reflow()):a=i===oi||t.modified(i.fields)?n.ADD_MOD:n.ADD;const o=Q$e(r,e.pointRadius);return n.visit(a,l=>l[s]=r(i(l))),r.pointRadius(o),n.modifies(s)}});function Q$e(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function VD(e){le.call(this,null,e)}VD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Fe(VD,le,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],a=s[0],o=s[1],l;function c(u){const f=n([r(u),i(u)]);f?(u[a]=f[0],u[o]=f[1]):(u[a]=void 0,u[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,c)),t.modifies(s)}});function WD(e){le.call(this,null,e)}WD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Fe(WD,le,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=eIe(pJ(e.projection),e.field||la("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[i]=r),n.modifies(i)}});function eIe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(s),a};return r.context=i=>(e.context(i),r),r}function jD(e){le.call(this,[],e),this.generator=G1e()}jD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Fe(jD,le,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)ht(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(yX(n[0],i)):t.add.push(jt(i)),n[0]=i,t}});function GD(e){le.call(this,null,e)}GD.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Fe(GD,le,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||oi,s=nIe(e.opacity,e),a=tIe(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Jf(n.map(c=>Jf(i(c).values))):0};return n.forEach(c=>{const u=i(c),f=ut({},c,l);r||(f.$max=Jf(u.values||[])),c[o]=rIe(u,f,a.dep?a:li(a(f)),s.dep?s:li(s(f)))}),t.reflow(!0).modifies(o)}});function tIe(e,t){let n;return ht(e)?(n=r=>_u(e(r,t)),n.dep=_J(e)):n=li(_u(e||"#888")),n}function nIe(e,t){let n;return ht(e)?(n=r=>e(r,t),n.dep=_J(e)):e?n=li(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function _J(e){if(!ht(e))return!1;const t=Ga(ni(e));return t.$x||t.$y||t.$value||t.$max}function rIe(e,t,n,r){const i=e.width,s=e.height,a=e.x1||0,o=e.y1||0,l=e.x2||i,c=e.y2||s,u=e.values,f=u?m=>u[m]:zc,h=ou(l-a,c-o),d=h.getContext("2d"),p=d.getImageData(0,0,l-a,c-o),g=p.data;for(let m=o,x=0;m<c;++m){t.$y=m-o;for(let v=a,y=m*i;v<l;++v,x+=4){t.$x=v-a,t.$value=f(v+y);const _=n(t);g[x+0]=_.r,g[x+1]=_.g,g[x+2]=_.b,g[x+3]=~~(255*r(t))}}return d.putImageData(p,0,0),h}function bJ(e){le.call(this,null,e),this.modified(!0)}Fe(bJ,le,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=sIe(e.type),iF.forEach(r=>{e[r]!=null&&KL(n,r,e[r])})):iF.forEach(r=>{e.modified(r)&&KL(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&iIe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function iIe(e,t){const n=aIe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function sIe(e){const t=ID((e||"mercator").toLowerCase());return t||he("Unrecognized projection type: "+e),t()}function KL(e,t,n){ht(e[t])&&e[t](n)}function aIe(e){return e=Ie(e),e.length===1?e[0]:{type:UD,features:e.reduce((t,n)=>t.concat(oIe(n)),[])}}function oIe(e){return e.type===UD?e.features:Ie(e).filter(t=>t!=null).map(t=>t.type===sF?t:{type:sF,geometry:t})}const lIe=Object.freeze(Object.defineProperty({__proto__:null,contour:BD,geojson:zD,geopath:HD,geopoint:VD,geoshape:WD,graticule:jD,heatmap:GD,isocontour:LD,kde2d:PD,projection:bJ},Symbol.toStringTag,{value:"Module"})),JL={center:Ime,collide:t1e,nbody:h1e,link:r1e,x:d1e,y:p1e},om="forces",aF=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],cIe=["static","iterations"],EJ=["x","y","vx","vy"];function qD(e){le.call(this,null,e)}qD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:EJ}]};Fe(qD,le,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(aF),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&wJ(n,e,0,t)):(this.value=n=fIe(t.source,e),n.on("tick",uIe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(cIe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,c=o.length,u;l<c;++l)if(u=o[l],!(u.name!==om||u.op._argval.force!=="link")){for(var r=u.op._argops,i=0,s=r.length,a;i<s;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(EJ)}});function uIe(e,t){return()=>e.touch(t).run()}function fIe(e,t){const n=f1e(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),wJ(n,t,!0).on("end",()=>s=!0)}function wJ(e,t,n,r){var i=Ie(t.forces),s,a,o,l;for(s=0,a=aF.length;s<a;++s)o=aF[s],o!==om&&t.modified(o)&&e[o](t[o]);for(s=0,a=i.length;s<a;++s)l=om+s,o=n||t.modified(om,s)?dIe(i[s]):r&&hIe(i[s],r)?e.force(l):null,o&&e.force(l,o);for(a=e.numForces||0;s<a;++s)e.force(om+s,null);return e.numForces=i.length,e}function hIe(e,t){var n,r;for(n in e)if(ht(r=e[n])&&t.modified(ni(r)))return 1;return 0}function dIe(e){var t,n;Ze(JL,e.force)||he("Unrecognized force: "+e.force),t=JL[e.force]();for(n in e)ht(t[n])&&pIe(t[n],e[n],e);return t}function pIe(e,t,n){e(ht(t)?r=>t(r,n):t)}const gIe=Object.freeze(Object.defineProperty({__proto__:null,force:qD},Symbol.toStringTag,{value:"Module"}));function oF(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function XD(e){le.call(this,null,e)}XD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const mIe=e=>e.values;Fe(XD,le,{transform(e,t){t.source||he("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(a=>{a.children&&ew(a.data)&&i.rem.push(a.data)}),this.value=s=H4({values:Ie(e.keys).reduce((a,o)=>(a.key(o),a),xIe()).entries(i.source)},mIe),n&&s.each(a=>{a.children&&(a=jt(a.data),i.add.push(a),i.source.push(a))}),oF(s,Ke,Ke)),i.source.root=s,i}});function xIe(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const a=i.length,o=e[s++],l={},c={};let u=-1,f,h,d;for(;++u<a;)f=o(h=i[u])+"",(d=l[f])?d.push(h):l[f]=[h];for(f in l)c[f]=n(l[f],s);return c}function r(i,s){if(++s>e.length)return i;const a=[];for(const o in i)a.push({key:o,values:r(i[o],s)});return a}return t}function uc(e){le.call(this,null,e)}const vIe=(e,t)=>e.parent===t.parent?1:2;Fe(uc,le,{transform(e,t){(!t.source||!t.source.root)&&he(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(nd(e.sort,a=>a.data)),yIe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?vIe:Ip);try{this.value=n(i)}catch(a){he(a)}return i.each(a=>_Ie(a,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function yIe(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function _Ie(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const lF=["x","y","r","depth","children"];function YD(e){uc.call(this,e)}YD.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:lF.length,default:lF}]};Fe(YD,uc,{layout:pve,params:["radius","size","padding"],fields:lF});const cF=["x0","y0","x1","y1","depth","children"];function KD(e){uc.call(this,e)}KD.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cF.length,default:cF}]};Fe(KD,uc,{layout:gve,params:["size","round","padding"],fields:cF});function JD(e){le.call(this,null,e)}JD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Fe(JD,le,{transform(e,t){t.source||he("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?oF(x5().id(e.key).parentId(e.parentKey)(i.source),e.key,ca):oF(x5()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const ZL={tidy:Ave,cluster:Lxe},uF=["x","y","depth","children"];function ZD(e){uc.call(this,e)}ZD.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:uF.length,default:uF}]};Fe(ZD,uc,{layout(e){const t=e||"tidy";if(Ze(ZL,t))return ZL[t]();he("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:uF});function QD(e){le.call(this,[],e)}QD.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Fe(QD,le,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||he("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>s[Ke(a)]=1),r.each(a=>{const o=a.data,l=a.parent&&a.parent.data;l&&s[Ke(o)]&&s[Ke(l)]&&i.add.push(jt({source:l,target:o}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>s[Ke(a)]=1),n.forEach(a=>{(s[Ke(a.source)]||s[Ke(a.target)])&&i.mod.push(a)})),i}});const QL={binary:kve,dice:mx,slice:kE,slicedice:Cve,squarify:VW,resquarify:Fve},fF=["x0","y0","x1","y1","depth","children"];function eM(e){uc.call(this,e)}eM.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fF.length,default:fF}]};Fe(eM,uc,{layout(){const e=Tve();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ze(QL,t)?e.tile(QL[t]):he("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:fF});const bIe=Object.freeze(Object.defineProperty({__proto__:null,nest:XD,pack:YD,partition:KD,stratify:JD,tree:ZD,treelinks:QD,treemap:eM},Symbol.toStringTag,{value:"Module"})),cT=4278190080;function EIe(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function wIe(e,t,n,r,i){const s=e.width,a=e.height,o=r||i,l=ou(s,a).getContext("2d"),c=ou(s,a).getContext("2d"),u=o&&ou(s,a).getContext("2d");n.forEach(A=>h_(l,A,!1)),h_(c,t,!1),o&&h_(u,t,!0);const f=uT(l,s,a),h=uT(c,s,a),d=o&&uT(u,s,a),p=e.bitmap(),g=o&&e.bitmap();let m,x,v,y,_,b,w,E;for(x=0;x<a;++x)for(m=0;m<s;++m)_=x*s+m,b=f[_]&cT,E=h[_]&cT,w=o&&d[_]&cT,(b||w||E)&&(v=e(m),y=e(x),!i&&(b||E)&&p.set(v,y),o&&(b||w)&&g.set(v,y));return[p,g]}function uT(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function h_(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>h_(e,s.items,n))}):Ds[r].draw(e,{items:n?t.map(SIe):t})}function SIe(e){const t=tw(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const hl=5,fi=31,R1=32,Lc=new Uint32Array(R1+1),Fa=new Uint32Array(R1+1);Fa[0]=0;Lc[0]=~Fa[0];for(let e=1;e<=R1;++e)Fa[e]=Fa[e-1]<<1|1,Lc[e]=~Fa[e];function AIe(e,t){const n=new Uint32Array(~~((e*t+R1)/R1));function r(s,a){n[s]|=a}function i(s,a){n[s]&=a}return{array:n,get:(s,a)=>{const o=a*e+s;return n[o>>>hl]&1<<(o&fi)},set:(s,a)=>{const o=a*e+s;r(o>>>hl,1<<(o&fi))},clear:(s,a)=>{const o=a*e+s;i(o>>>hl,~(1<<(o&fi)))},getRange:(s,a,o,l)=>{let c=l,u,f,h,d;for(;c>=a;--c)if(u=c*e+s,f=c*e+o,h=u>>>hl,d=f>>>hl,h===d){if(n[h]&Lc[u&fi]&Fa[(f&fi)+1])return!0}else{if(n[h]&Lc[u&fi]||n[d]&Fa[(f&fi)+1])return!0;for(let p=h+1;p<d;++p)if(n[p])return!0}return!1},setRange:(s,a,o,l)=>{let c,u,f,h,d;for(;a<=l;++a)if(c=a*e+s,u=a*e+o,f=c>>>hl,h=u>>>hl,f===h)r(f,Lc[c&fi]&Fa[(u&fi)+1]);else for(r(f,Lc[c&fi]),r(h,Fa[(u&fi)+1]),d=f+1;d<h;++d)r(d,4294967295)},clearRange:(s,a,o,l)=>{let c,u,f,h,d;for(;a<=l;++a)if(c=a*e+s,u=a*e+o,f=c>>>hl,h=u>>>hl,f===h)i(f,Fa[c&fi]|Lc[(u&fi)+1]);else for(i(f,Fa[c&fi]),i(h,Lc[(u&fi)+1]),d=f+1;d<h;++d)i(d,0)},outOfBounds:(s,a,o,l)=>s<0||a<0||l>=t||o>=e}}function TIe(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),a=o=>~~((o+n)/r);return a.invert=o=>o*r-n,a.bitmap=()=>AIe(i,s),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function kIe(e,t,n,r){const i=e.width,s=e.height;return function(a){const o=a.datum.datum.items[r].items,l=o.length,c=a.datum.fontSize,u=bs.width(a.datum,a.datum.text);let f=0,h,d,p,g,m,x,v;for(let y=0;y<l;++y)h=o[y].x,p=o[y].y,d=o[y].x2===void 0?h:o[y].x2,g=o[y].y2===void 0?p:o[y].y2,m=(h+d)/2,x=(p+g)/2,v=Math.abs(d-h+g-p),v>=f&&(f=v,a.x=m,a.y=x);return m=u/2,x=c/2,h=a.x-m,d=a.x+m,p=a.y-x,g=a.y+x,a.align="center",h<0&&d<=i?a.align="left":0<=h&&i<d&&(a.align="right"),a.baseline="middle",p<0&&g<=s?a.baseline="top":0<=p&&s<g&&(a.baseline="bottom"),!0}}function pb(e,t,n,r,i,s){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>s}function Kc(e,t,n,r,i,s,a,o){const l=i*s/(r*2),c=e(t-l),u=e(t+l),f=e(n-(s=s/2)),h=e(n+s);return a.outOfBounds(c,f,u,h)||a.getRange(c,f,u,h)||o&&o.getRange(c,f,u,h)}function CIe(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1];function l(c,u,f,h,d){const p=e.invert(c),g=e.invert(u);let m=f,x=s,v;if(!pb(p,g,h,d,i,s)&&!Kc(e,p,g,d,h,m,a,o)&&!Kc(e,p,g,d,h,d,a,null)){for(;x-m>=1;)v=(m+x)/2,Kc(e,p,g,d,h,v,a,o)?x=v:m=v;if(m>f)return[p,g,m,!0]}}return function(c){const u=c.datum.datum.items[r].items,f=u.length,h=c.datum.fontSize,d=bs.width(c.datum,c.datum.text);let p=n?h:0,g=!1,m=!1,x=0,v,y,_,b,w,E,A,S,k,T,O,C,D,N,R,L,I;for(let Y=0;Y<f;++Y){for(v=u[Y].x,_=u[Y].y,y=u[Y].x2===void 0?v:u[Y].x2,b=u[Y].y2===void 0?_:u[Y].y2,v>y&&(I=v,v=y,y=I),_>b&&(I=_,_=b,b=I),k=e(v),O=e(y),T=~~((k+O)/2),C=e(_),N=e(b),D=~~((C+N)/2),A=T;A>=k;--A)for(S=D;S>=C;--S)L=l(A,S,p,d,h),L&&([c.x,c.y,p,g]=L);for(A=T;A<=O;++A)for(S=D;S<=N;++S)L=l(A,S,p,d,h),L&&([c.x,c.y,p,g]=L);!g&&!n&&(R=Math.abs(y-v+b-_),w=(v+y)/2,E=(_+b)/2,R>=x&&!pb(w,E,d,h,i,s)&&!Kc(e,w,E,h,d,h,a,null)&&(x=R,c.x=w,c.y=E,m=!0))}return g||m?(w=d/2,E=h/2,a.setRange(e(c.x-w),e(c.y-E),e(c.x+w),e(c.y+E)),c.align="center",c.baseline="middle",!0):!1}}const FIe=[-1,-1,1,1],OIe=[-1,1,-1,1];function NIe(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1],l=e.bitmap();return function(c){const u=c.datum.datum.items[r].items,f=u.length,h=c.datum.fontSize,d=bs.width(c.datum,c.datum.text),p=[];let g=n?h:0,m=!1,x=!1,v=0,y,_,b,w,E,A,S,k,T,O,C,D;for(let N=0;N<f;++N){for(y=u[N].x,b=u[N].y,_=u[N].x2===void 0?y:u[N].x2,w=u[N].y2===void 0?b:u[N].y2,p.push([e((y+_)/2),e((b+w)/2)]);p.length;)if([S,k]=p.pop(),!(a.get(S,k)||o.get(S,k)||l.get(S,k))){l.set(S,k);for(let R=0;R<4;++R)E=S+FIe[R],A=k+OIe[R],l.outOfBounds(E,A,E,A)||p.push([E,A]);if(E=e.invert(S),A=e.invert(k),T=g,O=s,!pb(E,A,d,h,i,s)&&!Kc(e,E,A,h,d,T,a,o)&&!Kc(e,E,A,h,d,h,a,null)){for(;O-T>=1;)C=(T+O)/2,Kc(e,E,A,h,d,C,a,o)?O=C:T=C;T>g&&(c.x=E,c.y=A,g=T,m=!0)}}!m&&!n&&(D=Math.abs(_-y+w-b),E=(y+_)/2,A=(b+w)/2,D>=v&&!pb(E,A,d,h,i,s)&&!Kc(e,E,A,h,d,h,a,null)&&(v=D,c.x=E,c.y=A,x=!0))}return m||x?(E=d/2,A=h/2,a.setRange(e(c.x-E),e(c.y-A),e(c.x+E),e(c.y+A)),c.align="center",c.baseline="middle",!0):!1}}const DIe=["right","center","left"],MIe=["bottom","middle","top"];function RIe(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1],l=r.length;return function(c){const u=c.boundary,f=c.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>s)return!1;let h=c.textWidth??0,d,p,g,m,x,v,y,_,b,w,E,A,S,k,T;for(let O=0;O<l;++O){if(d=(n[O]&3)-1,p=(n[O]>>>2&3)-1,g=d===0&&p===0||r[O]<0,m=d&&p?Math.SQRT1_2:1,x=r[O]<0?-1:1,v=u[1+d]+r[O]*d*m,E=u[4+p]+x*f*p/2+r[O]*p*m,_=E-f/2,b=E+f/2,A=e(v),k=e(_),T=e(b),!h)if(eP(A,A,k,T,a,o,v,v,_,b,u,g))h=bs.width(c.datum,c.datum.text);else continue;if(w=v+x*h*d/2,v=w-h/2,y=w+h/2,A=e(v),S=e(y),eP(A,S,k,T,a,o,v,y,_,b,u,g))return c.x=d?d*x<0?y:v:w,c.y=p?p*x<0?b:_:E,c.align=DIe[d*x+1],c.baseline=MIe[p*x+1],a.setRange(A,k,S,T),!0}return!1}}function eP(e,t,n,r,i,s,a,o,l,c,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const fT=0,hT=4,dT=8,pT=0,gT=1,mT=2,$Ie={"top-left":fT+pT,top:fT+gT,"top-right":fT+mT,left:hT+pT,middle:hT+gT,right:hT+mT,"bottom-left":dT+pT,bottom:dT+gT,"bottom-right":dT+mT},IIe={naive:kIe,"reduced-search":CIe,floodfill:NIe};function LIe(e,t,n,r,i,s,a,o,l,c,u){if(!e.length)return e;const f=Math.max(r.length,i.length),h=PIe(r,f),d=BIe(i,f),p=UIe(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,m=g==="area",x=zIe(p,g,o,l),v=c===null||c===1/0,y=m&&u==="naive";let _=-1,b=-1;const w=e.map(k=>{const T=v?bs.width(k,k.text):void 0;return _=Math.max(_,T),b=Math.max(b,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:x(k),textWidth:T}});c=c===null||c===1/0?Math.max(_,b)+Math.max(...r):c;const E=TIe(t[0],t[1],c);let A;if(!y){n&&w.sort((O,C)=>n(O.datum,C.datum));let k=!1;for(let O=0;O<d.length&&!k;++O)k=d[O]===5||h[O]<0;const T=(p&&a||m)&&e.map(O=>O.datum);A=s.length||T?wIe(E,T||[],s,k,m):EIe(E,a&&w)}const S=m?IIe[u](E,A,a,l):RIe(E,A,d,h);return w.forEach(k=>k.opacity=+S(k)),w}function PIe(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function BIe(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=$Ie[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function UIe(e){return e&&e.mark&&e.mark.marktype}function zIe(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const a=s.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{const a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}const hF=["x","y","opacity","align","baseline"],SJ=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function tM(e){le.call(this,null,e)}tM.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:SJ},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:hF.length,default:hF}]};Fe(tM,le,{transform(e,t){function n(s){const a=e[s];return ht(a)&&t.modified(a.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&he("Size parameter should be specified as a [width, height] array.");const i=e.as||hF;return LIe(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ie(e.offset==null?1:e.offset),Ie(e.anchor||SJ),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const a=s.datum;a[i[0]]=s.x,a[i[1]]=s.y,a[i[2]]=s.opacity,a[i[3]]=s.align,a[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const HIe=Object.freeze(Object.defineProperty({__proto__:null,label:tM},Symbol.toStringTag,{value:"Module"}));function AJ(e,t){var n=[],r=function(u){return u(o)},i,s,a,o,l,c;if(t==null)n.push(e);else for(i={},s=0,a=e.length;s<a;++s)o=e[s],l=t.map(r),c=i[l],c||(i[l]=c=[],c.dims=l,n.push(c)),c.push(o);return n}function nM(e){le.call(this,null,e)}nM.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Fe(nM,le,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=AJ(r,e.groupby),s=(e.groupby||[]).map(kn),a=s.length,o=e.as||[kn(e.x),kn(e.y)],l=[];i.forEach(c=>{LX(c,e.x,e.y,e.bandwidth||.3).forEach(u=>{const f={};for(let h=0;h<a;++h)f[s[h]]=c.dims[h];f[o[0]]=u[0],f[o[1]]=u[1],l.push(jt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const dF={constant:pN,linear:gN,log:MX,exp:RX,pow:$X,quad:mN,poly:IX},VIe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function rM(e){le.call(this,null,e)}rM.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(dF)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Fe(rM,le,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=AJ(r,e.groupby),s=(e.groupby||[]).map(kn),a=e.method||"linear",o=e.order==null?3:e.order,l=VIe(a,o),c=e.as||[kn(e.x),kn(e.y)],u=dF[a],f=[];let h=e.extent;Ze(dF,a)||he("Invalid regression method: "+a),h!=null&&a==="log"&&h[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),i.forEach(d=>{if(d.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=u(d,e.x,e.y,o);if(e.params){f.push(jt({keys:d.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=h||zo(d,e.x),x=v=>{const y={};for(let _=0;_<s.length;++_)y[s[_]]=d.dims[_];y[c[0]]=v[0],y[c[1]]=v[1],f.push(jt(y))};a==="linear"||a==="constant"?m.forEach(v=>x([v,g.predict(v)])):lw(g.predict,m,25,200).forEach(x)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const WIe=Object.freeze(Object.defineProperty({__proto__:null,loess:nM,regression:rM},Symbol.toStringTag,{value:"Module"}));function iM(e){le.call(this,null,e)}iM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const jIe=[-1e5,-1e5,1e5,1e5];Fe(iM,le,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:jIe;const s=this.value=O4.from(r,e.x,e.y).voronoi(i);for(let a=0,o=r.length;a<o;++a){const l=s.cellPolygon(a);r[a][n]=l&&!qIe(l)?GIe(l):null}return t.reflow(e.modified()).modifies(n)}});function GIe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function qIe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const XIe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:iM},Symbol.toStringTag,{value:"Module"}));var xT=Math.PI/180,lm=64,d_=2048;function YIe(){var e=[256,256],t,n,r,i,s,a,o,l=TJ,c=[],u=Math.random,f={};f.layout=function(){for(var p=h(ou()),g=t6e((e[0]>>5)*e[1]),m=null,x=c.length,v=-1,y=[],_=c.map(w=>({text:t(w),font:n(w),style:i(w),weight:s(w),rotate:a(w),size:~~(r(w)+1e-14),padding:o(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,E)=>E.size-w.size);++v<x;){var b=_[v];b.x=e[0]*(u()+.5)>>1,b.y=e[1]*(u()+.5)>>1,KIe(p,b,_,v),b.hasText&&d(g,b,m)&&(y.push(b),m?ZIe(m,b):m=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=e[0]>>1,b.y-=e[1]>>1)}return y};function h(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(lm<<5)/g,p.height=d_/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function d(p,g,m){for(var x=g.x,v=g.y,y=Math.hypot(e[0],e[1]),_=l(e),b=u()<.5?1:-1,w=-b,E,A,S;(E=_(w+=b))&&(A=~~E[0],S=~~E[1],!(Math.min(Math.abs(A),Math.abs(S))>=y));)if(g.x=x+A,g.y=v+S,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!JIe(g,p,e[0]))&&(!m||QIe(g,m))){for(var k=g.sprite,T=g.width>>5,O=e[0]>>5,C=g.x-(T<<4),D=C&127,N=32-D,R=g.y1-g.y0,L=(g.y+g.y0)*O+(C>>5),I,Y=0;Y<R;Y++){I=0;for(var X=0;X<=T;X++)p[L+X]|=I<<N|(X<T?(I=k[Y*T+X])>>>D:0);L+=O}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(c=p,f):c},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=pf(p),f):n},f.fontStyle=function(p){return arguments.length?(i=pf(p),f):i},f.fontWeight=function(p){return arguments.length?(s=pf(p),f):s},f.rotate=function(p){return arguments.length?(a=pf(p),f):a},f.text=function(p){return arguments.length?(t=pf(p),f):t},f.spiral=function(p){return arguments.length?(l=n6e[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=pf(p),f):r},f.padding=function(p){return arguments.length?(o=pf(p),f):o},f.random=function(p){return arguments.length?(u=p,f):u},f}function KIe(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(lm<<5)/s,d_/s);var a=0,o=0,l=0,c=n.length,u,f,h,d,p;for(--r;++r<c;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,u=i.measureText(t.text+"m").width*s,h=t.size<<1,t.rotate){var g=Math.sin(t.rotate*xT),m=Math.cos(t.rotate*xT),x=u*m,v=u*g,y=h*m,_=h*g;u=Math.max(Math.abs(x+_),Math.abs(x-_))+31>>5<<5,h=~~Math.max(Math.abs(v+y),Math.abs(v-y))}else u=u+31>>5<<5;if(h>l&&(l=h),a+u>=lm<<5&&(a=0,o+=l,l=0),o+h>=d_)break;i.translate((a+(u>>1))/s,(o+(h>>1))/s),t.rotate&&i.rotate(t.rotate*xT),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=h,t.xoff=a,t.yoff=o,t.x1=u>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=u}for(var b=i.getImageData(0,0,(lm<<5)/s,d_/s).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(u=t.width,f=u>>5,h=t.y1-t.y0,d=0;d<h*f;d++)w[d]=0;if(a=t.xoff,a==null)return;o=t.yoff;var E=0,A=-1;for(p=0;p<h;p++){for(d=0;d<u;d++){var S=f*p+(d>>5),k=b[(o+p)*(lm<<5)+(a+d)<<2]?1<<31-d%32:0;w[S]|=k,E|=k}E?A=p:(t.y0++,h--,p--,o++)}t.y1=t.y0+A,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function JIe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),a=s&127,o=32-a,l=e.y1-e.y0,c=(e.y+e.y0)*n+(s>>5),u,f=0;f<l;f++){u=0;for(var h=0;h<=i;h++)if((u<<o|(h<i?(u=r[f*i+h])>>>a:0))&t[c+h])return!0;c+=n}return!1}function ZIe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function QIe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function TJ(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function e6e(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function t6e(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function pf(e){return typeof e=="function"?e:function(){return e}}var n6e={archimedean:TJ,rectangular:e6e};const kJ=["x","y","font","fontSize","fontStyle","fontWeight","angle"],r6e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function sM(e){le.call(this,YIe(),e)}sM.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:kJ}]};Fe(sM,le,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&he("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return ht(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||r6e.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,a=e.as||kJ;let o=e.fontSize||14,l;if(ht(o)?l=e.fontSizeRange:o=li(o),l){const p=o,g=Ht("sqrt")().domain(zo(i,p)).range(l);o=m=>g(p(m))}i.forEach(p=>{p[a[0]]=NaN,p[a[1]]=NaN,p[a[3]]=0});const c=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(fa).layout(),u=s.size(),f=u[0]>>1,h=u[1]>>1,d=c.length;for(let p=0,g,m;p<d;++p)g=c[p],m=g.datum,m[a[0]]=g.x+f,m[a[1]]=g.y+h,m[a[2]]=g.font,m[a[3]]=g.size,m[a[4]]=g.style,m[a[5]]=g.weight,m[a[6]]=g.rotate;return t.reflow(r).modifies(a)}});const i6e=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:sM},Symbol.toStringTag,{value:"Module"})),s6e=e=>new Uint8Array(e),a6e=e=>new Uint16Array(e),Hm=e=>new Uint32Array(e);function o6e(){let e=8,t=[],n=Hm(0),r=xy(0,e),i=xy(0,e);return{data:()=>t,seen:()=>n=l6e(n,t.length),add(s){for(let a=0,o=t.length,l=s.length,c;a<l;++a)c=s[a],c._index=o++,t.push(c)},remove(s,a){const o=t.length,l=Array(o-s),c=t;let u,f,h;for(f=0;!a[f]&&f<o;++f)l[f]=t[f],c[f]=f;for(h=f;f<o;++f)u=t[f],a[f]?c[f]=-1:(c[f]=h,r[h]=r[f],i[h]=i[f],l[h]=u,u._index=h++),r[f]=0;return t=l,c},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,a){r[s]|=a},clear(s,a){r[s]&=~a},resize(s,a){const o=r.length;(s>o||a>e)&&(e=Math.max(a,e),r=xy(s,e,r),i=xy(s,e))}}}function l6e(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function xy(e,t,n){const r=(t<257?s6e:t<65537?a6e:Hm)(e);return n&&r.set(n),r}function tP(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const a=this,o=a.bisect(a.range,i.value),l=i.index,c=o[0],u=o[1],f=l.length;let h;for(h=0;h<c;++h)s[l[h]]|=r;for(h=u;h<f;++h)s[l[h]]|=r;return a}}}function nP(){let e=Hm(0),t=[],n=0;function r(o,l,c){if(!l.length)return[];const u=n,f=l.length,h=Hm(f);let d=Array(f),p,g,m;for(m=0;m<f;++m)d[m]=o(l[m]),h[m]=m;if(d=c6e(d,h),u)p=t,g=e,t=Array(u+f),e=Hm(u+f),u6e(c,p,g,u,d,h,f,t,e);else{if(c>0)for(m=0;m<f;++m)h[m]+=c;t=d,e=h}return n=u+f,{index:h,value:d}}function i(o,l){const c=n;let u,f,h;for(f=0;!l[e[f]]&&f<c;++f);for(h=f;f<c;++f)l[u=e[f]]||(e[h]=u,t[h]=t[f],++h);n=c-o}function s(o){for(let l=0,c=n;l<c;++l)e[l]=o[e[l]]}function a(o,l){let c;return l?c=l.length:(l=t,c=n),[vde(l,o[0],0,c),vu(l,o[1],0,c)]}return{insert:r,remove:i,bisect:a,reindex:s,index:()=>e,size:()=>n}}function c6e(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),bde(e,t)}function u6e(e,t,n,r,i,s,a,o,l){let c=0,u=0,f;for(f=0;c<r&&u<a;++f)t[c]<i[u]?(o[f]=t[c],l[f]=n[c++]):(o[f]=i[u],l[f]=s[u++]+e);for(;c<r;++c,++f)o[f]=t[c],l[f]=n[c];for(;u<a;++u,++f)o[f]=i[u],l[f]=s[u]+e}function aM(e){le.call(this,o6e(),e),this._indices=null,this._dims=null}aM.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Fe(aM,le,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],a=r.length;let o=0,l,c;for(;o<a;++o)l=n[o].fname,c=i[l]||(i[l]=nP()),s.push(tP(c,o,r[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,a=this._dims,o=this.value,l=o.curr(),c=o.prev(),u=o.all(),f=n.rem=n.add,h=n.mod,d=i.length,p={};let g,m,x,v,y,_,b,w,E;if(c.set(l),t.rem.length&&(y=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(_={},v=t.mod,b=0,w=v.length;b<w;++b)_[v[b]._index]=1;for(b=0;b<d;++b)E=r[b],(!a[b]||e.modified("fields",b)||t.modified(E.fields))&&(x=E.fname,(g=p[x])||(s[x]=m=nP(),p[x]=g=m.insert(E,t.source,0)),a[b]=tP(m,b,i[b]).onAdd(g,l));for(b=0,w=o.data().length;b<w;++b)y[b]||(c[b]!==l[b]?f.push(b):_[b]&&l[b]!==u&&h.push(b));return o.mask=(1<<d)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,a=this._indices,o=e.fields,l={},c=n.add,u=i.size()+r.length,f=s.length;let h=i.size(),d,p,g;i.resize(u,f),i.add(r);const m=i.curr(),x=i.prev(),v=i.all();for(d=0;d<f;++d)p=o[d].fname,g=l[p]||(l[p]=a[p].insert(o[d],r,h)),s[d].onAdd(g,m);for(;h<u;++h)x[h]=v,m[h]!==v&&c.push(h)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),a=e.mod;let o,l,c;for(o=0,l=a.length;o<l;++o)c=a[o]._index,i[c]!==s&&n.push(c)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),a=i.prev(),o=i.all(),l={},c=n.rem,u=t.rem;let f,h,d,p;for(f=0,h=u.length;f<h;++f)d=u[f]._index,l[d]=1,a[d]=p=s[d],s[d]=o,p!==o&&c.push(d);for(d in r)r[d].remove(h,l);return this.reindex(t,h,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const a in r)r[a].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,a=r.length;let o=0,l,c;for(n.filters=0,c=0;c<a;++c)e.modified("query",c)&&(l=c,++o);if(o===1)o=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(c=0,o=0;c<a;++c)e.modified("query",c)&&(o|=r[c].one,this.incrementAll(r[c],i[c],s,n.add),n.rem=n.add);return o},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),a=i.curr(),o=i.prev(),l=e.index(),c=e.bisect(e.range),u=e.bisect(t),f=u[0],h=u[1],d=c[0],p=c[1],g=e.one;let m,x,v;if(f<d)for(m=f,x=Math.min(d,h);m<x;++m)v=l[m],s[v]!==n&&(o[v]=a[v],s[v]=n,r.push(v)),a[v]^=g;else if(f>d)for(m=d,x=Math.min(f,p);m<x;++m)v=l[m],s[v]!==n&&(o[v]=a[v],s[v]=n,r.push(v)),a[v]^=g;if(h>p)for(m=Math.max(f,p),x=h;m<x;++m)v=l[m],s[v]!==n&&(o[v]=a[v],s[v]=n,r.push(v)),a[v]^=g;else if(h<p)for(m=Math.max(d,h),x=p;m<x;++m)v=l[m],s[v]!==n&&(o[v]=a[v],s[v]=n,r.push(v)),a[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),a=e.index(),o=e.bisect(e.range),l=e.bisect(t),c=l[0],u=l[1],f=o[0],h=o[1],d=e.one;let p,g,m;if(c<f)for(p=c,g=Math.min(f,u);p<g;++p)m=a[p],s[m]^=d,n.push(m);else if(c>f)for(p=f,g=Math.min(c,h);p<g;++p)m=a[p],s[m]^=d,r.push(m);if(u>h)for(p=Math.max(c,h),g=u;p<g;++p)m=a[p],s[m]^=d,n.push(m);else if(u<h)for(p=Math.max(f,u),g=h;p<g;++p)m=a[p],s[m]^=d,r.push(m);e.range=t.slice()}});function oM(e){le.call(this,null,e)}oM.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Fe(oM,le,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),a=r.data(),o=r.curr(),l=r.prev(),c=u=>o[u]&n?null:a[u];return s.filter(s.MOD,c),i&i-1?(s.filter(s.ADD,u=>{const f=o[u]&n;return!f&&f^l[u]&n?a[u]:null}),s.filter(s.REM,u=>{const f=o[u]&n;return f&&!(f^(f^l[u]&n))?a[u]:null})):(s.filter(s.ADD,c),s.filter(s.REM,u=>(o[u]&n)===i?a[u]:null)),s.filter(s.SOURCE,u=>c(u._index))}});const f6e=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:aM,resolvefilter:oM},Symbol.toStringTag,{value:"Module"})),h6e="RawCode",Oh="Literal",d6e="Property",p6e="Identifier",g6e="ArrayExpression",m6e="BinaryExpression",CJ="CallExpression",x6e="ConditionalExpression",v6e="LogicalExpression",y6e="MemberExpression",_6e="ObjectExpression",b6e="UnaryExpression";function no(e){this.type=e}no.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=E6e(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function E6e(e){switch(e.type){case g6e:return e.elements;case m6e:case v6e:return[e.left,e.right];case CJ:return[e.callee].concat(e.arguments);case x6e:return[e.test,e.consequent,e.alternate];case y6e:return[e.object,e.property];case _6e:return e.properties;case d6e:return[e.key,e.value];case b6e:return[e.argument];case p6e:case Oh:case h6e:default:return[]}}var Qo,He,fe,ii,Yt,Tw=1,Wx=2,Nh=3,Zu=4,kw=5,sd=6,Pi=7,jx=8,w6e=9;Qo={};Qo[Tw]="Boolean";Qo[Wx]="<end>";Qo[Nh]="Identifier";Qo[Zu]="Keyword";Qo[kw]="Null";Qo[sd]="Numeric";Qo[Pi]="Punctuator";Qo[jx]="String";Qo[w6e]="RegularExpression";var S6e="ArrayExpression",A6e="BinaryExpression",T6e="CallExpression",k6e="ConditionalExpression",FJ="Identifier",C6e="Literal",F6e="LogicalExpression",O6e="MemberExpression",N6e="ObjectExpression",D6e="Property",M6e="UnaryExpression",dr="Unexpected token %0",R6e="Unexpected number",$6e="Unexpected string",I6e="Unexpected identifier",L6e="Unexpected reserved word",P6e="Unexpected end of input",pF="Invalid regular expression",vT="Invalid regular expression: missing /",OJ="Octal literals are not allowed in strict mode.",B6e="Duplicate data property in object literal not allowed in strict mode",kr="ILLEGAL",$1="Disabled.",U6e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),z6e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Cw(e,t){if(!e)throw new Error("ASSERT: "+t)}function bl(e){return e>=48&&e<=57}function lM(e){return"0123456789abcdefABCDEF".includes(e)}function Vm(e){return"01234567".includes(e)}function H6e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function I1(e){return e===10||e===13||e===8232||e===8233}function Gx(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&U6e.test(String.fromCharCode(e))}function gb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&z6e.test(String.fromCharCode(e))}const V6e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function NJ(){for(;fe<ii;){const e=He.charCodeAt(fe);if(H6e(e)||I1(e))++fe;else break}}function gF(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)fe<ii&&lM(He[fe])?(r=He[fe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Bt({},dr,kr);return String.fromCharCode(i)}function W6e(){var e,t,n,r;for(e=He[fe],t=0,e==="}"&&Bt({},dr,kr);fe<ii&&(e=He[fe++],!!lM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Bt({},dr,kr),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function DJ(){var e,t;for(e=He.charCodeAt(fe++),t=String.fromCharCode(e),e===92&&(He.charCodeAt(fe)!==117&&Bt({},dr,kr),++fe,e=gF("u"),(!e||e==="\\"||!Gx(e.charCodeAt(0)))&&Bt({},dr,kr),t=e);fe<ii&&(e=He.charCodeAt(fe),!!gb(e));)++fe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),He.charCodeAt(fe)!==117&&Bt({},dr,kr),++fe,e=gF("u"),(!e||e==="\\"||!gb(e.charCodeAt(0)))&&Bt({},dr,kr),t+=e);return t}function j6e(){var e,t;for(e=fe++;fe<ii;){if(t=He.charCodeAt(fe),t===92)return fe=e,DJ();if(gb(t))++fe;else break}return He.slice(e,fe)}function G6e(){var e,t,n;return e=fe,t=He.charCodeAt(fe)===92?DJ():j6e(),t.length===1?n=Nh:V6e.hasOwnProperty(t)?n=Zu:t==="null"?n=kw:t==="true"||t==="false"?n=Tw:n=Nh,{type:n,value:t,start:e,end:fe}}function yT(){var e=fe,t=He.charCodeAt(fe),n,r=He[fe],i,s,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++fe,{type:Pi,value:String.fromCharCode(t),start:e,end:fe};default:if(n=He.charCodeAt(fe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return fe+=2,{type:Pi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:fe};case 33:case 61:return fe+=2,He.charCodeAt(fe)===61&&++fe,{type:Pi,value:He.slice(e,fe),start:e,end:fe}}}if(a=He.substr(fe,4),a===">>>=")return fe+=4,{type:Pi,value:a,start:e,end:fe};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return fe+=3,{type:Pi,value:s,start:e,end:fe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return fe+=2,{type:Pi,value:i,start:e,end:fe};if(i==="//"&&Bt({},dr,kr),"<>=!+-*%&|^/".includes(r))return++fe,{type:Pi,value:r,start:e,end:fe};Bt({},dr,kr)}function q6e(e){let t="";for(;fe<ii&&lM(He[fe]);)t+=He[fe++];return t.length===0&&Bt({},dr,kr),Gx(He.charCodeAt(fe))&&Bt({},dr,kr),{type:sd,value:parseInt("0x"+t,16),start:e,end:fe}}function X6e(e){let t="0"+He[fe++];for(;fe<ii&&Vm(He[fe]);)t+=He[fe++];return(Gx(He.charCodeAt(fe))||bl(He.charCodeAt(fe)))&&Bt({},dr,kr),{type:sd,value:parseInt(t,8),octal:!0,start:e,end:fe}}function rP(){var e,t,n;if(n=He[fe],Cw(bl(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=fe,e="",n!=="."){if(e=He[fe++],n=He[fe],e==="0"){if(n==="x"||n==="X")return++fe,q6e(t);if(Vm(n))return X6e(t);n&&bl(n.charCodeAt(0))&&Bt({},dr,kr)}for(;bl(He.charCodeAt(fe));)e+=He[fe++];n=He[fe]}if(n==="."){for(e+=He[fe++];bl(He.charCodeAt(fe));)e+=He[fe++];n=He[fe]}if(n==="e"||n==="E")if(e+=He[fe++],n=He[fe],(n==="+"||n==="-")&&(e+=He[fe++]),bl(He.charCodeAt(fe)))for(;bl(He.charCodeAt(fe));)e+=He[fe++];else Bt({},dr,kr);return Gx(He.charCodeAt(fe))&&Bt({},dr,kr),{type:sd,value:parseFloat(e),start:t,end:fe}}function Y6e(){var e="",t,n,r,i,s=!1;for(t=He[fe],Cw(t==="'"||t==='"',"String literal must starts with a quote"),n=fe,++fe;fe<ii;)if(r=He[fe++],r===t){t="";break}else if(r==="\\")if(r=He[fe++],!r||!I1(r.charCodeAt(0)))switch(r){case"u":case"x":He[fe]==="{"?(++fe,e+=W6e()):e+=gF(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Vm(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),fe<ii&&Vm(He[fe])&&(s=!0,i=i*8+"01234567".indexOf(He[fe++]),"0123".includes(r)&&fe<ii&&Vm(He[fe])&&(i=i*8+"01234567".indexOf(He[fe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&He[fe]===`
`&&++fe;else{if(I1(r.charCodeAt(0)))break;e+=r}return t!==""&&Bt({},dr,kr),{type:jx,value:e,octal:s,start:n,end:fe}}function K6e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Bt({},pF)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Bt({},pF)}try{return new RegExp(e,t)}catch{return null}}function J6e(){var e,t,n,r,i;for(e=He[fe],Cw(e==="/","Regular expression literal must start with a slash"),t=He[fe++],n=!1,r=!1;fe<ii;)if(e=He[fe++],t+=e,e==="\\")e=He[fe++],I1(e.charCodeAt(0))&&Bt({},vT),t+=e;else if(I1(e.charCodeAt(0)))Bt({},vT);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Bt({},vT),i=t.substr(1,t.length-2),{value:i,literal:t}}function Z6e(){var e,t,n;for(t="",n="";fe<ii&&(e=He[fe],!!gb(e.charCodeAt(0)));)++fe,e==="\\"&&fe<ii?Bt({},dr,kr):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Bt({},pF,n),{value:n,literal:t}}function Q6e(){var e,t,n,r;return Yt=null,NJ(),e=fe,t=J6e(),n=Z6e(),r=K6e(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:fe}}function e5e(e){return e.type===Nh||e.type===Zu||e.type===Tw||e.type===kw}function MJ(){if(NJ(),fe>=ii)return{type:Wx,start:fe,end:fe};const e=He.charCodeAt(fe);return Gx(e)?G6e():e===40||e===41||e===59?yT():e===39||e===34?Y6e():e===46?bl(He.charCodeAt(fe+1))?rP():yT():bl(e)?rP():yT()}function Vi(){const e=Yt;return fe=e.end,Yt=MJ(),fe=e.end,e}function RJ(){const e=fe;Yt=MJ(),fe=e}function t5e(e){const t=new no(S6e);return t.elements=e,t}function iP(e,t,n){const r=new no(e==="||"||e==="&&"?F6e:A6e);return r.operator=e,r.left=t,r.right=n,r}function n5e(e,t){const n=new no(T6e);return n.callee=e,n.arguments=t,n}function r5e(e,t,n){const r=new no(k6e);return r.test=e,r.consequent=t,r.alternate=n,r}function cM(e){const t=new no(FJ);return t.name=e,t}function cm(e){const t=new no(C6e);return t.value=e.value,t.raw=He.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function sP(e,t,n){const r=new no(O6e);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function i5e(e){const t=new no(N6e);return t.properties=e,t}function aP(e,t,n){const r=new no(D6e);return r.key=t,r.value=n,r.kind=e,r}function s5e(e,t){const n=new no(M6e);return n.operator=e,n.argument=t,n.prefix=!0,n}function Bt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,a)=>(Cw(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=fe,n.description=i,n}function Fw(e){e.type===Wx&&Bt(e,P6e),e.type===sd&&Bt(e,R6e),e.type===jx&&Bt(e,$6e),e.type===Nh&&Bt(e,I6e),e.type===Zu&&Bt(e,L6e),Bt(e,dr,e.value)}function si(e){const t=Vi();(t.type!==Pi||t.value!==e)&&Fw(t)}function ln(e){return Yt.type===Pi&&Yt.value===e}function _T(e){return Yt.type===Zu&&Yt.value===e}function a5e(){const e=[];for(fe=Yt.start,si("[");!ln("]");)ln(",")?(Vi(),e.push(null)):(e.push(Dh()),ln("]")||si(","));return Vi(),t5e(e)}function oP(){fe=Yt.start;const e=Vi();return e.type===jx||e.type===sd?(e.octal&&Bt(e,OJ),cm(e)):cM(e.value)}function o5e(){var e,t,n,r;if(fe=Yt.start,e=Yt,e.type===Nh)return n=oP(),si(":"),r=Dh(),aP("init",n,r);if(e.type===Wx||e.type===Pi)Fw(e);else return t=oP(),si(":"),r=Dh(),aP("init",t,r)}function l5e(){var e=[],t,n,r,i={},s=String;for(fe=Yt.start,si("{");!ln("}");)t=o5e(),t.key.type===FJ?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Bt({},B6e):i[r]=!0,e.push(t),ln("}")||si(",");return si("}"),i5e(e)}function c5e(){si("(");const e=uM();return si(")"),e}const u5e={if:1};function f5e(){var e,t,n;if(ln("("))return c5e();if(ln("["))return a5e();if(ln("{"))return l5e();if(e=Yt.type,fe=Yt.start,e===Nh||u5e[Yt.value])n=cM(Vi().value);else if(e===jx||e===sd)Yt.octal&&Bt(Yt,OJ),n=cm(Vi());else{if(e===Zu)throw new Error($1);e===Tw?(t=Vi(),t.value=t.value==="true",n=cm(t)):e===kw?(t=Vi(),t.value=null,n=cm(t)):ln("/")||ln("/=")?(n=cm(Q6e()),RJ()):Fw(Vi())}return n}function h5e(){const e=[];if(si("("),!ln(")"))for(;fe<ii&&(e.push(Dh()),!ln(")"));)si(",");return si(")"),e}function d5e(){fe=Yt.start;const e=Vi();return e5e(e)||Fw(e),cM(e.value)}function p5e(){return si("."),d5e()}function g5e(){si("[");const e=uM();return si("]"),e}function m5e(){var e,t,n;for(e=f5e();;)if(ln("."))n=p5e(),e=sP(".",e,n);else if(ln("("))t=h5e(),e=n5e(e,t);else if(ln("["))n=g5e(),e=sP("[",e,n);else break;return e}function lP(){const e=m5e();if(Yt.type===Pi&&(ln("++")||ln("--")))throw new Error($1);return e}function p_(){var e,t;if(Yt.type!==Pi&&Yt.type!==Zu)t=lP();else{if(ln("++")||ln("--"))throw new Error($1);if(ln("+")||ln("-")||ln("~")||ln("!"))e=Vi(),t=p_(),t=s5e(e.value,t);else{if(_T("delete")||_T("void")||_T("typeof"))throw new Error($1);t=lP()}}return t}function cP(e){let t=0;if(e.type!==Pi&&e.type!==Zu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function x5e(){var e,t,n,r,i,s,a,o,l,c;if(e=Yt,l=p_(),r=Yt,i=cP(r),i===0)return l;for(r.prec=i,Vi(),t=[e,Yt],a=p_(),s=[l,r,a];(i=cP(Yt))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),t.pop(),n=iP(o,l,a),s.push(n);r=Vi(),r.prec=i,s.push(r),t.push(Yt),n=p_(),s.push(n)}for(c=s.length-1,n=s[c],t.pop();c>1;)t.pop(),n=iP(s[c-1].value,s[c-2],n),c-=2;return n}function Dh(){var e,t,n;return e=x5e(),ln("?")&&(Vi(),t=Dh(),si(":"),n=Dh(),e=r5e(e,t,n)),e}function uM(){const e=Dh();if(ln(","))throw new Error($1);return e}function fM(e){He=e,fe=0,ii=He.length,Yt=null,RJ();const t=uM();if(Yt.type!==Wx)throw new Error("Unexpect token after expression.");return t}var $J={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function IJ(e){function t(a,o,l,c){let u=e(o[0]);return l&&(u=l+"("+u+")",l.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(c<0?"":c===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(a,o,l){return c=>t(a,c,o,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&he("Missing arguments to clamp function."),a.length>3&&he("Too many arguments to clamp function.");const o=a.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&he("Missing arguments to if function."),a.length>3&&he("Too many arguments to if function.");const o=a.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function v5e(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function LJ(e){e=e||{};const t=e.allowed?Ga(e.allowed):{},n=e.forbidden?Ga(e.forbidden):{},r=e.constants||$J,i=(e.functions||IJ)(f),s=e.globalvar,a=e.fieldvar,o=ht(s)?s:p=>`${s}["${p}"]`;let l={},c={},u=0;function f(p){if(Le(p))return p;const g=h[p.type];return g==null&&he("Unsupported type: "+p.type),g(p)}const h={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return u>0?g:Ze(n,g)?he("Illegal identifier: "+g):Ze(r,g)?r[g]:Ze(t,g)?g:(l[g]=1,o(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(u+=1);const x=f(p.property);return m===a&&(c[v5e(x)]=1),g&&(u-=1),m+(g?"."+x:"["+x+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&he("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,x=Ze(i,g)&&i[g];return x||he("Unrecognized function: "+g),ht(x)?x(m):x+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{u+=1;const g=f(p.key);return u-=1,g+":"+f(p.value)}};function d(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},g}return d.functions=i,d.constants=r,d}const uP=Symbol("vega_selection_getter");function PJ(e){return(!e.getter||!e.getter[uP])&&(e.getter=la(e.field),e.getter[uP]=!0),e.getter}const hM="intersect",fP="union",y5e="vlMulti",_5e="vlPoint",hP="or",b5e="and",bo="_vgsid_",L1=la(bo),E5e="E",w5e="R",S5e="R-E",A5e="R-LE",T5e="R-RE",mb="index:unit";function dP(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,a,o;s<i;++s)if(o=n[s],a=PJ(o)(e),su(a)&&(a=Jr(a)),su(r[s])&&(r[s]=Jr(r[s])),ge(r[s])&&su(r[s][0])&&(r[s]=r[s].map(Jr)),o.type===E5e){if(ge(r[s])?r[s].indexOf(a)<0:a!==r[s])return!1}else if(o.type===w5e){if(!Yd(a,r[s]))return!1}else if(o.type===T5e){if(!Yd(a,r[s],!0,!1))return!1}else if(o.type===S5e){if(!Yd(a,r[s],!1,!1))return!1}else if(o.type===A5e&&!Yd(a,r[s],!1,!0))return!1;return!0}function k5e(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[mb]&&r[mb].value:void 0,a=n===hM,o=i.length,l=0,c,u,f,h,d;l<o;++l)if(c=i[l],s&&a){if(u=u||{},f=u[h=c.unit]||0,f===-1)continue;if(d=dP(t,c),u[h]=d?-1:++f,d&&s.size===1)return!0;if(!d&&f===s.get(h).count)return!1}else if(d=dP(t,c),a^d)return d;return o&&a}const BJ=Cp(L1),C5e=BJ.left,F5e=BJ.right;function O5e(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[mb]&&r[mb].value:void 0,a=n===hM,o=L1(t),l=C5e(i,o);if(l===i.length||L1(i[l])!==o)return!1;if(s&&a){if(s.size===1)return!0;if(F5e(i,o)-l<s.size)return!1}return!0}function N5e(e,t){return e.map(n=>ut(t.fields?{values:t.fields.map(r=>PJ(r)(n.datum))}:{[bo]:L1(n.datum)},t))}function D5e(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],a={},o={},l={},c,u,f,h,d,p,g,m,x,v,y=s.length,_=0,b,w;_<y;++_)if(c=s[_],h=c.unit,u=c.fields,f=c.values,u&&f){for(b=0,w=u.length;b<w;++b)d=u[b],g=a[d.field]||(a[d.field]={}),m=g[h]||(g[h]=[]),l[d.field]=x=d.type.charAt(0),v=bT[`${x}_union`],g[h]=v(m,Ie(f[b]));n&&(m=o[h]||(o[h]=[]),m.push(Ie(f).reduce((E,A,S)=>(E[u[S].field]=A,E),{})))}else d=bo,p=L1(c),g=a[d]||(a[d]={}),m=g[h]||(g[h]=[]),m.push(p),n&&(m=o[h]||(o[h]=[]),m.push({[bo]:p}));if(t=t||fP,a[bo]?a[bo]=bT[`${bo}_${t}`](...Object.values(a[bo])):Object.keys(a).forEach(E=>{a[E]=Object.keys(a[E]).map(A=>a[E][A]).reduce((A,S)=>A===void 0?S:bT[`${l[E]}_${t}`](A,S))}),s=Object.keys(o),n&&s.length){const E=r?_5e:y5e;a[E]=t===fP?{[hP]:s.reduce((A,S)=>(A.push(...o[S]),A),[])}:{[b5e]:s.map(A=>({[hP]:o[A]}))}}return a}var bT={[`${bo}_union`]:Fde,[`${bo}_intersect`]:kde,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Jr(t[0]),r=Jr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Jr(t[0]),r=Jr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const M5e=":",R5e="@";function dM(e,t,n,r){t[0].type!==Oh&&he("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Ft(t).value,a="unit",o=R5e+a,l=M5e+i;s===hM&&!Ze(r,o)&&(r[o]=n.getData(i).indataRef(n,a)),Ze(r,l)||(r[l]=n.getData(i).tuplesRef())}function UJ(e){const t=this.context.data[e];return t?t.values.value:[]}function $5e(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function I5e(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ca).insert(t)),1}function L5e(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const qx=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},P5e=qx("format"),zJ=qx("timeFormat"),B5e=qx("utcFormat"),U5e=qx("timeParse"),z5e=qx("utcParse"),vy=new Date(2e3,0,1);function Ow(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(vy.setYear(2e3),vy.setMonth(e),vy.setDate(t),zJ.call(this,vy,n))}function H5e(e){return Ow.call(this,e,1,"%B")}function V5e(e){return Ow.call(this,e,1,"%b")}function W5e(e){return Ow.call(this,0,2+e,"%A")}function j5e(e){return Ow.call(this,0,2+e,"%a")}const G5e=":",q5e="@",mF="%",HJ="$";function pM(e,t,n,r){t[0].type!==Oh&&he("First argument to data functions must be a string literal.");const i=t[0].value,s=G5e+i;if(!Ze(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function X5e(e,t,n,r){t[0].type!==Oh&&he("First argument to indata must be a string literal."),t[1].type!==Oh&&he("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,a=q5e+s;Ze(a,r)||(r[a]=n.getData(i).indataRef(n,s))}function ki(e,t,n,r){if(t[0].type===Oh)pP(n,r,t[0].value);else for(e in n.scales)pP(n,r,e)}function pP(e,t,n){const r=mF+n;if(!Ze(t,r))try{t[r]=e.scaleRef(n)}catch{}}function el(e,t){if(ht(e))return e;if(Le(e)){const n=t.scales[e];return n&&_Ne(n.value)?n.value:void 0}}function Y5e(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ki,n._range=ki,n._scale=ki;const r=i=>"_["+(i.type===Oh?Ce(mF+i.value):Ce(mF)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function gM(e,t){return function(n,r,i){if(n){const s=el(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const K5e=gM("area",A1e),J5e=gM("bounds",F1e),Z5e=gM("centroid",$1e);function Q5e(e,t){const n=el(e,(t||this).context);return n&&n.scale()}function e8e(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function mM(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function t8e(){return mM(this.context.dataflow,"warn",arguments)}function n8e(){return mM(this.context.dataflow,"info",arguments)}function r8e(){return mM(this.context.dataflow,"debug",arguments)}function ET(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xF(e){const t=_u(e),n=ET(t.r),r=ET(t.g),i=ET(t.b);return .2126*n+.7152*r+.0722*i}function i8e(e,t){const n=xF(e),r=xF(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function s8e(){const e=[].slice.call(arguments);return e.unshift({}),ut(...e)}function VJ(e,t){return e===t||e!==e&&t!==t?!0:ge(e)?ge(t)&&e.length===t.length?a8e(e,t):!1:$e(e)&&$e(t)?WJ(e,t):!1}function a8e(e,t){for(let n=0,r=e.length;n<r;++n)if(!VJ(e[n],t[n]))return!1;return!0}function WJ(e,t){for(const n in e)if(!VJ(e[n],t[n]))return!1;return!0}function gP(e){return t=>WJ(e,t)}function o8e(e,t,n,r,i,s){const a=this.context.dataflow,o=this.context.data[e],l=o.input,c=a.stamp();let u=o.changes,f,h;if(a._trigger===!1||!(l.value.length||t||r))return 0;if((!u||u.stamp<c)&&(o.changes=u=a.changeset(),u.stamp=c,a.runAfter(()=>{o.modified=!0,a.pulse(l,u).run()},!0,1)),n&&(f=n===!0?ca:ge(n)||ew(n)?n:gP(n),u.remove(f)),t&&u.insert(t),r&&(f=gP(r),l.value.some(f)?u.remove(f):u.insert(r)),i)for(h in s)u.modify(i,h,s[h]);return 1}function l8e(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function c8e(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const mP={};function u8e(e,t){const n=mP[t]||(mP[t]=la(t));return ge(e)?e.map(n):n(e)}function xM(e){return ge(e)||ArrayBuffer.isView(e)?e:null}function vM(e){return xM(e)||(Le(e)?e:null)}function f8e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return xM(e).join(...n)}function h8e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vM(e).indexOf(...n)}function d8e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vM(e).lastIndexOf(...n)}function p8e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vM(e).slice(...n)}function g8e(e,t,n){return ht(n)&&he("Function argument passed to replace."),String(e).replace(t,n)}function m8e(e){return xM(e).slice().reverse()}function x8e(e,t,n){return HN(e||0,t||0,n||0)}function v8e(e,t){const n=el(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function y8e(e,t){const n=el(e,(t||this).context);return n?n.copy():void 0}function _8e(e,t){const n=el(e,(t||this).context);return n?n.domain():[]}function b8e(e,t,n){const r=el(e,(n||this).context);return r?ge(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function E8e(e,t){const n=el(e,(t||this).context);return n&&n.range?n.range():[]}function w8e(e,t,n){const r=el(e,(n||this).context);return r?r(t):void 0}function S8e(e,t,n,r,i){e=el(e,(i||this).context);const s=RY(t,n);let a=e.domain(),o=a[0],l=Ft(a),c=oi;return l-o?c=EY(e,o,l):e=(e.interpolator?Ht("sequential")().interpolator(e.interpolator()):Ht("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(a=e.ticks(+r||15),o!==a[0]&&a.unshift(o),l!==Ft(a)&&a.push(l)),a.forEach(u=>s.stop(c(u),e(u))),s}function A8e(e,t,n){const r=el(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function T8e(e){let t=null;return function(n){return n?N1(n,t=t||np(e)):e}}const jJ=e=>e.data;function GJ(e,t){const n=UJ.call(t,e);return n.root&&n.root.lookup||{}}function k8e(e,t,n){const r=GJ(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(jJ):void 0}function C8e(e,t){const n=GJ(e,this)[t];return n?n.ancestors().map(jJ):void 0}const qJ=()=>typeof window<"u"&&window||null;function F8e(){const e=qJ();return e?e.screen:{}}function O8e(){const e=qJ();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function N8e(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function XJ(e,t,n){if(!e)return[];const[r,i]=e,s=new Vn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return NK(a,s,D8e(t))}function D8e(e){let t=null;if(e){const n=Ie(e.marktype),r=Ie(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function M8e(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Ie(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function R8e(e){return Ie(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function $8e(e,t,n){const{x:r,y:i,mark:s}=n,a=new Vn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,c]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),c<a.y1&&(a.y1=c),c>a.y2&&(a.y2=c);return a.translate(r,i),XJ([[a.x1,a.y1],[a.x2,a.y2]],e,s).filter(l=>I8e(l.x,l.y,t))}function I8e(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[a,o]=n[s],[l,c]=n[i];c>t!=o>t&&e<(a-l)*(t-c)/(o-c)+l&&r++}return r&1}const P1={random(){return fa()},cumulativeNormal:sw,cumulativeLogNormal:lN,cumulativeUniform:hN,densityNormal:rN,densityLogNormal:oN,densityUniform:fN,quantileNormal:aw,quantileLogNormal:cN,quantileUniform:dN,sampleNormal:iw,sampleLogNormal:aN,sampleUniform:uN,isArray:ge,isBoolean:Ju,isDate:su,isDefined(e){return e!==void 0},isNumber:$t,isObject:$e,isRegExp:Dq,isString:Le,isTuple:ew,isValid(e){return e!=null&&e===e},toBoolean:zO,toDate(e){return HO(e)},toNumber:Jr,toString:VO,indexof:h8e,join:f8e,lastindexof:d8e,replace:g8e,reverse:m8e,slice:p8e,flush:Oq,lerp:Mq,merge:s8e,pad:Iq,peek:Ft,pluck:u8e,span:kx,inrange:Yd,truncate:Lq,rgb:_u,lab:Z_,hcl:Q_,hsl:K_,luminance:xF,contrast:i8e,sequence:ms,format:P5e,utcFormat:B5e,utcParse:z5e,utcOffset:Jq,utcSequence:eX,timeFormat:zJ,timeParse:U5e,timeOffset:Kq,timeSequence:Qq,timeUnitSpecifier:Bq,monthFormat:H5e,monthAbbrevFormat:V5e,dayFormat:W5e,dayAbbrevFormat:j5e,quarter:Tq,utcquarter:kq,week:zq,utcweek:Wq,dayofyear:Uq,utcdayofyear:Vq,warn:t8e,info:n8e,debug:r8e,extent(e){return zo(e)},inScope:e8e,intersect:XJ,clampRange:Cq,pinchDistance:l8e,pinchAngle:c8e,screen:F8e,containerSize:N8e,windowSize:O8e,bandspace:x8e,setdata:I5e,pathShape:T8e,panLinear:Eq,panLog:wq,panPow:Sq,panSymlog:Aq,zoomLinear:$O,zoomLog:IO,zoomPow:Y2,zoomSymlog:LO,encode:L5e,modify:o8e,lassoAppend:M8e,lassoPath:R8e,intersectLasso:$8e},L8e=["view","item","group","xy","x","y"],P8e="event.vega.",YJ="this.",yM={},KJ={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Ce(HJ+e)}]`,functions:B8e,constants:$J,visitors:yM},vF=LJ(KJ);function B8e(e){const t=IJ(e);L8e.forEach(n=>t[n]=P8e+n);for(const n in P1)t[n]=YJ+n;return ut(t,Y5e(e,P1,yM)),t}function In(e,t,n){return arguments.length===1?P1[e]:(P1[e]=t,n&&(yM[e]=n),vF&&(vF.functions[e]=YJ+e),this)}In("bandwidth",v8e,ki);In("copy",y8e,ki);In("domain",_8e,ki);In("range",E8e,ki);In("invert",b8e,ki);In("scale",w8e,ki);In("gradient",S8e,ki);In("geoArea",K5e,ki);In("geoBounds",J5e,ki);In("geoCentroid",Z5e,ki);In("geoShape",A8e,ki);In("geoScale",Q5e,ki);In("indata",$5e,X5e);In("data",UJ,pM);In("treePath",k8e,pM);In("treeAncestors",C8e,pM);In("vlSelectionTest",k5e,dM);In("vlSelectionIdTest",O5e,dM);In("vlSelectionResolve",D5e,dM);In("vlSelectionTuples",N5e);function Vo(e,t){const n={};let r;try{e=Le(e)?e:Ce(e)+"",r=fM(e)}catch{he("Expression parse error: "+e)}r.visit(s=>{if(s.type!==CJ)return;const a=s.callee.name,o=KJ.visitors[a];o&&o(a,s.arguments,t,n)});const i=vF(r);return i.globals.forEach(s=>{const a=HJ+s;!Ze(n,a)&&t.getSignal(s)&&(n[a]=t.signalRef(s))}),{$expr:ut({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function U8e(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const z8e=Ga(["rule"]),xP=Ga(["group","image","rect"]);function H8e(e,t){let n="";return z8e[t]||(e.x2&&(e.x?(xP[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(xP[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function _M(e){return(e+"").toLowerCase()}function V8e(e){return _M(e)==="operator"}function W8e(e){return _M(e)==="collect"}function Tg(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function j8e(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var G8e={operator:(e,t)=>Tg(e,["_"],t.code),parameter:(e,t)=>Tg(e,["datum","_"],t.code),event:(e,t)=>Tg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Tg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const a="o["+Ce(s)+"]";i+=`$=${r[s].code};if(${a}!==$)${a}=$,m=1;`}return i+=H8e(r,n),i+="return m;",Tg(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Ce).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,a)=>{const o=t[a];let l,c;return s.path?(l=`a${s.path}`,c=`b${s.path}`):((n=n||{})["f"+a]=s,l=`this.f${a}(a)`,c=`this.f${a}(b)`),j8e(l,c,-o,o)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function q8e(e){const t=this;V8e(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function X8e(e){const t=this;if(e.params){const n=t.get(e.id);n||he("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Y8e(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ge(i)?i.map(s=>vP(s,n,t)):vP(i,n,t)}return t}function vP(e,t,n){if(!e||!$e(e))return e;for(let r=0,i=yP.length,s;r<i;++r)if(s=yP[r],Ze(e,s.key))return s.parse(e,t,n);return e}var yP=[{key:"$ref",parse:K8e},{key:"$key",parse:Z8e},{key:"$expr",parse:J8e},{key:"$field",parse:Q8e},{key:"$encode",parse:tLe},{key:"$compare",parse:eLe},{key:"$context",parse:nLe},{key:"$subflow",parse:rLe},{key:"$tupleid",parse:iLe}];function K8e(e,t){return t.get(e.$ref)||he("Operator not defined: "+e.$ref)}function J8e(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=is(t.parameterExpression(e.$expr),e.$fields))}function Z8e(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=UO(e.$key,e.$flat,t.expr.codegen))}function Q8e(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=la(e.$field,e.$name,t.expr.codegen))}function eLe(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Ie(e.$compare).map(i=>i&&i.$tupleid?Ke:i);return t.fn[n]||(t.fn[n]=PO(r,e.$order,t.expr.codegen))}function tLe(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=is(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function nLe(e,t){return t}function rLe(e,t){const n=e.$subflow;return function(r,i,s){const a=t.fork().parse(n),o=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(s),o.detachSubflow=()=>t.detach(a),o}}function iLe(){return Ke}function sLe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&he("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function aLe(e){var t=this,n=$e(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,a=void 0;r||he("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(a=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,a)}const oLe={skip:!0};function lLe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const a=t.signals[s];e.signals(s,a)&&(r[s]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const a=t.data[s];e.data(s,a)&&(i[s]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function cLe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],oLe)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(ca).insert(r[s]))}),(e.subcontext||[]).forEach((s,a)=>{const o=t.subcontext[a];o&&o.setState(s)})}function JJ(e,t,n,r){return new ZJ(e,t,n,r)}function ZJ(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||G8e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function _P(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}ZJ.prototype=_P.prototype={fork(){const e=new _P(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),W8e(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const a=n.data[s]||(n.data[s]={});e.data[s].forEach(o=>a[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[_M(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:U8e,parseOperator:q8e,parseOperatorParameters:X8e,parseParameters:Y8e,parseStream:sLe,parseUpdate:aLe,getState:lLe,setState:cLe};function uLe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),QJ(t,e.description()))}function QJ(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function fLe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const wT="default";function hLe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:wT,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Le(i)?i:i.user:wT,a=r.item&&r.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Le(r)||(i=r.item,r=r.user),yF(e,r&&r!==wT?r:i||r),i},{cursor:t})}function yF(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function xb(e,t){var n=e._runtime.data;return Ze(n,t)||he("Unrecognized data set: "+t),n[t]}function dLe(e,t){return arguments.length<2?xb(this,e).values.value:Nw.call(this,e,rd().remove(ca).insert(t))}function Nw(e,t){_X(t)||he("Second argument to changes must be a changeset.");const n=xb(this,e);return n.modified=!0,this.pulse(n.input,t)}function pLe(e,t){return Nw.call(this,e,rd().insert(t))}function gLe(e,t){return Nw.call(this,e,rd().remove(t))}function eZ(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function tZ(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Dw(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function mLe(e){var t=Dw(e),n=eZ(e),r=tZ(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function xLe(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,a,o;return i&&(o=Dw(e),a=t.changedTouches?t.changedTouches[0]:t,s=ww(a,i),s[0]-=o[0],s[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=vLe(e,n,s),t}function vLe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var o=r,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function s(a){if(!a)return n;Le(a)&&(a=i(a));const o=n.slice();for(;a;)o[0]-=a.x||0,o[1]-=a.y||0,a=a.mark&&a.mark.group;return o}return{view:li(e),item:li(t||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}const bP="view",yLe="timer",_Le="window",bLe={trap:!1};function ELe(e){const t=ut({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{ge(r[s])&&(r[s]=Ga(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function nZ(e,t,n,r){e._eventListeners.push({type:n,sources:Ie(t),handler:r})}function wLe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function yy(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||$e(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function SLe(e,t,n){var r=this,i=new rw(n),s=function(c,u){r.runAsync(null,()=>{e===bP&&wLe(r,t)&&c.preventDefault(),i.receive(xLe(r,c,u))})},a;if(e===yLe)yy(r,"timer",t)&&r.timer(s,t);else if(e===bP)yy(r,"view",t)&&r.addEventListener(t,s,bLe);else if(e===_Le?yy(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&yy(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var o=0,l=a.length;o<l;++o)a[o].addEventListener(t,s);nZ(r,a,t,s)}return i}function EP(e){return e.item}function wP(e){return e.item.mark.source}function SP(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function ALe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",EP),wP,SP(e)),this.on(this.events("view","pointerout",EP),wP,SP(t)),this}function TLe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,a,o,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(a=r[i],s=a.sources.length;--s>=0;)a.sources[s].removeEventListener(a.type,a.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,o=n[i].handler,this._handler.off(l,o);return this}function Es(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const kLe="vega-bind",CLe="vega-bind-name",FLe="vega-bind-radio";function OLe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=BO(r.debounce,i.update))),(r.input==null&&r.element?NLe:MLe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function NLe(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),nZ(r,t,i,s),e.set=a=>{t.value=a,t.dispatchEvent(DLe(i))}}function DLe(e){return typeof Event<"u"?new Event(e):{type:e}}function MLe(e,t,n,r){const i=r.signal(n.signal),s=Es("div",{class:kLe}),a=n.input==="radio"?s:s.appendChild(Es("label"));a.appendChild(Es("span",{class:CLe},n.name||n.signal)),t.appendChild(s);let o=RLe;switch(n.input){case"checkbox":o=$Le;break;case"select":o=ILe;break;case"radio":o=LLe;break;case"range":o=PLe;break}o(e,a,n,i)}function RLe(e,t,n,r){const i=Es("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function $Le(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Es("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=a=>s.checked=!!a||null}function ILe(e,t,n,r){const i=Es("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,o)=>{const l={value:a};vb(a,r)&&(l.selected=!0),i.appendChild(Es("option",l,(s[o]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let o=0,l=n.options.length;o<l;++o)if(vb(n.options[o],a)){i.selectedIndex=o;return}}}function LLe(e,t,n,r){const i=Es("span",{class:FLe}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,o)=>{const l={type:"radio",name:n.signal,value:a};vb(a,r)&&(l.checked=!0);const c=Es("input",l);c.addEventListener("change",()=>e.update(a));const u=Es("label",{},(s[o]||a)+"");return u.prepend(c),i.appendChild(u),c}),e.set=a=>{const o=e.elements,l=o.length;for(let c=0;c<l;++c)vb(o[c].value,a)&&(o[c].checked=!0)}}function PLe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,a=n.step||yu(s,i,100),o=Es("input",{type:"range",name:n.signal,min:s,max:i,step:a});o.value=r;const l=Es("span",{},+r);t.appendChild(o),t.appendChild(l);const c=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",c),o.addEventListener("change",c),e.elements=[o],e.set=u=>{o.value=u,l.textContent=u}}function vb(e,t){return e===t||e+""==t+""}function rZ(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,eZ(e),tZ(e),Dw(e),i,s).background(e.background())}function bM(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function BLe(e,t,n,r){const i=new r(e.loader(),bM(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Dw(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function ULe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Sw(r);e=n._el=e?ST(n,e,!0):null,uLe(n),s||n.error("Unrecognized renderer type: "+r);const a=s.handler||Vx,o=e?s.renderer:s.headless;return n._renderer=o?rZ(n,n._renderer,e,o):null,n._handler=BLe(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=ST(n,t,!0):e.appendChild(Es("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=ST(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{OLe(n,l.element||t,l)})),n}function ST(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const kg=e=>+e||0,zLe=e=>({top:e,bottom:e,left:e,right:e});function AP(e){return $e(e)?{top:kg(e.top),bottom:kg(e.bottom),left:kg(e.left),right:kg(e.right)}:zLe(kg(e))}async function EM(e,t,n,r){const i=Sw(t),s=i&&i.headless;return s||he("Unrecognized renderer type: "+t),await e.runAsync(),rZ(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function HLe(e,t){e!==qc.Canvas&&e!==qc.SVG&&e!==qc.PNG&&he("Unrecognized image type: "+e);const n=await EM(this,e,t);return e===qc.SVG?VLe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function VLe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function WLe(e,t){return(await EM(this,qc.Canvas,e,t)).canvas()}async function jLe(e){return(await EM(this,qc.SVG,e)).svg()}function GLe(e,t,n){return JJ(e,Z0,P1,n).parse(t)}function qLe(e){var t=this._runtime.scales;return Ze(t,e)||he("Unrecognized scale or projection: "+e),t[e].value}var iZ="width",sZ="height",wM="padding",TP={skip:!0};function aZ(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===wM?r.left+r.right:0)}function oZ(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===wM?r.top+r.bottom:0)}function XLe(e){var t=e._signals,n=t[iZ],r=t[sZ],i=t[wM];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=aZ(e,o.size),s()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=oZ(e,o.size),s()},{size:r});const a=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function YLe(e,t,n,r,i,s){this.runAfter(a=>{let o=0;a._autosize=0,a.width()!==n&&(o=1,a.signal(iZ,n,TP),a._resizeWidth.skip(!0)),a.height()!==r&&(o=1,a.signal(sZ,r,TP),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),o&&a.run("enter"),s&&a.runAfter(l=>l.resize())},!1,1)}function KLe(e){return this._runtime.getState(e||{data:JLe,signals:ZLe,recurse:!0})}function JLe(e,t){return t.modified&&ge(t.input.value)&&!e.startsWith("_:vega:_")}function ZLe(e,t){return!(e==="parent"||t instanceof Z0.proxy)}function QLe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function ePe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Zpe(n,t))}function tPe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",nPe(r))}function nPe(e){return e==null?"":ge(e)?lZ(e):$e(e)&&!su(e)?rPe(e):e+""}function rPe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ge(n)?lZ(n):cZ(n))}).join(`
`)}function lZ(e){return"["+e.map(cZ).join(", ")+"]"}function cZ(e){return ge(e)?"[]":$e(e)&&!su(e)?"{}":e}function iPe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function uZ(e,t){const n=this;if(t=t||{},p0.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=ut({},e.locale,t.locale);n.locale(uX(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||qc.Canvas,n._scenegraph=new iK;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||tPe,n._redraw=!0,n._handler=new Vx().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=ELe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=GLe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:ut({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=aZ(n,n._width),n._viewHeight=oZ(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,XLe(n),fLe(n),hLe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function _y(e,t){return Ze(e._signals,t)?e._signals[t]:he("Unrecognized signal name: "+Ce(t))}function fZ(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function kP(e,t,n,r){let i=fZ(n,r);return i||(i=bM(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function CP(e,t,n){const r=fZ(t,n);return r&&t._targets.remove(r),e}Fe(uZ,p0,{async evaluate(e,t,n){if(await p0.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,mLe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&t_(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&QJ(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=_y(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",AP(e)):AP(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Sw(e)||he("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(p0.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(_y(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:YLe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=bM(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return kP(this,e,_y(this,e),t)},removeSignalListener(e,t){return CP(this,_y(this,e),t)},addDataListener(e,t){return kP(this,e,xb(this,e).values,t)},removeDataListener(e,t){return CP(this,xb(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=yF(this,null);this._globalCursor=!!e,t&&yF(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:ePe,events:SLe,finalize:TLe,hover:ALe,data:dLe,change:Nw,insert:pLe,remove:gLe,scale:qLe,initialize:ULe,toImageURL:HLe,toCanvas:WLe,toSVG:jLe,getState:KLe,setState:QLe,_watchPixelRatio:iPe});const sPe="view",yb="[",_b="]",hZ="{",dZ="}",aPe=":",pZ=",",oPe="@",lPe=">",cPe=/[[\]{}]/,uPe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let gZ,mZ;function Qu(e,t,n){return gZ=t||sPe,mZ=n||uPe,xZ(e.trim()).map(_F)}function fPe(e){return mZ[e]}function Wm(e,t,n,r,i){const s=e.length;let a=0,o;for(;t<s;++t){if(o=e[t],!a&&o===n)return t;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return t}function xZ(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Wm(e,i,pZ,yb+hZ,_b+dZ),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function _F(e){return e[0]==="["?hPe(e):dPe(e)}function hPe(e){const t=e.length;let n=1,r;if(n=Wm(e,n,_b,yb,_b),n===t)throw"Empty between selector: "+e;if(r=xZ(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==lPe)throw"Expected '>' after between selector: "+e;r=r.map(_F);const i=_F(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function dPe(e){const t={source:gZ},n=[];let r=[0,0],i=0,s=0,a=e.length,o=0,l,c;if(e[a-1]===dZ){if(o=e.lastIndexOf(hZ),o>=0){try{r=pPe(e.substring(o+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),a=e.length}else throw"Unmatched right brace: "+e;o=0}if(!a)throw e;if(e[0]===oPe&&(i=++o),l=Wm(e,o,aPe),l<a&&(n.push(e.substring(s,l).trim()),s=o=++l),o=Wm(e,o,yb),o===a)n.push(e.substring(s,a).trim());else if(n.push(e.substring(s,o).trim()),c=[],s=++o,s===a)throw"Unmatched left bracket: "+e;for(;o<a;){if(o=Wm(e,o,_b),o===a)throw"Unmatched left bracket: "+e;if(c.push(e.substring(s,o).trim()),o<a-1&&e[++o]!==yb)throw"Expected left bracket: "+e;s=++o}if(!(a=n.length)||cPe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):fPe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),c!=null&&(t.filter=c),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function pPe(e){const t=e.split(pZ);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function gPe(e){return $e(e)?e:{type:e||"pad"}}const Cg=e=>+e||0,mPe=e=>({top:e,bottom:e,left:e,right:e});function xPe(e){return $e(e)?e.signal?e:{top:Cg(e.top),bottom:Cg(e.bottom),left:Cg(e.left),right:Cg(e.right)}:mPe(Cg(e))}const pr=e=>$e(e)&&!ge(e)?ut({},e):{value:e};function FP(e,t,n,r){return n!=null?($e(n)&&!ge(n)||ge(n)&&n.length&&$e(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Dr(e,t,n){for(const r in t)FP(e,r,t[r]);for(const r in n)FP(e,r,n[r],"update")}function jp(e,t,n){for(const r in t)n&&Ze(n,r)||(e[r]=ut(e[r]||{},t[r]));return e}function Hd(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const SM="mark",AM="frame",TM="scope",vPe="axis",yPe="axis-domain",_Pe="axis-grid",bPe="axis-label",EPe="axis-tick",wPe="axis-title",SPe="legend",APe="legend-band",TPe="legend-entry",kPe="legend-gradient",vZ="legend-label",CPe="legend-symbol",FPe="legend-title",OPe="title",NPe="title-text",DPe="title-subtitle";function MPe(e,t,n,r,i){const s={},a={};let o,l,c,u;l="lineBreak",t==="text"&&i[l]!=null&&!Hd(l,e)&&AT(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),u=n===AM?i.group:n===SM?ut({},i.mark,i[t]):null;for(l in u)c=Hd(l,e)||(l==="fill"||l==="stroke")&&(Hd("fill",e)||Hd("stroke",e)),c||AT(s,l,u[l]);Ie(r).forEach(f=>{const h=i.style&&i.style[f];for(const d in h)Hd(d,e)||AT(s,d,h[d])}),e=ut({},e);for(l in s)u=s[l],u.signal?(o=o||{})[l]=u:a[l]=u;return e.enter=ut(a,e.enter),o&&(e.update=ut(o,e.update)),e}function AT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const yZ=e=>Le(e)?Ce(e):e.signal?`(${e.signal})`:_Z(e);function Mw(e){if(e.gradient!=null)return $Pe(e);let t=e.signal?`(${e.signal})`:e.color?RPe(e.color):e.field!=null?_Z(e.field):e.value!==void 0?Ce(e.value):void 0;return e.scale!=null&&(t=IPe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${g_(e.exponent)})`),e.mult!=null&&(t+=`*${g_(e.mult)}`),e.offset!=null&&(t+=`+${g_(e.offset)}`),e.round&&(t=`round(${t})`),t}const by=(e,t,n,r)=>`(${e}(${[t,n,r].map(Mw).join(",")})+'')`;function RPe(e){return e.c?by("hcl",e.h,e.c,e.l):e.h||e.s?by("hsl",e.h,e.s,e.l):e.l||e.a?by("lab",e.l,e.a,e.b):e.r||e.g||e.b?by("rgb",e.r,e.g,e.b):null}function $Pe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Ce(n));for(;t.length&&Ft(t)==null;)t.pop();return t.unshift(yZ(e.gradient)),`gradient(${t.join(",")})`}function g_(e){return $e(e)?"("+Mw(e)+")":e}function _Z(e){return bZ($e(e)?e:{datum:e})}function bZ(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):he("Invalid field reference: "+Ce(e));return e.signal||(r=Le(r)?Jo(r).map(Ce).join("]["):bZ(r)),t+"["+r+"]"}function IPe(e,t){const n=yZ(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+g_(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function LPe(e){let t="";return e.forEach(n=>{const r=Mw(n);t+=n.test?`(${n.test})?${r}:`:r}),Ft(t)===":"&&(t+="null"),t}function EZ(e,t,n,r,i,s){const a={};s=s||{},s.encoders={$encode:a},e=MPe(e,t,n,r,i.config);for(const o in e)a[o]=PPe(e[o],t,s,i);return s}function PPe(e,t,n,r){const i={},s={};for(const a in e)e[a]!=null&&(i[a]=UPe(BPe(e[a]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function BPe(e){return ge(e)?LPe(e):Mw(e)}function UPe(e,t,n,r){const i=Vo(e,t);return i.$fields.forEach(s=>r[s]=1),ut(n,i.$params),i.$expr}const zPe="outer",HPe=["value","update","init","react","bind"];function OP(e,t){he(e+' for "outer" push: '+Ce(t))}function wZ(e,t){const n=e.name;if(e.push===zPe)t.signals[n]||OP("No prior signal definition",n),HPe.forEach(r=>{e[r]!==void 0&&OP("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function bF(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Rw(e,t,n,r){return new bF(e,t,n,r)}function bb(e,t){return Rw("operator",e,t)}function Ye(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function B1(e,t){return t?{$field:e,$name:t}:{$field:e}}const EF=B1("key");function NP(e,t){return{$compare:e,$order:t}}function VPe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const WPe="ascending",jPe="descending";function GPe(e){return $e(e)?(e.order===jPe?"-":"+")+$w(e.op,e.field):""}function $w(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const kM="scope",wF="view";function tr(e){return e&&e.signal}function qPe(e){return e&&e.expr}function m_(e){if(tr(e))return!0;if($e(e)){for(const t in e)if(m_(e[t]))return!0}return!1}function ka(e,t){return e??t}function ah(e){return e&&e.signal||e}const DP="timer";function U1(e,t){return(e.merge?YPe:e.stream?KPe:e.type?JPe:he("Invalid stream specification: "+Ce(e)))(e,t)}function XPe(e){return e===kM?wF:e||wF}function YPe(e,t){const n=e.merge.map(i=>U1(i,t)),r=CM({merge:n},e,t);return t.addStream(r).id}function KPe(e,t){const n=U1(e.stream,t),r=CM({stream:n},e,t);return t.addStream(r).id}function JPe(e,t){let n;e.type===DP?(n=t.event(DP,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(XPe(e.source),e.type);const r=CM({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function CM(e,t,n){let r=t.between;return r&&(r.length!==2&&he('Stream "between" parameter must have 2 entries: '+Ce(t)),e.between=[U1(r[0],n),U1(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(ZPe(t.marktype,t.markname,t.markrole)),t.source===kM&&r.push("inScope(event.item)"),r.length&&(e.filter=Vo("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function ZPe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const QPe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function e9e(e,t,n){const r=e.encode,i={target:n};let s=e.events,a=e.update,o=[];s||he("Signal update missing events specification."),Le(s)&&(s=Qu(s,t.isSubscope()?kM:wF)),s=Ie(s).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[n9e(o)]),s.length&&o.push(s.length>1?{merge:s}:s[0]),r!=null&&(a&&he("Signal encode and update are mutually exclusive."),a="encode(item(),"+Ce(r)+")"),i.update=Le(a)?Vo(a,t):a.expr!=null?Vo(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:QPe,$params:{$value:t.signalRef(a.signal)}}:he("Invalid signal update specification."),e.force&&(i.options={force:!0}),o.forEach(l=>t.addUpdate(ut(t9e(l,t),i)))}function t9e(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):U1(e,t)}}function n9e(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function r9e(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?he("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Vo(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>e9e(i,t,n.id))}const nn=e=>(t,n,r)=>Rw(e,n,t||void 0,r),SZ=nn("aggregate"),i9e=nn("axisticks"),AZ=nn("bound"),ro=nn("collect"),MP=nn("compare"),s9e=nn("datajoin"),TZ=nn("encode"),a9e=nn("expression"),o9e=nn("facet"),l9e=nn("field"),c9e=nn("key"),u9e=nn("legendentries"),f9e=nn("load"),h9e=nn("mark"),d9e=nn("multiextent"),p9e=nn("multivalues"),g9e=nn("overlap"),m9e=nn("params"),kZ=nn("prefacet"),x9e=nn("projection"),v9e=nn("proxy"),y9e=nn("relay"),CZ=nn("render"),_9e=nn("scale"),ad=nn("sieve"),b9e=nn("sortitems"),FZ=nn("viewlayout"),E9e=nn("values");let w9e=0;const OZ={min:"min",max:"max",count:"sum"};function S9e(e,t){const n=e.type||"linear";mY(n)||he("Unrecognized scale type: "+Ce(n)),t.addScale(e.name,{type:n,domain:void 0})}function A9e(e,t){const n=t.getScale(e.name).params;let r;n.domain=NZ(e.domain,e,t),e.range!=null&&(n.range=MZ(e,t,n)),e.interpolate!=null&&$9e(e.interpolate,n),e.nice!=null&&(n.nice=R9e(e.nice,t)),e.bins!=null&&(n.bins=M9e(e.bins,t));for(r in e)Ze(n,r)||r==="name"||(n[r]=Qs(e[r],t))}function Qs(e,t){return $e(e)?e.signal?t.signalRef(e.signal):he("Unsupported object: "+Ce(e)):e}function x_(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Qs(n,t))}function Iw(e){he("Can not find data set: "+Ce(e))}function NZ(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&he("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ge(e)?T9e:e.fields?C9e:k9e)(e,t,n)}function T9e(e,t,n){return e.map(r=>Qs(r,n))}function k9e(e,t,n){const r=n.getData(e.data);return r||Iw(e.data),tp(t.type)?r.valuesRef(n,e.field,DZ(e.sort,!1)):yY(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function C9e(e,t,n){const r=e.data,i=e.fields.reduce((s,a)=>(a=Le(a)?{data:r,field:a}:ge(a)||a.signal?F9e(a,n):a,s.push(a),s),[]);return(tp(t.type)?O9e:yY(t.type)?N9e:D9e)(e,n,i)}function F9e(e,t){const n="_:vega:_"+w9e++,r=ro({});if(ge(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Ce(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,ad({})]),{data:n,field:"data"}}function O9e(e,t,n){const r=DZ(e.sort,!0);let i,s;const a=n.map(c=>{const u=t.getData(c.data);return u||Iw(c.data),u.countsRef(t,c.field,r)}),o={groupby:EF,pulse:a};r&&(i=r.op||"count",s=r.field?$w(i,r.field):"count",o.ops=[OZ[i]],o.fields=[t.fieldRef(s)],o.as=[s]),i=t.add(SZ(o));const l=t.add(ro({pulse:Ye(i)}));return s=t.add(E9e({field:EF,sort:t.sortRef(r),pulse:Ye(l)})),Ye(s)}function DZ(e,t){return e&&(!e.field&&!e.op?$e(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?he("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!OZ[e.op]&&he("Multiple domain scales can not be sorted using "+e.op)),e}function N9e(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Iw(i.data),s.domainRef(t,i.field)});return Ye(t.add(p9e({values:r})))}function D9e(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Iw(i.data),s.extentRef(t,i.field)});return Ye(t.add(d9e({extents:r})))}function M9e(e,t){return e.signal||ge(e)?x_(e,t):t.objectProperty(e)}function R9e(e,t){return e.signal?t.signalRef(e.signal):$e(e)?{interval:Qs(e.interval),step:Qs(e.step)}:Qs(e)}function $9e(e,t){t.interpolate=Qs(e.type||e),e.gamma!=null&&(t.interpolateGamma=Qs(e.gamma))}function MZ(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Le(i)){if(r&&Ze(r,i))return e=ut({},e,{range:r[i]}),MZ(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=tp(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:he("Unrecognized scale range value: "+Ce(i))}else if(i.scheme){n.scheme=ge(i.scheme)?x_(i.scheme,t):Qs(i.scheme,t),i.extent&&(n.schemeExtent=x_(i.extent,t)),i.count&&(n.schemeCount=Qs(i.count,t));return}else if(i.step){n.rangeStep=Qs(i.step,t);return}else{if(tp(e.type)&&!ge(i))return NZ(i,e,t);ge(i)||he("Unsupported range type: "+Ce(i))}return i.map(s=>(ge(s)?x_:Qs)(s,t))}function I9e(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=SF(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=SF(n[i],i,t));t.addProjection(e.name,r)}function SF(e,t,n){return ge(e)?e.map(r=>SF(r,t,n)):$e(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:he("Unsupported parameter object: "+Ce(e)):e}const io="top",Gp="left",qp="right",Ou="bottom",RZ="center",L9e="vertical",P9e="start",B9e="middle",U9e="end",AF="index",FM="label",z9e="offset",ap="perc",H9e="perc2",ra="value",Xx="guide-label",OM="guide-title",V9e="group-title",W9e="group-subtitle",RP="symbol",v_="gradient",TF="discrete",kF="size",j9e="shape",G9e="fill",q9e="stroke",X9e="strokeWidth",Y9e="strokeDash",K9e="opacity",NM=[kF,j9e,G9e,q9e,X9e,Y9e,K9e],Yx={name:1,style:1,interactive:1},Rt={value:0},ia={value:1},Lw="group",$Z="rect",DM="rule",J9e="symbol",od="text";function z1(e){return e.type=Lw,e.interactive=e.interactive||!1,e}function ss(e,t){const n=(r,i)=>ka(e[r],ka(t[r],i));return n.isVertical=r=>L9e===ka(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ka(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ka(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ka(e.columns,ka(t.columns,+n.isVertical(!0))),n}function IZ(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Z9e(e,t,n){const r=t.config.style[n];return r&&r[e]}function Pw(e,t,n){return`item.anchor === '${P9e}' ? ${e} : item.anchor === '${U9e}' ? ${t} : ${n}`}const MM=Pw(Ce(Gp),Ce(qp),Ce(RZ));function Q9e(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},$e(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function LZ(e,t){return t?e?$e(e)?Object.assign({},e,{offset:LZ(e.offset,t)}):{value:e,offset:t}:t:e}function Ms(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=jp(e.encode,t,Yx)):e.interactive=!1,e}function e7e(e,t,n,r){const i=ss(e,n),s=i.isVertical(),a=i.gradientThickness(),o=i.gradientLength();let l,c,u,f,h;s?(c=[0,1],u=[0,0],f=a,h=o):(c=[0,0],u=[1,0],f=o,h=a);const d={enter:l={opacity:Rt,x:Rt,y:Rt,width:pr(f),height:pr(h)},update:ut({},l,{opacity:ia,fill:{gradient:t,start:c,stop:u}}),exit:{opacity:Rt}};return Dr(d,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Ms({type:$Z,role:kPe,encode:d},r)}function t7e(e,t,n,r,i){const s=ss(e,n),a=s.isVertical(),o=s.gradientThickness(),l=s.gradientLength();let c,u,f,h,d="";a?(c="y",f="y2",u="x",h="width",d="1-"):(c="x",f="x2",u="y",h="height");const p={opacity:Rt,fill:{scale:t,field:ra}};p[c]={signal:d+"datum."+ap,mult:l},p[u]=Rt,p[f]={signal:d+"datum."+H9e,mult:l},p[h]=pr(o);const g={enter:p,update:ut({},p,{opacity:ia}),exit:{opacity:Rt}};return Dr(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Ms({type:$Z,role:APe,key:ra,from:i,encode:g},r)}const n7e=`datum.${ap}<=0?"${Gp}":datum.${ap}>=1?"${qp}":"${RZ}"`,r7e=`datum.${ap}<=0?"${Ou}":datum.${ap}>=1?"${io}":"${B9e}"`;function $P(e,t,n,r){const i=ss(e,t),s=i.isVertical(),a=pr(i.gradientThickness()),o=i.gradientLength();let l=i("labelOverlap"),c,u,f,h,d="";const p={enter:c={opacity:Rt},update:u={opacity:ia,text:{field:FM}},exit:{opacity:Rt}};return Dr(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ka(e.labelLimit,t.gradientLabelLimit)}),s?(c.align={value:"left"},c.baseline=u.baseline={signal:r7e},f="y",h="x",d="1-"):(c.align=u.align={signal:n7e},c.baseline={value:"top"},f="x",h="y"),c[f]=u[f]={signal:d+"datum."+ap,mult:o},c[h]=u[h]=a,a.offset=ka(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+AF}:void 0,Ms({type:od,role:vZ,style:Xx,key:ra,from:r,encode:p,overlap:l},n)}function i7e(e,t,n,r,i){const s=ss(e,t),a=n.entries,o=!!(a&&a.interactive),l=a?a.name:void 0,c=s("clipHeight"),u=s("symbolOffset"),f={data:"value"},h=`(${i}) ? datum.${z9e} : datum.${kF}`,d=c?pr(c):{field:kF},p=`datum.${AF}`,g=`max(1, ${i})`;let m,x,v,y,_;d.mult=.5,m={enter:x={opacity:Rt,x:{signal:h,mult:.5,offset:u},y:d},update:v={opacity:ia,x:x.x,y:x.y},exit:{opacity:Rt}};let b=null,w=null;e.fill||(b=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),Dr(m,{fill:s("symbolFillColor",b),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),NM.forEach(k=>{e[k]&&(v[k]=x[k]={scale:e[k],field:ra})});const E=Ms({type:J9e,role:CPe,key:ra,from:f,clip:c?!0:void 0,encode:m},n.symbols),A=pr(u);A.offset=s("labelOffset"),m={enter:x={opacity:Rt,x:{signal:h,offset:A},y:d},update:v={opacity:ia,text:{field:FM},x:x.x,y:x.y},exit:{opacity:Rt}},Dr(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const S=Ms({type:od,role:vZ,style:Xx,key:ra,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!c},width:Rt,height:c?pr(c):Rt,opacity:Rt},exit:{opacity:Rt},update:v={opacity:ia,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(y=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${y}`,v.column.signal=`floor(${p} / ${y})`,_={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,_={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:AF}},z1({role:TM,from:r,encode:jp(m,a,Yx),marks:[E,S],name:l,interactive:o,sort:_})}function s7e(e,t){const n=ss(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const RM='item.orient === "left"',$M='item.orient === "right"',Bw=`(${RM} || ${$M})`,a7e=`datum.vgrad && ${Bw}`,o7e=Pw('"top"','"bottom"','"middle"'),l7e=Pw('"right"','"left"','"center"'),c7e=`datum.vgrad && ${$M} ? (${l7e}) : (${Bw} && !(datum.vgrad && ${RM})) ? "left" : ${MM}`,u7e=`item._anchor || (${Bw} ? "middle" : "start")`,f7e=`${a7e} ? (${RM} ? -90 : 90) : 0`,h7e=`${Bw} ? (datum.vgrad ? (${$M} ? "bottom" : "top") : ${o7e}) : "top"`;function d7e(e,t,n,r){const i=ss(e,t),s={enter:{opacity:Rt},update:{opacity:ia,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Rt}};return Dr(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:u7e},angle:{signal:f7e},align:{signal:c7e},baseline:{signal:h7e},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Ms({type:od,role:FPe,style:OM,from:r,encode:s},n)}function p7e(e,t){let n;return $e(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+IP(e.path)+")":e.sphere&&(n="geoShape("+IP(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function IP(e){return $e(e)&&e.signal?e.signal:Ce(e)}function PZ(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Lw?TM:t||SM}function g7e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||PZ(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function m7e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function IM(e,t){const n=wX(e.type);n||he("Unrecognized transform type: "+Ce(e.type));const r=Rw(n.type.toLowerCase(),null,BZ(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function BZ(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const a=e.params[s];r[a.name]=x7e(a,t,n)}return r}function x7e(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return v7e(e,t,n);if(i===void 0){e.required&&he("Missing required "+Ce(t.type)+" parameter: "+Ce(e.name));return}else{if(r==="param")return y7e(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!tr(i)?i.map(s=>LP(e,s,n)):LP(e,i,n)}function LP(e,t,n){const r=e.type;if(tr(t))return BP(r)?he("Expression references can not be signals."):TT(r)?n.fieldRef(t):UP(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||TT(r);return i&&_7e(t)?n.exprRef(t.expr,t.as):i&&b7e(t)?B1(t.field,t.as):BP(r)?Vo(t,n):E7e(r)?Ye(n.getData(t).values):TT(r)?B1(t):UP(r)?n.compareRef(t):t}}function v7e(e,t,n){return Le(t.from)||he('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function y7e(e,t,n){const r=t[e.name];return e.array?(ge(r)||he("Expected an array of sub-parameters. Instead: "+Ce(r)),r.map(i=>PP(e,i,n))):PP(e,r,n)}function PP(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const o in i.key)if(i.key[o]!==t[o]){i=null;break}if(i)break}i||he("Unsupported parameter: "+Ce(t));const s=ut(BZ(i,t,n),i.key);return Ye(n.add(m9e(s)))}const _7e=e=>e&&e.expr,b7e=e=>e&&e.field,E7e=e=>e==="data",BP=e=>e==="expr",TT=e=>e==="field",UP=e=>e==="compare";function w7e(e,t,n){let r,i,s,a,o;return e?(r=e.facet)&&(t||he("Only group marks can be faceted."),r.field!=null?a=o=y_(r,n):(e.data?o=Ye(n.getData(e.data).aggregate):(s=IM(ut({type:"aggregate",groupby:Ie(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=y_(r,n),a=o=Ye(n.add(s))),i=n.keyRef(r.groupby,!0))):a=Ye(n.add(ro(null,[{}]))),a||(a=y_(e,n)),{key:i,pulse:a,parent:o}}function y_(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ye(t.getData(e.data).output)}function Mh(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Mh.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],a=null,o=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Ye(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(a=t[o]);return new Mh(e,s,i,r,a)};function UZ(e){return Le(e)?e:null}function zP(e,t,n){const r=$w(n.op,n.field);let i;if(t.ops){for(let s=0,a=t.as.length;s<a;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Fg(e,t,n,r,i,s,a){const o=t[n]||(t[n]={}),l=GPe(s);let c=UZ(i),u,f;if(c!=null&&(e=t.scope,c=c+(l?"|"+l:""),u=o[c]),!u){const h=s?{field:EF,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Ye(t.output)};l&&(h.sort=e.sortRef(s)),f=e.add(Rw(r,void 0,h)),a&&(t.index[i]=f),u=Ye(f),c!=null&&(o[c]=u)}return u}Mh.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=UZ(t);let a,o,l;return s!=null&&(e=r.scope,a=i[s]),a?n&&n.field&&zP(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ye(r.output)},n&&n.field&&zP(e,l,n),o=e.add(SZ(l)),a=e.add(ro({pulse:Ye(o)})),a={agg:o,ref:Ye(a)},s!=null&&(i[s]=a)),a.ref},tuplesRef(){return Ye(this.values)},extentRef(e,t){return Fg(e,this,"extent","extent",t,!1)},domainRef(e,t){return Fg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Fg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Fg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Fg(e,this,"indata","tupleindex",t,!0,!0)}};function S7e(e,t,n){const r=e.from.facet,i=r.name,s=y_(r,t);let a;r.name||he("Facet must have a name: "+Ce(r)),r.data||he("Facet must reference a data set: "+Ce(r)),r.field?a=t.add(kZ({field:t.fieldRef(r.field),pulse:s})):r.groupby?a=t.add(o9e({key:t.keyRef(r.groupby),group:Ye(t.proxy(n.parent)),pulse:s})):he("Facet must specify groupby or field: "+Ce(r));const o=t.fork(),l=o.add(ro()),c=o.add(ad({pulse:Ye(l)}));o.addData(i,new Mh(o,l,l,c)),o.addSignal("parent",null),a.params.subflow={$subflow:o.parse(e).toRuntime()}}function A7e(e,t,n){const r=t.add(kZ({pulse:n.pulse})),i=t.fork();i.add(ad()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function zZ(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,a=e.modify,o=e.values,l=t.add(bb()),c="if("+e.trigger+',modify("'+n+'",'+[i,r,s,a,o].map(f=>f??"null").join(",")+"),0)",u=Vo(c,t);l.update=u.$expr,l.params=u.$params}function Uw(e,t){const n=PZ(e),r=e.type===Lw,i=e.from&&e.from.facet,s=e.overlap;let a=e.layout||n===TM||n===AM,o,l,c,u,f,h,d;const p=n===SM||a||i,g=w7e(e.from,r,t);l=t.add(s9e({key:g.key||(e.key?B1(e.key):void 0),pulse:g.pulse,clean:!r}));const m=Ye(l);l=c=t.add(ro({pulse:m})),l=t.add(h9e({markdef:g7e(e),interactive:m7e(e.interactive,t),clip:p7e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ye(l)}));const x=Ye(l);l=u=t.add(TZ(EZ(e.encode,e.type,n,e.style,t,{mod:!1,pulse:x}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const E=IM(w,t),A=E.metadata;(A.generates||A.changes)&&he("Mark transforms should not generate new data."),A.nomod||(u.params.mod=!0),E.params.pulse=Ye(l),t.add(l=E)}),e.sort&&(l=t.add(b9e({sort:t.compareRef(e.sort),pulse:Ye(l)})));const v=Ye(l);(i||a)&&(a=t.add(FZ({layout:t.objectProperty(e.layout),legends:t.legends,mark:x,pulse:v})),h=Ye(a));const y=t.add(AZ({mark:x,pulse:h||v}));d=Ye(y),r&&(p&&(o=t.operators,o.pop(),a&&o.pop()),t.pushState(v,h||d,m),i?S7e(e,t,g):p?A7e(e,t,g):t.parse(e),t.popState(),p&&(a&&o.push(a),o.push(y))),s&&(d=T7e(s,d,t));const _=t.add(CZ({pulse:d})),b=t.add(ad({pulse:Ye(_)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Mh(t,c,_,b)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&he("Marks only support modify triggers."),zZ(w,t,f)}))}function T7e(e,t,n){const r=e.method,i=e.bound,s=e.separation,a={separation:tr(s)?n.signalRef(s.signal):s,method:tr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const o=i.tolerance;a.boundTolerance=tr(o)?n.signalRef(o.signal):+o,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Ye(n.add(g9e(a)))}function k7e(e,t){const n=t.config.legend,r=e.encode||{},i=ss(e,n),s=r.legend||{},a=s.name||void 0,o=s.interactive,l=s.style,c={};let u=0,f,h,d;NM.forEach(y=>e[y]?(c[y]=e[y],u=u||e[y]):0),u||he("Missing valid scale for legend.");const p=C7e(e,t.scaleType(u)),g={title:e.title!=null,scales:c,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=Ye(t.add(ro(null,[g]))),x={enter:{x:{value:0},y:{value:0}}},v=Ye(t.add(u9e(h={type:p,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===v_?(d=[e7e(e,u,n,r.gradient),$P(e,n,r.labels,v)],h.count=h.count||t.signalRef(`max(2,2*floor((${ah(i.gradientLength())})/100))`)):p===TF?d=[t7e(e,u,n,r.gradient,v),$P(e,n,r.labels,v)]:(f=s7e(e,n),d=[i7e(e,n,r,v,ah(f.columns))],h.size=N7e(e,t,d[0].marks)),d=[z1({role:TPe,from:m,encode:x,marks:d,layout:f,interactive:o})],g.title&&d.push(d7e(e,n,r.title,m)),Uw(z1({role:SPe,from:m,encode:jp(O7e(i,e,n),s,Yx),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:o,style:l}),t)}function C7e(e,t){let n=e.type||RP;return!e.type&&F7e(e)===1&&(e.fill||e.stroke)&&(n=qN(t)?v_:zC(t)?TF:RP),n!==v_?n:zC(t)?TF:v_}function F7e(e){return NM.reduce((t,n)=>t+(e[n]?1:0),0)}function O7e(e,t,n){const r={enter:{},update:{}};return Dr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function N7e(e,t,n){const r=ah(HP("size",e,n)),i=ah(HP("strokeWidth",e,n)),s=ah(D7e(n[1].encode,t,Xx));return Vo(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function HP(e,t,n){return t[e]?`scale("${t[e]}",datum)`:IZ(e,n[0].encode)}function D7e(e,t,n){return IZ("fontSize",e)||Z9e("fontSize",t,n)}const M7e=`item.orient==="${Gp}"?-90:item.orient==="${qp}"?90:0`;function R7e(e,t){e=Le(e)?{text:e}:e;const n=ss(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,a=i.interactive,o=i.style,l=[],c={},u=Ye(t.add(ro(null,[c])));return l.push(L7e(e,n,$7e(e),u)),e.subtitle&&l.push(P7e(e,n,r.subtitle,u)),Uw(z1({role:OPe,from:u,encode:I7e(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:o}),t)}function $7e(e){const t=e.encode;return t&&t.title||ut({name:e.name,interactive:e.interactive,style:e.style},t)}function I7e(e,t){const n={enter:{},update:{}};return Dr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:MM},angle:{signal:M7e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),jp(n,t,Yx)}function L7e(e,t,n,r){const i={value:0},s=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Dr(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ms({type:od,role:NPe,style:V9e,from:r,encode:a},n)}function P7e(e,t,n,r){const i={value:0},s=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Dr(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ms({type:od,role:DPe,style:W9e,from:r,encode:a},n)}function B7e(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(IM(r,t))}),e.on&&e.on.forEach(r=>{zZ(r,t,e.name)}),t.addDataPipeline(e.name,U7e(e,t,n))}function U7e(e,t,n){const r=[];let i=null,s=!1,a=!1,o,l,c,u,f;for(e.values?tr(e.values)||m_(e.format)?(r.push(VP(t,e)),r.push(i=gf())):r.push(i=gf({$ingest:e.values,$format:e.format})):e.url?m_(e.url)||m_(e.format)?(r.push(VP(t,e)),r.push(i=gf())):r.push(i=gf({$request:e.url,$format:e.format})):e.source&&(i=o=Ie(e.source).map(h=>Ye(t.getData(h).output)),r.push(null)),l=0,c=n.length;l<c;++l)u=n[l],f=u.metadata,!i&&!f.source&&r.push(i=gf()),r.push(u),f.generates&&(a=!0),f.modifies&&!a&&(s=!0),f.source?i=u:f.changes&&(i=null);return o&&(c=o.length-1,r[0]=y9e({derive:s,pulse:c?o:o[0]}),(s||c)&&r.splice(1,0,gf())),i||r.push(gf()),r.push(ad({})),r}function gf(e){const t=ro({},e);return t.metadata={source:!0},t}function VP(e,t){return f9e({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const HZ=e=>e===Ou||e===io,zw=(e,t,n)=>tr(e)?W7e(e.signal,t,n):e===Gp||e===io?t:n,gr=(e,t,n)=>tr(e)?H7e(e.signal,t,n):HZ(e)?t:n,Va=(e,t,n)=>tr(e)?V7e(e.signal,t,n):HZ(e)?n:t,VZ=(e,t,n)=>tr(e)?j7e(e.signal,t,n):e===io?{value:t}:{value:n},z7e=(e,t,n)=>tr(e)?G7e(e.signal,t,n):e===qp?{value:t}:{value:n},H7e=(e,t,n)=>WZ(`${e} === '${io}' || ${e} === '${Ou}'`,t,n),V7e=(e,t,n)=>WZ(`${e} !== '${io}' && ${e} !== '${Ou}'`,t,n),W7e=(e,t,n)=>LM(`${e} === '${Gp}' || ${e} === '${io}'`,t,n),j7e=(e,t,n)=>LM(`${e} === '${io}'`,t,n),G7e=(e,t,n)=>LM(`${e} === '${qp}'`,t,n),WZ=(e,t,n)=>(t=t!=null?pr(t):t,n=n!=null?pr(n):n,WP(t)&&WP(n)?(t=t?t.signal||Ce(t.value):null,n=n?n.signal||Ce(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[ut({test:e},t)].concat(n||[])),WP=e=>e==null||Object.keys(e).length===1,LM=(e,t,n)=>({signal:`${e} ? (${Zd(t)}) : (${Zd(n)})`}),q7e=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Gp}' ? (${Zd(r)}) : `:"")+(n!=null?`${e} === '${Ou}' ? (${Zd(n)}) : `:"")+(i!=null?`${e} === '${qp}' ? (${Zd(i)}) : `:"")+(t!=null?`${e} === '${io}' ? (${Zd(t)}) : `:"")+"(null)"}),Zd=e=>tr(e)?e.signal:e==null?null:Ce(e),X7e=(e,t)=>t===0?0:tr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},g0=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Od(e,t,n,r){let i;if(t&&Ze(t,e))return t[e];if(Ze(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[OM][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Xx][i]}return null}function jP(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Y7e(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,o,l,c;if(tr(a)){const f=jP([n.axisX,n.axisY]),h=jP([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(c of f)o[c]=gr(a,Od(c,n.axisX,i,r),Od(c,n.axisY,i,r));l={};for(c of h)l[c]=q7e(a.signal,Od(c,n.axisTop,i,r),Od(c,n.axisBottom,i,r),Od(c,n.axisLeft,i,r),Od(c,n.axisRight,i,r))}else o=a===io||a===Ou?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return o||l||s?ut({},i,o,l,s):i}function K7e(e,t,n,r){const i=ss(e,t),s=e.orient;let a,o;const l={enter:a={opacity:Rt},update:o={opacity:ia},exit:{opacity:Rt}};Dr(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const c=GP(e,0),u=GP(e,1);return a.x=o.x=gr(s,c,Rt),a.x2=o.x2=gr(s,u),a.y=o.y=Va(s,c,Rt),a.y2=o.y2=Va(s,u),Ms({type:DM,role:yPe,from:r,encode:l},n)}function GP(e,t){return{scale:e.scale,range:t}}function J7e(e,t,n,r,i){const s=ss(e,t),a=e.orient,o=e.gridScale,l=zw(a,1,-1),c=Z7e(e.offset,l);let u,f,h;const d={enter:u={opacity:Rt},update:h={opacity:ia},exit:f={opacity:Rt}};Dr(d,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:ra,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=gr(a,{signal:"height"},{signal:"width"}),m=o?{scale:o,range:0,mult:l,offset:c}:{value:0,offset:c},x=o?{scale:o,range:1,mult:l,offset:c}:ut(g,{mult:l,offset:c});return u.x=h.x=gr(a,p,m),u.y=h.y=Va(a,p,m),u.x2=h.x2=Va(a,x),u.y2=h.y2=gr(a,x),f.x=gr(a,p),f.y=Va(a,p),Ms({type:DM,role:_Pe,key:ra,from:r,encode:d},n)}function Z7e(e,t){if(t!==1)if(!$e(e))e=tr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=ut({},e);for(;n.mult!=null;)if($e(n.mult))n=n.mult=ut({},n.mult);else return n.mult=tr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Q7e(e,t,n,r,i,s){const a=ss(e,t),o=e.orient,l=zw(o,-1,1);let c,u,f;const h={enter:c={opacity:Rt},update:f={opacity:ia},exit:u={opacity:Rt}};Dr(h,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const d=pr(i);d.mult=l;const p={scale:e.scale,field:ra,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return f.y=c.y=gr(o,Rt,p),f.y2=c.y2=gr(o,d),u.x=gr(o,p),f.x=c.x=Va(o,Rt,p),f.x2=c.x2=Va(o,d),u.y=Va(o,p),Ms({type:DM,role:EPe,key:ra,from:r,encode:h},n)}function kT(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function eBe(e,t,n,r,i,s){const a=ss(e,t),o=e.orient,l=e.scale,c=zw(o,-1,1),u=ah(a("labelFlush")),f=ah(a("labelFlushOffset")),h=a("labelAlign"),d=a("labelBaseline");let p=u===0||!!u,g;const m=pr(i);m.mult=c,m.offset=pr(a("labelPadding")||0),m.offset.mult=c;const x={scale:l,field:ra,band:.5,offset:LZ(s.offset,a("labelOffset"))},v=gr(o,p?kT(l,u,'"left"','"right"','"center"'):{value:"center"},z7e(o,"left","right")),y=gr(o,VZ(o,"bottom","top"),p?kT(l,u,'"top"','"bottom"','"middle"'):{value:"middle"}),_=kT(l,u,`-(${f})`,f,0);p=p&&f;const b={opacity:Rt,x:gr(o,x,m),y:Va(o,x,m)},w={enter:b,update:g={opacity:ia,text:{field:FM},x:b.x,y:b.y,align:v,baseline:y},exit:{opacity:Rt,x:b.x,y:b.y}};Dr(w,{dx:!h&&p?gr(o,_):null,dy:!d&&p?Va(o,_):null}),Dr(w,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:h,baseline:d});const E=a("labelBound");let A=a("labelOverlap");return A=A||E?{separation:a("labelSeparation"),method:A,order:"datum.index",bound:E?{scale:l,orient:o,tolerance:E}:null}:void 0,g.align!==v&&(g.align=g0(g.align,v)),g.baseline!==y&&(g.baseline=g0(g.baseline,y)),Ms({type:od,role:bPe,style:Xx,key:ra,from:r,encode:w,overlap:A},n)}function tBe(e,t,n,r){const i=ss(e,t),s=e.orient,a=zw(s,-1,1);let o,l;const c={enter:o={opacity:Rt,anchor:pr(i("titleAnchor",null)),align:{signal:MM}},update:l=ut({},o,{opacity:ia,text:pr(e.title)}),exit:{opacity:Rt}},u={signal:`lerp(range("${e.scale}"), ${Pw(0,1,.5)})`};return l.x=gr(s,u),l.y=Va(s,u),o.angle=gr(s,Rt,X7e(a,90)),o.baseline=gr(s,VZ(s,Ou,io),{value:Ou}),l.angle=o.angle,l.baseline=o.baseline,Dr(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),nBe(i,s,c,n),c.update.align=g0(c.update.align,o.align),c.update.angle=g0(c.update.angle,o.angle),c.update.baseline=g0(c.update.baseline,o.baseline),Ms({type:od,role:wPe,style:OM,from:r,encode:c},n)}function nBe(e,t,n,r){const i=(o,l)=>o!=null?(n.update[l]=g0(pr(o),n.update[l]),!1):!Hd(l,r),s=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===s?pr(a):gr(t,pr(a),pr(s))}function rBe(e,t){const n=Y7e(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,a=i.interactive,o=i.style,l=ss(e,n),c=Q9e(l),u={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=Ye(t.add(ro({},[u]))),h=Ye(t.add(i9e({scale:t.scaleRef(e.scale),extra:t.property(c.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),d=[];let p;return u.grid&&d.push(J7e(e,n,r.grid,h,c)),u.ticks&&(p=l("tickSize"),d.push(Q7e(e,n,r.ticks,h,p,c))),u.labels&&(p=u.ticks?p:0,d.push(eBe(e,n,r.labels,h,p,c))),u.domain&&d.push(K7e(e,n,r.domain,f)),u.title&&d.push(tBe(e,n,r.title,f)),Uw(z1({role:vPe,from:f,encode:jp(iBe(l,e),i,Yx),marks:d,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:a,style:o}),t)}function iBe(e,t){const n={enter:{},update:{}};return Dr(n,{orient:e("orient"),offset:e("offset")||0,position:ka(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function jZ(e,t,n){const r=Ie(e.signals),i=Ie(e.scales);return n||r.forEach(s=>wZ(s,t)),Ie(e.projections).forEach(s=>I9e(s,t)),i.forEach(s=>S9e(s,t)),Ie(e.data).forEach(s=>B7e(s,t)),i.forEach(s=>A9e(s,t)),(n||r).forEach(s=>r9e(s,t)),Ie(e.axes).forEach(s=>rBe(s,t)),Ie(e.marks).forEach(s=>Uw(s,t)),Ie(e.legends).forEach(s=>k7e(s,t)),e.title&&R7e(e.title,t),t.parseLambdas(),t}const sBe=e=>jp({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function aBe(e,t){const n=t.config,r=Ye(t.root=t.add(bb())),i=oBe(e,n);i.forEach(c=>wZ(c,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(ro()),a=t.add(TZ(EZ(sBe(e.encode),Lw,AM,e.style,t,{pulse:Ye(s)}))),o=t.add(FZ({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ye(a)}));t.operators.pop(),t.pushState(Ye(a),Ye(o),null),jZ(e,t,i),t.operators.push(o);let l=t.add(AZ({mark:r,pulse:Ye(o)}));return l=t.add(CZ({pulse:Ye(l)})),l=t.add(ad({pulse:Ye(l)})),t.addData("root",new Mh(t,s,s,l)),t}function Og(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function oBe(e,t){const n=a=>ka(e[a],t[a]),r=[Og("background",n("background")),Og("autosize",gPe(n("autosize"))),Og("padding",xPe(n("padding"))),Og("width",n("width")||0),Og("height",n("height")||0)],i=r.reduce((a,o)=>(a[o.name]=o,a),{}),s={};return Ie(e.signals).forEach(a=>{Ze(i,a.name)?a=ut(i[a.name],a):r.push(a),s[a.name]=a}),Ie(t.signals).forEach(a=>{!Ze(s,a.name)&&!Ze(i,a.name)&&r.push(a)}),r}function GZ(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function qP(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}GZ.prototype=qP.prototype={parse(e){return jZ(e,this)},fork(){return new qP(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof bF?Ye(e):e;return this.add(v9e({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let a,o;r&&(a=r.data||(r.data={}),o=a[i]||(a[i]=[]),o.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ye(this.add(ad({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ye(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ft(this._parent)},encode(){return Ft(this._encode)},lookup(){return Ft(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Le(e))return B1(e,t);e.signal||he("Unsupported field reference: "+Ce(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ye(this.add(l9e(i)))}return r},compareRef(e){let t=!1;const n=s=>tr(s)?(t=!0,this.signalRef(s.signal)):qPe(s)?(t=!0,this.exprRef(s.expr)):s,r=Ie(e.field).map(n),i=Ie(e.order).map(n);return t?Ye(this.add(MP({fields:r,orders:i}))):NP(r,i)},keyRef(e,t){let n=!1;const r=s=>tr(s)?(n=!0,Ye(i[s.signal])):s,i=this.signals;return e=Ie(e).map(r),n?Ye(this.add(c9e({fields:e,flat:t}))):VPe(e,t)},sortRef(e){if(!e)return e;const t=$w(e.op,e.field),n=e.order||WPe;return n.signal?Ye(this.add(MP({fields:t,orders:this.signalRef(n.signal)}))):NP(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ze(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&he("Duplicate signal name: "+Ce(e));const n=t instanceof bF?t:this.add(bb(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||he("Unrecognized signal name: "+Ce(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ye(this.signals[e]):(Ze(this.lambdas,e)||(this.lambdas[e]=this.add(bb(null))),Ye(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Vo(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!$e(e)?e:this.signalRef(e.signal||PM(e))},exprRef(e,t){const n={expr:Vo(e,this)};return t&&(n.expr.$name=t),Ye(this.add(a9e(n)))},addBinding(e,t){this.bindings||he("Nested signals do not support binding: "+Ce(e)),this.bindings.push(ut({signal:e},t))},addScaleProj(e,t){Ze(this.scales,e)&&he("Duplicate scale or projection name: "+Ce(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,_9e(t))},addProjection(e,t){this.addScaleProj(e,x9e(t))},getScale(e){return this.scales[e]||he("Unrecognized scale name: "+Ce(e)),this.scales[e]},scaleRef(e){return Ye(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ze(this.data,e)&&he("Duplicate data set name: "+Ce(e)),this.data[e]=t},getData(e){return this.data[e]||he("Undefined data set name: "+Ce(e)),this.data[e]},addDataPipeline(e,t){return Ze(this.data,e)&&he("Duplicate data set name: "+Ce(e)),this.addData(e,Mh.fromEntries(this,t))}};function PM(e){return(ge(e)?lBe:cBe)(e)}function lBe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+($e(i)?i.signal||PM(i):Ce(i))}return n+"]"}function cBe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Ce(r)+":"+($e(i)?i.signal||PM(i):Ce(i));return t+"}"}function uBe(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function fBe(e,t,n){return $e(e)||he("Input Vega specification must be an object."),t=Lp(uBe(),t,e.config),aBe(e,new GZ(t,n)).toRuntime()}var hBe="5.30.0";ut(Z0,fNe,QRe,N$e,lIe,gIe,HIe,bIe,WIe,XIe,i6e,f6e);const dBe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Vn,CanvasHandler:Vx,CanvasRenderer:cb,DATE:Qi,DAY:Xr,DAYOFYEAR:Ho,Dataflow:p0,Debug:xq,Error:DO,EventStream:rw,Gradient:RY,GroupItem:mw,HOURS:Os,Handler:vD,HybridHandler:AK,HybridRenderer:ZC,Info:mq,Item:gw,MILLISECONDS:qa,MINUTES:Ns,MONTH:ri,Marks:Ds,MultiPulse:ZO,None:gq,Operator:rn,Parameters:nw,Pulse:au,QUARTER:Zi,RenderType:qc,Renderer:Hx,ResourceLoader:zY,SECONDS:ua,SVGHandler:hK,SVGRenderer:SD,SVGStringRenderer:SK,Scenegraph:iK,TIME_UNITS:WO,Transform:le,View:uZ,WEEK:Qn,Warn:MO,YEAR:Fr,accessor:is,accessorFields:ni,accessorName:kn,array:Ie,ascending:KE,bandwidthNRD:nN,bin:TX,bootstrapCI:kX,boundClip:$K,boundContext:Px,boundItem:qC,boundMark:eK,boundStroke:cc,changeset:rd,clampRange:Cq,codegenExpression:LJ,compare:PO,constant:li,cumulativeLogNormal:lN,cumulativeNormal:sw,cumulativeUniform:hN,dayofyear:Uq,debounce:BO,defaultLocale:qO,definition:wX,densityLogNormal:oN,densityNormal:rN,densityUniform:fN,domChild:Kn,domClear:js,domCreate:jc,domFind:xD,dotbin:CX,error:he,expressionFunction:In,extend:ut,extent:zo,extentIndex:Fq,falsy:kc,fastmap:Bp,field:la,flush:Oq,font:bw,fontFamily:zx,fontSize:Zo,format:e_,formatLocale:K2,formats:KO,hasOwnProperty:Ze,id:Tx,identity:oi,inferType:hX,inferTypes:dX,ingest:jt,inherits:Fe,inrange:Yd,interpolate:XN,interpolateColors:dw,interpolateRange:_Y,intersect:NK,intersectBoxLine:Kd,intersectPath:nD,intersectPoint:rD,intersectRule:VY,isArray:ge,isBoolean:Ju,isDate:su,isFunction:ht,isIterable:Nq,isNumber:$t,isObject:$e,isRegExp:Dq,isString:Le,isTuple:ew,key:UO,lerp:Mq,lineHeight:ku,loader:ZE,locale:uX,logger:RO,lruCache:Rq,markup:wD,merge:$q,mergeConfig:Lp,multiLineOffset:pD,one:Ip,pad:Iq,panLinear:Eq,panLog:wq,panPow:Sq,panSymlog:Aq,parse:fBe,parseExpression:fM,parseSelector:Qu,path:EE,pathCurves:QN,pathEqual:IK,pathParse:np,pathRectangle:LY,pathRender:N1,pathSymbols:IY,pathTrail:PY,peek:Ft,point:ww,projection:ID,quantileLogNormal:cN,quantileNormal:aw,quantileUniform:dN,quantiles:eN,quantizeInterpolator:bY,quarter:Tq,quartiles:tN,get random(){return fa},randomInteger:gOe,randomKDE:sN,randomLCG:pOe,randomLogNormal:OX,randomMixture:NX,randomNormal:iN,randomUniform:DX,read:mX,regressionConstant:pN,regressionExp:RX,regressionLinear:gN,regressionLoess:LX,regressionLog:MX,regressionPoly:IX,regressionPow:$X,regressionQuad:mN,renderModule:Sw,repeat:Zg,resetDefaultLocale:f4e,resetSVGClipId:UY,resetSVGDefIds:xRe,responseType:gX,runtimeContext:JJ,sampleCurve:lw,sampleLogNormal:aN,sampleNormal:iw,sampleUniform:uN,scale:Ht,sceneEqual:AD,sceneFromJSON:nK,scenePickVisit:tb,sceneToJSON:tK,sceneVisit:Xa,sceneZOrder:iD,scheme:YN,serializeXML:_K,setHybridRendererOptions:dRe,setRandom:hOe,span:kx,splitAccessPath:Jo,stringValue:Ce,textMetrics:bs,timeBin:rX,timeFloor:qq,timeFormatLocale:C1,timeInterval:Up,timeOffset:Kq,timeSequence:Qq,timeUnitSpecifier:Bq,timeUnits:jO,toBoolean:zO,toDate:HO,toNumber:Jr,toSet:Ga,toString:VO,transform:SX,transforms:Z0,truncate:Lq,truthy:ca,tupleid:Ke,typeParsers:PC,utcFloor:Xq,utcInterval:zp,utcOffset:Jq,utcSequence:eX,utcdayofyear:Vq,utcquarter:kq,utcweek:Wq,version:hBe,visitArray:$c,week:zq,writeConfig:Pp,zero:zc,zoomLinear:$O,zoomLog:IO,zoomPow:Y2,zoomSymlog:LO},Symbol.toStringTag,{value:"Module"}));function pBe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var gBe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},mBe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},xBe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const vBe=Array.prototype.slice,mf=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,vBe.call(t,1))},yBe=(e,t,n,r,i,s,a)=>new Date(e,t||0,n??1,r||0,i||0,s||0,a||0);var _Be={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:yBe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return mf("join",arguments)},indexof:function(){return mf("indexOf",arguments)},lastindexof:function(){return mf("lastIndexOf",arguments)},slice:function(){return mf("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return mf("substring",arguments,String)},split:function(){return mf("split",arguments,String)},replace:function(){return mf("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const bBe=["view","item","group","xy","x","y"],CF=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&CF.add(setImmediate);const EBe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:gBe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),CF.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||_Be[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>mBe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>xBe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,CF.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Ng(e,t,n,r,i,s){const a=o=>EBe[o.type](a,o);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=s,bBe.forEach(o=>a.fn[o]=function(){return i.vega[o](...arguments)}),a(e)}var wBe={operator(e,t){const n=t.ast,r=e.functions;return i=>Ng(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>Ng(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Ng(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const a=s.item&&s.item.datum;return Ng(n,r,i,a,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(a,o)=>{const l=a.datum;let c=0,u;for(const f in r)u=Ng(r[f].ast,i,o,l,void 0,a),a[f]!==u&&(a[f]=u,c=1);return n!=="rule"&&pBe(a,r,s),c}}};const SBe="vega-lite",ABe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',TBe="5.20.1",kBe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],CBe="https://vega.github.io/vega-lite/",FBe="Vega-Lite is a concise high-level language for interactive visualization.",OBe=["vega","chart","visualization"],NBe="build/vega-lite.js",DBe="build/vega-lite.min.js",MBe="build/vega-lite.min.js",RBe="build/src/index",$Be="build/src/index.d.ts",IBe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},LBe=["bin","build","src","vega-lite*","tsconfig.json"],PBe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},BBe={type:"git",url:"https://github.com/vega/vega-lite.git"},UBe="BSD-3-Clause",zBe={url:"https://github.com/vega/vega-lite/issues"},HBe={"@babel/core":"^7.24.7","@babel/preset-env":"^7.24.7","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.13.0","@typescript-eslint/parser":"^7.13.0",ajv:"^8.16.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.2",puppeteer:"^15.0.0","release-it":"17.2.1",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.1","ts-jest":"^29.1.4","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},VBe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},WBe={vega:"^5.24.0"},jBe={node:">=18"},GBe="yarn@1.22.19",qBe={name:SBe,author:ABe,version:TBe,collaborators:kBe,homepage:CBe,description:FBe,keywords:OBe,main:NBe,unpkg:DBe,jsdelivr:MBe,module:RBe,types:$Be,bin:IBe,files:LBe,scripts:PBe,repository:BBe,license:UBe,bugs:zBe,devDependencies:HBe,dependencies:VBe,peerDependencies:WBe,engines:jBe,packageManager:GBe};function BM(e){return!!e.or}function UM(e){return!!e.and}function zM(e){return!!e.not}function __(e,t){if(zM(e))__(e.not,t);else if(UM(e))for(const n of e.and)__(n,t);else if(BM(e))for(const n of e.or)__(n,t);else t(e)}function m0(e,t){return zM(e)?{not:m0(e.not,t)}:UM(e)?{and:e.and.map(n=>m0(n,t))}:BM(e)?{or:e.or.map(n=>m0(n,t))}:t(e)}const at=structuredClone;function qZ(e){throw new Error(e)}function op(e,t){const n={};for(const r of t)Ze(e,r)&&(n[r]=e[r]);return n}function qi(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>tn(e)).join(",")})`};function St(e){if($t(e))return e;const t=Le(e)?e:tn(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function FF(e){return e===!1||e===null}function bt(e,t){return e.includes(t)}function lp(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function HM(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function XZ(e,...t){for(const n of t)XBe(e,n??{});return e}function XBe(e,t){for(const n of Ee(t))Pp(e,n,t[n],!0)}function To(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function YBe(e,t){const n=Ee(e),r=Ee(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function YZ(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function VM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function OF(e){const t=new Set;for(const n of e){const i=Jo(n).map((a,o)=>o===0?a:`[${a}]`),s=i.map((a,o)=>i.slice(0,o+1).join(""));for(const a of s)t.add(a)}return t}function WM(e,t){return e===void 0||t===void 0?!0:VM(OF(e),OF(t))}function en(e){return Ee(e).length===0}const Ee=Object.keys,Or=Object.values,Nu=Object.entries;function H1(e){return e===!0||e===!1}function pn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function jm(e,t){return zM(e)?`!(${jm(e.not,t)})`:UM(e)?`(${e.and.map(n=>jm(n,t)).join(") && (")})`:BM(e)?`(${e.or.map(n=>jm(n,t)).join(") || (")})`:t(e)}function Eb(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Eb(e[n],t)&&delete e[n],en(e)}function Kx(e){return e.charAt(0).toUpperCase()+e.substr(1)}function jM(e,t="datum"){const n=Jo(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Ce).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function KZ(e,t="datum"){return`${t}[${Ce(Jo(e).join("."))}]`}function KBe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ha(e){return`${Jo(e).map(KBe).join("\\.")}`}function Rh(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Xp(e){return`${Jo(e).join(".")}`}function cp(e){return e?Jo(e).length:0}function Rn(...e){for(const t of e)if(t!==void 0)return t}let JZ=42;function ZZ(e){const t=++JZ;return e?String(e)+t:t}function JBe(){JZ=42}function QZ(e){return eQ(e)?e:`__${e}`}function eQ(e){return e.startsWith("__")}function V1(e){if(e!==void 0)return(e%360+360)%360}function Hw(e){return $t(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const XP=Object.getPrototypeOf(structuredClone({}));function vs(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!vs(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!vs(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==XP.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==XP.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!vs(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function tn(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const a=t.push(r)-1,o=Object.keys(r).sort();for(s="",i=0;i<o.length;i++){const l=o[i],c=n(r[l]);c&&(s&&(s+=","),s+=JSON.stringify(l)+":"+c)}return t.splice(a,1),`{${s}}`}(e)}const Gl="row",ql="column",Vw="facet",mn="x",_r="y",so="x2",tl="y2",ef="xOffset",Yp="yOffset",ao="radius",fc="radius2",va="theta",hc="theta2",oo="latitude",lo="longitude",co="latitude2",da="longitude2",es="color",nl="fill",rl="stroke",ts="shape",dc="size",ld="angle",pc="opacity",tf="fillOpacity",nf="strokeOpacity",rf="strokeWidth",sf="strokeDash",Jx="text",up="order",Zx="detail",Ww="key",$h="tooltip",jw="href",Gw="url",qw="description",ZBe={x:1,y:1,x2:1,y2:1},tQ={theta:1,theta2:1,radius:1,radius2:1};function nQ(e){return e in tQ}const GM={longitude:1,longitude2:1,latitude:1,latitude2:1};function rQ(e){switch(e){case oo:return"y";case co:return"y2";case lo:return"x";case da:return"x2"}}function iQ(e){return e in GM}const QBe=Ee(GM),qM={...ZBe,...tQ,...GM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function x0(e){return e===es||e===nl||e===rl}const sQ={row:1,column:1,facet:1},ea=Ee(sQ),XM={...qM,...sQ},eUe=Ee(XM),{order:DQe,detail:MQe,tooltip:RQe,...tUe}=XM,{row:$Qe,column:IQe,facet:LQe,...nUe}=tUe;function rUe(e){return!!nUe[e]}function aQ(e){return!!XM[e]}const iUe=[so,tl,co,da,hc,fc];function oQ(e){return cd(e)!==e}function cd(e){switch(e){case so:return mn;case tl:return _r;case co:return oo;case da:return lo;case hc:return va;case fc:return ao}return e}function Du(e){if(nQ(e))switch(e){case va:return"startAngle";case hc:return"endAngle";case ao:return"outerRadius";case fc:return"innerRadius"}return e}function il(e){switch(e){case mn:return so;case _r:return tl;case oo:return co;case lo:return da;case va:return hc;case ao:return fc}}function ns(e){switch(e){case mn:case so:return"width";case _r:case tl:return"height"}}function lQ(e){switch(e){case mn:return"xOffset";case _r:return"yOffset";case so:return"x2Offset";case tl:return"y2Offset";case va:return"thetaOffset";case ao:return"radiusOffset";case hc:return"theta2Offset";case fc:return"radius2Offset"}}function Xw(e){switch(e){case mn:return"xOffset";case _r:return"yOffset"}}function sUe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const aUe=Ee(qM),{x:PQe,y:BQe,x2:UQe,y2:zQe,xOffset:HQe,yOffset:VQe,latitude:WQe,longitude:jQe,latitude2:GQe,longitude2:qQe,theta:XQe,theta2:YQe,radius:KQe,radius2:JQe,...YM}=qM,oUe=Ee(YM),KM={x:1,y:1},gc=Ee(KM);function $n(e){return e in KM}const JM={theta:1,radius:1},lUe=Ee(JM);function Yw(e){return e==="width"?mn:_r}const cQ={xOffset:1,yOffset:1};function Qx(e){return e in cQ}const{text:ZQe,tooltip:QQe,href:eet,url:tet,description:net,detail:ret,key:iet,order:set,...uQ}=YM,cUe=Ee(uQ);function uUe(e){return!!YM[e]}function fUe(e){switch(e){case es:case nl:case rl:case dc:case ts:case pc:case rf:case sf:return!0;case tf:case nf:case ld:return!1}}const fQ={...KM,...JM,...cQ,...uQ},ZM=Ee(fQ);function sl(e){return!!fQ[e]}function hUe(e,t){return pUe(e)[t]}const hQ={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:aet,...dUe}=hQ;function pUe(e){switch(e){case es:case nl:case rl:case qw:case Zx:case Ww:case $h:case jw:case up:case pc:case tf:case nf:case rf:case Vw:case Gl:case ql:return hQ;case mn:case _r:case ef:case Yp:case oo:case lo:return dUe;case so:case tl:case co:case da:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case dc:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case sf:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ts:return{point:"always",geoshape:"always"};case Jx:return{text:"always"};case ld:return{point:"always",square:"always",text:"always"};case Gw:return{image:"always"};case va:return{text:"always",arc:"always"};case ao:return{text:"always",arc:"always"};case hc:case fc:return{arc:"always"}}}function CT(e){switch(e){case mn:case _r:case va:case ao:case ef:case Yp:case dc:case ld:case rf:case pc:case tf:case nf:case so:case tl:case hc:case fc:return;case Vw:case Gl:case ql:case ts:case sf:case Jx:case $h:case jw:case Gw:case qw:return"discrete";case es:case nl:case rl:return"flexible";case oo:case lo:case co:case da:case Zx:case Ww:case up:return}}const gUe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},mUe={count:1,min:1,max:1};function ic(e){return!!e&&!!e.argmin}function af(e){return!!e&&!!e.argmax}function QM(e){return Le(e)&&!!gUe[e]}const xUe=new Set(["count","valid","missing","distinct"]);function Kw(e){return Le(e)&&xUe.has(e)}function vUe(e){return Le(e)&&bt(["min","max"],e)}const yUe=new Set(["count","sum","distinct","valid","missing"]),_Ue=new Set(["mean","average","median","q1","q3","min","max"]);function dQ(e){return Ju(e)&&(e=lS(e,void 0)),"bin"+Ee(e).map(t=>Jw(e[t])?pn(`_${t}_${Nu(e[t])}`):pn(`_${t}_${e[t]}`)).join("")}function on(e){return e===!0||ud(e)&&!e.binned}function Er(e){return e==="binned"||ud(e)&&e.binned===!0}function ud(e){return $e(e)}function Jw(e){return e==null?void 0:e.param}function YP(e){switch(e){case Gl:case ql:case dc:case es:case nl:case rl:case rf:case pc:case tf:case nf:case ts:return 6;case sf:return 4;default:return 10}}function ev(e){return!!(e!=null&&e.expr)}function jr(e,{level:t}={level:0}){const n=Ee(e||{}),r={};for(const i of n)r[i]=t===0?gs(e[i]):jr(e[i],{level:t-1});return r}function pQ(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:a,color:o,subtitleColor:l,subtitleFont:c,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:h,subtitleLineHeight:d,subtitlePadding:p,...g}=e,m={...g,...o?{fill:o}:{}},x={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...a!==void 0?{limit:a}:{}},v={...l?{subtitleColor:l}:{},...c?{subtitleFont:c}:{},...u?{subtitleFontSize:u}:{},...f?{subtitleFontStyle:f}:{},...h?{subtitleFontWeight:h}:{},...d?{subtitleLineHeight:d}:{},...p?{subtitlePadding:p}:{}},y=op(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:y,nonMarkTitleProperties:x,subtitle:v}}function Pc(e){return Le(e)||ge(e)&&Le(e[0])}function Ve(e){return!!(e!=null&&e.signal)}function of(e){return!!e.step}function bUe(e){return ge(e)?!1:"fields"in e&&!("data"in e)}function EUe(e){return ge(e)?!1:"fields"in e&&"data"in e}function Dl(e){return ge(e)?!1:"field"in e&&"data"in e}const wUe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},SUe=Ee(wUe),AUe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},NF=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function gQ(e){const t=ge(e.condition)?e.condition.map(KP):KP(e.condition);return{...gs(e),condition:t}}function gs(e){if(ev(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function KP(e){if(ev(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function an(e){if(ev(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ve(e)?e:e!==void 0?{value:e}:void 0}function DF(e){return Ve(e)?e.signal:Ce(e)}function JP(e){return Ve(e)?e.signal:Ce(e.value)}function La(e){return Ve(e)?e.signal:e==null?null:Ce(e)}function TUe(e,t,n){for(const r of n){const i=Wo(r,t.markDef,t.config);i!==void 0&&(e[r]=an(i))}return e}function mQ(e){return[].concat(e.type,e.style??[])}function Kt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Wo(e,t,n,r)}function Wo(e,t,n,{vgChannel:r}={}){return Rn(r?wb(e,t,n.style):void 0,wb(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function wb(e,t,n){return xQ(e,mQ(t),n)}function xQ(e,t,n){t=Ie(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function vQ(e,t){return Ie(e).reduce((n,r)=>(n.field.push(Me(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function yQ(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(vs(i,r))return;n.push(r)}),n}function _Q(e,t){return vs(e,t)||!t?e:e?[...Ie(e),...Ie(t)].join(", "):t}function bQ(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Pc(n)||Ve(n))&&(Pc(r)||Ve(r)))return{explicit:e.explicit,value:_Q(n,r)};if(Pc(n)||Ve(n))return{explicit:e.explicit,value:n};if(Pc(r)||Ve(r))return{explicit:e.explicit,value:r};if(!Pc(n)&&!Ve(n)&&!Pc(r)&&!Ve(r))return{explicit:e.explicit,value:yQ(n,r)};throw new Error("It should never reach here")}function eR(e){return`Invalid specification ${tn(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const kUe='Autosize "fit" only works for single views and layered views.';function ZP(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function QP(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function e9(e){return e?`Dropping "fit-${e}" because spec has discrete ${ns(e)}.`:'Dropping "fit" because spec has discrete size.'}function tR(e){return`Unknown field for ${e}. Cannot calculate view size.`}function t9(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function CUe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function FUe(e){return`The "nearest" transform is not supported for ${e} marks.`}function EQ(e){return`Selection not supported for ${e} yet.`}function OUe(e){return`Cannot find a selection named "${e}".`}const NUe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",DUe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",MUe="Legend bindings are only supported for selections over an individual field or encoding channel.";function RUe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function $Ue(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const IUe="The same selection must be used to override scale domains in a layered view.",LUe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function PUe(e){return`Unknown repeated value "${e}".`}function n9(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const BUe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function UUe(e){return`Unrecognized parse "${e}".`}function r9(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const zUe="Attempt to add the same child twice.";function HUe(e){return`Ignoring an invalid transform: ${tn(e)}.`}const VUe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function i9(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function WUe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${tn(t)} is overridden by a child projection ${tn(n)}.`}const jUe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function GUe(e){return`${e}Offset dropped because ${e} is continuous`}function qUe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${tn(n)}}.`}function wQ(e){return`Invalid field type "${e}".`}function XUe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function YUe(e){return`Invalid aggregation operator "${e}".`}function SQ(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function KUe(e){return`Position range does not support relative band size for ${e}.`}function MF(e,t){return`Dropping ${tn(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const JUe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Zw(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function ZUe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function QUe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function eze(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function tze(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function FT(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function nze(e){return`The ${e} for range marks cannot be an expression`}function rze(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function ize(e,t){return`Specified orient "${e}" overridden with "${t}".`}function sze(e){return`Cannot use the scale property "${e}" with non-color channel.`}function aze(e){return`Cannot use the relative band size with ${e} scale.`}function oze(e){return`Using unaggregated domain with raw field has no effect (${tn(e)}).`}function lze(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function cze(e){return`Unaggregated domain is currently unsupported for log scale (${tn(e)}).`}function uze(e){return`Cannot apply size to non-oriented mark "${e}".`}function fze(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function hze(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function AQ(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function TQ(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function dze(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${tn(n)} and ${tn(r)}). Using ${tn(n)}.`}function pze(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${tn(n)} and ${tn(r)}). Using the union of the two domains.`}function gze(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function mze(e){return`Dropping sort property ${tn(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const s9="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",xze="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",vze="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",yze="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function _ze(e){return`Cannot stack "${e}" if there is already "${e}2".`}function bze(e){return`Stack is applied to a non-linear scale (${e}).`}function Eze(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Sb(e,t){return`Invalid ${e}: ${tn(t)}.`}function wze(e){return`Dropping day from datetime ${tn(e)} as day cannot be combined with other units.`}function Sze(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Aze(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Tze(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function a9(e){return`1D error band does not support ${e}.`}function kQ(e){return`Channel ${e} is required for "binned" bin.`}function kze(e){return`Channel ${e} should not be used with "binned" bin.`}function Cze(e){return`Domain for ${e} is required for threshold scale.`}const CQ=RO(MO);let fp=CQ;function Fze(e){return fp=e,fp}function Oze(){return fp=CQ,fp}function we(...e){fp.warn(...e)}function Nze(...e){fp.debug(...e)}function fd(e){if(e&&$e(e)){for(const t of rR)if(t in e)return!0}return!1}const FQ=["january","february","march","april","may","june","july","august","september","october","november","december"],Dze=FQ.map(e=>e.substr(0,3)),OQ=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Mze=OQ.map(e=>e.substr(0,3));function Rze(e){if(Hw(e)&&(e=+e),$t(e))return e>4&&we(Sb("quarter",e)),e-1;throw new Error(Sb("quarter",e))}function $ze(e){if(Hw(e)&&(e=+e),$t(e))return e-1;{const t=e.toLowerCase(),n=FQ.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Dze.indexOf(r);if(i!==-1)return i;throw new Error(Sb("month",e))}}function Ize(e){if(Hw(e)&&(e=+e),$t(e))return e%7;{const t=e.toLowerCase(),n=OQ.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Mze.indexOf(r);if(i!==-1)return i;throw new Error(Sb("day",e))}}function nR(e,t){const n=[];if(t&&e.day!==void 0&&Ee(e).length>1&&(we(wze(e)),e=at(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?$ze(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Rze(e.quarter):e.quarter;n.push($t(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Ize(e.day):e.day;n.push($t(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Ih(e){const n=nR(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Lze(e){const n=nR(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Pze(e){const t=nR(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const NQ={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},rR=Ee(NQ);function Bze(e){return!!NQ[e]}function hd(e){return $e(e)?e.binned:DQ(e)}function DQ(e){return e&&e.startsWith("binned")}function iR(e){return e.startsWith("utc")}function Uze(e){return e.substring(3)}const zze={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Qw(e){return rR.filter(t=>RQ(e,t))}function MQ(e){const t=Qw(e);return t[t.length-1]}function RQ(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Hze(e,t,{end:n}={end:!1}){const r=jM(t),i=iR(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let a;const o={};for(const l of rR)RQ(e,l)&&(o[l]=s(l),a=l);return n&&(o[a]+="+1"),Lze(o)}function $Q(e){if(!e)return;const t=Qw(e);return`timeUnitSpecifier(${tn(t)}, ${tn(zze)})`}function Vze(e,t,n){if(!e)return;const r=$Q(e);return`${n||iR(e)?"utc":"time"}Format(${t}, ${r})`}function mr(e){if(!e)return;let t;return Le(e)?DQ(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:$e(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),iR(t.unit)&&(t.utc=!0,t.unit=Uze(t.unit)),t}function Wze(e){const{utc:t,...n}=mr(e);return n.unit?(t?"utc":"")+Ee(n).map(r=>pn(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ee(n).map(r=>pn(`_${r}_${n[r]}`)).join("")}function IQ(e,t=n=>n){const n=mr(e),r=MQ(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:a}=LQ(r,n.step),o={...i,[a]:+i[a]+s};return`${t(Ih(o))} - ${t(Ih(i))}`}}const jze={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Gze(e){return!!jze[e]}function LQ(e,t=1){if(Gze(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function qze(e){return e==null?void 0:e.param}function sR(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function aR(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function oR(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function lR(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function cR(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function uR(e){if(e!=null&&e.field){if(ge(e.range)&&e.range.length===2)return!0;if(Ve(e.range))return!0}return!1}function fR(e){return!!(e!=null&&e.field)&&(ge(e.oneOf)||ge(e.in))}function Xze(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function PQ(e){return fR(e)||sR(e)||uR(e)||aR(e)||lR(e)||oR(e)||cR(e)}function go(e,t){return cS(e,{timeUnit:t,wrapTime:!0})}function Yze(e,t){return e.map(n=>go(n,t))}function BQ(e,t=!0){const{field:n}=e,r=mr(e.timeUnit),{unit:i,binned:s}=r||{},a=Me(e,{expr:"datum"}),o=i?`time(${s?a:Hze(i,n)})`:a;if(sR(e))return`${o}===${go(e.equal,i)}`;if(aR(e)){const l=e.lt;return`${o}<${go(l,i)}`}else if(lR(e)){const l=e.gt;return`${o}>${go(l,i)}`}else if(oR(e)){const l=e.lte;return`${o}<=${go(l,i)}`}else if(cR(e)){const l=e.gte;return`${o}>=${go(l,i)}`}else{if(fR(e))return`indexof([${Yze(e.oneOf,i).join(",")}], ${o}) !== -1`;if(Xze(e))return eS(o,e.valid);if(uR(e)){const{range:l}=e,c=Ve(l)?{signal:`${l.signal}[0]`}:l[0],u=Ve(l)?{signal:`${l.signal}[1]`}:l[1];if(c!==null&&u!==null&&t)return"inrange("+o+", ["+go(c,i)+", "+go(u,i)+"])";const f=[];return c!==null&&f.push(`${o} >= ${go(c,i)}`),u!==null&&f.push(`${o} <= ${go(u,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${tn(e)}`)}function eS(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Kze(e){return PQ(e)&&e.timeUnit?{...e,timeUnit:mr(e.timeUnit)}:e}const tv={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Jze(e){return e==="quantitative"||e==="temporal"}function UQ(e){return e==="ordinal"||e==="nominal"}const Lh=tv.quantitative,hR=tv.ordinal,hp=tv.temporal,dR=tv.nominal,Kp=tv.geojson;function Zze(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Lh:return"quantitative";case"t":case hp:return"temporal";case"o":case hR:return"ordinal";case"n":case dR:return"nominal";case Kp:return"geojson"}}const wr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},RF={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Qze(e,t){const n=RF[e],r=RF[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const eHe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function o9(e){return eHe[e]}const zQ=new Set(["linear","log","pow","sqrt","symlog"]),HQ=new Set([...zQ,"time","utc"]);function VQ(e){return zQ.has(e)}const WQ=new Set(["quantile","quantize","threshold"]),tHe=new Set([...HQ,...WQ,"sequential","identity"]),nHe=new Set(["ordinal","bin-ordinal","point","band"]);function xr(e){return nHe.has(e)}function Ya(e){return tHe.has(e)}function ko(e){return HQ.has(e)}function dp(e){return WQ.has(e)}const rHe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function iHe(e){return!Le(e)&&!!e.name}function jQ(e){return e==null?void 0:e.param}function sHe(e){return e==null?void 0:e.unionWith}function aHe(e){return $e(e)&&"field"in e}const oHe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:oet,domain:cet,range:uet,rangeMax:fet,rangeMin:het,scheme:det,...lHe}=oHe,cHe=Ee(lHe);function $F(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ko(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ko(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ko(e);case"nice":return ko(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Ya(e)&&!bt(["log","time","utc","threshold","quantile"],e)}}function GQ(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return x0(e)?void 0:sze(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function uHe(e,t){return bt([hR,dR],t)?e===void 0||xr(e):t===hp?bt([wr.TIME,wr.UTC,void 0],e):t===Lh?VQ(e)||dp(e)||e===void 0:!0}function fHe(e,t,n=!1){if(!sl(e))return!1;switch(e){case mn:case _r:case ef:case Yp:case va:case ao:return ko(t)||t==="band"?!0:t==="point"?!n:!1;case dc:case rf:case pc:case tf:case nf:case ld:return ko(t)||dp(t)||bt(["band","point","ordinal"],t);case es:case nl:case rl:return t!=="band";case sf:case ts:return t==="ordinal"||dp(t)}}function hHe(e){return $e(e)&&"value"in e}const Mi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},qQ=Mi.arc,tS=Mi.area,nS=Mi.bar,dHe=Mi.image,rS=Mi.line,iS=Mi.point,pHe=Mi.rect,Ab=Mi.rule,XQ=Mi.text,pR=Mi.tick,gHe=Mi.trail,gR=Mi.circle,mR=Mi.square,YQ=Mi.geoshape;function lf(e){return["line","area","trail"].includes(e)}function W1(e){return["rect","bar","image","arc"].includes(e)}const mHe=new Set(Ee(Mi));function jo(e){return e.type}const xHe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],vHe=["fill","fillOpacity"],yHe=[...xHe,...vHe],_He={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},l9=Ee(_He),bHe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},EHe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},wHe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},KQ=Ee(wHe);function Ph(e){return e&&e.band!=null}const SHe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},JQ=5,AHe={binSpacing:1,continuousBandSize:JQ,minBandSize:.25,timeUnitBandPosition:.5},THe={binSpacing:0,continuousBandSize:JQ,minBandSize:.25,timeUnitBandPosition:.5},kHe={thickness:1};function CHe(e){return jo(e)?e.type:e}function ZQ(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function xR({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var o,l;if(!r||!Ya(r)||i)return"always-valid";const s=ZQ(Kt("invalid",e,t),{isPath:lf(e.type)});return((l=(o=t.scale)==null?void 0:o.invalid)==null?void 0:l[n])!==void 0?"show":s}function FHe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function QQ({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,a=t.domainHasZero();return a==="definitely"?{scale:e,value:0}:a==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function eee({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var u;const a=n==null?void 0:n.get("type"),o=Ja(t),l=Kw(o==null?void 0:o.aggregate),c=xR({scaleChannel:e,markDef:i,config:s,scaleType:a,isCountAggregate:l});if(o&&c==="show"){const f=((u=s.scale.invalid)==null?void 0:u[e])??"zero-or-min";return{test:eS(Me(o,{expr:"datum"}),!1),...OHe(f,n,r)}}}function OHe(e,t,n){if(hHe(e)){const{value:r}=e;return Ve(r)?{signal:r.signal}:{value:r}}return QQ({scale:t,scaleName:n,mode:"zeroOrMin"})}function vR(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:a}=e,o=cd(t),l=yR(e),c=eee({scaleChannel:o,channelDef:n,scale:i,scaleName:s,markDef:r,config:a});return c!==void 0?[c,l]:l}function NHe(e){const{datum:t}=e;return fd(t)?Ih(t):`${tn(t)}`}function oh(e,t,n,r){const i={};if(t&&(i.scale=t),al(e)){const{datum:s}=e;fd(s)?i.signal=Ih(s):Ve(s)?i.signal=s.signal:ev(s)?i.signal=s.expr:i.value=s}else i.field=Me(e,n);if(r){const{offset:s,band:a}=r;s&&(i.offset=s),a&&(i.band=a)}return i}function Tb({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:a=.5}){const o=!Ve(a)&&0<a&&a<1?"datum":void 0,l=Me(t,{expr:o,suffix:i}),c=n!==void 0?Me(n,{expr:o}):Me(t,{suffix:s,expr:o}),u={};if(a===0||a===1){u.scale=e;const f=a===0?l:c;u.field=f}else{const f=Ve(a)?`(1-${a.signal}) * ${l} + ${a.signal} * ${c}`:`${1-a} * ${l} + ${a} * ${c}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function DHe({scaleName:e,fieldDef:t}){const n=Me(t,{expr:"datum"}),r=Me(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function yR({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:a,stack:o,offset:l,defaultRef:c,bandPosition:u}){if(t){if(ot(t)){const f=a==null?void 0:a.get("type");if(Ni(t)){u??(u=Mu({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:h,timeUnit:d,type:p}=t;if(on(h)||u&&d&&p===hp)return o!=null&&o.impute?oh(t,s,{binSuffix:"mid"},{offset:l}):u&&!xr(f)?Tb({scaleName:s,fieldOrDatumDef:t,bandPosition:u,offset:l}):oh(t,s,av(t,e)?{binSuffix:"range"}:{},{offset:l});if(Er(h)){if(ke(n))return Tb({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:l});we(kQ(e===mn?so:tl))}}return oh(t,s,xr(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?u??t.bandPosition??.5:void 0})}else if(Ka(t)){const f=t.value,h=l?{offset:l}:{};return{...Gm(e,f),...h}}}return ht(c)&&(c=c()),c&&{...c,...l?{offset:l}:{}}}function Gm(e,t){return bt(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:bt(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:an(t)}function Bh(e){return e&&e!=="number"&&e!=="time"}function tee(e,t,n){return`${e}(${t}${n?`, ${tn(n)}`:""})`}const MHe="  ";function _R({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,c;if(Bh(n))return Pa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const a=nee(e,r,i),o=pp(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(o==="quantitative"){if(i&&s.normalizedNumberFormatType)return Pa({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Pa({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(o==="temporal"&&s.timeFormatType&&ke(e)&&e.timeUnit===void 0)return Pa({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(mp(e)){const u=$He({field:a,timeUnit:ke(e)?(l=mr(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:dd(e)&&((c=e.scale)==null?void 0:c.type)===wr.UTC});return u?{signal:u}:void 0}if(t=IF({type:o,specifiedFormat:t,config:s,normalizeStack:i}),ke(e)&&on(e.bin)){const u=Me(e,{expr:r,binSuffix:"end"});return{signal:nv(a,u,t,n,s)}}else return t||pp(e)==="quantitative"?{signal:`${see(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function nee(e,t,n){return ke(e)?n?`${Me(e,{expr:t,suffix:"end"})}-${Me(e,{expr:t,suffix:"start"})}`:Me(e,{expr:t}):NHe(e)}function Pa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:a}){if(a??(a=nee(e,r,i)),a!=="datum.value"&&ke(e)&&on(e.bin)){const o=Me(e,{expr:r,binSuffix:"end"});return{signal:nv(a,o,t,n,s)}}return{signal:tee(n,a,t)}}function ree(e,t,n,r,i,s){var a;if(!(Le(r)&&Bh(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&pp(e)==="quantitative"&&(i.normalizedNumberFormatType&&gp(e)&&e.stack==="normalize"||i.numberFormatType))){if(gp(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return IF({type:"quantitative",config:i,normalizeStack:!0});if(mp(e)){const o=ke(e)?(a=mr(e.timeUnit))==null?void 0:a.unit:void 0;return o===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:RHe({specifiedFormat:n,timeUnit:o,config:i,omitTimeFormatConfig:s})}return IF({type:t,specifiedFormat:n,config:i})}}function iee(e,t,n){var r;if(e&&(Ve(e)||e==="number"||e==="time"))return e;if(mp(t)&&n!=="time"&&n!=="utc")return ke(t)&&((r=mr(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function IF({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Le(t))return t;if(e===Lh)return r?n.normalizedNumberFormat:n.numberFormat}function RHe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:$Q(t)}:r?void 0:n.timeFormat)}function see(e,t){return`format(${e}, "${t||""}")`}function c9(e,t,n,r){return Bh(n)?tee(n,e,t):see(e,(Le(t)?t:void 0)??r.numberFormat)}function nv(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return nv(e,t,i.numberFormat,i.numberFormatType,i);const s=c9(e,n,r,i),a=c9(t,n,r,i);return`${eS(e,!1)} ? "null" : ${s} + "${MHe}" + ${a}`}function $He({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Le(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Vze(t,e,s)}const sS="min",IHe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function u9(e){return e in IHe}function LHe(e){return!!(e!=null&&e.encoding)}function Xl(e){return e&&(e.op==="count"||!!e.field)}function aee(e){return e&&ge(e)}function rv(e){return"row"in e||"column"in e}function bR(e){return!!e&&"header"in e}function aS(e){return"facet"in e}function PHe(e){return e.param}function BHe(e){return e&&!Le(e)&&"repeat"in e}function f9(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function ER(e){return"sort"in e}function Mu({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ot(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ke(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Wo("timeUnitBandPosition",n,r);if(on(s))return .5}}function oee({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:a}){var c,u,f;const o=ns(e),l=Kt(a?"size":o,r,i,{vgChannel:o});if(l!==void 0)return l;if(ke(t)){const{timeUnit:h,bin:d}=t;if(h&&!n)return{band:Wo("timeUnitBandSize",r,i)};if(on(d)&&!xr(s))return{band:1}}if(W1(r.type))return s?xr(s)?((c=i[r.type])==null?void 0:c.discreteBandSize)||{band:1}:(u=i[r.type])==null?void 0:u.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function lee(e,t,n,r){return on(e.bin)||e.timeUnit&&Ni(e)&&e.type==="temporal"?Mu({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function cee(e){return e&&!!e.sort&&!e.field}function iv(e){return e&&"condition"in e}function oS(e){const t=e==null?void 0:e.condition;return!!t&&!ge(t)&&ke(t)}function sv(e){const t=e==null?void 0:e.condition;return!!t&&!ge(t)&&ot(t)}function UHe(e){const t=e==null?void 0:e.condition;return!!t&&(ge(t)||Ka(t))}function ke(e){return e&&(!!e.field||e.aggregate==="count")}function pp(e){return e==null?void 0:e.type}function al(e){return e&&"datum"in e}function Jc(e){return Ni(e)&&!Cb(e)||kb(e)}function h9(e){return Ni(e)&&e.type==="quantitative"&&!e.bin||kb(e)}function kb(e){return al(e)&&$t(e.datum)}function ot(e){return ke(e)||al(e)}function Ni(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Ka(e){return e&&"value"in e&&"value"in e}function dd(e){return e&&("scale"in e||"sort"in e)}function gp(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function uee(e){return e&&"legend"in e}function fee(e){return e&&("format"in e||"formatType"in e)}function zHe(e){return qi(e,["legend","axis","header","scale"])}function HHe(e){return"op"in e}function Me(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(WHe(e))n=QZ("count");else{let a;if(!t.nofn)if(HHe(e))a=e.op;else{const{bin:o,aggregate:l,timeUnit:c}=e;on(o)?(a=dQ(o),i=(t.binSuffix??"")+(t.suffix??"")):l?af(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):ic(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):a=String(l):c&&!hd(c)&&(a=Wze(c),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Xp(n):t.expr?KZ(n,t.expr)+s:ha(n)+s}function Cb(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ke(e)&&!!e.bin;case"temporal":return!1}throw new Error(wQ(e.type))}function VHe(e){var t;return dd(e)&&dp((t=e.scale)==null?void 0:t.type)}function WHe(e){return e.aggregate==="count"}function jHe(e,t){var a;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(on(r))return`${n} (binned)`;if(i&&!hd(i)){const o=(a=mr(i))==null?void 0:a.unit;if(o)return`${n} (${Qw(o).join("-")})`}else if(s)return af(s)?`${n} for max ${s.argmax}`:ic(s)?`${n} for min ${s.argmin}`:`${Kx(s)} of ${n}`;return n}function GHe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(af(t))return`${i} for argmax(${t.argmax})`;if(ic(t))return`${i} for argmin(${t.argmin})`;const s=r&&!hd(r)?mr(r):void 0,a=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||on(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}const hee=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return GHe(e);default:return jHe(e,t)}};let dee=hee;function pee(e){dee=e}function qHe(){pee(hee)}function v0(e,t,{allowDisabling:n,includeDefault:r=!0}){var o;const i=(o=wR(e))==null?void 0:o.title;if(!ke(e))return i??e.title;const s=e,a=r?SR(s,t):void 0;return n?Rn(i,s.title,a):i??s.title??a}function wR(e){if(gp(e)&&e.axis)return e.axis;if(uee(e)&&e.legend)return e.legend;if(bR(e)&&e.header)return e.header}function SR(e,t){return dee(e,t)}function Fb(e){if(fee(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=wR(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function XHe(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(ER(e)&&ge(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!af(n)&&!ic(n))return"quantitative";if(dd(e)&&((s=e.scale)!=null&&s.type))switch(RF[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ja(e){if(ke(e))return e;if(oS(e))return e.condition}function er(e){if(ot(e))return e;if(sv(e))return e.condition}function gee(e,t,n,r={}){if(Le(e)||$t(e)||Ju(e)){const i=Le(e)?"string":$t(e)?"number":"boolean";return we(qUe(t,i,e)),{value:e}}return ot(e)?Ob(e,t,n,r):sv(e)?{...e,condition:Ob(e.condition,t,n,r)}:e}function Ob(e,t,n,r){if(fee(e)){const{format:i,formatType:s,...a}=e;if(Bh(s)&&!n.customFormatTypes)return we(i9(t)),Ob(a,t,n,r)}else{const i=gp(e)?"axis":uee(e)?"legend":bR(e)?"header":null;if(i&&e[i]){const{format:s,formatType:a,...o}=e[i];if(Bh(a)&&!n.customFormatTypes)return we(i9(t)),Ob({...e,[i]:o},t,n,r)}}return ke(e)?AR(e,t,r):YHe(e)}function YHe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=$t(n)?"quantitative":Le(n)?"nominal":fd(n)?"temporal":void 0,{...e,type:t}}function AR(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:a}=e,o={...e};if(!n&&r&&!QM(r)&&!af(r)&&!ic(r)&&(we(YUe(r)),delete o.aggregate),i&&(o.timeUnit=mr(i)),a&&(o.field=`${a}`),on(s)&&(o.bin=lS(s,t)),Er(s)&&!$n(t)&&we(kze(t)),Ni(o)){const{type:l}=o,c=Zze(l);l!==c&&(o.type=c),l!=="quantitative"&&Kw(r)&&(we(XUe(l,r)),o.type="quantitative")}else if(!oQ(t)){const l=XHe(o,t);o.type=l}if(Ni(o)){const{compatible:l,warning:c}=KHe(o,t)||{};l===!1&&we(c)}if(ER(o)&&Le(o.sort)){const{sort:l}=o;if(u9(l))return{...o,sort:{encoding:l}};const c=l.substr(1);if(l.charAt(0)==="-"&&u9(c))return{...o,sort:{encoding:c,order:"descending"}}}if(bR(o)){const{header:l}=o;if(l){const{orient:c,...u}=l;if(c)return{...o,header:{...u,labelOrient:l.labelOrient||c,titleOrient:l.titleOrient||c}}}}return o}function lS(e,t){return Ju(e)?{maxbins:YP(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:YP(t)}:e}const Nd={compatible:!0};function KHe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Gl:case ql:case Vw:return Cb(e)?Nd:{compatible:!1,warning:QUe(t)};case mn:case _r:case ef:case Yp:case es:case nl:case rl:case Jx:case Zx:case Ww:case $h:case jw:case Gw:case ld:case va:case ao:case qw:return Nd;case lo:case da:case oo:case co:return n!==Lh?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Nd;case pc:case tf:case nf:case rf:case dc:case hc:case fc:case so:case tl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Nd;case ts:case sf:return!Cb(e)&&!VHe(e)?{compatible:!1,warning:eze(t)}:Nd;case up:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Nd}}function mp(e){const{formatType:t}=Fb(e);return t==="time"||!t&&JHe(e)}function JHe(e){return e&&(e.type==="temporal"||ke(e)&&!!e.timeUnit)}function cS(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=mr(t))==null?void 0:l.unit);let a=s||n==="temporal",o;return ev(e)?o=e.expr:Ve(e)?o=e.signal:fd(e)?(a=!0,o=Ih(e)):(Le(e)||$t(e))&&a&&(o=`datetime(${tn(e)})`,Bze(s)&&($t(e)&&e<1e4||Le(e)&&isNaN(Date.parse(e)))&&(o=Ih({[s]:e}))),o?r&&a?`time(${o})`:o:i?void 0:tn(e)}function mee(e,t){const{type:n}=e;return t.map(r=>{const i=ke(e)&&!hd(e.timeUnit)?e.timeUnit:void 0,s=cS(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function av(e,t){return on(e.bin)?sl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const d9={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ov(e){return e==null?void 0:e.condition}const xee=["domain","grid","labels","ticks","title"],ZHe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},vee={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},QHe={...vee,style:1,labelExpr:1,encoding:1};function p9(e){return!!QHe[e]}const eVe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},yee=Ee(eVe);function mc(e){return"mark"in e}class uS{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return mc(t)?CHe(t.mark)===this.name:!1}}function lh(e,t){const n=e&&e[t];return n?ge(n)?lp(n,r=>!!r.field):ke(n)||oS(n):!1}function _ee(e,t){const n=e&&e[t];return n?ge(n)?lp(n,r=>!!r.field):ke(n)||al(n)||sv(n):!1}function bee(e,t){if($n(t)){const n=e[t];if((ke(n)||al(n))&&(UQ(n.type)||ke(n)&&n.timeUnit)){const r=Xw(t);return _ee(e,r)}}return!1}function Eee(e){return lp(eUe,t=>{if(lh(e,t)){const n=e[t];if(ge(n))return lp(n,r=>!!r.aggregate);{const r=Ja(n);return r&&!!r.aggregate}}return!1})}function wee(e,t){const n=[],r=[],i=[],s=[],a={};return TR(e,(o,l)=>{if(ke(o)){const{field:c,aggregate:u,bin:f,timeUnit:h,...d}=o;if(u||h||f){const p=wR(o),g=p==null?void 0:p.title;let m=Me(o,{forAs:!0});const x={...g?[]:{title:v0(o,t,{allowDisabling:!0})},...d,field:m};if(u){let v;if(af(u)?(v="argmax",m=Me({op:"argmax",field:u.argmax},{forAs:!0}),x.field=`${m}.${c}`):ic(u)?(v="argmin",m=Me({op:"argmin",field:u.argmin},{forAs:!0}),x.field=`${m}.${c}`):u!=="boxplot"&&u!=="errorbar"&&u!=="errorband"&&(v=u),v){const y={op:v,as:m};c&&(y.field=c),s.push(y)}}else if(n.push(m),Ni(o)&&on(f)){if(r.push({bin:f,field:c,as:m}),n.push(Me(o,{binSuffix:"end"})),av(o,l)&&n.push(Me(o,{binSuffix:"range"})),$n(l)){const v={field:`${m}_end`};a[`${l}2`]=v}x.bin="binned",oQ(l)||(x.type=Lh)}else if(h&&!hd(h)){i.push({timeUnit:h,field:c,as:m});const v=Ni(o)&&o.type!==hp&&"time";v&&(l===Jx||l===$h?x.formatType=v:uUe(l)?x.legend={formatType:v,...x.legend}:$n(l)&&(x.axis={formatType:v,...x.axis}))}a[l]=x}else n.push(c),a[l]=e[l]}else a[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function tVe(e,t,n){const r=hUe(t,n);if(r){if(r==="binned"){const i=e[t===so?mn:_r];return!!(ke(i)&&ke(e[t])&&Er(i.bin))}}else return!1;return!0}function nVe(e,t,n,r){const i={};for(const s of Ee(e))aQ(s)||we(ZUe(s));for(let s of aUe){if(!e[s])continue;const a=e[s];if(Qx(s)){const o=sUe(s),l=i[o];if(ke(l)&&Jze(l.type)&&ke(a)&&!l.timeUnit){we(GUe(o));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(we(jUe),s=va),!tVe(e,s,t)){we(Zw(s,t));continue}if(s===dc&&t==="line"){const o=Ja(e[s]);if(o!=null&&o.aggregate){we(JUe);continue}}if(s===es&&(n?"fill"in e:"stroke"in e)){we(SQ("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===Zx||s===up&&!ge(a)&&!Ka(a)||s===$h&&ge(a)){if(a){if(s===up){const o=e[s];if(cee(o)){i[s]=o;continue}}i[s]=Ie(a).reduce((o,l)=>(ke(l)?o.push(AR(l,s)):we(MF(l,s)),o),[])}}else{if(s===$h&&a===null)i[s]=null;else if(!ke(a)&&!al(a)&&!Ka(a)&&!iv(a)&&!Ve(a)){we(MF(a,s));continue}i[s]=gee(a,s,r)}}return i}function fS(e,t){const n={};for(const r of Ee(e)){const i=gee(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function rVe(e){const t=[];for(const n of Ee(e))if(lh(e,n)){const r=e[n],i=Ie(r);for(const s of i)ke(s)?t.push(s):oS(s)&&t.push(s.condition)}return t}function TR(e,t,n){if(e)for(const r of Ee(e)){const i=e[r];if(ge(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function iVe(e,t,n,r){return e?Ee(e).reduce((i,s)=>{const a=e[s];return ge(a)?a.reduce((o,l)=>t.call(r,o,l,s),i):t.call(r,i,a,s)},n):n}function See(e,t){return Ee(t).reduce((n,r)=>{switch(r){case mn:case _r:case jw:case qw:case Gw:case so:case tl:case ef:case Yp:case va:case hc:case ao:case fc:case oo:case lo:case co:case da:case Jx:case ts:case ld:case $h:return n;case up:if(e==="line"||e==="trail")return n;case Zx:case Ww:{const i=t[r];if(ge(i)||ke(i))for(const s of Ie(i))s.aggregate||n.push(Me(s,{}));return n}case dc:if(e==="trail")return n;case es:case nl:case rl:case pc:case tf:case nf:case sf:case rf:{const i=Ja(t[r]);return i&&!i.aggregate&&n.push(Me(i,{})),n}}},[])}function sVe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ge(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ge(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function LF(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:a,titlePrefix:o})=>{const l=r?` of ${kR(t)}`:"";return{field:a+t.field,type:t.type,title:Ve(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),s=rVe(n).map(zHe);return{tooltip:[...i,...To(s,St)]}}function kR(e){const{title:t,field:n}=e;return Rn(t,n)}function CR(e,t,n,r,i){const{scale:s,axis:a}=n;return({partName:o,mark:l,positionPrefix:c,endPositionPrefix:u=void 0,extraEncoding:f={}})=>{const h=kR(n);return Aee(e,o,i,{mark:l,encoding:{[t]:{field:`${c}_${n.field}`,type:n.type,...h!==void 0?{title:h}:{},...s!==void 0?{scale:s}:{},...a!==void 0?{axis:a}:{}},...Le(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{},...r,...f}})}}function Aee(e,t,n,r){const{clip:i,color:s,opacity:a}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...a?{opacity:a}:{},...jo(r.mark)?r.mark:{type:r.mark},style:`${o}-${String(t)}`,...Ju(e[t])?{}:e[t]}}]:[]}function Tee(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],a=r[`${i}2`],o=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:Ey(s,n),continuousAxisChannelDef2:Ey(a,n),continuousAxisChannelDefError:Ey(o,n),continuousAxisChannelDefError2:Ey(l,n),continuousAxis:i}}function Ey(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&we(Tze(n,t)),r}else return e}function kee(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(jo(n)&&n.orient)return n.orient;if(Jc(i)){if(Jc(s)){const a=ke(i)&&i.aggregate,o=ke(s)&&s.aggregate;if(!a&&o===t)return"vertical";if(!o&&a===t)return"horizontal";if(a===t&&o===t)throw new Error("Both x and y cannot have aggregate");return mp(s)&&!mp(i)?"horizontal":"vertical"}return"horizontal"}else{if(Jc(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Nb="boxplot",aVe=["box","median","outliers","rule","ticks"],oVe=new uS(Nb,Fee);function Cee(e){return $t(e)?"tukey":e}function Fee(e,{config:t}){e={...e,encoding:fS(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...a}=e,o=jo(n)?n:{type:n};i&&we(EQ("boxplot"));const l=o.extent??t.boxplot.extent,c=Kt("size",o,t),u=o.invalid,f=Cee(l),{bins:h,timeUnits:d,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:x,aggregate:v,encodingWithoutContinuousAxis:y,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:w}=lVe(e,l,t),E=Xp(g.field),{color:A,size:S,...k}=y,T=te=>CR(o,m,g,te,t.boxplot),O=T(k),C=T(y),D=($e(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",N=T({...k,...S?{size:S}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...A||{value:D}}}}),R=LF([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,y),L={type:"tick",color:"black",opacity:1,orient:_,invalid:u,aria:!1},I=f==="min-max"?R:LF([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,y),Y=[...O({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:I}),...O({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:I}),...O({partName:"ticks",mark:L,positionPrefix:"lower_whisker",extraEncoding:I}),...O({partName:"ticks",mark:L,positionPrefix:"upper_whisker",extraEncoding:I})],X=[...f!=="tukey"?Y:[],...C({partName:"box",mark:{type:"bar",...c?{size:c}:{},orient:b,invalid:u,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:R}),...N({partName:"median",mark:{type:"tick",invalid:u,...$e(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...c?{size:c}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:R})];if(f==="min-max")return{...a,transform:(a.transform??[]).concat(p),layer:X};const oe=`datum["lower_box_${g.field}"]`,xe=`datum["upper_box_${g.field}"]`,_e=`(${xe} - ${oe})`,ve=`${oe} - ${l} * ${_e}`,Oe=`${xe} + ${l} * ${_e}`,Pe=`datum["${g.field}"]`,Ge={joinaggregate:Oee(g.field),groupby:x},z={transform:[{filter:`(${ve} <= ${Pe}) && (${Pe} <= ${Oe})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${E}`},{op:"max",field:g.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${E}`},...v],groupby:x}],layer:Y},{tooltip:q,...G}=k,{scale:H,axis:J}=g,F=kR(g),B=qi(J,["title"]),K=Aee(o,"outliers",t.boxplot,{transform:[{filter:`(${Pe} < ${ve}) || (${Pe} > ${Oe})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...F!==void 0?{title:F}:{},...H!==void 0?{scale:H}:{},...en(B)?{}:{axis:B}},...G,...A?{color:A}:{},...w?{tooltip:w}:{}}})[0];let Z;const Q=[...h,...d,Ge];return K?Z={transform:Q,layer:[K,z]}:(Z=z,Z.transform.unshift(...Q)),{...a,layer:[Z,{transform:p,layer:X}]}}function Oee(e){const t=Xp(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function lVe(e,t,n){const r=kee(e,Nb),{continuousAxisChannelDef:i,continuousAxis:s}=Tee(e,r,Nb),a=i.field,o=Xp(a),l=Cee(t),c=[...Oee(a),{op:"median",field:a,as:`mid_box_${o}`},{op:"min",field:a,as:(l==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:a,as:(l==="min-max"?"upper_whisker_":"max_")+o}],u=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:f,...h}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=sVe(h),{bins:g,timeUnits:m,aggregate:x,groupby:v,encoding:y}=wee(p,n),_=r==="vertical"?"horizontal":"vertical",b=r,w=[...g,...m,{aggregate:[...x,...c],groupby:v},...u];return{bins:g,timeUnits:m,transform:w,groupby:v,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:y,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:d}}const FR="errorbar",cVe=["ticks","rule"],uVe=new uS(FR,Nee);function Nee(e,{config:t}){e={...e,encoding:fS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:o,outerSpec:l,tooltipEncoding:c}=Dee(e,FR,t);delete s.size;const u=CR(o,i,r,s,t.errorbar),f=o.thickness,h=o.size,d={type:"tick",orient:a,aria:!1,...f!==void 0?{thickness:f}:{},...h!==void 0?{size:h}:{}},p=[...u({partName:"ticks",mark:d,positionPrefix:"lower",extraEncoding:c}),...u({partName:"ticks",mark:d,positionPrefix:"upper",extraEncoding:c}),...u({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function fVe(e,t){const{encoding:n}=e;if(hVe(n))return{orient:kee(e,t),inputType:"raw"};const r=dVe(n),i=pVe(n),s=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(ot(o)&&ot(l))throw new Error(`${t} cannot have both x2 and y2`);if(ot(o)){if(Jc(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ot(l)){if(Jc(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,c=n.yError,u=n.yError2;if(ot(l)&&!ot(o))throw new Error(`${t} cannot have xError2 without xError`);if(ot(u)&&!ot(c))throw new Error(`${t} cannot have yError2 without yError`);if(ot(o)&&ot(c))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ot(o)){if(Jc(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ot(c)){if(Jc(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function hVe(e){return(ot(e.x)||ot(e.y))&&!ot(e.x2)&&!ot(e.y2)&&!ot(e.xError)&&!ot(e.xError2)&&!ot(e.yError)&&!ot(e.yError2)}function dVe(e){return ot(e.x2)||ot(e.y2)}function pVe(e){return ot(e.xError)||ot(e.xError2)||ot(e.yError)||ot(e.yError2)}function Dee(e,t,n){const{mark:r,encoding:i,params:s,projection:a,...o}=e,l=jo(r)?r:{type:r};s&&we(EQ(t));const{orient:c,inputType:u}=fVe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:h,continuousAxisChannelDefError:d,continuousAxisChannelDefError2:p,continuousAxis:g}=Tee(e,c,t),{errorBarSpecificAggregate:m,postAggregateCalculates:x,tooltipSummary:v,tooltipTitleWithFieldName:y}=gVe(l,f,h,d,p,u,t,n),{[g]:_,[g==="x"?"x2":"y2"]:b,[g==="x"?"xError":"yError"]:w,[g==="x"?"xError2":"yError2"]:E,...A}=i,{bins:S,timeUnits:k,aggregate:T,groupby:O,encoding:C}=wee(A,n),D=[...T,...m],N=u!=="raw"?[]:O,R=LF(v,f,C,y);return{transform:[...o.transform??[],...S,...k,...D.length===0?[]:[{aggregate:D,groupby:N}],...x],groupby:N,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:C,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:R}}function gVe(e,t,n,r,i,s,a,o){let l=[],c=[];const u=t.field;let f,h=!1;if(s==="raw"){const d=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,p=e.extent?e.extent:d==="mean"?"stderr":"iqr";if(d==="median"!=(p==="iqr")&&we(Aze(d,p,a)),p==="stderr"||p==="stdev")l=[{op:p,field:u,as:`extent_${u}`},{op:d,field:u,as:`center_${u}`}],c=[{calculate:`datum["center_${u}"] + datum["extent_${u}"]`,as:`upper_${u}`},{calculate:`datum["center_${u}"] - datum["extent_${u}"]`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:Kx(d)},{fieldPrefix:"upper_",titlePrefix:g9(d,p,"+")},{fieldPrefix:"lower_",titlePrefix:g9(d,p,"-")}],h=!0;else{let g,m,x;p==="ci"?(g="mean",m="ci0",x="ci1"):(g="median",m="q1",x="q3"),l=[{op:m,field:u,as:`lower_${u}`},{op:x,field:u,as:`upper_${u}`},{op:g,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:v0({field:u,aggregate:x,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:v0({field:u,aggregate:m,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:v0({field:u,aggregate:g,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&we(Sze(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],c=[{calculate:`datum["${n.field}"]`,as:`upper_${u}`},{calculate:`datum["${u}"]`,as:`lower_${u}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:u}],c=[{calculate:`datum["${u}"] + datum["${r.field}"]`,as:`upper_${u}`}],i?c.push({calculate:`datum["${u}"] + datum["${i.field}"]`,as:`lower_${u}`}):c.push({calculate:`datum["${u}"] - datum["${r.field}"]`,as:`lower_${u}`}));for(const d of c)f.push({fieldPrefix:d.as.substring(0,6),titlePrefix:Rh(Rh(d.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:h}}function g9(e,t,n){return`${Kx(e)} ${n} ${t}`}const OR="errorband",mVe=["band","borders"],xVe=new uS(OR,Mee);function Mee(e,{config:t}){e={...e,encoding:fS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:o,tooltipEncoding:l}=Dee(e,OR,t),c=a,u=CR(c,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let h={type:f?"area":"rect"},d={type:f?"line":"rule"};const p={...c.interpolate?{interpolate:c.interpolate}:{},...c.tension&&c.interpolate?{tension:c.tension}:{}};return f?(h={...h,...p,ariaRoleDescription:"errorband"},d={...d,...p,aria:!1}):c.interpolate?we(a9("interpolate")):c.tension&&we(a9("tension")),{...o,transform:n,layer:[...u({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...u({partName:"borders",mark:d,positionPrefix:"lower",extraEncoding:l}),...u({partName:"borders",mark:d,positionPrefix:"upper",extraEncoding:l})]}}const Ree={};function NR(e,t,n){const r=new uS(e,t);Ree[e]={normalizer:r,parts:n}}function vVe(){return Ee(Ree)}NR(Nb,Fee,aVe);NR(FR,Nee,cVe);NR(OR,Mee,mVe);const yVe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],$ee={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Iee={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},_Ve=Ee($ee),bVe=Ee(Iee),EVe={header:1,headerRow:1,headerColumn:1,headerFacet:1},Lee=Ee(EVe),Pee=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],wVe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},SVe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Za="_vgsid_",AVe={point:{on:"click",fields:[Za],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function DR(e){return e==="legend"||!!(e!=null&&e.legend)}function OT(e){return DR(e)&&$e(e)}function MR(e){return!!(e!=null&&e.select)}function Bee(e){const t=[];for(const n of e||[]){if(MR(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const a={...s,bind:i,init:r};t.push(a)}else{const a={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(a)}}return t}function TVe(e){return hS(e)||$R(e)||RR(e)}function RR(e){return"concat"in e}function hS(e){return"vconcat"in e}function $R(e){return"hconcat"in e}function Uee({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Go(e){return $e(e)&&e.step!==void 0}function m9(e){return e.view||e.width||e.height}const x9=20,kVe={align:1,bounds:1,center:1,columns:1,spacing:1},CVe=Ee(kVe);function FVe(e,t,n){const r=n[t],i={},{spacing:s,columns:a}=r;s!==void 0&&(i.spacing=s),a!==void 0&&(aS(e)&&!rv(e.facet)||RR(e))&&(i.columns=a),hS(e)&&(i.columns=1);for(const o of CVe)if(e[o]!==void 0)if(o==="spacing"){const l=e[o];i[o]=$t(l)?l:{row:l.row??s,column:l.column??s}}else i[o]=e[o];return i}function PF(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function Db(e,t){const n=Mb(e,t);return Go(n)?n.step:zee}function Mb(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Rn(n,{step:e.step})}const zee=20,OVe={continuousWidth:200,continuousHeight:200,step:zee},NVe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:OVe,mark:EHe,arc:{},area:{},bar:AHe,circle:{},geoshape:{},image:{},line:{},point:{},rect:THe,rule:{color:"black"},square:{},text:{color:"black"},tick:kHe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:rHe,projection:{},legend:wVe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:AVe,style:{},title:{},facet:{spacing:x9},concat:{spacing:x9},normalizedNumberFormat:".0%"},dl=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],v9={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},y9={blue:dl[0],orange:dl[1],red:dl[2],teal:dl[3],green:dl[4],yellow:dl[5],purple:dl[6],pink:dl[7],brown:dl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function DVe(e={}){return{signals:[{name:"color",value:$e(e)?{...y9,...e}:y9}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function MVe(e){return{signals:[{name:"fontSize",value:$e(e)?{...v9,...e}:v9}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function RVe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Hee(e){const t=Ee(e||{}),n={};for(const r of t){const i=e[r];n[r]=ov(i)?gQ(i):gs(i)}return n}function $Ve(e){const t=Ee(e),n={};for(const r of t)n[r]=Hee(e[r]);return n}const IVe=[...KQ,...yee,...Lee,"background","padding","legend","lineBreak","scale","style","title","view"];function Vee(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,a=Lp({},at(NVe),n?RVe(n):{},t?DVe(t):{},r?MVe(r):{},s||{});i&&Pp(a,"selection",i,!0);const o=qi(a,IVe);for(const l of["background","lineBreak","padding"])a[l]&&(o[l]=gs(a[l]));for(const l of KQ)a[l]&&(o[l]=jr(a[l]));for(const l of yee)a[l]&&(o[l]=Hee(a[l]));for(const l of Lee)a[l]&&(o[l]=jr(a[l]));if(a.legend&&(o.legend=jr(a.legend)),a.scale){const{invalid:l,...c}=a.scale,u=jr(l,{level:1});o.scale={...jr(c),...Ee(u).length>0?{invalid:u}:{}}}return a.style&&(o.style=$Ve(a.style)),a.title&&(o.title=jr(a.title)),a.view&&(o.view=jr(a.view)),o}const LVe=new Set(["view",...mHe]),PVe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],BVe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...bHe};function UVe(e){e=at(e);for(const t of PVe)delete e[t];if(e.axis)for(const t in e.axis)ov(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of yVe)delete e.legend[t];if(e.mark){for(const t of l9)delete e.mark[t];e.mark.tooltip&&$e(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Bee(e.params)),delete e.params);for(const t of LVe){for(const r of l9)delete e[t][r];const n=BVe[t];if(n)for(const r of n)delete e[t][r];HVe(e,t)}for(const t of vVe())delete e[t];zVe(e);for(const t in e)$e(e[t])&&en(e[t])&&delete e[t];return en(e)?void 0:e}function zVe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=pQ(e.title);en(t)||(e.style["group-title"]={...e.style["group-title"],...t}),en(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),en(r)?delete e.title:e.title=r}function HVe(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};en(s)||(e.style[n??t]=s),delete e[t]}function dS(e){return"layer"in e}function VVe(e){return"repeat"in e}function WVe(e){return!ge(e.repeat)&&e.repeat.layer}class IR{map(t,n){return aS(t)?this.mapFacet(t,n):VVe(t)?this.mapRepeat(t,n):$R(t)?this.mapHConcat(t,n):hS(t)?this.mapVConcat(t,n):RR(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(dS(t))return this.mapLayer(t,n);if(mc(t))return this.mapUnit(t,n);throw new Error(eR(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const jVe={zero:1,center:1,normalize:1};function GVe(e){return e in jVe}const qVe=new Set([qQ,nS,tS,Ab,iS,gR,mR,rS,XQ,pR]),XVe=new Set([nS,tS,qQ]);function Dd(e){return ke(e)&&pp(e)==="quantitative"&&!e.bin}function _9(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),a=e[t],o=e[i];if(ke(a)&&ke(o))if(Dd(a)&&Dd(o)){if(a.stack)return t;if(o.stack)return i;const l=ke(a)&&!!a.aggregate,c=ke(o)&&!!o.aggregate;if(l!==c)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Dd(a))return t;if(Dd(o))return i}else{if(Dd(a))return s&&n==="vertical"?void 0:t;if(Dd(o))return s&&n==="horizontal"?void 0:i}}function YVe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Wee(e,t){var g,m;const n=jo(e)?e:{type:e},r=n.type;if(!qVe.has(r))return null;const i=_9(t,"x",n)||_9(t,"theta",n);if(!i)return null;const s=t[i],a=ke(s)?Me(s,{}):void 0,o=YVe(i),l=[],c=new Set;if(t[o]){const x=t[o],v=ke(x)?Me(x,{}):void 0;v&&v!==a&&(l.push(o),c.add(v))}const u=o==="x"?"xOffset":"yOffset",f=t[u],h=ke(f)?Me(f,{}):void 0;h&&h!==a&&(l.push(u),c.add(h));const d=oUe.reduce((x,v)=>{if(v!=="tooltip"&&lh(t,v)){const y=t[v];for(const _ of Ie(y)){const b=Ja(_);if(b.aggregate)continue;const w=Me(b,{});(!w||!c.has(w))&&x.push({channel:v,fieldDef:b})}}return x},[]);let p;return s.stack!==void 0?Ju(s.stack)?p=s.stack?"zero":null:p=s.stack:XVe.has(r)&&(p="zero"),!p||!GVe(p)||Eee(t)&&d.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((m=s==null?void 0:s.scale)==null?void 0:m.type)!==wr.LINEAR&&s!=null&&s.stack&&we(bze(s.scale.type)),ot(t[il(i)])?(s.stack!==void 0&&we(_ze(i)),null):(ke(s)&&s.aggregate&&!yUe.has(s.aggregate)&&we(Eze(s.aggregate)),{groupbyChannels:l,groupbyFields:c,fieldChannel:i,impute:s.impute===null?!1:lf(r),stackBy:d,offset:p}))}function jee(e,t,n){const r=jr(e),i=Kt("orient",r,n);if(r.orient=QVe(r.type,t,i),i!==void 0&&i!==r.orient&&we(ize(r.orient,i)),r.type==="bar"&&r.orient){const l=Kt("cornerRadiusEnd",r,n);if(l!==void 0){const c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:SHe[r.orient];for(const u of c)r[u]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Kt("opacity",r,n),a=Kt("fillOpacity",r,n);return s===void 0&&a===void 0&&(r.opacity=JVe(r.type,t)),Kt("cursor",r,n)===void 0&&(r.cursor=KVe(r,t,n)),r}function KVe(e,t,n){return t.href||e.href||Kt("href",e,n)?"pointer":e.cursor}function JVe(e,t){if(bt([iS,pR,gR,mR],e)&&!Eee(t))return .7}function ZVe(e,t,{graticule:n}){if(n)return!1;const r=Wo("filled",e,t),i=e.type;return Rn(r,i!==iS&&i!==rS&&i!==Ab)}function QVe(e,t,n){switch(e){case iS:case gR:case mR:case XQ:case pHe:case dHe:return}const{x:r,y:i,x2:s,y2:a}=t;switch(e){case nS:if(ke(r)&&(Er(r.bin)||ke(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ke(i)&&(Er(i.bin)||ke(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s)return(ke(r)&&r.type===Lh&&!on(r.bin)||kb(r))&&ke(i)&&Er(i.bin)?"horizontal":"vertical";if(!a)return(ke(i)&&i.type===Lh&&!on(i.bin)||kb(i))&&ke(r)&&Er(r.bin)?"vertical":"horizontal"}case Ab:if(s&&!(ke(r)&&Er(r.bin))&&a&&!(ke(i)&&Er(i.bin)))return;case tS:if(a)return ke(i)&&Er(i.bin)?"horizontal":"vertical";if(s)return ke(r)&&Er(r.bin)?"vertical":"horizontal";if(e===Ab){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case rS:case pR:{const o=h9(r),l=h9(i);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l)return"vertical";{const c=Ni(r)&&r.type===hp,u=Ni(i)&&i.type===hp;if(c&&!u)return"vertical";if(!c&&u)return"horizontal"}return}}return"vertical"}function eWe(e){const{point:t,line:n,...r}=e;return Ee(r).length>1?r:r.type}function tWe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:qi(e[t],["point","line"])});return e}function NT(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?$e(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?$e(t.point)?t.point:{}:void 0}function b9(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class nWe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(mc(t)){const{mark:r,encoding:i}=t,s=jo(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!NT(s,n[s.type],i);case"area":return!!NT(s,n[s.type],i)||!!b9(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:a,mark:o,name:l,encoding:c,...u}=t,f=fS(c,i),h=jo(o)?o:{type:o},d=NT(h,i[h.type],f),p=h.type==="area"&&b9(h,i[h.type]),g=[{name:l,...s?{params:s}:{},mark:eWe({...h.type==="area"&&h.opacity===void 0&&h.fillOpacity===void 0?{opacity:.7}:{},...h}),encoding:qi(f,["shape"])}],m=Wee(jee(h,f,i),f);let x=f;if(m){const{fieldChannel:v,offset:y}=m;x={...f,[v]:{...f[v],...y?{stack:y}:{}}}}return x=qi(x,["y2","x2"]),p&&g.push({...a?{projection:a}:{},mark:{type:"line",...op(h,["clip","interpolate","tension","tooltip"]),...p},encoding:x}),d&&g.push({...a?{projection:a}:{},mark:{type:"point",opacity:1,filled:!0,...op(h,["clip","tooltip"]),...d},encoding:x}),r({...u,layer:g},{...n,config:tWe(i)})}}function rWe(e,t){return t?rv(e)?qee(e,t):Gee(e,t):e}function DT(e,t){return t?qee(e,t):e}function BF(e,t,n){const r=t[e];if(BHe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};we(PUe(r.repeat));return}return t}function Gee(e,t){if(e=BF("field",e,t),e!==void 0){if(e===null)return null;if(ER(e)&&Xl(e.sort)){const n=BF("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function E9(e,t){if(ke(e))return Gee(e,t);{const n=BF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function w9(e,t){if(ot(e)){const n=E9(e,t);if(n)return n;if(iv(e))return{condition:e.condition}}else{if(sv(e)){const n=E9(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function qee(e,t){const n={};for(const r in e)if(Ze(e,r)){const i=e[r];if(ge(i))n[r]=i.map(s=>w9(s,t)).filter(s=>s);else{const s=w9(i,t);s!==void 0&&(n[r]=s)}}return n}class iWe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(mc(t)){const{encoding:n,mark:r}=t;if(r==="line"||jo(r)&&r.type==="line")for(const i of iUe){const s=cd(i),a=n[s];if(n[i]&&(ke(a)&&!Er(a.bin)||al(a)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return we(rze(!!i.x2,!!i.y2)),r({...t,mark:$e(s)?{...s,type:"rule"}:"rule"},n)}}class sWe extends IR{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[oVe,uVe,xVe,new nWe,new iWe]}map(t,n){if(mc(t)){const r=lh(t.encoding,Gl),i=lh(t.encoding,ql),s=lh(t.encoding,Vw);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=DT(t.encoding,n.repeater),a={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(a,n.config))return l.run(a,n,o);return a}mapRepeat(t,n){return WVe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:a,column:o,layer:l}=r,{repeater:c={},repeaterPrefix:u=""}=n;return a||o?this.mapRepeat({...t,repeat:{...a?{row:a}:{},...o?{column:o}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(f=>{const h={...c,layer:f},d=`${(i.name?`${i.name}_`:"")+u}child__layer_${pn(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:h,repeaterPrefix:d});return p.name=d,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...a}=t;!ge(r)&&t.columns&&(t=qi(t,["columns"]),we(n9("repeat")));const o=[],{repeater:l={},repeaterPrefix:c=""}=n,u=!ge(r)&&r.row||[l?l.row:null],f=!ge(r)&&r.column||[l?l.column:null],h=ge(r)&&r||[l?l.repeat:null];for(const p of h)for(const g of u)for(const m of f){const x={repeat:p,row:g,column:m,layer:l.layer},v=(i.name?`${i.name}_`:"")+c+"child__"+(ge(r)?`${pn(p)}`:(r.row?`row_${pn(g)}`:"")+(r.column?`column_${pn(m)}`:"")),y=this.map(i,{...n,repeater:x,repeaterPrefix:v});y.name=v,o.push(qi(y,["data"]))}const d=ge(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...a,columns:d,concat:o}}mapFacet(t,n){const{facet:r}=t;return rv(r)&&t.columns&&(t=qi(t,["columns"]),we(n9("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:a,config:o}=n,l=A9({parentProjection:a,projection:i}),c=S9({parentEncoding:s,encoding:DT(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...c?{encoding:c}:{}},{config:o})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...a}=t.encoding,{mark:o,width:l,projection:c,height:u,view:f,params:h,encoding:d,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),x=DT(a,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...u?{height:u}:{},...f?{view:f}:{},...c?{projection:c}:{},mark:o,encoding:x,...h?{params:h}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&we(tze([...r?[Gl]:[],...i?[ql]:[]]));const a={},o={};for(const l of[Gl,ql]){const c=t[l];if(c){const{align:u,center:f,spacing:h,columns:d,...p}=c;a[l]=p;for(const g of["align","center","spacing"])c[g]!==void 0&&(o[g]??(o[g]={}),o[g][l]=c[g])}}return{facetMapping:a,layout:o}}else{const{align:a,center:o,spacing:l,columns:c,...u}=s;return{facetMapping:rWe(u,n.repeater),layout:{...a?{align:a}:{},...o?{center:o}:{},...l?{spacing:l}:{},...c?{columns:c}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:a,...o}=t,l={...i,parentEncoding:S9({parentEncoding:n,encoding:s,layer:!0}),parentProjection:A9({parentProjection:r,projection:a})};return super.mapLayer({...o,...t.name?{name:[l.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}},l)}}function S9({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ee(e),...Ee(t)]);for(const s of i){const a=t[s],o=e[s];if(ot(a)){const l={...o,...a};r[s]=l}else sv(a)?r[s]={...a,condition:{...o,...a.condition}}:a||a===null?r[s]=a:(n||Ka(o)||Ve(o)||ot(o)||ge(o))&&(r[s]=o)}}else r=t;return!r||en(r)?void 0:r}function A9(e){const{parentProjection:t,projection:n}=e;return t&&n&&we(WUe({parentProjection:t,projection:n})),n??t}function LR(e){return"filter"in e}function aWe(e){return(e==null?void 0:e.stop)!==void 0}function Xee(e){return"lookup"in e}function oWe(e){return"data"in e}function lWe(e){return"param"in e}function cWe(e){return"pivot"in e}function uWe(e){return"density"in e}function fWe(e){return"quantile"in e}function hWe(e){return"regression"in e}function dWe(e){return"loess"in e}function pWe(e){return"sample"in e}function gWe(e){return"window"in e}function mWe(e){return"joinaggregate"in e}function xWe(e){return"flatten"in e}function vWe(e){return"calculate"in e}function Yee(e){return"bin"in e}function yWe(e){return"impute"in e}function _We(e){return"timeUnit"in e}function bWe(e){return"aggregate"in e}function EWe(e){return"stack"in e}function wWe(e){return"fold"in e}function SWe(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function AWe(e){return e.map(t=>LR(t)?{filter:m0(t.filter,Kze)}:t)}class TWe extends IR{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=T9(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=T9(t,n),t.encoding){const r={};for(const[i,s]of Nu(t.encoding))r[i]=Kee(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Nu(r).map(([s,a])=>{const{init:o,bind:l,empty:c,...u}=a;u.type==="single"?(u.type="point",u.toggle=!1):u.type==="multi"&&(u.type="point"),n.emptySelections[s]=c!=="none";for(const f of Or(n.selectionPredicates[s]??{}))f.empty=c!=="none";return{name:s,value:o,select:u,bind:l}})}:t}}function T9(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(LR(s))return{filter:UF(s,t)};if(Yee(s)&&ud(s.bin))return{...s,bin:Jee(s.bin)};if(Xee(s)){const{selection:a,...o}=s.from;return a?{...s,from:{param:a,...o}}:s}return s});return{...r,transform:i}}return e}function Kee(e,t){var r,i;const n=at(e);if(ke(n)&&ud(n.bin)&&(n.bin=Jee(n.bin)),dd(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...a}=n.scale.domain;n.scale.domain={...a,...s?{param:s}:{}}}if(iv(n))if(ge(n.condition))n.condition=n.condition.map(s=>{const{selection:a,param:o,test:l,...c}=s;return o?s:{...c,test:UF(s,t)}});else{const{selection:s,param:a,test:o,...l}=Kee(n.condition,t);n.condition=a?n.condition:{...l,test:UF(n.condition,t)}}return n}function Jee(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function UF(e,t){const n=r=>m0(r,i=>{var s;const a=t.emptySelections[i]??!0,o={param:i,empty:a};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(o),o});return e.selection?n(e.selection):m0(e.test||e.filter,r=>r.selection?n(r.selection):r)}class zF extends IR{map(t,n){const r=n.selections??[];if(t.params&&!mc(t)){const i=[];for(const s of t.params)MR(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const a of r)if(!a.views||!a.views.length)s.push(a);else for(const o of a.views)(Le(o)&&(o===t.name||i.includes(o))||ge(o)&&o.map(l=>i.indexOf(l)).every((l,c,u)=>l!==-1&&(c===0||l>u[c-1])))&&s.push(a);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=zF.prototype[e];zF.prototype[e]=function(n,r){return t.call(this,n,kWe(n,r))}}function kWe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Zee(e,t){t===void 0&&(t=Vee(e.config));const n=NWe(e,t),{width:r,height:i}=e,s=DWe(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const CWe=new sWe,FWe=new TWe,OWe=new zF;function NWe(e,t={}){const n={config:t};return OWe.map(CWe.map(FWe.map(e,n),n),n)}function k9(e){return Le(e)?{type:e}:e??{}}function DWe(e,t,n){let{width:r,height:i}=t;const s=mc(e)||dS(e),a={};s?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(we(ZP("width")),r=void 0),i=="container"&&(we(ZP("height")),i=void 0));const o={type:"pad",...a,...n?k9(n.autosize):{},...k9(e.autosize)};if(o.type==="fit"&&!s&&(we(kUe),o.type="pad"),r=="container"&&!(o.type=="fit"||o.type=="fit-x")&&we(QP("width")),i=="container"&&!(o.type=="fit"||o.type=="fit-y")&&we(QP("height")),!vs(o,{type:"pad"}))return o}function MWe(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function RWe(e){return e?`fit-${Yw(e)}`:"fit"}const $We=["background","padding"];function C9(e,t){const n={};for(const r of $We)e&&e[r]!==void 0&&(n[r]=gs(e[r]));return t&&(n.params=e.params),n}class xc{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new xc(at(this.explicit),at(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Rn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ee(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function _o(e){return{explicit:!0,value:e}}function ls(e){return{explicit:!1,value:e}}function Qee(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:pS(t,n,r,i)}}function pS(e,t,n,r){return e.explicit&&t.explicit&&we(dze(n,r,e.value,t.value)),e}function Ru(e,t,n,r,i=pS){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:vs(e.value,t.value)?e:i(e,t,n,r)}class IWe extends xc{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function xp(e){return"url"in e}function j1(e){return"values"in e}function ete(e){return"name"in e&&!xp(e)&&!j1(e)&&!cu(e)}function cu(e){return e&&(tte(e)||nte(e)||PR(e))}function tte(e){return"sequence"in e}function nte(e){return"sphere"in e}function PR(e){return"graticule"in e}var Tn;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Tn||(Tn={}));function rte({invalid:e,isPath:t}){switch(ZQ(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function LWe(e){const{marks:t,scales:n}=rte(e);return t===n?Tn.Main:n==="include-invalid-values"?Tn.PreFilterInvalid:Tn.PostFilterInvalid}function ite(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=ha(i.field),i}function Uh(e,t=!0,n=oi){if(ge(e)){const r=e.map(i=>Uh(i,t,n));return t?`[${r.join(", ")}]`:r}else if(fd(e))return n(t?Ih(e):Pze(e));return t?n(tn(e)):e}function PWe(e,t){for(const n of Or(e.component.selection??{})){const r=n.name;let i=`${r}${Iu}, ${n.resolve==="global"?"true":`{unit: ${ch(e)}}`}`;for(const s of vS)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+pje,on:[{events:{signal:n.name+Iu},update:`modify(${Ce(n.name+zh)}, ${i})`}]})}return BR(t)}function BWe(e,t){if(e.component.selection&&Ee(e.component.selection).length){const n=Ce(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Qu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return BR(t)}function UWe(e,t){let n=!1;for(const r of Or(e.component.selection??{})){const i=r.name,s=Ce(i+zh);if(t.filter(o=>o.name===i).length===0){const o=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Ete}(${s}, ${Ce(o)}${l}`})}n=!0;for(const o of vS)o.defined(r)&&o.topLevelSignals&&(t=o.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),BR(t)}function zWe(e,t){const n=[...t],r=ch(e,{escape:!1});for(const i of Or(e.component.selection??{})){const s={name:i.name+zh};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Za}}]),i.init){const o=i.project.items.map(ite);s.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[Za]:Uh(l,!1)[0]})):i.init.map(l=>({unit:r,fields:o,values:Uh(l,!1)}))}n.filter(o=>o.name===i.name+zh).length||n.push(s)}return n}function ste(e,t){for(const n of Or(e.component.selection??{}))for(const r of vS)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function HWe(e,t){for(const n of e.children)_n(n)&&(t=ste(n,t));return t}function VWe(e,t,n,r){const i=kte(e,t.param,t);return{signal:Ya(n.get("type"))&&ge(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function BR(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Zt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){we(zUe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Xi extends Zt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${ZZ()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function MT(e){return e.as!==void 0}function F9(e){return`${e}_end`}class Ro extends Zt{clone(){return new Ro(null,at(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,a)=>{const{field:o,timeUnit:l}=s;if(l){let c;if(hd(l)){if(_n(n)){const{mark:u,markDef:f,config:h}=n,d=Mu({fieldDef:s,markDef:f,config:h});(W1(u)||d)&&(c={timeUnit:mr(l),field:o})}}else c={as:Me(s,{forAs:!0}),field:o,timeUnit:l};if(_n(n)){const{mark:u,markDef:f,config:h}=n,d=Mu({fieldDef:s,markDef:f,config:h});W1(u)&&$n(a)&&d!==.5&&(c.rectBandPosition=d)}c&&(i[St(c)]=c)}return i},{});return en(r)?null:new Ro(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=mr(r),a={...i,timeUnit:s};return new Ro(t,{[St(a)]:a})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Nu(this.timeUnits)){const s=MT(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Or(this.timeUnits).map(t=>MT(t)?t.as:F9(t.field)))}dependentFields(){return new Set(Or(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${St(this.timeUnits)}`}assemble(){const t=[];for(const n of Or(this.timeUnits)){const{rectBandPosition:r}=n,i=mr(n.timeUnit);if(MT(n)){const{field:s,as:a}=n,{unit:o,utc:l,...c}=i,u=[a,`${a}_end`];t.push({field:ha(s),type:"timeunit",...o?{units:Qw(o)}:{},...l?{timezone:"utc"}:{},...c,as:u}),t.push(...O9(u,r,i))}else if(n){const{field:s}=n,a=s.replaceAll("\\.","."),o=ate({timeUnit:i,field:a}),l=F9(a);t.push({type:"formula",expr:o,as:l}),t.push(...O9([a,l],r,i))}}return t}}const gS="offsetted_rect_start",mS="offsetted_rect_end";function ate({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=MQ(r),{part:a,step:o}=LQ(s,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-o:o})`}function O9([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:N9([ate({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${gS}`},{type:"formula",expr:N9([i,s],n+.5),as:`${e}_${mS}`}]}return[]}function N9([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const lv="_tuple_fields";class WWe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const jWe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new WWe),s={},a={},o=new Set,l=(p,g)=>{const m=g==="visual"?p.channel:p.field;let x=pn(`${r}_${m}`);for(let v=1;o.has(x);v++)x=pn(`${r}_${m}_${v}`);return o.add(x),{[g]:x}},c=t.type,u=e.config.selection[c],f=n.value!==void 0?Ie(n.value):null;let{fields:h,encodings:d}=$e(n.select)?n.select:{};if(!h&&!d&&f){for(const p of f)if($e(p))for(const g of Ee(p))rUe(g)?(d||(d=[])).push(g):c==="interval"?(we(LUe),d=u.encodings):(h??(h=[])).push(g)}!h&&!d&&(d=u.encodings,"fields"in u&&(h=u.fields));for(const p of d??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){we(CUe(p,g.aggregate));continue}else if(!m){we(t9(p));continue}if(g.timeUnit&&!hd(g.timeUnit)){m=e.vgField(p);const x={timeUnit:g.timeUnit,as:m,field:g.field};a[St(x)]=x}if(!s[m]){const x=c==="interval"&&sl(p)&&Ya(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:x,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(s[m]=v),i.hasField[m]=s[m],i.hasSelectionId=i.hasSelectionId||m===Za,iQ(p)?(v.geoChannel=p,v.channel=rQ(p),i.hasChannel[v.channel]=s[m]):i.hasChannel[p]=s[m]}}else we(t9(p))}for(const p of h??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===Za}f&&(t.init=f.map(p=>i.items.map(g=>$e(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),en(a)||(i.timeUnit=new Ro(null,a))},signals:(e,t,n)=>{const r=t.name+lv;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(ite)})}},Yl={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!sl(i))continue;const s=e.getScaleComponent(i),a=s?s.get("type"):void 0;if(a=="sequential"&&we(DUe),!s||!Ya(a)){we(NUe);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(a=>n.filter(o=>o.name===a.signals.data).length===0);if(!e.parent||D9(e)||r.length===0)return n;const i=n.find(a=>a.name===t.name);let s=i.update;if(s.includes(Ete))i.update=`{${r.map(a=>`${Ce(ha(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of r){const o=`${Ce(ha(a.field))}: ${a.signals.data}`;s.includes(o)||(s=`${s.substring(0,s.length-1)}, ${o}}`)}i.update=s}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!D9(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function HF(e,t){return`domain(${Ce(e.scaleName(t))})`}function D9(e){return e.parent&&tg(e.parent)&&!e.parent.parent}const y0="_brush",ote="_scale_trigger",Dg="geo_interval_init_tick",lte="_init",GWe="_center",qWe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...$e(n.select)?n.select:{}};i.fields=[Za],i.encodings||(i.encodings=n.value?Ee(n.value):[lo,oo]),n.select={type:"interval",...i}}if(t.translate&&!Yl.defined(t)){const i=`!event.item || event.item.mark.name !== ${Ce(t.name+y0)}`;for(const s of t.events){if(!s.between){we(`${s} is not an ordered event stream for interval selections.`);continue}const a=Ie((r=s.between[0]).filter??(r.filter=[]));a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Iu,s=Or(t.project.hasChannel).filter(o=>o.channel===mn||o.channel===_r),a=t.init?t.init[0]:null;if(n.push(...s.reduce((o,l)=>o.concat(XWe(e,t,l,a&&a[l.index])),[])),e.hasProjection){const o=Ce(e.projectionName()),l=e.projectionName()+GWe,{x:c,y:u}=t.project.hasChannel,f=c&&c.signals.visual,h=u&&u.signals.visual,d=c?a&&a[c.index]:`${l}[0]`,p=u?a&&a[u.index]:`${l}[1]`,g=b=>e.getSizeSignalRef(b).signal,m=`[[${f?f+"[0]":"0"}, ${h?h+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${h?h+"[1]":g("height")}]]`;a&&(n.unshift({name:r+lte,init:`[scale(${o}, [${c?d[0]:d}, ${u?p[0]:p}]), scale(${o}, [${c?d[1]:d}, ${u?p[1]:p}])]`}),(!c||!u)&&(n.find(w=>w.name===l)||n.unshift({name:l,update:`invert(${o}, [${g("width")}/2, ${g("height")}/2])`})));const x=`intersect(${m}, {markname: ${Ce(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${ch(e)}}`,y=`vlSelectionTuples(${x}, ${v})`,_=s.map(b=>b.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...a?[{signal:Dg}]:[]],update:y}]})}else{if(!Yl.defined(t)){const c=r+ote,u=s.map(f=>{const h=f.channel,{data:d,visual:p}=f.signals,g=Ce(e.scaleName(h)),m=e.getScaleComponent(h).get("type"),x=Ya(m)?"+":"";return`(!isArray(${d}) || (${x}invert(${g}, ${p})[0] === ${x}${d}[0] && ${x}invert(${g}, ${p})[1] === ${x}${d}[1]))`});u.length&&n.push({name:c,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${c} : {}`}]})}const o=s.map(c=>c.signals.data),l=`unit: ${ch(e)}, fields: ${r+lv}, values`;return n.concat({name:i,...a?{init:`{${l}: ${Uh(a)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${l}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(_n(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Dg).length||n.unshift({name:Dg,value:null,on:[{events:"timer{1}",update:`${Dg} === null ? {} : ${Dg}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,a=i==null?void 0:i.signals.visual,o=s==null?void 0:s.signals.visual,l=`data(${Ce(t.name+zh)})`;if(Yl.defined(t)||!i&&!s)return n;const c={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${o}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of Ee(c))c[m]=[{test:`${l}.length && ${l}[0].unit === ${ch(e)}`,...c[m]},{value:0}];const{fill:u,fillOpacity:f,cursor:h,...d}=t.mark,p=Ee(d).reduce((m,x)=>(m[x]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${o}[0] !== ${o}[1]`].filter(v=>v).join(" && "),value:d[x]},{value:null}],m),{}),g=h??(t.translate?"move":null);return[{name:`${r+y0}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:c}},...n,{name:r+y0,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...c,...p}}}]}};function XWe(e,t,n,r){const i=!e.hasProjection,s=n.channel,a=n.signals.visual,o=Ce(i?e.scaleName(s):e.projectionName()),l=h=>`scale(${o}, ${h})`,c=e.getSizeSignalRef(s===mn?"width":"height").signal,u=`${s}(unit)`,f=t.events.reduce((h,d)=>[...h,{events:d.between[0],update:`[${u}, ${u}]`},{events:d,update:`[${a}[0], clamp(${u}, 0, ${c})]`}],[]);if(i){const h=n.signals.data,d=Yl.defined(t),p=e.getScaleComponent(s),g=p?p.get("type"):void 0,m=r?{init:Uh(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+ote},update:Ya(g)?`[${l(`${h}[0]`)}, ${l(`${h}[1]`)}]`:"[0, 0]"}),d?[{name:h,on:[]}]:[{name:a,...m,on:f},{name:h,...r?{init:Uh(r)}:{},on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${o}, ${a})`}]}]}else{const h=s===mn?0:1,d=t.name+lte,p=r?{init:`[${d}[0][${h}], ${d}[1][${h}]]`}:{value:[]};return[{name:a,...p,on:f}]}}const YWe={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+lv,s=t.project,a="(item().isVoronoi ? datum.datum : datum)",o=Or(e.component.selection??{}).reduce((f,h)=>h.type==="interval"?f.concat(h.name+y0):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let c=`unit: ${ch(e)}, `;if(t.project.hasSelectionId)c+=`${Za}: ${a}[${Ce(Za)}]`;else{const f=s.items.map(h=>{const d=e.fieldDef(h.channel);return d!=null&&d.bin?`[${a}[${Ce(e.vgField(h.channel,{}))}], ${a}[${Ce(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${a}[${Ce(h.field)}]`}).join(", ");c+=`fields: ${i}, values: [${f}]`}const u=t.events;return n.concat([{name:r+Iu,on:u?[{events:u,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}};function Jp({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=iv(t)&&t.condition;let a=[];s&&(a=Ie(s).map(c=>{const u=i(c);if(PHe(c)){const{param:f,empty:h}=c;return{test:Tte(e,{param:f,empty:h}),...u}}else return{test:Ib(e,c.test),...u}})),r!==void 0&&a.push(r);const o=i(t);return o!==void 0&&a.push(o),a.length>1||a.length===1&&a[0].test?{[n]:a}:a.length===1?{[n]:a[0]}:{}}function UR(e,t="text"){const n=e.encoding[t];return Jp({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>xS(r,e.config),invalidValueRef:void 0})}function xS(e,t,n="datum"){if(e){if(Ka(e))return an(e.value);if(ot(e)){const{format:r,formatType:i}=Fb(e);return _R({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function cte(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,a=n.tooltip;if(ge(a))return{tooltip:M9({tooltip:a},s,i,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Jp({model:e,channelDef:a,vgChannel:"tooltip",mainRefFn:c=>{const u=xS(c,i,o);if(u)return u;if(c===null)return;let f=Kt("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Le(f))return{value:f};if($e(f))return Ve(f)?f:f.content==="encoding"?M9(n,s,i,t):{signal:o}},invalidValueRef:void 0})}}function ute(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},a=r?"datum.datum":"datum",o=[];function l(u,f){const h=cd(f),d=Ni(u)?u:{...u,type:e[h].type},p=d.title||SR(d,i),g=Ie(p).join(", ").replaceAll(/"/g,'\\"');let m;if($n(f)){const x=f==="x"?"x2":"y2",v=Ja(e[x]);if(Er(d.bin)&&v){const y=Me(d,{expr:a}),_=Me(v,{expr:a}),{format:b,formatType:w}=Fb(d);m=nv(y,_,b,w,i),s[x]=!0}}if(($n(f)||f===va||f===ao)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:x,formatType:v}=Fb(d);m=_R({fieldOrDatumDef:d,format:x,formatType:v,expr:a,config:i,normalizeStack:!0}).signal}m??(m=xS(d,i,a).signal),o.push({channel:f,key:g,value:m})}TR(e,(u,f)=>{ke(u)?l(u,f):oS(u)&&l(u.condition,f)});const c={};for(const{channel:u,key:f,value:h}of o)!s[u]&&!c[f]&&(c[f]=h);return c}function M9(e,t,n,{reactiveGeom:r}={}){const i=ute(e,t,n,{reactiveGeom:r}),s=Nu(i).map(([a,o])=>`"${a}": ${o}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function KWe(e){const{markDef:t,config:n}=e,r=Kt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...JWe(e),...ZWe(e)}}function JWe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Kt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in AUe?{}:{ariaRoleDescription:{value:t}}}function ZWe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return Jp({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>xS(l,e.config),invalidValueRef:void 0});const a=Kt("description",n,r);if(a!=null)return{description:an(a)};if(r.aria===!1)return{};const o=ute(t,i,r);if(!en(o))return{description:{signal:Nu(o).map(([l,c],u)=>`"${u>0?"; ":""}${l}: " + (${c})`).join(" + ")}}}function ur(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:a}=n;let{defaultRef:o,defaultValue:l}=n;const c=i[e];o===void 0&&(l??(l=Kt(e,r,s,{vgChannel:a,ignoreVgConfig:!iv(c)})),l!==void 0&&(o=an(l)));const u={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=eee({...u,scaleChannel:e,channelDef:c});return Jp({model:t,channelDef:c,vgChannel:a??e,invalidValueRef:f,mainRefFn:d=>yR({...u,channel:e,channelDef:d,stack:null,defaultRef:o})})}function fte(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,a=t.filled??Kt("filled",n,i),o=bt(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Kt(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??o,c=Kt(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],u=a?"fill":"stroke",f={...l?{fill:an(l)}:{},...c?{stroke:an(c)}:{}};return n.color&&(a?n.fill:n.stroke)&&we(SQ("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...ur("color",e,{vgChannel:u,defaultValue:a?l:c}),...ur("fill",e,{defaultValue:r.fill?l:void 0}),...ur("stroke",e,{defaultValue:r.stroke?c:void 0})}}function QWe(e){const{encoding:t,mark:n}=e,r=t.order;return!lf(n)&&Ka(r)?Jp({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>an(i.value),invalidValueRef:void 0}):{}}function vp({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,a=t[s],o=n[s];if((s==="xOffset"||s==="yOffset")&&o)return{offsetType:"encoding",offset:yR({channel:s,channelDef:o,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:an(a),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function Zr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:a,stack:o}=t,l=i[e],c=i[il(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:h,offsetType:d}=vp({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=zR({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),g=!l&&$n(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:eje({channel:e,channelDef:l,channel2Def:c,markDef:s,config:a,scaleName:u,scale:f,stack:o,offset:h,defaultRef:p,bandPosition:d==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function eje(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:a}=e;if(ot(n)&&i&&t===i.fieldChannel){if(ke(n)){let o=n.bandPosition;if(o===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return Tb({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:s})}return oh(n,r,{suffix:"end"},{offset:s})}return vR(e)}function zR({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:a}=e;return()=>{const o=cd(n),l=Du(n),c=Kt(n,s,a,{vgChannel:l});if(c!==void 0)return Gm(n,c);switch(t){case"zeroOrMin":return R9({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:o,config:a});case"zeroOrMax":return R9({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:a});case"mid":return{...e[ns(n)],mult:.5}}}}function R9({mainChannel:e,config:t,...n}){const r=QQ(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:a}=i.zeroOrMax;return{signal:`min(${s},${a})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const tje={left:"x",center:"xc",right:"x2"},nje={top:"y",middle:"yc",bottom:"y2"};function hte(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Du(e);const i=e==="x"?"align":"baseline",s=Kt(i,t,n);let a;return Ve(s)?(we(nze(i)),a=void 0):a=s,e==="x"?tje[a||(r==="top"?"left":"center")]:nje[a||r]}function Rb(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?dte(e,t,{defaultPos:n,defaultPos2:r}):Zr(e,t,{defaultPos:n})}function dte(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,a=il(e),o=ns(e),l=rje(t,r,a),c=l[o]?hte(e,i,s):Du(e);return{...Zr(e,t,{defaultPos:n,vgChannel:c}),...l}}function rje(e,t,n){const{encoding:r,mark:i,markDef:s,stack:a,config:o}=e,l=cd(n),c=ns(n),u=Du(n),f=r[l],h=e.scaleName(l),d=e.getScaleComponent(l),{offset:p}=n in r||n in s?vp({channel:n,markDef:s,encoding:r,model:e}):vp({channel:l,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=ns(n),x=e.markDef[m];return x!=null?{[m]:{value:x}}:{[u]:{field:e.getName(n)}}}const g=ije({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:o,scaleName:h,scale:d,stack:a,offset:p,defaultRef:void 0});return g!==void 0?{[u]:g}:wy(n,s)||wy(n,{[n]:wb(n,s,o.style),[c]:wb(c,s,o.style)})||wy(n,o[i])||wy(n,o.mark)||{[u]:zR({model:e,defaultPos:t,channel:n,scaleName:h,scale:d})()}}function ije({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:a,stack:o,offset:l,defaultRef:c}){return ot(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?oh(t,s,{suffix:"start"},{offset:l}):vR({channel:e,channelDef:n,scaleName:s,scale:a,stack:o,markDef:r,config:i,offset:l,defaultRef:c})}function wy(e,t){const n=ns(e),r=Du(e);if(t[r]!==void 0)return{[r]:Gm(e,t[r])};if(t[e]!==void 0)return{[r]:Gm(e,t[e])};if(t[n]){const i=t[n];if(Ph(i))we(KUe(n));else return{[n]:Gm(e,i)}}}function $u(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,a=il(t),o=ns(t),l=r[t],c=r[a],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,h=i.orient,d=r[o]??r.size??Kt("size",i,n,{vgChannel:o}),p=lQ(t),g=s==="bar"&&(t==="x"?h==="vertical":h==="horizontal");return ke(l)&&(on(l.bin)||Er(l.bin)||l.timeUnit&&!c)&&!(d&&!Ph(d))&&!r[p]&&!xr(f)?oje({fieldDef:l,fieldDef2:c,channel:t,model:e}):(ot(l)&&xr(f)||g)&&!c?aje(l,t,e):dte(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function sje(e,t,n,r,i,s,a){if(Ph(i))if(n){const l=n.get("type");if(l==="band"){let c=`bandwidth('${t}')`;i.band!==1&&(c=`${i.band} * ${c}`);const u=Wo("minBandSize",{type:a},r);return{signal:u?`max(${La(u)}, ${c})`:c}}else i.band!==1&&(we(aze(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Ve(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(of(l)&&$t(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:c,rectBandPaddingInner:u}=r.scale,f=Rn(l,a==="bar"?c:u);if(Ve(f))return{signal:`(1 - (${f.signal})) * ${e}`};if($t(f))return{signal:`${1-f} * ${e}`}}return{value:Db(r.view,e)-2}}function aje(e,t,n){var S,k;const{markDef:r,encoding:i,config:s,stack:a}=n,o=r.orient,l=n.scaleName(t),c=n.getScaleComponent(t),u=ns(t),f=il(t),h=lQ(t),d=n.scaleName(h),p=n.getScaleComponent(Xw(t)),g=o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=ur("size",n,{vgChannel:u,defaultRef:an(r.size)}):we(uze(r.type)));const x=!!m,v=oee({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(S=c||p)==null?void 0:S.get("type"),useVlSizeChannel:g});m=m||{[u]:sje(u,d||l,p||c,s,v,!!e,r.type)};const y=((k=c||p)==null?void 0:k.get("type"))==="band"&&Ph(v)&&!x?"top":"middle",_=hte(t,r,s,y),b=_==="xc"||_==="yc",{offset:w,offsetType:E}=vp({channel:t,markDef:r,encoding:i,model:n,bandPosition:b?.5:0}),A=vR({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:c,stack:a,offset:w,defaultRef:zR({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:c}),bandPosition:b?E==="encoding"?0:.5:Ve(v)?{signal:`(1-${v})/2`}:Ph(v)?(1-v.band)/2:0});if(u)return{[_]:A,...m};{const T=Du(f),O=m[u],C=w?{...O,offset:w}:O;return{[_]:A,[T]:ge(A)?[A[0],{...A[1],offset:C}]:{...A,offset:C}}}}function $9(e,t,n,r,i,s,a){if(nQ(e))return 0;const o=e==="x"||e==="y2",l=o?-t/2:t/2;if(Ve(n)||Ve(i)||Ve(r)||s){const c=La(n),u=La(i),f=La(r),h=La(s),p=s?`(${a} < ${h} ? ${o?"":"-"}0.5 * (${h} - (${a})) : ${l})`:l,g=f?`${f} + `:"",m=c?`(${c} ? -1 : 1) * `:"",x=u?`(${u} + ${p})`:p;return{signal:g+m+x}}else return i=i||0,r+(n?-i-l:+i+l)}function oje({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:a}=r,o=r.getScaleComponent(n),l=r.scaleName(n),c=o?o.get("type"):void 0,u=o.get("reverse"),f=oee({channel:n,fieldDef:e,markDef:s,config:i,scaleType:c}),h=(k=r.component.axes[n])==null?void 0:k[0],d=(h==null?void 0:h.get("translate"))??.5,p=$n(n)?Kt("binSpacing",s,i)??0:0,g=il(n),m=Du(n),x=Du(g),v=Wo("minBandSize",s,i),{offset:y}=vp({channel:n,markDef:s,encoding:a,model:r,bandPosition:0}),{offset:_}=vp({channel:g,markDef:s,encoding:a,model:r,bandPosition:0}),b=DHe({fieldDef:e,scaleName:l}),w=$9(n,p,u,d,y,v,b),E=$9(g,p,u,d,_??y,v,b),A=Ve(f)?{signal:`(1-${f.signal})/2`}:Ph(f)?(1-f.band)/2:.5,S=Mu({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(on(e.bin)||e.timeUnit){const T=e.timeUnit&&S!==.5;return{[x]:I9({fieldDef:e,scaleName:l,bandPosition:A,offset:E,useRectOffsetField:T}),[m]:I9({fieldDef:e,scaleName:l,bandPosition:Ve(A)?{signal:`1-${A.signal}`}:1-A,offset:w,useRectOffsetField:T})}}else if(Er(e.bin)){const T=oh(e,l,{},{offset:E});if(ke(t))return{[x]:T,[m]:oh(t,l,{},{offset:w})};if(ud(e.bin)&&e.bin.step)return{[x]:T,[m]:{signal:`scale("${l}", ${Me(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}we(kQ(g))}function I9({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Tb({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:gS,endSuffix:mS}:{}})}const lje=new Set(["aria","width","height"]);function ya(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?fte(e):{};return{...cje(e.markDef,t),...L9("fill",n),...L9("stroke",r),...ur("opacity",e),...ur("fillOpacity",e),...ur("strokeOpacity",e),...ur("strokeWidth",e),...ur("strokeDash",e),...QWe(e),...cte(e),...UR(e,"href"),...KWe(e)}}function L9(e,t){return t?{[e]:t}:{}}function cje(e,t){return SUe.reduce((n,r)=>(!lje.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=an(e[r])),n),{})}function HR(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var c;let a;if(!sl(s)||!(a=e.getScaleType(s)))return;const o=Kw(i.aggregate),l=xR({scaleChannel:s,markDef:n,config:t,scaleType:a,isCountAggregate:o});if(FHe(l)){const u=e.vgField(s,{expr:"datum",binSuffix:(c=e.stack)!=null&&c.impute?"mid":void 0});u&&r.add(u)}}),r.size>0)return{defined:{signal:[...r].map(s=>eS(s,!0)).join(" && ")}}}function P9(e,t){if(t!==void 0)return{[e]:an(t)}}const RT="voronoi",pte={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(RT)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(lf(s))return we(FUe(s)),n;const a={name:e.getName(RT),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...cte(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((c,u)=>{const f=c.name??"";f===e.component.mark[0].name?o=u:f.includes(RT)&&(l=!0)}),l||n.splice(o+1,0,a),n}},gte={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!DR(e.bind),parse:(e,t,n)=>wte(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,a=t.init&&t.init[0],o=pte.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,c)=>{const u=pn(`${r}_${l.field}`);n.filter(h=>h.name===u).length||n.unshift({name:u,...a?{init:Uh(a[c])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${Ce(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(c=>c.name===r+Iu),a=r+lv,o=i.items.map(c=>pn(`${r}_${c.field}`)),l=o.map(c=>`${c} !== null`).join(" && ");return o.length&&(s.update=`${l} ? {fields: ${a}, values: [${o.join(", ")}]} : null`),delete s.value,delete s.on,n}},$b="_toggle",mte={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+$b,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Iu,r=t.name+$b;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${ch(e)}}, `)+`${r} ? ${n} : null`}},uje={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Le(t.clear)?Qu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(gte.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===pn(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(a=>a.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const a=n.findIndex(o=>o.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Iu);r(i,"null"),mte.defined(t)&&(i=n.findIndex(s=>s.name===t.name+$b),r(i,"false"))}return n}},xte={defined:e=>{const t=e.resolve==="global"&&e.bind&&DR(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Za;return t&&!n&&we(MUe),t&&n},parse:(e,t,n)=>{const r=at(n);if(r.select=Le(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},wte(t,r),$e(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=Ie(o.filter??[]),o.filter.includes(a)||o.filter.push(a)}const i=OT(t.bind)?t.bind.legend:"click",s=Le(i)?Qu(i,"view"):Ie(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=OT(t.bind)&&t.bind.legend,s=a=>o=>{const l=at(o);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const o=`${pn(a.field)}_legend`,l=`${r}_${o}`;if(n.filter(u=>u.name===l).length===0){const u=i.merge.map(s(`${o}_symbols`)).concat(i.merge.map(s(`${o}_labels`))).concat(i.merge.map(s(`${o}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(h=>h.name===r+Iu),a=r+lv,o=i.items.filter(h=>h.hasLegend).map(h=>pn(`${r}_${pn(h.field)}_legend`)),c=`${o.map(h=>`${h} !== null`).join(" && ")} ? {fields: ${a}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?s.on.push({events:o.map(h=>({signal:h})),update:c}):o.length>0&&(s.update=c,delete s.value,delete s.on);const u=n.find(h=>h.name===r+$b),f=OT(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push({...u.on[0],events:f}):u.on[0].events=f),n}};function fje(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Or(e.component.selection??{})){const a=s.project.hasField[r]??s.project.hasChannel[t];if(a&&xte.defined(s)){const o=n.get("selections")??[];o.push(s.name),n.set("selections",o,!1),a.hasLegend=!0}}}const vte="_translate_anchor",yte="_translate_delta",hje={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Yl.defined(t),s=r+vte,{x:a,y:o}=t.project.hasChannel;let l=Qu(t.translate,"scope");return i||(l=l.map(c=>(c.between[0].markname=r+y0,c))),n.push({name:s,value:{},on:[{events:l.map(c=>c.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?HF(e,mn):`slice(${a.signals.visual})`}`:"")+(o!==void 0?`, extent_y: ${i?HF(e,_r):`slice(${o.signals.visual})`}`:"")+"}"}]},{name:r+yte,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&B9(e,t,a,"width",n),o!==void 0&&B9(e,t,o,"height",n),n}};function B9(e,t,n,r,i){const s=t.name,a=s+vte,o=s+yte,l=n.channel,c=Yl.defined(t),u=i.find(b=>b.name===n.signals[c?"data":"visual"]),f=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(l),d=h&&h.get("type"),p=h&&h.get("reverse"),g=c?l===mn?p?"":"-":p?"-":"":"",m=`${a}.extent_${l}`,x=`${g}${o}.${l} / ${c?`${f}`:`span(${m})`}`,v=!c||!h?"panLinear":d==="log"?"panLog":d==="symlog"?"panSymlog":d==="pow"?"panPow":"panLinear",y=c?d==="pow"?`, ${h.get("exponent")??1}`:d==="symlog"?`, ${h.get("constant")??1}`:"":"",_=`${v}(${m}, ${x}${y})`;u.on.push({events:{signal:o},update:c?_:`clampRange(${_}, 0, ${f})`})}const _te="_zoom_anchor",bte="_zoom_delta",dje={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Yl.defined(t),s=r+bte,{x:a,y:o}=t.project.hasChannel,l=Ce(e.scaleName(mn)),c=Ce(e.scaleName(_r));let u=Qu(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+y0,f))),n.push({name:r+_te,on:[{events:u,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&U9(e,t,a,"width",n),o!==void 0&&U9(e,t,o,"height",n),n}};function U9(e,t,n,r,i){const s=t.name,a=n.channel,o=Yl.defined(t),l=i.find(v=>v.name===n.signals[o?"data":"visual"]),c=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(a),f=u&&u.get("type"),h=o?HF(e,a):l.name,d=s+bte,p=`${s}${_te}.${a}`,g=!o||!u?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=o?f==="pow"?`, ${u.get("exponent")??1}`:f==="symlog"?`, ${u.get("constant")??1}`:"":"",x=`${g}(${h}, ${p}, ${d}${m})`;l.on.push({events:{signal:d},update:o?x:`clampRange(${x}, 0, ${c})`})}const zh="_store",Iu="_tuple",pje="_modify",Ete="vlSelectionResolve",vS=[YWe,qWe,jWe,mte,gte,Yl,xte,uje,hje,dje,pte];function gje(e){let t=e.parent;for(;t&&!ws(t);)t=t.parent;return t}function ch(e,{escape:t}={escape:!0}){let n=t?Ce(e.name):e.name;const r=gje(e);if(r){const{facet:i}=r;for(const s of ea)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Ce(r.vgField(s))}])`)}return n}function VR(e){return Or(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function wte(e,t){(Le(t.select)||!t.select.on)&&delete e.events,(Le(t.select)||!t.select.clear)&&delete e.clear,(Le(t.select)||!t.select.toggle)&&delete e.toggle}function VF(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...VF(e.object)),t.push(...VF(e.property))),t)}function Ste(e){return e.object.type==="MemberExpression"?Ste(e.object):e.object.name==="datum"}function Ate(e){const t=fM(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Ste(r)&&n.add(VF(r).slice(1).join("."))}),n}class Zp extends Zt{clone(){return new Zp(null,this.model,at(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=Ib(this.model,this.filter,this),this._dependentFields=Ate(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function mje(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=pn(i.name),a=i.select,o=Le(a)?a:a.type,l=$e(a)?at(a):{type:o},c=r[o];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l[h]={...c[h],...l[h]}),(l[h]===void 0||l[h]===!0)&&(l[h]=at(c[h]??l[h])));const u=n[s]={...l,name:s,type:o,init:i.value,bind:i.bind,events:Le(l.on)?Qu(l.on,"scope"):Ie(at(l.on))},f=at(i);for(const h of vS)h.defined(u)&&h.parse&&h.parse(e,u,f)}return n}function Tte(e,t,n,r="datum"){const i=Le(t)?t:t.param,s=pn(i),a=Ce(s+zh);let o;try{o=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(o.project.timeUnit){const h=n??e.component.data.raw,d=o.project.timeUnit.clone();h.parent?d.insertAsParentOf(h):h.parent=d}const l=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",c=o.resolve==="global"?")":`, ${Ce(o.resolve)})`,u=`${l}${a}, ${r}${c}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${u}`:`!${f} || ${u}`}function kte(e,t,n){const r=pn(t),i=n.encoding;let s=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=a.project.items[0].field,a.project.items.length>1&&we(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Ce(s)}.`);else if(i&&!s){const o=a.project.items.filter(l=>l.channel===i);!o.length||o.length>1?(s=a.project.items[0].field,we((o.length?"Multiple ":"No ")+`matching ${Ce(i)} encoding found for selection ${Ce(n.param)}. Using "field": ${Ce(s)}.`)):s=o[0].field}return`${a.name}[${Ce(ha(s))}]`}function xje(e,t){for(const[n,r]of Nu(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Xi(new Zp(t,e,{param:n}),i,Tn.Lookup,e.component.data.outputNodeRefCounts)}}function Ib(e,t,n){return jm(t,r=>Le(r)?r:qze(r)?Tte(e,r,n):BQ(r))}function vje(e,t){if(e)return ge(e)&&!Pc(e)?e.map(n=>SR(n,t)).join(", "):e}function $T(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function um(e,t,n,r={header:!1}){var f,h;const{disable:i,orient:s,scale:a,labelExpr:o,title:l,zindex:c,...u}=e.combine();if(!i){for(const d in u){const p=ZHe[d],g=u[d];if(p&&p!==t&&p!=="both")delete u[d];else if(ov(g)){const{condition:m,...x}=g,v=Ie(m),y=d9[d];if(y){const{vgProp:_,part:b}=y,w=[...v.map(E=>{const{test:A,...S}=E;return{test:Ib(null,A),...S}}),x];$T(u,b,_,w),delete u[d]}else if(y===null){const _={signal:v.map(b=>{const{test:w,...E}=b;return`${Ib(null,w)} ? ${JP(E)} : `}).join("")+JP(x)};u[d]=_}}else if(Ve(g)){const m=d9[d];if(m){const{vgProp:x,part:v}=m;$T(u,v,x,g),delete u[d]}}bt(["labelAlign","labelBaseline"],d)&&u[d]===null&&delete u[d]}if(t==="grid"){if(!u.grid)return;if(u.encode){const{grid:d}=u.encode;u.encode={...d?{grid:d}:{}},en(u.encode)&&delete u.encode}return{scale:a,orient:s,...u,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Rn(c,0)}}else{if(!r.header&&e.mainExtracted)return;if(o!==void 0){let p=o;(h=(f=u.encode)==null?void 0:f.labels)!=null&&h.update&&Ve(u.encode.labels.update.text)&&(p=Rh(o,"datum.label",u.encode.labels.update.text.signal)),$T(u,"labels","text",{signal:p})}if(u.labelAlign===null&&delete u.labelAlign,u.encode){for(const p of xee)e.hasAxisPart(p)||delete u.encode[p];en(u.encode)&&delete u.encode}const d=vje(l,n);return{scale:a,orient:s,grid:!1,...d?{title:d}:{},...u,...n.aria===!1?{aria:!1}:{},zindex:Rn(c,0)}}}}function Cte(e){const{axes:t}=e.component,n=[];for(const r of gc)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",a=e.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function yje(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>um(i,"grid",t)),...r.map(i=>um(i,"grid",t)),...n.map(i=>um(i,"main",t)),...r.map(i=>um(i,"main",t))].filter(i=>i)}function z9(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...Ee(a),...Ee(o)]),c={};for(const u of l.values())c[u]={signal:`${r.signal} === "${s}" ? ${La(a[u])} : ${La(o[u])}`};return c}return t[i]})])}function _je(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:VQ(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",a=Ve(n)?"axisOrient":`axis${Kx(n)}`,o=[...i,...i.map(c=>s+c.substr(4))],l=["axis",a,s];return{vlOnlyAxisConfig:z9(o,r,e,n),vgAxisConfig:z9(l,r,e,n),axisConfigStyle:bje([...l,...o],r)}}function bje(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Ie(s);for(const a of s)n.push(t.style[a])}}return Object.assign.apply(null,n)}function WF(e,t,n,r={}){var s;const i=xQ(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[a])==null?void 0:s[e])!==void 0)return{configFrom:a,configValue:r[a][e]};return{}}const H9={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Eje(n,e),gridScale:({model:e,channel:t})=>wje(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Ote(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Fte(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Aje(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Tje(t.type,n,ke(t)&&!!t.timeUnit,ke(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,a=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Cje({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:Fje,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Nte(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",a=t.fieldDef(s);return yQ(i?[f9(i)]:[],ke(a)?[f9(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Oje(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Nje(n,t)};function Eje(e,t){return!xr(e)&&ke(t)&&!on(t==null?void 0:t.bin)&&!Er(t==null?void 0:t.bin)}function wje(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Sje(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Ve(s)?s:V1(s);{const{configValue:a}=WF("labelAngle",r,t==null?void 0:t.style,i);return a!==void 0?V1(a):n===mn&&bt([dR,hR],e.type)&&!(ke(e)&&e.timeUnit)?270:void 0}}function jF(e){return`(((${e.signal} % 360) + 360) % 360)`}function Fte(e,t,n,r){if(e!==void 0)if(n==="x"){if(Ve(e)){const i=jF(e),s=Ve(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ve(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ve(e)){const i=jF(e),s=Ve(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Ve(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Ote(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Ve(e)){const a=jF(e),o=Ve(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${o} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Ve(t)){const a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Aje(e,t){if(t==="x"&&bt(["quantitative","temporal"],e))return!0}function Tje(e,t,n,r){if(n&&!$e(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function kje(e){return e==="x"?"bottom":"left"}function Cje({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!xr(t)&&t!=="log"){if(ke(e)){if(on(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&bt(["month","hours","day","quarter"],(i=mr(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Fje({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ke(t)){const{timeUnit:n}=t;if(n){const r=IQ(n);if(r)return{signal:r}}}}function Nte(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,a=i?i.title:void 0;if(s&&a)return _Q(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function Oje(e,t){const n=e.values;if(ge(n))return mee(t,n);if(Ve(n))return n}function Nje(e,t){return e==="rect"&&Cb(t)?1:0}class yp extends Zt{clone(){return new yp(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Ate(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(dd(r)&&aee(r.sort)){const{field:s,timeUnit:a}=r,o=r.sort,l=o.map((c,u)=>`${BQ({field:s,timeUnit:a,equal:c})} ? ${u} : `).join("")+o.length;t=new yp(t,{calculate:l,as:_p(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${St(this.transform)}`}}function _p(e,t,n){return Me(e,{prefix:t,suffix:"sort_index",...n})}function yS(e,t){return bt(["top","bottom"],t)?"column":bt(["left","right"],t)||e==="row"?"row":"column"}function bp(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Rn((t||{})[e],i[e],n.header[e])}function _S(e,t,n,r){const i={};for(const s of e){const a=bp(s,t||{},n,r);a!==void 0&&(i[s]=a)}return i}const WR=["row","column"],jR=["header","footer"];function Dje(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:o}=_S(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=yS(t,o),c=V1(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Mte(c,l),...Dte(l,c,s),...Rte(r,i,t,_Ve,$ee)}}}function Dte(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Ote(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Mte(e,t){const n=Fte(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Mje(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of jR)if(n[i])for(const s of n[i]){const a=$je(e,t,i,n,s);a!=null&&r.push(a)}return r}function Rje(e,t){const{sort:n}=e;return Xl(n)?{field:Me(n,{expr:"datum"}),order:n.order??"ascending"}:ge(n)?{field:_p(e,t,{expr:"datum"}),order:"ascending"}:{field:Me(e,{expr:"datum"}),order:n??"ascending"}}function GF(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:a,labelOrient:o,labelExpr:l}=_S(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),c=_R({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=yS(t,o);return{text:{signal:l?Rh(Rh(l,"datum.label",c),"datum.value",Me(e,{expr:"parent"})):c},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Mte(s,u),...Dte(u,s,a),...Rte(n,e,t,bVe,Iee)}}function $je(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:a}=r,o=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:f}=_S(["labelOrient"],a.header,o,t);(t==="row"&&!bt(["top","bottom"],f)||t==="column"&&!bt(["left","right"],f))&&(s=GF(a,t,o))}const l=ws(e)&&!rv(e.facet),c=i.axes,u=(c==null?void 0:c.length)>0;if(s||u){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Rje(a,t)}:{},...u&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...u?{axes:c}:{}}}}return null}const Ije={column:{start:0,end:1},row:{start:1,end:0}};function Lje(e,t){return Ije[t][e]}function Pje(e,t){const n={};for(const r of ea){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:a}=_S(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),o=yS(r,a),l=Lje(s,o);l!==void 0&&(n[o]=l)}}return en(n)?void 0:n}function Rte(e,t,n,r,i){const s={};for(const a of r){if(!i[a])continue;const o=bp(a,t==null?void 0:t.header,e,n);o!==void 0&&(s[i[a]]=o)}return s}function GR(e){return[...Sy(e,"width"),...Sy(e,"height"),...Sy(e,"childWidth"),...Sy(e,"childHeight")]}function Sy(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const a=s.get("type"),o=s.get("range");if(xr(a)&&of(o)){const l=e.scaleName(n);return ws(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[V9(l,o)]:[V9(l,o),{name:i,update:$te(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",o=PF(e.config.view,s?"width":"height"),l=`isFinite(${a}) ? ${a} : ${o}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function V9(e,t){const n=`${e}_step`;return Ve(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function $te(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Rn(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${La(a)}, ${La(s)}) * ${e}_step`}function Ite(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Lte(e,t){return Ee(e).reduce((n,r)=>({...n,...Jp({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>an(i.value),invalidValueRef:void 0})}),{})}function Pte(e,t){if(ws(t))return e==="theta"?"independent":"shared";if(tg(t))return"shared";if(QR(t))return $n(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function qR(e,t){const n=e.scale[t],r=$n(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&we(gze(t)),"independent"):e[r][t]||"shared"}const Bje={...SVe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Bte=Ee(Bje);class Uje extends xc{}const W9={symbols:zje,gradient:Hje,labels:Vje,entries:Wje};function zje(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:a,encoding:o,config:l,mark:c}=n,u=a.filled&&c!=="trail";let f={...TUe({},n,yHe),...fte(n,{filled:u})};const h=i.get("symbolOpacity")??l.legend.symbolOpacity,d=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=h===void 0?Ute(o.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||u&&r===es)delete f.fill;else if(f.fill.field)d?delete f.fill:(f.fill=an(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=an(g??1));else if(ge(f.fill)){const m=qF(o.fill??o.color)??a.fill??(u&&a.color);m&&(f.fill=an(m))}}if(f.stroke){if(r==="stroke"||!u&&r===es)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(ge(f.stroke)){const m=Rn(qF(o.stroke||o.color),a.stroke,u?a.color:void 0);m&&(f.stroke={value:m})}}if(r!==pc){const m=ke(t)&&Hte(n,i,t);m?f.opacity=[{test:m,...an(g??1)},an(l.legend.unselectedOpacity)]:g&&(f.opacity=an(g))}return f={...f,...e},en(f)?void 0:f}function Hje(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:a}=t;let o={};const c=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Ute(a.opacity)||s.opacity:void 0;return c&&(o.opacity=an(c)),o={...o,...e},en(o)?void 0:o}function Vje(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},a=n.config,o=ke(t)?Hte(n,i,t):void 0,l=o?[{test:o,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:u}=s;let f;Bh(u)?f=Pa({fieldOrDatumDef:t,field:"datum.value",format:c,formatType:u,config:a}):c===void 0&&u===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=Pa({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&ke(t)&&t.timeUnit===void 0&&(f=Pa({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const h={...l?{opacity:l}:{},...f?{text:f}:{},...e};return en(h)?void 0:h}function Wje(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Ute(e){return zte(e,(t,n)=>Math.max(t,n.value))}function qF(e){return zte(e,(t,n)=>Rn(t,n.value))}function zte(e,t){if(UHe(e))return Ie(e.condition).reduce(t,e.value);if(Ka(e))return e.value}function Hte(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Ce(n.field);return r.map(s=>`(!length(data(${Ce(pn(s)+zh)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const j9={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return ree(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return iee(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Jje(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Zje(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Gje(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>v0(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(x0(n)&&ko(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>jje(t,e)};function jje(e,t){const n=e.values;if(ge(n))return mee(t,n);if(Ve(n))return n}function Gje(e,t,n,r){if(t!=="shape"){const i=qF(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function qje(e){const{legend:t}=e;return Rn(t.type,Xje(e))}function Xje({channel:e,timeUnit:t,scaleType:n}){if(x0(e)){if(bt(["quarter","month","day"],t))return"symbol";if(ko(n))return"gradient"}return"symbol"}function Yje({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Kje(n,t)}function Kje(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Jje({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(ko(i))return n==="horizontal"?r==="top"||r==="bottom"?G9(t,"width",a,s):a:G9(t,"height",l,o)}function G9(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Zje(e){if(bt(["quantile","threshold","log","symlog"],e))return"greedy"}function Vte(e){const t=_n(e)?Qje(e):rGe(e);return e.component.legends=t,t}function Qje(e){const{encoding:t}=e,n={};for(const r of[es,...Pee]){const i=er(t[r]);!i||!e.getScaleComponent(r)||r===ts&&ke(i)&&i.type===Kp||(n[r]=nGe(e,r))}return n}function eGe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function tGe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function nGe(e,t){var _;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,a=s.legend,o=new Uje({},eGe(e,t));fje(e,t,o);const l=n!==void 0?!n:a.disable;if(o.set("disable",l,n!==void 0),l)return o;n=n||{};const c=e.getScaleComponent(t).get("type"),u=er(i[t]),f=ke(u)?(_=mr(u.timeUnit))==null?void 0:_.unit:void 0,h=n.orient||s.legend.orient||"right",d=qje({legend:n,channel:t,timeUnit:f,scaleType:c}),p=Yje({legend:n,legendType:d,orient:h,legendConfig:a}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:a,config:s,scaleType:c,orient:h,legendType:d,direction:p};for(const b of Bte){if(d==="gradient"&&b.startsWith("symbol")||d==="symbol"&&b.startsWith("gradient"))continue;const w=b in j9?j9[b](g):n[b];if(w!==void 0){const E=tGe(w,b,n,e.fieldDef(t));(E||s.legend[b]===void 0)&&o.set(b,w,E)}}const m=(n==null?void 0:n.encoding)??{},x=o.get("selections"),v={},y={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:o,legendType:d};for(const b of["labels","legend","title","symbols","gradient","entries"]){const w=Lte(m[b]??{},e),E=b in W9?W9[b](w,y):w;E!==void 0&&!en(E)&&(v[b]={...x!=null&&x.length&&ke(u)?{name:`${pn(u.field)}_legend_${b}`}:{},...x!=null&&x.length?{interactive:!!x}:{},update:E})}return en(v)||o.set("encode",v,!!(n!=null&&n.encoding)),o}function rGe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Vte(r);for(const i of Ee(r.component.legends))n.legend[i]=qR(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Wte(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ee(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Wte(e,t){var s,a,o,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const c of Bte){const u=Ru(e.getWithExplicit(c),t.getWithExplicit(c),c,"legend",(f,h)=>{switch(c){case"symbolType":return iGe(f,h);case"title":return bQ(f,h);case"type":return i=!0,ls("symbol")}return pS(f,h,c,"legend")});e.setWithExplicit(c,u)}return i&&((a=(s=e.implicit)==null?void 0:s.encode)!=null&&a.gradient&&Eb(e.implicit,["encode","gradient"]),(l=(o=e.explicit)==null?void 0:o.encode)!=null&&l.gradient&&Eb(e.explicit,["encode","gradient"])),e}function iGe(e,t){return t.value==="circle"?t:e}function sGe(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function jte(e){const t=e.component.legends,n={};for(const i of Ee(t)){const s=e.getScaleComponent(i),a=tn(s.get("domains"));if(n[a])for(const o of n[a])Wte(o,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return Or(n).flat().map(i=>aGe(i,e.config)).filter(i=>i!==void 0)}function aGe(e,t){var a,o,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(a=s.encode)!=null&&a.symbols){const c=s.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!s.stroke&&(c.stroke={value:"transparent"});for(const u of Pee)s[u]&&delete c[u]}if(s.title||delete s.title,r!==void 0){let c=r;(l=(o=s.encode)==null?void 0:o.labels)!=null&&l.update&&Ve(s.encode.labels.update.text)&&(c=Rh(r,"datum.label",s.encode.labels.update.text.signal)),sGe(s,"labels","text",{signal:c})}return s}}function oGe(e){return tg(e)||QR(e)?lGe(e):Gte(e)}function lGe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Gte(e))}function Gte(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},s=t.data.reduce((a,o)=>{const l=Ve(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return bt(a,l)||a.push(l),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const cGe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class qte extends xc{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Xte(e){e.component.projection=_n(e)?uGe(e):dGe(e)}function uGe(e){if(e.hasProjection){const t=jr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?fGe(e):void 0,s=new qte(e.projectionName(!0),{...jr(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function fGe(e){const t=[],{encoding:n}=e;for(const r of[[lo,oo],[da,co]])(er(n[r[0]])||er(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ts)&&e.typedFieldDef(ts).type===Kp&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Tn.Main)),t}function hGe(e,t){const n=HM(cGe,i=>!!(!Ze(e.explicit,i)&&!Ze(t.explicit,i)||Ze(e.explicit,i)&&Ze(t.explicit,i)&&vs(e.get(i),t.get(i))));if(vs(e.size,t.size)){if(n)return e;if(vs(e.explicit,{}))return t;if(vs(t.explicit,{}))return e}return null}function dGe(e){if(e.children.length===0)return;let t;for(const r of e.children)Xte(r);const n=HM(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=hGe(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new qte(r,t.specifiedProjection,t.size,at(t.data));for(const s of e.children){const a=s.component.projection;a&&(a.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function pGe(e,t,n,r){if(av(t,n)){const i=_n(e)?e.axis(n)??e.legend(n)??{}:{},s=Me(t,{expr:"datum"}),a=Me(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Me(t,{binSuffix:"range",forAs:!0}),formula:nv(s,a,i.format,i.formatType,r)}}return{}}function Yte(e,t){return`${dQ(e)}_${t}`}function gGe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function XR(e,t,n){const r=lS(n,void 0)??{},i=Yte(r,t);return e.getName(`${i}_bins`)}function mGe(e){return"as"in e}function q9(e,t,n){let r,i;mGe(e)?r=Le(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Me(e,{forAs:!0}),Me(e,{binSuffix:"end",forAs:!0})];const s={...lS(t,void 0)},a=Yte(s,e.field),{signal:o,extentSignal:l}=gGe(n,a);if(Jw(s.extent)){const u=s.extent;i=kte(n,u.param,u),delete s.extent}const c={bin:s,field:e.field,as:[r],...o?{signal:o}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:a,binComponent:c}}class $o extends Zt{clone(){return new $o(null,at(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,a)=>{if(Ni(s)&&on(s.bin)){const{key:o,binComponent:l}=q9(s,s.bin,n);i[o]={...l,...i[o],...pGe(n,s,a,n.config)}}return i},{});return en(r)?null:new $o(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=q9(n,n.bin,r);return new $o(t,{[i]:s})}merge(t,n){for(const r of Ee(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=To([...this.bins[r].as,...t.bins[r].as],St)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Or(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Or(this.bins).map(t=>t.field))}hash(){return`Bin ${St(this.bins)}`}assemble(){return Or(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...a}=t.bin,o={type:"bin",field:ha(t.field),as:r,signal:t.signal,...Jw(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...a};!s&&t.extentSignal&&(n.push({type:"extent",field:ha(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const l of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:Me({field:r[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function xGe(e,t,n,r){var s;const i=_n(r)?r.encoding[il(t)]:void 0;if(Ni(n)&&_n(r)&&lee(n,i,r.markDef,r.config)){e.add(Me(n,{})),e.add(Me(n,{suffix:"end"}));const{mark:a,markDef:o,config:l}=r,c=Mu({fieldDef:n,markDef:o,config:l});W1(a)&&c!==.5&&$n(t)&&(e.add(Me(n,{suffix:gS})),e.add(Me(n,{suffix:mS}))),n.bin&&av(n,t)&&e.add(Me(n,{binSuffix:"range"}))}else if(iQ(t)){const a=rQ(t);e.add(r.getName(a))}else e.add(Me(n));return dd(n)&&aHe((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function vGe(e,t){for(const n of Ee(t)){const r=t[n];for(const i of Ee(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Wa extends Zt{clone(){return new Wa(null,new Set(this.dimensions),at(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((a,o)=>{const{aggregate:l,field:c}=a;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Me(a,{forAs:!0})]);else{if(ic(l)||af(l)){const u=ic(l)?"argmin":"argmax",f=l[u];i[f]??(i[f]={}),i[f][u]=new Set([Me({op:u,field:f},{forAs:!0})])}else i[c]??(i[c]={}),i[c][l]=new Set([Me(a,{forAs:!0})]);sl(o)&&n.scaleDomain(o)==="unaggregated"&&(i[c]??(i[c]={}),i[c].min=new Set([Me({field:c,aggregate:"min"},{forAs:!0})]),i[c].max=new Set([Me({field:c,aggregate:"max"},{forAs:!0})]))}else xGe(s,o,a,n)}),s.size+Ee(i).length===0)?null:new Wa(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const a of n.aggregate){const{op:o,field:l,as:c}=a;o&&(o==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([c||Me(a,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[o]??(r[o]=new Set),s[l][o].add(c||Me(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+Ee(s).length===0?null:new Wa(t,i,s)}merge(t){return YZ(this.dimensions,t.dimensions)?(vGe(this.measures,t.measures),!0):(Nze("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ee(this.measures)])}producedFields(){const t=new Set;for(const n of Ee(this.measures))for(const r of Ee(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${St({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ee(this.measures))for(const a of Ee(this.measures[s]))for(const o of this.measures[s][a])r.push(o),t.push(a),n.push(s==="*"?null:ha(s));return{type:"aggregate",groupby:[...this.dimensions].map(ha),ops:t,fields:n,as:r}}}class Qp extends Zt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of ea){const a=n.facet[s];if(a){const{bin:o,sort:l}=a;this[s]={name:n.getName(`${s}_domain`),fields:[Me(a),...on(o)?[Me(a,{binSuffix:"end"})]:[]],...Xl(l)?{sortField:l}:ge(l)?{sortIndexField:_p(a,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of ea)this[n]&&(t+=` ${n.charAt(0)}:${St(this[n])}`);return t}get fields(){var n;const t=[];for(const r of ea)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of ea)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of gc){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(xr(i)&&of(s)){const a=bS(this.childModel,n),o=ZR(a);o?t[n]=o:we(tR(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],a=[],o=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),a.push("max")):(s.push(r[i]),a.push("distinct")),o.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:c}=this[t];if(l){const{op:u=sS,field:f}=l;s.push(f),a.push(u),o.push(Me(l,{forAs:!0}))}else c&&(s.push(c),a.push("max"),o.push(c));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:a,as:o}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const c of WR){for(const u of jR){const f=(r[c]&&r[c][u])??[];for(const h of f)if(((l=h.axes)==null?void 0:l.length)>0){s[c]=!0;break}}if(s[c]){const u=`length(data("${this.facet.name}"))`,f=c==="row"?n?{signal:`ceil(${u} / ${n})`}:1:n?{signal:`min(${u}, ${n})`}:{signal:u};i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:a,column:o}=s;return(a||o)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:a}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(r.x??[],r.y??[]),l=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:l}]})}for(const o of[ql,Gl])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,r));if(a){const o=this.assembleFacetHeaderData(r);o&&t.push(...o)}return t}}function X9(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function yGe(e,t){const n=jM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=X9(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=X9(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return we(UUe(t)),null}function _Ge(e){const t={};return __(e.filter,n=>{if(PQ(n)){let r=null;sR(n)?r=gs(n.equal):oR(n)?r=gs(n.lte):aR(n)?r=gs(n.lt):lR(n)?r=gs(n.gt):cR(n)?r=gs(n.gte):uR(n)?r=n.range[0]:fR(n)&&(r=(n.oneOf??n.in)[0]),r&&(fd(r)?t[n.field]="date":$t(r)?t[n.field]="number":Le(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function bGe(e){const t={};function n(r){mp(r)?t[r.field]="date":r.type==="quantitative"&&vUe(r.aggregate)?t[r.field]="number":cp(r.field)>1?r.field in t||(t[r.field]="flatten"):dd(r)&&Xl(r.sort)&&cp(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((_n(e)||ws(e))&&e.forEachFieldDef((r,i)=>{if(Ni(r))n(r);else{const s=cd(i),a=e.fieldDef(s);n({...r,type:a.type})}}),_n(e)){const{mark:r,markDef:i,encoding:s}=e;if(lf(r)&&!e.encoding.order){const a=i.orient==="horizontal"?"y":"x",o=s[a];ke(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function EGe(e){const t={};if(_n(e)&&e.component.selection)for(const n of Ee(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&cp(i.field)>1&&(t[i.field]="flatten")}return t}class Qr extends Zt{clone(){return new Qr(null,at(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${St(this._parse)}`}static makeExplicit(t,n,r){var a;let i={};const s=n.data;return!cu(s)&&((a=s==null?void 0:s.format)!=null&&a.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const o of Ee(r)){const l=i.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===r[o]||l.value==="derived"||r[o]==="flatten"?delete r[o]:we(r9(o,r[o],l.value)))}for(const o of Ee(n)){const l=i.get(o);l!==void 0&&(l===n[o]?delete n[o]:we(r9(o,n[o],l)))}const s=new xc(n,r);i.copyAll(s);const a={};for(const o of Ee(s.combine())){const l=s.get(o);l!==null&&(a[o]=l)}return Ee(a).length===0||i.parseNothing?null:new Qr(t,a)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ee(this._parse)){const r=this._parse[n];cp(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ee(this._parse))}dependentFields(){return new Set(Ee(this._parse))}assembleTransforms(t=!1){return Ee(this._parse).filter(n=>t?cp(n)>1:!0).map(n=>{const r=yGe(n,this._parse[n]);return r?{type:"formula",expr:r,as:Xp(n)}:null}).filter(n=>n!==null)}}class Lu extends Zt{clone(){return new Lu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Za])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Za}}}class cv extends Zt{clone(){return new cv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${St(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class uv extends Zt{clone(){return new uv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${St(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Hh extends Zt{constructor(t){super(null),t??(t={name:"source"});let n;if(cu(t)||(n=t.format?{...qi(t.format,["parse"])}:{}),j1(t))this._data={values:t.values};else if(xp(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];bt(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else nte(t)?this._data={values:[{type:"Sphere"}]}:(ete(t)||cu(t))&&(this._data={});this._generator=cu(t),t.name&&(this._name=t.name),n&&!en(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Y9=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},wGe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},fm;function YR(e){return e instanceof Hh||e instanceof cv||e instanceof uv}class KR{constructor(){fm.set(this,void 0),Y9(this,fm,!1,"f")}setModified(){Y9(this,fm,!0,"f")}get modifiedFlag(){return wGe(this,fm,"f")}}fm=new WeakMap;class pd extends KR{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class JR extends KR{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class SGe extends JR{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ee(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class AGe extends JR{constructor(t){super(),this.requiresSelectionId=t&&VR(t)}run(t){t instanceof Lu&&(this.requiresSelectionId&&(YR(t.parent)||t.parent instanceof Wa||t.parent instanceof Qr)||(this.setModified(),t.remove()))}}class TGe extends KR{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ro&&(r=t.producedFields(),VM(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class kGe extends JR{constructor(){super()}run(t){t instanceof Xi&&!t.isRequired()&&(this.setModified(),t.remove())}}class CGe extends pd{run(t){if(!YR(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Qr)if(t instanceof Qr)this.setModified(),t.merge(n);else{if(WM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class FGe extends pd{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Qr);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const a of r){const o=a.parse;for(const l of Ee(o))l in i?i[l]!==o[l]&&s.add(l):i[l]=o[l]}for(const a of s)delete i[a];if(!en(i)){this.setModified();const a=new Qr(t,i);for(const o of n){if(o instanceof Qr)for(const l of Ee(i))delete o.parse[l];t.removeChild(o),o.parent=a,o instanceof Qr&&Ee(o.parse).length===0&&o.remove()}}}}}class OGe extends pd{run(t){t instanceof Xi||t.numChildren()>0||t instanceof Qp||t instanceof Hh||(this.setModified(),t.remove())}}class NGe extends pd{run(t){const n=t.children.filter(i=>i instanceof Ro),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class DGe extends pd{run(t){const n=t.children.filter(i=>i instanceof Wa),r={};for(const i of n){const s=St(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ee(r)){const s=r[i];if(s.length>1){const a=s.pop();for(const o of s)a.merge(o)&&(t.removeChild(o),o.parent=a,o.remove(),this.setModified())}}}}class MGe extends pd{constructor(t){super(),this.model=t}run(t){const n=!(YR(t)||t instanceof Zp||t instanceof Qr||t instanceof Lu),r=[],i=[];for(const s of t.children)s instanceof $o&&(n&&!WM(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const a of r)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof $o?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class RGe extends pd{run(t){const n=[...t.children];if(!lp(n,a=>a instanceof Xi)||t.numChildren()<=1)return;const i=[];let s;for(const a of n)if(a instanceof Xi){let o=a;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof Xi)o=l;else break}i.push(...o.children),s?(t.removeChild(a),a.parent=s.parent,s.parent.removeChild(s),s.parent=o,this.setModified()):s=o}else i.push(a);if(i.length){this.setModified();for(const a of i)a.parent.removeChild(a),a.parent=s}}}class gd extends Zt{clone(){return new gd(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=To(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Me(t)}hash(){return`JoinAggregateTransform ${St(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class Ep extends Zt{clone(){return new Ep(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:a,scales:o}=r;if(a==="include-invalid-values"&&o==="include-invalid-values")return null;const l=n.reduceFieldDef((c,u,f)=>{const h=sl(f)&&n.getScaleComponent(f);if(h){const d=h.get("type"),{aggregate:p}=u,g=xR({scaleChannel:f,markDef:s,config:i,scaleType:d,isCountAggregate:Kw(p)});g!=="show"&&g!=="always-valid"&&(c[u.field]=u)}return c},{});return Ee(l).length?new Ep(t,l):null}dependentFields(){return new Set(Ee(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${St(this.filter)}`}assemble(){const t=Ee(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Me(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${XF(s)}))`):i.type==="quantitative"&&n.push(XF(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function XF(e){return`isValid(${e}) && isFinite(+${e})`}function $Ge(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Me(r);return i&&t.push(i),t},[])}function IGe(e){return ge(e)&&e.every(t=>Le(t))&&e.length>1}class Kl extends Zt{clone(){return new Kl(null,at(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:a="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const f of n.sort)o.push(f.field),l.push(Rn(f.order,"ascending"));const c={field:o,order:l};let u;return IGe(s)?u=s:Le(s)?u=[s,`${s}_end`]:u=[`${n.stack}_start`,`${n.stack}_end`],new Kl(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:c,facetby:[],as:u})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:a,offset:o,impute:l}=r,c=s.map(d=>{const p=i[d];return Ja(p)}).filter(d=>!!d),u=$Ge(n),f=n.encoding.order;let h;if(ge(f)||ke(f))h=vQ(f);else{const d=cee(f)?f.sort:a==="y"?"descending":"ascending";h=u.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(d)),p),{field:[],order:[]})}return new Kl(t,{dimensionFieldDefs:c,stackField:n.vgField(a),facetby:[],stackby:u,sort:h,offset:o,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${St(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Me(i,{binSuffix:"mid"})]:[Me(i,{}),Me(i,{binSuffix:"end"})]:[Me(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:a,offset:o,impute:l,as:c}=this._stack;if(l)for(const u of r){const{bandPosition:f=.5,bin:h}=u;if(h){const d=Me(u,{expr:"datum"}),p=Me(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${XF(d)} ? ${f}*${d}+${1-f}*${p} : ${d}`,as:Me(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Me(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:c,offset:o}),t}}class eg extends Zt{clone(){return new eg(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=To(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Me(t)}hash(){return`WindowTransform ${St(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>QM(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...a!==void 0?{groupby:a}:{}};const o=[],l=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)o.push(f.field),l.push(f.order??"ascending");const c={field:o,order:l},u=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:c,...u!==void 0?{ignorePeers:u}:{},...a!==void 0?{groupby:a}:{},...s!==void 0?{frame:s}:{}}}}function LGe(e){function t(n){if(!(n instanceof Qp)){const r=n.clone();if(r instanceof Xi){const i=KF+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Wa||r instanceof Kl||r instanceof eg||r instanceof gd)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function YF(e){if(e instanceof Qp)if(e.numChildren()===1&&!(e.children[0]instanceof Xi)){const t=e.children[0];(t instanceof Wa||t instanceof Kl||t instanceof eg||t instanceof gd)&&t.addDimensions(e.fields),t.swapWithParent(),YF(e)}else{const t=e.model.component.data.main;Kte(t);const n=LGe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(YF)}function Kte(e){if(e instanceof Xi&&e.type===Tn.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Qp||(t.swapWithParent(),Kte(e))}}const KF="scale_",Ay=5;function JF(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!JF(t.children))return!1}return!0}function ba(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function K9(e,t,n){let r=e.sources,i=!1;return i=ba(new kGe,r)||i,i=ba(new AGe(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=ba(new OGe,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=ba(new CGe,r)||i,i=ba(new MGe(t),r)||i,i=ba(new TGe,r)||i,i=ba(new FGe,r)||i,i=ba(new DGe,r)||i,i=ba(new NGe,r)||i,i=ba(new SGe,r)||i,i=ba(new RGe,r)||i),e.sources=r,i}function PGe(e,t){JF(e.sources);let n=0,r=0;for(let i=0;i<Ay&&K9(e,t,!0);i++)n++;e.sources.map(YF);for(let i=0;i<Ay&&K9(e,t,!1);i++)r++;JF(e.sources),Math.max(n,r)===Ay&&we(`Maximum optimization runs(${Ay}) reached.`)}class lr{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new lr(()=>t(n))}}function Jte(e){_n(e)?BGe(e):UGe(e)}function BGe(e){const t=e.component.scales;for(const n of Ee(t)){const r=HGe(e,n);if(t[n].setWithExplicit("domains",r),WGe(e,n),e.component.data.isFaceted){let s=e;for(;!ws(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const o of r.value)Dl(o)&&(o.data=KF+o.data.replace(KF,""))}}}function UGe(e){for(const n of e.children)Jte(n);const t=e.component.scales;for(const n of Ee(t)){let r,i=null;for(const s of e.children){const a=s.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=Ru(r,a.getWithExplicit("domains"),"domains","scale",ZF);const o=a.get("selectionExtent");i&&o&&i.param!==o.param&&we(IUe),i=o}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function zGe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=J9(t,n);if(!i){we(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=J9(t,n);if(i)return"unaggregated"}return e}function HGe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=zGe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&er(r.x2)?er(r.x)?Ru(Fc(n,i,e,"x"),Fc(n,i,e,"x2"),"domain","scale",ZF):Fc(n,i,e,"x2"):t==="y"&&er(r.y2)?er(r.y)?Ru(Fc(n,i,e,"y"),Fc(n,i,e,"y2"),"domain","scale",ZF):Fc(n,i,e,"y2"):Fc(n,i,e,t)}function VGe(e,t,n){return e.map(r=>({signal:`{data: ${cS(r,{timeUnit:n,type:t})}}`}))}function IT(e,t,n){var i;const r=(i=mr(n))==null?void 0:i.unit;return t==="temporal"||r?VGe(e,t,r):[e]}function Fc(e,t,n,r){const{encoding:i,markDef:s,mark:a,config:o,stack:l}=n,c=er(i[r]),{type:u}=c,f=c.timeUnit,h=LWe({invalid:Wo("invalid",s,o),isPath:lf(a)});if(sHe(t)){const g=Fc(e,void 0,n,r),m=IT(t.unionWith,u,f);return _o([...m,...g.value])}else{if(Ve(t))return _o([t]);if(t&&t!=="unaggregated"&&!jQ(t))return _o(IT(t,u,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return ls([[0,1]]);const g=n.requestDataName(h);return ls([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const d=sl(r)&&ke(c)?jGe(n,r,e):void 0;if(al(c)){const g=IT([c.datum],u,f);return ls(g)}const p=c;if(t==="unaggregated"){const{field:g}=c;return ls([{data:n.requestDataName(h),field:Me({field:g,aggregate:"min"})},{data:n.requestDataName(h),field:Me({field:g,aggregate:"max"})}])}else if(on(p.bin)){if(xr(e))return ls(e==="bin-ordinal"?[]:[{data:H1(d)?n.requestDataName(h):n.requestDataName(Tn.Raw),field:n.vgField(r,av(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!$e(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:g}=p;if(on(g)){const m=XR(n,p.field,g);return ls([new lr(()=>{const x=n.getSignalName(m);return`[${x}.start, ${x}.stop]`})])}else return ls([{data:n.requestDataName(h),field:n.vgField(r,{})}])}}else if(p.timeUnit&&bt(["time","utc"],e)){const g=i[il(r)];if(lee(p,g,s,o)){const m=n.requestDataName(h),x=Mu({fieldDef:p,fieldDef2:g,markDef:s,config:o}),v=W1(a)&&x!==.5&&$n(r);return ls([{data:m,field:n.vgField(r,v?{suffix:gS}:{})},{data:m,field:n.vgField(r,{suffix:v?mS:"end"})}])}}return ls(d?[{data:H1(d)?n.requestDataName(h):n.requestDataName(Tn.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(h),field:n.vgField(r)}])}function LT(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":sS),...r?{field:ha(r)}:{},...i?{order:i}:{}}}function WGe(e,t){var o;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(o=e.fieldDef(t))==null?void 0:o.bin,s=jQ(r)&&r,a=ud(i)&&Jw(i.extent)&&i.extent;(s||a)&&n.set("selectionExtent",s??a,!0)}function jGe(e,t,n){if(!xr(n))return;const r=e.fieldDef(t),i=r.sort;if(aee(i))return{op:"min",field:_p(r,t),order:"ascending"};const{stack:s}=e,a=s?new Set([...s.groupbyFields,...s.stackBy.map(o=>o.fieldDef.field)]):void 0;if(Xl(i)){const o=s&&!a.has(i.field);return LT(i,o)}else if(LHe(i)){const{encoding:o,order:l}=i,c=e.fieldDef(o),{aggregate:u,field:f}=c,h=s&&!a.has(f);if(ic(u)||af(u))return LT({field:Me(c),order:l},h);if(QM(u)||!u)return LT({op:u,field:f,order:l},h)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(bt(["ascending",void 0],i))return!0}}function J9(e,t){const{aggregate:n,type:r}=e;return n?Le(n)&&!_Ue.has(n)?{valid:!1,reason:lze(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:cze(e)}:{valid:!0}:{valid:!1,reason:oze(e)}}function ZF(e,t,n,r){return e.explicit&&t.explicit&&we(pze(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function GGe(e){const t=To(e.map(a=>{if(Dl(a)){const{sort:o,...l}=a;return l}return a}),St),n=To(e.map(a=>{if(Dl(a)){const o=a.sort;return o!==void 0&&!H1(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(a=>a!==void 0),St);if(t.length===0)return;if(t.length===1){const a=e[0];if(Dl(a)&&n.length>0){let o=n[0];if(n.length>1){we(s9);const l=n.filter(c=>$e(c)&&"op"in c&&c.op!=="min");n.every(c=>$e(c)&&"op"in c)&&l.length===1?o=l[0]:o=!0}else if($e(o)&&"field"in o){const l=o.field;a.field===l&&(o=o.order?{order:o.order}:!0)}return{...a,sort:o}}return a}const r=To(n.map(a=>H1(a)||!("op"in a)||Le(a.op)&&a.op in mUe?a:(we(mze(a)),!0)),St);let i;r.length===1?i=r[0]:r.length>1&&(we(s9),i=!0);const s=To(e.map(a=>Dl(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(o=>o.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function ZR(e){if(Dl(e)&&Le(e.field))return e.field;if(bUe(e)){let t;for(const n of e.fields)if(Dl(n)&&Le(n.field)){if(!t)t=n.field;else if(t!==n.field)return we(xze),t}return we(vze),t}else if(EUe(e)){we(yze);const t=e.fields[0];return Le(t)?t:void 0}}function bS(e,t){const r=e.component.scales[t].get("domains").map(i=>(Dl(i)&&(i.data=e.lookupDataSource(i.data)),i));return GGe(r)}function Zte(e){return tg(e)||QR(e)?e.children.reduce((t,n)=>t.concat(Zte(n)),Z9(e)):Z9(e)}function Z9(e){return Ee(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:a,selectionExtent:o,domains:l,range:c,reverse:u,...f}=i,h=qGe(i.range,s,n,e),d=bS(e,n),p=o?VWe(e,o,r,d):null;return t.push({name:s,type:a,...d?{domain:d}:{},...p?{domainRaw:p}:{},range:h,...u!==void 0?{reverse:u}:{},...f}),t},[])}function qGe(e,t,n,r){if($n(n)){if(of(e))return{step:{signal:`${t}_step`}}}else if($e(e)&&Dl(e))return{...e,data:r.lookupDataSource(e.data)};return e}class Qte extends xc{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(bt([wr.LOG,wr.TIME,wr.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&bt([wr.LINEAR,wr.SQRT,wr.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,a=!1;for(const o of r){if(ge(o)){const l=o[0],c=o[o.length-1];if($t(l)&&$t(c))if(l<=0&&c>=0){i=!0;continue}else{s=!0;continue}}a=!0}if(i)return"definitely";if(s&&!a)return"definitely-not"}return"maybe"}}const XGe=["range","scheme"];function YGe(e){const t=e.component.scales;for(const n of ZM){const r=t[n];if(!r)continue;const i=KGe(n,e);r.setWithExplicit("range",i)}}function Q9(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=ns(t),a=e.getName(s);if($e(r)&&r.binned&&r.step!==void 0)return new lr(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${l})`});if(on(r)){const o=XR(e,i,r);return new lr(()=>{const l=e.getSignalName(o),c=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(a)} / (${c})`})}}}function KGe(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of XGe)if(n[f]!==void 0){const h=$F(s,f),d=GQ(e,f);if(!h)we(AQ(s,f,e));else if(d)we(d);else switch(f){case"range":{const p=n.range;if(ge(p)){if($n(e))return _o(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),x=t.getSignalName.bind(t);return lr.fromName(x,m)}return g}))}else if($e(p))return _o({data:t.requestDataName(Tn.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return _o(p)}case"scheme":return _o(JGe(n[f]))}}const a=e===mn||e==="xOffset"?"width":"height",o=r[a];if(Go(o)){if($n(e))if(xr(s)){const f=tne(o,t,e);if(f)return _o({step:f})}else we(TQ(a));else if(Qx(e)){const f=e===ef?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=nne(o,s);if(p)return _o(p)}}}const{rangeMin:l,rangeMax:c}=n,u=ZGe(e,t);return(l!==void 0||c!==void 0)&&$F(s,"rangeMin")&&ge(u)&&u.length===2?_o([l??u[0],c??u[1]]):ls(u)}function JGe(e){return iHe(e)?{scheme:e.name,...qi(e,["name"])}:{scheme:e}}function ene(e,t,n,{center:r}={}){const i=ns(e),s=t.getName(i),a=t.getSignalName.bind(t);return e===_r&&Ya(n)?r?[lr.fromName(o=>`${a(o)}/2`,s),lr.fromName(o=>`-${a(o)}/2`,s)]:[lr.fromName(a,s),0]:r?[lr.fromName(o=>`-${a(o)}/2`,s),lr.fromName(o=>`${a(o)}/2`,s)]:[0,lr.fromName(a,s)]}function ZGe(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:a}=er(s[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:u}=t.specifiedScales[e];switch(e){case mn:case _r:{if(bt(["point","band"],l)){const f=rne(e,n,r.view);if(Go(f))return{step:tne(f,t,e)}}return ene(e,t,l)}case ef:case Yp:return QGe(e,t,l);case dc:{const f=nqe(i,r),h=rqe(i,n,t,r);return dp(l)?tqe(f,h,eqe(l,r,c,e)):[f,h]}case va:return[0,Math.PI*2];case ld:return[0,360];case ao:return[0,new lr(()=>{const f=t.getSignalName(ws(t.parent)?"child_width":"width"),h=t.getSignalName(ws(t.parent)?"child_height":"height");return`min(${f},${h})/2`})];case rf:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case sf:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ts:return"symbol";case es:case nl:case rl:return l==="ordinal"?a==="nominal"?"category":"ordinal":u!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case pc:case tf:case nf:return[r.scale.minOpacity,r.scale.maxOpacity]}}function tne(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Xw(n),a=r[s];if(Uee({step:e,offsetIsDiscrete:ot(a)&&UQ(a.type)})==="offset"&&_ee(r,s)){const l=t.getScaleComponent(s);let u=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const h=l.get("paddingInner")??l.get("padding")??0,d=l.get("paddingOuter")??l.get("padding")??0;u=`bandspace(${u}, ${h}, ${d})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${DF(f)})`}}else return e.step}function nne(e,t){if(Uee({step:e,offsetIsDiscrete:xr(t)})==="offset")return{step:e.step}}function QGe(e,t,n){const r=e===ef?"x":"y",i=t.getScaleComponent(r);if(!i)return ene(r,t,n,{center:!0});const s=i.get("type"),a=t.scaleName(r),{markDef:o,config:l}=t;if(s==="band"){const c=rne(r,t.size,t.config.view);if(Go(c)){const u=nne(c,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else{const c=t.encoding[r];if(ke(c)&&c.timeUnit){const u=IQ(c.timeUnit,p=>`scale('${a}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,h=Mu({fieldDef:c,markDef:o,config:l})-.5,d=h!==0?` + ${h}`:"";if(f){const p=Ve(f)?`${f.signal}/2`+d:`${f/2+h}`,g=Ve(f)?`(1 - ${f.signal}/2)`+d:`${1-f/2+h}`;return[{signal:`${p} * (${u})`},{signal:`${g} * (${u})`}]}return[0,{signal:u}]}return qZ(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function rne(e,t,n){const r=e===mn?"width":"height",i=t[r];return i||Mb(n,r)}function eqe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ge(n)?n.length+1:(we(Cze(r)),3)}}function tqe(e,t,n){const r=()=>{const i=La(t),s=La(e),a=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${a}, ${a})`};return Ve(t)?new lr(r):{signal:r()}}function nqe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Zw("size",e))}const e7=.95;function rqe(e,t,n,r){const i={x:Q9(n,"x"),y:Q9(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=t7(t,i,r.view);return $t(s)?s-1:new lr(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=t7(t,i,r.view);return $t(s)?Math.pow(e7*s,2):new lr(()=>`pow(${e7} * ${s.signal}, 2)`)}}throw new Error(Zw("size",e))}function t7(e,t,n){const r=Go(e.width)?e.width.step:Db(n,"width"),i=Go(e.height)?e.height.step:Db(n,"height");return t.x||t.y?new lr(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function ine(e,t){_n(e)?iqe(e,t):ane(e,t)}function iqe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:a}=e;for(const o of Ee(n)){const l=a[o],c=n[o],u=e.getScaleComponent(o),f=er(i[o]),h=l[t],d=u.get("type"),p=u.get("padding"),g=u.get("paddingInner"),m=$F(d,t),x=GQ(o,t);if(h!==void 0&&(m?x&&we(x):we(AQ(d,t,o))),m&&x===void 0)if(h!==void 0){const v=f.timeUnit,y=f.type;switch(t){case"domainMax":case"domainMin":fd(l[t])||y==="temporal"||v?c.set(t,{signal:cS(l[t],{type:y,timeUnit:v})},!0):c.set(t,l[t],!0);break;default:c.copyKeyFromObject(t,l)}}else{const v=t in n7?n7[t]({model:e,channel:o,fieldOrDatumDef:f,scaleType:d,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:bee(i,o),hasSecondaryRangeChannel:!!i[il(o)]}):r.scale[t];v!==void 0&&c.set(t,v,!1)}}}const n7={bins:({model:e,fieldOrDatumDef:t})=>ke(t)?sqe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>aqe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>oqe(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>lqe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>cqe(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>uqe(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ke(e)?e.sort:void 0;return fqe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:a})=>hqe(e,t,n,r,i,s.scale,a)};function sne(e){_n(e)?YGe(e):ane(e,"range")}function ane(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?sne(r):ine(r,t);for(const r of Ee(n)){let i;for(const s of e.children){const a=s.component.scales[r];if(a){const o=a.getWithExplicit(t);i=Ru(i,o,t,"scale",Qee((l,c)=>{switch(t){case"range":return l.step&&c.step?l.step-c.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function sqe(e,t){const n=t.bin;if(on(n)){const r=XR(e,t.field,n);return new lr(()=>e.getSignalName(r))}else if(Er(n)&&ud(n)&&n.step!==void 0)return{step:n.step}}function aqe(e,t){if(bt([es,nl,rl],e)&&t!=="nominal")return"hcl"}function oqe(e,t,n,r,i,s){var a;if(!((a=Ja(s))!=null&&a.bin||ge(n)||i!=null||r!=null||bt([wr.TIME,wr.UTC],e)))return $n(t)?!0:void 0}function lqe(e,t,n,r,i,s){if($n(e)){if(ko(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:o}=i;if(a==="bar"&&!(ke(r)&&(r.bin||r.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===wr.POINT)return n.pointPadding}}function cqe(e,t,n,r,i,s=!1){if(e===void 0){if($n(t)){const{bandPaddingInner:a,barBandPaddingInner:o,rectBandPaddingInner:l,tickBandPaddingInner:c,bandWithNestedOffsetPaddingInner:u}=i;return s?u:Rn(a,n==="bar"?o:n==="tick"?c:l)}else if(Qx(t)&&r===wr.BAND)return i.offsetBandPaddingInner}}function uqe(e,t,n,r,i,s=!1){if(e===void 0){if($n(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:o}=i;if(s)return o;if(n===wr.BAND)return Rn(a,Ve(r)?{signal:`${r.signal}/2`}:r/2)}else if(Qx(t)){if(n===wr.POINT)return .5;if(n===wr.BAND)return i.offsetBandPaddingOuter}}}function fqe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Ya(e)&&t==="descending"?Ve(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Ya(e)&&t==="descending")return!0}function hqe(e,t,n,r,i,s,a){if(!!n&&n!=="unaggregated"&&Ya(i)){if(ge(n)){const l=n[0],c=n[n.length-1];if($t(l)&&l<=0&&$t(c)&&c>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!dp(i))return!0;if(!(ke(t)&&t.bin)&&bt([...gc,...lUe],e)){const{orient:l,type:c}=r;return bt(["bar","area","line","trail"],c)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:bt(["bar","area"],c)&&!a?!0:s==null?void 0:s.zero}return!1}function dqe(e,t,n,r,i=!1){const s=pqe(t,n,r,i),{type:a}=e;return sl(t)?a!==void 0?fHe(t,a)?ke(n)&&!uHe(a,n.type)?(we(hze(a,s)),s):a:(we(fze(t,a,s)),s):s:null}function pqe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(x0(e)||CT(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&we(FT(e,"ordinal")),"ordinal";if($n(e)||Qx(e)){if(bt(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in JM)return"band";const s=n[ns(e)];return Ph(s)||gp(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return x0(e)?"time":CT(e)==="discrete"?(we(FT(e,"temporal")),"ordinal"):ke(t)&&t.timeUnit&&mr(t.timeUnit).utc?"utc":"time";case"quantitative":return x0(e)?ke(t)&&on(t.bin)?"bin-ordinal":"linear":CT(e)==="discrete"?(we(FT(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(wQ(t.type))}function gqe(e,{ignoreRange:t}={}){one(e),Jte(e);for(const n of cHe)ine(e,n);t||sne(e)}function one(e){_n(e)?e.component.scales=mqe(e):e.component.scales=vqe(e)}function mqe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of ZM){const a=er(t[s]);if(a&&n===YQ&&s===ts&&a.type===Kp)continue;let o=a&&a.scale;if(a&&o!==null&&o!==!1){o??(o={});const l=bee(t,s),c=dqe(o,s,a,r,l);i[s]=new Qte(e.scaleName(`${s}`,!0),{value:c,explicit:o.type===c})}}return i}const xqe=Qee((e,t)=>o9(e)-o9(t));function vqe(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){one(s);for(const a of Ee(s.component.scales))if((t=i.scale)[a]??(t[a]=Pte(a,e)),i.scale[a]==="shared"){const o=r[a],l=s.component.scales[a].getWithExplicit("type");o?Qze(o.value,l.value)?r[a]=Ru(o,l,"type","scale",xqe):(i.scale[a]="independent",delete r[a]):r[a]=l}}for(const s of Ee(r)){const a=e.scaleName(s,!0),o=r[s];n[s]=new Qte(a,o);for(const l of e.children){const c=l.component.scales[s];c&&(l.renameScale(c.get("name"),a),c.merged=!0)}}return n}class PT{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function _n(e){return(e==null?void 0:e.type)==="unit"}function ws(e){return(e==null?void 0:e.type)==="facet"}function QR(e){return(e==null?void 0:e.type)==="concat"}function tg(e){return(e==null?void 0:e.type)==="layer"}class e${constructor(t,n,r,i,s,a,o){this.type=n,this.parent=r,this.config=s,this.correctDataNames=l=>{var c,u,f;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data)),(f=(u=l.from)==null?void 0:u.facet)!=null&&f.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=s,this.view=jr(o),this.name=t.name??i,this.title=Pc(t.title)?{text:t.title}:t.title?jr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new PT,this.projectionNameMap=r?r.projectionNameMap:new PT,this.signalNameMap=r?r.signalNameMap:new PT,this.data=t.data,this.description=t.description,this.transforms=AWe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:FVe(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:aS(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new xc,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...a?at(a):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){gqe(this)}parseProjection(){Xte(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Vte(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ee(r)){const a=r[s];a!==void 0&&(i[s]=an(a))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=an(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:en(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Pje(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ea)t[r].title&&n.push(Dje(this,r));for(const r of WR)n=n.concat(Mje(this,r));return n}assembleAxes(){return yje(this.component.axes,this.config)}assembleLegends(){return jte(this)}assembleProjections(){return oGe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...pQ(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return bt(["unit","layer"],this.type)?bt(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),en(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||ws(this.parent)?Zte(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return pn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Tn[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(ws(this.parent)){const n=Ite(t),r=Yw(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),a=i.get("range");if(xr(s)&&of(a)){const o=i.get("name"),l=bS(this,r),c=ZR(l);if(c){const u=Me({aggregate:"distinct",field:c},{expr:"datum"});return{signal:$te(o,i,u)}}else return we(tR(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(aQ(t)&&sl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(OUe(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class lne extends e${vgField(t,n={}){const r=this.fieldDef(t);if(r)return Me(r,n)}reduceFieldDef(t,n){return iVe(this.getMapping(),(r,i,s)=>{const a=Ja(i);return a?t(r,a,s):r},n)}forEachFieldDef(t,n){TR(this.getMapping(),(r,i)=>{const s=Ja(r);s&&t(s,i)},n)}}class ES extends Zt{clone(){return new ES(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${St(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class wS extends Zt{clone(){return new wS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${St(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class SS extends Zt{clone(){return new SS(this.parent,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,a)=>i[a]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${St(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class AS extends Zt{clone(){return new AS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${St(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class _0 extends Zt{clone(){return new _0(null,at(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[lo,oo],[da,co]]){const s=i.map(a=>{const o=er(n.encoding[a]);return ke(o)?o.field:al(o)?{expr:`${o.datum}`}:Ka(o)?{expr:`${o.value}`}:void 0});(s[0]||s[1])&&(t=new _0(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ts)){const i=n.typedFieldDef(ts);i.type===Kp&&(t=new _0(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Le);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${St(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class G1 extends Zt{clone(){return new G1(null,this.projection,at(this.fields),at(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[lo,oo],[da,co]]){const i=r.map(a=>{const o=er(n.encoding[a]);return ke(o)?o.field:al(o)?{expr:`${o.datum}`}:Ka(o)?{expr:`${o.value}`}:void 0}),s=r[0]===da?"2":"";(i[0]||i[1])&&(t=new G1(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Le))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${St(this.fields)} ${St(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class uh extends Zt{clone(){return new uh(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new uh(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(ke(i)&&ke(s)){const a=i.impute?i:s.impute?s:void 0;if(a===void 0)return;const o=i.impute?s:s.impute?i:void 0,{method:l,value:c,frame:u,keyvals:f}=a.impute,h=See(n.mark,r);return new uh(t,{impute:a.field,key:o.field,...l?{method:l}:{},...c!==void 0?{value:c}:{},...u?{frame:u}:{},...f!==void 0?{keyvals:f}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${St(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:a,frame:o=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:aWe(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?a:null};if(i&&i!=="value"){const c={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:o,ignorePeers:!1,...s?{groupby:s}:{}},u={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,c,u]}else return[l]}}class TS extends Zt{clone(){return new TS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${St(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class q1 extends Zt{clone(){return new q1(null,at(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:a}=r;let o=null;if(oWe(a)){let l=fne(a.data,s);l||(l=new Hh(a.data),s.push(l));const c=n.getName(`lookup_${i}`);o=new Xi(l,c,Tn.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=o}else if(lWe(a)){const l=a.param;r={as:l,...r};let c;try{c=n.getSelectionComponent(pn(l),l)}catch{throw new Error(RUe(l))}if(o=c.materialized,!o)throw new Error($Ue(l))}return new q1(t,r,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ie(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${St({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Ie(this.transform.as)}:{}};else{let n=this.transform.as;Le(n)||(we(VUe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class kS extends Zt{clone(){return new kS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${St(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class CS extends Zt{clone(){return new CS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${St(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class FS extends Zt{clone(){return new FS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=To((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${St(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class OS extends Zt{clone(){return new OS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${St(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function cne(e){let t=0;function n(r,i){if(r instanceof Hh&&!r.isGenerator&&!xp(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Qr&&(r.parent instanceof Hh&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Qp){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof cv||r instanceof uv||r instanceof Ep||r instanceof Zp||r instanceof yp||r instanceof G1||r instanceof Wa||r instanceof q1||r instanceof eg||r instanceof gd||r instanceof AS||r instanceof SS||r instanceof ES||r instanceof TS||r instanceof kS||r instanceof CS||r instanceof Lu||r instanceof OS||r instanceof FS||r instanceof wS)&&i.transform.push(r.assemble()),(r instanceof $o||r instanceof Ro||r instanceof uh||r instanceof Kl||r instanceof _0)&&i.transform.push(...r.assemble()),r instanceof Xi&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Xi?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Xi&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const a of r.children)n(a,{name:null,source:s,transform:[]});break}}}return n}function yqe(e){const t=[],n=cne(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function _qe(e,t){const n=[],r=cne(n);let i=0;for(const a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);const o=a.assemble();r(a,o)}for(const a of n)a.transform.length===0&&delete a.transform;let s=0;for(const[a,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(s++,0,n.splice(a,1)[0]);for(const a of n)for(const o of a.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const a of n)a.name in t&&(a.values=t[a.name]);return n}function bqe(e){return e==="top"||e==="left"||Ve(e)?"header":"footer"}function Eqe(e){for(const t of ea)wqe(e,t);r7(e,"x"),r7(e,"y")}function wqe(e,t){var a;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const o=n[t],l=bp("title",null,r,t);let c=v0(o,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(c=ge(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const u=bp("labelOrient",o.header,r,t),f=o.header!==null?Rn((a=o.header)==null?void 0:a.labels,r.header.labels,!0):!1,h=bt(["bottom","right"],u)?"footer":"header";s.layoutHeaders[t]={title:o.header!==null?c:null,facetFieldDef:o,[h]:t==="facet"?[]:[une(e,t,f)]}}}function une(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function r7(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=qR(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",a=r[s];for(const o of n.component.axes[t]){const l=bqe(o.get("orient"));a[l]??(a[l]=[une(e,s,!1)]);const c=um(o,"main",e.config,{header:!0});c&&a[l][0].axes.push(c),o.mainExtracted=!0}}}}function Sqe(e){t$(e),Lb(e,"width"),Lb(e,"height")}function Aqe(e){t$(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Lb(e,t),Lb(e,n)}function t$(e){for(const t of e.children)t.parseLayoutSize()}function Lb(e,t){const n=Ite(t),r=Yw(n),i=e.component.resolve,s=e.component.layoutSize;let a;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),c=i.scale[r]??Pte(r,e);if(c==="independent"&&l.value==="step"){a=void 0;break}if(a){if(c==="independent"&&a.value!==l.value){a=void 0;break}a=Ru(a,l,n,"")}else a=l}if(a){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,a)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Tqe(e){const{size:t,component:n}=e;for(const r of gc){const i=ns(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Go(s)?"step":s,!0)}else{const s=kqe(e,i);n.layoutSize.set(i,s,!1)}}}function kqe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),a=i.get("range");if(xr(s)){const o=Mb(r.view,t);return of(a)||Go(o)?"step":o}else return PF(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return PF(r.view,t);{const s=Mb(r.view,t);return Go(s)?s.step:s}}}function QF(e,t,n){return Me(t,{suffix:`by_${Me(e)}`,...n})}class qm extends lne{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=a$(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!rv(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ee(t),r={};for(const i of n){if(![Gl,ql].includes(i)){we(Zw(i,"facet"));break}const s=t[i];if(s.field===void 0){we(MF(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=AR(t,n);return r.header?r.header=jr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=NS(this),this.child.parseData()}parseLayoutSize(){t$(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Eqe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of ea)for(const r of jR){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:a}=i;if(a){const o=bp("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(o)){const l=yS(n,o);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const o=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof qm))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof qm?{...this.channelHasField("column")?{encode:{update:{columns:{field:Me(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof qm){if(this.child.channelHasField("column")){const i=Me(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of gc){const s=this.child.component.scales[i];if(s&&!s.merged){const a=s.get("type"),o=s.get("range");if(xr(a)&&of(o)){const l=bS(this.child,i),c=ZR(l);c?(t.push(c),n.push("distinct"),r.push(`distinct_${c}`)):we(tR(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:a,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const u of ea){const f=this.facet[u];if(f){l.push(Me(f));const{bin:h,sort:d}=f;if(on(h)&&l.push(Me(f,{binSuffix:"end"})),Xl(d)){const{field:p,op:g=sS}=d,m=QF(f,d);r&&i?(s.push(m),a.push("max"),o.push(m)):(s.push(p),a.push(g),o.push(m))}else if(ge(d)){const p=_p(f,u);s.push(p),a.push("max"),o.push(p)}}}const c=!!r&&!!i;return{name:t,data:n,groupby:l,...c||s.length>0?{aggregate:{...c?{cross:c}:{},...s.length?{fields:s,ops:a,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Xl(r.sort)?[QF(r,r.sort,{expr:"datum"})]:ge(r.sort)?[_p(r,t,{expr:"datum"})]:[Me(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Xl(i)?i.order:!ge(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return GF(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of WR)if(t[s]){const a=bp("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(a))return GF(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=yqe(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:ea.map(l=>this.facetSortFields(l)).flat(),order:ea.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(BWe(this,[]))}]}getMapping(){return this.facet}}function Cqe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Xl(s.sort)){const{field:a,op:o=sS}=s.sort;e=i=new gd(e,{joinaggregate:[{op:o,field:a,as:QF(s,s.sort,{forAs:!0})}],groupby:[Me(s)]})}return i}return null}function fne(e,t){var n,r,i,s;for(const a of t){const o=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,c=(r=o.format)==null?void 0:r.feature;if(l&&c)continue;const u=(i=e.format)==null?void 0:i.feature;if((u||c)&&u!==c)continue;const f=(s=o.format)==null?void 0:s.mesh;if(!((l||f)&&l!==f)){if(j1(e)&&j1(o)){if(vs(e.values,o.values))return a}else if(xp(e)&&xp(o)){if(e.url===o.url)return a}else if(ete(e)&&e.name===a.dataName)return a}}return null}function Fqe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Hh({values:[]});return t.push(r),r}const n=fne(e.data,t);if(n)return cu(e.data)||(n.data.format=XZ({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Hh(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Oqe(e,t,n){let r=0;for(const i of t.transforms){let s,a;if(vWe(i))a=e=new yp(e,i),s="derived";else if(LR(i)){const o=_Ge(i);a=e=Qr.makeWithAncestors(e,{},o,n)??e,e=new Zp(e,t,i.filter)}else if(Yee(i))a=e=$o.makeFromTransform(e,i,t),s="number";else if(_We(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Qr(e,{[i.field]:s}),n.set(i.field,s,!1)),a=e=Ro.makeFromTransform(e,i);else if(bWe(i))a=e=Wa.makeFromTransform(e,i),s="number",VR(t)&&(e=new Lu(e));else if(Xee(i))a=e=q1.make(e,t,i,r++),s="derived";else if(gWe(i))a=e=new eg(e,i),s="number";else if(mWe(i))a=e=new gd(e,i),s="number";else if(EWe(i))a=e=Kl.makeFromTransform(e,i),s="derived";else if(wWe(i))a=e=new AS(e,i),s="derived";else if(SWe(i))a=e=new wS(e,i),s="derived";else if(xWe(i))a=e=new SS(e,i),s="derived";else if(cWe(i))a=e=new FS(e,i),s="derived";else if(pWe(i))e=new OS(e,i);else if(yWe(i))a=e=uh.makeFromTransform(e,i),s="derived";else if(uWe(i))a=e=new ES(e,i),s="derived";else if(fWe(i))a=e=new kS(e,i),s="derived";else if(hWe(i))a=e=new CS(e,i),s="derived";else if(dWe(i))a=e=new TS(e,i),s="derived";else{we(HUe(i));continue}if(a&&s!==void 0)for(const o of a.producedFields()??[])n.set(o,s,!1)}return e}function NS(e){var m;let t=Fqe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(cu(i)||xp(i)||j1(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new IWe;cu(i)?(tte(i)?t=new uv(t,i.sequence):PR(i)&&(t=new cv(t,i.graticule)),a.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(a.parseNothing=!0),t=Qr.makeExplicit(t,e,a)??t,t=new Lu(t);const o=e.parent&&tg(e.parent);(_n(e)||ws(e))&&o&&(t=$o.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Oqe(t,e,a));const l=EGe(e),c=bGe(e);t=Qr.makeWithAncestors(t,{},{...l,...c},a)??t,_n(e)&&(t=_0.parseAll(t,e),t=G1.parseAll(t,e)),(_n(e)||ws(e))&&(o||(t=$o.makeFromEncoding(t,e)??t),t=Ro.makeFromEncoding(t,e)??t,t=yp.parseAllForSortIndex(t,e));const u=t=Ty(Tn.Raw,e,t);if(_n(e)){const x=Wa.makeFromEncoding(t,e);x&&(t=x,VR(e)&&(t=new Lu(t))),t=uh.makeFromEncoding(t,e)??t,t=Kl.makeFromEncoding(t,e)??t}let f,h;if(_n(e)){const{markDef:x,mark:v,config:y}=e,_=Kt("invalid",x,y),{marks:b,scales:w}=h=rte({invalid:_,isPath:lf(v)});b!==w&&w==="include-invalid-values"&&(f=t=Ty(Tn.PreFilterInvalid,e,t)),b==="exclude-invalid-values"&&(t=Ep.make(t,e,h)??t)}const d=t=Ty(Tn.Main,e,t);let p;if(_n(e)&&h){const{marks:x,scales:v}=h;x==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=Ep.make(t,e,h)??t,p=t=Ty(Tn.PostFilterInvalid,e,t))}_n(e)&&xje(e,d);let g=null;if(ws(e)){const x=e.getName("facet");t=Cqe(t,e.facet)??t,g=new Qp(t,e,x,d.getSource()),n[x]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:u,main:d,facetRoot:g,ancestorParse:a,preFilterInvalid:f,postFilterInvalid:p}}function Ty(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),a=new Xi(n,s,e,i);return r[s]=a,a}class Nqe extends e${constructor(t,n,r,i){var s,a,o,l;super(t,"concat",n,r,i,t.resolve),(((a=(s=t.resolve)==null?void 0:s.axis)==null?void 0:a.x)==="shared"||((l=(o=t.resolve)==null?void 0:o.axis)==null?void 0:l.y)==="shared")&&we(BUe),this.children=this.getChildren(t).map((c,u)=>a$(c,this,this.getName(`concat_${u}`),void 0,i))}parseData(){this.component.data=NS(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ee(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return hS(t)?t.vconcat:$R(t)?t.hconcat:t.concat}parseLayoutSize(){Aqe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=GR(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Dqe(e){return e===!1||e===null}const Mqe={disable:1,gridScale:1,scale:1,...vee,labelExpr:1,encode:1},hne=Ee(Mqe);class n$ extends xc{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new n$(at(this.explicit),at(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Dqe(this.get(t))}hasOrientSignalRef(){return Ve(this.explicit.orient)}}function Rqe(e,t,n){const{encoding:r,config:i}=e,s=er(r[t])??er(r[il(t)]),a=e.axis(t)||{},{format:o,formatType:l}=a;if(Bh(l))return{text:Pa({fieldOrDatumDef:s,field:"datum.value",format:o,formatType:l,config:i}),...n};if(o===void 0&&l===void 0&&i.customFormatTypes){if(pp(s)==="quantitative"){if(gp(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Pa({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Pa({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(pp(s)==="temporal"&&i.timeFormatType&&ke(s)&&!s.timeUnit)return{text:Pa({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function $qe(e){return gc.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Hqe(n,e)]),t),{})}const Iqe={bottom:"top",top:"bottom",left:"right",right:"left"};function Lqe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ee(i.component.axes))n.axis[s]=qR(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Pqe(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of gc){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const a of s.component.axes[i]){const{value:o,explicit:l}=a.getWithExplicit("orient");if(!Ve(o)){if(r[o]>0&&!l){const c=Iqe[o];r[o]>r[c]&&a.set("orient",c,!1)}r[o]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,a]of(t[i]||[]).entries())s>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function Pqe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const a=i.getWithExplicit("orient"),o=s.getWithExplicit("orient");if(a.explicit&&o.explicit&&a.value!==o.value)return;e[r]=Bqe(i,s)}}}else return t.map(n=>n.clone());return e}function Bqe(e,t){for(const n of hne){const r=Ru(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return bQ(i,s);case"gridScale":return{explicit:i.explicit,value:Rn(i.value,s.value)}}return pS(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Uqe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ve(n.labelAngle)?n.labelAngle:V1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Nte(r,i))return!0}return e===n[t]}const zqe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Hqe(e,t){var x,v;let n=t.axis(e);const r=new n$,i=er(t.encoding[e]),{mark:s,config:a}=t,o=(n==null?void 0:n.orient)||((x=a[e==="x"?"axisX":"axisY"])==null?void 0:x.orient)||((v=a.axis)==null?void 0:v.orient)||kje(e),l=t.getScaleComponent(e).get("type"),c=_je(e,l,o,t.config),u=n!==void 0?!n:WF("disable",a.style,n==null?void 0:n.style,c).configValue;if(r.set("disable",u,n!==void 0),u)return r;n=n||{};const f=Sje(i,n,e,a.style,c),h=iee(n.formatType,i,l),d=ree(i,i.type,n.format,n.formatType,a,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:o,labelAngle:f,format:d,formatType:h,mark:s,config:a};for(const y of hne){const _=y in H9?H9[y](p):p9(y)?n[y]:void 0,b=_!==void 0,w=Uqe(_,y,n,t,e);if(b&&w)r.set(y,_,w);else{const{configValue:E=void 0,configFrom:A=void 0}=p9(y)&&y!=="values"?WF(y,a.style,n.style,c):{},S=E!==void 0;b&&!S?r.set(y,_,w):(A!=="vgAxisConfig"||zqe.has(y)&&S||ov(E)||Ve(E))&&r.set(y,E,!1)}}const g=n.encoding??{},m=xee.reduce((y,_)=>{if(!r.hasAxisPart(_))return y;const b=Lte(g[_]??{},t),w=_==="labels"?Rqe(t,e,b):b;return w!==void 0&&!en(w)&&(y[_]={update:w}),y},{});return en(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function Vqe({encoding:e,size:t}){for(const n of gc){const r=ns(n);Go(t[r])&&Jc(e[n])&&(delete t[r],we(TQ(r)))}return t}const Wqe={vgMark:"arc",encodeEntry:e=>({...ya(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Zr("x",e,{defaultPos:"mid"}),...Zr("y",e,{defaultPos:"mid"}),...$u(e,"radius"),...$u(e,"theta")})},jqe={vgMark:"area",encodeEntry:e=>({...ya(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Rb("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Rb("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...HR(e)})},Gqe={vgMark:"rect",encodeEntry:e=>({...ya(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$u(e,"x"),...$u(e,"y")})},qqe={vgMark:"shape",encodeEntry:e=>({...ya(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ke(n)&&n.type===Kp?{field:Me(n,{expr:"datum"})}:{}}]}},Xqe={vgMark:"image",encodeEntry:e=>({...ya(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...$u(e,"x"),...$u(e,"y"),...UR(e,"url")})},Yqe={vgMark:"line",encodeEntry:e=>({...ya(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Zr("x",e,{defaultPos:"mid"}),...Zr("y",e,{defaultPos:"mid"}),...ur("size",e,{vgChannel:"strokeWidth"}),...HR(e)})},Kqe={vgMark:"trail",encodeEntry:e=>({...ya(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Zr("x",e,{defaultPos:"mid"}),...Zr("y",e,{defaultPos:"mid"}),...ur("size",e),...HR(e)})};function r$(e,t){const{config:n}=e;return{...ya(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Zr("x",e,{defaultPos:"mid"}),...Zr("y",e,{defaultPos:"mid"}),...ur("size",e),...ur("angle",e),...Jqe(e,n,t)}}function Jqe(e,t,n){return n?{shape:{value:n}}:ur("shape",e)}const Zqe={vgMark:"symbol",encodeEntry:e=>r$(e)},Qqe={vgMark:"symbol",encodeEntry:e=>r$(e,"circle")},eXe={vgMark:"symbol",encodeEntry:e=>r$(e,"square")},tXe={vgMark:"rect",encodeEntry:e=>({...ya(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$u(e,"x"),...$u(e,"y")})},nXe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...ya(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Rb("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Rb("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ur("size",e,{vgChannel:"strokeWidth"})}}},rXe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...ya(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Zr("x",e,{defaultPos:"mid"}),...Zr("y",e,{defaultPos:"mid"}),...UR(e),...ur("size",e,{vgChannel:"fontSize"}),...ur("angle",e),...P9("align",iXe(e.markDef,n,t)),...P9("baseline",sXe(e.markDef,n,t)),...Zr("radius",e,{defaultPos:null}),...Zr("theta",e,{defaultPos:null})}}};function iXe(e,t,n){if(Kt("align",e,n)===void 0)return"center"}function sXe(e,t,n){if(Kt("baseline",e,n)===void 0)return"middle"}const aXe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...ya(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Zr("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Zr("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ur("size",e,{defaultRef:oXe(e),vgChannel:i}),[s]:an(Kt("thickness",n,t))}}};function oXe(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"x":"y",a=Xw(s),o=e.getScaleComponent(a)||e.getScaleComponent(s),l=e.scaleName(a)||e.scaleName(s),c=Kt("size",n,t,{vgChannel:i})??t.tick.bandSize;if(c!==void 0)return an(c);if((o==null?void 0:o.get("type"))==="band")return{scale:l,band:1};const u=o==null?void 0:o.get("range"),{tickBandPaddingInner:f}=t.scale,h=u&&of(u)?u.step:Db(t.view,i);return $t(h)&&$t(f)?{value:h*(1-f)}:{signal:`${DF(f)} * ${DF(h)}`}}const ky={arc:Wqe,area:jqe,bar:Gqe,circle:Qqe,geoshape:qqe,image:Xqe,line:Yqe,point:Zqe,rect:tXe,rule:nXe,square:eXe,text:rXe,tick:aXe,trail:Kqe};function lXe(e){if(bt([rS,tS,gHe],e.mark)){const t=See(e.mark,e.encoding);if(t.length>0)return cXe(e,t)}else if(e.mark===nS){const t=NF.some(n=>Kt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return uXe(e)}return i$(e)}const i7="faceted_path_";function cXe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:i7+e.requestDataName(Tn.Main),data:e.requestDataName(Tn.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:i$(e,{fromPrefix:i7})}]}const s7="stack_group_";function uXe(e){var c;const[t]=i$(e,{fromPrefix:s7}),n=e.scaleName(e.stack.fieldChannel),r=(u={})=>e.vgField(e.stack.fieldChannel,u),i=(u,f)=>{const h=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${u}(${h.map(d=>`scale('${n}',${d})`).join(",")})`};let s,a;e.stack.fieldChannel==="x"?(s={...op(t.encode.update,["y","yc","y2","height",...NF]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...qi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...op(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...qi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of NF){const f=Wo(u,e.markDef,e.config);t.encode.update[u]?(s[u]=t.encode.update[u],delete t.encode.update[u]):f&&(s[u]=an(f)),f&&(t.encode.update[u]={value:0})}const o=[];if(((c=e.stack.groupbyChannels)==null?void 0:c.length)>0)for(const u of e.stack.groupbyChannels){const f=e.fieldDef(u),h=Me(f);h&&o.push(h),(f!=null&&f.bin||f!=null&&f.timeUnit)&&o.push(Me(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,f)=>{if(t.encode.update[f])return{...u,[f]:t.encode.update[f]};{const h=Wo(f,e.markDef,e.config);return h!==void 0?{...u,[f]:an(h)}:u}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Tn.Main),name:s7+e.requestDataName(Tn.Main),groupby:o,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function fXe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,a=t.order;if(!(!ge(a)&&Ka(a)&&FF(a.value)||!a&&FF(Kt("order",i,s)))){if((ge(a)||ke(a))&&!n)return vQ(a,{expr:"datum"});if(lf(r)){const o=i.orient==="horizontal"?"y":"x",l=t[o];if(ke(l))return{field:o}}}}function i$(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,a=Rn(r.clip,hXe(e),dXe(e)),o=mQ(r),l=i.key,c=fXe(e),u=pXe(e),f=Kt("aria",r,s),h=ky[n].postEncodingTransform?ky[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:ky[n].vgMark,...a?{clip:a}:{},...o?{style:o}:{},...l?{key:l.field}:{},...c?{sort:c}:{},...u||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Tn.Main)},encode:{update:ky[n].encodeEntry(e)},...h?{transform:h}:{}}]}function hXe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function dXe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function pXe(e){if(!e.component.selection)return null;const t=Ee(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ee(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class dne extends lne{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,m9(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=jo(t.mark)?{...t.mark}:{type:t.mark},o=a.type;a.filled===void 0&&(a.filled=ZVe(a,s,{graticule:t.data&&PR(t.data)}));const l=this.encoding=nVe(t.encoding||{},o,a.filled,s);this.markDef=jee(a,l,s),this.size=Vqe({encoding:l,size:m9(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=Wee(this.markDef,l),this.specifiedScales=this.initScales(o,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(c=>MR(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===YQ,r=t&&QBe.some(i=>ot(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return ZM.reduce((r,i)=>{const s=er(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=jr(t);return ge(n)&&(i.domain=n.map(gs)),ge(r)&&(i.range=r.map(gs)),i}initAxes(t){return gc.reduce((n,r)=>{const i=t[r];if(ot(i)||r===mn&&ot(t.x2)||r===_r&&ot(t.y2)){const s=ot(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ee(t),r={};for(const i of n){const s=t[i];r[i]=ov(s)?gQ(s):gs(s)}return r}initLegends(t){return cUe.reduce((n,r)=>{const i=er(t[r]);if(i&&fUe(r)){const s=i.legend;n[r]=s&&jr(s)}return n},{})}parseData(){this.component.data=NS(this)}parseLayoutSize(){Tqe(this)}parseSelections(){this.component.selection=mje(this,this.selection)}parseMarkGroup(){this.component.mark=lXe(this)}parseAxesAndHeaders(){this.component.axes=$qe(this)}assembleSelectionTopLevelSignals(t){return UWe(this,t)}assembleSignals(){return[...Cte(this),...PWe(this,[])]}assembleSelectionData(t){return zWe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return GR(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!tg(this.parent))&&(t=ste(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return lh(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Ja(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ni(n)?n:null}}class s$ extends e${constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const a={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,l)=>{if(dS(o))return new s$(o,this,this.getName(`layer_${l}`),a,s);if(mc(o))return new dne(o,this,this.getName(`layer_${l}`),a,s);throw new Error(eR(o))})}parseData(){this.component.data=NS(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Sqe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ee(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Lqe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Cte(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),GR(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Ie(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return HWe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),jte(this))}}function a$(e,t,n,r,i){if(aS(e))return new qm(e,t,n,i);if(dS(e))return new s$(e,t,n,r,i);if(mc(e))return new dne(e,t,n,r,i);if(TVe(e))return new Nqe(e,t,n,i);throw new Error(eR(e))}function gXe(e,t={}){t.logger&&Fze(t.logger),t.fieldTitle&&pee(t.fieldTitle);try{const n=Vee(Lp(t.config,e.config)),r=Zee(e,n),i=a$(r,null,"",void 0,n);return i.parse(),PGe(i.component.data,i),{spec:xXe(i,mXe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Oze(),t.fieldTitle&&qHe()}}function mXe(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Le(t)&&(t={type:t}),i&&s&&MWe(t.type)){if(i==="step"&&s==="step")we(e9()),t.type="pad";else if(i==="step"||s==="step"){const a=i==="step"?"width":"height";we(e9(Yw(a)));const o=a==="width"?"height":"width";t.type=RWe(o)}}return{...Ee(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...C9(n,!1),...C9(e,!0)}}function xXe(e,t,n={},r){const i=e.config?UVe(e.config):void 0,s=[].concat(e.assembleSelectionData([]),_qe(e.component.data,n)),a=e.assembleProjections(),o=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let u=e.assembleLayoutSignals();u=u.filter(d=>(d.name==="width"||d.name==="height")&&d.value!==void 0?(t[d.name]=+d.value,!1):!0);const{params:f,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...o?{title:o}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...u,...e.assembleSelectionTopLevelSignals([]),...Bee(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const vXe=qBe.version,yXe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:cp,accessPathWithDatum:jM,compile:gXe,contains:bt,deepEqual:vs,deleteNestedProperty:Eb,duplicate:at,entries:Nu,every:HM,fieldIntersection:WM,flatAccessWithDatum:KZ,getFirstDefined:Rn,hasIntersection:VM,hash:St,internalField:QZ,isBoolean:H1,isEmpty:en,isEqual:YBe,isInternalField:eQ,isNullOrFalse:FF,isNumeric:Hw,keys:Ee,logicalExpr:jm,mergeDeep:XZ,never:qZ,normalize:Zee,normalizeAngle:V1,omit:qi,pick:op,prefixGenerator:OF,removePathFromField:Xp,replaceAll:Rh,replacePathInField:ha,resetIdCounter:JBe,setEqual:YZ,some:lp,stringify:tn,titleCase:Kx,unique:To,uniqueId:ZZ,vals:Or,varName:pn,version:vXe},Symbol.toStringTag,{value:"Module"}));function pne(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var _Xe="vega-themes",bXe="2.15.0",EXe="Themes for stylized Vega and Vega-Lite visualizations.",wXe=["vega","vega-lite","themes","style"],SXe="BSD-3-Clause",AXe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},TXe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],kXe="build/vega-themes.js",o$="build/vega-themes.module.js",CXe="build/vega-themes.min.js",FXe="build/vega-themes.min.js",OXe="build/vega-themes.module.d.ts",NXe={type:"git",url:"https://github.com/vega/vega-themes.git"},DXe=["src","build"],MXe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},RXe={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},$Xe={vega:"*","vega-lite":"*"},IXe={},LXe={name:_Xe,version:bXe,description:EXe,keywords:wXe,license:SXe,author:AXe,contributors:TXe,main:kXe,module:o$,unpkg:CXe,jsdelivr:FXe,types:OXe,repository:NXe,files:DXe,scripts:MXe,devDependencies:RXe,peerDependencies:$Xe,dependencies:IXe};const Md="#fff",a7="#888",PXe={background:"#333",view:{stroke:a7},title:{color:Md,subtitleColor:Md},style:{"guide-label":{fill:Md},"guide-title":{fill:Md}},axis:{domainColor:Md,gridColor:a7,tickColor:Md}},xf="#4572a7",BXe={background:"#fff",arc:{fill:xf},area:{fill:xf},line:{stroke:xf,strokeWidth:2},path:{stroke:xf},rect:{fill:xf},shape:{stroke:xf},symbol:{fill:xf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},vf="#30a2da",BT="#cbcbcb",UXe="#999",zXe="#333",o7="#f0f0f0",l7="#333",HXe={arc:{fill:vf},area:{fill:vf},axis:{domainColor:BT,grid:!0,gridColor:BT,gridWidth:1,labelColor:UXe,labelFontSize:10,titleColor:zXe,tickColor:BT,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:o7,group:{fill:o7},legend:{labelColor:l7,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:l7,titleFontSize:14,titlePadding:10},line:{stroke:vf,strokeWidth:2},path:{stroke:vf,strokeWidth:.5},rect:{fill:vf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:vf},bar:{binSpacing:2,fill:vf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},yf="#000",VXe={group:{fill:"#e5e5e5"},arc:{fill:yf},area:{fill:yf},line:{stroke:yf},path:{stroke:yf},rect:{fill:yf},shape:{stroke:yf},symbol:{fill:yf,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},WXe=22,jXe="normal",c7="Benton Gothic, sans-serif",u7=11.5,GXe="normal",_f="#82c6df",UT="Benton Gothic Bold, sans-serif",f7="normal",h7=13,Mg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},qXe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:UT,fontSize:WXe,fontWeight:jXe},arc:{fill:_f},area:{fill:_f},line:{stroke:_f,strokeWidth:2},path:{stroke:_f},rect:{fill:_f},shape:{stroke:_f},symbol:{fill:_f,size:30},axis:{labelFont:c7,labelFontSize:u7,labelFontWeight:GXe,titleFont:UT,titleFontSize:h7,titleFontWeight:f7},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:c7,labelFontSize:u7,symbolType:"square",titleFont:UT,titleFontSize:h7,titleFontWeight:f7},range:{category:Mg["category-6"],diverging:Mg["fireandice-6"],heatmap:Mg["fire-7"],ordinal:Mg["fire-7"],ramp:Mg["fire-7"]}},bf="#ab5787",Cy="#979797",XXe={background:"#f9f9f9",arc:{fill:bf},area:{fill:bf},line:{stroke:bf},path:{stroke:bf},rect:{fill:bf},shape:{stroke:bf},symbol:{fill:bf,size:30},axis:{domainColor:Cy,domainWidth:.5,gridWidth:.2,labelColor:Cy,tickColor:Cy,tickWidth:.2,titleColor:Cy},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ef="#3e5c69",YXe={background:"#fff",arc:{fill:Ef},area:{fill:Ef},line:{stroke:Ef},path:{stroke:Ef},rect:{fill:Ef},shape:{stroke:Ef},symbol:{fill:Ef},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},zs="#1696d2",d7="#000000",KXe="#FFFFFF",Fy="Lato",zT="Lato",JXe="Lato",ZXe="#DEDDDD",QXe=18,Rg={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},eYe={background:KXe,title:{anchor:"start",fontSize:QXe,font:Fy},axisX:{domain:!0,domainColor:d7,domainWidth:1,grid:!1,labelFontSize:12,labelFont:zT,labelAngle:0,tickColor:d7,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Fy},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:ZXe,gridWidth:1,labelFontSize:12,labelFont:zT,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Fy,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:zT,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Fy,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Rg["six-groups-cat-1"],diverging:Rg["diverging-colors"],heatmap:Rg["diverging-colors"],ordinal:Rg["six-groups-seq"],ramp:Rg["shades-blue"]},area:{fill:zs},rect:{fill:zs},line:{color:zs,stroke:zs,strokeWidth:5},trail:{color:zs,stroke:zs,strokeWidth:0,size:1},path:{stroke:zs,strokeWidth:.5},point:{filled:!0},text:{font:JXe,color:zs,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:zs,stroke:null}},arc:{fill:zs},shape:{stroke:zs},symbol:{fill:zs,size:30}},wf="#3366CC",p7="#ccc",Oy="Arial, sans-serif",tYe={arc:{fill:wf},area:{fill:wf},path:{stroke:wf},rect:{fill:wf},shape:{stroke:wf},symbol:{stroke:wf},circle:{fill:wf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Oy,fontSize:12},"guide-title":{font:Oy,fontSize:12},"group-title":{font:Oy,fontSize:12}},title:{font:Oy,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:p7,tickColor:p7,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},l$=e=>e*(1/3+1),g7=l$(9),m7=l$(10),x7=l$(12),$g="Segoe UI",v7="wf_standard-font, helvetica, arial, sans-serif",y7="#252423",Ig="#605E5C",_7="transparent",nYe="#C8C6C4",wa="#118DFF",rYe="#12239E",iYe="#E66C37",sYe="#6B007B",aYe="#E044A7",oYe="#744EC2",lYe="#D9B300",cYe="#D64550",gne=wa,mne="#DEEFFF",b7=[mne,gne],uYe=[mne,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",gne],fYe={view:{stroke:_7},background:_7,font:$g,header:{titleFont:v7,titleFontSize:x7,titleColor:y7,labelFont:$g,labelFontSize:m7,labelColor:Ig},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Ig,labelFontSize:g7,titleFont:v7,titleColor:y7,titleFontSize:x7,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:nYe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:wa},line:{stroke:wa,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:$g,fontSize:g7,fill:Ig},arc:{fill:wa},area:{fill:wa,line:!0,opacity:.6},path:{stroke:wa},rect:{fill:wa},point:{fill:wa,filled:!0,size:75},shape:{stroke:wa},symbol:{fill:wa,strokeWidth:1.5,size:50},legend:{titleFont:$g,titleFontWeight:"bold",titleColor:Ig,labelFont:$g,labelFontSize:m7,labelColor:Ig,symbolType:"circle",symbolSize:75},range:{category:[wa,rYe,iYe,sYe,aYe,oYe,lYe,cYe],diverging:b7,heatmap:b7,ordinal:uYe}},HT='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',hYe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',VT=400,Ny={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},dYe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],pYe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function DS({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=Ny.gridBg[e],i=Ny.textPrimary[e],s=Ny.textSecondary[e],a=n==="dark"?dYe:pYe,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:HT,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:hYe,labelFontWeight:VT,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Ny.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:HT,fill:s,fontWeight:VT},"guide-title":{font:HT,fill:s,fontWeight:VT}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const gYe=DS({theme:"white",background:"#ffffff"}),mYe=DS({theme:"g10",background:"#f4f4f4"}),xYe=DS({theme:"g90",background:"#262626"}),vYe=DS({theme:"g100",background:"#161616"}),yYe=LXe.version,_Ye=Object.freeze(Object.defineProperty({__proto__:null,carbong10:mYe,carbong100:vYe,carbong90:xYe,carbonwhite:gYe,dark:PXe,excel:BXe,fivethirtyeight:HXe,ggplot2:VXe,googlecharts:tYe,latimes:qXe,powerbi:fYe,quartz:XXe,urbaninstitute:eYe,version:yYe,vox:YXe},Symbol.toStringTag,{value:"Module"}));function bYe(e,t,n,r){if(ge(e))return`[${e.map(i=>t(Le(i)?i:E7(i,n))).join(", ")}]`;if($e(e)){let i="";const{title:s,image:a,...o}=e;s&&(i+=`<h2>${t(s)}</h2>`),a&&(i+=`<img src="${new URL(t(a),r||location.href).href}">`);const l=Object.keys(o);if(l.length>0){i+="<table>";for(const c of l){let u=o[c];u!==void 0&&($e(u)&&(u=E7(u,n)),i+=`<tr><td class="key">${t(c)}</td><td class="value">${t(u)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function EYe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function E7(e,t){return JSON.stringify(e,EYe(t))}var wYe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const xne="vg-tooltip-element",SYe={offsetX:10,offsetY:10,id:xne,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:AYe,maxDepth:2,formatTooltip:bYe,baseURL:""};function AYe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function TYe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return wYe.toString().replace(xne,e)}function kYe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class CYe{constructor(t){this.options={...SYe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=TYe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:a}=kYe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${s}px`}}var WT={};function FYe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class OYe{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var NYe=OYe;const DYe=Object.freeze({loose:!0}),MYe=Object.freeze({}),RYe=e=>e?typeof e!="object"?DYe:e:MYe;var c$=RYe,e3={exports:{}};const $Ye="2.0.0",vne=256,IYe=Number.MAX_SAFE_INTEGER||9007199254740991,LYe=16,PYe=vne-6,BYe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var u$={MAX_LENGTH:vne,MAX_SAFE_COMPONENT_LENGTH:LYe,MAX_SAFE_BUILD_LENGTH:PYe,MAX_SAFE_INTEGER:IYe,RELEASE_TYPES:BYe,SEMVER_SPEC_VERSION:$Ye,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const UYe=typeof process=="object"&&WT&&WT.NODE_DEBUG&&/\bsemver\b/i.test(WT.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var MS=UYe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=u$,s=MS;t=e.exports={};const a=t.re=[],o=t.safeRe=[],l=t.src=[],c=t.t={};let u=0;const f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[f,r]],d=g=>{for(const[m,x]of h)g=g.split(`${m}*`).join(`${m}{0,${x}}`).split(`${m}+`).join(`${m}{1,${x}}`);return g},p=(g,m,x)=>{const v=d(m),y=u++;s(g,y,m),c[g]=y,l[y]=m,a[y]=new RegExp(m,x?"g":void 0),o[y]=new RegExp(v,x?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),p("FULL",`^${l[c.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),p("LOOSE",`^${l[c.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),p("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[c.COERCE],!0),p("COERCERTLFULL",l[c.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(e3,e3.exports);var f$=e3.exports;const w7=/^[0-9]+$/,yne=(e,t)=>{const n=w7.test(e),r=w7.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},zYe=(e,t)=>yne(t,e);var HYe={compareIdentifiers:yne,rcompareIdentifiers:zYe};const Dy=MS,{MAX_LENGTH:S7,MAX_SAFE_INTEGER:My}=u$,{safeRe:A7,t:T7}=f$,VYe=c$,{compareIdentifiers:Rd}=HYe;let WYe=class mo{constructor(t,n){if(n=VYe(n),t instanceof mo){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>S7)throw new TypeError(`version is longer than ${S7} characters`);Dy("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?A7[T7.LOOSE]:A7[T7.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>My||this.major<0)throw new TypeError("Invalid major version");if(this.minor>My||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>My||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<My)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Dy("SemVer.compare",this.version,this.options,t),!(t instanceof mo)){if(typeof t=="string"&&t===this.version)return 0;t=new mo(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof mo||(t=new mo(t,this.options)),Rd(this.major,t.major)||Rd(this.minor,t.minor)||Rd(this.patch,t.patch)}comparePre(t){if(t instanceof mo||(t=new mo(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(Dy("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Rd(r,i)}while(++n)}compareBuild(t){t instanceof mo||(t=new mo(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(Dy("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Rd(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),Rd(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var h$=WYe;const k7=h$,jYe=(e,t,n)=>new k7(e,n).compare(new k7(t,n));var ng=jYe;const GYe=ng,qYe=(e,t,n)=>GYe(e,t,n)===0;var XYe=qYe;const YYe=ng,KYe=(e,t,n)=>YYe(e,t,n)!==0;var JYe=KYe;const ZYe=ng,QYe=(e,t,n)=>ZYe(e,t,n)>0;var eKe=QYe;const tKe=ng,nKe=(e,t,n)=>tKe(e,t,n)>=0;var rKe=nKe;const iKe=ng,sKe=(e,t,n)=>iKe(e,t,n)<0;var aKe=sKe;const oKe=ng,lKe=(e,t,n)=>oKe(e,t,n)<=0;var cKe=lKe;const uKe=XYe,fKe=JYe,hKe=eKe,dKe=rKe,pKe=aKe,gKe=cKe,mKe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return uKe(e,n,r);case"!=":return fKe(e,n,r);case">":return hKe(e,n,r);case">=":return dKe(e,n,r);case"<":return pKe(e,n,r);case"<=":return gKe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var xKe=mKe,jT,C7;function vKe(){if(C7)return jT;C7=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],h=u.match(f);if(!h)throw new TypeError(`Invalid comparator: ${u}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new o(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new o(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}jT=t;const n=c$,{safeRe:r,t:i}=f$,s=xKe,a=MS,o=h$,l=_ne();return jT}var GT,F7;function _ne(){if(F7)return GT;F7=1;class e{constructor(D,N){if(N=r(N),D instanceof e)return D.loose===!!N.loose&&D.includePrerelease===!!N.includePrerelease?D:new e(D.raw,N);if(D instanceof i)return this.raw=D.value,this.set=[[D]],this.format(),this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=D.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(R=>this.parseRange(R.trim())).filter(R=>R.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const R=this.set[0];if(this.set=this.set.filter(L=>!p(L[0])),this.set.length===0)this.set=[R];else if(this.set.length>1){for(const L of this.set)if(L.length===1&&g(L[0])){this.set=[L];break}}}this.format()}format(){return this.range=this.set.map(D=>D.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(D){const R=((this.options.includePrerelease&&h)|(this.options.loose&&d))+":"+D,L=n.get(R);if(L)return L;const I=this.options.loose,Y=I?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];D=D.replace(Y,T(this.options.includePrerelease)),s("hyphen replace",D),D=D.replace(o[l.COMPARATORTRIM],c),s("comparator trim",D),D=D.replace(o[l.TILDETRIM],u),s("tilde trim",D),D=D.replace(o[l.CARETTRIM],f),s("caret trim",D);let X=D.split(" ").map(ve=>x(ve,this.options)).join(" ").split(/\s+/).map(ve=>k(ve,this.options));I&&(X=X.filter(ve=>(s("loose invalid filter",ve,this.options),!!ve.match(o[l.COMPARATORLOOSE])))),s("range list",X);const oe=new Map,xe=X.map(ve=>new i(ve,this.options));for(const ve of xe){if(p(ve))return[ve];oe.set(ve.value,ve)}oe.size>1&&oe.has("")&&oe.delete("");const _e=[...oe.values()];return n.set(R,_e),_e}intersects(D,N){if(!(D instanceof e))throw new TypeError("a Range is required");return this.set.some(R=>m(R,N)&&D.set.some(L=>m(L,N)&&R.every(I=>L.every(Y=>I.intersects(Y,N)))))}test(D){if(!D)return!1;if(typeof D=="string")try{D=new a(D,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(O(this.set[N],D,this.options))return!0;return!1}}GT=e;const t=NYe,n=new t,r=c$,i=vKe(),s=MS,a=h$,{safeRe:o,t:l,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:f}=f$,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:d}=u$,p=C=>C.value==="<0.0.0-0",g=C=>C.value==="",m=(C,D)=>{let N=!0;const R=C.slice();let L=R.pop();for(;N&&R.length;)N=R.every(I=>L.intersects(I,D)),L=R.pop();return N},x=(C,D)=>(s("comp",C,D),C=b(C,D),s("caret",C),C=y(C,D),s("tildes",C),C=E(C,D),s("xrange",C),C=S(C,D),s("stars",C),C),v=C=>!C||C.toLowerCase()==="x"||C==="*",y=(C,D)=>C.trim().split(/\s+/).map(N=>_(N,D)).join(" "),_=(C,D)=>{const N=D.loose?o[l.TILDELOOSE]:o[l.TILDE];return C.replace(N,(R,L,I,Y,X)=>{s("tilde",C,R,L,I,Y,X);let oe;return v(L)?oe="":v(I)?oe=`>=${L}.0.0 <${+L+1}.0.0-0`:v(Y)?oe=`>=${L}.${I}.0 <${L}.${+I+1}.0-0`:X?(s("replaceTilde pr",X),oe=`>=${L}.${I}.${Y}-${X} <${L}.${+I+1}.0-0`):oe=`>=${L}.${I}.${Y} <${L}.${+I+1}.0-0`,s("tilde return",oe),oe})},b=(C,D)=>C.trim().split(/\s+/).map(N=>w(N,D)).join(" "),w=(C,D)=>{s("caret",C,D);const N=D.loose?o[l.CARETLOOSE]:o[l.CARET],R=D.includePrerelease?"-0":"";return C.replace(N,(L,I,Y,X,oe)=>{s("caret",C,L,I,Y,X,oe);let xe;return v(I)?xe="":v(Y)?xe=`>=${I}.0.0${R} <${+I+1}.0.0-0`:v(X)?I==="0"?xe=`>=${I}.${Y}.0${R} <${I}.${+Y+1}.0-0`:xe=`>=${I}.${Y}.0${R} <${+I+1}.0.0-0`:oe?(s("replaceCaret pr",oe),I==="0"?Y==="0"?xe=`>=${I}.${Y}.${X}-${oe} <${I}.${Y}.${+X+1}-0`:xe=`>=${I}.${Y}.${X}-${oe} <${I}.${+Y+1}.0-0`:xe=`>=${I}.${Y}.${X}-${oe} <${+I+1}.0.0-0`):(s("no pr"),I==="0"?Y==="0"?xe=`>=${I}.${Y}.${X}${R} <${I}.${Y}.${+X+1}-0`:xe=`>=${I}.${Y}.${X}${R} <${I}.${+Y+1}.0-0`:xe=`>=${I}.${Y}.${X} <${+I+1}.0.0-0`),s("caret return",xe),xe})},E=(C,D)=>(s("replaceXRanges",C,D),C.split(/\s+/).map(N=>A(N,D)).join(" ")),A=(C,D)=>{C=C.trim();const N=D.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return C.replace(N,(R,L,I,Y,X,oe)=>{s("xRange",C,R,L,I,Y,X,oe);const xe=v(I),_e=xe||v(Y),ve=_e||v(X),Oe=ve;return L==="="&&Oe&&(L=""),oe=D.includePrerelease?"-0":"",xe?L===">"||L==="<"?R="<0.0.0-0":R="*":L&&Oe?(_e&&(Y=0),X=0,L===">"?(L=">=",_e?(I=+I+1,Y=0,X=0):(Y=+Y+1,X=0)):L==="<="&&(L="<",_e?I=+I+1:Y=+Y+1),L==="<"&&(oe="-0"),R=`${L+I}.${Y}.${X}${oe}`):_e?R=`>=${I}.0.0${oe} <${+I+1}.0.0-0`:ve&&(R=`>=${I}.${Y}.0${oe} <${I}.${+Y+1}.0-0`),s("xRange return",R),R})},S=(C,D)=>(s("replaceStars",C,D),C.trim().replace(o[l.STAR],"")),k=(C,D)=>(s("replaceGTE0",C,D),C.trim().replace(o[D.includePrerelease?l.GTE0PRE:l.GTE0],"")),T=C=>(D,N,R,L,I,Y,X,oe,xe,_e,ve,Oe)=>(v(R)?N="":v(L)?N=`>=${R}.0.0${C?"-0":""}`:v(I)?N=`>=${R}.${L}.0${C?"-0":""}`:Y?N=`>=${N}`:N=`>=${N}${C?"-0":""}`,v(xe)?oe="":v(_e)?oe=`<${+xe+1}.0.0-0`:v(ve)?oe=`<${xe}.${+_e+1}.0-0`:Oe?oe=`<=${xe}.${_e}.${ve}-${Oe}`:C?oe=`<${xe}.${_e}.${+ve+1}-0`:oe=`<=${oe}`,`${N} ${oe}`.trim()),O=(C,D,N)=>{for(let R=0;R<C.length;R++)if(!C[R].test(D))return!1;if(D.prerelease.length&&!N.includePrerelease){for(let R=0;R<C.length;R++)if(s(C[R].semver),C[R].semver!==i.ANY&&C[R].semver.prerelease.length>0){const L=C[R].semver;if(L.major===D.major&&L.minor===D.minor&&L.patch===D.patch)return!0}return!1}return!0};return GT}const yKe=_ne(),_Ke=(e,t,n)=>{try{t=new yKe(t,n)}catch{return!1}return t.test(e)};var bKe=_Ke,bne=FYe(bKe);function EKe(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:a}=new URL(t);let o=~~(i/s);function l(u){u.source===r&&(o=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function c(){o<=0||(r.postMessage(n,a),setTimeout(c,s),o-=1)}setTimeout(c,s)}var wKe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Ene(e,...t){for(const n of t)SKe(e,n);return e}function SKe(e,t){for(const n of Object.keys(t))Pp(e,n,t[n],!0)}const xo=dBe;let X1=yXe;const Ry=typeof window<"u"?window:void 0;var V7;X1===void 0&&((V7=Ry==null?void 0:Ry.vl)!=null&&V7.compile)&&(X1=Ry.vl);const AKe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},TKe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},hm={vega:"Vega","vega-lite":"Vega-Lite"},Pb={vega:xo.version,"vega-lite":X1?X1.version:"not available"},kKe={vega:e=>e,"vega-lite":(e,t)=>X1.compile(e,{config:t}).spec},CKe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,FKe="chart-wrapper";function OKe(e){return typeof e=="function"}function O7(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+s),a.document.title=`${hm[r]} JSON Source`}function NKe(e,t){if(e.$schema){const n=pne(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${hm[n.library]}, but mode argument sets ${hm[t]??t}.`);const r=n.library;return bne(Pb[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${hm[r]} ${n.version}, but the current version of ${hm[r]} is v${Pb[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function wne(e){return!!(e&&"load"in e)}function N7(e){return wne(e)?e:xo.loader(e)}function DKe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Le(t.defaultStyle)&&(t.defaultStyle=!1),t}async function D7(e,t,n={}){let r,i;Le(t)?(i=N7(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=DKe(r),a=s.loader;(!i||a)&&(i=N7(n.loader??a));const o=await M7(s,i),l=await M7(n,i),c={...Ene(l,o),config:Lp(l.config??{},o.config??{})};return await RKe(e,r,c,i)}async function M7(e,t){const n=Le(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Le(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function MKe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function RKe(e,t,n={},r){const i=n.theme?Lp(_Ye[n.theme],n.config??{}):n.config,s=Ju(n.actions)?n.actions:Ene({},AKe,n.actions??{}),a={...TKe,...n.i18n},o=n.renderer??"canvas",l=n.logLevel??xo.Warn,c=n.downloadFileName??"visualization",u=typeof e=="string"?document.querySelector(e):e;if(!u)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const b="vega-embed-style",{root:w,rootContainer:E}=MKe(u);if(!w.getElementById(b)){const A=document.createElement("style");A.id=b,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?wKe.toString():n.defaultStyle,E.appendChild(A)}}const f=NKe(t,n.mode);let h=kKe[f](t,i);if(f==="vega-lite"&&h.$schema){const b=pne(h.$schema);bne(Pb.vega,`^${b.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${b.version}, but current version is v${Pb.vega}.`)}u.classList.add("vega-embed"),s&&u.classList.add("has-actions"),u.innerHTML="";let d=u;if(s){const b=document.createElement("div");b.classList.add(FKe),u.appendChild(b),d=b}const p=n.patch;if(p&&(h=p instanceof Function?p(h):qE(h,p,!0,!1).newDocument),n.formatLocale&&xo.formatLocale(n.formatLocale),n.timeFormatLocale&&xo.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const b in n.expressionFunctions){const w=n.expressionFunctions[b];"fn"in w?xo.expressionFunction(b,w.fn,w.visitor):w instanceof Function&&xo.expressionFunction(b,w)}const{ast:g}=n,m=xo.parse(h,f==="vega-lite"?{}:i,{ast:g}),x=new(n.viewClass||xo.View)(m,{loader:r,logLevel:l,renderer:o,...g?{expr:xo.expressionInterpreter??n.expr??wBe}:{}});if(x.addSignalListener("autosize",(b,w)=>{const{type:E}=w;E=="fit-x"?(d.classList.add("fit-x"),d.classList.remove("fit-y")):E=="fit-y"?(d.classList.remove("fit-x"),d.classList.add("fit-y")):E=="fit"?d.classList.add("fit-x","fit-y"):d.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:b,tooltip:w}=n,E=b&&!wne(b)?b==null?void 0:b.baseURL:void 0,A=OKe(w)?w:new CYe({baseURL:E,...w===!0?{}:w}).call;x.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:b,updateSet:w}=typeof v=="boolean"?{}:v;x.hover(b,w)}n&&(n.width!=null&&x.width(n.width),n.height!=null&&x.height(n.height),n.padding!=null&&x.padding(n.padding)),await x.initialize(d,n.bind).runAsync();let y;if(s!==!1){let b=u;if(n.defaultStyle!==!1||n.forceActionsMenu){const E=document.createElement("details");E.title=a.CLICK_TO_VIEW_ACTIONS,u.append(E),b=E;const A=document.createElement("summary");A.innerHTML=CKe,E.append(A),y=S=>{E.contains(S.target)||E.removeAttribute("open")},document.addEventListener("click",y)}const w=document.createElement("div");if(b.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(const E of["svg","png"])if(s===!0||s.export===!0||s.export[E]){const A=a[`${E.toUpperCase()}_ACTION`],S=document.createElement("a"),k=$e(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;S.text=A,S.href="#",S.target="_blank",S.download=`${c}.${E}`,S.addEventListener("mousedown",async function(T){T.preventDefault();const O=await x.toImageURL(E,k);this.href=O}),w.append(S)}}if(s===!0||s.source!==!1){const E=document.createElement("a");E.text=a.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(A){O7(KA(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),w.append(E)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const E=document.createElement("a");E.text=a.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(A){O7(KA(h),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),w.append(E)}if(s===!0||s.editor!==!1){const E=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=a.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(S){EKe(window,E,{config:i,mode:p?"vega":f,renderer:o,spec:KA(p?h:t)}),S.preventDefault()}),w.append(A)}}function _(){y&&document.removeEventListener("click",y),x.finalize()}return{view:x,spec:t,vgSpec:h,finalize:_,embedOptions:n}}const $Ke="https://vega.github.io/schema/vega/v5.json",IKe={top:20},LKe={type:"fit",contains:"padding"},PKe=[{name:"width",init:"containerSize()[0]",on:[{events:"window:resize",update:"containerSize()[0]"}]},{name:"height",init:"containerSize()[1]",on:[{events:"window:resize",update:"containerSize()[1]"}]}],BKe=[{name:"source_csv",url:"./static/usa-data.csv",format:{type:"csv",delimiter:","}},{name:"source_geojson",url:"./static/usa-population.json",format:{property:"features",type:"json",parse:{}}},{name:"geo_1",source:"source_geojson",transform:[{type:"formula",expr:'datum["properties"] && datum["properties"]["name"]',as:"Region"},{type:"lookup",from:"source_csv",key:"Region",fields:["Region"],values:["Abbreviation","Color"]},{type:"formula",expr:"geoArea('projectionSource', datum.geometry)",as:"Area"},{type:"formula",expr:'datum["properties"]["label"]["x"]',as:"x"},{type:"formula",expr:'datum["properties"]["label"]["y"]',as:"y"}]}],UKe=[{name:"projectionSource",size:{signal:"[width, height]"},fit:{signal:"data('source_geojson')"},type:"identity",reflectY:!0},{name:"projectionFinal",size:{signal:"[width, height]"},fit:{signal:"data('geo_1')"},type:"identity",reflectY:!0}],zKe=[{name:"layer_0_marks",type:"shape",style:["geoshape"],from:{data:"geo_1"},encode:{update:{description:{signal:'"geoshape_" + datum["id"]'},stroke:{value:"black"},strokeWidth:{value:.2},tooltip:{signal:"datum"},fill:{field:"Color"},ariaRoleDescription:{value:"geoshape"}},hover:{strokeWidth:{value:1},zindex:{value:1}}},transform:[{type:"geoshape",projection:"projectionFinal"}]},{name:"layer_1_marks",type:"text",style:["text"],from:{data:"geo_1"},encode:{enter:{text:{field:"Abbreviation"}},update:{x:{field:"x"},y:{field:"y"},description:{signal:'"geolabel_" + datum["id"]'},align:{value:"center"},baseline:{value:"middle"},opacity:{signal:"datum.Area < 400 ? 0:1"},ariaRoleDescription:{value:"geolabel"}}},transform:[{type:"geopoint",fields:["x","y"],projection:"projectionFinal"}]}],HKe={$schema:$Ke,padding:IKe,autosize:LKe,signals:PKe,data:BKe,projections:UKe,marks:zKe},VKe=e=>(Y1("data-v-a50b7b1c"),e=e(),K1(),e),WKe={class:"d-flex flex-column card-body p-0"},jKe={class:"d-flex position-absolute z-1"},GKe=["id","width"],qKe=["x2"],XKe=["x1","x2"],YKe=["cx"],KKe=["id","width","height"],JKe=["id"],ZKe=["width","height"],QKe=["id"],eJe=["innerHTML"],tJe=["innerHTML"],nJe=["id"],rJe=["id"],iJe=["id"],sJe=["id"],aJe=["id"],oJe=VKe(()=>se("path",{fill:"none",stroke:"#5A5A5A","stroke-width":"2","stroke-opacity":"0.3"},null,-1)),lJe=[oJe],cJe=["fill"],uJe=vr({__name:"CPanelLegend",props:{mapID:{},currentMapName:{},stringKey:{},versionKey:{},versions:{},showGrid:{type:Boolean,default:!0},affineScale:{default:[1,1]}},emits:["gridChanged"],setup(e,{expose:t,emit:n}){var r=3;const i=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;var s=.3,a=JSON.parse(JSON.stringify(HKe)),o,l,c,u,f;const h=e,d=rs({version:h.versions[h.versionKey],legendUnit:"",legendTotal:"",currentGridIndex:1,gridDataKeys:[1],gridData:{},handlePosition:0,handleTouchPosition:0,scalePowerOf10:1});Ll(()=>h.versionKey,(C,D)=>{d.version=h.versions[h.versionKey],g()}),Ll(()=>h.affineScale,(C,D)=>{A()},{deep:!0}),t({updateView:m,getData:y,getCurrentScale:_,updateGridIndex:O});const p=n;Hu(async()=>{if(!d.version)return;a.data[0].url=YA(h.currentMapName,h.stringKey,"data.csv"),a.data[1].url=YA(h.currentMapName,h.stringKey,d.version.name+".json");const C=Object.values(h.versions).map(I=>I.header.replace(".","\\."));a.data[2].transform[1].values.push(...C);const D=Object.values(h.versions).map(I=>`"${I.name}": datum["${I.header}"] + " ${I.unit}"`).join(", ");a.marks[0].encode.update.tooltip.signal='{title: datum.Region + " (" + datum.Abbreviation + ")", '+D+"}",o=Aa("#"+h.mapID+"-vis"),l=Aa("#"+h.mapID+"-offscreen"),c=(await D7("#"+h.mapID+"-vis",a,{renderer:"svg",actions:!1})).view;let[R,L]=a3e(d.version.header,c.data("geo_1"),c.data("source_csv"));u=R,f=L,c.addResizeListener(function(){u=s3e(c.data("geo_1")),x()}),x()});async function g(){a.data[1].url=YA(h.currentMapName,h.stringKey,d.version.name+".json");let C=await D7("#"+h.mapID+"-offscreen",a,{renderer:"svg",actions:!1});var D=0;function N(){C.view.initialize("#"+h.mapID+"-vis").runAsync(),c=C.view,x()}o.selectAll('path[aria-roledescription="geoshape"]').each(function(){let R=Aa(this).attr("aria-label"),L=R.replace("geoshape","geolabel"),I=l.select('path[aria-label="'+R+'"]').attr("d");Aa(this).transition().ease(Yy).duration(1e3).attr("d",I).on("start",function(){D++}).on("end",function(){--D===0&&N()});let Y=l.select('text[aria-label="'+L+'"]'),X=Y.attr("transform"),oe=Y.attr("opacity");o.select('text[aria-label="'+L+'"]').transition().ease(Yy).duration(1e3).attr("transform",X).attr("opacity",oe).on("start",function(){D++}).on("end",function(){--D===0&&N()})})}async function m(){await c.resize(),await c.width(c.container().offsetWidth).runAsync(),x()}async function x(){if(!d.version)return;v(),await Jl(),b(d.currentGridIndex);const C=Math.floor(Math.log10(f)),D=f/Math.pow(10,C);d.legendTotal=S(D,C),k()}function v(){const C=f/u;let D=f/100,N=Math.sqrt(D/C);for(;N<20;)D*=2,N=Math.sqrt(D/C);let R=[],[L,I]=uq(D),Y=Qy.indexOf(L),X=Y===0?Y:Y-1,oe=X+r+1;for(;oe>=Qy.length&&X>0;)oe--,X--;let xe=Qy.slice(X,oe);for(let _e=0;_e<=r;_e++)R[_e]=N*Math.sqrt(xe[_e]*Math.pow(10,I)/D);for(let _e=0;_e<=r;_e++)d.gridData[_e]={width:R[_e],scaleNiceNumber:xe[_e]};d.gridDataKeys=[d.currentGridIndex],d.scalePowerOf10=I}function y(C){return c.data(C)}function _(){return d.gridData[d.currentGridIndex].scaleNiceNumber/(h.affineScale[0]*h.affineScale[1])}async function b(C){d.currentGridIndex=C,d.gridDataKeys=[d.currentGridIndex],await Jl();for(let D=0;D<=r;D++)D<=C?Aa("#"+h.mapID+"-legend"+D+" rect").attr("fill","#EEEEEE"):Aa("#"+h.mapID+"-legend"+D+" rect").attr("fill","#D6D6D6");A(),T(d.gridData[C].width)}function w(C){if(C.target){var D=C.touches[0].pageX-d.handleTouchPosition,N=d.handlePosition+D;d.handlePosition=Math.max(0,Math.min(N,d.gridData[r].width)),d.handleTouchPosition=C.touches[0].pageX,C.preventDefault()}}function E(C){var D=0,N=Number.MAX_VALUE,R=C.offsetX?C.offsetX:d.handlePosition;for(let I=0;I<=r;I++){var L=Math.abs(R-d.gridData[I].width);L<N&&(N=L,D=I)}b(D),p("gridChanged")}function A(){let C=d.gridData[d.currentGridIndex].scaleNiceNumber;C=C/(h.affineScale[0]*h.affineScale[1]),d.legendUnit=S(C,d.scalePowerOf10)}function S(C,D){let N=C*Math.pow(10,D);const R=Intl.NumberFormat(i,{notation:"compact",compactDisplay:"short"});let L="";return L+=R.format(N),L}function k(){const C=d.gridData[d.currentGridIndex].width||20;T(C)}function T(C){if(isNaN(C))return;let D=h.showGrid?s:0;const N=Aa("#"+h.mapID+"-grid");N.select("path").attr("stroke-opacity",D).attr("d","M "+C*5+" 0 L 0 0 0 "+C*5),N.attr("width")?N.transition().ease(Yy).duration(1e3).attr("width",C).attr("height",C):N.attr("width",C).attr("height",C),d.handlePosition=C}function O(C){var D=d.currentGridIndex+C;D<0||D>r||b(D)}return(C,D)=>{var N;return je(),Qe("div",WKe,[se("div",jKe,[d.gridData[Wt(r)]?(je(),Qe("svg",{key:0,id:h.mapID+"-slider",width:d.gridData[Wt(r)].width+15,height:"30px",style:{cursor:"pointer",top:"-15px"},stroke:"#AAAAAA","stroke-width":"2px",onPointerup:E,onTouchmove:w,onTouchend:E,class:"d-flex position-absolute z-2"},[se("line",{x1:"0",y1:"15",x2:d.gridData[Wt(r)].width,y2:"15"},null,8,qKe),(je(!0),Qe(qt,null,Il(d.gridData,R=>(je(),Qe("line",{x1:R.width,y1:"10",x2:R.width,y2:"20"},null,8,XKe))),256)),se("circle",{id:"handle",r:"5",cx:d.handlePosition,cy:"15","stroke-width":"0px"},null,8,YKe)],40,GKe)):Cr("",!0),d.gridData[Wt(r)]?(je(),Qe("svg",{key:1,id:h.mapID+"-legend",style:{cursor:"pointer",opacity:"0.5"},width:d.gridData[d.currentGridIndex].width+2,height:d.gridData[d.currentGridIndex].width+2},[(je(!0),Qe(qt,null,Il(d.gridDataKeys,R=>(je(),Qe("g",{id:h.mapID+"-legend"+R,"stroke-width":"2px",fill:"#EEEEEE",stroke:"#AAAAAA"},[se("rect",{x:"1",y:"1",width:d.gridData[R].width,height:d.gridData[R].width},null,8,ZKe)],8,JKe))),256))],8,KKe)):Cr("",!0),se("div",{id:h.mapID+"-legend-num",class:"flex-fill p-1"},[se("span",{innerHTML:d.legendUnit},null,8,eJe),Co(" "+Ua((N=d.version)==null?void 0:N.unit)+" ",1),se("div",null,[Co("Total: "),se("span",{innerHTML:d.legendTotal},null,8,tJe)])],8,QKe)]),se("div",{id:h.mapID,class:"d-flex flex-fill"},[se("div",null,[se("div",{id:h.mapID+"-offscreen",class:"vis-area offscreen"},null,8,rJe),se("div",{id:h.mapID+"-vis",class:"vis-area"},null,8,iJe),$B(C.$slots,"default",{},void 0,!0)]),(je(),Qe("svg",{width:"100%",height:"100%",id:h.mapID+"-grid-area"},[se("defs",null,[se("pattern",{id:h.mapID+"-grid",patternUnits:"userSpaceOnUse"},lJe,8,aJe)]),h.showGrid?(je(),Qe("rect",{key:0,width:"100%",height:"100%",fill:"url(#"+h.mapID+"-grid)"},null,8,cJe)):Cr("",!0)],8,sJe))],8,nJe)])}}}),R7=Ax(uJe,[["__scopeId","data-v-a50b7b1c"]]),fJe=se("p",{class:"lead text-center"},"Liked our work? Make sure to credit us using the citation below:",-1),hJe={class:"form-group"},dJe={id:"citation-text",class:"text-primary",href:"https://www.pnas.org/content/115/10/E2156",target:"_blank",rel:"noopener noreferrer"},pJe=se("img",{id:"clipboard-citation-icon",src:"/static/img/clipboard.svg",alt:"Copy button",title:"Copy"},null,-1),gJe=[pJe],Sne=vr({__name:"CTextCitation",setup(e){var t="Gastner MT, Seguy V, More P. Fast low-based algorithm for creating density-equalizing map projections. Proc Natl Acad Sci USA 115(10):E2156E2164 (2018).";return(n,r)=>(je(),Qe("div",null,[fJe,se("div",hJe,[se("a",dJe,Ua(Wt(t)),1),se("button",{style:{"margin-top":"25px"},class:"clipboard-copy",id:"clipboard-citation","data-animation":"false",title:"Copy",onClick:r[0]||(r[0]=i=>SC("clipboard-citation",Wt(t)))},gJe)])]))}}),mJe={class:"modal fade text-wrap",id:"downloadModal",tabindex:"-1","aria-labelledby":"downloadModalLabel","aria-hidden":"true"},xJe={class:"modal-dialog"},vJe={class:"modal-content"},yJe=se("div",{class:"modal-header"},[se("h1",{class:"modal-title fs-5",id:"downloadModalLabel"},"Your map is ready!"),se("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_Je={class:"modal-body"},bJe=se("p",{class:"lead text-center"},"Download",-1),EJe=se("p",{class:"text-center mb-5"},[se("a",{id:"download-modal-svg-link",class:"btn btn-lg btn-primary mx-3"},"SVG"),se("a",{id:"download-modal-geojson-link",class:"btn btn-lg btn-primary"},"GeoJSON")],-1),wJe=vr({__name:"CPanelModalDownload",setup(e,{expose:t}){const n=rs({show:!1});function r(i,s){var a='<?xml version="1.0" encoding="UTF-8" standalone="no"?>';let o=document.getElementById(i+"-vis").querySelector("svg").cloneNode(!0);o.setAttribute("xmlns","http://www.w3.org/2000/svg");let l=document.getElementById(i+"-legend").cloneNode(!0);o.appendChild(l);let c=document.getElementById(i+"-legend-num").textContent||"",u=document.createElement("text"),f=2+parseFloat(l.getAttribute("width"));u.innerHTML=c,u.setAttribute("font-family","sans-serif"),u.setAttribute("font-size","12px"),u.setAttribute("x",f.toString()),u.setAttribute("y","20"),o.appendChild(u),o.appendChild(document.getElementById(i+"-grid-area").cloneNode(!0));let h=document.getElementById("download-modal-svg-link");h.href="data:image/svg+xml;base64,"+window.btoa(a+o.outerHTML.replace(//g,"&#xD7;")),h.download="map.svg";let d=document.getElementById("download-modal-geojson-link");d.href="data:application/json;base64,"+window.btoa(s),d.download="map.geojson",n.show=!0}return t({generateSVGDownloadLinks:r}),(i,s)=>(je(),Qe("div",mJe,[se("div",xJe,[se("div",vJe,[yJe,se("div",_Je,[bJe,EJe,vt(Sne)])])])]))}}),Is=e=>(Y1("data-v-cd20d826"),e=e(),K1(),e),SJe=Is(()=>se("i",{class:"fas fa-share-alt"},null,-1)),AJe=[SJe],TJe={class:"modal fade text-wrap",id:"shareModal",tabindex:"-1","aria-labelledby":"shareModalLabel","aria-hidden":"true"},kJe={class:"modal-dialog"},CJe={class:"modal-content"},FJe=Is(()=>se("div",{class:"modal-header"},[se("h1",{class:"modal-title fs-5",id:"shareModalLabel"},"Share cartogram"),se("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),OJe={class:"modal-body"},NJe=Is(()=>se("div",null,[se("p",{class:"bg-warning-subtle p-1 rounded"},[se("span",{class:"badge text-bg-warning"},"Important"),Co(" The share link/embed will be pruned from our server if there is no access for one year. We strongly advise you to back up your original data in a safe place so you can regenerate the cartogram if needed. ")])],-1)),DJe=Is(()=>se("h3",{class:"text-center"},"Share now",-1)),MJe={class:"text-center"},RJe=["href"],$Je=Is(()=>se("i",{class:"fab fa-facebook-square"},null,-1)),IJe=[$Je],LJe=["href"],PJe=Is(()=>se("i",{class:"fab fa-linkedin"},null,-1)),BJe=[PJe],UJe=["href"],zJe=Is(()=>se("i",{class:"fab fa-twitter-square"},null,-1)),HJe=[zJe],VJe=["href"],WJe=Is(()=>se("i",{class:"fas fa-envelope-square"},null,-1)),jJe=[WJe],GJe={class:"mb-3"},qJe=Is(()=>se("h3",{class:"text-center"},"Link",-1)),XJe={class:"form-group"},YJe=["value"],KJe=Is(()=>se("img",{id:"clipboard-link-icon",src:"/static/img/clipboard.svg",alt:"Copy button"},null,-1)),JJe=[KJe],ZJe={id:"share-embed",class:"mb-5"},QJe=Is(()=>se("h3",{class:"text-center"},"Embed",-1)),eZe=Is(()=>se("p",{class:"text-center"}," To embed yor cartogram into any webpage, insert the HTML code below: ",-1)),tZe={class:"form-group"},nZe={id:"share-embed-code",class:"form-control w-100",disabled:"",rows:"3",style:{"font-family":"monospace",resize:"none"}},rZe=Is(()=>se("img",{id:"clipboard-embed-icon",src:"/static/img/clipboard.svg",alt:"Copy button"},null,-1)),iZe=[rZe],sZe=vr({__name:"CPanelBtnShare",props:{stringKey:{},currentMapName:{}},setup(e){const t=e,n=tu(()=>t.stringKey&&t.stringKey!==""?location.protocol+"//"+location.host+"/cartogram/key/"+t.stringKey:location.protocol+"//"+location.host+"/cartogram/map/"+t.currentMapName),r=tu(()=>window.encodeURIComponent(n.value)),i=tu(()=>'<iframe src="'+(n.value+"/embed")+'" width="800" height="550" style="border: 1px solid black;"></iframe>');function s(){var a=new XMLHttpRequest;a.open("GET",n.value)}return(a,o)=>(je(),Qe(qt,null,[se("button",{class:"btn btn-primary mx-1","data-bs-toggle":"modal","data-bs-target":"#shareModal",title:"Share cartogram",onClick:o[0]||(o[0]=l=>s())},AJe),se("div",TJe,[se("div",kJe,[se("div",CJe,[FJe,se("div",OJe,[se("div",null,[NJe,DJe,se("div",MJe,[se("a",{href:"https://www.facebook.com/sharer/sharer.php?u="+r.value,onclick:"javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;",target:"_blank",title:"Share on Facebook",class:"social-link",id:"facebook-share"},IJe,8,RJe),se("a",{href:"https://www.linkedin.com/shareArticle?url="+r.value+"&mini=true&title=Cartogram&summary=Create%20cartograms%20with%20go-cart.io&source=go-cart.io",onclick:"javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=520,width=570');return false;",target:"_blank",title:"Share on LinkedIn",class:"social-link",id:"linkedin-share"},BJe,8,LJe),se("a",{href:"https://twitter.com/share?url="+r.value,onclick:"javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;",target:"_blank",title:"Share on Twitter",class:"social-link",id:"twitter-share"},HJe,8,UJe),se("a",{href:"mailto:?body="+r.value,title:"Share by Email",class:"social-link",id:"email-share"},jJe,8,VJe)])]),se("div",GJe,[qJe,se("div",XJe,[se("input",{type:"text",id:"share-link-href",class:"form-control w-100",disabled:"",style:{"font-family":"monospace"},value:n.value},null,8,YJe),se("button",{style:{"margin-top":"4.6px"},"data-animation":"false",class:"clipboard-copy",id:"clipboard-link",title:"Copy",onClick:o[1]||(o[1]=l=>SC("clipboard-link",n.value))},JJe)])]),se("div",ZJe,[QJe,eZe,se("div",tZe,[se("textarea",nZe,Ua(i.value),1),se("button",{class:"clipboard-copy",id:"clipboard-embed","data-animation":"false",title:"Copy",onClick:o[2]||(o[2]=l=>SC("clipboard-embed",i.value))},iZe)])]),vt(Sne)])])])])],64))}}),aZe=Ax(sZe,[["__scopeId","data-v-cd20d826"]]),oZe={class:"pointervis"},lZe={id:"cartogram",class:"d-flex flex-fill card-group"},cZe={key:0,class:"card w-100"},uZe={class:"d-flex flex-column card-body"},fZe={class:"card-footer d-flex justify-content-between"},hZe=se("div",{class:"text-nowrap overflow-hidden"},"Equal-Area Map",-1),dZe={class:"text-nowrap"},pZe=se("i",{class:"fas fa-download"},null,-1),gZe=[pZe],mZe={class:"card w-100"},xZe={class:"d-flex flex-column card-body"},vZe=se("img",{class:"position-absolute bottom-0 end-0 z-3",src:"/static/img/by.svg",alt:"cc-by"},null,-1),yZe={class:"position-absolute end-0",style:{width:"2.5rem"}},_Ze=["title"],bZe={key:0,class:"fas fa-unlock"},EZe={key:1,class:"fas fa-lock"},wZe={key:2,class:"fas fa-unlock"},SZe={key:3,class:"fas fa-arrows-alt-h"},AZe={key:4,class:"fas fa-arrows-alt-v"},TZe=se("i",{class:"fas fa-crosshairs"},null,-1),kZe=[TZe],CZe={class:"card-footer d-flex justify-content-between"},FZe=se("div",{class:"d-none d-sm-block text-nowrap overflow-hidden"},"Cartogram",-1),OZe={class:"text-nowrap"},NZe={key:0},DZe=se("i",{class:"fas fa-download"},null,-1),MZe=[DZe],$7=300,RZe=3,$Ze=vr({__name:"CPanel",props:{currentMapName:{},currentVersionKey:{},versions:{},stringKey:{default:""},showBase:{type:Boolean,default:!1},showGrid:{type:Boolean,default:!0},mode:{default:"full"}},setup(e){let t=new i3e;var n,r,i,s=0;const a="ontouchstart"in window||navigator.maxTouchPoints,o=zn(),l=zn(),c=zn(),u=e,f=rs({cursor:"grab",isLockRatio:!0,touchLenght:0,lastMove:0,stretchDirection:"x",affineMatrix:XA(),affineScale:[1,1]});Ll(()=>u.showBase,(_,b)=>{Jl(),l.value.updateView()});function h(_,b){t.set(_),f.touchLenght=t.length;var w=new Date().getTime(),E=w-s;if(t.length===1&&E<$7&&E>0)v();else{const A=t.getPoints();A.length>0&&(n=A.length>1&&Math.atan2(A[1][1]-A[0][1],A[1][0]-A[0][0]),r=[Af(A,S=>S[0])||0,Af(A,S=>S[1])||0],i=A.length>1&&Math.hypot(A[1][1]-A[0][1],A[1][0]-A[0][0]))}s=new Date().getTime(),f.lastMove=s,_.cancelable&&_.preventDefault()}function d(_){if(t.clear(_),f.touchLenght=t.length,y(),t.length===0)r=null;else{const b=t.getPoints();b.length>0&&(n=b.length>1&&Math.atan2(b[1][1]-b[0][1],b[1][0]-b[0][0]),r=[Af(b,w=>w[0])||0,Af(b,w=>w[1])||0],i=b.length>1&&Math.hypot(b[1][1]-b[0][1],b[1][0]-b[0][0]))}_.cancelable&&_.preventDefault()}function p(_,b){if(t.update(_),t.length<1||t.length>3||!r)return;const w=t.getPoints();if(!(w.length<1)){var E=XA(),A=0,S=[0,0],k=[1,1],T=new Date().getTime();if(w.length>1&&(t.length===3||t.length===2&&!f.isLockRatio)){var O=Math.atan2(w[1][1]-w[0][1],w[1][0]-w[0][0]);n&&typeof n=="number"?A=O-n:A=0,n=O,E=wc(E,vg(A));var C=Math.hypot(w[1][1]-w[0][1],w[1][0]-w[0][0]);i&&typeof i=="number"?k[0]=C/i:k[0]=0,f.affineScale[0]*=k[0],i=C,k[0]!==0&&(E=wc(E,vg(n)),E=wc(E,oy(k[0],1)),E=wc(E,vg(-n)))}else if(w.length>1){if(n&&typeof n=="number"){var O=Math.atan2(w[1][1]-w[0][1],w[1][0]-w[0][0]);A=O-n,n=O,E=wc(E,vg(A))}if(i&&typeof i=="number"){var C=Math.hypot(w[1][1]-w[0][1],w[1][0]-w[0][0]);k[0]=C/i,k[1]=C/i,f.affineScale[0]*=k[0],f.affineScale[1]*=k[1],i=C,k[0]!==0&&k[1]!==0&&(E=wc(E,oy(k[0],k[1])))}}var D=T-s;if(t.length>1||t.length===1&&D>$7){var N=[Af(w,R=>R[0])||0,Af(w,R=>R[1])||0];S[0]=N[0]-r[0],S[1]=N[1]-r[1],r=N,E=wc(E,o3e(S[0],S[1]))}x(E,f.affineMatrix),_.cancelable&&_.preventDefault(),f.lastMove=new Date().getTime()}}function g(_){var b=[];if(_.shiftKey)b=vg(_.wheelDelta/1e3);else{var w=1+_.wheelDelta/1e3,E;f.isLockRatio?E=[w,w]:f.stretchDirection==="x"?E=[w,1]:E=[1,w],f.affineScale[0]*=E[0],f.affineScale[1]*=E[1],b=oy(E[0],E[1])}x(b,f.affineMatrix),_.cancelable&&_.preventDefault()}function m(){a?f.isLockRatio=!f.isLockRatio:f.isLockRatio?(f.stretchDirection="x",f.isLockRatio=!1):f.stretchDirection==="x"?f.stretchDirection="y":f.isLockRatio=!0}function x(_,b){f.affineMatrix=wc(_,b),upe("#cartogram-area g.root").attr("transform","matrix("+f.affineMatrix[0][0]+" "+f.affineMatrix[1][0]+" "+f.affineMatrix[0][1]+" "+f.affineMatrix[1][1]+" "+f.affineMatrix[0][2]+" "+f.affineMatrix[1][2]+")")}function v(){f.affineMatrix=XA(),f.affineScale=[1,1],x(f.affineMatrix,f.affineMatrix)}function y(){let _=l.value.getCurrentScale(),[b,w]=uq(_),E=b*Math.pow(10,w),A=Math.sqrt(_/E);f.affineScale[0]*=A,f.affineScale[1]*=A;var S=oy(A,A);x(S,f.affineMatrix)}return(_,b)=>(je(),Qe(qt,null,[se("div",oZe,[(je(),S0(h3e,{key:f.lastMove,touchInfo:Wt(t),touchLenght:f.touchLenght},null,8,["touchInfo","touchLenght"]))]),se("div",lZe,[u.showBase?(je(),Qe("div",cZe,[se("div",uZe,[vt(R7,{ref_key:"mapLegendEl",ref:o,mapID:"map-area",currentMapName:u.currentMapName,stringKey:u.stringKey,versionKey:RZe.toString(),versions:u.versions,showGrid:u.showGrid},null,8,["currentMapName","stringKey","versionKey","versions","showGrid"])]),se("div",fZe,[hZe,se("div",dZe,[_.mode!=="embed"?(je(),Qe("button",{key:0,class:"btn btn-primary mx-1",id:"map-download",onClick:b[0]||(b[0]=w=>c.value.generateSVGDownloadLinks("map-area",JSON.stringify(o.value.getData("geo_1")))),"data-bs-toggle":"modal","data-bs-target":"#downloadModal",title:"Download map"},gZe)):Cr("",!0)])])])):Cr("",!0),se("div",mZe,[se("div",xZe,[vt(R7,{ref_key:"cartogramLegendEl",ref:l,mapID:"cartogram-area",currentMapName:u.currentMapName,stringKey:u.stringKey,versionKey:u.currentVersionKey,versions:u.versions,showGrid:u.showGrid,affineScale:f.affineScale,onGridChanged:y,style:Pu({cursor:f.cursor}),onMousedown:b[1]||(b[1]=w=>h(w)),onTouchstart:b[2]||(b[2]=w=>h(w)),onMousemove:b[3]||(b[3]=w=>p(w)),onTouchmove:b[4]||(b[4]=w=>p(w)),onMouseup:d,onTouchend:d,onWheel:g},{default:Xb(()=>[vZe]),_:1},8,["currentMapName","stringKey","versionKey","versions","showGrid","affineScale","style"]),se("div",yZe,[se("button",{class:"btn btn-primary w-100 my-1",onClick:b[5]||(b[5]=w=>m()),title:f.isLockRatio?"Switch to free transform":"Switch to lock ratio"},[f.touchLenght===3?(je(),Qe("i",bZe)):f.isLockRatio?(je(),Qe("i",EZe)):Wt(a)?(je(),Qe("i",wZe)):f.stretchDirection==="x"?(je(),Qe("i",SZe)):(je(),Qe("i",AZe))],8,_Ze),se("button",{class:"btn btn-primary w-100 my-1",onClick:b[6]||(b[6]=()=>{v()}),title:"Reset"},kZe)])]),se("div",CZe,[FZe,se("div",OZe,[_.mode!=="embed"?(je(),Qe("span",NZe,[se("button",{class:"btn btn-primary mx-1",id:"cartogram-download",onClick:b[7]||(b[7]=w=>c.value.generateSVGDownloadLinks("cartogram-area",JSON.stringify(l.value.getData("geo_1")))),"data-bs-toggle":"modal","data-bs-target":"#downloadModal",title:"Download cartogram"},MZe),vt(aZe,{stringKey:u.stringKey,currentMapName:u.currentMapName},null,8,["stringKey","currentMapName"])])):Cr("",!0)])])]),vt(wJe,{ref_key:"modalDownloadEl",ref:c},null,512)])],64))}});function Bb(e){"@babel/helpers - typeof";return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bb(e)}var IZe=/^\s+/,LZe=/\s+$/;function qe(e,t){if(e=e||"",t=t||{},e instanceof qe)return e;if(!(this instanceof qe))return new qe(e,t);var n=PZe(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}qe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),n,r,i,s,a,o;return n=t.r/255,r=t.g/255,i=t.b/255,n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(t){return this._a=Ane(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=L7(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=L7(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=I7(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=I7(this._r,this._g,this._b),n=Math.round(t.h*360),r=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return P7(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return HZe(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(hn(this._r,255)*100)+"%",g:Math.round(hn(this._g,255)*100)+"%",b:Math.round(hn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(hn(this._r,255)*100)+"%, "+Math.round(hn(this._g,255)*100)+"%, "+Math.round(hn(this._b,255)*100)+"%)":"rgba("+Math.round(hn(this._r,255)*100)+"%, "+Math.round(hn(this._g,255)*100)+"%, "+Math.round(hn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:eQe[P7(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var n="#"+B7(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(t){var s=qe(t);r="#"+B7(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(t){var n=!!t;t=t||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!n&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return s?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return qe(this.toString())},_applyModification:function(t,n){var r=t.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(GZe,arguments)},brighten:function(){return this._applyModification(qZe,arguments)},darken:function(){return this._applyModification(XZe,arguments)},desaturate:function(){return this._applyModification(VZe,arguments)},saturate:function(){return this._applyModification(WZe,arguments)},greyscale:function(){return this._applyModification(jZe,arguments)},spin:function(){return this._applyModification(YZe,arguments)},_applyCombination:function(t,n){return t.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(ZZe,arguments)},complement:function(){return this._applyCombination(KZe,arguments)},monochromatic:function(){return this._applyCombination(QZe,arguments)},splitcomplement:function(){return this._applyCombination(JZe,arguments)},triad:function(){return this._applyCombination(U7,[3])},tetrad:function(){return this._applyCombination(U7,[4])}};qe.fromRatio=function(e,t){if(Bb(e)=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=dm(e[r]));e=n}return qe(e,t)};function PZe(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,s=null,a=!1,o=!1;return typeof e=="string"&&(e=iQe(e)),Bb(e)=="object"&&(pl(e.r)&&pl(e.g)&&pl(e.b)?(t=BZe(e.r,e.g,e.b),a=!0,o=String(e.r).substr(-1)==="%"?"prgb":"rgb"):pl(e.h)&&pl(e.s)&&pl(e.v)?(r=dm(e.s),i=dm(e.v),t=zZe(e.h,r,i),a=!0,o="hsv"):pl(e.h)&&pl(e.s)&&pl(e.l)&&(r=dm(e.s),s=dm(e.l),t=UZe(e.h,r,s),a=!0,o="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=Ane(n),{ok:a,format:e.format||o,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function BZe(e,t,n){return{r:hn(e,255)*255,g:hn(t,255)*255,b:hn(n,255)*255}}function I7(e,t,n){e=hn(e,255),t=hn(t,255),n=hn(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),s,a,o=(r+i)/2;if(r==i)s=a=0;else{var l=r-i;switch(a=o>.5?l/(2-r-i):l/(r+i),r){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4;break}s/=6}return{h:s,s:a,l:o}}function UZe(e,t,n){var r,i,s;e=hn(e,360),t=hn(t,100),n=hn(n,100);function a(c,u,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?c+(u-c)*6*f:f<1/2?u:f<2/3?c+(u-c)*(2/3-f)*6:c}if(t===0)r=i=s=n;else{var o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;r=a(l,o,e+1/3),i=a(l,o,e),s=a(l,o,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function L7(e,t,n){e=hn(e,255),t=hn(t,255),n=hn(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),s,a,o=r,l=r-i;if(a=r===0?0:l/r,r==i)s=0;else{switch(r){case e:s=(t-n)/l+(t<n?6:0);break;case t:s=(n-e)/l+2;break;case n:s=(e-t)/l+4;break}s/=6}return{h:s,s:a,v:o}}function zZe(e,t,n){e=hn(e,360)*6,t=hn(t,100),n=hn(n,100);var r=Math.floor(e),i=e-r,s=n*(1-t),a=n*(1-i*t),o=n*(1-(1-i)*t),l=r%6,c=[n,a,s,s,o,n][l],u=[o,n,n,a,s,s][l],f=[s,s,o,n,n,a][l];return{r:c*255,g:u*255,b:f*255}}function P7(e,t,n,r){var i=[Ba(Math.round(e).toString(16)),Ba(Math.round(t).toString(16)),Ba(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function HZe(e,t,n,r,i){var s=[Ba(Math.round(e).toString(16)),Ba(Math.round(t).toString(16)),Ba(Math.round(n).toString(16)),Ba(Tne(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function B7(e,t,n,r){var i=[Ba(Tne(r)),Ba(Math.round(e).toString(16)),Ba(Math.round(t).toString(16)),Ba(Math.round(n).toString(16))];return i.join("")}qe.equals=function(e,t){return!e||!t?!1:qe(e).toRgbString()==qe(t).toRgbString()};qe.random=function(){return qe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function VZe(e,t){t=t===0?0:t||10;var n=qe(e).toHsl();return n.s-=t/100,n.s=RS(n.s),qe(n)}function WZe(e,t){t=t===0?0:t||10;var n=qe(e).toHsl();return n.s+=t/100,n.s=RS(n.s),qe(n)}function jZe(e){return qe(e).desaturate(100)}function GZe(e,t){t=t===0?0:t||10;var n=qe(e).toHsl();return n.l+=t/100,n.l=RS(n.l),qe(n)}function qZe(e,t){t=t===0?0:t||10;var n=qe(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),qe(n)}function XZe(e,t){t=t===0?0:t||10;var n=qe(e).toHsl();return n.l-=t/100,n.l=RS(n.l),qe(n)}function YZe(e,t){var n=qe(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,qe(n)}function KZe(e){var t=qe(e).toHsl();return t.h=(t.h+180)%360,qe(t)}function U7(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=qe(e).toHsl(),r=[qe(e)],i=360/t,s=1;s<t;s++)r.push(qe({h:(n.h+s*i)%360,s:n.s,l:n.l}));return r}function JZe(e){var t=qe(e).toHsl(),n=t.h;return[qe(e),qe({h:(n+72)%360,s:t.s,l:t.l}),qe({h:(n+216)%360,s:t.s,l:t.l})]}function ZZe(e,t,n){t=t||6,n=n||30;var r=qe(e).toHsl(),i=360/n,s=[qe(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(qe(r));return s}function QZe(e,t){t=t||6;for(var n=qe(e).toHsv(),r=n.h,i=n.s,s=n.v,a=[],o=1/t;t--;)a.push(qe({h:r,s:i,v:s})),s=(s+o)%1;return a}qe.mix=function(e,t,n){n=n===0?0:n||50;var r=qe(e).toRgb(),i=qe(t).toRgb(),s=n/100,a={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return qe(a)};qe.readability=function(e,t){var n=qe(e),r=qe(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};qe.isReadable=function(e,t,n){var r=qe.readability(e,t),i,s;switch(s=!1,i=sQe(n),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};qe.mostReadable=function(e,t,n){var r=null,i=0,s,a,o,l;n=n||{},a=n.includeFallbackColors,o=n.level,l=n.size;for(var c=0;c<t.length;c++)s=qe.readability(e,t[c]),s>i&&(i=s,r=qe(t[c]));return qe.isReadable(e,r,{level:o,size:l})||!a?r:(n.includeFallbackColors=!1,qe.mostReadable(e,["#fff","#000"],n))};var t3=qe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},eQe=qe.hexNames=tQe(t3);function tQe(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Ane(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function hn(e,t){nQe(e)&&(e="100%");var n=rQe(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function RS(e){return Math.min(1,Math.max(0,e))}function os(e){return parseInt(e,16)}function nQe(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function rQe(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ba(e){return e.length==1?"0"+e:""+e}function dm(e){return e<=1&&(e=e*100+"%"),e}function Tne(e){return Math.round(parseFloat(e)*255).toString(16)}function z7(e){return os(e)/255}var Sa=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function pl(e){return!!Sa.CSS_UNIT.exec(e)}function iQe(e){e=e.replace(IZe,"").replace(LZe,"").toLowerCase();var t=!1;if(t3[e])e=t3[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Sa.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Sa.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Sa.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Sa.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Sa.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Sa.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Sa.hex8.exec(e))?{r:os(n[1]),g:os(n[2]),b:os(n[3]),a:z7(n[4]),format:t?"name":"hex8"}:(n=Sa.hex6.exec(e))?{r:os(n[1]),g:os(n[2]),b:os(n[3]),format:t?"name":"hex"}:(n=Sa.hex4.exec(e))?{r:os(n[1]+""+n[1]),g:os(n[2]+""+n[2]),b:os(n[3]+""+n[3]),a:z7(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=Sa.hex3.exec(e))?{r:os(n[1]+""+n[1]),g:os(n[2]+""+n[2]),b:os(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function sQe(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}const aQe=["innerHTML"],oQe=vr({__name:"CTooltip",setup(e,{expose:t}){const n=rs({isShow:!1,top:0,left:0,content:""}),r=zn();function i(a,o,l,c){let u="<b>"+o+" ("+l+")</b>";c.forEach(f=>{u+="<br/><i>"+f.name+":</i> "+f.value.toLocaleString()+" "+f.unit}),n.content=u,n.left=a.pageX-50,n.top=a.pageY+15,n.isShow=!0}function s(){n.isShow=!1}return t({drawWithEntries:i,hide:s}),(a,o)=>n.isShow?(je(),Qe("div",{key:0,ref_key:"tooltipEl",ref:r,class:"tooltip",style:Pu({top:n.top+"px",left:n.left+"px"}),innerHTML:n.content},null,12,aQe)):Cr("",!0)}}),lQe=Ax(oQe,[["__scopeId","data-v-93082f97"]]),cQe={class:"container-fluid p-3"},uQe={id:"piechart"},fQe=se("div",{class:"row"},[se("div",null,[se("h4",null,"Confirm your data are appropriate for a cartogram"),se("p",null,[Co(" Your data sums to an approximate total of "),se("b",{id:"data-total"}),Co(". Is this a "),se("a",{href:"/faq#what-kind-of-data"},"meaningful quantity"),Co("? Additionally, you may consider the pie chart below. If it is an acceptable visualization for your dataset, then you can present your data as a cartogram. Otherwise, please choose a different dataset to continue. ")])])],-1),hQe=se("div",{id:"piechart-area"},null,-1),dQe={class:"text-center",id:"piechart-buttons"},pQe=vr({__name:"CChart",emits:["confirm","cancel"],setup(e,{expose:t,emit:n}){Aa.prototype.transition=LV;const r=zn(),i=n;function s(a){const u="piechart-area",f=document.getElementById(u);for(;f!=null&&f.firstChild;)f.removeChild(f.firstChild);let h="",d="",p=a.fields[4].label.match(/(.+)\s?\((.+)\)$/);p&&(h=p[1],d=p[2]);const g=600,m=450,x=Math.min(g,m)/2,v=Aa("#"+u).append("svg").attr("viewBox","0 0 "+g+" "+m).append("g");v.append("g").attr("class","slices"),v.append("g").attr("class","labels"),v.append("g").attr("class","lines");const y=T_e().sort(null).value(I=>I.value),_=mC().outerRadius(x*.8).innerRadius(0),b=mC().innerRadius(x*.9).outerRadius(x*.9);v.attr("transform","translate("+g/2+","+m/2+")");const w=Object.keys(a.items).map((I,Y,X)=>({label:I,value:isNaN(a.items[I][4])?a.items[I][4]:Number(a.items[I][4]),color:a.items[I][2],abbreviation:a.items[I][0],name:a.items[I][0]})).filter(I=>I.value!=="NA"),E=I=>{const Y=I.toPrecision(4),X=Y.split("e");return X.length===2?`${X[0]}&nbsp;&times;&nbsp;10<sup>${X[1].replace("+","")}</sup>`:Y},A=w.reduce((I,Y)=>I+Y.value,0);document.getElementById("data-total").innerHTML=E(A)+d;const S=A*.025;let k={label:"_others",value:0,color:"#aaaaaa",abbreviation:"Others",name:"Others"};w.forEach(I=>{I.value<S&&(k.value+=I.value)});let T=w;k.value>0&&(T=w.filter(I=>I.value>=S),T.push(k));for(let I=0;I<T.length;I++)if(T[I].color===T[(I+1)%T.length].color){for(let Y=I+2;Y<T.length+I+2;Y++)if(T[Y%T.length].color!==T[(I+1)%T.length].color&&T[(Y+1)%T.length].color!==T[(I+1)%T.length].color&&T[(Y-1)%T.length].color!==T[(I+1)%T.length].color){const X=T[Y%T.length];T[Y%T.length]=T[(I+1)%T.length],T[(I+1)%T.length]=X;break}}const O=T.reduce((I,Y,X,oe)=>Y.value!=="NA"?I+Y.value:I,0);var C;let D=v.select(".slices").selectAll("path.slice").data(y(T));D=D.enter().insert("path").style("fill",I=>I.data.color).attr("class","slice").on("mouseover",function(I,Y){var oe;var X=qe(Y.data.color.toString()).brighten(20).toString();Aa(this).style("fill",X),(oe=r.value)==null||oe.drawWithEntries(I,Y.data.name,Y.data.abbreviation,[{name:h,value:Y.data.value,unit:d}])}).on("mousemove",function(I,Y){var X;(X=r.value)==null||X.drawWithEntries(I,Y.data.name,Y.data.abbreviation,[{name:h,value:Y.data.value,unit:d}])}).on("mouseout",function(I,Y){var X;Aa(this).style("fill",Y.data.color),(X=r.value)==null||X.hide()}).merge(D),D.transition().duration(1e3).attrTween("d",I=>{C=C||I;const Y=Ha(C,I);return C=Y(0),function(X){return _(Y(X))}}),D.exit().remove();const N=I=>I.startAngle+(I.endAngle-I.startAngle)/2;let R=v.select(".labels").selectAll("text").data(y(T),I=>I.data.label);R=R.enter().filter(I=>I.data.value>=.05*O).append("text").attr("dy",".35em").text(I=>I.data.abbreviation).merge(R),R.transition().duration(1e3).attrTween("transform",function(I){C=C||I;var Y=Ha(C,I);return C=Y(0),function(X){var oe=Y(X),xe=b.centroid(oe);return xe[0]=x*(N(oe)<Math.PI?1:-1),"translate("+xe+")"}}).styleTween("text-anchor",function(I){C=C||I;var Y=Ha(C,I);return C=Y(0),function(X){var oe=Y(X);return N(oe)<Math.PI?"start":"end"}}),R.exit().remove();let L=v.select(".lines").selectAll("polyline").data(y(T),I=>I.data.label);L.enter().filter(I=>I.data.value>=.05*O).append("polyline").transition().duration(1e3).attrTween("points",function(I){C=C||I;var Y=w4(C,I);return C=Y(0),function(X){var oe=Y(X),xe=b.centroid(oe);return xe[0]=x*.95*(N(oe)<Math.PI?1:-1),[_.centroid(oe),b.centroid(oe),xe]}}),L.exit().remove()}return t({drawPieChart:s}),(a,o)=>(je(),Qe("div",cQe,[vt(lQe,{ref_key:"tooltipEl",ref:r},null,512),se("div",uQe,[fQe,hQe,se("div",dQe,[se("button",{class:"btn btn-secondary mx-2",onClick:o[0]||(o[0]=l=>i("cancel"))},"Cancel"),se("button",{class:"btn btn-primary",onClick:o[1]||(o[1]=l=>i("confirm"))},"Yes, I Confirm")])])]))}}),gQe=e=>(Y1("data-v-8f7be90f"),e=e(),K1(),e),mQe={key:0,class:"container-fluid p-3 text-center"},xQe=gQe(()=>se("h4",null,"Loading...",-1)),vQe={class:"progress",role:"progressbar","aria-label":"Basic example","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"},yQe=vr({__name:"CProgressBar",props:{min:{default:0},max:{default:100}},emits:["change"],setup(e,{emit:t}){const n=Rp(),r=e,i=t,s=tu(()=>{let a=n.loadingProgress;return a<r.max?a=Math.max(r.min,a):a=Math.min(r.max,a),n.loadingProgress=a,i("change",a<r.max),n.loadingProgress});return(a,o)=>s.value<r.max?(je(),Qe("div",mQe,[xQe,se("div",vQe,[se("div",{class:"progress-bar bg-primary",style:Pu({width:s.value+"%"})},null,4)])])):Cr("",!0)}}),_Qe=Ax(yQe,[["__scopeId","data-v-8f7be90f"]]);class H7{static get(t,n=null,r=null,i=!0){return new Promise(function(s,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(this.readyState==4)if(this.status==200)try{s(i?JSON.parse(this.responseText):this.response)}catch(l){console.log(l),console.log(this.responseText),a(Error("Unable to parse output."))}else this.status==429?a(Error("Too many requests within specify time. Please try again later.")):(console.log(t),a(Error("Unable to fetch data from the server.")))},r!==null&&(o.onprogress=r),o.ontimeout=function(l){a(Error("The request has timed out."))},n!==null&&(o.timeout=n),o.open("GET",t,!0),o.send()})}static post(t,n,r={},i=3e4){return new Promise(function(s,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(this.readyState==4)if(this.status==200)try{s(JSON.parse(this.responseText))}catch(c){console.log(c),console.log(this.responseText),a(Error("Unable to parse output."))}else if(this.status==429)a(Error("Too many requests within specify time. Please try again later."));else{console.log(t);var l=JSON.parse(this.responseText);const c=l.error?l.error:"Unable to fetch data from the server.";a(Error(c))}},o.ontimeout=function(l){a(Error("The request has timed out."))},o.open("POST",t,!0),o.timeout=i,Object.keys(r).forEach(function(l,c){o.setRequestHeader(l,r[l])}),o.send(n)})}static serializePostVariables(t){var n="",r=!0;return Object.keys(t).forEach(function(i,s){n+=(r?"":"&")+i+"="+encodeURIComponent(t[i]),r=!1}),n}static generateMIMEBoundary(){for(var t="---------",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<25;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}const bQe={key:0,class:"d-flex flex-fill p-2"},EQe={id:"errorToast",class:"toast toast position-absolute end-0 bottom-0 m-3 text-bg-danger",role:"alert","aria-live":"assertive","aria-atomic":"true","data-bs-autohide":"false"},wQe={class:"d-flex"},SQe={class:"toast-body"},AQe=se("button",{type:"button",class:"btn-close me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),TQe=vr({__name:"Cartogram",props:{mapName:{},maps:{},mapDataKey:{},mode:{}},setup(e){const t=Rp(),n=e,r=rs({mapkey:-1,currentComponent:"map",isLoading:!0,error:"",extendError:""}),i=zn();var s=null;Jb(()=>{t.currentMapName=n.mapName,t.stringKey=n.mapDataKey});async function a(){r.mapkey=Date.now(),o()}async function o(){r.currentComponent="map",s=null}async function l(u){s=u,r.currentComponent="chart",await Jl(),i.value.drawPieChart(u)}async function c(){function u(h){let d=Date.now().toString();const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",g=p.length;let m=d.length;for(;m<h;)d+=p.charAt(Math.floor(Math.random()*g)),m+=1;return d}var f=u(32);await new Promise(function(h,d){var p="data="+JSON.stringify({handler:t.currentMapName,values:s,stringKey:f,persist:!0}),g=window.setInterval(function(m){return function(){H7.get("/api/v1/getprogress?key="+encodeURIComponent(m)+"&time="+Date.now()).then(function(x){if(x.progress===null){t.loadingProgress=8;return}t.loadingProgress=Math.floor(x.progress*100),console.log(x.stderr)})}}(f),500);H7.post("/api/v1/cartogram",p,{"Content-type":"application/x-www-form-urlencoded"}).then(function(m){t.loadingProgress=100,window.clearInterval(g),h(m),window.location.href="/cartogram/key/"+m.stringKey},function(m){t.loadingProgress=100,window.clearInterval(g),d(m)})}).catch(function(h){r.currentComponent="map",r.error=h,s=null,ux.getOrCreateInstance(document.getElementById("errorToast")).show(),o()})}return(u,f)=>(je(),Qe(qt,null,[vt(r3e,{isEmbed:n.mode==="embed",maps:n.maps,onMap_changed:a,onVersion_changed:f[0]||(f[0]=h=>Wt(t).currentVersionName=h),onConfirm_data:l},null,8,["isEmbed","maps"]),vt(_Qe,{onChange:f[1]||(f[1]=h=>r.isLoading=h)}),r.isLoading?Cr("",!0):(je(),Qe("div",bQe,[r.currentComponent==="chart"?(je(),S0(pQe,{key:0,ref_key:"chartEl",ref:i,onConfirm:c,onCancel:o},null,512)):(je(),S0($Ze,{key:r.mapkey,currentMapName:Wt(t).currentMapName,currentVersionKey:Wt(t).currentVersionName,versions:Wt(t).versions,stringKey:Wt(t).stringKey,showBase:Wt(t).options.showBase,showGrid:Wt(t).options.showGrid,mode:n.mode},null,8,["currentMapName","currentVersionKey","versions","stringKey","showBase","showGrid","mode"]))])),se("div",EQe,[se("div",wQe,[se("div",SQe,Ua(r.error),1),AQe])])],64))}});if(document.getElementById("cartogram-app")){const e=WU(TQe,{mapName,maps,mapDataKey,mode});e.use(lle()),e.mount("#cartogram-app")}});export default kQe();
