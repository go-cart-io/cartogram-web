var kre=Object.defineProperty;var Cre=(e,t,n)=>t in e?kre(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vv=(e,t,n)=>Cre(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function zs(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const bt={},l0=[],Or=()=>{},Hg=()=>!1,qh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),R3=e=>e.startsWith("onUpdate:"),Tt=Object.assign,I3=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Fre=Object.prototype.hasOwnProperty,Ht=(e,t)=>Fre.call(e,t),Ve=Array.isArray,c0=e=>kp(e)==="[object Map]",Xh=e=>kp(e)==="[object Set]",H$=e=>kp(e)==="[object Date]",Ore=e=>kp(e)==="[object RegExp]",it=e=>typeof e=="function",lt=e=>typeof e=="string",is=e=>typeof e=="symbol",Kt=e=>e!==null&&typeof e=="object",$3=e=>(Kt(e)||it(e))&&it(e.then)&&it(e.catch),EB=Object.prototype.toString,kp=e=>EB.call(e),Nre=e=>kp(e).slice(8,-1),qb=e=>kp(e)==="[object Object]",M3=e=>lt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ru=zs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Dre=zs("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Xb=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Rre=/-(\w)/g,fn=Xb(e=>e.replace(Rre,(t,n)=>n?n.toUpperCase():"")),Ire=/\B([A-Z])/g,Yi=Xb(e=>e.replace(Ire,"-$1").toLowerCase()),Yh=Xb(e=>e.charAt(0).toUpperCase()+e.slice(1)),u0=Xb(e=>e?`on${Yh(e)}`:""),bi=(e,t)=>!Object.is(e,t),f0=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},wB=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},F_=e=>{const t=parseFloat(e);return isNaN(t)?e:t},O_=e=>{const t=lt(e)?Number(e):NaN;return isNaN(t)?e:t};let V$;const Yb=()=>V$||(V$=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $re(e,t){return e+JSON.stringify(t,(n,r)=>typeof r=="function"?r.toString():r)}const Mre="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",Lre=zs(Mre);function Bu(e){if(Ve(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=lt(r)?SB(r):Bu(r);if(i)for(const s in i)t[s]=i[s]}return t}else if(lt(e)||Kt(e))return e}const Pre=/;(?![^(]*\))/g,Bre=/:([^]+)/,Ure=/\/\*[^]*?\*\//g;function SB(e){const t={};return e.replace(Ure,"").split(Pre).forEach(n=>{if(n){const r=n.split(Bre);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Do(e){let t="";if(lt(e))t=e;else if(Ve(e))for(let n=0;n<e.length;n++){const r=Do(e[n]);r&&(t+=r+" ")}else if(Kt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function zre(e){if(!e)return null;let{class:t,style:n}=e;return t&&!lt(t)&&(e.class=Do(t)),n&&(e.style=Bu(n)),e}const Hre="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Vre="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Wre="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",jre="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",Gre=zs(Hre),qre=zs(Vre),Xre=zs(Wre),Yre=zs(jre),Kre="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Jre=zs(Kre);function TB(e){return!!e||e===""}function Zre(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=gu(e[r],t[r]);return n}function gu(e,t){if(e===t)return!0;let n=H$(e),r=H$(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=is(e),r=is(t),n||r)return e===t;if(n=Ve(e),r=Ve(t),n||r)return n&&r?Zre(e,t):!1;if(n=Kt(e),r=Kt(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!gu(e[a],t[a]))return!1}}return String(e)===String(t)}function Kb(e,t){return e.findIndex(n=>gu(n,t))}const AB=e=>!!(e&&e.__v_isRef===!0),gr=e=>lt(e)?e:e==null?"":Ve(e)||Kt(e)&&(e.toString===EB||!it(e.toString))?AB(e)?gr(e.value):JSON.stringify(e,kB,2):String(e),kB=(e,t)=>AB(t)?kB(e,t.value):c0(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],s)=>(n[jS(r,s)+" =>"]=i,n),{})}:Xh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>jS(n))}:is(t)?jS(t):Kt(t)&&!Ve(t)&&!qb(t)?String(t):t,jS=(e,t="")=>{var n;return is(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vi;class L3{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vi,!t&&vi&&(this.index=(vi.scopes||(vi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=vi;try{return vi=this,t()}finally{vi=n}}}on(){vi=this}off(){vi=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function P3(e){return new L3(e)}function B3(){return vi}function CB(e,t=!1){vi&&vi.cleanups.push(e)}let on;const GS=new WeakSet;class e1{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vi&&vi.active&&vi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,GS.has(this)&&(GS.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||OB(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,W$(this),NB(this);const t=on,n=ja;on=this,ja=!0;try{return this.fn()}finally{DB(this),on=t,ja=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)H3(t);this.deps=this.depsTail=void 0,W$(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?GS.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wk(this)&&this.run()}get dirty(){return wk(this)}}let FB=0,vm,ym;function OB(e,t=!1){if(e.flags|=8,t){e.next=ym,ym=e;return}e.next=vm,vm=e}function U3(){FB++}function z3(){if(--FB>0)return;if(ym){let t=ym;for(ym=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;vm;){let t=vm;for(vm=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function NB(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function DB(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),H3(r),Qre(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function wk(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(RB(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function RB(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===t1))return;e.globalVersion=t1;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!wk(e)){e.flags&=-3;return}const n=on,r=ja;on=e,ja=!0;try{NB(e);const i=e.fn(e._value);(t.version===0||bi(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{on=n,ja=r,DB(e),e.flags&=-3}}function H3(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)H3(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Qre(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}function eie(e,t){e.effect instanceof e1&&(e=e.effect.fn);const n=new e1(e);t&&Tt(n,t);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function tie(e){e.effect.stop()}let ja=!0;const IB=[];function Uu(){IB.push(ja),ja=!1}function zu(){const e=IB.pop();ja=e===void 0?!0:e}function W$(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=on;on=void 0;try{t()}finally{on=n}}}let t1=0;class nie{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Jb{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!on||!ja||on===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==on)n=this.activeLink=new nie(on,this),on.deps?(n.prevDep=on.depsTail,on.depsTail.nextDep=n,on.depsTail=n):on.deps=on.depsTail=n,$B(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=on.depsTail,n.nextDep=void 0,on.depsTail.nextDep=n,on.depsTail=n,on.deps===n&&(on.deps=r)}return n}trigger(t){this.version++,t1++,this.notify(t)}notify(t){U3();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{z3()}}}function $B(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)$B(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const N_=new WeakMap,Wf=Symbol(""),Sk=Symbol(""),n1=Symbol("");function qr(e,t,n){if(ja&&on){let r=N_.get(e);r||N_.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Jb),i.map=r,i.key=n),i.track()}}function kl(e,t,n,r,i,s){const a=N_.get(e);if(!a){t1++;return}const o=l=>{l&&l.trigger()};if(U3(),t==="clear")a.forEach(o);else{const l=Ve(e),c=l&&M3(n);if(l&&n==="length"){const u=Number(r);a.forEach((f,h)=>{(h==="length"||h===n1||!is(h)&&h>=u)&&o(f)})}else switch((n!==void 0||a.has(void 0))&&o(a.get(n)),c&&o(a.get(n1)),t){case"add":l?c&&o(a.get("length")):(o(a.get(Wf)),c0(e)&&o(a.get(Sk)));break;case"delete":l||(o(a.get(Wf)),c0(e)&&o(a.get(Sk)));break;case"set":c0(e)&&o(a.get(Wf));break}}z3()}function rie(e,t){const n=N_.get(e);return n&&n.get(t)}function Ed(e){const t=kt(e);return t===e?t:(qr(t,"iterate",n1),ks(e)?t:t.map(Xr))}function Zb(e){return qr(e=kt(e),"iterate",n1),e}const iie={__proto__:null,[Symbol.iterator](){return qS(this,Symbol.iterator,Xr)},concat(...e){return Ed(this).concat(...e.map(t=>Ve(t)?Ed(t):t))},entries(){return qS(this,"entries",e=>(e[1]=Xr(e[1]),e))},every(e,t){return pl(this,"every",e,t,void 0,arguments)},filter(e,t){return pl(this,"filter",e,t,n=>n.map(Xr),arguments)},find(e,t){return pl(this,"find",e,t,Xr,arguments)},findIndex(e,t){return pl(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return pl(this,"findLast",e,t,Xr,arguments)},findLastIndex(e,t){return pl(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return pl(this,"forEach",e,t,void 0,arguments)},includes(...e){return XS(this,"includes",e)},indexOf(...e){return XS(this,"indexOf",e)},join(e){return Ed(this).join(e)},lastIndexOf(...e){return XS(this,"lastIndexOf",e)},map(e,t){return pl(this,"map",e,t,void 0,arguments)},pop(){return fg(this,"pop")},push(...e){return fg(this,"push",e)},reduce(e,...t){return j$(this,"reduce",e,t)},reduceRight(e,...t){return j$(this,"reduceRight",e,t)},shift(){return fg(this,"shift")},some(e,t){return pl(this,"some",e,t,void 0,arguments)},splice(...e){return fg(this,"splice",e)},toReversed(){return Ed(this).toReversed()},toSorted(e){return Ed(this).toSorted(e)},toSpliced(...e){return Ed(this).toSpliced(...e)},unshift(...e){return fg(this,"unshift",e)},values(){return qS(this,"values",Xr)}};function qS(e,t,n){const r=Zb(e),i=r[t]();return r!==e&&!ks(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const sie=Array.prototype;function pl(e,t,n,r,i,s){const a=Zb(e),o=a!==e&&!ks(e),l=a[t];if(l!==sie[t]){const f=l.apply(e,s);return o?Xr(f):f}let c=n;a!==e&&(o?c=function(f,h){return n.call(this,Xr(f),h,e)}:n.length>2&&(c=function(f,h){return n.call(this,f,h,e)}));const u=l.call(a,c,r);return o&&i?i(u):u}function j$(e,t,n,r){const i=Zb(e);let s=n;return i!==e&&(ks(e)?n.length>3&&(s=function(a,o,l){return n.call(this,a,o,l,e)}):s=function(a,o,l){return n.call(this,a,Xr(o),l,e)}),i[t](s,...r)}function XS(e,t,n){const r=kt(e);qr(r,"iterate",n1);const i=r[t](...n);return(i===-1||i===!1)&&tE(n[0])?(n[0]=kt(n[0]),r[t](...n)):i}function fg(e,t,n=[]){Uu(),U3();const r=kt(e)[t].apply(e,n);return z3(),zu(),r}const aie=zs("__proto__,__v_isRef,__isVue"),MB=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(is));function oie(e){is(e)||(e=String(e));const t=kt(this);return qr(t,"has",e),t.hasOwnProperty(e)}class LB{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?VB:HB:s?zB:UB).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=Ve(t);if(!i){let l;if(a&&(l=iie[n]))return l;if(n==="hasOwnProperty")return oie}const o=Reflect.get(t,n,wn(t)?t:r);return(is(n)?MB.has(n):aie(n))||(i||qr(t,"get",n),s)?o:wn(o)?a&&M3(n)?o:o.value:Kt(o)?i?V3(o):hs(o):o}}class PB extends LB{constructor(t=!1){super(!1,t)}set(t,n,r,i){let s=t[n];if(!this._isShallow){const l=mu(s);if(!ks(r)&&!mu(r)&&(s=kt(s),r=kt(r)),!Ve(t)&&wn(s)&&!wn(r))return l?!1:(s.value=r,!0)}const a=Ve(t)&&M3(n)?Number(n)<t.length:Ht(t,n),o=Reflect.set(t,n,r,wn(t)?t:i);return t===kt(i)&&(a?bi(r,s)&&kl(t,"set",n,r):kl(t,"add",n,r)),o}deleteProperty(t,n){const r=Ht(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&kl(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!is(n)||!MB.has(n))&&qr(t,"has",n),r}ownKeys(t){return qr(t,"iterate",Ve(t)?"length":Wf),Reflect.ownKeys(t)}}class BB extends LB{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const lie=new PB,cie=new BB,uie=new PB(!0),fie=new BB(!0),Tk=e=>e,yv=e=>Reflect.getPrototypeOf(e);function hie(e,t,n){return function(...r){const i=this.__v_raw,s=kt(i),a=c0(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,c=i[e](...r),u=n?Tk:t?Ak:Xr;return!t&&qr(s,"iterate",l?Sk:Wf),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:o?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function _v(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function die(e,t){const n={get(i){const s=this.__v_raw,a=kt(s),o=kt(i);e||(bi(i,o)&&qr(a,"get",i),qr(a,"get",o));const{has:l}=yv(a),c=t?Tk:e?Ak:Xr;if(l.call(a,i))return c(s.get(i));if(l.call(a,o))return c(s.get(o));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!e&&qr(kt(i),"iterate",Wf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,a=kt(s),o=kt(i);return e||(bi(i,o)&&qr(a,"has",i),qr(a,"has",o)),i===o?s.has(i):s.has(i)||s.has(o)},forEach(i,s){const a=this,o=a.__v_raw,l=kt(o),c=t?Tk:e?Ak:Xr;return!e&&qr(l,"iterate",Wf),o.forEach((u,f)=>i.call(s,c(u),c(f),a))}};return Tt(n,e?{add:_v("add"),set:_v("set"),delete:_v("delete"),clear:_v("clear")}:{add(i){!t&&!ks(i)&&!mu(i)&&(i=kt(i));const s=kt(this);return yv(s).has.call(s,i)||(s.add(i),kl(s,"add",i,i)),this},set(i,s){!t&&!ks(s)&&!mu(s)&&(s=kt(s));const a=kt(this),{has:o,get:l}=yv(a);let c=o.call(a,i);c||(i=kt(i),c=o.call(a,i));const u=l.call(a,i);return a.set(i,s),c?bi(s,u)&&kl(a,"set",i,s):kl(a,"add",i,s),this},delete(i){const s=kt(this),{has:a,get:o}=yv(s);let l=a.call(s,i);l||(i=kt(i),l=a.call(s,i)),o&&o.call(s,i);const c=s.delete(i);return l&&kl(s,"delete",i,void 0),c},clear(){const i=kt(this),s=i.size!==0,a=i.clear();return s&&kl(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=hie(i,e,t)}),n}function Qb(e,t){const n=die(e,t);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Ht(n,i)&&i in r?n:r,i,s)}const pie={get:Qb(!1,!1)},gie={get:Qb(!1,!0)},mie={get:Qb(!0,!1)},xie={get:Qb(!0,!0)},UB=new WeakMap,zB=new WeakMap,HB=new WeakMap,VB=new WeakMap;function vie(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yie(e){return e.__v_skip||!Object.isExtensible(e)?0:vie(Nre(e))}function hs(e){return mu(e)?e:eE(e,!1,lie,pie,UB)}function WB(e){return eE(e,!1,uie,gie,zB)}function V3(e){return eE(e,!0,cie,mie,HB)}function _ie(e){return eE(e,!0,fie,xie,VB)}function eE(e,t,n,r,i){if(!Kt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=yie(e);if(a===0)return e;const o=new Proxy(e,a===2?r:n);return i.set(e,o),o}function Ro(e){return mu(e)?Ro(e.__v_raw):!!(e&&e.__v_isReactive)}function mu(e){return!!(e&&e.__v_isReadonly)}function ks(e){return!!(e&&e.__v_isShallow)}function tE(e){return e?!!e.__v_raw:!1}function kt(e){const t=e&&e.__v_raw;return t?kt(t):e}function nE(e){return!Ht(e,"__v_skip")&&Object.isExtensible(e)&&wB(e,"__v_skip",!0),e}const Xr=e=>Kt(e)?hs(e):e,Ak=e=>Kt(e)?V3(e):e;function wn(e){return e?e.__v_isRef===!0:!1}function Jr(e){return GB(e,!1)}function jB(e){return GB(e,!0)}function GB(e,t){return wn(e)?e:new bie(e,t)}class bie{constructor(t,n){this.dep=new Jb,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:kt(t),this._value=n?t:Xr(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||ks(t)||mu(t);t=r?t:kt(t),bi(t,n)&&(this._rawValue=t,this._value=r?t:Xr(t),this.dep.trigger())}}function Eie(e){e.dep&&e.dep.trigger()}function gn(e){return wn(e)?e.value:e}function wie(e){return it(e)?e():gn(e)}const Sie={get:(e,t,n)=>t==="__v_raw"?e:gn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return wn(i)&&!wn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function W3(e){return Ro(e)?e:new Proxy(e,Sie)}class Tie{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Jb,{get:r,set:i}=t(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(t){this._set(t)}}function qB(e){return new Tie(e)}function XB(e){const t=Ve(e)?new Array(e.length):{};for(const n in e)t[n]=YB(e,n);return t}class Aie{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return rie(kt(this._object),this._key)}}class kie{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Cie(e,t,n){return wn(e)?e:it(e)?new kie(e):Kt(e)&&arguments.length>1?YB(e,t,n):Jr(e)}function YB(e,t,n){const r=e[t];return wn(r)?r:new Aie(e,t,n)}class Fie{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Jb(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=t1-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&on!==this)return OB(this,!0),!0}get value(){const t=this.dep.track();return RB(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Oie(e,t,n=!1){let r,i;return it(e)?r=e:(r=e.get,i=e.set),new Fie(r,i,n)}const Nie={GET:"get",HAS:"has",ITERATE:"iterate"},Die={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},bv={},D_=new WeakMap;let Ic;function Rie(){return Ic}function KB(e,t=!1,n=Ic){if(n){let r=D_.get(n);r||D_.set(n,r=[]),r.push(e)}}function Iie(e,t,n=bt){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:o,call:l}=n,c=_=>i?_:ks(_)||i===!1||i===0?Cl(_,1):Cl(_);let u,f,h,d,p=!1,g=!1;if(wn(e)?(f=()=>e.value,p=ks(e)):Ro(e)?(f=()=>c(e),p=!0):Ve(e)?(g=!0,p=e.some(_=>Ro(_)||ks(_)),f=()=>e.map(_=>{if(wn(_))return _.value;if(Ro(_))return c(_);if(it(_))return l?l(_,2):_()})):it(e)?t?f=l?()=>l(e,2):e:f=()=>{if(h){Uu();try{h()}finally{zu()}}const _=Ic;Ic=u;try{return l?l(e,3,[d]):e(d)}finally{Ic=_}}:f=Or,t&&i){const _=f,b=i===!0?1/0:i;f=()=>Cl(_(),b)}const m=B3(),x=()=>{u.stop(),m&&m.active&&I3(m.effects,u)};if(s&&t){const _=t;t=(...b)=>{_(...b),x()}}let y=g?new Array(e.length).fill(bv):bv;const v=_=>{if(!(!(u.flags&1)||!u.dirty&&!_))if(t){const b=u.run();if(i||p||(g?b.some((w,E)=>bi(w,y[E])):bi(b,y))){h&&h();const w=Ic;Ic=u;try{const E=[b,y===bv?void 0:g&&y[0]===bv?[]:y,d];l?l(t,3,E):t(...E),y=b}finally{Ic=w}}}else u.run()};return o&&o(v),u=new e1(f),u.scheduler=a?()=>a(v,!1):v,d=_=>KB(_,!1,u),h=u.onStop=()=>{const _=D_.get(u);if(_){if(l)l(_,4);else for(const b of _)b();D_.delete(u)}},t?r?v(!0):y=u.run():a?a(v.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function Cl(e,t=1/0,n){if(t<=0||!Kt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,wn(e))Cl(e.value,t,n);else if(Ve(e))for(let r=0;r<e.length;r++)Cl(e[r],t,n);else if(Xh(e)||c0(e))e.forEach(r=>{Cl(r,t,n)});else if(qb(e)){for(const r in e)Cl(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Cl(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const JB=[];function $ie(e){JB.push(e)}function Mie(){JB.pop()}function Lie(e,t){}const Pie={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},Bie={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Cp(e,t,n,r){try{return r?e(...r):e()}catch(i){Kh(i,t,n)}}function ha(e,t,n,r){if(it(e)){const i=Cp(e,t,n,r);return i&&$3(i)&&i.catch(s=>{Kh(s,t,n)}),i}if(Ve(e)){const i=[];for(let s=0;s<e.length;s++)i.push(ha(e[s],t,n,r));return i}}function Kh(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||bt;if(t){let o=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const u=o.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,l,c)===!1)return}o=o.parent}if(s){Uu(),Cp(s,null,10,[e,l,c]),zu();return}}Uie(e,n,i,r,a)}function Uie(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const Ei=[];let bo=-1;const h0=[];let $c=null,zd=0;const ZB=Promise.resolve();let R_=null;function fh(e){const t=R_||ZB;return e?t.then(this?e.bind(this):e):t}function zie(e){let t=bo+1,n=Ei.length;for(;t<n;){const r=t+n>>>1,i=Ei[r],s=i1(i);s<e||s===e&&i.flags&2?t=r+1:n=r}return t}function j3(e){if(!(e.flags&1)){const t=i1(e),n=Ei[Ei.length-1];!n||!(e.flags&2)&&t>=i1(n)?Ei.push(e):Ei.splice(zie(t),0,e),e.flags|=1,QB()}}function QB(){R_||(R_=ZB.then(eU))}function r1(e){Ve(e)?h0.push(...e):$c&&e.id===-1?$c.splice(zd+1,0,e):e.flags&1||(h0.push(e),e.flags|=1),QB()}function G$(e,t,n=bo+1){for(;n<Ei.length;n++){const r=Ei[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ei.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function I_(e){if(h0.length){const t=[...new Set(h0)].sort((n,r)=>i1(n)-i1(r));if(h0.length=0,$c){$c.push(...t);return}for($c=t,zd=0;zd<$c.length;zd++){const n=$c[zd];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}$c=null,zd=0}}const i1=e=>e.id==null?e.flags&2?-1:1/0:e.id;function eU(e){try{for(bo=0;bo<Ei.length;bo++){const t=Ei[bo];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Cp(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;bo<Ei.length;bo++){const t=Ei[bo];t&&(t.flags&=-2)}bo=-1,Ei.length=0,I_(),R_=null,(Ei.length||h0.length)&&eU()}}let Hd,Ev=[];function tU(e,t){var n,r;Hd=e,Hd?(Hd.enabled=!0,Ev.forEach(({event:i,args:s})=>Hd.emit(i,...s)),Ev=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{tU(s,t)}),setTimeout(()=>{Hd||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Ev=[])},3e3)):Ev=[]}let Zn=null,rE=null;function s1(e){const t=Zn;return Zn=e,rE=e&&e.type.__scopeId||null,t}function Hie(e){rE=e}function Vie(){rE=null}const Wie=e=>iE;function iE(e,t=Zn,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Ik(-1);const s=s1(t);let a;try{a=e(...i)}finally{s1(s),r._d&&Ik(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Ki(e,t){if(Zn===null)return e;const n=ax(Zn),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,a,o,l=bt]=t[i];s&&(it(s)&&(s={mounted:s,updated:s}),s.deep&&Cl(a),r.push({dir:s,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function wo(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const o=i[a];s&&(o.oldValue=s[a].value);let l=o.dir[r];l&&(Uu(),ha(l,n,8,[e.el,o,e,t]),zu())}}const nU=Symbol("_vte"),rU=e=>e.__isTeleport,_m=e=>e&&(e.disabled||e.disabled===""),q$=e=>e&&(e.defer||e.defer===""),X$=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Y$=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,kk=(e,t)=>{const n=e&&e.to;return lt(n)?t?t(n):null:n},iU={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,s,a,o,l,c){const{mc:u,pc:f,pbc:h,o:{insert:d,querySelector:p,createText:g,createComment:m}}=c,x=_m(t.props);let{shapeFlag:y,children:v,dynamicChildren:_}=t;if(e==null){const b=t.el=g(""),w=t.anchor=g("");d(b,n,r),d(w,n,r);const E=(S,A)=>{y&16&&(i&&i.isCE&&(i.ce._teleportTarget=S),u(v,S,A,i,s,a,o,l))},T=()=>{const S=t.target=kk(t.props,p),A=sU(S,t,g,d);S&&(a!=="svg"&&X$(S)?a="svg":a!=="mathml"&&Y$(S)&&(a="mathml"),x||(E(S,A),zy(t,!1)))};x&&(E(n,w),zy(t,!0)),q$(t.props)?Gn(()=>{T(),t.el.__isMounted=!0},s):T()}else{if(q$(t.props)&&!e.el.__isMounted){Gn(()=>{iU.process(e,t,n,r,i,s,a,o,l,c),delete e.el.__isMounted},s);return}t.el=e.el,t.targetStart=e.targetStart;const b=t.anchor=e.anchor,w=t.target=e.target,E=t.targetAnchor=e.targetAnchor,T=_m(e.props),S=T?n:w,A=T?b:E;if(a==="svg"||X$(w)?a="svg":(a==="mathml"||Y$(w))&&(a="mathml"),_?(h(e.dynamicChildren,_,S,i,s,a,o),n4(e,t,!0)):l||f(e,t,S,A,i,s,a,o,!1),x)T?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):wv(t,n,b,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const C=t.target=kk(t.props,p);C&&wv(t,C,null,c,0)}else T&&wv(t,w,E,c,1);zy(t,x)}},remove(e,t,n,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:o,anchor:l,targetStart:c,targetAnchor:u,target:f,props:h}=e;if(f&&(i(c),i(u)),s&&i(l),a&16){const d=s||!_m(h);for(let p=0;p<o.length;p++){const g=o[p];r(g,t,n,d,!!g.dynamicChildren)}}},move:wv,hydrate:jie};function wv(e,t,n,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,t,n);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=e,f=s===2;if(f&&r(a,t,n),(!f||_m(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],t,n,2);f&&r(o,t,n)}function jie(e,t,n,r,i,s,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:c,createText:u}},f){const h=t.target=kk(t.props,l);if(h){const d=_m(t.props),p=h._lpa||h.firstChild;if(t.shapeFlag&16)if(d)t.anchor=f(a(e),t,o(e),n,r,i,s),t.targetStart=p,t.targetAnchor=p&&a(p);else{t.anchor=a(e);let g=p;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,h._lpa=t.targetAnchor&&a(t.targetAnchor);break}}g=a(g)}t.targetAnchor||sU(h,t,u,c),f(p&&a(p),t,h,n,r,i,s)}zy(t,d)}return t.anchor&&a(t.anchor)}const Gie=iU;function zy(e,t){const n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function sU(e,t,n,r){const i=t.targetStart=n(""),s=t.targetAnchor=n("");return i[nU]=s,e&&(r(i,e),r(s,e)),s}const Mc=Symbol("_leaveCb"),Sv=Symbol("_enterCb");function G3(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fc(()=>{e.isMounted=!0}),lE(()=>{e.isUnmounting=!0}),e}const Ws=[Function,Array],q3={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ws,onEnter:Ws,onAfterEnter:Ws,onEnterCancelled:Ws,onBeforeLeave:Ws,onLeave:Ws,onAfterLeave:Ws,onLeaveCancelled:Ws,onBeforeAppear:Ws,onAppear:Ws,onAfterAppear:Ws,onAppearCancelled:Ws},aU=e=>{const t=e.subTree;return t.component?aU(t.component):t},qie={name:"BaseTransition",props:q3,setup(e,{slots:t}){const n=Ea(),r=G3();return()=>{const i=t.default&&sE(t.default(),!0);if(!i||!i.length)return;const s=oU(i),a=kt(e),{mode:o}=a;if(r.isLeaving)return YS(s);const l=K$(s);if(!l)return YS(s);let c=C0(l,a,r,n,f=>c=f);l.type!==Vn&&Ql(l,c);let u=n.subTree&&K$(n.subTree);if(u&&u.type!==Vn&&!Ma(l,u)&&aU(n).type!==Vn){let f=C0(u,a,r,n);if(Ql(u,f),o==="out-in"&&l.type!==Vn)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,u=void 0},YS(s);o==="in-out"&&l.type!==Vn?f.delayLeave=(h,d,p)=>{const g=cU(r,u);g[String(u.key)]=u,h[Mc]=()=>{d(),h[Mc]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function oU(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Vn){t=n;break}}return t}const lU=qie;function cU(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function C0(e,t,n,r,i){const{appear:s,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:x,onAfterAppear:y,onAppearCancelled:v}=t,_=String(e.key),b=cU(n,e),w=(S,A)=>{S&&ha(S,r,9,A)},E=(S,A)=>{const C=A[1];w(S,A),Ve(S)?S.every(F=>F.length<=1)&&C():S.length<=1&&C()},T={mode:a,persisted:o,beforeEnter(S){let A=l;if(!n.isMounted)if(s)A=m||l;else return;S[Mc]&&S[Mc](!0);const C=b[_];C&&Ma(e,C)&&C.el[Mc]&&C.el[Mc](),w(A,[S])},enter(S){let A=c,C=u,F=f;if(!n.isMounted)if(s)A=x||c,C=y||u,F=v||f;else return;let N=!1;const M=S[Sv]=O=>{N||(N=!0,O?w(F,[S]):w(C,[S]),T.delayedLeave&&T.delayedLeave(),S[Sv]=void 0)};A?E(A,[S,M]):M()},leave(S,A){const C=String(e.key);if(S[Sv]&&S[Sv](!0),n.isUnmounting)return A();w(h,[S]);let F=!1;const N=S[Mc]=M=>{F||(F=!0,A(),M?w(g,[S]):w(p,[S]),S[Mc]=void 0,b[C]===e&&delete b[C])};b[C]=e,d?E(d,[S,N]):N()},clone(S){const A=C0(S,t,n,r,i);return i&&i(A),A}};return T}function YS(e){if(ix(e))return e=Ho(e),e.children=null,e}function K$(e){if(!ix(e))return rU(e.type)&&e.children?oU(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&it(n.default))return n.default()}}function Ql(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ql(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function sE(e,t=!1,n){let r=[],i=0;for(let s=0;s<e.length;s++){let a=e[s];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===mt?(a.patchFlag&128&&i++,r=r.concat(sE(a.children,t,o))):(t||a.type!==Vn)&&r.push(o!=null?Ho(a,{key:o}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function vr(e,t){return it(e)?Tt({name:e.name},t,{setup:e}):e}function Xie(){const e=Ea();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function X3(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Yie(e){const t=Ea(),n=jB(null);if(t){const i=t.refs===bt?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function a1(e,t,n,r,i=!1){if(Ve(e)){e.forEach((p,g)=>a1(p,t&&(Ve(t)?t[g]:t),n,r,i));return}if(iu(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&a1(e,t,n,r.component.subTree);return}const s=r.shapeFlag&4?ax(r.component):r.el,a=i?null:s,{i:o,r:l}=e,c=t&&t.r,u=o.refs===bt?o.refs={}:o.refs,f=o.setupState,h=kt(f),d=f===bt?()=>!1:p=>Ht(h,p);if(c!=null&&c!==l&&(lt(c)?(u[c]=null,d(c)&&(f[c]=null)):wn(c)&&(c.value=null)),it(l))Cp(l,o,12,[a,u]);else{const p=lt(l),g=wn(l);if(p||g){const m=()=>{if(e.f){const x=p?d(l)?f[l]:u[l]:l.value;i?Ve(x)&&I3(x,s):Ve(x)?x.includes(s)||x.push(s):p?(u[l]=[s],d(l)&&(f[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else p?(u[l]=a,d(l)&&(f[l]=a)):g&&(l.value=a,e.k&&(u[e.k]=a))};a?(m.id=-1,Gn(m,n)):m()}}}let J$=!1;const wd=()=>{J$||(console.error("Hydration completed but contains mismatches."),J$=!0)},Kie=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",Jie=e=>e.namespaceURI.includes("MathML"),Tv=e=>{if(e.nodeType===1){if(Kie(e))return"svg";if(Jie(e))return"mathml"}},Kd=e=>e.nodeType===8;function Zie(e){const{mt:t,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:a,remove:o,insert:l,createComment:c}}=e,u=(v,_)=>{if(!_.hasChildNodes()){n(null,v,_),I_(),_._vnode=v;return}f(_.firstChild,v,null,null,null),I_(),_._vnode=v},f=(v,_,b,w,E,T=!1)=>{T=T||!!_.dynamicChildren;const S=Kd(v)&&v.data==="[",A=()=>g(v,_,b,w,E,S),{type:C,ref:F,shapeFlag:N,patchFlag:M}=_;let O=v.nodeType;_.el=v,M===-2&&(T=!1,_.dynamicChildren=null);let D=null;switch(C){case su:O!==3?_.children===""?(l(_.el=i(""),a(v),v),D=v):D=A():(v.data!==_.children&&(wd(),v.data=_.children),D=s(v));break;case Vn:y(v)?(D=s(v),x(_.el=v.content.firstChild,v,b)):O!==8||S?D=A():D=s(v);break;case qf:if(S&&(v=s(v),O=v.nodeType),O===1||O===3){D=v;const I=!_.children.length;for(let U=0;U<_.staticCount;U++)I&&(_.children+=D.nodeType===1?D.outerHTML:D.data),U===_.staticCount-1&&(_.anchor=D),D=s(D);return S?s(D):D}else A();break;case mt:S?D=p(v,_,b,w,E,T):D=A();break;default:if(N&1)(O!==1||_.type.toLowerCase()!==v.tagName.toLowerCase())&&!y(v)?D=A():D=h(v,_,b,w,E,T);else if(N&6){_.slotScopeIds=E;const I=a(v);if(S?D=m(v):Kd(v)&&v.data==="teleport start"?D=m(v,v.data,"teleport end"):D=s(v),t(_,I,null,b,w,Tv(I),T),iu(_)&&!_.type.__asyncResolved){let U;S?(U=St(mt),U.anchor=D?D.previousSibling:I.lastChild):U=v.nodeType===3?Qn(""):St("div"),U.el=v,_.component.subTree=U}}else N&64?O!==8?D=A():D=_.type.hydrate(v,_,b,w,E,T,e,d):N&128&&(D=_.type.hydrate(v,_,b,w,Tv(a(v)),E,T,e,f))}return F!=null&&a1(F,null,w,_),D},h=(v,_,b,w,E,T)=>{T=T||!!_.dynamicChildren;const{type:S,props:A,patchFlag:C,shapeFlag:F,dirs:N,transition:M}=_,O=S==="input"||S==="option";if(O||C!==-1){N&&wo(_,null,b,"created");let D=!1;if(y(v)){D=MU(null,M)&&b&&b.vnode.props&&b.vnode.props.appear;const U=v.content.firstChild;D&&M.beforeEnter(U),x(U,v,b),_.el=v=U}if(F&16&&!(A&&(A.innerHTML||A.textContent))){let U=d(v.firstChild,_,v,b,w,E,T);for(;U;){Av(v,1)||wd();const Y=U;U=U.nextSibling,o(Y)}}else if(F&8){let U=_.children;U[0]===`
`&&(v.tagName==="PRE"||v.tagName==="TEXTAREA")&&(U=U.slice(1)),v.textContent!==U&&(Av(v,0)||wd(),v.textContent=_.children)}if(A){if(O||!T||C&48){const U=v.tagName.includes("-");for(const Y in A)(O&&(Y.endsWith("value")||Y==="indeterminate")||qh(Y)&&!ru(Y)||Y[0]==="."||U)&&r(v,Y,null,A[Y],void 0,b)}else if(A.onClick)r(v,"onClick",null,A.onClick,void 0,b);else if(C&4&&Ro(A.style))for(const U in A.style)A.style[U]}let I;(I=A&&A.onVnodeBeforeMount)&&Wi(I,b,_),N&&wo(_,null,b,"beforeMount"),((I=A&&A.onVnodeMounted)||N||D)&&jU(()=>{I&&Wi(I,b,_),D&&M.enter(v),N&&wo(_,null,b,"mounted")},w)}return v.nextSibling},d=(v,_,b,w,E,T,S)=>{S=S||!!_.dynamicChildren;const A=_.children,C=A.length;for(let F=0;F<C;F++){const N=S?A[F]:A[F]=qi(A[F]),M=N.type===su;v?(M&&!S&&F+1<C&&qi(A[F+1]).type===su&&(l(i(v.data.slice(N.children.length)),b,s(v)),v.data=N.children),v=f(v,N,w,E,T,S)):M&&!N.children?l(N.el=i(""),b):(Av(b,1)||wd(),n(null,N,b,null,w,E,Tv(b),T))}return v},p=(v,_,b,w,E,T)=>{const{slotScopeIds:S}=_;S&&(E=E?E.concat(S):S);const A=a(v),C=d(s(v),_,A,b,w,E,T);return C&&Kd(C)&&C.data==="]"?s(_.anchor=C):(wd(),l(_.anchor=c("]"),A,C),C)},g=(v,_,b,w,E,T)=>{if(Av(v.parentElement,1)||wd(),_.el=null,T){const C=m(v);for(;;){const F=s(v);if(F&&F!==C)o(F);else break}}const S=s(v),A=a(v);return o(v),n(null,_,A,S,b,w,Tv(A),E),b&&(b.vnode.el=_.el,fE(b,_.el)),S},m=(v,_="[",b="]")=>{let w=0;for(;v;)if(v=s(v),v&&Kd(v)&&(v.data===_&&w++,v.data===b)){if(w===0)return s(v);w--}return v},x=(v,_,b)=>{const w=_.parentNode;w&&w.replaceChild(v,_);let E=b;for(;E;)E.vnode.el===_&&(E.vnode.el=E.subTree.el=v),E=E.parent},y=v=>v.nodeType===1&&v.tagName==="TEMPLATE";return[u,f]}const Z$="data-allow-mismatch",Qie={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Av(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(Z$);)e=e.parentElement;const n=e&&e.getAttribute(Z$);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return t===0&&r.includes("children")?!0:n.split(",").includes(Qie[t])}}const ese=Yb().requestIdleCallback||(e=>setTimeout(e,1)),tse=Yb().cancelIdleCallback||(e=>clearTimeout(e)),nse=(e=1e4)=>t=>{const n=ese(t,{timeout:e});return()=>tse(n)};function rse(e){const{top:t,left:n,bottom:r,right:i}=e.getBoundingClientRect(),{innerHeight:s,innerWidth:a}=window;return(t>0&&t<s||r>0&&r<s)&&(n>0&&n<a||i>0&&i<a)}const ise=e=>(t,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),t();break}},e);return n(i=>{if(i instanceof Element){if(rse(i))return t(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},sse=e=>t=>{if(e){const n=matchMedia(e);if(n.matches)t();else return n.addEventListener("change",t,{once:!0}),()=>n.removeEventListener("change",t)}},ase=(e=[])=>(t,n)=>{lt(e)&&(e=[e]);let r=!1;const i=a=>{r||(r=!0,s(),t(),a.target.dispatchEvent(new a.constructor(a.type,a)))},s=()=>{n(a=>{for(const o of e)a.removeEventListener(o,i)})};return n(a=>{for(const o of e)a.addEventListener(o,i,{once:!0})}),s};function ose(e,t){if(Kd(e)&&e.data==="["){let n=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(t(r)===!1)break}else if(Kd(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else t(e)}const iu=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function lse(e){it(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:a,suspensible:o=!0,onError:l}=e;let c=null,u,f=0;const h=()=>(f++,c=null,d()),d=()=>{let p;return c||(p=c=t().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((m,x)=>{l(g,()=>m(h()),()=>x(g),f+1)});throw g}).then(g=>p!==c&&c?c:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),u=g,g)))};return vr({name:"AsyncComponentWrapper",__asyncLoader:d,__asyncHydrate(p,g,m){const x=s?()=>{const y=s(m,v=>ose(p,v));y&&(g.bum||(g.bum=[])).push(y)}:m;u?x():d().then(()=>!g.isUnmounted&&x())},get __asyncResolved(){return u},setup(){const p=Kn;if(X3(p),u)return()=>KS(u,p);const g=v=>{c=null,Kh(v,p,13,!r)};if(o&&p.suspense||F0)return d().then(v=>()=>KS(v,p)).catch(v=>(g(v),()=>r?St(r,{error:v}):null));const m=Jr(!1),x=Jr(),y=Jr(!!i);return i&&setTimeout(()=>{y.value=!1},i),a!=null&&setTimeout(()=>{if(!m.value&&!x.value){const v=new Error(`Async component timed out after ${a}ms.`);g(v),x.value=v}},a),d().then(()=>{m.value=!0,p.parent&&ix(p.parent.vnode)&&p.parent.update()}).catch(v=>{g(v),x.value=v}),()=>{if(m.value&&u)return KS(u,p);if(x.value&&r)return St(r,{error:x.value});if(n&&!y.value)return St(n)}}})}function KS(e,t){const{ref:n,props:r,children:i,ce:s}=t.vnode,a=St(e,r,i);return a.ref=n,a.ce=s,delete t.vnode.ce,a}const ix=e=>e.type.__isKeepAlive,cse={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Ea(),r=n.ctx;if(!r.renderer)return()=>{const y=t.default&&t.default();return y&&y.length===1?y[0]:y};const i=new Map,s=new Set;let a=null;const o=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:f}}}=r,h=f("div");r.activate=(y,v,_,b,w)=>{const E=y.component;c(y,v,_,0,o),l(E.vnode,y,v,_,E,o,b,y.slotScopeIds,w),Gn(()=>{E.isDeactivated=!1,E.a&&f0(E.a);const T=y.props&&y.props.onVnodeMounted;T&&Wi(T,E.parent,y)},o)},r.deactivate=y=>{const v=y.component;M_(v.m),M_(v.a),c(y,h,null,1,o),Gn(()=>{v.da&&f0(v.da);const _=y.props&&y.props.onVnodeUnmounted;_&&Wi(_,v.parent,y),v.isDeactivated=!0},o)};function d(y){JS(y),u(y,n,o,!0)}function p(y){i.forEach((v,_)=>{const b=Bk(v.type);b&&!y(b)&&g(_)})}function g(y){const v=i.get(y);v&&(!a||!Ma(v,a))?d(v):a&&JS(a),i.delete(y),s.delete(y)}Fi(()=>[e.include,e.exclude],([y,v])=>{y&&p(_=>Vg(y,_)),v&&p(_=>!Vg(v,_))},{flush:"post",deep:!0});let m=null;const x=()=>{m!=null&&(L_(n.subTree.type)?Gn(()=>{i.set(m,kv(n.subTree))},n.subTree.suspense):i.set(m,kv(n.subTree)))};return fc(x),oE(x),lE(()=>{i.forEach(y=>{const{subTree:v,suspense:_}=n,b=kv(v);if(y.type===b.type&&y.key===b.key){JS(b);const w=b.component.da;w&&Gn(w,_);return}d(y)})}),()=>{if(m=null,!t.default)return a=null;const y=t.default(),v=y[0];if(y.length>1)return a=null,y;if(!ec(v)||!(v.shapeFlag&4)&&!(v.shapeFlag&128))return a=null,v;let _=kv(v);if(_.type===Vn)return a=null,_;const b=_.type,w=Bk(iu(_)?_.type.__asyncResolved||{}:b),{include:E,exclude:T,max:S}=e;if(E&&(!w||!Vg(E,w))||T&&w&&Vg(T,w))return _.shapeFlag&=-257,a=_,v;const A=_.key==null?b:_.key,C=i.get(A);return _.el&&(_=Ho(_),v.shapeFlag&128&&(v.ssContent=_)),m=A,C?(_.el=C.el,_.component=C.component,_.transition&&Ql(_,_.transition),_.shapeFlag|=512,s.delete(A),s.add(A)):(s.add(A),S&&s.size>parseInt(S,10)&&g(s.values().next().value)),_.shapeFlag|=256,a=_,L_(v.type)?v:_}}},use=cse;function Vg(e,t){return Ve(e)?e.some(n=>Vg(n,t)):lt(e)?e.split(",").includes(t):Ore(e)?(e.lastIndex=0,e.test(t)):!1}function uU(e,t){hU(e,"a",t)}function fU(e,t){hU(e,"da",t)}function hU(e,t,n=Kn){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(aE(t,r,n),n){let i=n.parent;for(;i&&i.parent;)ix(i.parent.vnode)&&fse(r,t,n,i),i=i.parent}}function fse(e,t,n,r){const i=aE(t,e,r,!0);cE(()=>{I3(r[t],i)},n)}function JS(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function kv(e){return e.shapeFlag&128?e.ssContent:e}function aE(e,t,n=Kn,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{Uu();const o=ph(n),l=ha(t,n,e,a);return o(),zu(),l});return r?i.unshift(s):i.push(s),s}}const uc=e=>(t,n=Kn)=>{(!F0||e==="sp")&&aE(e,(...r)=>t(...r),n)},Y3=uc("bm"),fc=uc("m"),K3=uc("bu"),oE=uc("u"),lE=uc("bum"),cE=uc("um"),dU=uc("sp"),pU=uc("rtg"),gU=uc("rtc");function mU(e,t=Kn){aE("ec",e,t)}const J3="components",hse="directives";function dse(e,t){return Z3(J3,e,!0,t)||e}const xU=Symbol.for("v-ndc");function pse(e){return lt(e)?Z3(J3,e,!1)||e:e||xU}function gse(e){return Z3(hse,e)}function Z3(e,t,n=!0,r=!1){const i=Zn||Kn;if(i){const s=i.type;if(e===J3){const o=Bk(s,!1);if(o&&(o===t||o===fn(t)||o===Yh(fn(t))))return s}const a=Q$(i[e]||s[e],t)||Q$(i.appContext[e],t);return!a&&r?s:a}}function Q$(e,t){return e&&(e[t]||e[fn(t)]||e[Yh(fn(t))])}function Zr(e,t,n,r){let i;const s=n&&n[r],a=Ve(e);if(a||lt(e)){const o=a&&Ro(e);let l=!1;o&&(l=!ks(e),e=Zb(e)),i=new Array(e.length);for(let c=0,u=e.length;c<u;c++)i[c]=t(l?Xr(e[c]):e[c],c,void 0,s&&s[c])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,s&&s[o])}else if(Kt(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,s&&s[l]));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];i[l]=t(e[u],u,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function mse(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(Ve(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return e}function vU(e,t,n={},r,i){if(Zn.ce||Zn.parent&&iu(Zn.parent)&&Zn.parent.ce)return t!=="default"&&(n.name=t),Le(),dh(mt,null,[St("slot",n,r&&r())],64);let s=e[t];s&&s._c&&(s._d=!1),Le();const a=s&&Q3(s(n)),o=n.key||a&&a.key,l=dh(mt,{key:(o&&!is(o)?o:`_${t}`)+(!a&&r?"_fb":"")},a||(r?r():[]),a&&e._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Q3(e){return e.some(t=>ec(t)?!(t.type===Vn||t.type===mt&&!Q3(t.children)):!0)?e:null}function xse(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:u0(r)]=e[r];return n}const Ck=e=>e?ZU(e)?ax(e):Ck(e.parent):null,bm=Tt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ck(e.parent),$root:e=>Ck(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>e4(e),$forceUpdate:e=>e.f||(e.f=()=>{j3(e.update)}),$nextTick:e=>e.n||(e.n=fh.bind(e.proxy)),$watch:e=>Xse.bind(e)}),ZS=(e,t)=>e!==bt&&!e.__isScriptSetup&&Ht(e,t),Fk={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:o,appContext:l}=e;let c;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(ZS(r,t))return a[t]=1,r[t];if(i!==bt&&Ht(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&Ht(c,t))return a[t]=3,s[t];if(n!==bt&&Ht(n,t))return a[t]=4,n[t];Ok&&(a[t]=0)}}const u=bm[t];let f,h;if(u)return t==="$attrs"&&qr(e.attrs,"get",""),u(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(n!==bt&&Ht(n,t))return a[t]=4,n[t];if(h=l.config.globalProperties,Ht(h,t))return h[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return ZS(i,t)?(i[t]=n,!0):r!==bt&&Ht(r,t)?(r[t]=n,!0):Ht(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let o;return!!n[a]||e!==bt&&Ht(e,a)||ZS(t,a)||(o=s[0])&&Ht(o,a)||Ht(r,a)||Ht(bm,a)||Ht(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ht(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},vse=Tt({},Fk,{get(e,t){if(t!==Symbol.unscopables)return Fk.get(e,t,e)},has(e,t){return t[0]!=="_"&&!Lre(t)}});function yse(){return null}function _se(){return null}function bse(e){}function Ese(e){}function wse(){return null}function Sse(){}function Tse(e,t){return null}function Ase(){return yU().slots}function kse(){return yU().attrs}function yU(){const e=Ea();return e.setupContext||(e.setupContext=nz(e))}function o1(e){return Ve(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Cse(e,t){const n=o1(e);for(const r in t){if(r.startsWith("__skip"))continue;let i=n[r];i?Ve(i)||it(i)?i=n[r]={type:i,default:t[r]}:i.default=t[r]:i===null&&(i=n[r]={default:t[r]}),i&&t[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function Fse(e,t){return!e||!t?e||t:Ve(e)&&Ve(t)?e.concat(t):Tt({},o1(e),o1(t))}function Ose(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function Nse(e){const t=Ea();let n=e();return Mk(),$3(n)&&(n=n.catch(r=>{throw ph(t),r})),[n,()=>ph(t)]}let Ok=!0;function Dse(e){const t=e4(e),n=e.proxy,r=e.ctx;Ok=!1,t.beforeCreate&&eM(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:g,deactivated:m,beforeDestroy:x,beforeUnmount:y,destroyed:v,unmounted:_,render:b,renderTracked:w,renderTriggered:E,errorCaptured:T,serverPrefetch:S,expose:A,inheritAttrs:C,components:F,directives:N,filters:M}=t;if(c&&Rse(c,r,null),a)for(const I in a){const U=a[I];it(U)&&(r[I]=U.bind(n))}if(i){const I=i.call(n,n);Kt(I)&&(e.data=hs(I))}if(Ok=!0,s)for(const I in s){const U=s[I],Y=it(U)?U.bind(n,n):it(U.get)?U.get.bind(n,n):Or,X=!it(U)&&it(U.set)?U.set.bind(n):Or,de=au({get:Y,set:X});Object.defineProperty(r,I,{enumerable:!0,configurable:!0,get:()=>de.value,set:le=>de.value=le})}if(o)for(const I in o)_U(o[I],r,n,I);if(l){const I=it(l)?l.call(n):l;Reflect.ownKeys(I).forEach(U=>{EU(U,I[U])})}u&&eM(u,e,"c");function D(I,U){Ve(U)?U.forEach(Y=>I(Y.bind(n))):U&&I(U.bind(n))}if(D(Y3,f),D(fc,h),D(K3,d),D(oE,p),D(uU,g),D(fU,m),D(mU,T),D(gU,w),D(pU,E),D(lE,y),D(cE,_),D(dU,S),Ve(A))if(A.length){const I=e.exposed||(e.exposed={});A.forEach(U=>{Object.defineProperty(I,U,{get:()=>n[U],set:Y=>n[U]=Y})})}else e.exposed||(e.exposed={});b&&e.render===Or&&(e.render=b),C!=null&&(e.inheritAttrs=C),F&&(e.components=F),N&&(e.directives=N),S&&X3(e)}function Rse(e,t,n=Or){Ve(e)&&(e=Nk(e));for(const r in e){const i=e[r];let s;Kt(i)?"default"in i?s=Gf(i.from||r,i.default,!0):s=Gf(i.from||r):s=Gf(i),wn(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function eM(e,t,n){ha(Ve(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function _U(e,t,n,r){let i=r.includes(".")?zU(n,r):()=>n[r];if(lt(e)){const s=t[e];it(s)&&Fi(i,s)}else if(it(e))Fi(i,e.bind(n));else if(Kt(e))if(Ve(e))e.forEach(s=>_U(s,t,n,r));else{const s=it(e.handler)?e.handler.bind(n):t[e.handler];it(s)&&Fi(i,s,e)}}function e4(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(c=>$_(l,c,a,!0)),$_(l,t,a)),Kt(t)&&s.set(t,l),l}function $_(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&$_(e,s,n,!0),i&&i.forEach(a=>$_(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const o=Ise[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const Ise={data:tM,props:nM,emits:nM,methods:Wg,computed:Wg,beforeCreate:mi,created:mi,beforeMount:mi,mounted:mi,beforeUpdate:mi,updated:mi,beforeDestroy:mi,beforeUnmount:mi,destroyed:mi,unmounted:mi,activated:mi,deactivated:mi,errorCaptured:mi,serverPrefetch:mi,components:Wg,directives:Wg,watch:Mse,provide:tM,inject:$se};function tM(e,t){return t?e?function(){return Tt(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function $se(e,t){return Wg(Nk(e),Nk(t))}function Nk(e){if(Ve(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mi(e,t){return e?[...new Set([].concat(e,t))]:t}function Wg(e,t){return e?Tt(Object.create(null),e,t):t}function nM(e,t){return e?Ve(e)&&Ve(t)?[...new Set([...e,...t])]:Tt(Object.create(null),o1(e),o1(t??{})):t}function Mse(e,t){if(!e)return t;if(!t)return e;const n=Tt(Object.create(null),e);for(const r in t)n[r]=mi(e[r],t[r]);return n}function bU(){return{app:null,config:{isNativeTag:Hg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Lse=0;function Pse(e,t){return function(r,i=null){it(r)||(r=Tt({},r)),i!=null&&!Kt(i)&&(i=null);const s=bU(),a=new WeakSet,o=[];let l=!1;const c=s.app={_uid:Lse++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:sz,get config(){return s.config},set config(u){},use(u,...f){return a.has(u)||(u&&it(u.install)?(a.add(u),u.install(c,...f)):it(u)&&(a.add(u),u(c,...f))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,f){return f?(s.components[u]=f,c):s.components[u]},directive(u,f){return f?(s.directives[u]=f,c):s.directives[u]},mount(u,f,h){if(!l){const d=c._ceVNode||St(r,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),f&&t?t(d,u):e(d,u,h),l=!0,c._container=u,u.__vue_app__=c,ax(d.component)}},onUnmount(u){o.push(u)},unmount(){l&&(ha(o,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,f){return s.provides[u]=f,c},runWithContext(u){const f=jf;jf=c;try{return u()}finally{jf=f}}};return c}}let jf=null;function EU(e,t){if(Kn){let n=Kn.provides;const r=Kn.parent&&Kn.parent.provides;r===n&&(n=Kn.provides=Object.create(r)),n[e]=t}}function Gf(e,t,n=!1){const r=Kn||Zn;if(r||jf){const i=jf?jf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&it(t)?t.call(r&&r.proxy):t}}function wU(){return!!(Kn||Zn||jf)}const SU={},TU=()=>Object.create(SU),AU=e=>Object.getPrototypeOf(e)===SU;function Bse(e,t,n,r=!1){const i={},s=TU();e.propsDefaults=Object.create(null),kU(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:WB(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function Use(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,o=kt(i),[l]=e.propsOptions;let c=!1;if((r||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(uE(e.emitsOptions,h))continue;const d=t[h];if(l)if(Ht(s,h))d!==s[h]&&(s[h]=d,c=!0);else{const p=fn(h);i[p]=Dk(l,o,p,d,e,!1)}else d!==s[h]&&(s[h]=d,c=!0)}}}else{kU(e,t,i,s)&&(c=!0);let u;for(const f in o)(!t||!Ht(t,f)&&((u=Yi(f))===f||!Ht(t,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=Dk(l,o,f,void 0,e,!0)):delete i[f]);if(s!==o)for(const f in s)(!t||!Ht(t,f))&&(delete s[f],c=!0)}c&&kl(e.attrs,"set","")}function kU(e,t,n,r){const[i,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(ru(l))continue;const c=t[l];let u;i&&Ht(i,u=fn(l))?!s||!s.includes(u)?n[u]=c:(o||(o={}))[u]=c:uE(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,a=!0)}if(s){const l=kt(n),c=o||bt;for(let u=0;u<s.length;u++){const f=s[u];n[f]=Dk(i,l,f,c[f],e,!Ht(c,f))}}return a}function Dk(e,t,n,r,i,s){const a=e[n];if(a!=null){const o=Ht(a,"default");if(o&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&it(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=ph(i);r=c[n]=l.call(null,t),u()}}else r=l;i.ce&&i.ce._setProp(n,r)}a[0]&&(s&&!o?r=!1:a[1]&&(r===""||r===Yi(n))&&(r=!0))}return r}const zse=new WeakMap;function CU(e,t,n=!1){const r=n?zse:t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},o=[];let l=!1;if(!it(e)){const u=f=>{l=!0;const[h,d]=CU(f,t,!0);Tt(a,h),d&&o.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return Kt(e)&&r.set(e,l0),l0;if(Ve(s))for(let u=0;u<s.length;u++){const f=fn(s[u]);rM(f)&&(a[f]=bt)}else if(s)for(const u in s){const f=fn(u);if(rM(f)){const h=s[u],d=a[f]=Ve(h)||it(h)?{type:h}:Tt({},h),p=d.type;let g=!1,m=!0;if(Ve(p))for(let x=0;x<p.length;++x){const y=p[x],v=it(y)&&y.name;if(v==="Boolean"){g=!0;break}else v==="String"&&(m=!1)}else g=it(p)&&p.name==="Boolean";d[0]=g,d[1]=m,(g||Ht(d,"default"))&&o.push(f)}}const c=[a,o];return Kt(e)&&r.set(e,c),c}function rM(e){return e[0]!=="$"&&!ru(e)}const FU=e=>e[0]==="_"||e==="$stable",t4=e=>Ve(e)?e.map(qi):[qi(e)],Hse=(e,t,n)=>{if(t._n)return t;const r=iE((...i)=>t4(t(...i)),n);return r._c=!1,r},OU=(e,t,n)=>{const r=e._ctx;for(const i in e){if(FU(i))continue;const s=e[i];if(it(s))t[i]=Hse(i,s,r);else if(s!=null){const a=t4(s);t[i]=()=>a}}},NU=(e,t)=>{const n=t4(t);e.slots.default=()=>n},DU=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},Vse=(e,t,n)=>{const r=e.slots=TU();if(e.vnode.shapeFlag&32){const i=t._;i?(DU(r,t,n),n&&wB(r,"_",i,!0)):OU(t,r)}else t&&NU(e,t)},Wse=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=bt;if(r.shapeFlag&32){const o=t._;o?n&&o===1?s=!1:DU(i,t,n):(s=!t.$stable,OU(t,i)),a=t}else t&&(NU(e,t),a={default:1});if(s)for(const o in i)!FU(o)&&a[o]==null&&delete i[o]},Gn=jU;function RU(e){return $U(e)}function IU(e){return $U(e,Zie)}function $U(e,t){const n=Yb();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=Or,insertStaticContent:p}=e,g=(k,L,K,Z=null,ee=null,te=null,he=void 0,xe=null,_e=!!L.dynamicChildren)=>{if(k===L)return;k&&!Ma(k,L)&&(Z=Xe(k),le(k,ee,te,!0),k=null),L.patchFlag===-2&&(_e=!1,L.dynamicChildren=null);const{type:ge,ref:me,shapeFlag:be}=L;switch(ge){case su:m(k,L,K,Z);break;case Vn:x(k,L,K,Z);break;case qf:k==null&&y(L,K,Z,he);break;case mt:F(k,L,K,Z,ee,te,he,xe,_e);break;default:be&1?b(k,L,K,Z,ee,te,he,xe,_e):be&6?N(k,L,K,Z,ee,te,he,xe,_e):(be&64||be&128)&&ge.process(k,L,K,Z,ee,te,he,xe,_e,G)}me!=null&&ee&&a1(me,k&&k.ref,te,L||k,!L)},m=(k,L,K,Z)=>{if(k==null)r(L.el=o(L.children),K,Z);else{const ee=L.el=k.el;L.children!==k.children&&c(ee,L.children)}},x=(k,L,K,Z)=>{k==null?r(L.el=l(L.children||""),K,Z):L.el=k.el},y=(k,L,K,Z)=>{[k.el,k.anchor]=p(k.children,L,K,Z,k.el,k.anchor)},v=({el:k,anchor:L},K,Z)=>{let ee;for(;k&&k!==L;)ee=h(k),r(k,K,Z),k=ee;r(L,K,Z)},_=({el:k,anchor:L})=>{let K;for(;k&&k!==L;)K=h(k),i(k),k=K;i(L)},b=(k,L,K,Z,ee,te,he,xe,_e)=>{L.type==="svg"?he="svg":L.type==="math"&&(he="mathml"),k==null?w(L,K,Z,ee,te,he,xe,_e):S(k,L,ee,te,he,xe,_e)},w=(k,L,K,Z,ee,te,he,xe)=>{let _e,ge;const{props:me,shapeFlag:be,transition:ae,dirs:Ge}=k;if(_e=k.el=a(k.type,te,me&&me.is,me),be&8?u(_e,k.children):be&16&&T(k.children,_e,null,Z,ee,QS(k,te),he,xe),Ge&&wo(k,null,Z,"created"),E(_e,k,k.scopeId,he,Z),me){for(const Qe in me)Qe!=="value"&&!ru(Qe)&&s(_e,Qe,null,me[Qe],te,Z);"value"in me&&s(_e,"value",null,me.value,te),(ge=me.onVnodeBeforeMount)&&Wi(ge,Z,k)}Ge&&wo(k,null,Z,"beforeMount");const et=MU(ee,ae);et&&ae.beforeEnter(_e),r(_e,L,K),((ge=me&&me.onVnodeMounted)||et||Ge)&&Gn(()=>{ge&&Wi(ge,Z,k),et&&ae.enter(_e),Ge&&wo(k,null,Z,"mounted")},ee)},E=(k,L,K,Z,ee)=>{if(K&&d(k,K),Z)for(let te=0;te<Z.length;te++)d(k,Z[te]);if(ee){let te=ee.subTree;if(L===te||L_(te.type)&&(te.ssContent===L||te.ssFallback===L)){const he=ee.vnode;E(k,he,he.scopeId,he.slotScopeIds,ee.parent)}}},T=(k,L,K,Z,ee,te,he,xe,_e=0)=>{for(let ge=_e;ge<k.length;ge++){const me=k[ge]=xe?Lc(k[ge]):qi(k[ge]);g(null,me,L,K,Z,ee,te,he,xe)}},S=(k,L,K,Z,ee,te,he)=>{const xe=L.el=k.el;let{patchFlag:_e,dynamicChildren:ge,dirs:me}=L;_e|=k.patchFlag&16;const be=k.props||bt,ae=L.props||bt;let Ge;if(K&&uf(K,!1),(Ge=ae.onVnodeBeforeUpdate)&&Wi(Ge,K,L,k),me&&wo(L,k,K,"beforeUpdate"),K&&uf(K,!0),(be.innerHTML&&ae.innerHTML==null||be.textContent&&ae.textContent==null)&&u(xe,""),ge?A(k.dynamicChildren,ge,xe,K,Z,QS(L,ee),te):he||U(k,L,xe,null,K,Z,QS(L,ee),te,!1),_e>0){if(_e&16)C(xe,be,ae,K,ee);else if(_e&2&&be.class!==ae.class&&s(xe,"class",null,ae.class,ee),_e&4&&s(xe,"style",be.style,ae.style,ee),_e&8){const et=L.dynamicProps;for(let Qe=0;Qe<et.length;Qe++){const dt=et[Qe],Zt=be[dt],De=ae[dt];(De!==Zt||dt==="value")&&s(xe,dt,Zt,De,ee,K)}}_e&1&&k.children!==L.children&&u(xe,L.children)}else!he&&ge==null&&C(xe,be,ae,K,ee);((Ge=ae.onVnodeUpdated)||me)&&Gn(()=>{Ge&&Wi(Ge,K,L,k),me&&wo(L,k,K,"updated")},Z)},A=(k,L,K,Z,ee,te,he)=>{for(let xe=0;xe<L.length;xe++){const _e=k[xe],ge=L[xe],me=_e.el&&(_e.type===mt||!Ma(_e,ge)||_e.shapeFlag&70)?f(_e.el):K;g(_e,ge,me,null,Z,ee,te,he,!0)}},C=(k,L,K,Z,ee)=>{if(L!==K){if(L!==bt)for(const te in L)!ru(te)&&!(te in K)&&s(k,te,L[te],null,ee,Z);for(const te in K){if(ru(te))continue;const he=K[te],xe=L[te];he!==xe&&te!=="value"&&s(k,te,xe,he,ee,Z)}"value"in K&&s(k,"value",L.value,K.value,ee)}},F=(k,L,K,Z,ee,te,he,xe,_e)=>{const ge=L.el=k?k.el:o(""),me=L.anchor=k?k.anchor:o("");let{patchFlag:be,dynamicChildren:ae,slotScopeIds:Ge}=L;Ge&&(xe=xe?xe.concat(Ge):Ge),k==null?(r(ge,K,Z),r(me,K,Z),T(L.children||[],K,me,ee,te,he,xe,_e)):be>0&&be&64&&ae&&k.dynamicChildren?(A(k.dynamicChildren,ae,K,ee,te,he,xe),(L.key!=null||ee&&L===ee.subTree)&&n4(k,L,!0)):U(k,L,K,me,ee,te,he,xe,_e)},N=(k,L,K,Z,ee,te,he,xe,_e)=>{L.slotScopeIds=xe,k==null?L.shapeFlag&512?ee.ctx.activate(L,K,Z,he,_e):M(L,K,Z,ee,te,he,_e):O(k,L,_e)},M=(k,L,K,Z,ee,te,he)=>{const xe=k.component=JU(k,Z,ee);if(ix(k)&&(xe.ctx.renderer=G),QU(xe,!1,he),xe.asyncDep){if(ee&&ee.registerDep(xe,D,he),!k.el){const _e=xe.subTree=St(Vn);x(null,_e,L,K)}}else D(xe,k,L,K,ee,te,he)},O=(k,L,K)=>{const Z=L.component=k.component;if(eae(k,L,K))if(Z.asyncDep&&!Z.asyncResolved){I(Z,L,K);return}else Z.next=L,Z.update();else L.el=k.el,Z.vnode=L},D=(k,L,K,Z,ee,te,he)=>{const xe=()=>{if(k.isMounted){let{next:be,bu:ae,u:Ge,parent:et,vnode:Qe}=k;{const Dt=LU(k);if(Dt){be&&(be.el=Qe.el,I(k,be,he)),Dt.asyncDep.then(()=>{k.isUnmounted||xe()});return}}let dt=be,Zt;uf(k,!1),be?(be.el=Qe.el,I(k,be,he)):be=Qe,ae&&f0(ae),(Zt=be.props&&be.props.onVnodeBeforeUpdate)&&Wi(Zt,et,be,Qe),uf(k,!0);const De=Hy(k),ct=k.subTree;k.subTree=De,g(ct,De,f(ct.el),Xe(ct),k,ee,te),be.el=De.el,dt===null&&fE(k,De.el),Ge&&Gn(Ge,ee),(Zt=be.props&&be.props.onVnodeUpdated)&&Gn(()=>Wi(Zt,et,be,Qe),ee)}else{let be;const{el:ae,props:Ge}=L,{bm:et,m:Qe,parent:dt,root:Zt,type:De}=k,ct=iu(L);if(uf(k,!1),et&&f0(et),!ct&&(be=Ge&&Ge.onVnodeBeforeMount)&&Wi(be,dt,L),uf(k,!0),ae&&J){const Dt=()=>{k.subTree=Hy(k),J(ae,k.subTree,k,ee,null)};ct&&De.__asyncHydrate?De.__asyncHydrate(ae,k,Dt):Dt()}else{Zt.ce&&Zt.ce._injectChildStyle(De);const Dt=k.subTree=Hy(k);g(null,Dt,K,Z,k,ee,te),L.el=Dt.el}if(Qe&&Gn(Qe,ee),!ct&&(be=Ge&&Ge.onVnodeMounted)){const Dt=L;Gn(()=>Wi(be,dt,Dt),ee)}(L.shapeFlag&256||dt&&iu(dt.vnode)&&dt.vnode.shapeFlag&256)&&k.a&&Gn(k.a,ee),k.isMounted=!0,L=K=Z=null}};k.scope.on();const _e=k.effect=new e1(xe);k.scope.off();const ge=k.update=_e.run.bind(_e),me=k.job=_e.runIfDirty.bind(_e);me.i=k,me.id=k.uid,_e.scheduler=()=>j3(me),uf(k,!0),ge()},I=(k,L,K)=>{L.component=k;const Z=k.vnode.props;k.vnode=L,k.next=null,Use(k,L.props,Z,K),Wse(k,L.children,K),Uu(),G$(k),zu()},U=(k,L,K,Z,ee,te,he,xe,_e=!1)=>{const ge=k&&k.children,me=k?k.shapeFlag:0,be=L.children,{patchFlag:ae,shapeFlag:Ge}=L;if(ae>0){if(ae&128){X(ge,be,K,Z,ee,te,he,xe,_e);return}else if(ae&256){Y(ge,be,K,Z,ee,te,he,xe,_e);return}}Ge&8?(me&16&&Ne(ge,ee,te),be!==ge&&u(K,be)):me&16?Ge&16?X(ge,be,K,Z,ee,te,he,xe,_e):Ne(ge,ee,te,!0):(me&8&&u(K,""),Ge&16&&T(be,K,Z,ee,te,he,xe,_e))},Y=(k,L,K,Z,ee,te,he,xe,_e)=>{k=k||l0,L=L||l0;const ge=k.length,me=L.length,be=Math.min(ge,me);let ae;for(ae=0;ae<be;ae++){const Ge=L[ae]=_e?Lc(L[ae]):qi(L[ae]);g(k[ae],Ge,K,null,ee,te,he,xe,_e)}ge>me?Ne(k,ee,te,!0,!1,be):T(L,K,Z,ee,te,he,xe,_e,be)},X=(k,L,K,Z,ee,te,he,xe,_e)=>{let ge=0;const me=L.length;let be=k.length-1,ae=me-1;for(;ge<=be&&ge<=ae;){const Ge=k[ge],et=L[ge]=_e?Lc(L[ge]):qi(L[ge]);if(Ma(Ge,et))g(Ge,et,K,null,ee,te,he,xe,_e);else break;ge++}for(;ge<=be&&ge<=ae;){const Ge=k[be],et=L[ae]=_e?Lc(L[ae]):qi(L[ae]);if(Ma(Ge,et))g(Ge,et,K,null,ee,te,he,xe,_e);else break;be--,ae--}if(ge>be){if(ge<=ae){const Ge=ae+1,et=Ge<me?L[Ge].el:Z;for(;ge<=ae;)g(null,L[ge]=_e?Lc(L[ge]):qi(L[ge]),K,et,ee,te,he,xe,_e),ge++}}else if(ge>ae)for(;ge<=be;)le(k[ge],ee,te,!0),ge++;else{const Ge=ge,et=ge,Qe=new Map;for(ge=et;ge<=ae;ge++){const On=L[ge]=_e?Lc(L[ge]):qi(L[ge]);On.key!=null&&Qe.set(On.key,ge)}let dt,Zt=0;const De=ae-et+1;let ct=!1,Dt=0;const an=new Array(De);for(ge=0;ge<De;ge++)an[ge]=0;for(ge=Ge;ge<=be;ge++){const On=k[ge];if(Zt>=De){le(On,ee,te,!0);continue}let di;if(On.key!=null)di=Qe.get(On.key);else for(dt=et;dt<=ae;dt++)if(an[dt-et]===0&&Ma(On,L[dt])){di=dt;break}di===void 0?le(On,ee,te,!0):(an[di-et]=ge+1,di>=Dt?Dt=di:ct=!0,g(On,L[di],K,null,ee,te,he,xe,_e),Zt++)}const Vs=ct?jse(an):l0;for(dt=Vs.length-1,ge=De-1;ge>=0;ge--){const On=et+ge,di=L[On],og=On+1<me?L[On+1].el:Z;an[ge]===0?g(null,di,K,og,ee,te,he,xe,_e):ct&&(dt<0||ge!==Vs[dt]?de(di,K,og,2):dt--)}}},de=(k,L,K,Z,ee=null)=>{const{el:te,type:he,transition:xe,children:_e,shapeFlag:ge}=k;if(ge&6){de(k.component.subTree,L,K,Z);return}if(ge&128){k.suspense.move(L,K,Z);return}if(ge&64){he.move(k,L,K,G);return}if(he===mt){r(te,L,K);for(let be=0;be<_e.length;be++)de(_e[be],L,K,Z);r(k.anchor,L,K);return}if(he===qf){v(k,L,K);return}if(Z!==2&&ge&1&&xe)if(Z===0)xe.beforeEnter(te),r(te,L,K),Gn(()=>xe.enter(te),ee);else{const{leave:be,delayLeave:ae,afterLeave:Ge}=xe,et=()=>r(te,L,K),Qe=()=>{be(te,()=>{et(),Ge&&Ge()})};ae?ae(te,et,Qe):Qe()}else r(te,L,K)},le=(k,L,K,Z=!1,ee=!1)=>{const{type:te,props:he,ref:xe,children:_e,dynamicChildren:ge,shapeFlag:me,patchFlag:be,dirs:ae,cacheIndex:Ge}=k;if(be===-2&&(ee=!1),xe!=null&&a1(xe,null,K,k,!0),Ge!=null&&(L.renderCache[Ge]=void 0),me&256){L.ctx.deactivate(k);return}const et=me&1&&ae,Qe=!iu(k);let dt;if(Qe&&(dt=he&&he.onVnodeBeforeUnmount)&&Wi(dt,L,k),me&6)Ee(k.component,K,Z);else{if(me&128){k.suspense.unmount(K,Z);return}et&&wo(k,null,L,"beforeUnmount"),me&64?k.type.remove(k,L,K,G,Z):ge&&!ge.hasOnce&&(te!==mt||be>0&&be&64)?Ne(ge,L,K,!1,!0):(te===mt&&be&384||!ee&&me&16)&&Ne(_e,L,K),Z&&ye(k)}(Qe&&(dt=he&&he.onVnodeUnmounted)||et)&&Gn(()=>{dt&&Wi(dt,L,k),et&&wo(k,null,L,"unmounted")},K)},ye=k=>{const{type:L,el:K,anchor:Z,transition:ee}=k;if(L===mt){ve(K,Z);return}if(L===qf){_(k);return}const te=()=>{i(K),ee&&!ee.persisted&&ee.afterLeave&&ee.afterLeave()};if(k.shapeFlag&1&&ee&&!ee.persisted){const{leave:he,delayLeave:xe}=ee,_e=()=>he(K,te);xe?xe(k.el,te,_e):_e()}else te()},ve=(k,L)=>{let K;for(;k!==L;)K=h(k),i(k),k=K;i(L)},Ee=(k,L,K)=>{const{bum:Z,scope:ee,job:te,subTree:he,um:xe,m:_e,a:ge}=k;M_(_e),M_(ge),Z&&f0(Z),ee.stop(),te&&(te.flags|=8,le(he,k,L,K)),xe&&Gn(xe,L),Gn(()=>{k.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},Ne=(k,L,K,Z=!1,ee=!1,te=0)=>{for(let he=te;he<k.length;he++)le(k[he],L,K,Z,ee)},Xe=k=>{if(k.shapeFlag&6)return Xe(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const L=h(k.anchor||k.el),K=L&&L[nU];return K?h(K):L};let z=!1;const q=(k,L,K)=>{k==null?L._vnode&&le(L._vnode,null,null,!0):g(L._vnode||null,k,L,null,null,null,K),L._vnode=k,z||(z=!0,G$(),I_(),z=!1)},G={p:g,um:le,m:de,r:ye,mt:M,mc:T,pc:U,pbc:A,n:Xe,o:e};let H,J;return t&&([H,J]=t(G)),{render:q,hydrate:H,createApp:Pse(q,H)}}function QS({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function uf({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function MU(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function n4(e,t,n=!1){const r=e.children,i=t.children;if(Ve(r)&&Ve(i))for(let s=0;s<r.length;s++){const a=r[s];let o=i[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[s]=Lc(i[s]),o.el=a.el),!n&&o.patchFlag!==-2&&n4(a,o)),o.type===su&&(o.el=a.el)}}function jse(e){const t=e.slice(),n=[0];let r,i,s,a,o;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,e[n[o]]<c?s=o+1:a=o;c<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}function LU(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:LU(t)}function M_(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const PU=Symbol.for("v-scx"),BU=()=>Gf(PU);function Gse(e,t){return sx(e,null,t)}function qse(e,t){return sx(e,null,{flush:"post"})}function UU(e,t){return sx(e,null,{flush:"sync"})}function Fi(e,t,n){return sx(e,t,n)}function sx(e,t,n=bt){const{immediate:r,deep:i,flush:s,once:a}=n,o=Tt({},n),l=t&&r||!t&&s!=="post";let c;if(F0){if(s==="sync"){const d=BU();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=Or,d.resume=Or,d.pause=Or,d}}const u=Kn;o.call=(d,p,g)=>ha(d,u,p,g);let f=!1;s==="post"?o.scheduler=d=>{Gn(d,u&&u.suspense)}:s!=="sync"&&(f=!0,o.scheduler=(d,p)=>{p?d():j3(d)}),o.augmentJob=d=>{t&&(d.flags|=4),f&&(d.flags|=2,u&&(d.id=u.uid,d.i=u))};const h=Iie(e,t,o);return F0&&(c?c.push(h):l&&h()),h}function Xse(e,t,n){const r=this.proxy,i=lt(e)?e.includes(".")?zU(r,e):()=>r[e]:e.bind(r,r);let s;it(t)?s=t:(s=t.handler,n=t);const a=ph(this),o=sx(i,s.bind(r),n);return a(),o}function zU(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Yse(e,t,n=bt){const r=Ea(),i=fn(t),s=Yi(t),a=HU(e,i),o=qB((l,c)=>{let u,f=bt,h;return UU(()=>{const d=e[i];bi(u,d)&&(u=d,c())}),{get(){return l(),n.get?n.get(u):u},set(d){const p=n.set?n.set(d):d;if(!bi(p,u)&&!(f!==bt&&bi(d,f)))return;const g=r.vnode.props;g&&(t in g||i in g||s in g)&&(`onUpdate:${t}`in g||`onUpdate:${i}`in g||`onUpdate:${s}`in g)||(u=d,c()),r.emit(`update:${t}`,p),bi(d,p)&&bi(d,f)&&!bi(p,h)&&c(),f=d,h=p}}});return o[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?a||bt:o,done:!1}:{done:!0}}}},o}const HU=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${fn(t)}Modifiers`]||e[`${Yi(t)}Modifiers`];function Kse(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||bt;let i=n;const s=t.startsWith("update:"),a=s&&HU(r,t.slice(7));a&&(a.trim&&(i=n.map(u=>lt(u)?u.trim():u)),a.number&&(i=n.map(F_)));let o,l=r[o=u0(t)]||r[o=u0(fn(t))];!l&&s&&(l=r[o=u0(Yi(t))]),l&&ha(l,e,6,i);const c=r[o+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,ha(c,e,6,i)}}function VU(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let a={},o=!1;if(!it(e)){const l=c=>{const u=VU(c,t,!0);u&&(o=!0,Tt(a,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(Kt(e)&&r.set(e,null),null):(Ve(s)?s.forEach(l=>a[l]=null):Tt(a,s),Kt(e)&&r.set(e,a),a)}function uE(e,t){return!e||!qh(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ht(e,t[0].toLowerCase()+t.slice(1))||Ht(e,Yi(t))||Ht(e,t))}function Hy(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:f,data:h,setupState:d,ctx:p,inheritAttrs:g}=e,m=s1(e);let x,y;try{if(n.shapeFlag&4){const _=i||r,b=_;x=qi(c.call(b,_,u,f,d,h,p)),y=o}else{const _=t;x=qi(_.length>1?_(f,{attrs:o,slots:a,emit:l}):_(f,null)),y=t.props?o:Zse(o)}}catch(_){Em.length=0,Kh(_,e,1),x=St(Vn)}let v=x;if(y&&g!==!1){const _=Object.keys(y),{shapeFlag:b}=v;_.length&&b&7&&(s&&_.some(R3)&&(y=Qse(y,s)),v=Ho(v,y,!1,!0))}return n.dirs&&(v=Ho(v,null,!1,!0),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&Ql(v,n.transition),x=v,s1(m),x}function Jse(e,t=!0){let n;for(let r=0;r<e.length;r++){const i=e[r];if(ec(i)){if(i.type!==Vn||i.children==="v-if"){if(n)return;n=i}}else return}return n}const Zse=e=>{let t;for(const n in e)(n==="class"||n==="style"||qh(n))&&((t||(t={}))[n]=e[n]);return t},Qse=(e,t)=>{const n={};for(const r in e)(!R3(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function eae(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:o,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?iM(r,a,c):!!a;if(l&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==r[h]&&!uE(c,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===a?!1:r?a?iM(r,a,c):!0:!!a;return!1}function iM(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!uE(n,s))return!0}return!1}function fE({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const L_=e=>e.__isSuspense;let Rk=0;const tae={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,s,a,o,l,c){if(e==null)rae(t,n,r,i,s,a,o,l,c);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}iae(e,t,n,r,i,a,o,l,c)}},hydrate:sae,normalize:aae},nae=tae;function l1(e,t){const n=e.props&&e.props[t];it(n)&&n()}function rae(e,t,n,r,i,s,a,o,l){const{p:c,o:{createElement:u}}=l,f=u("div"),h=e.suspense=WU(e,i,r,t,f,n,s,a,o,l);c(null,h.pendingBranch=e.ssContent,f,null,r,h,s,a),h.deps>0?(l1(e,"onPending"),l1(e,"onFallback"),c(null,e.ssFallback,t,n,r,null,s,a),d0(h,e.ssFallback)):h.resolve(!1,!0)}function iae(e,t,n,r,i,s,a,o,{p:l,um:c,o:{createElement:u}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const h=t.ssContent,d=t.ssFallback,{activeBranch:p,pendingBranch:g,isInFallback:m,isHydrating:x}=f;if(g)f.pendingBranch=h,Ma(h,g)?(l(g,h,f.hiddenContainer,null,i,f,s,a,o),f.deps<=0?f.resolve():m&&(x||(l(p,d,n,r,i,null,s,a,o),d0(f,d)))):(f.pendingId=Rk++,x?(f.isHydrating=!1,f.activeBranch=g):c(g,i,f),f.deps=0,f.effects.length=0,f.hiddenContainer=u("div"),m?(l(null,h,f.hiddenContainer,null,i,f,s,a,o),f.deps<=0?f.resolve():(l(p,d,n,r,i,null,s,a,o),d0(f,d))):p&&Ma(h,p)?(l(p,h,n,r,i,f,s,a,o),f.resolve(!0)):(l(null,h,f.hiddenContainer,null,i,f,s,a,o),f.deps<=0&&f.resolve()));else if(p&&Ma(h,p))l(p,h,n,r,i,f,s,a,o),d0(f,h);else if(l1(t,"onPending"),f.pendingBranch=h,h.shapeFlag&512?f.pendingId=h.component.suspenseId:f.pendingId=Rk++,l(null,h,f.hiddenContainer,null,i,f,s,a,o),f.deps<=0)f.resolve();else{const{timeout:y,pendingId:v}=f;y>0?setTimeout(()=>{f.pendingId===v&&f.fallback(d)},y):y===0&&f.fallback(d)}}function WU(e,t,n,r,i,s,a,o,l,c,u=!1){const{p:f,m:h,um:d,n:p,o:{parentNode:g,remove:m}}=c;let x;const y=oae(e);y&&t&&t.pendingBranch&&(x=t.pendingId,t.deps++);const v=e.props?O_(e.props.timeout):void 0,_=s,b={vnode:e,parent:t,parentComponent:n,namespace:a,container:r,hiddenContainer:i,deps:0,pendingId:Rk++,timeout:typeof v=="number"?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(w=!1,E=!1){const{vnode:T,activeBranch:S,pendingBranch:A,pendingId:C,effects:F,parentComponent:N,container:M}=b;let O=!1;b.isHydrating?b.isHydrating=!1:w||(O=S&&A.transition&&A.transition.mode==="out-in",O&&(S.transition.afterLeave=()=>{C===b.pendingId&&(h(A,M,s===_?p(S):s,0),r1(F))}),S&&(g(S.el)===M&&(s=p(S)),d(S,N,b,!0)),O||h(A,M,s,0)),d0(b,A),b.pendingBranch=null,b.isInFallback=!1;let D=b.parent,I=!1;for(;D;){if(D.pendingBranch){D.effects.push(...F),I=!0;break}D=D.parent}!I&&!O&&r1(F),b.effects=[],y&&t&&t.pendingBranch&&x===t.pendingId&&(t.deps--,t.deps===0&&!E&&t.resolve()),l1(T,"onResolve")},fallback(w){if(!b.pendingBranch)return;const{vnode:E,activeBranch:T,parentComponent:S,container:A,namespace:C}=b;l1(E,"onFallback");const F=p(T),N=()=>{b.isInFallback&&(f(null,w,A,F,S,null,C,o,l),d0(b,w))},M=w.transition&&w.transition.mode==="out-in";M&&(T.transition.afterLeave=N),b.isInFallback=!0,d(T,S,null,!0),M||N()},move(w,E,T){b.activeBranch&&h(b.activeBranch,w,E,T),b.container=w},next(){return b.activeBranch&&p(b.activeBranch)},registerDep(w,E,T){const S=!!b.pendingBranch;S&&b.deps++;const A=w.vnode.el;w.asyncDep.catch(C=>{Kh(C,w,0)}).then(C=>{if(w.isUnmounted||b.isUnmounted||b.pendingId!==w.suspenseId)return;w.asyncResolved=!0;const{vnode:F}=w;Lk(w,C,!1),A&&(F.el=A);const N=!A&&w.subTree.el;E(w,F,g(A||w.subTree.el),A?null:p(w.subTree),b,a,T),N&&m(N),fE(w,F.el),S&&--b.deps===0&&b.resolve()})},unmount(w,E){b.isUnmounted=!0,b.activeBranch&&d(b.activeBranch,n,w,E),b.pendingBranch&&d(b.pendingBranch,n,w,E)}};return b}function sae(e,t,n,r,i,s,a,o,l){const c=t.suspense=WU(t,r,n,e.parentNode,document.createElement("div"),null,i,s,a,o,!0),u=l(e,c.pendingBranch=t.ssContent,n,c,s,a);return c.deps===0&&c.resolve(!1,!0),u}function aae(e){const{shapeFlag:t,children:n}=e,r=t&32;e.ssContent=sM(r?n.default:n),e.ssFallback=r?sM(n.fallback):St(Vn)}function sM(e){let t;if(it(e)){const n=hh&&e._c;n&&(e._d=!1,Le()),e=e(),n&&(e._d=!0,t=Qr,GU())}return Ve(e)&&(e=Jse(e)),e=qi(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function jU(e,t){t&&t.pendingBranch?Ve(e)?t.effects.push(...e):t.effects.push(e):r1(e)}function d0(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e;let i=t.el;for(;!i&&t.component;)t=t.component.subTree,i=t.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,fE(r,i))}function oae(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const mt=Symbol.for("v-fgt"),su=Symbol.for("v-txt"),Vn=Symbol.for("v-cmt"),qf=Symbol.for("v-stc"),Em=[];let Qr=null;function Le(e=!1){Em.push(Qr=e?null:[])}function GU(){Em.pop(),Qr=Em[Em.length-1]||null}let hh=1;function Ik(e,t=!1){hh+=e,e<0&&Qr&&t&&(Qr.hasOnce=!0)}function qU(e){return e.dynamicChildren=hh>0?Qr||l0:null,GU(),hh>0&&Qr&&Qr.push(e),e}function He(e,t,n,r,i,s){return qU(Q(e,t,n,r,i,s,!0))}function dh(e,t,n,r,i){return qU(St(e,t,n,r,i,!0))}function ec(e){return e?e.__v_isVNode===!0:!1}function Ma(e,t){return e.type===t.type&&e.key===t.key}function lae(e){}const XU=({key:e})=>e??null,Vy=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?lt(e)||wn(e)||it(e)?{i:Zn,r:e,k:t,f:!!n}:e:null);function Q(e,t=null,n=null,r=0,i=null,s=e===mt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&XU(t),ref:t&&Vy(t),scopeId:rE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Zn};return o?(r4(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=lt(n)?8:16),hh>0&&!a&&Qr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Qr.push(l),l}const St=cae;function cae(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===xU)&&(e=Vn),ec(e)){const o=Ho(e,t,!0);return n&&r4(o,n),hh>0&&!s&&Qr&&(o.shapeFlag&6?Qr[Qr.indexOf(e)]=o:Qr.push(o)),o.patchFlag=-2,o}if(mae(e)&&(e=e.__vccOpts),t){t=YU(t);let{class:o,style:l}=t;o&&!lt(o)&&(t.class=Do(o)),Kt(l)&&(tE(l)&&!Ve(l)&&(l=Tt({},l)),t.style=Bu(l))}const a=lt(e)?1:L_(e)?128:rU(e)?64:Kt(e)?4:it(e)?2:0;return Q(e,t,n,r,i,a,s,!0)}function YU(e){return e?tE(e)||AU(e)?Tt({},e):e:null}function Ho(e,t,n=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:o,transition:l}=e,c=t?KU(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&XU(c),ref:t&&t.ref?n&&s?Ve(s)?s.concat(Vy(t)):[s,Vy(t)]:Vy(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==mt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ho(e.ssContent),ssFallback:e.ssFallback&&Ho(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Ql(u,l.clone(u)),u}function Qn(e=" ",t=0){return St(su,null,e,t)}function uae(e,t){const n=St(qf,null,e);return n.staticCount=t,n}function ei(e="",t=!1){return t?(Le(),dh(Vn,null,e)):St(Vn,null,e)}function qi(e){return e==null||typeof e=="boolean"?St(Vn):Ve(e)?St(mt,null,e.slice()):ec(e)?Lc(e):St(su,null,String(e))}function Lc(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ho(e)}function r4(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ve(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),r4(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!AU(t)?t._ctx=Zn:i===3&&Zn&&(Zn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:Zn},n=32):(t=String(t),r&64?(n=16,t=[Qn(t)]):n=8);e.children=t,e.shapeFlag|=n}function KU(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Do([t.class,r.class]));else if(i==="style")t.style=Bu([t.style,r.style]);else if(qh(i)){const s=t[i],a=r[i];a&&s!==a&&!(Ve(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=r[i])}return t}function Wi(e,t,n,r=null){ha(e,t,7,[n,r])}const fae=bU();let hae=0;function JU(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||fae,s={uid:hae++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new L3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:CU(r,i),emitsOptions:VU(r,i),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:r.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Kse.bind(null,s),e.ce&&e.ce(s),s}let Kn=null;const Ea=()=>Kn||Zn;let P_,$k;{const e=Yb(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};P_=t("__VUE_INSTANCE_SETTERS__",n=>Kn=n),$k=t("__VUE_SSR_SETTERS__",n=>F0=n)}const ph=e=>{const t=Kn;return P_(e),e.scope.on(),()=>{e.scope.off(),P_(t)}},Mk=()=>{Kn&&Kn.scope.off(),P_(null)};function ZU(e){return e.vnode.shapeFlag&4}let F0=!1;function QU(e,t=!1,n=!1){t&&$k(t);const{props:r,children:i}=e.vnode,s=ZU(e);Bse(e,r,s,t),Vse(e,i,n);const a=s?dae(e,t):void 0;return t&&$k(!1),a}function dae(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Fk);const{setup:r}=n;if(r){Uu();const i=e.setupContext=r.length>1?nz(e):null,s=ph(e),a=Cp(r,e,0,[e.props,i]),o=$3(a);if(zu(),s(),(o||e.sp)&&!iu(e)&&X3(e),o){if(a.then(Mk,Mk),t)return a.then(l=>{Lk(e,l,t)}).catch(l=>{Kh(l,e,0)});e.asyncDep=a}else Lk(e,a,t)}else tz(e,t)}function Lk(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Kt(t)&&(e.setupState=W3(t)),tz(e,n)}let B_,Pk;function ez(e){B_=e,Pk=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,vse))}}const pae=()=>!B_;function tz(e,t,n){const r=e.type;if(!e.render){if(!t&&B_&&!r.render){const i=r.template||e4(e).template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=r,c=Tt(Tt({isCustomElement:s,delimiters:o},a),l);r.render=B_(i,c)}}e.render=r.render||Or,Pk&&Pk(e)}{const i=ph(e);Uu();try{Dse(e)}finally{zu(),i()}}}const gae={get(e,t){return qr(e,"get",""),e[t]}};function nz(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,gae),slots:e.slots,emit:e.emit,expose:t}}function ax(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(W3(nE(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in bm)return bm[n](e)},has(t,n){return n in t||n in bm}})):e.proxy}function Bk(e,t=!0){return it(e)?e.displayName||e.name:e.name||t&&e.__name}function mae(e){return it(e)&&"__vccOpts"in e}const au=(e,t)=>Oie(e,t,F0);function rz(e,t,n){const r=arguments.length;return r===2?Kt(t)&&!Ve(t)?ec(t)?St(e,null,[t]):St(e,t):St(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ec(n)&&(n=[n]),St(e,t,n))}function xae(){}function vae(e,t,n,r){const i=n[r];if(i&&iz(i,e))return i;const s=t();return s.memo=e.slice(),s.cacheIndex=r,n[r]=s}function iz(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(bi(n[r],t[r]))return!1;return hh>0&&Qr&&Qr.push(e),!0}const sz="3.5.13",yae=Or,_ae=Bie,bae=Hd,Eae=tU,wae={createComponentInstance:JU,setupComponent:QU,renderComponentRoot:Hy,setCurrentRenderingInstance:s1,isVNode:ec,normalizeVNode:qi,getComponentPublicInstance:ax,ensureValidVNode:Q3,pushWarningContext:$ie,popWarningContext:Mie},Sae=wae,Tae=null,Aae=null,kae=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Uk;const aM=typeof window<"u"&&window.trustedTypes;if(aM)try{Uk=aM.createPolicy("vue",{createHTML:e=>e})}catch{}const az=Uk?e=>Uk.createHTML(e):e=>e,Cae="http://www.w3.org/2000/svg",Fae="http://www.w3.org/1998/Math/MathML",El=typeof document<"u"?document:null,oM=El&&El.createElement("template"),Oae={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?El.createElementNS(Cae,e):t==="mathml"?El.createElementNS(Fae,e):n?El.createElement(e,{is:n}):El.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>El.createTextNode(e),createComment:e=>El.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>El.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{oM.innerHTML=az(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const o=oM.content;if(r==="svg"||r==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},wc="transition",hg="animation",O0=Symbol("_vtc"),oz={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lz=Tt({},q3,oz),Nae=e=>(e.displayName="Transition",e.props=lz,e),Dae=Nae((e,{slots:t})=>rz(lU,cz(e),t)),ff=(e,t=[])=>{Ve(e)?e.forEach(n=>n(...t)):e&&e(...t)},lM=e=>e?Ve(e)?e.some(t=>t.length>1):e.length>1:!1;function cz(e){const t={};for(const F in e)F in oz||(t[F]=e[F]);if(e.css===!1)return t;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=e,p=Rae(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:x,onEnter:y,onEnterCancelled:v,onLeave:_,onLeaveCancelled:b,onBeforeAppear:w=x,onAppear:E=y,onAppearCancelled:T=v}=t,S=(F,N,M,O)=>{F._enterCancelled=O,Fc(F,N?u:o),Fc(F,N?c:a),M&&M()},A=(F,N)=>{F._isLeaving=!1,Fc(F,f),Fc(F,d),Fc(F,h),N&&N()},C=F=>(N,M)=>{const O=F?E:y,D=()=>S(N,F,M);ff(O,[N,D]),cM(()=>{Fc(N,F?l:s),vo(N,F?u:o),lM(O)||uM(N,r,g,D)})};return Tt(t,{onBeforeEnter(F){ff(x,[F]),vo(F,s),vo(F,a)},onBeforeAppear(F){ff(w,[F]),vo(F,l),vo(F,c)},onEnter:C(!1),onAppear:C(!0),onLeave(F,N){F._isLeaving=!0;const M=()=>A(F,N);vo(F,f),F._enterCancelled?(vo(F,h),zk()):(zk(),vo(F,h)),cM(()=>{F._isLeaving&&(Fc(F,f),vo(F,d),lM(_)||uM(F,r,m,M))}),ff(_,[F,M])},onEnterCancelled(F){S(F,!1,void 0,!0),ff(v,[F])},onAppearCancelled(F){S(F,!0,void 0,!0),ff(T,[F])},onLeaveCancelled(F){A(F),ff(b,[F])}})}function Rae(e){if(e==null)return null;if(Kt(e))return[eT(e.enter),eT(e.leave)];{const t=eT(e);return[t,t]}}function eT(e){return O_(e)}function vo(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[O0]||(e[O0]=new Set)).add(t)}function Fc(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[O0];n&&(n.delete(t),n.size||(e[O0]=void 0))}function cM(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Iae=0;function uM(e,t,n,r){const i=e._endId=++Iae,s=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=uz(e,t);if(!a)return r();const c=a+"end";let u=0;const f=()=>{e.removeEventListener(c,h),s()},h=d=>{d.target===e&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},o+1),e.addEventListener(c,h)}function uz(e,t){const n=window.getComputedStyle(e),r=p=>(n[p]||"").split(", "),i=r(`${wc}Delay`),s=r(`${wc}Duration`),a=fM(i,s),o=r(`${hg}Delay`),l=r(`${hg}Duration`),c=fM(o,l);let u=null,f=0,h=0;t===wc?a>0&&(u=wc,f=a,h=s.length):t===hg?c>0&&(u=hg,f=c,h=l.length):(f=Math.max(a,c),u=f>0?a>c?wc:hg:null,h=u?u===wc?s.length:l.length:0);const d=u===wc&&/\b(transform|all)(,|$)/.test(r(`${wc}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:d}}function fM(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>hM(n)+hM(e[r])))}function hM(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function zk(){return document.body.offsetHeight}function $ae(e,t,n){const r=e[O0];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const U_=Symbol("_vod"),fz=Symbol("_vsh"),z_={beforeMount(e,{value:t},{transition:n}){e[U_]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):dg(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),dg(e,!0),r.enter(e)):r.leave(e,()=>{dg(e,!1)}):dg(e,t))},beforeUnmount(e,{value:t}){dg(e,t)}};function dg(e,t){e.style.display=t?e[U_]:"none",e[fz]=!t}function Mae(){z_.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const hz=Symbol("");function Lae(e){const t=Ea();if(!t)return;const n=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>H_(s,i))},r=()=>{const i=e(t.proxy);t.ce?H_(t.ce,i):Hk(t.subTree,i),n(i)};K3(()=>{r1(r)}),fc(()=>{Fi(r,Or,{flush:"post"});const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),cE(()=>i.disconnect())})}function Hk(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Hk(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)H_(e.el,t);else if(e.type===mt)e.children.forEach(n=>Hk(n,t));else if(e.type===qf){let{el:n,anchor:r}=e;for(;n&&(H_(n,t),n!==r);)n=n.nextSibling}}function H_(e,t){if(e.nodeType===1){const n=e.style;let r="";for(const i in t)n.setProperty(`--${i}`,t[i]),r+=`--${i}: ${t[i]};`;n[hz]=r}}const Pae=/(^|;)\s*display\s*:/;function Bae(e,t,n){const r=e.style,i=lt(n);let s=!1;if(n&&!i){if(t)if(lt(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&Wy(r,o,"")}else for(const a in t)n[a]==null&&Wy(r,a,"");for(const a in n)a==="display"&&(s=!0),Wy(r,a,n[a])}else if(i){if(t!==n){const a=r[hz];a&&(n+=";"+a),r.cssText=n,s=Pae.test(n)}}else t&&e.removeAttribute("style");U_ in e&&(e[U_]=s?r.display:"",e[fz]&&(r.display="none"))}const dM=/\s*!important$/;function Wy(e,t,n){if(Ve(n))n.forEach(r=>Wy(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Uae(e,t);dM.test(n)?e.setProperty(Yi(r),n.replace(dM,""),"important"):e[r]=n}}const pM=["Webkit","Moz","ms"],tT={};function Uae(e,t){const n=tT[t];if(n)return n;let r=fn(t);if(r!=="filter"&&r in e)return tT[t]=r;r=Yh(r);for(let i=0;i<pM.length;i++){const s=pM[i]+r;if(s in e)return tT[t]=s}return t}const gM="http://www.w3.org/1999/xlink";function mM(e,t,n,r,i,s=Jre(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(gM,t.slice(6,t.length)):e.setAttributeNS(gM,t,n):n==null||s&&!TB(n)?e.removeAttribute(t):e.setAttribute(t,s?"":is(n)?String(n):n)}function xM(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?az(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(o!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const o=typeof e[t];o==="boolean"?n=TB(n):n==null&&o==="string"?(n="",a=!0):o==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(i||t)}function Fl(e,t,n,r){e.addEventListener(t,n,r)}function zae(e,t,n,r){e.removeEventListener(t,n,r)}const vM=Symbol("_vei");function Hae(e,t,n,r,i=null){const s=e[vM]||(e[vM]={}),a=s[t];if(r&&a)a.value=r;else{const[o,l]=Vae(t);if(r){const c=s[t]=Gae(r,i);Fl(e,o,c,l)}else a&&(zae(e,o,a,l),s[t]=void 0)}}const yM=/(?:Once|Passive|Capture)$/;function Vae(e){let t;if(yM.test(e)){t={};let r;for(;r=e.match(yM);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Yi(e.slice(2)),t]}let nT=0;const Wae=Promise.resolve(),jae=()=>nT||(Wae.then(()=>nT=0),nT=Date.now());function Gae(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ha(qae(r,n.value),t,5,[r])};return n.value=e,n.attached=jae(),n}function qae(e,t){if(Ve(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const _M=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Xae=(e,t,n,r,i,s)=>{const a=i==="svg";t==="class"?$ae(e,r,a):t==="style"?Bae(e,n,r):qh(t)?R3(t)||Hae(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Yae(e,t,r,a))?(xM(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&mM(e,t,r,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!lt(r))?xM(e,fn(t),r,s,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),mM(e,t,r,a))};function Yae(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&_M(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return _M(t)&&lt(n)?!1:t in e}const bM={};/*! #__NO_SIDE_EFFECTS__ */function dz(e,t,n){const r=vr(e,t);qb(r)&&Tt(r,t);class i extends hE{constructor(a){super(r,a,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const Kae=(e,t)=>dz(e,t,wz),Jae=typeof HTMLElement<"u"?HTMLElement:class{};class hE extends Jae{constructor(t,n={},r=u1){super(),this._def=t,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==u1?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof hE){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,fh(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:a}=r;let o;if(s&&!Ve(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=O_(this._props[l])),(o||(o=Object.create(null)))[fn(l)]=!0)}this._numberProps=o,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(a),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>t(this._def=r,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Ht(this,r)||Object.defineProperty(this,r,{get:()=>gn(n[r])})}_resolveProps(t){const{props:n}=t,r=Ve(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(fn))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const n=this.hasAttribute(t);let r=n?this.getAttribute(t):bM;const i=fn(t);n&&this._numberProps&&this._numberProps[i]&&(r=O_(r)),this._setProp(i,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,i=!1){if(n!==this._props[t]&&(n===bM?delete this._props[t]:(this._props[t]=n,t==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Yi(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Yi(t),n+""):n||this.removeAttribute(Yi(t)),s&&s.observe(this,{attributes:!0})}}_update(){Ez(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const n=St(this._def,Tt(t,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,a)=>{this.dispatchEvent(new CustomEvent(s,qb(a[0])?Tt({detail:a},a[0]):{detail:a}))};r.emit=(s,...a)=>{i(s,a),Yi(s)!==s&&i(Yi(s),a)},this._setParent()}),n}_applyStyles(t,n){if(!t)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=t.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=t[i],this.shadowRoot.prepend(s)}}_parseSlots(){const t=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const i=t[r],s=i.getAttribute("name")||"default",a=this._slots[s],o=i.parentNode;if(a)for(const l of a){if(n&&l.nodeType===1){const c=n+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let f;for(;f=u.nextNode();)f.setAttribute(c,"")}o.insertBefore(l,i)}else for(;i.firstChild;)o.insertBefore(i.firstChild,i);o.removeChild(i)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function pz(e){const t=Ea(),n=t&&t.ce;return n||null}function Zae(){const e=pz();return e&&e.shadowRoot}function Qae(e="$style"){{const t=Ea();if(!t)return bt;const n=t.type.__cssModules;if(!n)return bt;const r=n[e];return r||bt}}const gz=new WeakMap,mz=new WeakMap,V_=Symbol("_moveCb"),EM=Symbol("_enterCb"),eoe=e=>(delete e.props.mode,e),toe=eoe({name:"TransitionGroup",props:Tt({},lz,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Ea(),r=G3();let i,s;return oE(()=>{if(!i.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!aoe(i[0].el,n.vnode.el,a))return;i.forEach(roe),i.forEach(ioe);const o=i.filter(soe);zk(),o.forEach(l=>{const c=l.el,u=c.style;vo(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[V_]=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",f),c[V_]=null,Fc(c,a))};c.addEventListener("transitionend",f)})}),()=>{const a=kt(e),o=cz(a);let l=a.tag||mt;if(i=[],s)for(let c=0;c<s.length;c++){const u=s[c];u.el&&u.el instanceof Element&&(i.push(u),Ql(u,C0(u,o,r,n)),gz.set(u,u.el.getBoundingClientRect()))}s=t.default?sE(t.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Ql(u,C0(u,o,r,n))}return St(l,null,s)}}}),noe=toe;function roe(e){const t=e.el;t[V_]&&t[V_](),t[EM]&&t[EM]()}function ioe(e){mz.set(e,e.el.getBoundingClientRect())}function soe(e){const t=gz.get(e),n=mz.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function aoe(e,t,n){const r=e.cloneNode(),i=e[O0];i&&i.forEach(o=>{o.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(r);const{hasTransform:a}=uz(r);return s.removeChild(r),a}const xu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ve(t)?n=>f0(t,n):t};function ooe(e){e.target.composing=!0}function wM(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const la=Symbol("_assign"),c1={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[la]=xu(i);const s=r||i.props&&i.props.type==="number";Fl(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),s&&(o=F_(o)),e[la](o)}),n&&Fl(e,"change",()=>{e.value=e.value.trim()}),t||(Fl(e,"compositionstart",ooe),Fl(e,"compositionend",wM),Fl(e,"change",wM))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},a){if(e[la]=xu(a),e.composing)return;const o=(s||e.type==="number")&&!/^0\d/.test(e.value)?F_(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===l)||(e.value=l))}},N0={deep:!0,created(e,t,n){e[la]=xu(n),Fl(e,"change",()=>{const r=e._modelValue,i=D0(e),s=e.checked,a=e[la];if(Ve(r)){const o=Kb(r,i),l=o!==-1;if(s&&!l)a(r.concat(i));else if(!s&&l){const c=[...r];c.splice(o,1),a(c)}}else if(Xh(r)){const o=new Set(r);s?o.add(i):o.delete(i),a(o)}else a(xz(e,s))})},mounted:SM,beforeUpdate(e,t,n){e[la]=xu(n),SM(e,t,n)}};function SM(e,{value:t,oldValue:n},r){e._modelValue=t;let i;if(Ve(t))i=Kb(t,r.props.value)>-1;else if(Xh(t))i=t.has(r.props.value);else{if(t===n)return;i=gu(t,xz(e,!0))}e.checked!==i&&(e.checked=i)}const i4={created(e,{value:t},n){e.checked=gu(t,n.props.value),e[la]=xu(n),Fl(e,"change",()=>{e[la](D0(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[la]=xu(r),t!==n&&(e.checked=gu(t,r.props.value))}},gh={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=Xh(t);Fl(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?F_(D0(a)):D0(a));e[la](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,fh(()=>{e._assigning=!1})}),e[la]=xu(r)},mounted(e,{value:t}){TM(e,t)},beforeUpdate(e,t,n){e[la]=xu(n)},updated(e,{value:t}){e._assigning||TM(e,t)}};function TM(e,t){const n=e.multiple,r=Ve(t);if(!(n&&!r&&!Xh(t))){for(let i=0,s=e.options.length;i<s;i++){const a=e.options[i],o=D0(a);if(n)if(r){const l=typeof o;l==="string"||l==="number"?a.selected=t.some(c=>String(c)===String(o)):a.selected=Kb(t,o)>-1}else a.selected=t.has(o);else if(gu(D0(a),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function D0(e){return"_value"in e?e._value:e.value}function xz(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const W_={created(e,t,n){Cv(e,t,n,null,"created")},mounted(e,t,n){Cv(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Cv(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Cv(e,t,n,r,"updated")}};function vz(e,t){switch(e){case"SELECT":return gh;case"TEXTAREA":return c1;default:switch(t){case"checkbox":return N0;case"radio":return i4;default:return c1}}}function Cv(e,t,n,r,i){const a=vz(e.tagName,n.props&&n.props.type)[i];a&&a(e,t,n,r)}function loe(){c1.getSSRProps=({value:e})=>({value:e}),i4.getSSRProps=({value:e},t)=>{if(t.props&&gu(t.props.value,e))return{checked:!0}},N0.getSSRProps=({value:e},t)=>{if(Ve(e)){if(t.props&&Kb(e,t.props.value)>-1)return{checked:!0}}else if(Xh(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},W_.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=vz(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const coe=["ctrl","shift","alt","meta"],uoe={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>coe.some(n=>e[`${n}Key`]&&!t.includes(n))},Gc=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...s)=>{for(let a=0;a<t.length;a++){const o=uoe[t[a]];if(o&&o(i,t))return}return e(i,...s)})},foe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},hoe=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Yi(i.key);if(t.some(a=>a===s||foe[a]===s))return e(i)})},yz=Tt({patchProp:Xae},Oae);let wm,AM=!1;function _z(){return wm||(wm=RU(yz))}function bz(){return wm=AM?wm:IU(yz),AM=!0,wm}const Ez=(...e)=>{_z().render(...e)},doe=(...e)=>{bz().hydrate(...e)},u1=(...e)=>{const t=_z().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=Tz(r);if(!i)return;const s=t._component;!it(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=n(i,!1,Sz(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t},wz=(...e)=>{const t=bz().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=Tz(r);if(i)return n(i,!0,Sz(i))},t};function Sz(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Tz(e){return lt(e)?document.querySelector(e):e}let kM=!1;const poe=()=>{kM||(kM=!0,loe(),Mae())},goe=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:lU,BaseTransitionPropsValidators:q3,Comment:Vn,DeprecationTypes:kae,EffectScope:L3,ErrorCodes:Pie,ErrorTypeStrings:_ae,Fragment:mt,KeepAlive:use,ReactiveEffect:e1,Static:qf,Suspense:nae,Teleport:Gie,Text:su,TrackOpTypes:Nie,Transition:Dae,TransitionGroup:noe,TriggerOpTypes:Die,VueElement:hE,assertNumber:Lie,callWithAsyncErrorHandling:ha,callWithErrorHandling:Cp,camelize:fn,capitalize:Yh,cloneVNode:Ho,compatUtils:Aae,computed:au,createApp:u1,createBlock:dh,createCommentVNode:ei,createElementBlock:He,createElementVNode:Q,createHydrationRenderer:IU,createPropsRestProxy:Ose,createRenderer:RU,createSSRApp:wz,createSlots:mse,createStaticVNode:uae,createTextVNode:Qn,createVNode:St,customRef:qB,defineAsyncComponent:lse,defineComponent:vr,defineCustomElement:dz,defineEmits:_se,defineExpose:bse,defineModel:Sse,defineOptions:Ese,defineProps:yse,defineSSRCustomElement:Kae,defineSlots:wse,devtools:bae,effect:eie,effectScope:P3,getCurrentInstance:Ea,getCurrentScope:B3,getCurrentWatcher:Rie,getTransitionRawChildren:sE,guardReactiveProps:YU,h:rz,handleError:Kh,hasInjectionContext:wU,hydrate:doe,hydrateOnIdle:nse,hydrateOnInteraction:ase,hydrateOnMediaQuery:sse,hydrateOnVisible:ise,initCustomFormatter:xae,initDirectivesForSSR:poe,inject:Gf,isMemoSame:iz,isProxy:tE,isReactive:Ro,isReadonly:mu,isRef:wn,isRuntimeOnly:pae,isShallow:ks,isVNode:ec,markRaw:nE,mergeDefaults:Cse,mergeModels:Fse,mergeProps:KU,nextTick:fh,normalizeClass:Do,normalizeProps:zre,normalizeStyle:Bu,onActivated:uU,onBeforeMount:Y3,onBeforeUnmount:lE,onBeforeUpdate:K3,onDeactivated:fU,onErrorCaptured:mU,onMounted:fc,onRenderTracked:gU,onRenderTriggered:pU,onScopeDispose:CB,onServerPrefetch:dU,onUnmounted:cE,onUpdated:oE,onWatcherCleanup:KB,openBlock:Le,popScopeId:Vie,provide:EU,proxyRefs:W3,pushScopeId:Hie,queuePostFlushCb:r1,reactive:hs,readonly:V3,ref:Jr,registerRuntimeCompiler:ez,render:Ez,renderList:Zr,renderSlot:vU,resolveComponent:dse,resolveDirective:gse,resolveDynamicComponent:pse,resolveFilter:Tae,resolveTransitionHooks:C0,setBlockTracking:Ik,setDevtoolsHook:Eae,setTransitionHooks:Ql,shallowReactive:WB,shallowReadonly:_ie,shallowRef:jB,ssrContextKey:PU,ssrUtils:Sae,stop:tie,toDisplayString:gr,toHandlerKey:u0,toHandlers:xse,toRaw:kt,toRef:Cie,toRefs:XB,toValue:wie,transformVNodeArgs:lae,triggerRef:Eie,unref:gn,useAttrs:kse,useCssModule:Qae,useCssVars:Lae,useHost:pz,useId:Xie,useModel:Yse,useSSRContext:BU,useShadowRoot:Zae,useSlots:Ase,useTemplateRef:Yie,useTransitionState:G3,vModelCheckbox:N0,vModelDynamic:W_,vModelRadio:i4,vModelSelect:gh,vModelText:c1,vShow:z_,version:sz,warn:yae,watch:Fi,watchEffect:Gse,watchPostEffect:qse,watchSyncEffect:UU,withAsyncContext:Nse,withCtx:iE,withDefaults:Tse,withDirectives:Ki,withKeys:hoe,withMemo:vae,withModifiers:Gc,withScopeId:Wie},Symbol.toStringTag,{value:"Module"}));/**
* @vue/compiler-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const f1=Symbol(""),Sm=Symbol(""),s4=Symbol(""),j_=Symbol(""),Az=Symbol(""),mh=Symbol(""),kz=Symbol(""),Cz=Symbol(""),a4=Symbol(""),o4=Symbol(""),ox=Symbol(""),l4=Symbol(""),Fz=Symbol(""),c4=Symbol(""),u4=Symbol(""),f4=Symbol(""),h4=Symbol(""),d4=Symbol(""),p4=Symbol(""),Oz=Symbol(""),Nz=Symbol(""),dE=Symbol(""),G_=Symbol(""),g4=Symbol(""),m4=Symbol(""),h1=Symbol(""),lx=Symbol(""),x4=Symbol(""),Vk=Symbol(""),moe=Symbol(""),Wk=Symbol(""),q_=Symbol(""),xoe=Symbol(""),voe=Symbol(""),v4=Symbol(""),yoe=Symbol(""),_oe=Symbol(""),y4=Symbol(""),Dz=Symbol(""),R0={[f1]:"Fragment",[Sm]:"Teleport",[s4]:"Suspense",[j_]:"KeepAlive",[Az]:"BaseTransition",[mh]:"openBlock",[kz]:"createBlock",[Cz]:"createElementBlock",[a4]:"createVNode",[o4]:"createElementVNode",[ox]:"createCommentVNode",[l4]:"createTextVNode",[Fz]:"createStaticVNode",[c4]:"resolveComponent",[u4]:"resolveDynamicComponent",[f4]:"resolveDirective",[h4]:"resolveFilter",[d4]:"withDirectives",[p4]:"renderList",[Oz]:"renderSlot",[Nz]:"createSlots",[dE]:"toDisplayString",[G_]:"mergeProps",[g4]:"normalizeClass",[m4]:"normalizeStyle",[h1]:"normalizeProps",[lx]:"guardReactiveProps",[x4]:"toHandlers",[Vk]:"camelize",[moe]:"capitalize",[Wk]:"toHandlerKey",[q_]:"setBlockTracking",[xoe]:"pushScopeId",[voe]:"popScopeId",[v4]:"withCtx",[yoe]:"unref",[_oe]:"isRef",[y4]:"withMemo",[Dz]:"isMemoSame"};function boe(e){Object.getOwnPropertySymbols(e).forEach(t=>{R0[t]=e[t]})}const Hs={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function Eoe(e,t=""){return{type:0,source:t,children:e,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:Hs}}function d1(e,t,n,r,i,s,a,o=!1,l=!1,c=!1,u=Hs){return e&&(o?(e.helper(mh),e.helper(M0(e.inSSR,c))):e.helper($0(e.inSSR,c)),a&&e.helper(d4)),{type:13,tag:t,props:n,children:r,patchFlag:i,dynamicProps:s,directives:a,isBlock:o,disableTracking:l,isComponent:c,loc:u}}function Xf(e,t=Hs){return{type:17,loc:t,elements:e}}function na(e,t=Hs){return{type:15,loc:t,properties:e}}function In(e,t){return{type:16,loc:Hs,key:lt(e)?ft(e,!0):e,value:t}}function ft(e,t=!1,n=Hs,r=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:r}}function Ga(e,t=Hs){return{type:8,loc:t,children:e}}function Xn(e,t=[],n=Hs){return{type:14,loc:n,callee:e,arguments:t}}function I0(e,t=void 0,n=!1,r=!1,i=Hs){return{type:18,params:e,returns:t,newline:n,isSlot:r,loc:i}}function jk(e,t,n,r=!0){return{type:19,test:e,consequent:t,alternate:n,newline:r,loc:Hs}}function woe(e,t,n=!1,r=!1){return{type:20,index:e,value:t,needPauseTracking:n,inVOnce:r,needArraySpread:!1,loc:Hs}}function Soe(e){return{type:21,body:e,loc:Hs}}function $0(e,t){return e||t?a4:o4}function M0(e,t){return e||t?kz:Cz}function _4(e,{helper:t,removeHelper:n,inSSR:r}){e.isBlock||(e.isBlock=!0,n($0(r,e.isComponent)),t(mh),t(M0(r,e.isComponent)))}const CM=new Uint8Array([123,123]),FM=new Uint8Array([125,125]);function OM(e){return e>=97&&e<=122||e>=65&&e<=90}function xs(e){return e===32||e===10||e===9||e===12||e===13}function Sc(e){return e===47||e===62||xs(e)}function X_(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}const Pr={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class Toe{constructor(t,n){this.stack=t,this.cbs=n,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=CM,this.delimiterClose=FM,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=CM,this.delimiterClose=FM}getPos(t){let n=1,r=t+1;for(let i=this.newlines.length-1;i>=0;i--){const s=this.newlines[i];if(t>s){n=i+2,r=t-s;break}}return{column:r,line:n,offset:t}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(t){t===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&t===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(t))}stateInterpolationOpen(t){if(t===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const n=this.index+1-this.delimiterOpen.length;n>this.sectionStart&&this.cbs.ontext(this.sectionStart,n),this.state=3,this.sectionStart=n}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(t)):(this.state=1,this.stateText(t))}stateInterpolation(t){t===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(t))}stateInterpolationClose(t){t===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(t))}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?Sc(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(t)}stateInRCDATA(t){if(this.sequenceIndex===this.currentSequence.length){if(t===62||xs(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const r=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=r}this.sectionStart=n+2,this.stateInClosingTagName(t),this.inRCDATA=!1;return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Pr.TitleEnd||this.currentSequence===Pr.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&t===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(t)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===60)}stateCDATASequence(t){t===Pr.Cdata[this.sequenceIndex]?++this.sequenceIndex===Pr.Cdata.length&&(this.state=28,this.currentSequence=Pr.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length;){const n=this.buffer.charCodeAt(this.index);if(n===10&&this.newlines.push(this.index),n===t)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Pr.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(t,n){this.enterRCDATA(t,n),this.state=31}enterRCDATA(t,n){this.inRCDATA=!0,this.currentSequence=t,this.sequenceIndex=n}stateBeforeTagName(t){t===33?(this.state=22,this.sectionStart=this.index+1):t===63?(this.state=24,this.sectionStart=this.index+1):OM(t)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:t===116?this.state=30:this.state=t===115?29:6):t===47?this.state=8:(this.state=1,this.stateText(t))}stateInTagName(t){Sc(t)&&this.handleTagName(t)}stateInSFCRootTagName(t){if(Sc(t)){const n=this.buffer.slice(this.sectionStart,this.index);n!=="template"&&this.enterRCDATA(X_("</"+n),0),this.handleTagName(t)}}handleTagName(t){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(t)}stateBeforeClosingTagName(t){xs(t)||(t===62?(this.state=1,this.sectionStart=this.index+1):(this.state=OM(t)?9:27,this.sectionStart=this.index))}stateInClosingTagName(t){(t===62||xs(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){t===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(t){t===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):t===47?this.state=7:t===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):xs(t)||this.handleAttrStart(t)}handleAttrStart(t){t===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):t===46||t===58||t===64||t===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):xs(t)||(this.state=11,this.stateBeforeAttrName(t))}stateInAttrName(t){(t===61||Sc(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(t))}stateInDirName(t){t===61||Sc(t)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):t===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(t){t===61||Sc(t)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===91?this.state=15:t===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(t){t===93?this.state=14:(t===61||Sc(t))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(t))}stateInDirModifier(t){t===61||Sc(t)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(t){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(t)}stateAfterAttrName(t){t===61?this.state=18:t===47||t===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(t)):xs(t)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(t))}stateBeforeAttrValue(t){t===34?(this.state=19,this.sectionStart=this.index+1):t===39?(this.state=20,this.sectionStart=this.index+1):xs(t)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(t))}handleInAttrValue(t,n){(t===n||this.fastForwardTo(n))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(t){this.handleInAttrValue(t,34)}stateInAttrValueSingleQuotes(t){this.handleInAttrValue(t,39)}stateInAttrValueNoQuotes(t){xs(t)||t===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(t)):(t===39||t===60||t===61||t===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(t){t===91?(this.state=26,this.sequenceIndex=0):this.state=t===45?25:23}stateInDeclaration(t){(t===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(t){t===45?(this.state=28,this.currentSequence=Pr.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(t){(t===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){t===Pr.ScriptEnd[3]?this.startSpecial(Pr.ScriptEnd,4):t===Pr.StyleEnd[3]?this.startSpecial(Pr.StyleEnd,4):(this.state=6,this.stateInTagName(t))}stateBeforeSpecialT(t){t===Pr.TitleEnd[3]?this.startSpecial(Pr.TitleEnd,4):t===Pr.TextareaEnd[3]?this.startSpecial(Pr.TextareaEnd,4):(this.state=6,this.stateInTagName(t))}startEntity(){}stateInEntity(){}parse(t){for(this.buffer=t;this.index<this.buffer.length;){const n=this.buffer.charCodeAt(this.index);switch(n===10&&this.newlines.push(this.index),this.state){case 1:{this.stateText(n);break}case 2:{this.stateInterpolationOpen(n);break}case 3:{this.stateInterpolation(n);break}case 4:{this.stateInterpolationClose(n);break}case 31:{this.stateSpecialStartSequence(n);break}case 32:{this.stateInRCDATA(n);break}case 26:{this.stateCDATASequence(n);break}case 19:{this.stateInAttrValueDoubleQuotes(n);break}case 12:{this.stateInAttrName(n);break}case 13:{this.stateInDirName(n);break}case 14:{this.stateInDirArg(n);break}case 15:{this.stateInDynamicDirArg(n);break}case 16:{this.stateInDirModifier(n);break}case 28:{this.stateInCommentLike(n);break}case 27:{this.stateInSpecialComment(n);break}case 11:{this.stateBeforeAttrName(n);break}case 6:{this.stateInTagName(n);break}case 34:{this.stateInSFCRootTagName(n);break}case 9:{this.stateInClosingTagName(n);break}case 5:{this.stateBeforeTagName(n);break}case 17:{this.stateAfterAttrName(n);break}case 20:{this.stateInAttrValueSingleQuotes(n);break}case 18:{this.stateBeforeAttrValue(n);break}case 8:{this.stateBeforeClosingTagName(n);break}case 10:{this.stateAfterClosingTagName(n);break}case 29:{this.stateBeforeSpecialS(n);break}case 30:{this.stateBeforeSpecialT(n);break}case 21:{this.stateInAttrValueNoQuotes(n);break}case 7:{this.stateInSelfClosingTag(n);break}case 23:{this.stateInDeclaration(n);break}case 22:{this.stateBeforeDeclaration(n);break}case 25:{this.stateBeforeComment(n);break}case 24:{this.stateInProcessingInstruction(n);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length;this.sectionStart>=t||(this.state===28?this.currentSequence===Pr.CdataEnd?this.cbs.oncdata(this.sectionStart,t):this.cbs.oncomment(this.sectionStart,t):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,n){}}function NM(e,{compatConfig:t}){const n=t&&t[e];return e==="MODE"?n||3:n}function Yf(e,t){const n=NM("MODE",t),r=NM(e,t);return n===3?r===!0:r!==!1}function p1(e,t,n,...r){return Yf(e,t)}function b4(e){throw e}function Rz(e){}function mn(e,t,n,r){const i=`https://vuejs.org/error-reference/#compiler-${e}`,s=new SyntaxError(String(i));return s.code=e,s.loc=t,s}const Qi=e=>e.type===4&&e.isStatic;function Iz(e){switch(e){case"Teleport":case"teleport":return Sm;case"Suspense":case"suspense":return s4;case"KeepAlive":case"keep-alive":return j_;case"BaseTransition":case"base-transition":return Az}}const Aoe=/^\d|[^\$\w\xA0-\uFFFF]/,E4=e=>!Aoe.test(e),koe=/[A-Za-z_$\xA0-\uFFFF]/,Coe=/[\.\?\w$\xA0-\uFFFF]/,Foe=/\s+[.[]\s*|\s*[.[]\s+/g,$z=e=>e.type===4?e.content:e.loc.source,Ooe=e=>{const t=$z(e).trim().replace(Foe,o=>o.trim());let n=0,r=[],i=0,s=0,a=null;for(let o=0;o<t.length;o++){const l=t.charAt(o);switch(n){case 0:if(l==="[")r.push(n),n=1,i++;else if(l==="(")r.push(n),n=2,s++;else if(!(o===0?koe:Coe).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(r.push(n),n=3,a=l):l==="["?i++:l==="]"&&(--i||(n=r.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")r.push(n),n=3,a=l;else if(l==="(")s++;else if(l===")"){if(o===t.length-1)return!1;--s||(n=r.pop())}break;case 3:l===a&&(n=r.pop(),a=null);break}}return!i&&!s},Mz=Ooe,Noe=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,Doe=e=>Noe.test($z(e)),Roe=Doe;function Js(e,t,n=!1){for(let r=0;r<e.props.length;r++){const i=e.props[r];if(i.type===7&&(n||i.exp)&&(lt(t)?i.name===t:t.test(i.name)))return i}}function pE(e,t,n=!1,r=!1){for(let i=0;i<e.props.length;i++){const s=e.props[i];if(s.type===6){if(n)continue;if(s.name===t&&(s.value||r))return s}else if(s.name==="bind"&&(s.exp||r)&&Mf(s.arg,t))return s}}function Mf(e,t){return!!(e&&Qi(e)&&e.content===t)}function Ioe(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function rT(e){return e.type===5||e.type===2}function $oe(e){return e.type===7&&e.name==="slot"}function Y_(e){return e.type===1&&e.tagType===3}function K_(e){return e.type===1&&e.tagType===2}const Moe=new Set([h1,lx]);function Lz(e,t=[]){if(e&&!lt(e)&&e.type===14){const n=e.callee;if(!lt(n)&&Moe.has(n))return Lz(e.arguments[0],t.concat(e))}return[e,t]}function J_(e,t,n){let r,i=e.type===13?e.props:e.arguments[2],s=[],a;if(i&&!lt(i)&&i.type===14){const o=Lz(i);i=o[0],s=o[1],a=s[s.length-1]}if(i==null||lt(i))r=na([t]);else if(i.type===14){const o=i.arguments[0];!lt(o)&&o.type===15?DM(t,o)||o.properties.unshift(t):i.callee===x4?r=Xn(n.helper(G_),[na([t]),i]):i.arguments.unshift(na([t])),!r&&(r=i)}else i.type===15?(DM(t,i)||i.properties.unshift(t),r=i):(r=Xn(n.helper(G_),[na([t]),i]),a&&a.callee===lx&&(a=s[s.length-2]));e.type===13?a?a.arguments[0]=r:e.props=r:a?a.arguments[0]=r:e.arguments[2]=r}function DM(e,t){let n=!1;if(e.key.type===4){const r=e.key.content;n=t.properties.some(i=>i.key.type===4&&i.key.content===r)}return n}function g1(e,t){return`_${t}_${e.replace(/[^\w]/g,(n,r)=>n==="-"?"_":e.charCodeAt(r).toString())}`}function Loe(e){return e.type===14&&e.callee===y4?e.arguments[1].returns:e}const Poe=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,Pz={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:Hg,isPreTag:Hg,isIgnoreNewlineTag:Hg,isCustomElement:Hg,onError:b4,onWarn:Rz,comments:!1,prefixIdentifiers:!1};let Vt=Pz,m1=null,Ul="",Wr=null,Rt=null,Hi="",bl=-1,Tf=-1,w4=0,Pc=!1,Gk=null;const dn=[],kn=new Toe(dn,{onerr:gl,ontext(e,t){Fv(br(e,t),e,t)},ontextentity(e,t,n){Fv(e,t,n)},oninterpolation(e,t){if(Pc)return Fv(br(e,t),e,t);let n=e+kn.delimiterOpen.length,r=t-kn.delimiterClose.length;for(;xs(Ul.charCodeAt(n));)n++;for(;xs(Ul.charCodeAt(r-1));)r--;let i=br(n,r);i.includes("&")&&(i=Vt.decodeEntities(i,!1)),qk({type:5,content:Gy(i,!1,Dn(n,r)),loc:Dn(e,t)})},onopentagname(e,t){const n=br(e,t);Wr={type:1,tag:n,ns:Vt.getNamespace(n,dn[0],Vt.ns),tagType:0,props:[],children:[],loc:Dn(e-1,t),codegenNode:void 0}},onopentagend(e){IM(e)},onclosetag(e,t){const n=br(e,t);if(!Vt.isVoidTag(n)){let r=!1;for(let i=0;i<dn.length;i++)if(dn[i].tag.toLowerCase()===n.toLowerCase()){r=!0,i>0&&gl(24,dn[0].loc.start.offset);for(let a=0;a<=i;a++){const o=dn.shift();jy(o,t,a<i)}break}r||gl(23,Bz(e,60))}},onselfclosingtag(e){const t=Wr.tag;Wr.isSelfClosing=!0,IM(e),dn[0]&&dn[0].tag===t&&jy(dn.shift(),e)},onattribname(e,t){Rt={type:6,name:br(e,t),nameLoc:Dn(e,t),value:void 0,loc:Dn(e)}},ondirname(e,t){const n=br(e,t),r=n==="."||n===":"?"bind":n==="@"?"on":n==="#"?"slot":n.slice(2);if(!Pc&&r===""&&gl(26,e),Pc||r==="")Rt={type:6,name:n,nameLoc:Dn(e,t),value:void 0,loc:Dn(e)};else if(Rt={type:7,name:r,rawName:n,exp:void 0,arg:void 0,modifiers:n==="."?[ft("prop")]:[],loc:Dn(e)},r==="pre"){Pc=kn.inVPre=!0,Gk=Wr;const i=Wr.props;for(let s=0;s<i.length;s++)i[s].type===7&&(i[s]=Yoe(i[s]))}},ondirarg(e,t){if(e===t)return;const n=br(e,t);if(Pc)Rt.name+=n,Lf(Rt.nameLoc,t);else{const r=n[0]!=="[";Rt.arg=Gy(r?n:n.slice(1,-1),r,Dn(e,t),r?3:0)}},ondirmodifier(e,t){const n=br(e,t);if(Pc)Rt.name+="."+n,Lf(Rt.nameLoc,t);else if(Rt.name==="slot"){const r=Rt.arg;r&&(r.content+="."+n,Lf(r.loc,t))}else{const r=ft(n,!0,Dn(e,t));Rt.modifiers.push(r)}},onattribdata(e,t){Hi+=br(e,t),bl<0&&(bl=e),Tf=t},onattribentity(e,t,n){Hi+=e,bl<0&&(bl=t),Tf=n},onattribnameend(e){const t=Rt.loc.start.offset,n=br(t,e);Rt.type===7&&(Rt.rawName=n),Wr.props.some(r=>(r.type===7?r.rawName:r.name)===n)&&gl(2,t)},onattribend(e,t){if(Wr&&Rt){if(Lf(Rt.loc,t),e!==0)if(Hi.includes("&")&&(Hi=Vt.decodeEntities(Hi,!0)),Rt.type===6)Rt.name==="class"&&(Hi=zz(Hi).trim()),e===1&&!Hi&&gl(13,t),Rt.value={type:2,content:Hi,loc:e===1?Dn(bl,Tf):Dn(bl-1,Tf+1)},kn.inSFCRoot&&Wr.tag==="template"&&Rt.name==="lang"&&Hi&&Hi!=="html"&&kn.enterRCDATA(X_("</template"),0);else{let n=0;Rt.exp=Gy(Hi,!1,Dn(bl,Tf),0,n),Rt.name==="for"&&(Rt.forParseResult=Uoe(Rt.exp));let r=-1;Rt.name==="bind"&&(r=Rt.modifiers.findIndex(i=>i.content==="sync"))>-1&&p1("COMPILER_V_BIND_SYNC",Vt,Rt.loc,Rt.rawName)&&(Rt.name="model",Rt.modifiers.splice(r,1))}(Rt.type!==7||Rt.name!=="pre")&&Wr.props.push(Rt)}Hi="",bl=Tf=-1},oncomment(e,t){Vt.comments&&qk({type:3,content:br(e,t),loc:Dn(e-4,t+3)})},onend(){const e=Ul.length;for(let t=0;t<dn.length;t++)jy(dn[t],e-1),gl(24,dn[t].loc.start.offset)},oncdata(e,t){dn[0].ns!==0?Fv(br(e,t),e,t):gl(1,e-9)},onprocessinginstruction(e){(dn[0]?dn[0].ns:Vt.ns)===0&&gl(21,e-1)}}),RM=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Boe=/^\(|\)$/g;function Uoe(e){const t=e.loc,n=e.content,r=n.match(Poe);if(!r)return;const[,i,s]=r,a=(f,h,d=!1)=>{const p=t.start.offset+h,g=p+f.length;return Gy(f,!1,Dn(p,g),0,d?1:0)},o={source:a(s.trim(),n.indexOf(s,i.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=i.trim().replace(Boe,"").trim();const c=i.indexOf(l),u=l.match(RM);if(u){l=l.replace(RM,"").trim();const f=u[1].trim();let h;if(f&&(h=n.indexOf(f,c+l.length),o.key=a(f,h,!0)),u[2]){const d=u[2].trim();d&&(o.index=a(d,n.indexOf(d,o.key?h+f.length:c+l.length),!0))}}return l&&(o.value=a(l,c,!0)),o}function br(e,t){return Ul.slice(e,t)}function IM(e){kn.inSFCRoot&&(Wr.innerLoc=Dn(e+1,e+1)),qk(Wr);const{tag:t,ns:n}=Wr;n===0&&Vt.isPreTag(t)&&w4++,Vt.isVoidTag(t)?jy(Wr,e):(dn.unshift(Wr),(n===1||n===2)&&(kn.inXML=!0)),Wr=null}function Fv(e,t,n){{const s=dn[0]&&dn[0].tag;s!=="script"&&s!=="style"&&e.includes("&")&&(e=Vt.decodeEntities(e,!1))}const r=dn[0]||m1,i=r.children[r.children.length-1];i&&i.type===2?(i.content+=e,Lf(i.loc,n)):r.children.push({type:2,content:e,loc:Dn(t,n)})}function jy(e,t,n=!1){n?Lf(e.loc,Bz(t,60)):Lf(e.loc,zoe(t,62)+1),kn.inSFCRoot&&(e.children.length?e.innerLoc.end=Tt({},e.children[e.children.length-1].loc.end):e.innerLoc.end=Tt({},e.innerLoc.start),e.innerLoc.source=br(e.innerLoc.start.offset,e.innerLoc.end.offset));const{tag:r,ns:i,children:s}=e;if(Pc||(r==="slot"?e.tagType=2:$M(e)?e.tagType=3:Voe(e)&&(e.tagType=1)),kn.inRCDATA||(e.children=Uz(s)),i===0&&Vt.isIgnoreNewlineTag(r)){const a=s[0];a&&a.type===2&&(a.content=a.content.replace(/^\r?\n/,""))}i===0&&Vt.isPreTag(r)&&w4--,Gk===e&&(Pc=kn.inVPre=!1,Gk=null),kn.inXML&&(dn[0]?dn[0].ns:Vt.ns)===0&&(kn.inXML=!1);{const a=e.props;if(!kn.inSFCRoot&&Yf("COMPILER_NATIVE_TEMPLATE",Vt)&&e.tag==="template"&&!$M(e)){const l=dn[0]||m1,c=l.children.indexOf(e);l.children.splice(c,1,...e.children)}const o=a.find(l=>l.type===6&&l.name==="inline-template");o&&p1("COMPILER_INLINE_TEMPLATE",Vt,o.loc)&&e.children.length&&(o.value={type:2,content:br(e.children[0].loc.start.offset,e.children[e.children.length-1].loc.end.offset),loc:o.loc})}}function zoe(e,t){let n=e;for(;Ul.charCodeAt(n)!==t&&n<Ul.length-1;)n++;return n}function Bz(e,t){let n=e;for(;Ul.charCodeAt(n)!==t&&n>=0;)n--;return n}const Hoe=new Set(["if","else","else-if","for","slot"]);function $M({tag:e,props:t}){if(e==="template"){for(let n=0;n<t.length;n++)if(t[n].type===7&&Hoe.has(t[n].name))return!0}return!1}function Voe({tag:e,props:t}){if(Vt.isCustomElement(e))return!1;if(e==="component"||Woe(e.charCodeAt(0))||Iz(e)||Vt.isBuiltInComponent&&Vt.isBuiltInComponent(e)||Vt.isNativeTag&&!Vt.isNativeTag(e))return!0;for(let n=0;n<t.length;n++){const r=t[n];if(r.type===6){if(r.name==="is"&&r.value){if(r.value.content.startsWith("vue:"))return!0;if(p1("COMPILER_IS_ON_ELEMENT",Vt,r.loc))return!0}}else if(r.name==="bind"&&Mf(r.arg,"is")&&p1("COMPILER_IS_ON_ELEMENT",Vt,r.loc))return!0}return!1}function Woe(e){return e>64&&e<91}const joe=/\r\n/g;function Uz(e,t){const n=Vt.whitespace!=="preserve";let r=!1;for(let i=0;i<e.length;i++){const s=e[i];if(s.type===2)if(w4)s.content=s.content.replace(joe,`
`);else if(Goe(s.content)){const a=e[i-1]&&e[i-1].type,o=e[i+1]&&e[i+1].type;!a||!o||n&&(a===3&&(o===3||o===1)||a===1&&(o===3||o===1&&qoe(s.content)))?(r=!0,e[i]=null):s.content=" "}else n&&(s.content=zz(s.content))}return r?e.filter(Boolean):e}function Goe(e){for(let t=0;t<e.length;t++)if(!xs(e.charCodeAt(t)))return!1;return!0}function qoe(e){for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n===10||n===13)return!0}return!1}function zz(e){let t="",n=!1;for(let r=0;r<e.length;r++)xs(e.charCodeAt(r))?n||(t+=" ",n=!0):(t+=e[r],n=!1);return t}function qk(e){(dn[0]||m1).children.push(e)}function Dn(e,t){return{start:kn.getPos(e),end:t==null?t:kn.getPos(t),source:t==null?t:br(e,t)}}function Xoe(e){return Dn(e.start.offset,e.end.offset)}function Lf(e,t){e.end=kn.getPos(t),e.source=br(e.start.offset,t)}function Yoe(e){const t={type:6,name:e.rawName,nameLoc:Dn(e.loc.start.offset,e.loc.start.offset+e.rawName.length),value:void 0,loc:e.loc};if(e.exp){const n=e.exp.loc;n.end.offset<e.loc.end.offset&&(n.start.offset--,n.start.column--,n.end.offset++,n.end.column++),t.value={type:2,content:e.exp.content,loc:n}}return t}function Gy(e,t=!1,n,r=0,i=0){return ft(e,t,n,r)}function gl(e,t,n){Vt.onError(mn(e,Dn(t,t)))}function Koe(){kn.reset(),Wr=null,Rt=null,Hi="",bl=-1,Tf=-1,dn.length=0}function Joe(e,t){if(Koe(),Ul=e,Vt=Tt({},Pz),t){let i;for(i in t)t[i]!=null&&(Vt[i]=t[i])}kn.mode=Vt.parseMode==="html"?1:Vt.parseMode==="sfc"?2:0,kn.inXML=Vt.ns===1||Vt.ns===2;const n=t&&t.delimiters;n&&(kn.delimiterOpen=X_(n[0]),kn.delimiterClose=X_(n[1]));const r=m1=Eoe([],e);return kn.parse(Ul),r.loc=Dn(0,e.length),r.children=Uz(r.children),m1=null,r}function Zoe(e,t){qy(e,void 0,t,Hz(e,e.children[0]))}function Hz(e,t){const{children:n}=e;return n.length===1&&t.type===1&&!K_(t)}function qy(e,t,n,r=!1,i=!1){const{children:s}=e,a=[];for(let u=0;u<s.length;u++){const f=s[u];if(f.type===1&&f.tagType===0){const h=r?0:ws(f,n);if(h>0){if(h>=2){f.codegenNode.patchFlag=-1,a.push(f);continue}}else{const d=f.codegenNode;if(d.type===13){const p=d.patchFlag;if((p===void 0||p===512||p===1)&&Wz(f,n)>=2){const g=jz(f);g&&(d.props=n.hoist(g))}d.dynamicProps&&(d.dynamicProps=n.hoist(d.dynamicProps))}}}else if(f.type===12&&(r?0:ws(f,n))>=2){a.push(f);continue}if(f.type===1){const h=f.tagType===1;h&&n.scopes.vSlot++,qy(f,e,n,!1,i),h&&n.scopes.vSlot--}else if(f.type===11)qy(f,e,n,f.children.length===1,!0);else if(f.type===9)for(let h=0;h<f.branches.length;h++)qy(f.branches[h],e,n,f.branches[h].children.length===1,i)}let o=!1;if(a.length===s.length&&e.type===1){if(e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&Ve(e.codegenNode.children))e.codegenNode.children=l(Xf(e.codegenNode.children)),o=!0;else if(e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!Ve(e.codegenNode.children)&&e.codegenNode.children.type===15){const u=c(e.codegenNode,"default");u&&(u.returns=l(Xf(u.returns)),o=!0)}else if(e.tagType===3&&t&&t.type===1&&t.tagType===1&&t.codegenNode&&t.codegenNode.type===13&&t.codegenNode.children&&!Ve(t.codegenNode.children)&&t.codegenNode.children.type===15){const u=Js(e,"slot",!0),f=u&&u.arg&&c(t.codegenNode,u.arg);f&&(f.returns=l(Xf(f.returns)),o=!0)}}if(!o)for(const u of a)u.codegenNode=n.cache(u.codegenNode);function l(u){const f=n.cache(u);return i&&n.hmr&&(f.needArraySpread=!0),f}function c(u,f){if(u.children&&!Ve(u.children)&&u.children.type===15){const h=u.children.properties.find(d=>d.key===f||d.key.content===f);return h&&h.value}}a.length&&n.transformHoist&&n.transformHoist(s,n,e)}function ws(e,t){const{constantCache:n}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const r=n.get(e);if(r!==void 0)return r;const i=e.codegenNode;if(i.type!==13||i.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject"&&e.tag!=="math")return 0;if(i.patchFlag===void 0){let a=3;const o=Wz(e,t);if(o===0)return n.set(e,0),0;o<a&&(a=o);for(let l=0;l<e.children.length;l++){const c=ws(e.children[l],t);if(c===0)return n.set(e,0),0;c<a&&(a=c)}if(a>1)for(let l=0;l<e.props.length;l++){const c=e.props[l];if(c.type===7&&c.name==="bind"&&c.exp){const u=ws(c.exp,t);if(u===0)return n.set(e,0),0;u<a&&(a=u)}}if(i.isBlock){for(let l=0;l<e.props.length;l++)if(e.props[l].type===7)return n.set(e,0),0;t.removeHelper(mh),t.removeHelper(M0(t.inSSR,i.isComponent)),i.isBlock=!1,t.helper($0(t.inSSR,i.isComponent))}return n.set(e,a),a}else return n.set(e,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return ws(e.content,t);case 4:return e.constType;case 8:let s=3;for(let a=0;a<e.children.length;a++){const o=e.children[a];if(lt(o)||is(o))continue;const l=ws(o,t);if(l===0)return 0;l<s&&(s=l)}return s;case 20:return 2;default:return 0}}const Qoe=new Set([g4,m4,h1,lx]);function Vz(e,t){if(e.type===14&&!lt(e.callee)&&Qoe.has(e.callee)){const n=e.arguments[0];if(n.type===4)return ws(n,t);if(n.type===14)return Vz(n,t)}return 0}function Wz(e,t){let n=3;const r=jz(e);if(r&&r.type===15){const{properties:i}=r;for(let s=0;s<i.length;s++){const{key:a,value:o}=i[s],l=ws(a,t);if(l===0)return l;l<n&&(n=l);let c;if(o.type===4?c=ws(o,t):o.type===14?c=Vz(o,t):c=0,c===0)return c;c<n&&(n=c)}}return n}function jz(e){const t=e.codegenNode;if(t.type===13)return t.props}function ele(e,{filename:t="",prefixIdentifiers:n=!1,hoistStatic:r=!1,hmr:i=!1,cacheHandlers:s=!1,nodeTransforms:a=[],directiveTransforms:o={},transformHoist:l=null,isBuiltInComponent:c=Or,isCustomElement:u=Or,expressionPlugins:f=[],scopeId:h=null,slotted:d=!0,ssr:p=!1,inSSR:g=!1,ssrCssVars:m="",bindingMetadata:x=bt,inline:y=!1,isTS:v=!1,onError:_=b4,onWarn:b=Rz,compatConfig:w}){const E=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),T={filename:t,selfName:E&&Yh(fn(E[1])),prefixIdentifiers:n,hoistStatic:r,hmr:i,cacheHandlers:s,nodeTransforms:a,directiveTransforms:o,transformHoist:l,isBuiltInComponent:c,isCustomElement:u,expressionPlugins:f,scopeId:h,slotted:d,ssr:p,inSSR:g,ssrCssVars:m,bindingMetadata:x,inline:y,isTS:v,onError:_,onWarn:b,compatConfig:w,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(S){const A=T.helpers.get(S)||0;return T.helpers.set(S,A+1),S},removeHelper(S){const A=T.helpers.get(S);if(A){const C=A-1;C?T.helpers.set(S,C):T.helpers.delete(S)}},helperString(S){return`_${R0[T.helper(S)]}`},replaceNode(S){T.parent.children[T.childIndex]=T.currentNode=S},removeNode(S){const A=T.parent.children,C=S?A.indexOf(S):T.currentNode?T.childIndex:-1;!S||S===T.currentNode?(T.currentNode=null,T.onNodeRemoved()):T.childIndex>C&&(T.childIndex--,T.onNodeRemoved()),T.parent.children.splice(C,1)},onNodeRemoved:Or,addIdentifiers(S){},removeIdentifiers(S){},hoist(S){lt(S)&&(S=ft(S)),T.hoists.push(S);const A=ft(`_hoisted_${T.hoists.length}`,!1,S.loc,2);return A.hoisted=S,A},cache(S,A=!1,C=!1){const F=woe(T.cached.length,S,A,C);return T.cached.push(F),F}};return T.filters=new Set,T}function tle(e,t){const n=ele(e,t);gE(e,n),t.hoistStatic&&Zoe(e,n),t.ssr||nle(e,n),e.helpers=new Set([...n.helpers.keys()]),e.components=[...n.components],e.directives=[...n.directives],e.imports=n.imports,e.hoists=n.hoists,e.temps=n.temps,e.cached=n.cached,e.transformed=!0,e.filters=[...n.filters]}function nle(e,t){const{helper:n}=t,{children:r}=e;if(r.length===1){const i=r[0];if(Hz(e,i)&&i.codegenNode){const s=i.codegenNode;s.type===13&&_4(s,t),e.codegenNode=s}else e.codegenNode=i}else if(r.length>1){let i=64;e.codegenNode=d1(t,n(f1),void 0,e.children,i,void 0,void 0,!0,void 0,!1)}}function rle(e,t){let n=0;const r=()=>{n--};for(;n<e.children.length;n++){const i=e.children[n];lt(i)||(t.grandParent=t.parent,t.parent=e,t.childIndex=n,t.onNodeRemoved=r,gE(i,t))}}function gE(e,t){t.currentNode=e;const{nodeTransforms:n}=t,r=[];for(let s=0;s<n.length;s++){const a=n[s](e,t);if(a&&(Ve(a)?r.push(...a):r.push(a)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(ox);break;case 5:t.ssr||t.helper(dE);break;case 9:for(let s=0;s<e.branches.length;s++)gE(e.branches[s],t);break;case 10:case 11:case 1:case 0:rle(e,t);break}t.currentNode=e;let i=r.length;for(;i--;)r[i]()}function Gz(e,t){const n=lt(e)?r=>r===e:r=>e.test(r);return(r,i)=>{if(r.type===1){const{props:s}=r;if(r.tagType===3&&s.some($oe))return;const a=[];for(let o=0;o<s.length;o++){const l=s[o];if(l.type===7&&n(l.name)){s.splice(o,1),o--;const c=t(r,l,i);c&&a.push(c)}}return a}}}const mE="/*@__PURE__*/",qz=e=>`${R0[e]}: _${R0[e]}`;function ile(e,{mode:t="function",prefixIdentifiers:n=t==="module",sourceMap:r=!1,filename:i="template.vue.html",scopeId:s=null,optimizeImports:a=!1,runtimeGlobalName:o="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:c="vue/server-renderer",ssr:u=!1,isTS:f=!1,inSSR:h=!1}){const d={mode:t,prefixIdentifiers:n,sourceMap:r,filename:i,scopeId:s,optimizeImports:a,runtimeGlobalName:o,runtimeModuleName:l,ssrRuntimeModuleName:c,ssr:u,isTS:f,inSSR:h,source:e.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(g){return`_${R0[g]}`},push(g,m=-2,x){d.code+=g},indent(){p(++d.indentLevel)},deindent(g=!1){g?--d.indentLevel:p(--d.indentLevel)},newline(){p(d.indentLevel)}};function p(g){d.push(`
`+"  ".repeat(g),0)}return d}function sle(e,t={}){const n=ile(e,t);t.onContextCreated&&t.onContextCreated(n);const{mode:r,push:i,prefixIdentifiers:s,indent:a,deindent:o,newline:l,scopeId:c,ssr:u}=n,f=Array.from(e.helpers),h=f.length>0,d=!s&&r!=="module";ale(e,n);const g=u?"ssrRender":"render",x=(u?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(i(`function ${g}(${x}) {`),a(),d&&(i("with (_ctx) {"),a(),h&&(i(`const { ${f.map(qz).join(", ")} } = _Vue
`,-1),l())),e.components.length&&(iT(e.components,"component",n),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(iT(e.directives,"directive",n),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),iT(e.filters,"filter",n),l()),e.temps>0){i("let ");for(let y=0;y<e.temps;y++)i(`${y>0?", ":""}_temp${y}`)}return(e.components.length||e.directives.length||e.temps)&&(i(`
`,0),l()),u||i("return "),e.codegenNode?ii(e.codegenNode,n):i("null"),d&&(o(),i("}")),o(),i("}"),{ast:e,code:n.code,preamble:"",map:n.map?n.map.toJSON():void 0}}function ale(e,t){const{ssr:n,prefixIdentifiers:r,push:i,newline:s,runtimeModuleName:a,runtimeGlobalName:o,ssrRuntimeModuleName:l}=t,c=o,u=Array.from(e.helpers);if(u.length>0&&(i(`const _Vue = ${c}
`,-1),e.hoists.length)){const f=[a4,o4,ox,l4,Fz].filter(h=>u.includes(h)).map(qz).join(", ");i(`const { ${f} } = _Vue
`,-1)}ole(e.hoists,t),s(),i("return ")}function iT(e,t,{helper:n,push:r,newline:i,isTS:s}){const a=n(t==="filter"?h4:t==="component"?c4:f4);for(let o=0;o<e.length;o++){let l=e[o];const c=l.endsWith("__self");c&&(l=l.slice(0,-6)),r(`const ${g1(l,t)} = ${a}(${JSON.stringify(l)}${c?", true":""})${s?"!":""}`),o<e.length-1&&i()}}function ole(e,t){if(!e.length)return;t.pure=!0;const{push:n,newline:r}=t;r();for(let i=0;i<e.length;i++){const s=e[i];s&&(n(`const _hoisted_${i+1} = `),ii(s,t),r())}t.pure=!1}function S4(e,t){const n=e.length>3||!1;t.push("["),n&&t.indent(),cx(e,t,n),n&&t.deindent(),t.push("]")}function cx(e,t,n=!1,r=!0){const{push:i,newline:s}=t;for(let a=0;a<e.length;a++){const o=e[a];lt(o)?i(o,-3):Ve(o)?S4(o,t):ii(o,t),a<e.length-1&&(n?(r&&i(","),s()):r&&i(", "))}}function ii(e,t){if(lt(e)){t.push(e,-3);return}if(is(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:ii(e.codegenNode,t);break;case 2:lle(e,t);break;case 4:Xz(e,t);break;case 5:cle(e,t);break;case 12:ii(e.codegenNode,t);break;case 8:Yz(e,t);break;case 3:fle(e,t);break;case 13:hle(e,t);break;case 14:ple(e,t);break;case 15:gle(e,t);break;case 17:mle(e,t);break;case 18:xle(e,t);break;case 19:vle(e,t);break;case 20:yle(e,t);break;case 21:cx(e.body,t,!0,!1);break}}function lle(e,t){t.push(JSON.stringify(e.content),-3,e)}function Xz(e,t){const{content:n,isStatic:r}=e;t.push(r?JSON.stringify(n):n,-3,e)}function cle(e,t){const{push:n,helper:r,pure:i}=t;i&&n(mE),n(`${r(dE)}(`),ii(e.content,t),n(")")}function Yz(e,t){for(let n=0;n<e.children.length;n++){const r=e.children[n];lt(r)?t.push(r,-3):ii(r,t)}}function ule(e,t){const{push:n}=t;if(e.type===8)n("["),Yz(e,t),n("]");else if(e.isStatic){const r=E4(e.content)?e.content:JSON.stringify(e.content);n(r,-2,e)}else n(`[${e.content}]`,-3,e)}function fle(e,t){const{push:n,helper:r,pure:i}=t;i&&n(mE),n(`${r(ox)}(${JSON.stringify(e.content)})`,-3,e)}function hle(e,t){const{push:n,helper:r,pure:i}=t,{tag:s,props:a,children:o,patchFlag:l,dynamicProps:c,directives:u,isBlock:f,disableTracking:h,isComponent:d}=e;let p;l&&(p=String(l)),u&&n(r(d4)+"("),f&&n(`(${r(mh)}(${h?"true":""}), `),i&&n(mE);const g=f?M0(t.inSSR,d):$0(t.inSSR,d);n(r(g)+"(",-2,e),cx(dle([s,a,o,p,c]),t),n(")"),f&&n(")"),u&&(n(", "),ii(u,t),n(")"))}function dle(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(n=>n||"null")}function ple(e,t){const{push:n,helper:r,pure:i}=t,s=lt(e.callee)?e.callee:r(e.callee);i&&n(mE),n(s+"(",-2,e),cx(e.arguments,t),n(")")}function gle(e,t){const{push:n,indent:r,deindent:i,newline:s}=t,{properties:a}=e;if(!a.length){n("{}",-2,e);return}const o=a.length>1||!1;n(o?"{":"{ "),o&&r();for(let l=0;l<a.length;l++){const{key:c,value:u}=a[l];ule(c,t),n(": "),ii(u,t),l<a.length-1&&(n(","),s())}o&&i(),n(o?"}":" }")}function mle(e,t){S4(e.elements,t)}function xle(e,t){const{push:n,indent:r,deindent:i}=t,{params:s,returns:a,body:o,newline:l,isSlot:c}=e;c&&n(`_${R0[v4]}(`),n("(",-2,e),Ve(s)?cx(s,t):s&&ii(s,t),n(") => "),(l||o)&&(n("{"),r()),a?(l&&n("return "),Ve(a)?S4(a,t):ii(a,t)):o&&ii(o,t),(l||o)&&(i(),n("}")),c&&(e.isNonScopedSlot&&n(", undefined, true"),n(")"))}function vle(e,t){const{test:n,consequent:r,alternate:i,newline:s}=e,{push:a,indent:o,deindent:l,newline:c}=t;if(n.type===4){const f=!E4(n.content);f&&a("("),Xz(n,t),f&&a(")")}else a("("),ii(n,t),a(")");s&&o(),t.indentLevel++,s||a(" "),a("? "),ii(r,t),t.indentLevel--,s&&c(),s||a(" "),a(": ");const u=i.type===19;u||t.indentLevel++,ii(i,t),u||t.indentLevel--,s&&l(!0)}function yle(e,t){const{push:n,helper:r,indent:i,deindent:s,newline:a}=t,{needPauseTracking:o,needArraySpread:l}=e;l&&n("[...("),n(`_cache[${e.index}] || (`),o&&(i(),n(`${r(q_)}(-1`),e.inVOnce&&n(", true"),n("),"),a(),n("(")),n(`_cache[${e.index}] = `),ii(e.value,t),o&&(n(`).cacheIndex = ${e.index},`),a(),n(`${r(q_)}(1),`),a(),n(`_cache[${e.index}]`),s()),n(")"),l&&n(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const _le=Gz(/^(if|else|else-if)$/,(e,t,n)=>ble(e,t,n,(r,i,s)=>{const a=n.parent.children;let o=a.indexOf(r),l=0;for(;o-->=0;){const c=a[o];c&&c.type===9&&(l+=c.branches.length)}return()=>{if(s)r.codegenNode=LM(i,l,n);else{const c=Ele(r.codegenNode);c.alternate=LM(i,l+r.branches.length-1,n)}}}));function ble(e,t,n,r){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const i=t.exp?t.exp.loc:e.loc;n.onError(mn(28,t.loc)),t.exp=ft("true",!1,i)}if(t.name==="if"){const i=MM(e,t),s={type:9,loc:Xoe(e.loc),branches:[i]};if(n.replaceNode(s),r)return r(s,i,!0)}else{const i=n.parent.children;let s=i.indexOf(e);for(;s-->=-1;){const a=i[s];if(a&&a.type===3){n.removeNode(a);continue}if(a&&a.type===2&&!a.content.trim().length){n.removeNode(a);continue}if(a&&a.type===9){t.name==="else-if"&&a.branches[a.branches.length-1].condition===void 0&&n.onError(mn(30,e.loc)),n.removeNode();const o=MM(e,t);a.branches.push(o);const l=r&&r(a,o,!1);gE(o,n),l&&l(),n.currentNode=null}else n.onError(mn(30,e.loc));break}}}function MM(e,t){const n=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:n&&!Js(e,"for")?e.children:[e],userKey:pE(e,"key"),isTemplateIf:n}}function LM(e,t,n){return e.condition?jk(e.condition,PM(e,t,n),Xn(n.helper(ox),['""',"true"])):PM(e,t,n)}function PM(e,t,n){const{helper:r}=n,i=In("key",ft(`${t}`,!1,Hs,2)),{children:s}=e,a=s[0];if(s.length!==1||a.type!==1)if(s.length===1&&a.type===11){const l=a.codegenNode;return J_(l,i,n),l}else return d1(n,r(f1),na([i]),s,64,void 0,void 0,!0,!1,!1,e.loc);else{const l=a.codegenNode,c=Loe(l);return c.type===13&&_4(c,n),J_(c,i,n),l}}function Ele(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const wle=(e,t,n)=>{const{modifiers:r,loc:i}=e,s=e.arg;let{exp:a}=e;if(a&&a.type===4&&!a.content.trim()&&(a=void 0),!a){if(s.type!==4||!s.isStatic)return n.onError(mn(52,s.loc)),{props:[In(s,ft("",!0,i))]};Kz(e),a=e.exp}return s.type!==4?(s.children.unshift("("),s.children.push(') || ""')):s.isStatic||(s.content=`${s.content} || ""`),r.some(o=>o.content==="camel")&&(s.type===4?s.isStatic?s.content=fn(s.content):s.content=`${n.helperString(Vk)}(${s.content})`:(s.children.unshift(`${n.helperString(Vk)}(`),s.children.push(")"))),n.inSSR||(r.some(o=>o.content==="prop")&&BM(s,"."),r.some(o=>o.content==="attr")&&BM(s,"^")),{props:[In(s,a)]}},Kz=(e,t)=>{const n=e.arg,r=fn(n.content);e.exp=ft(r,!1,n.loc)},BM=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},Sle=Gz("for",(e,t,n)=>{const{helper:r,removeHelper:i}=n;return Tle(e,t,n,s=>{const a=Xn(r(p4),[s.source]),o=Y_(e),l=Js(e,"memo"),c=pE(e,"key",!1,!0);c&&c.type===7&&!c.exp&&Kz(c);let f=c&&(c.type===6?c.value?ft(c.value.content,!0):void 0:c.exp);const h=c&&f?In("key",f):null,d=s.source.type===4&&s.source.constType>0,p=d?64:c?128:256;return s.codegenNode=d1(n,r(f1),void 0,a,p,void 0,void 0,!0,!d,!1,e.loc),()=>{let g;const{children:m}=s,x=m.length!==1||m[0].type!==1,y=K_(e)?e:o&&e.children.length===1&&K_(e.children[0])?e.children[0]:null;if(y?(g=y.codegenNode,o&&h&&J_(g,h,n)):x?g=d1(n,r(f1),h?na([h]):void 0,e.children,64,void 0,void 0,!0,void 0,!1):(g=m[0].codegenNode,o&&h&&J_(g,h,n),g.isBlock!==!d&&(g.isBlock?(i(mh),i(M0(n.inSSR,g.isComponent))):i($0(n.inSSR,g.isComponent))),g.isBlock=!d,g.isBlock?(r(mh),r(M0(n.inSSR,g.isComponent))):r($0(n.inSSR,g.isComponent))),l){const v=I0(Xk(s.parseResult,[ft("_cached")]));v.body=Soe([Ga(["const _memo = (",l.exp,")"]),Ga(["if (_cached",...f?[" && _cached.key === ",f]:[],` && ${n.helperString(Dz)}(_cached, _memo)) return _cached`]),Ga(["const _item = ",g]),ft("_item.memo = _memo"),ft("return _item")]),a.arguments.push(v,ft("_cache"),ft(String(n.cached.length))),n.cached.push(null)}else a.arguments.push(I0(Xk(s.parseResult),g,!0))}})});function Tle(e,t,n,r){if(!t.exp){n.onError(mn(31,t.loc));return}const i=t.forParseResult;if(!i){n.onError(mn(32,t.loc));return}Jz(i);const{addIdentifiers:s,removeIdentifiers:a,scopes:o}=n,{source:l,value:c,key:u,index:f}=i,h={type:11,loc:t.loc,source:l,valueAlias:c,keyAlias:u,objectIndexAlias:f,parseResult:i,children:Y_(e)?e.children:[e]};n.replaceNode(h),o.vFor++;const d=r&&r(h);return()=>{o.vFor--,d&&d()}}function Jz(e,t){e.finalized||(e.finalized=!0)}function Xk({value:e,key:t,index:n},r=[]){return Ale([e,t,n,...r])}function Ale(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((n,r)=>n||ft("_".repeat(r+1),!1))}const UM=ft("undefined",!1),kle=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const n=Js(e,"slot");if(n)return n.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},Cle=(e,t,n,r)=>I0(e,n,!1,!0,n.length?n[0].loc:r);function Fle(e,t,n=Cle){t.helper(v4);const{children:r,loc:i}=e,s=[],a=[];let o=t.scopes.vSlot>0||t.scopes.vFor>0;const l=Js(e,"slot",!0);if(l){const{arg:m,exp:x}=l;m&&!Qi(m)&&(o=!0),s.push(In(m||ft("default",!0),n(x,void 0,r,i)))}let c=!1,u=!1;const f=[],h=new Set;let d=0;for(let m=0;m<r.length;m++){const x=r[m];let y;if(!Y_(x)||!(y=Js(x,"slot",!0))){x.type!==3&&f.push(x);continue}if(l){t.onError(mn(37,y.loc));break}c=!0;const{children:v,loc:_}=x,{arg:b=ft("default",!0),exp:w,loc:E}=y;let T;Qi(b)?T=b?b.content:"default":o=!0;const S=Js(x,"for"),A=n(w,S,v,_);let C,F;if(C=Js(x,"if"))o=!0,a.push(jk(C.exp,Ov(b,A,d++),UM));else if(F=Js(x,/^else(-if)?$/,!0)){let N=m,M;for(;N--&&(M=r[N],M.type===3););if(M&&Y_(M)&&Js(M,/^(else-)?if$/)){let O=a[a.length-1];for(;O.alternate.type===19;)O=O.alternate;O.alternate=F.exp?jk(F.exp,Ov(b,A,d++),UM):Ov(b,A,d++)}else t.onError(mn(30,F.loc))}else if(S){o=!0;const N=S.forParseResult;N?(Jz(N),a.push(Xn(t.helper(p4),[N.source,I0(Xk(N),Ov(b,A),!0)]))):t.onError(mn(32,S.loc))}else{if(T){if(h.has(T)){t.onError(mn(38,E));continue}h.add(T),T==="default"&&(u=!0)}s.push(In(b,A))}}if(!l){const m=(x,y)=>{const v=n(x,void 0,y,i);return t.compatConfig&&(v.isNonScopedSlot=!0),In("default",v)};c?f.length&&f.some(x=>Zz(x))&&(u?t.onError(mn(39,f[0].loc)):s.push(m(void 0,f))):s.push(m(void 0,r))}const p=o?2:Xy(e.children)?3:1;let g=na(s.concat(In("_",ft(p+"",!1))),i);return a.length&&(g=Xn(t.helper(Nz),[g,Xf(a)])),{slots:g,hasDynamicSlots:o}}function Ov(e,t,n){const r=[In("name",e),In("fn",t)];return n!=null&&r.push(In("key",ft(String(n),!0))),na(r)}function Xy(e){for(let t=0;t<e.length;t++){const n=e[t];switch(n.type){case 1:if(n.tagType===2||Xy(n.children))return!0;break;case 9:if(Xy(n.branches))return!0;break;case 10:case 11:if(Xy(n.children))return!0;break}}return!1}function Zz(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():Zz(e.content)}const Qz=new WeakMap,Ole=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:r,props:i}=e,s=e.tagType===1;let a=s?Nle(e,t):`"${r}"`;const o=Kt(a)&&a.callee===u4;let l,c,u=0,f,h,d,p=o||a===Sm||a===s4||!s&&(r==="svg"||r==="foreignObject"||r==="math");if(i.length>0){const g=eH(e,t,void 0,s,o);l=g.props,u=g.patchFlag,h=g.dynamicPropNames;const m=g.directives;d=m&&m.length?Xf(m.map(x=>Rle(x,t))):void 0,g.shouldUseBlock&&(p=!0)}if(e.children.length>0)if(a===j_&&(p=!0,u|=1024),s&&a!==Sm&&a!==j_){const{slots:m,hasDynamicSlots:x}=Fle(e,t);c=m,x&&(u|=1024)}else if(e.children.length===1&&a!==Sm){const m=e.children[0],x=m.type,y=x===5||x===8;y&&ws(m,t)===0&&(u|=1),y||x===2?c=m:c=e.children}else c=e.children;h&&h.length&&(f=Ile(h)),e.codegenNode=d1(t,a,l,c,u===0?void 0:u,f,d,!!p,!1,s,e.loc)};function Nle(e,t,n=!1){let{tag:r}=e;const i=Yk(r),s=pE(e,"is",!1,!0);if(s)if(i||Yf("COMPILER_IS_ON_ELEMENT",t)){let o;if(s.type===6?o=s.value&&ft(s.value.content,!0):(o=s.exp,o||(o=ft("is",!1,s.arg.loc))),o)return Xn(t.helper(u4),[o])}else s.type===6&&s.value.content.startsWith("vue:")&&(r=s.value.content.slice(4));const a=Iz(r)||t.isBuiltInComponent(r);return a?(n||t.helper(a),a):(t.helper(c4),t.components.add(r),g1(r,"component"))}function eH(e,t,n=e.props,r,i,s=!1){const{tag:a,loc:o,children:l}=e;let c=[];const u=[],f=[],h=l.length>0;let d=!1,p=0,g=!1,m=!1,x=!1,y=!1,v=!1,_=!1;const b=[],w=A=>{c.length&&(u.push(na(zM(c),o)),c=[]),A&&u.push(A)},E=()=>{t.scopes.vFor>0&&c.push(In(ft("ref_for",!0),ft("true")))},T=({key:A,value:C})=>{if(Qi(A)){const F=A.content,N=qh(F);if(N&&(!r||i)&&F.toLowerCase()!=="onclick"&&F!=="onUpdate:modelValue"&&!ru(F)&&(y=!0),N&&ru(F)&&(_=!0),N&&C.type===14&&(C=C.arguments[0]),C.type===20||(C.type===4||C.type===8)&&ws(C,t)>0)return;F==="ref"?g=!0:F==="class"?m=!0:F==="style"?x=!0:F!=="key"&&!b.includes(F)&&b.push(F),r&&(F==="class"||F==="style")&&!b.includes(F)&&b.push(F)}else v=!0};for(let A=0;A<n.length;A++){const C=n[A];if(C.type===6){const{loc:F,name:N,nameLoc:M,value:O}=C;let D=!0;if(N==="ref"&&(g=!0,E()),N==="is"&&(Yk(a)||O&&O.content.startsWith("vue:")||Yf("COMPILER_IS_ON_ELEMENT",t)))continue;c.push(In(ft(N,!0,M),ft(O?O.content:"",D,O?O.loc:F)))}else{const{name:F,arg:N,exp:M,loc:O,modifiers:D}=C,I=F==="bind",U=F==="on";if(F==="slot"){r||t.onError(mn(40,O));continue}if(F==="once"||F==="memo"||F==="is"||I&&Mf(N,"is")&&(Yk(a)||Yf("COMPILER_IS_ON_ELEMENT",t))||U&&s)continue;if((I&&Mf(N,"key")||U&&h&&Mf(N,"vue:before-update"))&&(d=!0),I&&Mf(N,"ref")&&E(),!N&&(I||U)){if(v=!0,M)if(I){if(E(),w(),Yf("COMPILER_V_BIND_OBJECT_ORDER",t)){u.unshift(M);continue}u.push(M)}else w({type:14,loc:O,callee:t.helper(x4),arguments:r?[M]:[M,"true"]});else t.onError(mn(I?34:35,O));continue}I&&D.some(X=>X.content==="prop")&&(p|=32);const Y=t.directiveTransforms[F];if(Y){const{props:X,needRuntime:de}=Y(C,e,t);!s&&X.forEach(T),U&&N&&!Qi(N)?w(na(X,o)):c.push(...X),de&&(f.push(C),is(de)&&Qz.set(C,de))}else Dre(F)||(f.push(C),h&&(d=!0))}}let S;if(u.length?(w(),u.length>1?S=Xn(t.helper(G_),u,o):S=u[0]):c.length&&(S=na(zM(c),o)),v?p|=16:(m&&!r&&(p|=2),x&&!r&&(p|=4),b.length&&(p|=8),y&&(p|=32)),!d&&(p===0||p===32)&&(g||_||f.length>0)&&(p|=512),!t.inSSR&&S)switch(S.type){case 15:let A=-1,C=-1,F=!1;for(let O=0;O<S.properties.length;O++){const D=S.properties[O].key;Qi(D)?D.content==="class"?A=O:D.content==="style"&&(C=O):D.isHandlerKey||(F=!0)}const N=S.properties[A],M=S.properties[C];F?S=Xn(t.helper(h1),[S]):(N&&!Qi(N.value)&&(N.value=Xn(t.helper(g4),[N.value])),M&&(x||M.value.type===4&&M.value.content.trim()[0]==="["||M.value.type===17)&&(M.value=Xn(t.helper(m4),[M.value])));break;case 14:break;default:S=Xn(t.helper(h1),[Xn(t.helper(lx),[S])]);break}return{props:S,directives:f,patchFlag:p,dynamicPropNames:b,shouldUseBlock:d}}function zM(e){const t=new Map,n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.key.type===8||!i.key.isStatic){n.push(i);continue}const s=i.key.content,a=t.get(s);a?(s==="style"||s==="class"||qh(s))&&Dle(a,i):(t.set(s,i),n.push(i))}return n}function Dle(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=Xf([e.value,t.value],e.loc)}function Rle(e,t){const n=[],r=Qz.get(e);r?n.push(t.helperString(r)):(t.helper(f4),t.directives.add(e.name),n.push(g1(e.name,"directive")));const{loc:i}=e;if(e.exp&&n.push(e.exp),e.arg&&(e.exp||n.push("void 0"),n.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||n.push("void 0"),n.push("void 0"));const s=ft("true",!1,i);n.push(na(e.modifiers.map(a=>In(a,s)),i))}return Xf(n,e.loc)}function Ile(e){let t="[";for(let n=0,r=e.length;n<r;n++)t+=JSON.stringify(e[n]),n<r-1&&(t+=", ");return t+"]"}function Yk(e){return e==="component"||e==="Component"}const $le=(e,t)=>{if(K_(e)){const{children:n,loc:r}=e,{slotName:i,slotProps:s}=Mle(e,t),a=[t.prefixIdentifiers?"_ctx.$slots":"$slots",i,"{}","undefined","true"];let o=2;s&&(a[2]=s,o=3),n.length&&(a[3]=I0([],n,!1,!1,r),o=4),t.scopeId&&!t.slotted&&(o=5),a.splice(o),e.codegenNode=Xn(t.helper(Oz),a,r)}};function Mle(e,t){let n='"default"',r;const i=[];for(let s=0;s<e.props.length;s++){const a=e.props[s];if(a.type===6)a.value&&(a.name==="name"?n=JSON.stringify(a.value.content):(a.name=fn(a.name),i.push(a)));else if(a.name==="bind"&&Mf(a.arg,"name")){if(a.exp)n=a.exp;else if(a.arg&&a.arg.type===4){const o=fn(a.arg.content);n=a.exp=ft(o,!1,a.arg.loc)}}else a.name==="bind"&&a.arg&&Qi(a.arg)&&(a.arg.content=fn(a.arg.content)),i.push(a)}if(i.length>0){const{props:s,directives:a}=eH(e,t,i,!1,!1);r=s,a.length&&t.onError(mn(36,a[0].loc))}return{slotName:n,slotProps:r}}const tH=(e,t,n,r)=>{const{loc:i,modifiers:s,arg:a}=e;!e.exp&&!s.length&&n.onError(mn(35,i));let o;if(a.type===4)if(a.isStatic){let f=a.content;f.startsWith("vue:")&&(f=`vnode-${f.slice(4)}`);const h=t.tagType!==0||f.startsWith("vnode")||!/[A-Z]/.test(f)?u0(fn(f)):`on:${f}`;o=ft(h,!0,a.loc)}else o=Ga([`${n.helperString(Wk)}(`,a,")"]);else o=a,o.children.unshift(`${n.helperString(Wk)}(`),o.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let c=n.cacheHandlers&&!l&&!n.inVOnce;if(l){const f=Mz(l),h=!(f||Roe(l)),d=l.content.includes(";");(h||c&&f)&&(l=Ga([`${h?"$event":"(...args)"} => ${d?"{":"("}`,l,d?"}":")"]))}let u={props:[In(o,l||ft("() => {}",!1,i))]};return r&&(u=r(u)),c&&(u.props[0].value=n.cache(u.props[0].value)),u.props.forEach(f=>f.key.isHandlerKey=!0),u},Lle=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const n=e.children;let r,i=!1;for(let s=0;s<n.length;s++){const a=n[s];if(rT(a)){i=!0;for(let o=s+1;o<n.length;o++){const l=n[o];if(rT(l))r||(r=n[s]=Ga([a],a.loc)),r.children.push(" + ",l),n.splice(o,1),o--;else{r=void 0;break}}}}if(!(!i||n.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(s=>s.type===7&&!t.directiveTransforms[s.name])&&e.tag!=="template")))for(let s=0;s<n.length;s++){const a=n[s];if(rT(a)||a.type===8){const o=[];(a.type!==2||a.content!==" ")&&o.push(a),!t.ssr&&ws(a,t)===0&&o.push("1"),n[s]={type:12,content:a,loc:a.loc,codegenNode:Xn(t.helper(l4),o)}}}}},HM=new WeakSet,Ple=(e,t)=>{if(e.type===1&&Js(e,"once",!0))return HM.has(e)||t.inVOnce||t.inSSR?void 0:(HM.add(e),t.inVOnce=!0,t.helper(q_),()=>{t.inVOnce=!1;const n=t.currentNode;n.codegenNode&&(n.codegenNode=t.cache(n.codegenNode,!0,!0))})},nH=(e,t,n)=>{const{exp:r,arg:i}=e;if(!r)return n.onError(mn(41,e.loc)),Nv();const s=r.loc.source.trim(),a=r.type===4?r.content:s,o=n.bindingMetadata[s];if(o==="props"||o==="props-aliased")return n.onError(mn(44,r.loc)),Nv();if(!a.trim()||!Mz(r))return n.onError(mn(42,r.loc)),Nv();const l=i||ft("modelValue",!0),c=i?Qi(i)?`onUpdate:${fn(i.content)}`:Ga(['"onUpdate:" + ',i]):"onUpdate:modelValue";let u;const f=n.isTS?"($event: any)":"$event";u=Ga([`${f} => ((`,r,") = $event)"]);const h=[In(l,e.exp),In(c,u)];if(e.modifiers.length&&t.tagType===1){const d=e.modifiers.map(g=>g.content).map(g=>(E4(g)?g:JSON.stringify(g))+": true").join(", "),p=i?Qi(i)?`${i.content}Modifiers`:Ga([i,' + "Modifiers"']):"modelModifiers";h.push(In(p,ft(`{ ${d} }`,!1,e.loc,2)))}return Nv(h)};function Nv(e=[]){return{props:e}}const Ble=/[\w).+\-_$\]]/,Ule=(e,t)=>{Yf("COMPILER_FILTERS",t)&&(e.type===5?Z_(e.content,t):e.type===1&&e.props.forEach(n=>{n.type===7&&n.name!=="for"&&n.exp&&Z_(n.exp,t)}))};function Z_(e,t){if(e.type===4)VM(e,t);else for(let n=0;n<e.children.length;n++){const r=e.children[n];typeof r=="object"&&(r.type===4?VM(r,t):r.type===8?Z_(e,t):r.type===5&&Z_(r.content,t))}}function VM(e,t){const n=e.content;let r=!1,i=!1,s=!1,a=!1,o=0,l=0,c=0,u=0,f,h,d,p,g=[];for(d=0;d<n.length;d++)if(h=f,f=n.charCodeAt(d),r)f===39&&h!==92&&(r=!1);else if(i)f===34&&h!==92&&(i=!1);else if(s)f===96&&h!==92&&(s=!1);else if(a)f===47&&h!==92&&(a=!1);else if(f===124&&n.charCodeAt(d+1)!==124&&n.charCodeAt(d-1)!==124&&!o&&!l&&!c)p===void 0?(u=d+1,p=n.slice(0,d).trim()):m();else{switch(f){case 34:i=!0;break;case 39:r=!0;break;case 96:s=!0;break;case 40:c++;break;case 41:c--;break;case 91:l++;break;case 93:l--;break;case 123:o++;break;case 125:o--;break}if(f===47){let x=d-1,y;for(;x>=0&&(y=n.charAt(x),y===" ");x--);(!y||!Ble.test(y))&&(a=!0)}}p===void 0?p=n.slice(0,d).trim():u!==0&&m();function m(){g.push(n.slice(u,d).trim()),u=d+1}if(g.length){for(d=0;d<g.length;d++)p=zle(p,g[d],t);e.content=p,e.ast=void 0}}function zle(e,t,n){n.helper(h4);const r=t.indexOf("(");if(r<0)return n.filters.add(t),`${g1(t,"filter")}(${e})`;{const i=t.slice(0,r),s=t.slice(r+1);return n.filters.add(i),`${g1(i,"filter")}(${e}${s!==")"?","+s:s}`}}const WM=new WeakSet,Hle=(e,t)=>{if(e.type===1){const n=Js(e,"memo");return!n||WM.has(e)?void 0:(WM.add(e),()=>{const r=e.codegenNode||t.currentNode.codegenNode;r&&r.type===13&&(e.tagType!==1&&_4(r,t),e.codegenNode=Xn(t.helper(y4),[n.exp,I0(void 0,r),"_cache",String(t.cached.length)]),t.cached.push(null))})}};function Vle(e){return[[Ple,_le,Hle,Sle,Ule,$le,Ole,kle,Lle],{on:tH,bind:wle,model:nH}]}function Wle(e,t={}){const n=t.onError||b4,r=t.mode==="module";t.prefixIdentifiers===!0?n(mn(47)):r&&n(mn(48));const i=!1;t.cacheHandlers&&n(mn(49)),t.scopeId&&!r&&n(mn(50));const s=Tt({},t,{prefixIdentifiers:i}),a=lt(e)?Joe(e,s):e,[o,l]=Vle();return tle(a,Tt({},s,{nodeTransforms:[...o,...t.nodeTransforms||[]],directiveTransforms:Tt({},l,t.directiveTransforms||{})})),sle(a,s)}const jle=()=>({props:[]});/**
* @vue/compiler-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const rH=Symbol(""),iH=Symbol(""),sH=Symbol(""),aH=Symbol(""),Kk=Symbol(""),oH=Symbol(""),lH=Symbol(""),cH=Symbol(""),uH=Symbol(""),fH=Symbol("");boe({[rH]:"vModelRadio",[iH]:"vModelCheckbox",[sH]:"vModelText",[aH]:"vModelSelect",[Kk]:"vModelDynamic",[oH]:"withModifiers",[lH]:"withKeys",[cH]:"vShow",[uH]:"Transition",[fH]:"TransitionGroup"});let Sd;function Gle(e,t=!1){return Sd||(Sd=document.createElement("div")),t?(Sd.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,Sd.children[0].getAttribute("foo")):(Sd.innerHTML=e,Sd.textContent)}const qle={parseMode:"html",isVoidTag:Yre,isNativeTag:e=>Gre(e)||qre(e)||Xre(e),isPreTag:e=>e==="pre",isIgnoreNewlineTag:e=>e==="pre"||e==="textarea",decodeEntities:Gle,isBuiltInComponent:e=>{if(e==="Transition"||e==="transition")return uH;if(e==="TransitionGroup"||e==="transition-group")return fH},getNamespace(e,t,n){let r=t?t.ns:n;if(t&&r===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(i=>i.type===6&&i.name==="encoding"&&i.value!=null&&(i.value.content==="text/html"||i.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(r=0);else t&&r===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(r=0);if(r===0){if(e==="svg")return 1;if(e==="math")return 2}return r}},Xle=e=>{e.type===1&&e.props.forEach((t,n)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[n]={type:7,name:"bind",arg:ft("style",!0,t.loc),exp:Yle(t.value.content,t.loc),modifiers:[],loc:t.loc})})},Yle=(e,t)=>{const n=SB(e);return ft(JSON.stringify(n),!1,t,3)};function ou(e,t){return mn(e,t)}const Kle=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(ou(53,i)),t.children.length&&(n.onError(ou(54,i)),t.children.length=0),{props:[In(ft("innerHTML",!0,i),r||ft("",!0))]}},Jle=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(ou(55,i)),t.children.length&&(n.onError(ou(56,i)),t.children.length=0),{props:[In(ft("textContent",!0),r?ws(r,n)>0?r:Xn(n.helperString(dE),[r],i):ft("",!0))]}},Zle=(e,t,n)=>{const r=nH(e,t,n);if(!r.props.length||t.tagType===1)return r;e.arg&&n.onError(ou(58,e.arg.loc));const{tag:i}=t,s=n.isCustomElement(i);if(i==="input"||i==="textarea"||i==="select"||s){let a=sH,o=!1;if(i==="input"||s){const l=pE(t,"type");if(l){if(l.type===7)a=Kk;else if(l.value)switch(l.value.content){case"radio":a=rH;break;case"checkbox":a=iH;break;case"file":o=!0,n.onError(ou(59,e.loc));break}}else Ioe(t)&&(a=Kk)}else i==="select"&&(a=aH);o||(r.needRuntime=n.helper(a))}else n.onError(ou(57,e.loc));return r.props=r.props.filter(a=>!(a.key.type===4&&a.key.content==="modelValue")),r},Qle=zs("passive,once,capture"),ece=zs("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),tce=zs("left,right"),hH=zs("onkeyup,onkeydown,onkeypress"),nce=(e,t,n,r)=>{const i=[],s=[],a=[];for(let o=0;o<t.length;o++){const l=t[o].content;l==="native"&&p1("COMPILER_V_ON_NATIVE",n)||Qle(l)?a.push(l):tce(l)?Qi(e)?hH(e.content.toLowerCase())?i.push(l):s.push(l):(i.push(l),s.push(l)):ece(l)?s.push(l):i.push(l)}return{keyModifiers:i,nonKeyModifiers:s,eventOptionModifiers:a}},jM=(e,t)=>Qi(e)&&e.content.toLowerCase()==="onclick"?ft(t,!0):e.type!==4?Ga(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,rce=(e,t,n)=>tH(e,t,n,r=>{const{modifiers:i}=e;if(!i.length)return r;let{key:s,value:a}=r.props[0];const{keyModifiers:o,nonKeyModifiers:l,eventOptionModifiers:c}=nce(s,i,n,e.loc);if(l.includes("right")&&(s=jM(s,"onContextmenu")),l.includes("middle")&&(s=jM(s,"onMouseup")),l.length&&(a=Xn(n.helper(oH),[a,JSON.stringify(l)])),o.length&&(!Qi(s)||hH(s.content.toLowerCase()))&&(a=Xn(n.helper(lH),[a,JSON.stringify(o)])),c.length){const u=c.map(Yh).join("");s=Qi(s)?ft(`${s.content}${u}`,!0):Ga(["(",s,`) + "${u}"`])}return{props:[In(s,a)]}}),ice=(e,t,n)=>{const{exp:r,loc:i}=e;return r||n.onError(ou(61,i)),{props:[],needRuntime:n.helper(cH)}},sce=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&t.removeNode()},ace=[Xle],oce={cloak:jle,html:Kle,text:Jle,model:Zle,on:rce,show:ice};function lce(e,t={}){return Wle(e,Tt({},qle,t,{nodeTransforms:[sce,...ace,...t.nodeTransforms||[]],directiveTransforms:Tt({},oce,t.directiveTransforms||{}),transformHoist:null}))}/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const GM=Object.create(null);function cce(e,t){if(!lt(e))if(e.nodeType)e=e.innerHTML;else return Or;const n=$re(e,t),r=GM[n];if(r)return r;if(e[0]==="#"){const o=document.querySelector(e);e=o?o.innerHTML:""}const i=Tt({hoistStatic:!0,onError:void 0,onWarn:Or},t);!i.isCustomElement&&typeof customElements<"u"&&(i.isCustomElement=o=>!!customElements.get(o));const{code:s}=lce(e,i),a=new Function("Vue",s)(goe);return a._rc=!0,GM[n]=a}ez(cce);/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let dH;const xE=e=>dH=e,pH=Symbol();function Jk(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Tm;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Tm||(Tm={}));function gH(){const e=P3(!0),t=e.run(()=>Jr({}));let n=[],r=[];const i=nE({install(s){xE(i),i._a=s,s.provide(pH,i),s.config.globalProperties.$pinia=i,r.forEach(a=>n.push(a)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const mH=()=>{};function qM(e,t,n,r=mH){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),r())};return!n&&B3()&&CB(i),i}function Td(e,...t){e.slice().forEach(n=>{n(...t)})}const uce=e=>e(),XM=Symbol(),sT=Symbol();function Zk(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Jk(i)&&Jk(r)&&e.hasOwnProperty(n)&&!wn(r)&&!Ro(r)?e[n]=Zk(i,r):e[n]=r}return e}const fce=Symbol();function hce(e){return!Jk(e)||!e.hasOwnProperty(fce)}const{assign:Oc}=Object;function dce(e){return!!(wn(e)&&e.effect)}function pce(e,t,n,r){const{state:i,actions:s,getters:a}=t,o=n.state.value[e];let l;function c(){o||(n.state.value[e]=i?i():{});const u=XB(n.state.value[e]);return Oc(u,s,Object.keys(a||{}).reduce((f,h)=>(f[h]=nE(au(()=>{xE(n);const d=n._s.get(e);return a[h].call(d,d)})),f),{}))}return l=xH(e,c,t,n,r,!0),l}function xH(e,t,n={},r,i,s){let a;const o=Oc({actions:{}},n),l={deep:!0};let c,u,f=[],h=[],d;const p=r.state.value[e];!s&&!p&&(r.state.value[e]={}),Jr({});let g;function m(T){let S;c=u=!1,typeof T=="function"?(T(r.state.value[e]),S={type:Tm.patchFunction,storeId:e,events:d}):(Zk(r.state.value[e],T),S={type:Tm.patchObject,payload:T,storeId:e,events:d});const A=g=Symbol();fh().then(()=>{g===A&&(c=!0)}),u=!0,Td(f,S,r.state.value[e])}const x=s?function(){const{state:S}=n,A=S?S():{};this.$patch(C=>{Oc(C,A)})}:mH;function y(){a.stop(),f=[],h=[],r._s.delete(e)}const v=(T,S="")=>{if(XM in T)return T[sT]=S,T;const A=function(){xE(r);const C=Array.from(arguments),F=[],N=[];function M(I){F.push(I)}function O(I){N.push(I)}Td(h,{args:C,name:A[sT],store:b,after:M,onError:O});let D;try{D=T.apply(this&&this.$id===e?this:b,C)}catch(I){throw Td(N,I),I}return D instanceof Promise?D.then(I=>(Td(F,I),I)).catch(I=>(Td(N,I),Promise.reject(I))):(Td(F,D),D)};return A[XM]=!0,A[sT]=S,A},_={_p:r,$id:e,$onAction:qM.bind(null,h),$patch:m,$reset:x,$subscribe(T,S={}){const A=qM(f,T,S.detached,()=>C()),C=a.run(()=>Fi(()=>r.state.value[e],F=>{(S.flush==="sync"?u:c)&&T({storeId:e,type:Tm.direct,events:d},F)},Oc({},l,S)));return A},$dispose:y},b=hs(_);r._s.set(e,b);const E=(r._a&&r._a.runWithContext||uce)(()=>r._e.run(()=>(a=P3()).run(()=>t({action:v}))));for(const T in E){const S=E[T];if(wn(S)&&!dce(S)||Ro(S))s||(p&&hce(S)&&(wn(S)?S.value=p[T]:Zk(S,p[T])),r.state.value[e][T]=S);else if(typeof S=="function"){const A=v(S,T);E[T]=A,o.actions[T]=S}}return Oc(b,E),Oc(kt(b),E),Object.defineProperty(b,"$state",{get:()=>r.state.value[e],set:T=>{m(S=>{Oc(S,T)})}}),r._p.forEach(T=>{Oc(b,a.run(()=>T({store:b,app:r._a,pinia:r,options:o})))}),p&&s&&n.hydrate&&n.hydrate(b.$state,p),c=!0,u=!0,b}/*! #__NO_SIDE_EFFECTS__ */function gce(e,t,n){let r;const i=typeof t=="function";r=i?n:t;function s(a,o){const l=wU();return a=a||(l?Gf(pH,null):null),a&&xE(a),a=dH,a._s.has(e)||(i?xH(e,t,r,a):pce(e,r,a)),a._s.get(e)}return s.$id=e,s}function zl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mce(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fp(e){let t,n,r;e.length!==2?(t=zl,n=(o,l)=>zl(e(o),l),r=(o,l)=>e(o)-l):(t=e===zl||e===mce?e:xce,n=e,r=e);function i(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<0?c=f+1:u=f}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(o[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function a(o,l,c=0,u=o.length){const f=i(o,l,c,u-1);return f>c&&r(o[f-1],l)>-r(o[f],l)?f-1:f}return{left:i,center:a,right:s}}function xce(){return 0}function vH(e){return e===null?NaN:+e}function*vce(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const yH=Fp(zl),vu=yH.right,yce=yH.left;Fp(vH).center;function _ce(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i));else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i))}if(n>1)return s/(n-1)}function bce(e,t){const n=_ce(e,t);return n&&Math.sqrt(n)}class Di{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],a=t+s,o=Math.abs(t)<Math.abs(s)?t-(a-s):s-(a-t);o&&(n[r++]=o),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,s=i-(a-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=a+i,i==r-a&&(a=r))}return a}}class YM extends Map{constructor(t,n=EH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Qk(this,t))}has(t){return super.has(Qk(this,t))}set(t,n){return super.set(_H(this,t),n)}delete(t){return super.delete(bH(this,t))}}class Q_ extends Set{constructor(t,n=EH){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Qk(this,t))}add(t){return super.add(_H(this,t))}delete(t){return super.delete(bH(this,t))}}function Qk({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function _H({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function bH({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function EH(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ece(e,t){return Array.from(t,n=>e[n])}function wce(e=zl){if(e===zl)return wH;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function wH(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Sce=Math.sqrt(50),Tce=Math.sqrt(10),Ace=Math.sqrt(2);function e2(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Sce?10:s>=Tce?5:s>=Ace?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?e2(e,t,n*2):[o,l,c]}function eC(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?e2(t,e,n):e2(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function tC(e,t,n){return t=+t,e=+e,n=+n,e2(e,t,n)[2]}function yu(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?tC(t,e,n):tC(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Kf(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function nC(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function SH(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?wH:wce(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/l+h)),p=Math.min(r,Math.floor(t+(l-c)*f/l+h));SH(e,t,d,p,i)}const s=e[t];let a=n,o=r;for(pg(e,n,t),i(e[r],s)>0&&pg(e,n,r);a<o;){for(pg(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}i(e[n],s)===0?pg(e,n,o):(++o,pg(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function pg(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function rC(e,t,n){if(e=Float64Array.from(vce(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return nC(e);if(t>=1)return Kf(e);var r,i=(r-1)*t,s=Math.floor(i),a=Kf(SH(e,s).subarray(0,s+1)),o=nC(e.subarray(s+1));return a+(o-a)*(i-s)}}function TH(e,t,n=vH){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e),o=+n(e[s+1],s+1,e);return a+(o-a)*(i-s)}}function Af(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function AH(e,t){return rC(e,.5,t)}function*kce(e){for(const t of e)yield*t}function kH(e){return Array.from(kce(e))}function Ss(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function CH(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Cce(e,...t){e=new Q_(e),t=t.map(Fce);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Fce(e){return e instanceof Q_?e:new Q_(e)}function Oce(...e){const t=new Q_;for(const n of e)for(const r of n)t.add(r);return t}var Nce={value:()=>{}};function T4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yy(n)}function Yy(e){this._=e}function Dce(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yy.prototype=T4.prototype={constructor:Yy,on:function(e,t){var n=this._,r=Dce(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=Rce(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=KM(n[i],e.name,t);else if(t==null)for(i in n)n[i]=KM(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yy(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Rce(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function KM(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Nce,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var iC="http://www.w3.org/1999/xhtml";const JM={svg:"http://www.w3.org/2000/svg",xhtml:iC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vE(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),JM.hasOwnProperty(t)?{space:JM[t],local:e}:e}function Ice(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===iC&&t.documentElement.namespaceURI===iC?t.createElement(e):t.createElementNS(n,e)}}function $ce(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function FH(e){var t=vE(e);return(t.local?$ce:Ice)(t)}function Mce(){}function A4(e){return e==null?Mce:function(){return this.querySelector(e)}}function Lce(e){typeof e!="function"&&(e=A4(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new Mi(r,this._parents)}function OH(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Pce(){return[]}function NH(e){return e==null?Pce:function(){return this.querySelectorAll(e)}}function Bce(e){return function(){return OH(e.apply(this,arguments))}}function Uce(e){typeof e=="function"?e=Bce(e):e=NH(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new Mi(r,i)}function DH(e){return function(){return this.matches(e)}}function RH(e){return function(t){return t.matches(e)}}var zce=Array.prototype.find;function Hce(e){return function(){return zce.call(this.children,e)}}function Vce(){return this.firstElementChild}function Wce(e){return this.select(e==null?Vce:Hce(typeof e=="function"?e:RH(e)))}var jce=Array.prototype.filter;function Gce(){return Array.from(this.children)}function qce(e){return function(){return jce.call(this.children,e)}}function Xce(e){return this.selectAll(e==null?Gce:qce(typeof e=="function"?e:RH(e)))}function Yce(e){typeof e!="function"&&(e=DH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new Mi(r,this._parents)}function IH(e){return new Array(e.length)}function Kce(){return new Mi(this._enter||this._groups.map(IH),this._parents)}function t2(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}t2.prototype={constructor:t2,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Jce(e){return function(){return e}}function Zce(e,t,n,r,i,s){for(var a=0,o,l=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new t2(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function Qce(e,t,n,r,i,s,a){var o,l,c=new Map,u=t.length,f=s.length,h=new Array(u),d;for(o=0;o<u;++o)(l=t[o])&&(h[o]=d=a.call(l,l.__data__,o,t)+"",c.has(d)?i[o]=l:c.set(d,l));for(o=0;o<f;++o)d=a.call(e,s[o],o,s)+"",(l=c.get(d))?(r[o]=l,l.__data__=s[o],c.delete(d)):n[o]=new t2(e,s[o]);for(o=0;o<u;++o)(l=t[o])&&c.get(h[o])===l&&(i[o]=l)}function eue(e){return e.__data__}function tue(e,t){if(!arguments.length)return Array.from(this,eue);var n=t?Qce:Zce,r=this._parents,i=this._groups;typeof e!="function"&&(e=Jce(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],h=f.length,d=nue(e.call(u,u&&u.__data__,c,r)),p=d.length,g=o[c]=new Array(p),m=a[c]=new Array(p),x=l[c]=new Array(h);n(u,f,g,m,x,d,t);for(var y=0,v=0,_,b;y<p;++y)if(_=g[y]){for(y>=v&&(v=y+1);!(b=m[v])&&++v<p;);_._next=b||null}}return a=new Mi(a,r),a._enter=o,a._exit=l,a}function nue(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rue(){return new Mi(this._exit||this._groups.map(IH),this._parents)}function iue(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function sue(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],f=c.length,h=o[l]=new Array(f),d,p=0;p<f;++p)(d=c[p]||u[p])&&(h[p]=d);for(;l<i;++l)o[l]=n[l];return new Mi(o,this._parents)}function aue(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function oue(e){e||(e=lue);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new Mi(i,this._parents).order()}function lue(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cue(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function uue(){return Array.from(this)}function fue(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function hue(){let e=0;for(const t of this)++e;return e}function due(){return!this.node()}function pue(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function gue(e){return function(){this.removeAttribute(e)}}function mue(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xue(e,t){return function(){this.setAttribute(e,t)}}function vue(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yue(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _ue(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function bue(e,t){var n=vE(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?mue:gue:typeof t=="function"?n.local?_ue:yue:n.local?vue:xue)(n,t))}function $H(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Eue(e){return function(){this.style.removeProperty(e)}}function wue(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Sue(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Tue(e,t,n){return arguments.length>1?this.each((t==null?Eue:typeof t=="function"?Sue:wue)(e,t,n??"")):L0(this.node(),e)}function L0(e,t){return e.style.getPropertyValue(t)||$H(e).getComputedStyle(e,null).getPropertyValue(t)}function Aue(e){return function(){delete this[e]}}function kue(e,t){return function(){this[e]=t}}function Cue(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Fue(e,t){return arguments.length>1?this.each((t==null?Aue:typeof t=="function"?Cue:kue)(e,t)):this.node()[e]}function MH(e){return e.trim().split(/^|\s+/)}function k4(e){return e.classList||new LH(e)}function LH(e){this._node=e,this._names=MH(e.getAttribute("class")||"")}LH.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function PH(e,t){for(var n=k4(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function BH(e,t){for(var n=k4(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Oue(e){return function(){PH(this,e)}}function Nue(e){return function(){BH(this,e)}}function Due(e,t){return function(){(t.apply(this,arguments)?PH:BH)(this,e)}}function Rue(e,t){var n=MH(e+"");if(arguments.length<2){for(var r=k4(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Due:t?Oue:Nue)(n,t))}function Iue(){this.textContent=""}function $ue(e){return function(){this.textContent=e}}function Mue(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Lue(e){return arguments.length?this.each(e==null?Iue:(typeof e=="function"?Mue:$ue)(e)):this.node().textContent}function Pue(){this.innerHTML=""}function Bue(e){return function(){this.innerHTML=e}}function Uue(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function zue(e){return arguments.length?this.each(e==null?Pue:(typeof e=="function"?Uue:Bue)(e)):this.node().innerHTML}function Hue(){this.nextSibling&&this.parentNode.appendChild(this)}function Vue(){return this.each(Hue)}function Wue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jue(){return this.each(Wue)}function Gue(e){var t=typeof e=="function"?e:FH(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function que(){return null}function Xue(e,t){var n=typeof e=="function"?e:FH(e),r=t==null?que:typeof t=="function"?t:A4(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Yue(){var e=this.parentNode;e&&e.removeChild(this)}function Kue(){return this.each(Yue)}function Jue(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zue(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Que(e){return this.select(e?Zue:Jue)}function efe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tfe(e){return function(t){e.call(this,t,this.__data__)}}function nfe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function rfe(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function ife(e,t,n){return function(){var r=this.__on,i,s=tfe(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function sfe(e,t,n){var r=nfe(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?ife:rfe,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function UH(e,t,n){var r=$H(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function afe(e,t){return function(){return UH(this,e,t)}}function ofe(e,t){return function(){return UH(this,e,t.apply(this,arguments))}}function lfe(e,t){return this.each((typeof t=="function"?ofe:afe)(e,t))}function*cfe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var C4=[null];function Mi(e,t){this._groups=e,this._parents=t}function ux(){return new Mi([[document.documentElement]],C4)}function ufe(){return this}Mi.prototype=ux.prototype={constructor:Mi,select:Lce,selectAll:Uce,selectChild:Wce,selectChildren:Xce,filter:Yce,data:tue,enter:Kce,exit:rue,join:iue,merge:sue,selection:ufe,order:aue,sort:oue,call:cue,nodes:uue,node:fue,size:hue,empty:due,each:pue,attr:bue,style:Tue,property:Fue,classed:Rue,text:Lue,html:zue,raise:Vue,lower:jue,append:Gue,insert:Xue,remove:Kue,clone:Que,datum:efe,on:sfe,dispatch:lfe,[Symbol.iterator]:cfe};function hf(e){return typeof e=="string"?new Mi([[document.querySelector(e)]],[document.documentElement]):new Mi([[e]],C4)}function ffe(e){return typeof e=="string"?new Mi([document.querySelectorAll(e)],[document.documentElement]):new Mi([OH(e)],C4)}function Op(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function fx(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Hu(){}var xh=.7,P0=1/xh,p0="\\s*([+-]?\\d+)\\s*",x1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Io="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hfe=/^#([0-9a-f]{3,8})$/,dfe=new RegExp(`^rgb\\(${p0},${p0},${p0}\\)$`),pfe=new RegExp(`^rgb\\(${Io},${Io},${Io}\\)$`),gfe=new RegExp(`^rgba\\(${p0},${p0},${p0},${x1}\\)$`),mfe=new RegExp(`^rgba\\(${Io},${Io},${Io},${x1}\\)$`),xfe=new RegExp(`^hsl\\(${x1},${Io},${Io}\\)$`),vfe=new RegExp(`^hsla\\(${x1},${Io},${Io},${x1}\\)$`),ZM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Op(Hu,vh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:QM,formatHex:QM,formatHex8:yfe,formatHsl:_fe,formatRgb:e6,toString:e6});function QM(){return this.rgb().formatHex()}function yfe(){return this.rgb().formatHex8()}function _fe(){return zH(this).formatHsl()}function e6(){return this.rgb().formatRgb()}function vh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hfe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?t6(t):n===3?new ur(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dfe.exec(e))?new ur(t[1],t[2],t[3],1):(t=pfe.exec(e))?new ur(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gfe.exec(e))?Dv(t[1],t[2],t[3],t[4]):(t=mfe.exec(e))?Dv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xfe.exec(e))?i6(t[1],t[2]/100,t[3]/100,1):(t=vfe.exec(e))?i6(t[1],t[2]/100,t[3]/100,t[4]):ZM.hasOwnProperty(e)?t6(ZM[e]):e==="transparent"?new ur(NaN,NaN,NaN,0):null}function t6(e){return new ur(e>>16&255,e>>8&255,e&255,1)}function Dv(e,t,n,r){return r<=0&&(e=t=n=NaN),new ur(e,t,n,r)}function F4(e){return e instanceof Hu||(e=vh(e)),e?(e=e.rgb(),new ur(e.r,e.g,e.b,e.opacity)):new ur}function _u(e,t,n,r){return arguments.length===1?F4(e):new ur(e,t,n,r??1)}function ur(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Op(ur,_u,fx(Hu,{brighter(e){return e=e==null?P0:Math.pow(P0,e),new ur(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xh:Math.pow(xh,e),new ur(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ur(Jf(this.r),Jf(this.g),Jf(this.b),n2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:n6,formatHex:n6,formatHex8:bfe,formatRgb:r6,toString:r6}));function n6(){return`#${Pf(this.r)}${Pf(this.g)}${Pf(this.b)}`}function bfe(){return`#${Pf(this.r)}${Pf(this.g)}${Pf(this.b)}${Pf((isNaN(this.opacity)?1:this.opacity)*255)}`}function r6(){const e=n2(this.opacity);return`${e===1?"rgb(":"rgba("}${Jf(this.r)}, ${Jf(this.g)}, ${Jf(this.b)}${e===1?")":`, ${e})`}`}function n2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pf(e){return e=Jf(e),(e<16?"0":"")+e.toString(16)}function i6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new La(e,t,n,r)}function zH(e){if(e instanceof La)return new La(e.h,e.s,e.l,e.opacity);if(e instanceof Hu||(e=vh(e)),!e)return new La;if(e instanceof La)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new La(a,o,l,e.opacity)}function r2(e,t,n,r){return arguments.length===1?zH(e):new La(e,t,n,r??1)}function La(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Op(La,r2,fx(Hu,{brighter(e){return e=e==null?P0:Math.pow(P0,e),new La(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xh:Math.pow(xh,e),new La(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ur(aT(e>=240?e-240:e+120,i,r),aT(e,i,r),aT(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new La(s6(this.h),Rv(this.s),Rv(this.l),n2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=n2(this.opacity);return`${e===1?"hsl(":"hsla("}${s6(this.h)}, ${Rv(this.s)*100}%, ${Rv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function s6(e){return e=(e||0)%360,e<0?e+360:e}function Rv(e){return Math.max(0,Math.min(1,e||0))}function aT(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const HH=Math.PI/180,VH=180/Math.PI,i2=18,WH=.96422,jH=1,GH=.82521,qH=4/29,g0=6/29,XH=3*g0*g0,Efe=g0*g0*g0;function YH(e){if(e instanceof $o)return new $o(e.l,e.a,e.b,e.opacity);if(e instanceof Dl)return KH(e);e instanceof ur||(e=F4(e));var t=uT(e.r),n=uT(e.g),r=uT(e.b),i=oT((.2225045*t+.7168786*n+.0606169*r)/jH),s,a;return t===n&&n===r?s=a=i:(s=oT((.4360747*t+.3850649*n+.1430804*r)/WH),a=oT((.0139322*t+.0971045*n+.7141733*r)/GH)),new $o(116*i-16,500*(s-i),200*(i-a),e.opacity)}function s2(e,t,n,r){return arguments.length===1?YH(e):new $o(e,t,n,r??1)}function $o(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Op($o,s2,fx(Hu,{brighter(e){return new $o(this.l+i2*(e??1),this.a,this.b,this.opacity)},darker(e){return new $o(this.l-i2*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=WH*lT(t),e=jH*lT(e),n=GH*lT(n),new ur(cT(3.1338561*t-1.6168667*e-.4906146*n),cT(-.9787684*t+1.9161415*e+.033454*n),cT(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function oT(e){return e>Efe?Math.pow(e,1/3):e/XH+qH}function lT(e){return e>g0?e*e*e:XH*(e-qH)}function cT(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function uT(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wfe(e){if(e instanceof Dl)return new Dl(e.h,e.c,e.l,e.opacity);if(e instanceof $o||(e=YH(e)),e.a===0&&e.b===0)return new Dl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*VH;return new Dl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function a2(e,t,n,r){return arguments.length===1?wfe(e):new Dl(e,t,n,r??1)}function Dl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function KH(e){if(isNaN(e.h))return new $o(e.l,0,0,e.opacity);var t=e.h*HH;return new $o(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Op(Dl,a2,fx(Hu,{brighter(e){return new Dl(this.h,this.c,this.l+i2*(e??1),this.opacity)},darker(e){return new Dl(this.h,this.c,this.l-i2*(e??1),this.opacity)},rgb(){return KH(this).rgb()}}));var JH=-.14861,O4=1.78277,N4=-.29227,yE=-.90649,v1=1.97294,a6=v1*yE,o6=v1*O4,l6=O4*N4-yE*JH;function Sfe(e){if(e instanceof Zf)return new Zf(e.h,e.s,e.l,e.opacity);e instanceof ur||(e=F4(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(l6*r+a6*t-o6*n)/(l6+a6-o6),s=r-i,a=(v1*(n-i)-N4*s)/yE,o=Math.sqrt(a*a+s*s)/(v1*i*(1-i)),l=o?Math.atan2(a,s)*VH-120:NaN;return new Zf(l<0?l+360:l,o,i,e.opacity)}function sC(e,t,n,r){return arguments.length===1?Sfe(e):new Zf(e,t,n,r??1)}function Zf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Op(Zf,sC,fx(Hu,{brighter(e){return e=e==null?P0:Math.pow(P0,e),new Zf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xh:Math.pow(xh,e),new Zf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*HH,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ur(255*(t+n*(JH*r+O4*i)),255*(t+n*(N4*r+yE*i)),255*(t+n*(v1*r)),this.opacity)}}));function ZH(e,t,n,r,i){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*r+a*i)/6}function QH(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],a=r>0?e[r-1]:2*i-s,o=r<t-1?e[r+2]:2*s-i;return ZH((n-r/t)*t,a,i,s,o)}}function eV(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],a=e[(r+1)%t],o=e[(r+2)%t];return ZH((n-r/t)*t,i,s,a,o)}}const _E=e=>()=>e;function tV(e,t){return function(n){return e+n*t}}function Tfe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bE(e,t){var n=t-e;return n?tV(e,n>180||n<-180?n-360*Math.round(n/360):n):_E(isNaN(e)?t:e)}function Afe(e){return(e=+e)==1?fr:function(t,n){return n-t?Tfe(t,n,e):_E(isNaN(t)?n:t)}}function fr(e,t){var n=t-e;return n?tV(e,n):_E(isNaN(e)?t:e)}const y1=function e(t){var n=Afe(t);function r(i,s){var a=n((i=_u(i)).r,(s=_u(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=fr(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function nV(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=_u(t[a]),r[a]=o.r||0,i[a]=o.g||0,s[a]=o.b||0;return r=e(r),i=e(i),s=e(s),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=s(l),o+""}}}var kfe=nV(QH),Cfe=nV(eV);function D4(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function rV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ffe(e,t){return(rV(t)?D4:iV)(e,t)}function iV(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Vu(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function sV(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Zs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function aV(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Vu(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var aC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fT=new RegExp(aC.source,"g");function Ofe(e){return function(){return e}}function Nfe(e){return function(t){return e(t)+""}}function R4(e,t){var n=aC.lastIndex=fT.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=aC.exec(e))&&(i=fT.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Zs(r,i)})),n=fT.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Nfe(l[0].x):Ofe(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)o[(f=l[u]).i]=f.x(c);return o.join("")})}function Vu(e,t){var n=typeof t,r;return t==null||n==="boolean"?_E(t):(n==="number"?Zs:n==="string"?(r=vh(t))?(t=r,y1):R4:t instanceof vh?y1:t instanceof Date?sV:rV(t)?D4:Array.isArray(t)?iV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?aV:Zs)(e,t)}function Dfe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Rfe(e,t){var n=bE(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function hx(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var c6=180/Math.PI,oC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oV(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*c6,skewX:Math.atan(l)*c6,scaleX:a,scaleY:o}}var Iv;function Ife(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?oC:oV(t.a,t.b,t.c,t.d,t.e,t.f)}function $fe(e){return e==null||(Iv||(Iv=document.createElementNS("http://www.w3.org/2000/svg","g")),Iv.setAttribute("transform",e),!(e=Iv.transform.baseVal.consolidate()))?oC:(e=e.matrix,oV(e.a,e.b,e.c,e.d,e.e,e.f))}function lV(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,h,d,p){if(c!==f||u!==h){var g=d.push("translate(",null,t,null,n);p.push({i:g-4,x:Zs(c,f)},{i:g-2,x:Zs(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function a(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Zs(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function o(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Zs(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,d,p){if(c!==f||u!==h){var g=d.push(i(d)+"scale(",null,",",null,")");p.push({i:g-4,x:Zs(c,f)},{i:g-2,x:Zs(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,h),a(c.rotate,u.rotate,f,h),o(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(d){for(var p=-1,g=h.length,m;++p<g;)f[(m=h[p]).i]=m.x(d);return f.join("")}}}var cV=lV(Ife,"px, ","px)","deg)"),uV=lV($fe,", ",")",")"),Mfe=1e-12;function u6(e){return((e=Math.exp(e))+1/e)/2}function Lfe(e){return((e=Math.exp(e))-1/e)/2}function Pfe(e){return((e=Math.exp(2*e))-1)/(e+1)}const Bfe=function e(t,n,r){function i(s,a){var o=s[0],l=s[1],c=s[2],u=a[0],f=a[1],h=a[2],d=u-o,p=f-l,g=d*d+p*p,m,x;if(g<Mfe)x=Math.log(h/c)/t,m=function(E){return[o+E*d,l+E*p,c*Math.exp(t*E*x)]};else{var y=Math.sqrt(g),v=(h*h-c*c+r*g)/(2*c*n*y),_=(h*h-c*c-r*g)/(2*h*n*y),b=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(_*_+1)-_);x=(w-b)/t,m=function(E){var T=E*x,S=u6(b),A=c/(n*y)*(S*Pfe(t*T+b)-Lfe(b));return[o+A*d,l+A*p,c*S/u6(t*T+b)]}}return m.duration=x*1e3*t/Math.SQRT2,m}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,l=o*o;return e(a,o,l)},i}(Math.SQRT2,2,4);function fV(e){return function(t,n){var r=e((t=r2(t)).h,(n=r2(n)).h),i=fr(t.s,n.s),s=fr(t.l,n.l),a=fr(t.opacity,n.opacity);return function(o){return t.h=r(o),t.s=i(o),t.l=s(o),t.opacity=a(o),t+""}}}const Ufe=fV(bE);var zfe=fV(fr);function Hfe(e,t){var n=fr((e=s2(e)).l,(t=s2(t)).l),r=fr(e.a,t.a),i=fr(e.b,t.b),s=fr(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=s(a),e+""}}function hV(e){return function(t,n){var r=e((t=a2(t)).h,(n=a2(n)).h),i=fr(t.c,n.c),s=fr(t.l,n.l),a=fr(t.opacity,n.opacity);return function(o){return t.h=r(o),t.c=i(o),t.l=s(o),t.opacity=a(o),t+""}}}const Vfe=hV(bE);var Wfe=hV(fr);function dV(e){return function t(n){n=+n;function r(i,s){var a=e((i=sC(i)).h,(s=sC(s)).h),o=fr(i.s,s.s),l=fr(i.l,s.l),c=fr(i.opacity,s.opacity);return function(u){return i.h=a(u),i.s=o(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}const jfe=dV(bE);var Gfe=dV(fr);function I4(e,t){t===void 0&&(t=e,e=Vu);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function qfe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Xfe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Vu,interpolateArray:Ffe,interpolateBasis:QH,interpolateBasisClosed:eV,interpolateCubehelix:jfe,interpolateCubehelixLong:Gfe,interpolateDate:sV,interpolateDiscrete:Dfe,interpolateHcl:Vfe,interpolateHclLong:Wfe,interpolateHsl:Ufe,interpolateHslLong:zfe,interpolateHue:Rfe,interpolateLab:Hfe,interpolateNumber:Zs,interpolateNumberArray:D4,interpolateObject:aV,interpolateRgb:y1,interpolateRgbBasis:kfe,interpolateRgbBasisClosed:Cfe,interpolateRound:hx,interpolateString:R4,interpolateTransformCss:cV,interpolateTransformSvg:uV,interpolateZoom:Bfe,piecewise:I4,quantize:qfe},Symbol.toStringTag,{value:"Module"}));var B0=0,jg=0,gg=0,pV=1e3,o2,Gg,l2=0,yh=0,EE=0,_1=typeof performance=="object"&&performance.now?performance:Date,gV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function wE(){return yh||(gV(Yfe),yh=_1.now()+EE)}function Yfe(){yh=0}function b1(){this._call=this._time=this._next=null}b1.prototype=$4.prototype={constructor:b1,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?wE():+n)+(t==null?0:+t),!this._next&&Gg!==this&&(Gg?Gg._next=this:o2=this,Gg=this),this._call=e,this._time=n,lC()},stop:function(){this._call&&(this._call=null,this._time=1/0,lC())}};function $4(e,t,n){var r=new b1;return r.restart(e,t,n),r}function Kfe(){wE(),++B0;for(var e=o2,t;e;)(t=yh-e._time)>=0&&e._call.call(void 0,t),e=e._next;--B0}function f6(){yh=(l2=_1.now())+EE,B0=jg=0;try{Kfe()}finally{B0=0,Zfe(),yh=0}}function Jfe(){var e=_1.now(),t=e-l2;t>pV&&(EE-=t,l2=e)}function Zfe(){for(var e,t=o2,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:o2=n);Gg=e,lC(r)}function lC(e){if(!B0){jg&&(jg=clearTimeout(jg));var t=e-yh;t>24?(e<1/0&&(jg=setTimeout(f6,e-_1.now()-EE)),gg&&(gg=clearInterval(gg))):(gg||(l2=_1.now(),gg=setInterval(Jfe,pV)),B0=1,gV(f6))}}function h6(e,t,n){var r=new b1;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Qfe(e,t,n){var r=new b1,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,a,o){a=+a,o=o==null?wE():+o,r._restart(function l(c){c+=i,r._restart(l,i+=a,o),s(c)},a,o)},r.restart(e,t,n),r)}var ehe=T4("start","end","cancel","interrupt"),the=[],mV=0,d6=1,cC=2,Ky=3,p6=4,uC=5,Jy=6;function SE(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;nhe(e,n,{name:t,index:r,group:i,on:ehe,tween:the,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:mV})}function M4(e,t){var n=ro(e,t);if(n.state>mV)throw new Error("too late; already scheduled");return n}function Qo(e,t){var n=ro(e,t);if(n.state>Ky)throw new Error("too late; already running");return n}function ro(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nhe(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=$4(s,0,n.time);function s(c){n.state=d6,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,f,h,d;if(n.state!==d6)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Ky)return h6(a);d.state===p6?(d.state=Jy,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[u]):+u<t&&(d.state=Jy,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[u])}if(h6(function(){n.state===Ky&&(n.state=p6,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=cC,n.on.call("start",e,e.__data__,n.index,n.group),n.state===cC){for(n.state=Ky,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=uC,1),f=-1,h=i.length;++f<h;)i[f].call(e,u);n.state===uC&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Jy,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function rhe(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>cC&&r.state<uC,r.state=Jy,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function ihe(e){return this.each(function(){rhe(this,e)})}function she(e,t){var n,r;return function(){var i=Qo(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function ahe(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Qo(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function ohe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ro(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?she:ahe)(n,e,t))}function L4(e,t,n){var r=e._id;return e.each(function(){var i=Qo(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ro(i,r).value[t]}}function xV(e,t){var n;return(typeof t=="number"?Zs:t instanceof vh?y1:(n=vh(t))?(t=n,y1):R4)(e,t)}function lhe(e){return function(){this.removeAttribute(e)}}function che(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uhe(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function fhe(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function hhe(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function dhe(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function phe(e,t){var n=vE(e),r=n==="transform"?uV:xV;return this.attrTween(e,typeof t=="function"?(n.local?dhe:hhe)(n,r,L4(this,"attr."+e,t)):t==null?(n.local?che:lhe)(n):(n.local?fhe:uhe)(n,r,t))}function ghe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mhe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xhe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&mhe(e,s)),n}return i._value=t,i}function vhe(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ghe(e,s)),n}return i._value=t,i}function yhe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=vE(e);return this.tween(n,(r.local?xhe:vhe)(r,t))}function _he(e,t){return function(){M4(this,e).delay=+t.apply(this,arguments)}}function bhe(e,t){return t=+t,function(){M4(this,e).delay=t}}function Ehe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_he:bhe)(t,e)):ro(this.node(),t).delay}function whe(e,t){return function(){Qo(this,e).duration=+t.apply(this,arguments)}}function She(e,t){return t=+t,function(){Qo(this,e).duration=t}}function The(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?whe:She)(t,e)):ro(this.node(),t).duration}function Ahe(e,t){if(typeof t!="function")throw new Error;return function(){Qo(this,e).ease=t}}function khe(e){var t=this._id;return arguments.length?this.each(Ahe(t,e)):ro(this.node(),t).ease}function Che(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qo(this,e).ease=n}}function Fhe(e){if(typeof e!="function")throw new Error;return this.each(Che(this._id,e))}function Ohe(e){typeof e!="function"&&(e=DH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new tc(r,this._parents,this._name,this._id)}function Nhe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],c=n[o],u=l.length,f=a[o]=new Array(u),h,d=0;d<u;++d)(h=l[d]||c[d])&&(f[d]=h);for(;o<r;++o)a[o]=t[o];return new tc(a,this._parents,this._name,this._id)}function Dhe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Rhe(e,t,n){var r,i,s=Dhe(t)?M4:Qo;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function Ihe(e,t){var n=this._id;return arguments.length<2?ro(this.node(),n).on.on(e):this.each(Rhe(n,e,t))}function $he(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Mhe(){return this.on("end.remove",$he(this._id))}function Lhe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=A4(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,f,h=0;h<l;++h)(u=o[h])&&(f=e.call(u,u.__data__,h,o))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,SE(c[h],t,n,h,c,ro(u,n)));return new tc(s,this._parents,t,n)}function Phe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=NH(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),d,p=ro(u,n),g=0,m=h.length;g<m;++g)(d=h[g])&&SE(d,t,n,g,h,p);s.push(h),a.push(u)}return new tc(s,a,t,n)}var Bhe=ux.prototype.constructor;function Uhe(){return new Bhe(this._groups,this._parents)}function zhe(e,t){var n,r,i;return function(){var s=L0(this,e),a=(this.style.removeProperty(e),L0(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function vV(e){return function(){this.style.removeProperty(e)}}function Hhe(e,t,n){var r,i=n+"",s;return function(){var a=L0(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function Vhe(e,t,n){var r,i,s;return function(){var a=L0(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),L0(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o))}}function Whe(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var l=Qo(this,e),c=l.on,u=l.value[s]==null?o||(o=vV(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function jhe(e,t,n){var r=(e+="")=="transform"?cV:xV;return t==null?this.styleTween(e,zhe(e,r)).on("end.style."+e,vV(e)):typeof t=="function"?this.styleTween(e,Vhe(e,r,L4(this,"style."+e,t))).each(Whe(this._id,e)):this.styleTween(e,Hhe(e,r,t),n).on("end.style."+e,null)}function Ghe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function qhe(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Ghe(e,a,n)),r}return s._value=t,s}function Xhe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,qhe(e,t,n??""))}function Yhe(e){return function(){this.textContent=e}}function Khe(e){return function(){var t=e(this);this.textContent=t??""}}function Jhe(e){return this.tween("text",typeof e=="function"?Khe(L4(this,"text",e)):Yhe(e==null?"":e+""))}function Zhe(e){return function(t){this.textContent=e.call(this,t)}}function Qhe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Zhe(i)),t}return r._value=e,r}function ede(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qhe(e))}function tde(){for(var e=this._name,t=this._id,n=yV(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=ro(l,t);SE(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new tc(r,this._parents,e,n)}function nde(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=Qo(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),i===0&&s()})}var rde=0;function tc(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function yV(){return++rde}var ml=ux.prototype;tc.prototype={constructor:tc,select:Lhe,selectAll:Phe,selectChild:ml.selectChild,selectChildren:ml.selectChildren,filter:Ohe,merge:Nhe,selection:Uhe,transition:tde,call:ml.call,nodes:ml.nodes,node:ml.node,size:ml.size,empty:ml.empty,each:ml.each,on:Ihe,attr:phe,attrTween:yhe,style:jhe,styleTween:Xhe,text:Jhe,textTween:ede,remove:Mhe,tween:ohe,delay:Ehe,duration:The,ease:khe,easeVarying:Fhe,end:nde,[Symbol.iterator]:ml[Symbol.iterator]};function Zy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ide={time:null,delay:0,duration:250,ease:Zy};function sde(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ade(e){var t,n;e instanceof tc?(t=e._id,e=e._name):(t=yV(),(n=ide).time=wE(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&SE(l,e,t,c,a,n||sde(l,t));return new tc(r,this._parents,e,t)}ux.prototype.interrupt=ihe;ux.prototype.transition=ade;const fC=Math.PI,hC=2*fC,kf=1e-6,ode=hC-kf;function _V(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function lde(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _V;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let P4=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?_V:lde(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-t,c=i-n,u=a-t,f=o-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>kf)if(!(Math.abs(f*l-c*u)>kf)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-a,p=i-o,g=l*l+c*c,m=d*d+p*p,x=Math.sqrt(g),y=Math.sqrt(h),v=s*Math.tan((fC-Math.acos((g+h-m)/(2*x*y)))/2),_=v/y,b=v/x;Math.abs(_-1)>kf&&this._append`L${t+_*u},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*d>u*p)},${this._x1=t+b*l},${this._y1=n+b*c}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=t+o,u=n+l,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>kf||Math.abs(this._y1-u)>kf)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%hC+hC),h>ode?this._append`A${r},${r},0,1,${f},${t-o},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>kf&&this._append`A${r},${r},0,${+(h>=fC)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function TE(){return new P4}TE.prototype=P4.prototype;const Hl=11102230246251565e-32,Br=134217729,cde=(3+8*Hl)*Hl;function hT(e,t,n,r,i){let s,a,o,l,c=t[0],u=r[0],f=0,h=0;u>c==u>-c?(s=c,c=t[++f]):(s=u,u=r[++h]);let d=0;if(f<e&&h<n)for(u>c==u>-c?(a=c+s,o=s-(a-c),c=t[++f]):(a=u+s,o=s-(a-u),u=r[++h]),s=a,o!==0&&(i[d++]=o);f<e&&h<n;)u>c==u>-c?(a=s+c,l=a-s,o=s-(a-l)+(c-l),c=t[++f]):(a=s+u,l=a-s,o=s-(a-l)+(u-l),u=r[++h]),s=a,o!==0&&(i[d++]=o);for(;f<e;)a=s+c,l=a-s,o=s-(a-l)+(c-l),c=t[++f],s=a,o!==0&&(i[d++]=o);for(;h<n;)a=s+u,l=a-s,o=s-(a-l)+(u-l),u=r[++h],s=a,o!==0&&(i[d++]=o);return(s!==0||d===0)&&(i[d++]=s),d}function ude(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function dx(e){return new Float64Array(e)}const fde=(3+16*Hl)*Hl,hde=(2+12*Hl)*Hl,dde=(9+64*Hl)*Hl*Hl,Ad=dx(4),g6=dx(8),m6=dx(12),x6=dx(16),pi=dx(4);function pde(e,t,n,r,i,s,a){let o,l,c,u,f,h,d,p,g,m,x,y,v,_,b,w,E,T;const S=e-i,A=n-i,C=t-s,F=r-s;_=S*F,h=Br*S,d=h-(h-S),p=S-d,h=Br*F,g=h-(h-F),m=F-g,b=p*m-(_-d*g-p*g-d*m),w=C*A,h=Br*C,d=h-(h-C),p=C-d,h=Br*A,g=h-(h-A),m=A-g,E=p*m-(w-d*g-p*g-d*m),x=b-E,f=b-x,Ad[0]=b-(x+f)+(f-E),y=_+x,f=y-_,v=_-(y-f)+(x-f),x=v-w,f=v-x,Ad[1]=v-(x+f)+(f-w),T=y+x,f=T-y,Ad[2]=y-(T-f)+(x-f),Ad[3]=T;let N=ude(4,Ad),M=hde*a;if(N>=M||-N>=M||(f=e-S,o=e-(S+f)+(f-i),f=n-A,c=n-(A+f)+(f-i),f=t-C,l=t-(C+f)+(f-s),f=r-F,u=r-(F+f)+(f-s),o===0&&l===0&&c===0&&u===0)||(M=dde*a+cde*Math.abs(N),N+=S*u+F*o-(C*c+A*l),N>=M||-N>=M))return N;_=o*F,h=Br*o,d=h-(h-o),p=o-d,h=Br*F,g=h-(h-F),m=F-g,b=p*m-(_-d*g-p*g-d*m),w=l*A,h=Br*l,d=h-(h-l),p=l-d,h=Br*A,g=h-(h-A),m=A-g,E=p*m-(w-d*g-p*g-d*m),x=b-E,f=b-x,pi[0]=b-(x+f)+(f-E),y=_+x,f=y-_,v=_-(y-f)+(x-f),x=v-w,f=v-x,pi[1]=v-(x+f)+(f-w),T=y+x,f=T-y,pi[2]=y-(T-f)+(x-f),pi[3]=T;const O=hT(4,Ad,4,pi,g6);_=S*u,h=Br*S,d=h-(h-S),p=S-d,h=Br*u,g=h-(h-u),m=u-g,b=p*m-(_-d*g-p*g-d*m),w=C*c,h=Br*C,d=h-(h-C),p=C-d,h=Br*c,g=h-(h-c),m=c-g,E=p*m-(w-d*g-p*g-d*m),x=b-E,f=b-x,pi[0]=b-(x+f)+(f-E),y=_+x,f=y-_,v=_-(y-f)+(x-f),x=v-w,f=v-x,pi[1]=v-(x+f)+(f-w),T=y+x,f=T-y,pi[2]=y-(T-f)+(x-f),pi[3]=T;const D=hT(O,g6,4,pi,m6);_=o*u,h=Br*o,d=h-(h-o),p=o-d,h=Br*u,g=h-(h-u),m=u-g,b=p*m-(_-d*g-p*g-d*m),w=l*c,h=Br*l,d=h-(h-l),p=l-d,h=Br*c,g=h-(h-c),m=c-g,E=p*m-(w-d*g-p*g-d*m),x=b-E,f=b-x,pi[0]=b-(x+f)+(f-E),y=_+x,f=y-_,v=_-(y-f)+(x-f),x=v-w,f=v-x,pi[1]=v-(x+f)+(f-w),T=y+x,f=T-y,pi[2]=y-(T-f)+(x-f),pi[3]=T;const I=hT(D,m6,4,pi,x6);return x6[I-1]}function $v(e,t,n,r,i,s){const a=(t-s)*(n-i),o=(e-i)*(r-s),l=a-o,c=Math.abs(a+o);return Math.abs(l)>=fde*c?l:-pde(e,t,n,r,i,s,c)}const v6=Math.pow(2,-52),Mv=new Uint32Array(512);class c2{static from(t,n=yde,r=_de){const i=t.length,s=new Float64Array(i*2);for(let a=0;a<i;a++){const o=t[a];s[2*a]=n(o),s[2*a+1]=r(o)}return new c2(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,a=t.length>>1;let o=1/0,l=1/0,c=-1/0,u=-1/0;for(let S=0;S<a;S++){const A=t[2*S],C=t[2*S+1];A<o&&(o=A),C<l&&(l=C),A>c&&(c=A),C>u&&(u=C),this._ids[S]=S}const f=(o+c)/2,h=(l+u)/2;let d,p,g;for(let S=0,A=1/0;S<a;S++){const C=dT(f,h,t[2*S],t[2*S+1]);C<A&&(d=S,A=C)}const m=t[2*d],x=t[2*d+1];for(let S=0,A=1/0;S<a;S++){if(S===d)continue;const C=dT(m,x,t[2*S],t[2*S+1]);C<A&&C>0&&(p=S,A=C)}let y=t[2*p],v=t[2*p+1],_=1/0;for(let S=0;S<a;S++){if(S===d||S===p)continue;const A=xde(m,x,y,v,t[2*S],t[2*S+1]);A<_&&(g=S,_=A)}let b=t[2*g],w=t[2*g+1];if(_===1/0){for(let C=0;C<a;C++)this._dists[C]=t[2*C]-t[0]||t[2*C+1]-t[1];Jd(this._ids,this._dists,0,a-1);const S=new Uint32Array(a);let A=0;for(let C=0,F=-1/0;C<a;C++){const N=this._ids[C],M=this._dists[N];M>F&&(S[A++]=N,F=M)}this.hull=S.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if($v(m,x,y,v,b,w)<0){const S=p,A=y,C=v;p=g,y=b,v=w,g=S,b=A,w=C}const E=vde(m,x,y,v,b,w);this._cx=E.x,this._cy=E.y;for(let S=0;S<a;S++)this._dists[S]=dT(t[2*S],t[2*S+1],E.x,E.y);Jd(this._ids,this._dists,0,a-1),this._hullStart=d;let T=3;r[d]=n[g]=p,r[p]=n[d]=g,r[g]=n[p]=d,i[d]=0,i[p]=1,i[g]=2,s.fill(-1),s[this._hashKey(m,x)]=d,s[this._hashKey(y,v)]=p,s[this._hashKey(b,w)]=g,this.trianglesLen=0,this._addTriangle(d,p,g,-1,-1,-1);for(let S=0,A,C;S<this._ids.length;S++){const F=this._ids[S],N=t[2*F],M=t[2*F+1];if(S>0&&Math.abs(N-A)<=v6&&Math.abs(M-C)<=v6||(A=N,C=M,F===d||F===p||F===g))continue;let O=0;for(let X=0,de=this._hashKey(N,M);X<this._hashSize&&(O=s[(de+X)%this._hashSize],!(O!==-1&&O!==r[O]));X++);O=n[O];let D=O,I;for(;I=r[D],$v(N,M,t[2*D],t[2*D+1],t[2*I],t[2*I+1])>=0;)if(D=I,D===O){D=-1;break}if(D===-1)continue;let U=this._addTriangle(D,F,r[D],-1,-1,i[D]);i[F]=this._legalize(U+2),i[D]=U,T++;let Y=r[D];for(;I=r[Y],$v(N,M,t[2*Y],t[2*Y+1],t[2*I],t[2*I+1])<0;)U=this._addTriangle(Y,F,I,i[F],-1,i[Y]),i[F]=this._legalize(U+2),r[Y]=Y,T--,Y=I;if(D===O)for(;I=n[D],$v(N,M,t[2*I],t[2*I+1],t[2*D],t[2*D+1])<0;)U=this._addTriangle(I,F,D,-1,i[D],i[I]),this._legalize(U+2),i[I]=U,r[D]=D,T--,D=I;this._hullStart=n[F]=D,r[D]=n[Y]=F,r[F]=Y,s[this._hashKey(N,M)]=F,s[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(T);for(let S=0,A=this._hullStart;S<T;S++)this.hull[S]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(gde(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,a=0;for(;;){const o=r[t],l=t-t%3;if(a=l+(t+2)%3,o===-1){if(s===0)break;t=Mv[--s];continue}const c=o-o%3,u=l+(t+1)%3,f=c+(o+2)%3,h=n[a],d=n[t],p=n[u],g=n[f];if(mde(i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[o]=h;const x=r[f];if(x===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,x),this._link(o,r[a]),this._link(a,f);const y=c+(o+1)%3;s<Mv.length&&(Mv[s++]=y)}else{if(s===0)break;t=Mv[--s]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,a){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=r,this._link(o,i),this._link(o+1,s),this._link(o+2,a),this.trianglesLen+=3,o}}function gde(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function dT(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function mde(e,t,n,r,i,s,a,o){const l=e-a,c=t-o,u=n-a,f=r-o,h=i-a,d=s-o,p=l*l+c*c,g=u*u+f*f,m=h*h+d*d;return l*(f*m-g*d)-c*(u*m-g*h)+p*(u*d-f*h)<0}function xde(e,t,n,r,i,s){const a=n-e,o=r-t,l=i-e,c=s-t,u=a*a+o*o,f=l*l+c*c,h=.5/(a*c-o*l),d=(c*u-o*f)*h,p=(a*f-l*u)*h;return d*d+p*p}function vde(e,t,n,r,i,s){const a=n-e,o=r-t,l=i-e,c=s-t,u=a*a+o*o,f=l*l+c*c,h=.5/(a*c-o*l),d=e+(c*u-o*f)*h,p=t+(a*f-l*u)*h;return{x:d,y:p}}function Jd(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],a=t[s];let o=i-1;for(;o>=n&&t[e[o]]>a;)e[o+1]=e[o--];e[o+1]=s}else{const i=n+r>>1;let s=n+1,a=r;mg(e,i,s),t[e[n]]>t[e[r]]&&mg(e,n,r),t[e[s]]>t[e[r]]&&mg(e,s,r),t[e[n]]>t[e[s]]&&mg(e,n,s);const o=e[s],l=t[o];for(;;){do s++;while(t[e[s]]<l);do a--;while(t[e[a]]>l);if(a<s)break;mg(e,s,a)}e[n+1]=e[a],e[a]=o,r-s+1>=a-n?(Jd(e,t,s,r),Jd(e,t,n,a-1)):(Jd(e,t,n,a-1),Jd(e,t,s,r))}}function mg(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function yde(e){return e[0]}function _de(e){return e[1]}const y6=1e-6;class Bf{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>y6||Math.abs(this._y1-s)>y6)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class dC{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let bde=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,a;const o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,x=r.length,y,v;g<x;g+=3,m+=2){const _=r[g]*2,b=r[g+1]*2,w=r[g+2]*2,E=t[_],T=t[_+1],S=t[b],A=t[b+1],C=t[w],F=t[w+1],N=S-E,M=A-T,O=C-E,D=F-T,I=(N*D-M*O)*2;if(Math.abs(I)<1e-9){if(s===void 0){s=a=0;for(const Y of n)s+=t[Y*2],a+=t[Y*2+1];s/=n.length,a/=n.length}const U=1e9*Math.sign((s-E)*D-(a-T)*O);y=(E+C)/2-U*D,v=(T+F)/2+U*O}else{const U=1/I,Y=N*N+M*M,X=O*O+D*D;y=E+(D*Y-M*X)*U,v=T+(N*X-O*Y)*U}o[m]=y,o[m+1]=v}let l=n[n.length-1],c,u=l*4,f,h=t[2*l],d,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],c=u,f=h,d=p,u=l*4,h=t[2*l],p=t[2*l+1],i[c+2]=i[u]=d-p,i[c+3]=i[u+1]=h-f}render(t){const n=t==null?t=new Bf:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:a,vectors:o}=this;if(s.length<=1)return null;for(let u=0,f=r.length;u<f;++u){const h=r[u];if(h<u)continue;const d=Math.floor(u/3)*2,p=Math.floor(h/3)*2,g=a[d],m=a[d+1],x=a[p],y=a[p+1];this._renderSegment(g,m,x,y,t)}let l,c=s[s.length-1];for(let u=0;u<s.length;++u){l=c,c=s[u];const f=Math.floor(i[c]/3)*2,h=a[f],d=a[f+1],p=l*4,g=this._project(h,d,o[p+2],o[p+3]);g&&this._renderSegment(h,d,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Bf:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Bf:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new dC;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let a;const o=this._regioncode(t,n),l=this._regioncode(r,i);o===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,o,l))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,a=n.length;s<a;s+=2)for(let o=0,l=i.length;o<l;o+=2)if(n[s]===i[o]&&n[s+1]===i[o+1]&&n[(s+2)%a]===i[(o+l-2)%l]&&n[(s+3)%a]===i[(o+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,a=r[t];if(a===-1)return null;const o=[];let l=a;do{const c=Math.floor(l/3);if(o.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==a&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,a,o=n[r-2],l=n[r-1],c,u=this._regioncode(o,l),f,h=0;for(let d=0;d<r;d+=2)if(s=o,a=l,o=n[d],l=n[d+1],c=u,u=this._regioncode(o,l),c===0&&u===0)f=h,h=0,i?i.push(o,l):i=[o,l];else{let p,g,m,x,y;if(c===0){if((p=this._clipSegment(s,a,o,l,c,u))===null)continue;[g,m,x,y]=p}else{if((p=this._clipSegment(o,l,s,a,u,c))===null)continue;[x,y,g,m]=p,f=h,h=this._edgecode(g,m),f&&h&&this._edge(t,f,h,i,i.length),i?i.push(g,m):i=[g,m]}f=h,h=this._edgecode(x,y),f&&h&&this._edge(t,f,h,i,i.length),i?i.push(x,y):i=[x,y]}if(i)f=h,h=this._edgecode(i[0],i[1]),f&&h&&this._edge(t,f,h,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,a){const o=s<a;for(o&&([t,n,r,i,s,a]=[r,i,t,n,a,s]);;){if(s===0&&a===0)return o?[r,i,t,n]:[t,n,r,i];if(s&a)return null;let l,c,u=s||a;u&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):u&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):u&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=c,s=this._regioncode(t,n)):(r=l,i=c,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,a){let o=Array.from(n),l;if((l=this._project(o[0],o[1],r,i))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],s,a))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let c=0,u=o.length,f,h=this._edgecode(o[u-2],o[u-1]);c<u;c+=2)f=h,h=this._edgecode(o[c],o[c+1]),f&&h&&(c=this._edge(t,f,h,o,c),u=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,r,i,s){for(;n!==r;){let a,o;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,o=this.ymin;break}(i[s]!==a||i[s+1]!==o)&&this.contains(t,a,o)&&(i.splice(s,0,a,o),s+=2)}return s}_project(t,n,r,i){let s=1/0,a,o,l;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<s&&(l=this.ymin,o=t+(s=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<s&&(l=this.ymax,o=t+(s=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<s&&(o=this.xmax,l=n+(s=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<s&&(o=this.xmin,l=n+(s=a)*i)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Ede=2*Math.PI,kd=Math.pow;function wde(e){return e[0]}function Sde(e){return e[1]}function Tde(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function Ade(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class B4{static from(t,n=wde,r=Sde,i){return new B4("length"in t?kde(t,n,r,i):Float64Array.from(Cde(t,n,r,i)))}constructor(t){this._delaunator=new c2(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Tde(t)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],u=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],f=1e-8*Math.hypot(u[3]-u[1],u[2]-u[0]);for(let h=0,d=n.length/2;h<d;++h){const p=Ade(n[2*h],n[2*h+1],f);n[2*h]=p[0],n[2*h+1]=p[1]}this._delaunator=new c2(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const u=s[l%3===2?l-2:l+1];(r[l]===-1||a[u]===-1)&&(a[u]=l)}for(let l=0,c=i.length;l<c;++l)o[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new bde(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:a,collinear:o}=this;if(o){const f=o.indexOf(t);f>0&&(yield o[f-1]),f<o.length-1&&(yield o[f+1]);return}const l=n[t];if(l===-1)return;let c=l,u=-1;do{if(yield u=a[c],c=c%3===2?c-2:c+1,a[c]!==t)return;if(c=s[c],c===-1){const f=r[(i[t]+1)%r.length];f!==u&&(yield f);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:a,halfedges:o,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let u=t,f=kd(n-c[t*2],2)+kd(r-c[t*2+1],2);const h=i[t];let d=h;do{let p=l[d];const g=kd(n-c[p*2],2)+kd(r-c[p*2+1],2);if(g<f&&(f=g,u=p),d=d%3===2?d-2:d+1,l[d]!==t)break;if(d=o[d],d===-1){if(d=s[(a[t]+1)%s.length],d!==p&&kd(n-c[d*2],2)+kd(r-c[d*2+1],2)<f)return d;break}}while(d!==h);return u}render(t){const n=t==null?t=new Bf:void 0,{points:r,halfedges:i,triangles:s}=this;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l<a)continue;const c=s[a]*2,u=s[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[u],r[u+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Bf:void 0,{points:i}=this;for(let s=0,a=i.length;s<a;s+=2){const o=i[s],l=i[s+1];t.moveTo(o+n,l),t.arc(o,l,n,0,Ede)}return r&&r.value()}renderHull(t){const n=t==null?t=new Bf:void 0,{hull:r,points:i}=this,s=r[0]*2,a=r.length;t.moveTo(i[s],i[s+1]);for(let o=1;o<a;++o){const l=2*r[o];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new dC;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Bf:void 0,{points:i,triangles:s}=this,a=s[t*=3]*2,o=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[o],i[o+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new dC;return this.renderTriangle(t,n),n.value()}}function kde(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let a=0;a<i;++a){const o=e[a];s[a*2]=t.call(r,o,a,e),s[a*2+1]=n.call(r,o,a,e)}return s}function*Cde(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var _6={},pT={},gT=34,xg=10,mT=13;function bV(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Fde(e,t){var n=bV(e);return function(r,i){return t(n(r),i,e)}}function b6(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Vi(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Ode(e){return e<0?"-"+Vi(-e,6):e>9999?"+"+Vi(e,6):Vi(e,4)}function Nde(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ode(e.getUTCFullYear())+"-"+Vi(e.getUTCMonth()+1,2)+"-"+Vi(e.getUTCDate(),2)+(i?"T"+Vi(t,2)+":"+Vi(n,2)+":"+Vi(r,2)+"."+Vi(i,3)+"Z":r?"T"+Vi(t,2)+":"+Vi(n,2)+":"+Vi(r,2)+"Z":n||t?"T"+Vi(t,2)+":"+Vi(n,2)+"Z":"")}function EV(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,p,g=i(f,function(m,x){if(d)return d(m,x-1);p=m,d=h?Fde(m,h):bV(m)});return g.columns=p||[],g}function i(f,h){var d=[],p=f.length,g=0,m=0,x,y=p<=0,v=!1;f.charCodeAt(p-1)===xg&&--p,f.charCodeAt(p-1)===mT&&--p;function _(){if(y)return pT;if(v)return v=!1,_6;var w,E=g,T;if(f.charCodeAt(E)===gT){for(;g++<p&&f.charCodeAt(g)!==gT||f.charCodeAt(++g)===gT;);return(w=g)>=p?y=!0:(T=f.charCodeAt(g++))===xg?v=!0:T===mT&&(v=!0,f.charCodeAt(g)===xg&&++g),f.slice(E+1,w-1).replace(/""/g,'"')}for(;g<p;){if((T=f.charCodeAt(w=g++))===xg)v=!0;else if(T===mT)v=!0,f.charCodeAt(g)===xg&&++g;else if(T!==n)continue;return f.slice(E,w)}return y=!0,f.slice(E,p)}for(;(x=_())!==pT;){for(var b=[];x!==_6&&x!==pT;)b.push(x),x=_();h&&(b=h(b,m++))==null||d.push(b)}return d}function s(f,h){return f.map(function(d){return h.map(function(p){return u(d[p])}).join(e)})}function a(f,h){return h==null&&(h=b6(f)),[h.map(u).join(e)].concat(s(f,h)).join(`
`)}function o(f,h){return h==null&&(h=b6(f)),s(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(e)}function u(f){return f==null?"":f instanceof Date?Nde(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:o,formatRows:l,formatRow:c,formatValue:u}}var wV=EV(","),SV=wV.parse,Dde=wV.format;function Rde(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Ide(e,t){return fetch(e,t).then(Rde)}function $de(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Ide(t,n).then(function(i){return e(i,r)})}}var TV=$de(SV);function Mde(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,a=n.length,o,l=0,c=0;for(s=0;s<a;++s)o=n[s],l+=o.x,c+=o.y;for(l=(l/a-e)*r,c=(c/a-t)*r,s=0;s<a;++s)o=n[s],o.x-=l,o.y-=c}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Lde(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return AV(this.cover(t,n),t,n,e)}function AV(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,a={data:r},o=e._x0,l=e._y0,c=e._x1,u=e._y1,f,h,d,p,g,m,x,y;if(!s)return e._root=a,e;for(;s.length;)if((g=t>=(f=(o+c)/2))?o=f:c=f,(m=n>=(h=(l+u)/2))?l=h:u=h,i=s,!(s=s[x=m<<1|g]))return i[x]=a,e;if(d=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===d&&n===p)return a.next=s,i?i[x]=a:e._root=a,e;do i=i?i[x]=new Array(4):e._root=new Array(4),(g=t>=(f=(o+c)/2))?o=f:c=f,(m=n>=(h=(l+u)/2))?l=h:u=h;while((x=m<<1|g)===(y=(p>=h)<<1|d>=f));return i[y]=s,i[x]=a,e}function Pde(e){var t,n,r=e.length,i,s,a=new Array(r),o=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(a[n]=i,o[n]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>f&&(f=s));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<r;++n)AV(this,a[n],o[n],e[n]);return this}function Bde(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var a=i-n||1,o=this._root,l,c;n>e||e>=i||r>t||t>=s;)switch(c=(t<r)<<1|e<n,l=new Array(4),l[c]=o,o=l,a*=2,c){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Ude(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function zde(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ki(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Hde(e,t,n){var r,i=this._x0,s=this._y0,a,o,l,c,u=this._x1,f=this._y1,h=[],d=this._root,p,g;for(d&&h.push(new ki(d,i,s,u,f)),n==null?n=1/0:(i=e-n,s=t-n,u=e+n,f=t+n,n*=n);p=h.pop();)if(!(!(d=p.node)||(a=p.x0)>u||(o=p.y0)>f||(l=p.x1)<i||(c=p.y1)<s))if(d.length){var m=(a+l)/2,x=(o+c)/2;h.push(new ki(d[3],m,x,l,c),new ki(d[2],a,x,m,c),new ki(d[1],m,o,l,x),new ki(d[0],a,o,m,x)),(g=(t>=x)<<1|e>=m)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-g],h[h.length-1-g]=p)}else{var y=e-+this._x.call(null,d.data),v=t-+this._y.call(null,d.data),_=y*y+v*v;if(_<n){var b=Math.sqrt(n=_);i=e-b,s=t-b,u=e+b,f=t+b,r=d.data}}return r}function Vde(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,c=this._y1,u,f,h,d,p,g,m,x;if(!n)return this;if(n.length)for(;;){if((p=u>=(h=(a+l)/2))?a=h:l=h,(g=f>=(d=(o+c)/2))?o=d:c=d,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,x=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[m]=s:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=s,this)}function Wde(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function jde(){return this._root}function Gde(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function qde(e){var t=[],n,r=this._root,i,s,a,o,l;for(r&&t.push(new ki(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&r.length){var c=(s+o)/2,u=(a+l)/2;(i=r[3])&&t.push(new ki(i,c,u,o,l)),(i=r[2])&&t.push(new ki(i,s,u,c,l)),(i=r[1])&&t.push(new ki(i,c,a,o,u)),(i=r[0])&&t.push(new ki(i,s,a,c,u))}return this}function Xde(e){var t=[],n=[],r;for(this._root&&t.push(new ki(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,c=r.y1,u=(a+l)/2,f=(o+c)/2;(s=i[0])&&t.push(new ki(s,a,o,u,f)),(s=i[1])&&t.push(new ki(s,u,o,l,f)),(s=i[2])&&t.push(new ki(s,a,f,u,c)),(s=i[3])&&t.push(new ki(s,u,f,l,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Yde(e){return e[0]}function Kde(e){return arguments.length?(this._x=e,this):this._x}function Jde(e){return e[1]}function Zde(e){return arguments.length?(this._y=e,this):this._y}function U4(e,t,n){var r=new z4(t??Yde,n??Jde,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function z4(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function E6(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ui=U4.prototype=z4.prototype;Ui.copy=function(){var e=new z4(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=E6(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=E6(r));return e};Ui.add=Lde;Ui.addAll=Pde;Ui.cover=Bde;Ui.data=Ude;Ui.extent=zde;Ui.find=Hde;Ui.remove=Vde;Ui.removeAll=Wde;Ui.root=jde;Ui.size=Gde;Ui.visit=qde;Ui.visitAfter=Xde;Ui.x=Kde;Ui.y=Zde;function Oi(e){return function(){return e}}function qc(e){return(e()-.5)*1e-6}function Qde(e){return e.x+e.vx}function e0e(e){return e.y+e.vy}function t0e(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Oi(e==null?1:+e));function a(){for(var c,u=t.length,f,h,d,p,g,m,x=0;x<s;++x)for(f=U4(t,Qde,e0e).visitAfter(o),c=0;c<u;++c)h=t[c],g=n[h.index],m=g*g,d=h.x+h.vx,p=h.y+h.vy,f.visit(y);function y(v,_,b,w,E){var T=v.data,S=v.r,A=g+S;if(T){if(T.index>h.index){var C=d-T.x-T.vx,F=p-T.y-T.vy,N=C*C+F*F;N<A*A&&(C===0&&(C=qc(r),N+=C*C),F===0&&(F=qc(r),N+=F*F),N=(A-(N=Math.sqrt(N)))/N*i,h.vx+=(C*=N)*(A=(S*=S)/(m+S)),h.vy+=(F*=N)*A,T.vx-=C*(A=1-A),T.vy-=F*A)}return}return _>d+A||w<d-A||b>p+A||E<p-A}}function o(c){if(c.data)return c.r=n[c.data.index];for(var u=c.r=0;u<4;++u)c[u]&&c[u].r>c.r&&(c.r=c[u].r)}function l(){if(t){var c,u=t.length,f;for(n=new Array(u),c=0;c<u;++c)f=t[c],n[f.index]=+e(f,c,t)}}return a.initialize=function(c,u){t=c,r=u,l()},a.iterations=function(c){return arguments.length?(s=+c,a):s},a.strength=function(c){return arguments.length?(i=+c,a):i},a.radius=function(c){return arguments.length?(e=typeof c=="function"?c:Oi(+c),l(),a):e},a}function n0e(e){return e.index}function w6(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function r0e(e){var t=n0e,n=f,r,i=Oi(30),s,a,o,l,c,u=1;e==null&&(e=[]);function f(m){return 1/Math.min(o[m.source.index],o[m.target.index])}function h(m){for(var x=0,y=e.length;x<u;++x)for(var v=0,_,b,w,E,T,S,A;v<y;++v)_=e[v],b=_.source,w=_.target,E=w.x+w.vx-b.x-b.vx||qc(c),T=w.y+w.vy-b.y-b.vy||qc(c),S=Math.sqrt(E*E+T*T),S=(S-s[v])/S*m*r[v],E*=S,T*=S,w.vx-=E*(A=l[v]),w.vy-=T*A,b.vx+=E*(A=1-A),b.vy+=T*A}function d(){if(a){var m,x=a.length,y=e.length,v=new Map(a.map((b,w)=>[t(b,w,a),b])),_;for(m=0,o=new Array(x);m<y;++m)_=e[m],_.index=m,typeof _.source!="object"&&(_.source=w6(v,_.source)),typeof _.target!="object"&&(_.target=w6(v,_.target)),o[_.source.index]=(o[_.source.index]||0)+1,o[_.target.index]=(o[_.target.index]||0)+1;for(m=0,l=new Array(y);m<y;++m)_=e[m],l[m]=o[_.source.index]/(o[_.source.index]+o[_.target.index]);r=new Array(y),p(),s=new Array(y),g()}}function p(){if(a)for(var m=0,x=e.length;m<x;++m)r[m]=+n(e[m],m,e)}function g(){if(a)for(var m=0,x=e.length;m<x;++m)s[m]=+i(e[m],m,e)}return h.initialize=function(m,x){a=m,c=x,d()},h.links=function(m){return arguments.length?(e=m,d(),h):e},h.id=function(m){return arguments.length?(t=m,h):t},h.iterations=function(m){return arguments.length?(u=+m,h):u},h.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Oi(+m),p(),h):n},h.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Oi(+m),g(),h):i},h}const i0e=1664525,s0e=1013904223,S6=4294967296;function a0e(){let e=1;return()=>(e=(i0e*e+s0e)%S6)/S6}function o0e(e){return e.x}function l0e(e){return e.y}var c0e=10,u0e=Math.PI*(3-Math.sqrt(5));function f0e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,o=new Map,l=$4(f),c=T4("tick","end"),u=a0e();e==null&&(e=[]);function f(){h(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function h(g){var m,x=e.length,y;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(s-n)*i,o.forEach(function(_){_(n)}),m=0;m<x;++m)y=e[m],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return t}function d(){for(var g=0,m=e.length,x;g<m;++g){if(x=e[g],x.index=g,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var y=c0e*Math.sqrt(.5+g),v=g*u0e;x.x=y*Math.cos(v),x.y=y*Math.sin(v)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function p(g){return g.initialize&&g.initialize(e,u),g}return d(),t={tick:h,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,d(),o.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(a=1-g,t):1-a},randomSource:function(g){return arguments.length?(u=g,o.forEach(p),t):u},force:function(g,m){return arguments.length>1?(m==null?o.delete(g):o.set(g,p(m)),t):o.get(g)},find:function(g,m,x){var y=0,v=e.length,_,b,w,E,T;for(x==null?x=1/0:x*=x,y=0;y<v;++y)E=e[y],_=g-E.x,b=m-E.y,w=_*_+b*b,w<x&&(T=E,x=w);return T},on:function(g,m){return arguments.length>1?(c.on(g,m),t):c.on(g)}}}function h0e(){var e,t,n,r,i=Oi(-30),s,a=1,o=1/0,l=.81;function c(d){var p,g=e.length,m=U4(e,o0e,l0e).visitAfter(f);for(r=d,p=0;p<g;++p)t=e[p],m.visit(h)}function u(){if(e){var d,p=e.length,g;for(s=new Array(p),d=0;d<p;++d)g=e[d],s[g.index]=+i(g,d,e)}}function f(d){var p=0,g,m,x=0,y,v,_;if(d.length){for(y=v=_=0;_<4;++_)(g=d[_])&&(m=Math.abs(g.value))&&(p+=g.value,x+=m,y+=m*g.x,v+=m*g.y);d.x=y/x,d.y=v/x}else{g=d,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}d.value=p}function h(d,p,g,m){if(!d.value)return!0;var x=d.x-t.x,y=d.y-t.y,v=m-p,_=x*x+y*y;if(v*v/l<_)return _<o&&(x===0&&(x=qc(n),_+=x*x),y===0&&(y=qc(n),_+=y*y),_<a&&(_=Math.sqrt(a*_)),t.vx+=x*d.value*r/_,t.vy+=y*d.value*r/_),!0;if(d.length||_>=o)return;(d.data!==t||d.next)&&(x===0&&(x=qc(n),_+=x*x),y===0&&(y=qc(n),_+=y*y),_<a&&(_=Math.sqrt(a*_)));do d.data!==t&&(v=s[d.data.index]*r/_,t.vx+=x*v,t.vy+=y*v);while(d=d.next)}return c.initialize=function(d,p){e=d,n=p,u()},c.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Oi(+d),u(),c):i},c.distanceMin=function(d){return arguments.length?(a=d*d,c):Math.sqrt(a)},c.distanceMax=function(d){return arguments.length?(o=d*d,c):Math.sqrt(o)},c.theta=function(d){return arguments.length?(l=d*d,c):Math.sqrt(l)},c}function d0e(e){var t=Oi(.1),n,r,i;typeof e!="function"&&(e=Oi(e==null?0:+e));function s(o){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vx+=(i[l]-u.x)*r[l]*o}function a(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(t=typeof o=="function"?o:Oi(+o),a(),s):t},s.x=function(o){return arguments.length?(e=typeof o=="function"?o:Oi(+o),a(),s):e},s}function p0e(e){var t=Oi(.1),n,r,i;typeof e!="function"&&(e=Oi(e==null?0:+e));function s(o){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vy+=(i[l]-u.y)*r[l]*o}function a(){if(n){var o,l=n.length;for(r=new Array(l),i=new Array(l),o=0;o<l;++o)r[o]=isNaN(i[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(t=typeof o=="function"?o:Oi(+o),a(),s):t},s.y=function(o){return arguments.length?(e=typeof o=="function"?o:Oi(+o),a(),s):e},s}function g0e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function u2(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function U0(e){return e=u2(Math.abs(e)),e?e[1]:NaN}function m0e(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function x0e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var v0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _h(e){if(!(t=v0e.exec(e)))throw new Error("invalid format: "+e);var t;return new H4({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_h.prototype=H4.prototype;function H4(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}H4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function y0e(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var kV;function _0e(e,t){var n=u2(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(kV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+u2(e,Math.max(0,t+s-1))[0]}function T6(e,t){var n=u2(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const A6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:g0e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>T6(e*100,t),r:T6,s:_0e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function k6(e){return e}var C6=Array.prototype.map,F6=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function CV(e){var t=e.grouping===void 0||e.thousands===void 0?k6:m0e(C6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?k6:x0e(C6.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=_h(f);var h=f.fill,d=f.align,p=f.sign,g=f.symbol,m=f.zero,x=f.width,y=f.comma,v=f.precision,_=f.trim,b=f.type;b==="n"?(y=!0,b="g"):A6[b]||(v===void 0&&(v=12),_=!0,b="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var w=g==="$"?n:g==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",E=g==="$"?r:/[%p]/.test(b)?a:"",T=A6[b],S=/[defgprs%]/.test(b);v=v===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function A(C){var F=w,N=E,M,O,D;if(b==="c")N=T(C)+N,C="";else{C=+C;var I=C<0||1/C<0;if(C=isNaN(C)?l:T(Math.abs(C),v),_&&(C=y0e(C)),I&&+C==0&&p!=="+"&&(I=!1),F=(I?p==="("?p:o:p==="-"||p==="("?"":p)+F,N=(b==="s"?F6[8+kV/3]:"")+N+(I&&p==="("?")":""),S){for(M=-1,O=C.length;++M<O;)if(D=C.charCodeAt(M),48>D||D>57){N=(D===46?i+C.slice(M+1):C.slice(M))+N,C=C.slice(0,M);break}}}y&&!m&&(C=t(C,1/0));var U=F.length+C.length+N.length,Y=U<x?new Array(x-U+1).join(h):"";switch(y&&m&&(C=t(Y+C,Y.length?x-N.length:1/0),Y=""),d){case"<":C=F+C+N+Y;break;case"=":C=F+Y+C+N;break;case"^":C=Y.slice(0,U=Y.length>>1)+F+C+N+Y.slice(U);break;default:C=Y+F+C+N;break}return s(C)}return A.toString=function(){return f+""},A}function u(f,h){var d=c((f=_h(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(U0(h)/3)))*3,g=Math.pow(10,-p),m=F6[8+p/3];return function(x){return d(g*x)+m}}return{format:c,formatPrefix:u}}var Lv,AE,V4;b0e({thousands:",",grouping:[3],currency:["$",""]});function b0e(e){return Lv=CV(e),AE=Lv.format,V4=Lv.formatPrefix,Lv}function FV(e){return Math.max(0,-U0(Math.abs(e)))}function OV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(U0(t)/3)))*3-U0(Math.abs(e)))}function NV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,U0(t)-U0(e))+1}var rt=1e-6,pC=1e-12,vt=Math.PI,Cn=vt/2,f2=vt/4,Li=vt*2,Rn=180/vt,gt=vt/180,Ot=Math.abs,Np=Math.atan,da=Math.atan2,nt=Math.cos,Pv=Math.ceil,DV=Math.exp,gC=Math.hypot,h2=Math.log,xT=Math.pow,Ze=Math.sin,ra=Math.sign||function(e){return e>0?1:e<0?-1:0},Pi=Math.sqrt,W4=Math.tan;function RV(e){return e>1?0:e<-1?vt:Math.acos(e)}function ss(e){return e>1?Cn:e<-1?-Cn:Math.asin(e)}function Ar(){}function d2(e,t){e&&N6.hasOwnProperty(e.type)&&N6[e.type](e,t)}var O6={Feature:function(e,t){d2(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)d2(n[r].geometry,t)}},N6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){mC(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)mC(n[r],t,0)},Polygon:function(e,t){D6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)D6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)d2(n[r],t)}};function mC(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function D6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)mC(e[n],t,1);t.polygonEnd()}function Ol(e,t){e&&O6.hasOwnProperty(e.type)?O6[e.type](e,t):d2(e,t)}var p2=new Di,g2=new Di,IV,$V,xC,vC,yC,Vo={point:Ar,lineStart:Ar,lineEnd:Ar,polygonStart:function(){p2=new Di,Vo.lineStart=E0e,Vo.lineEnd=w0e},polygonEnd:function(){var e=+p2;g2.add(e<0?Li+e:e),this.lineStart=this.lineEnd=this.point=Ar},sphere:function(){g2.add(Li)}};function E0e(){Vo.point=S0e}function w0e(){MV(IV,$V)}function S0e(e,t){Vo.point=MV,IV=e,$V=t,e*=gt,t*=gt,xC=e,vC=nt(t=t/2+f2),yC=Ze(t)}function MV(e,t){e*=gt,t*=gt,t=t/2+f2;var n=e-xC,r=n>=0?1:-1,i=r*n,s=nt(t),a=Ze(t),o=yC*a,l=vC*s+o*nt(i),c=o*r*Ze(i);p2.add(da(c,l)),xC=e,vC=s,yC=a}function T0e(e){return g2=new Di,Ol(e,Vo),g2*2}function m2(e){return[da(e[1],e[0]),ss(e[2])]}function bh(e){var t=e[0],n=e[1],r=nt(n);return[r*nt(t),r*Ze(t),Ze(n)]}function Bv(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function z0(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function vT(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Uv(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function x2(e){var t=Pi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var _n,Xi,Tn,ys,Cf,LV,PV,m0,Am,Bc,nc,Sl={point:_C,lineStart:R6,lineEnd:I6,polygonStart:function(){Sl.point=UV,Sl.lineStart=A0e,Sl.lineEnd=k0e,Am=new Di,Vo.polygonStart()},polygonEnd:function(){Vo.polygonEnd(),Sl.point=_C,Sl.lineStart=R6,Sl.lineEnd=I6,p2<0?(_n=-(Tn=180),Xi=-(ys=90)):Am>rt?ys=90:Am<-1e-6&&(Xi=-90),nc[0]=_n,nc[1]=Tn},sphere:function(){_n=-(Tn=180),Xi=-(ys=90)}};function _C(e,t){Bc.push(nc=[_n=e,Tn=e]),t<Xi&&(Xi=t),t>ys&&(ys=t)}function BV(e,t){var n=bh([e*gt,t*gt]);if(m0){var r=z0(m0,n),i=[r[1],-r[0],0],s=z0(i,r);x2(s),s=m2(s);var a=e-Cf,o=a>0?1:-1,l=s[0]*Rn*o,c,u=Ot(a)>180;u^(o*Cf<l&&l<o*e)?(c=s[1]*Rn,c>ys&&(ys=c)):(l=(l+360)%360-180,u^(o*Cf<l&&l<o*e)?(c=-s[1]*Rn,c<Xi&&(Xi=c)):(t<Xi&&(Xi=t),t>ys&&(ys=t))),u?e<Cf?vs(_n,e)>vs(_n,Tn)&&(Tn=e):vs(e,Tn)>vs(_n,Tn)&&(_n=e):Tn>=_n?(e<_n&&(_n=e),e>Tn&&(Tn=e)):e>Cf?vs(_n,e)>vs(_n,Tn)&&(Tn=e):vs(e,Tn)>vs(_n,Tn)&&(_n=e)}else Bc.push(nc=[_n=e,Tn=e]);t<Xi&&(Xi=t),t>ys&&(ys=t),m0=n,Cf=e}function R6(){Sl.point=BV}function I6(){nc[0]=_n,nc[1]=Tn,Sl.point=_C,m0=null}function UV(e,t){if(m0){var n=e-Cf;Am.add(Ot(n)>180?n+(n>0?360:-360):n)}else LV=e,PV=t;Vo.point(e,t),BV(e,t)}function A0e(){Vo.lineStart()}function k0e(){UV(LV,PV),Vo.lineEnd(),Ot(Am)>rt&&(_n=-(Tn=180)),nc[0]=_n,nc[1]=Tn,m0=null}function vs(e,t){return(t-=e)<0?t+360:t}function C0e(e,t){return e[0]-t[0]}function $6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function F0e(e){var t,n,r,i,s,a,o;if(ys=Tn=-(_n=Xi=1/0),Bc=[],Ol(e,Sl),n=Bc.length){for(Bc.sort(C0e),t=1,r=Bc[0],s=[r];t<n;++t)i=Bc[t],$6(r,i[0])||$6(r,i[1])?(vs(r[0],i[1])>vs(r[0],r[1])&&(r[1]=i[1]),vs(i[0],r[1])>vs(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(a=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(o=vs(r[1],i[0]))>a&&(a=o,_n=i[0],Tn=r[1])}return Bc=nc=null,_n===1/0||Xi===1/0?[[NaN,NaN],[NaN,NaN]]:[[_n,Xi],[Tn,ys]]}var qg,v2,y2,_2,b2,E2,w2,S2,bC,EC,wC,zV,HV,wi,Si,Ti,Ba={sphere:Ar,point:j4,lineStart:M6,lineEnd:L6,polygonStart:function(){Ba.lineStart=D0e,Ba.lineEnd=R0e},polygonEnd:function(){Ba.lineStart=M6,Ba.lineEnd=L6}};function j4(e,t){e*=gt,t*=gt;var n=nt(t);px(n*nt(e),n*Ze(e),Ze(t))}function px(e,t,n){++qg,y2+=(e-y2)/qg,_2+=(t-_2)/qg,b2+=(n-b2)/qg}function M6(){Ba.point=O0e}function O0e(e,t){e*=gt,t*=gt;var n=nt(t);wi=n*nt(e),Si=n*Ze(e),Ti=Ze(t),Ba.point=N0e,px(wi,Si,Ti)}function N0e(e,t){e*=gt,t*=gt;var n=nt(t),r=n*nt(e),i=n*Ze(e),s=Ze(t),a=da(Pi((a=Si*s-Ti*i)*a+(a=Ti*r-wi*s)*a+(a=wi*i-Si*r)*a),wi*r+Si*i+Ti*s);v2+=a,E2+=a*(wi+(wi=r)),w2+=a*(Si+(Si=i)),S2+=a*(Ti+(Ti=s)),px(wi,Si,Ti)}function L6(){Ba.point=j4}function D0e(){Ba.point=I0e}function R0e(){VV(zV,HV),Ba.point=j4}function I0e(e,t){zV=e,HV=t,e*=gt,t*=gt,Ba.point=VV;var n=nt(t);wi=n*nt(e),Si=n*Ze(e),Ti=Ze(t),px(wi,Si,Ti)}function VV(e,t){e*=gt,t*=gt;var n=nt(t),r=n*nt(e),i=n*Ze(e),s=Ze(t),a=Si*s-Ti*i,o=Ti*r-wi*s,l=wi*i-Si*r,c=gC(a,o,l),u=ss(c),f=c&&-u/c;bC.add(f*a),EC.add(f*o),wC.add(f*l),v2+=u,E2+=u*(wi+(wi=r)),w2+=u*(Si+(Si=i)),S2+=u*(Ti+(Ti=s)),px(wi,Si,Ti)}function $0e(e){qg=v2=y2=_2=b2=E2=w2=S2=0,bC=new Di,EC=new Di,wC=new Di,Ol(e,Ba);var t=+bC,n=+EC,r=+wC,i=gC(t,n,r);return i<pC&&(t=E2,n=w2,r=S2,v2<rt&&(t=y2,n=_2,r=b2),i=gC(t,n,r),i<pC)?[NaN,NaN]:[da(n,t)*Rn,ss(r/i)*Rn]}function SC(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function TC(e,t){return Ot(e)>vt&&(e-=Math.round(e/Li)*Li),[e,t]}TC.invert=TC;function WV(e,t,n){return(e%=Li)?t||n?SC(B6(e),U6(t,n)):B6(e):t||n?U6(t,n):TC}function P6(e){return function(t,n){return t+=e,Ot(t)>vt&&(t-=Math.round(t/Li)*Li),[t,n]}}function B6(e){var t=P6(e);return t.invert=P6(-e),t}function U6(e,t){var n=nt(e),r=Ze(e),i=nt(t),s=Ze(t);function a(o,l){var c=nt(l),u=nt(o)*c,f=Ze(o)*c,h=Ze(l),d=h*n+u*r;return[da(f*i-d*s,u*n-h*r),ss(d*i+f*s)]}return a.invert=function(o,l){var c=nt(l),u=nt(o)*c,f=Ze(o)*c,h=Ze(l),d=h*i-f*s;return[da(f*i+h*s,u*n+d*r),ss(d*n-u*r)]},a}function M0e(e){e=WV(e[0]*gt,e[1]*gt,e.length>2?e[2]*gt:0);function t(n){return n=e(n[0]*gt,n[1]*gt),n[0]*=Rn,n[1]*=Rn,n}return t.invert=function(n){return n=e.invert(n[0]*gt,n[1]*gt),n[0]*=Rn,n[1]*=Rn,n},t}function L0e(e,t,n,r,i,s){if(n){var a=nt(t),o=Ze(t),l=r*n;i==null?(i=t+r*Li,s=t-l/2):(i=z6(a,i),s=z6(a,s),(r>0?i<s:i>s)&&(i+=r*Li));for(var c,u=i;r>0?u>s:u<s;u-=l)c=m2([a,-o*nt(u),-o*Ze(u)]),e.point(c[0],c[1])}}function z6(e,t){t=bh(t),t[0]-=e,x2(t);var n=RV(-t[1]);return((-t[2]<0?-n:n)+Li-rt)%Li}function jV(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ar,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Qy(e,t){return Ot(e[0]-t[0])<rt&&Ot(e[1]-t[1])<rt}function zv(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function GV(e,t,n,r,i){var s=[],a=[],o,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],x=p[g],y;if(Qy(m,x)){if(!m[2]&&!x[2]){for(i.lineStart(),o=0;o<g;++o)i.point((m=p[o])[0],m[1]);i.lineEnd();return}x[0]+=2*rt}s.push(y=new zv(m,p,null,!0)),a.push(y.o=new zv(m,null,y,!1)),s.push(y=new zv(x,p,null,!1)),a.push(y.o=new zv(x,null,y,!0))}}),!!s.length){for(a.sort(t),H6(s),H6(a),o=0,l=a.length;o<l;++o)a[o].e=n=!n;for(var c=s[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,l=u.length;o<l;++o)i.point((f=u[o])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,o=u.length-1;o>=0;--o)i.point((f=u[o])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);i.lineEnd()}}}function H6(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function yT(e){return Ot(e[0])<=vt?e[0]:ra(e[0])*((Ot(e[0])+vt)%Li-vt)}function P0e(e,t){var n=yT(t),r=t[1],i=Ze(r),s=[Ze(n),-nt(n),0],a=0,o=0,l=new Di;i===1?r=Cn+rt:i===-1&&(r=-Cn-rt);for(var c=0,u=e.length;c<u;++c)if(h=(f=e[c]).length)for(var f,h,d=f[h-1],p=yT(d),g=d[1]/2+f2,m=Ze(g),x=nt(g),y=0;y<h;++y,p=_,m=w,x=E,d=v){var v=f[y],_=yT(v),b=v[1]/2+f2,w=Ze(b),E=nt(b),T=_-p,S=T>=0?1:-1,A=S*T,C=A>vt,F=m*w;if(l.add(da(F*S*Ze(A),x*E+F*nt(A))),a+=C?T+S*Li:T,C^p>=n^_>=n){var N=z0(bh(d),bh(v));x2(N);var M=z0(s,N);x2(M);var O=(C^T>=0?-1:1)*ss(M[2]);(r>O||r===O&&(N[0]||N[1]))&&(o+=C^T>=0?1:-1)}}return(a<-1e-6||a<rt&&l<-1e-12)^o&1}function qV(e,t,n,r){return function(i){var s=t(i),a=jV(),o=t(a),l=!1,c,u,f,h={point:d,lineStart:g,lineEnd:m,polygonStart:function(){h.point=x,h.lineStart=y,h.lineEnd=v,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=m,u=kH(u);var _=P0e(c,r);u.length?(l||(i.polygonStart(),l=!0),GV(u,U0e,_,n,i)):_&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(_,b){e(_,b)&&i.point(_,b)}function p(_,b){s.point(_,b)}function g(){h.point=p,s.lineStart()}function m(){h.point=d,s.lineEnd()}function x(_,b){f.push([_,b]),o.point(_,b)}function y(){o.lineStart(),f=[]}function v(){x(f[0][0],f[0][1]),o.lineEnd();var _=o.clean(),b=a.result(),w,E=b.length,T,S,A;if(f.pop(),c.push(f),f=null,!!E){if(_&1){if(S=b[0],(T=S.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),w=0;w<T;++w)i.point((A=S[w])[0],A[1]);i.lineEnd()}return}E>1&&_&2&&b.push(b.pop().concat(b.shift())),u.push(b.filter(B0e))}}return h}}function B0e(e){return e.length>1}function U0e(e,t){return((e=e.x)[0]<0?e[1]-Cn-rt:Cn-e[1])-((t=t.x)[0]<0?t[1]-Cn-rt:Cn-t[1])}const V6=qV(function(){return!0},z0e,V0e,[-vt,-Cn]);function z0e(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,a){var o=s>0?vt:-vt,l=Ot(s-t);Ot(l-vt)<rt?(e.point(t,n=(n+a)/2>0?Cn:-Cn),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(s,n),i=0):r!==o&&l>=vt&&(Ot(t-r)<rt&&(t-=r*rt),Ot(s-o)<rt&&(s-=o*rt),n=H0e(t,n,s,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(o,n),i=0),e.point(t=s,n=a),r=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function H0e(e,t,n,r){var i,s,a=Ze(e-n);return Ot(a)>rt?Np((Ze(t)*(s=nt(r))*Ze(n)-Ze(r)*(i=nt(t))*Ze(e))/(i*s*a)):(t+r)/2}function V0e(e,t,n,r){var i;if(e==null)i=n*Cn,r.point(-vt,i),r.point(0,i),r.point(vt,i),r.point(vt,0),r.point(vt,-i),r.point(0,-i),r.point(-vt,-i),r.point(-vt,0),r.point(-vt,i);else if(Ot(e[0]-t[0])>rt){var s=e[0]<t[0]?vt:-vt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function W0e(e){var t=nt(e),n=2*gt,r=t>0,i=Ot(t)>rt;function s(u,f,h,d){L0e(d,e,n,h,u,f)}function a(u,f){return nt(u)*nt(f)>t}function o(u){var f,h,d,p,g;return{lineStart:function(){p=d=!1,g=1},point:function(m,x){var y=[m,x],v,_=a(m,x),b=r?_?0:c(m,x):_?c(m+(m<0?vt:-vt),x):0;if(!f&&(p=d=_)&&u.lineStart(),_!==d&&(v=l(f,y),(!v||Qy(f,v)||Qy(y,v))&&(y[2]=1)),_!==d)g=0,_?(u.lineStart(),v=l(y,f),u.point(v[0],v[1])):(v=l(f,y),u.point(v[0],v[1],2),u.lineEnd()),f=v;else if(i&&f&&r^_){var w;!(b&h)&&(w=l(y,f,!0))&&(g=0,r?(u.lineStart(),u.point(w[0][0],w[0][1]),u.point(w[1][0],w[1][1]),u.lineEnd()):(u.point(w[1][0],w[1][1]),u.lineEnd(),u.lineStart(),u.point(w[0][0],w[0][1],3)))}_&&(!f||!Qy(f,y))&&u.point(y[0],y[1]),f=y,d=_,h=b},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return g|(p&&d)<<1}}}function l(u,f,h){var d=bh(u),p=bh(f),g=[1,0,0],m=z0(d,p),x=Bv(m,m),y=m[0],v=x-y*y;if(!v)return!h&&u;var _=t*x/v,b=-t*y/v,w=z0(g,m),E=Uv(g,_),T=Uv(m,b);vT(E,T);var S=w,A=Bv(E,S),C=Bv(S,S),F=A*A-C*(Bv(E,E)-1);if(!(F<0)){var N=Pi(F),M=Uv(S,(-A-N)/C);if(vT(M,E),M=m2(M),!h)return M;var O=u[0],D=f[0],I=u[1],U=f[1],Y;D<O&&(Y=O,O=D,D=Y);var X=D-O,de=Ot(X-vt)<rt,le=de||X<rt;if(!de&&U<I&&(Y=I,I=U,U=Y),le?de?I+U>0^M[1]<(Ot(M[0]-O)<rt?I:U):I<=M[1]&&M[1]<=U:X>vt^(O<=M[0]&&M[0]<=D)){var ye=Uv(S,(-A+N)/C);return vT(ye,E),[M,m2(ye)]}}}function c(u,f){var h=r?e:vt-e,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return qV(a,o,s,r?[0,-e]:[-vt,e-vt])}function j0e(e,t,n,r,i,s){var a=e[0],o=e[1],l=t[0],c=t[1],u=0,f=1,h=l-a,d=c-o,p;if(p=n-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=i-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}if(p=r-o,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=s-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}return u>0&&(e[0]=a+u*h,e[1]=o+u*d),f<1&&(t[0]=a+f*h,t[1]=o+f*d),!0}}}}}var Hv=1e9,Vv=-1e9;function XV(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function s(c,u,f,h){var d=0,p=0;if(c==null||(d=a(c,f))!==(p=a(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==p);else h.point(u[0],u[1])}function a(c,u){return Ot(c[0]-e)<rt?u>0?0:3:Ot(c[0]-n)<rt?u>0?2:1:Ot(c[1]-t)<rt?u>0?1:0:u>0?3:2}function o(c,u){return l(c.x,u.x)}function l(c,u){var f=a(c,1),h=a(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=jV(),h,d,p,g,m,x,y,v,_,b,w,E={point:T,lineStart:F,lineEnd:N,polygonStart:A,polygonEnd:C};function T(O,D){i(O,D)&&u.point(O,D)}function S(){for(var O=0,D=0,I=d.length;D<I;++D)for(var U=d[D],Y=1,X=U.length,de=U[0],le,ye,ve=de[0],Ee=de[1];Y<X;++Y)le=ve,ye=Ee,de=U[Y],ve=de[0],Ee=de[1],ye<=r?Ee>r&&(ve-le)*(r-ye)>(Ee-ye)*(e-le)&&++O:Ee<=r&&(ve-le)*(r-ye)<(Ee-ye)*(e-le)&&--O;return O}function A(){u=f,h=[],d=[],w=!0}function C(){var O=S(),D=w&&O,I=(h=kH(h)).length;(D||I)&&(c.polygonStart(),D&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),I&&GV(h,o,O,s,c),c.polygonEnd()),u=c,h=d=p=null}function F(){E.point=M,d&&d.push(p=[]),b=!0,_=!1,y=v=NaN}function N(){h&&(M(g,m),x&&_&&f.rejoin(),h.push(f.result())),E.point=T,_&&u.lineEnd()}function M(O,D){var I=i(O,D);if(d&&p.push([O,D]),b)g=O,m=D,x=I,b=!1,I&&(u.lineStart(),u.point(O,D));else if(I&&_)u.point(O,D);else{var U=[y=Math.max(Vv,Math.min(Hv,y)),v=Math.max(Vv,Math.min(Hv,v))],Y=[O=Math.max(Vv,Math.min(Hv,O)),D=Math.max(Vv,Math.min(Hv,D))];j0e(U,Y,e,t,n,r)?(_||(u.lineStart(),u.point(U[0],U[1])),u.point(Y[0],Y[1]),I||u.lineEnd(),w=!1):I&&(u.lineStart(),u.point(O,D),w=!1)}y=O,v=D,_=I}return E}}function W6(e,t,n){var r=Ss(e,t-rt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function j6(e,t,n){var r=Ss(e,t-rt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function G0e(){var e,t,n,r,i,s,a,o,l=10,c=l,u=90,f=360,h,d,p,g,m=2.5;function x(){return{type:"MultiLineString",coordinates:y()}}function y(){return Ss(Pv(r/u)*u,n,u).map(p).concat(Ss(Pv(o/f)*f,a,f).map(g)).concat(Ss(Pv(t/l)*l,e,l).filter(function(v){return Ot(v%u)>rt}).map(h)).concat(Ss(Pv(s/c)*c,i,c).filter(function(v){return Ot(v%f)>rt}).map(d))}return x.lines=function(){return y().map(function(v){return{type:"LineString",coordinates:v}})},x.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(a).slice(1),p(n).reverse().slice(1),g(o).reverse().slice(1))]}},x.extent=function(v){return arguments.length?x.extentMajor(v).extentMinor(v):x.extentMinor()},x.extentMajor=function(v){return arguments.length?(r=+v[0][0],n=+v[1][0],o=+v[0][1],a=+v[1][1],r>n&&(v=r,r=n,n=v),o>a&&(v=o,o=a,a=v),x.precision(m)):[[r,o],[n,a]]},x.extentMinor=function(v){return arguments.length?(t=+v[0][0],e=+v[1][0],s=+v[0][1],i=+v[1][1],t>e&&(v=t,t=e,e=v),s>i&&(v=s,s=i,i=v),x.precision(m)):[[t,s],[e,i]]},x.step=function(v){return arguments.length?x.stepMajor(v).stepMinor(v):x.stepMinor()},x.stepMajor=function(v){return arguments.length?(u=+v[0],f=+v[1],x):[u,f]},x.stepMinor=function(v){return arguments.length?(l=+v[0],c=+v[1],x):[l,c]},x.precision=function(v){return arguments.length?(m=+v,h=W6(s,i,90),d=j6(t,e,m),p=W6(o,a,90),g=j6(r,n,m),x):m},x.extentMajor([[-180,-90+rt],[180,90-rt]]).extentMinor([[-180,-80-rt],[180,80+rt]])}const E1=e=>e;var _T=new Di,AC=new Di,YV,KV,kC,CC,Nl={point:Ar,lineStart:Ar,lineEnd:Ar,polygonStart:function(){Nl.lineStart=q0e,Nl.lineEnd=Y0e},polygonEnd:function(){Nl.lineStart=Nl.lineEnd=Nl.point=Ar,_T.add(Ot(AC)),AC=new Di},result:function(){var e=_T/2;return _T=new Di,e}};function q0e(){Nl.point=X0e}function X0e(e,t){Nl.point=JV,YV=kC=e,KV=CC=t}function JV(e,t){AC.add(CC*e-kC*t),kC=e,CC=t}function Y0e(){JV(YV,KV)}var H0=1/0,T2=H0,w1=-H0,A2=w1,k2={point:K0e,lineStart:Ar,lineEnd:Ar,polygonStart:Ar,polygonEnd:Ar,result:function(){var e=[[H0,T2],[w1,A2]];return w1=A2=-(T2=H0=1/0),e}};function K0e(e,t){e<H0&&(H0=e),e>w1&&(w1=e),t<T2&&(T2=t),t>A2&&(A2=t)}var FC=0,OC=0,Xg=0,C2=0,F2=0,Zd=0,NC=0,DC=0,Yg=0,ZV,QV,ko,Co,ea={point:Eh,lineStart:G6,lineEnd:q6,polygonStart:function(){ea.lineStart=Q0e,ea.lineEnd=epe},polygonEnd:function(){ea.point=Eh,ea.lineStart=G6,ea.lineEnd=q6},result:function(){var e=Yg?[NC/Yg,DC/Yg]:Zd?[C2/Zd,F2/Zd]:Xg?[FC/Xg,OC/Xg]:[NaN,NaN];return FC=OC=Xg=C2=F2=Zd=NC=DC=Yg=0,e}};function Eh(e,t){FC+=e,OC+=t,++Xg}function G6(){ea.point=J0e}function J0e(e,t){ea.point=Z0e,Eh(ko=e,Co=t)}function Z0e(e,t){var n=e-ko,r=t-Co,i=Pi(n*n+r*r);C2+=i*(ko+e)/2,F2+=i*(Co+t)/2,Zd+=i,Eh(ko=e,Co=t)}function q6(){ea.point=Eh}function Q0e(){ea.point=tpe}function epe(){eW(ZV,QV)}function tpe(e,t){ea.point=eW,Eh(ZV=ko=e,QV=Co=t)}function eW(e,t){var n=e-ko,r=t-Co,i=Pi(n*n+r*r);C2+=i*(ko+e)/2,F2+=i*(Co+t)/2,Zd+=i,i=Co*e-ko*t,NC+=i*(ko+e),DC+=i*(Co+t),Yg+=i*3,Eh(ko=e,Co=t)}function tW(e){this._context=e}tW.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Li);break}}},result:Ar};var RC=new Di,bT,nW,rW,Kg,Jg,S1={point:Ar,lineStart:function(){S1.point=npe},lineEnd:function(){bT&&iW(nW,rW),S1.point=Ar},polygonStart:function(){bT=!0},polygonEnd:function(){bT=null},result:function(){var e=+RC;return RC=new Di,e}};function npe(e,t){S1.point=iW,nW=Kg=e,rW=Jg=t}function iW(e,t){Kg-=e,Jg-=t,RC.add(Pi(Kg*Kg+Jg*Jg)),Kg=e,Jg=t}let X6,O2,Y6,K6;class J6{constructor(t){this._append=t==null?sW:rpe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Y6||this._append!==O2){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Y6=r,O2=this._append,K6=this._,this._=i}this._+=K6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function sW(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function rpe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return sW;if(t!==X6){const n=10**t;X6=t,O2=function(i){let s=1;this._+=i[0];for(const a=i.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return O2}function aW(e,t){let n=3,r=4.5,i,s;function a(o){return o&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Ol(o,i(s))),s.result()}return a.area=function(o){return Ol(o,i(Nl)),Nl.result()},a.measure=function(o){return Ol(o,i(S1)),S1.result()},a.bounds=function(o){return Ol(o,i(k2)),k2.result()},a.centroid=function(o){return Ol(o,i(ea)),ea.result()},a.projection=function(o){return arguments.length?(i=o==null?(e=null,E1):(e=o).stream,a):e},a.context=function(o){return arguments.length?(s=o==null?(t=null,new J6(n)):new tW(t=o),typeof r!="function"&&s.pointRadius(r),a):t},a.pointRadius=function(o){return arguments.length?(r=typeof o=="function"?o:(s.pointRadius(+o),+o),a):r},a.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(s=new J6(n)),a},a.projection(e).digits(n).context(t)}function kE(e){return function(t){var n=new IC;for(var r in e)n[r]=e[r];return n.stream=t,n}}function IC(){}IC.prototype={constructor:IC,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function G4(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ol(n,e.stream(k2)),t(k2.result()),r!=null&&e.clipExtent(r),e}function CE(e,t,n){return G4(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),o=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,l])},n)}function q4(e,t,n){return CE(e,[[0,0],t],n)}function X4(e,t,n){return G4(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),a=(i-s*(r[1][0]+r[0][0]))/2,o=-s*r[0][1];e.scale(150*s).translate([a,o])},n)}function Y4(e,t,n){return G4(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),a=-s*r[0][0],o=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,o])},n)}var Z6=16,ipe=nt(30*gt);function Q6(e,t){return+t?ape(e,t):spe(e)}function spe(e){return kE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ape(e,t){function n(r,i,s,a,o,l,c,u,f,h,d,p,g,m){var x=c-r,y=u-i,v=x*x+y*y;if(v>4*t&&g--){var _=a+h,b=o+d,w=l+p,E=Pi(_*_+b*b+w*w),T=ss(w/=E),S=Ot(Ot(w)-1)<rt||Ot(s-f)<rt?(s+f)/2:da(b,_),A=e(S,T),C=A[0],F=A[1],N=C-r,M=F-i,O=y*N-x*M;(O*O/v>t||Ot((x*N+y*M)/v-.5)>.3||a*h+o*d+l*p<ipe)&&(n(r,i,s,a,o,l,C,F,S,_/=E,b/=E,w,g,m),m.point(C,F),n(C,F,S,_,b,w,c,u,f,h,d,p,g,m))}}return function(r){var i,s,a,o,l,c,u,f,h,d,p,g,m={point:x,lineStart:y,lineEnd:_,polygonStart:function(){r.polygonStart(),m.lineStart=b},polygonEnd:function(){r.polygonEnd(),m.lineStart=y}};function x(T,S){T=e(T,S),r.point(T[0],T[1])}function y(){f=NaN,m.point=v,r.lineStart()}function v(T,S){var A=bh([T,S]),C=e(T,S);n(f,h,u,d,p,g,f=C[0],h=C[1],u=T,d=A[0],p=A[1],g=A[2],Z6,r),r.point(f,h)}function _(){m.point=x,r.lineEnd()}function b(){y(),m.point=w,m.lineEnd=E}function w(T,S){v(i=T,S),s=f,a=h,o=d,l=p,c=g,m.point=v}function E(){n(f,h,u,d,p,g,s,a,i,o,l,c,Z6,r),m.lineEnd=_,_()}return m}}var ope=kE({point:function(e,t){this.stream.point(e*gt,t*gt)}});function lpe(e){return kE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function cpe(e,t,n,r,i){function s(a,o){return a*=r,o*=i,[t+e*a,n-e*o]}return s.invert=function(a,o){return[(a-t)/e*r,(n-o)/e*i]},s}function eL(e,t,n,r,i,s){if(!s)return cpe(e,t,n,r,i);var a=nt(s),o=Ze(s),l=a*e,c=o*e,u=a/e,f=o/e,h=(o*n-a*t)/e,d=(o*t+a*n)/e;function p(g,m){return g*=r,m*=i,[l*g-c*m+t,n-c*g-l*m]}return p.invert=function(g,m){return[r*(u*g-f*m+h),i*(d-f*g-u*m)]},p}function el(e){return oW(function(){return e})()}function oW(e){var t,n=150,r=480,i=250,s=0,a=0,o=0,l=0,c=0,u,f=0,h=1,d=1,p=null,g=V6,m=null,x,y,v,_=E1,b=.5,w,E,T,S,A;function C(O){return T(O[0]*gt,O[1]*gt)}function F(O){return O=T.invert(O[0],O[1]),O&&[O[0]*Rn,O[1]*Rn]}C.stream=function(O){return S&&A===O?S:S=ope(lpe(u)(g(w(_(A=O)))))},C.preclip=function(O){return arguments.length?(g=O,p=void 0,M()):g},C.postclip=function(O){return arguments.length?(_=O,m=x=y=v=null,M()):_},C.clipAngle=function(O){return arguments.length?(g=+O?W0e(p=O*gt):(p=null,V6),M()):p*Rn},C.clipExtent=function(O){return arguments.length?(_=O==null?(m=x=y=v=null,E1):XV(m=+O[0][0],x=+O[0][1],y=+O[1][0],v=+O[1][1]),M()):m==null?null:[[m,x],[y,v]]},C.scale=function(O){return arguments.length?(n=+O,N()):n},C.translate=function(O){return arguments.length?(r=+O[0],i=+O[1],N()):[r,i]},C.center=function(O){return arguments.length?(s=O[0]%360*gt,a=O[1]%360*gt,N()):[s*Rn,a*Rn]},C.rotate=function(O){return arguments.length?(o=O[0]%360*gt,l=O[1]%360*gt,c=O.length>2?O[2]%360*gt:0,N()):[o*Rn,l*Rn,c*Rn]},C.angle=function(O){return arguments.length?(f=O%360*gt,N()):f*Rn},C.reflectX=function(O){return arguments.length?(h=O?-1:1,N()):h<0},C.reflectY=function(O){return arguments.length?(d=O?-1:1,N()):d<0},C.precision=function(O){return arguments.length?(w=Q6(E,b=O*O),M()):Pi(b)},C.fitExtent=function(O,D){return CE(C,O,D)},C.fitSize=function(O,D){return q4(C,O,D)},C.fitWidth=function(O,D){return X4(C,O,D)},C.fitHeight=function(O,D){return Y4(C,O,D)};function N(){var O=eL(n,0,0,h,d,f).apply(null,t(s,a)),D=eL(n,r-O[0],i-O[1],h,d,f);return u=WV(o,l,c),E=SC(t,D),T=SC(u,E),w=Q6(E,b),M()}function M(){return S=A=null,C}return function(){return t=e.apply(this,arguments),C.invert=t.invert&&F,N()}}function K4(e){var t=0,n=vt/3,r=oW(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*gt,n=s[1]*gt):[t*Rn,n*Rn]},i}function upe(e){var t=nt(e);function n(r,i){return[r*t,Ze(i)/t]}return n.invert=function(r,i){return[r/t,ss(i*t)]},n}function fpe(e,t){var n=Ze(e),r=(n+Ze(t))/2;if(Ot(r)<rt)return upe(e);var i=1+n*(2*r-n),s=Pi(i)/r;function a(o,l){var c=Pi(i-2*r*Ze(l))/r;return[c*Ze(o*=r),s-c*nt(o)]}return a.invert=function(o,l){var c=s-l,u=da(o,Ot(c))*ra(c);return c*r<0&&(u-=vt*ra(o)*ra(c)),[u/r,ss((i-(o*o+c*c)*r*r)/(2*r))]},a}function N2(){return K4(fpe).scale(155.424).center([0,33.6442])}function lW(){return N2().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hpe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function dpe(){var e,t,n=lW(),r,i=N2().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,a=N2().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],p=h[1];return l=null,r.point(d,p),l||(s.point(d,p),l)||(o.point(d,p),l)}u.invert=function(h){var d=n.scale(),p=n.translate(),g=(h[0]-p[0])/d,m=(h[1]-p[1])/d;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=hpe([n.stream(t=h),i.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),a.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),a.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),p=+h[0],g=+h[1];return r=n.translate(h).clipExtent([[p-.455*d,g-.238*d],[p+.455*d,g+.238*d]]).stream(c),s=i.translate([p-.307*d,g+.201*d]).clipExtent([[p-.425*d+rt,g+.12*d+rt],[p-.214*d-rt,g+.234*d-rt]]).stream(c),o=a.translate([p-.205*d,g+.212*d]).clipExtent([[p-.214*d+rt,g+.166*d+rt],[p-.115*d-rt,g+.234*d-rt]]).stream(c),f()},u.fitExtent=function(h,d){return CE(u,h,d)},u.fitSize=function(h,d){return q4(u,h,d)},u.fitWidth=function(h,d){return X4(u,h,d)},u.fitHeight=function(h,d){return Y4(u,h,d)};function f(){return e=t=null,u}return u.scale(1070)}function cW(e){return function(t,n){var r=nt(t),i=nt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ze(t),s*Ze(n)]}}function gx(e){return function(t,n){var r=Pi(t*t+n*n),i=e(r),s=Ze(i),a=nt(i);return[da(t*s,r*a),ss(r&&n*s/r)]}}var uW=cW(function(e){return Pi(2/(1+e))});uW.invert=gx(function(e){return 2*ss(e/2)});function ppe(){return el(uW).scale(124.75).clipAngle(180-.001)}var fW=cW(function(e){return(e=RV(e))&&e/Ze(e)});fW.invert=gx(function(e){return e});function gpe(){return el(fW).scale(79.4188).clipAngle(180-.001)}function FE(e,t){return[e,h2(W4((Cn+t)/2))]}FE.invert=function(e,t){return[e,2*Np(DV(t))-Cn]};function mpe(){return hW(FE).scale(961/Li)}function hW(e){var t=el(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,a=null,o,l,c;t.scale=function(f){return arguments.length?(r(f),u()):r()},t.translate=function(f){return arguments.length?(i(f),u()):i()},t.center=function(f){return arguments.length?(n(f),u()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=o=l=c=null:(a=+f[0][0],o=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):a==null?null:[[a,o],[l,c]]};function u(){var f=vt*r(),h=t(M0e(t.rotate()).invert([0,0]));return s(a==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===FE?[[Math.max(h[0]-f,a),o],[Math.min(h[0]+f,l),c]]:[[a,Math.max(h[1]-f,o)],[l,Math.min(h[1]+f,c)]])}return u()}function Wv(e){return W4((Cn+e)/2)}function xpe(e,t){var n=nt(e),r=e===t?Ze(e):h2(n/nt(t))/h2(Wv(t)/Wv(e)),i=n*xT(Wv(e),r)/r;if(!r)return FE;function s(a,o){i>0?o<-Cn+rt&&(o=-Cn+rt):o>Cn-rt&&(o=Cn-rt);var l=i/xT(Wv(o),r);return[l*Ze(r*a),i-l*nt(r*a)]}return s.invert=function(a,o){var l=i-o,c=ra(r)*Pi(a*a+l*l),u=da(a,Ot(l))*ra(l);return l*r<0&&(u-=vt*ra(a)*ra(l)),[u/r,2*Np(xT(i/c,1/r))-Cn]},s}function vpe(){return K4(xpe).scale(109.5).parallels([30,30])}function D2(e,t){return[e,t]}D2.invert=D2;function ype(){return el(D2).scale(152.63)}function _pe(e,t){var n=nt(e),r=e===t?Ze(e):(n-nt(t))/(t-e),i=n/r+e;if(Ot(r)<rt)return D2;function s(a,o){var l=i-o,c=r*a;return[l*Ze(c),i-l*nt(c)]}return s.invert=function(a,o){var l=i-o,c=da(a,Ot(l))*ra(l);return l*r<0&&(c-=vt*ra(a)*ra(l)),[c/r,i-ra(r)*Pi(a*a+l*l)]},s}function bpe(){return K4(_pe).scale(131.154).center([0,13.9389])}var km=1.340264,Cm=-.081106,Fm=893e-6,Om=.003796,R2=Pi(3)/2,Epe=12;function dW(e,t){var n=ss(R2*Ze(t)),r=n*n,i=r*r*r;return[e*nt(n)/(R2*(km+3*Cm*r+i*(7*Fm+9*Om*r))),n*(km+Cm*r+i*(Fm+Om*r))]}dW.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,a,o,l;s<Epe&&(o=n*(km+Cm*r+i*(Fm+Om*r))-t,l=km+3*Cm*r+i*(7*Fm+9*Om*r),n-=a=o/l,r=n*n,i=r*r*r,!(Ot(a)<pC));++s);return[R2*e*(km+3*Cm*r+i*(7*Fm+9*Om*r))/nt(n),ss(Ze(n)/R2)]};function wpe(){return el(dW).scale(177.158)}function pW(e,t){var n=nt(t),r=nt(e)*n;return[n*Ze(e)/r,Ze(t)/r]}pW.invert=gx(Np);function Spe(){return el(pW).scale(144.049).clipAngle(60)}function Tpe(){var e=1,t=0,n=0,r=1,i=1,s=0,a,o,l=null,c,u,f,h=1,d=1,p=kE({point:function(_,b){var w=v([_,b]);this.stream.point(w[0],w[1])}}),g=E1,m,x;function y(){return h=e*r,d=e*i,m=x=null,v}function v(_){var b=_[0]*h,w=_[1]*d;if(s){var E=w*a-b*o;b=b*a+w*o,w=E}return[b+t,w+n]}return v.invert=function(_){var b=_[0]-t,w=_[1]-n;if(s){var E=w*a+b*o;b=b*a-w*o,w=E}return[b/h,w/d]},v.stream=function(_){return m&&x===_?m:m=p(g(x=_))},v.postclip=function(_){return arguments.length?(g=_,l=c=u=f=null,y()):g},v.clipExtent=function(_){return arguments.length?(g=_==null?(l=c=u=f=null,E1):XV(l=+_[0][0],c=+_[0][1],u=+_[1][0],f=+_[1][1]),y()):l==null?null:[[l,c],[u,f]]},v.scale=function(_){return arguments.length?(e=+_,y()):e},v.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],y()):[t,n]},v.angle=function(_){return arguments.length?(s=_%360*gt,o=Ze(s),a=nt(s),y()):s*Rn},v.reflectX=function(_){return arguments.length?(r=_?-1:1,y()):r<0},v.reflectY=function(_){return arguments.length?(i=_?-1:1,y()):i<0},v.fitExtent=function(_,b){return CE(v,_,b)},v.fitSize=function(_,b){return q4(v,_,b)},v.fitWidth=function(_,b){return X4(v,_,b)},v.fitHeight=function(_,b){return Y4(v,_,b)},v}function gW(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}gW.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,a=s*s;n-=i=(n*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.015085*3+a*(-.044475*7+.028874*9*s-.005916*11*a)))}while(Ot(i)>rt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Ape(){return el(gW).scale(175.295)}function mW(e,t){return[nt(t)*Ze(e),Ze(t)]}mW.invert=gx(ss);function kpe(){return el(mW).scale(249.5).clipAngle(90+rt)}function xW(e,t){var n=nt(t),r=1+nt(e)*n;return[n*Ze(e)/r,Ze(t)/r]}xW.invert=gx(function(e){return 2*Np(e)});function Cpe(){return el(xW).scale(250).clipAngle(142)}function vW(e,t){return[h2(W4((Cn+t)/2)),-e]}vW.invert=function(e,t){return[-t,2*Np(DV(e))-Cn]};function Fpe(){var e=hW(vW),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ope(e,t){return e.parent===t.parent?1:2}function Npe(e){return e.reduce(Dpe,0)/e.length}function Dpe(e,t){return e+t.x}function Rpe(e){return 1+e.reduce(Ipe,0)}function Ipe(e,t){return Math.max(e,t.y)}function $pe(e){for(var t;t=e.children;)e=t[0];return e}function Mpe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Lpe(){var e=Ope,t=1,n=1,r=!1;function i(s){var a,o=0;s.eachAfter(function(h){var d=h.children;d?(h.x=Npe(d),h.y=Rpe(d)):(h.x=a?o+=e(h,a):0,h.y=0,a=h)});var l=$pe(s),c=Mpe(s),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return s.eachAfter(r?function(h){h.x=(h.x-s.x)*t,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*t,h.y=(1-(s.y?h.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Ppe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Bpe(){return this.eachAfter(Ppe)}function Upe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function zpe(e,t){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Hpe(e,t){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Vpe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Wpe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function jpe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Gpe(e){for(var t=this,n=qpe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function qpe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Xpe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ype(){return Array.from(this)}function Kpe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Jpe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Zpe(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function J4(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=tge)):t===void 0&&(t=ege);for(var n=new V0(e),r,i=[n],s,a,o,l;r=i.pop();)if((a=t(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new V0(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(yW)}function Qpe(){return J4(this).eachBefore(nge)}function ege(e){return e.children}function tge(e){return Array.isArray(e)?e[1]:null}function nge(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function yW(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function V0(e){this.data=e,this.depth=this.height=0,this.parent=null}V0.prototype=J4.prototype={constructor:V0,count:Bpe,each:Upe,eachAfter:Hpe,eachBefore:zpe,find:Vpe,sum:Wpe,sort:jpe,path:Gpe,ancestors:Xpe,descendants:Ype,leaves:Kpe,links:Jpe,copy:Qpe,[Symbol.iterator]:Zpe};function e_(e){return e==null?null:_W(e)}function _W(e){if(typeof e!="function")throw new Error;return e}function Of(){return 0}function Vd(e){return function(){return e}}const rge=1664525,ige=1013904223,tL=4294967296;function sge(){let e=1;return()=>(e=(rge*e+ige)%tL)/tL}function age(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oge(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function lge(e,t){for(var n=0,r=(e=oge(Array.from(e),t)).length,i=[],s,a;n<r;)s=e[n],a&&bW(a,s)?++n:(a=uge(i=cge(i,s)),n=0);return a}function cge(e,t){var n,r;if(ET(t,e))return[t];for(n=0;n<e.length;++n)if(jv(t,e[n])&&ET(Zg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(jv(Zg(e[n],e[r]),t)&&jv(Zg(e[n],t),e[r])&&jv(Zg(e[r],t),e[n])&&ET(EW(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function jv(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function bW(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ET(e,t){for(var n=0;n<t.length;++n)if(!bW(e,t[n]))return!1;return!0}function uge(e){switch(e.length){case 1:return fge(e[0]);case 2:return Zg(e[0],e[1]);case 3:return EW(e[0],e[1],e[2])}}function fge(e){return{x:e.x,y:e.y,r:e.r}}function Zg(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,a=t.y,o=t.r,l=s-n,c=a-r,u=o-i,f=Math.sqrt(l*l+c*c);return{x:(n+s+l/f*u)/2,y:(r+a+c/f*u)/2,r:(f+i+o)/2}}function EW(e,t,n){var r=e.x,i=e.y,s=e.r,a=t.x,o=t.y,l=t.r,c=n.x,u=n.y,f=n.r,h=r-a,d=r-c,p=i-o,g=i-u,m=l-s,x=f-s,y=r*r+i*i-s*s,v=y-a*a-o*o+l*l,_=y-c*c-u*u+f*f,b=d*p-h*g,w=(p*_-g*v)/(b*2)-r,E=(g*m-p*x)/b,T=(d*v-h*_)/(b*2)-i,S=(h*x-d*m)/b,A=E*E+S*S-1,C=2*(s+w*E+T*S),F=w*w+T*T-s*s,N=-(Math.abs(A)>1e-6?(C+Math.sqrt(C*C-4*A*F))/(2*A):F/C);return{x:r+w+E*N,y:i+T+S*N,r:N}}function nL(e,t,n){var r=e.x-t.x,i,s,a=e.y-t.y,o,l,c=r*r+a*a;c?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(c+l-s)/(2*c),o=Math.sqrt(Math.max(0,l/c-i*i)),n.x=e.x-i*r-o*a,n.y=e.y-i*a+o*r):(i=(c+s-l)/(2*c),o=Math.sqrt(Math.max(0,s/c-i*i)),n.x=t.x+i*r-o*a,n.y=t.y+i*a+o*r)):(n.x=t.x+n.r,n.y=t.y)}function rL(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function iL(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function Gv(e){this._=e,this.next=null,this.previous=null}function hge(e,t){if(!(s=(e=age(e)).length))return 0;var n,r,i,s,a,o,l,c,u,f,h;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;nL(r,n,i=e[2]),n=new Gv(n),r=new Gv(r),i=new Gv(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){nL(n._,r._,i=e[l]),i=new Gv(i),c=r.next,u=n.previous,f=r._.r,h=n._.r;do if(f<=h){if(rL(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.next}else{if(rL(u._,i._)){n=u,n.next=r,r.previous=n,--l;continue e}h+=u._.r,u=u.previous}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=iL(n);(i=i.next)!==r;)(o=iL(i))<a&&(n=i,a=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=lge(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function dge(e){return Math.sqrt(e.value)}function pge(){var e=null,t=1,n=1,r=Of;function i(s){const a=sge();return s.x=t/2,s.y=n/2,e?s.eachBefore(sL(e)).eachAfter(wT(r,.5,a)).eachBefore(aL(1)):s.eachBefore(sL(dge)).eachAfter(wT(Of,1,a)).eachAfter(wT(r,s.r/Math.min(t,n),a)).eachBefore(aL(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=e_(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Vd(+s),i):r},i}function sL(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function wT(e,t,n){return function(r){if(i=r.children){var i,s,a=i.length,o=e(r)*t||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=hge(i,n),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function aL(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function wW(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function mx(e,t,n,r,i){for(var s=e.children,a,o=-1,l=s.length,c=e.value&&(r-t)/e.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function gge(){var e=1,t=1,n=0,r=!1;function i(a){var o=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/o,a.eachBefore(s(t,o)),r&&a.eachBefore(wW),a}function s(a,o){return function(l){l.children&&mx(l,l.x0,a*(l.depth+1)/o,l.x1,a*(l.depth+2)/o);var c=l.x0,u=l.y0,f=l.x1-n,h=l.y1-n;f<c&&(c=f=(c+f)/2),h<u&&(u=h=(u+h)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=h}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var mge={depth:-1},oL={},ST={};function xge(e){return e.id}function vge(e){return e.parentId}function lL(){var e=xge,t=vge,n;function r(i){var s=Array.from(i),a=e,o=t,l,c,u,f,h,d,p,g,m=new Map;if(n!=null){const x=s.map((_,b)=>yge(n(_,b,i))),y=x.map(cL),v=new Set(x).add("");for(const _ of y)v.has(_)||(v.add(_),x.push(_),y.push(cL(_)),s.push(ST));a=(_,b)=>x[b],o=(_,b)=>y[b]}for(u=0,l=s.length;u<l;++u)c=s[u],d=s[u]=new V0(c),(p=a(c,u,i))!=null&&(p+="")&&(g=d.id=p,m.set(g,m.has(g)?oL:d)),(p=o(c,u,i))!=null&&(p+="")&&(d.parent=p);for(u=0;u<l;++u)if(d=s[u],p=d.parent){if(h=m.get(p),!h)throw new Error("missing: "+p);if(h===oL)throw new Error("ambiguous: "+p);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===ST&&f.children.length===1;)f=f.children[0],--l;for(let x=s.length-1;x>=0&&(d=s[x],d.data===ST);--x)d.data=null}if(f.parent=mge,f.eachBefore(function(x){x.depth=x.parent.depth+1,--l}).eachBefore(yW),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=e_(i),r):e},r.parentId=function(i){return arguments.length?(t=e_(i),r):t},r.path=function(i){return arguments.length?(n=e_(i),r):n},r}function yge(e){e=`${e}`;let t=e.length;return $C(e,t-1)&&!$C(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function cL(e){let t=e.length;if(t<2)return"";for(;--t>1&&!$C(e,t););return e.slice(0,t)}function $C(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function _ge(e,t){return e.parent===t.parent?1:2}function TT(e){var t=e.children;return t?t[0]:e.t}function AT(e){var t=e.children;return t?t[t.length-1]:e.t}function bge(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ege(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function wge(e,t,n){return e.a.parent===t.parent?e.a:n}function t_(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}t_.prototype=Object.create(V0.prototype);function Sge(e){for(var t=new t_(e,0),n,r=[t],i,s,a,o;n=r.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)r.push(i=n.children[a]=new t_(s[a],a)),i.parent=n;return(t.parent=new t_(null,0)).children=[t],t}function Tge(){var e=_ge,t=1,n=1,r=null;function i(c){var u=Sge(c);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(a),r)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(y){y.x<f.x&&(f=y),y.x>h.x&&(h=y),y.depth>d.depth&&(d=y)});var p=f===h?1:e(f,h)/2,g=p-f.x,m=t/(h.x+p+g),x=n/(d.depth||1);c.eachBefore(function(y){y.x=(y.x+g)*m,y.y=y.depth*x})}return c}function s(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){Ege(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+e(c._,h._));c.parent.A=o(c,h,c.parent.A||f[0])}function a(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function o(c,u,f){if(u){for(var h=c,d=c,p=u,g=h.parent.children[0],m=h.m,x=d.m,y=p.m,v=g.m,_;p=AT(p),h=TT(h),p&&h;)g=TT(g),d=AT(d),d.a=c,_=p.z+y-h.z-m+e(p._,h._),_>0&&(bge(wge(p,c,f),c,_),m+=_,x+=_),y+=p.m,m+=h.m,v+=g.m,x+=d.m;p&&!AT(d)&&(d.t=p,d.m+=y-x),h&&!TT(g)&&(g.t=h,g.m+=m-v,f=c)}return f}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}function OE(e,t,n,r,i){for(var s=e.children,a,o=-1,l=s.length,c=e.value&&(i-n)/e.value;++o<l;)a=s[o],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var SW=(1+Math.sqrt(5))/2;function TW(e,t,n,r,i,s){for(var a=[],o=t.children,l,c,u=0,f=0,h=o.length,d,p,g=t.value,m,x,y,v,_,b,w;u<h;){d=i-n,p=s-r;do m=o[f++].value;while(!m&&f<h);for(x=y=m,b=Math.max(p/d,d/p)/(g*e),w=m*m*b,_=Math.max(y/w,w/x);f<h;++f){if(m+=c=o[f].value,c<x&&(x=c),c>y&&(y=c),w=m*m*b,v=Math.max(y/w,w/x),v>_){m-=c;break}_=v}a.push(l={value:m,dice:d<p,children:o.slice(u,f)}),l.dice?mx(l,n,r,i,g?r+=p*m/g:s):OE(l,n,r,g?n+=d*m/g:i,s),g-=m,u=f}return a}const AW=function e(t){function n(r,i,s,a,o){TW(t,r,i,s,a,o)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(SW);function Age(){var e=AW,t=!1,n=1,r=1,i=[0],s=Of,a=Of,o=Of,l=Of,c=Of;function u(h){return h.x0=h.y0=0,h.x1=n,h.y1=r,h.eachBefore(f),i=[0],t&&h.eachBefore(wW),h}function f(h){var d=i[h.depth],p=h.x0+d,g=h.y0+d,m=h.x1-d,x=h.y1-d;m<p&&(p=m=(p+m)/2),x<g&&(g=x=(g+x)/2),h.x0=p,h.y0=g,h.x1=m,h.y1=x,h.children&&(d=i[h.depth+1]=s(h)/2,p+=c(h)-d,g+=a(h)-d,m-=o(h)-d,x-=l(h)-d,m<p&&(p=m=(p+m)/2),x<g&&(g=x=(g+x)/2),e(h,p,g,m,x))}return u.round=function(h){return arguments.length?(t=!!h,u):t},u.size=function(h){return arguments.length?(n=+h[0],r=+h[1],u):[n,r]},u.tile=function(h){return arguments.length?(e=_W(h),u):e},u.padding=function(h){return arguments.length?u.paddingInner(h).paddingOuter(h):u.paddingInner()},u.paddingInner=function(h){return arguments.length?(s=typeof h=="function"?h:Vd(+h),u):s},u.paddingOuter=function(h){return arguments.length?u.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):u.paddingTop()},u.paddingTop=function(h){return arguments.length?(a=typeof h=="function"?h:Vd(+h),u):a},u.paddingRight=function(h){return arguments.length?(o=typeof h=="function"?h:Vd(+h),u):o},u.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Vd(+h),u):l},u.paddingLeft=function(h){return arguments.length?(c=typeof h=="function"?h:Vd(+h),u):c},u}function kge(e,t,n,r,i){var s=e.children,a,o=s.length,l,c=new Array(o+1);for(c[0]=l=a=0;a<o;++a)c[a+1]=l+=s[a].value;u(0,o,e.value,t,n,r,i);function u(f,h,d,p,g,m,x){if(f>=h-1){var y=s[f];y.x0=p,y.y0=g,y.x1=m,y.y1=x;return}for(var v=c[f],_=d/2+v,b=f+1,w=h-1;b<w;){var E=b+w>>>1;c[E]<_?b=E+1:w=E}_-c[b-1]<c[b]-_&&f+1<b&&--b;var T=c[b]-v,S=d-T;if(m-p>x-g){var A=d?(p*S+m*T)/d:m;u(f,b,T,p,g,A,x),u(b,h,S,A,g,m,x)}else{var C=d?(g*S+x*T)/d:x;u(f,b,T,p,g,m,C),u(b,h,S,p,C,m,x)}}}function Cge(e,t,n,r,i){(e.depth&1?OE:mx)(e,t,n,r,i)}const Fge=function e(t){function n(r,i,s,a,o){if((l=r._squarify)&&l.ratio===t)for(var l,c,u,f,h=-1,d,p=l.length,g=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?mx(c,i,s,a,g?s+=(o-s)*c.value/g:o):OE(c,i,s,g?i+=(a-i)*c.value/g:a,o),g-=c.value}else r._squarify=l=TW(t,r,i,s,a,o),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(SW);function tl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const MC=Symbol("implicit");function Z4(){var e=new YM,t=[],n=[],r=MC;function i(s){let a=e.get(s);if(a===void 0){if(r!==MC)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new YM;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Z4(t,n).unknown(r)},tl.apply(i,arguments),i}function Oge(e){return function(){return e}}function LC(e){return+e}var uL=[0,1];function es(e){return e}function PC(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Oge(isNaN(t)?NaN:.5)}function Nge(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Dge(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=PC(i,r),s=n(a,s)):(r=PC(r,i),s=n(s,a)),function(o){return s(r(o))}}function Rge(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=PC(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var l=vu(e,o,1,r)-1;return s[l](i[l](o))}}function xx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function NE(){var e=uL,t=uL,n=Vu,r,i,s,a=es,o,l,c;function u(){var h=Math.min(e.length,t.length);return a!==es&&(a=Nge(e[0],e[h-1])),o=h>2?Rge:Dge,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=o(e.map(r),t,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=o(t,e.map(r),Zs)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,LC),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=hx,u()},f.clamp=function(h){return arguments.length?(a=h?!0:es,u()):a!==es},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,u()}}function kW(){return NE()(es,es)}function CW(e,t,n,r){var i=yu(e,t,n),s;switch(r=_h(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=OV(i,a))&&(r.precision=s),V4(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=NV(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=FV(i))&&(r.precision=s-(r.type==="%")*2);break}}return AE(r)}function Jh(e){var t=e.domain;return e.ticks=function(n){var r=t();return eC(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return CW(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=tC(a,o,n),c===l)return r[i]=a,r[s]=o,t(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function FW(){var e=kW();return e.copy=function(){return xx(e,FW())},tl.apply(e,arguments),Jh(e)}function OW(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,LC),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return OW(e).unknown(t)},e=arguments.length?Array.from(e,LC):[0,1],Jh(n)}function NW(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function fL(e){return Math.log(e)}function hL(e){return Math.exp(e)}function Ige(e){return-Math.log(-e)}function $ge(e){return-Math.exp(-e)}function Mge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Lge(e){return e===10?Mge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Pge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function dL(e){return(t,n)=>-e(-t,n)}function Q4(e){const t=e(fL,hL),n=t.domain;let r=10,i,s;function a(){return i=Pge(r),s=Lge(r),n()[0]<0?(i=dL(i),s=dL(s),e(Ige,$ge)):e(fL,hL),t}return t.base=function(o){return arguments.length?(r=+o,a()):r},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const f=u<c;f&&([c,u]=[u,c]);let h=i(c),d=i(u),p,g;const m=o==null?10:+o;let x=[];if(!(r%1)&&d-h<m){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(p=1;p<r;++p)if(g=h<0?p/s(-h):p*s(h),!(g<c)){if(g>u)break;x.push(g)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(g=h>0?p/s(-h):p*s(h),!(g<c)){if(g>u)break;x.push(g)}x.length*2<m&&(x=eC(c,u,m))}else x=eC(h,d,Math.min(d-h,m)).map(s);return f?x.reverse():x},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=_h(l)).precision==null&&(l.trim=!0),l=AE(l)),o===1/0)return l;const c=Math.max(1,r*o/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},t.nice=()=>n(NW(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function DW(){const e=Q4(NE()).domain([1,10]);return e.copy=()=>xx(e,DW()).base(e.base()),tl.apply(e,arguments),e}function pL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gL(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function eO(e){var t=1,n=e(pL(t),gL(t));return n.constant=function(r){return arguments.length?e(pL(t=+r),gL(t)):t},Jh(n)}function RW(){var e=eO(NE());return e.copy=function(){return xx(e,RW()).constant(e.constant())},tl.apply(e,arguments)}function mL(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Bge(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Uge(e){return e<0?-e*e:e*e}function tO(e){var t=e(es,es),n=1;function r(){return n===1?e(es,es):n===.5?e(Bge,Uge):e(mL(n),mL(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Jh(t)}function nO(){var e=tO(NE());return e.copy=function(){return xx(e,nO()).exponent(e.exponent())},tl.apply(e,arguments),e}function zge(){return nO.apply(null,arguments).exponent(.5)}function IW(){var e=[],t=[],n=[],r;function i(){var a=0,o=Math.max(1,t.length);for(n=new Array(o-1);++a<o;)n[a-1]=TH(e,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:t[vu(n,a)]}return s.invertExtent=function(a){var o=t.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let o of a)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(zl),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return IW().domain(e).range(t).unknown(r)},tl.apply(s,arguments)}function $W(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[vu(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return $W().domain([e,t]).range(i).unknown(s)},tl.apply(Jh(a),arguments)}function MW(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[vu(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return MW().domain(e).range(t).unknown(n)},tl.apply(i,arguments)}const kT=new Date,CT=new Date;function ir(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),t(s,o),e(s);while(c<s&&s<a);return l},i.filter=s=>ir(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),n&&(i.count=(s,a)=>(kT.setTime(+s),CT.setTime(+a),e(kT),e(CT),Math.floor(n(kT,CT))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const W0=ir(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);W0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ir(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):W0);W0.range;const Rl=1e3,ia=Rl*60,Il=ia*60,rc=Il*24,rO=rc*7,xL=rc*30,FT=rc*365,$l=ir(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Rl)},(e,t)=>(t-e)/Rl,e=>e.getUTCSeconds());$l.range;const DE=ir(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rl)},(e,t)=>{e.setTime(+e+t*ia)},(e,t)=>(t-e)/ia,e=>e.getMinutes());DE.range;const RE=ir(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ia)},(e,t)=>(t-e)/ia,e=>e.getUTCMinutes());RE.range;const IE=ir(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Rl-e.getMinutes()*ia)},(e,t)=>{e.setTime(+e+t*Il)},(e,t)=>(t-e)/Il,e=>e.getHours());IE.range;const $E=ir(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Il)},(e,t)=>(t-e)/Il,e=>e.getUTCHours());$E.range;const Vl=ir(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ia)/rc,e=>e.getDate()-1);Vl.range;const lu=ir(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rc,e=>e.getUTCDate()-1);lu.range;const LW=ir(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/rc,e=>Math.floor(e/rc));LW.range;function Zh(e){return ir(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ia)/rO)}const Dp=Zh(0),I2=Zh(1),Hge=Zh(2),Vge=Zh(3),j0=Zh(4),Wge=Zh(5),jge=Zh(6);Dp.range;I2.range;Hge.range;Vge.range;j0.range;Wge.range;jge.range;function Qh(e){return ir(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/rO)}const Rp=Qh(0),$2=Qh(1),Gge=Qh(2),qge=Qh(3),G0=Qh(4),Xge=Qh(5),Yge=Qh(6);Rp.range;$2.range;Gge.range;qge.range;G0.range;Xge.range;Yge.range;const T1=ir(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());T1.range;const A1=ir(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());A1.range;const Wo=ir(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ir(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Wo.range;const jo=ir(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());jo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ir(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});jo.range;function PW(e,t,n,r,i,s){const a=[[$l,1,Rl],[$l,5,5*Rl],[$l,15,15*Rl],[$l,30,30*Rl],[s,1,ia],[s,5,5*ia],[s,15,15*ia],[s,30,30*ia],[i,1,Il],[i,3,3*Il],[i,6,6*Il],[i,12,12*Il],[r,1,rc],[r,2,2*rc],[n,1,rO],[t,1,xL],[t,3,3*xL],[e,1,FT]];function o(c,u,f){const h=u<c;h&&([c,u]=[u,c]);const d=f&&typeof f.range=="function"?f:l(c,u,f),p=d?d.range(c,+u+1):[];return h?p.reverse():p}function l(c,u,f){const h=Math.abs(u-c)/f,d=Fp(([,,m])=>m).right(a,h);if(d===a.length)return e.every(yu(c/FT,u/FT,f));if(d===0)return W0.every(Math.max(yu(c,u,f),1));const[p,g]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return p.every(g)}return[o,l]}const[Kge,Jge]=PW(jo,A1,Rp,LW,$E,RE),[Zge,Qge]=PW(Wo,T1,Dp,Vl,IE,DE);function OT(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function NT(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function BW(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=yg(i),u=_g(i),f=yg(s),h=_g(s),d=yg(a),p=_g(a),g=yg(o),m=_g(o),x=yg(l),y=_g(l),v={a:I,A:U,b:Y,B:X,c:null,d:wL,e:wL,f:Eme,g:Dme,G:Ime,H:yme,I:_me,j:bme,L:UW,m:wme,M:Sme,p:de,q:le,Q:AL,s:kL,S:Tme,u:Ame,U:kme,V:Cme,w:Fme,W:Ome,x:null,X:null,y:Nme,Y:Rme,Z:$me,"%":TL},_={a:ye,A:ve,b:Ee,B:Ne,c:null,d:SL,e:SL,f:Bme,g:Yme,G:Jme,H:Mme,I:Lme,j:Pme,L:HW,m:Ume,M:zme,p:Xe,q:z,Q:AL,s:kL,S:Hme,u:Vme,U:Wme,V:jme,w:Gme,W:qme,x:null,X:null,y:Xme,Y:Kme,Z:Zme,"%":TL},b={a:A,A:C,b:F,B:N,c:M,d:bL,e:bL,f:gme,g:_L,G:yL,H:EL,I:EL,j:fme,L:pme,m:ume,M:hme,p:S,q:cme,Q:xme,s:vme,S:dme,u:ime,U:sme,V:ame,w:rme,W:ome,x:O,X:D,y:_L,Y:yL,Z:lme,"%":mme};v.x=w(n,v),v.X=w(r,v),v.c=w(t,v),_.x=w(n,_),_.X=w(r,_),_.c=w(t,_);function w(q,G){return function(H){var J=[],k=-1,L=0,K=q.length,Z,ee,te;for(H instanceof Date||(H=new Date(+H));++k<K;)q.charCodeAt(k)===37&&(J.push(q.slice(L,k)),(ee=vL[Z=q.charAt(++k)])!=null?Z=q.charAt(++k):ee=Z==="e"?" ":"0",(te=G[Z])&&(Z=te(H,ee)),J.push(Z),L=k+1);return J.push(q.slice(L,k)),J.join("")}}function E(q,G){return function(H){var J=vg(1900,void 0,1),k=T(J,q,H+="",0),L,K;if(k!=H.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(G&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(L=NT(vg(J.y,0,1)),K=L.getUTCDay(),L=K>4||K===0?$2.ceil(L):$2(L),L=lu.offset(L,(J.V-1)*7),J.y=L.getUTCFullYear(),J.m=L.getUTCMonth(),J.d=L.getUTCDate()+(J.w+6)%7):(L=OT(vg(J.y,0,1)),K=L.getDay(),L=K>4||K===0?I2.ceil(L):I2(L),L=Vl.offset(L,(J.V-1)*7),J.y=L.getFullYear(),J.m=L.getMonth(),J.d=L.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),K="Z"in J?NT(vg(J.y,0,1)).getUTCDay():OT(vg(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(K+5)%7:J.w+J.U*7-(K+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,NT(J)):OT(J)}}function T(q,G,H,J){for(var k=0,L=G.length,K=H.length,Z,ee;k<L;){if(J>=K)return-1;if(Z=G.charCodeAt(k++),Z===37){if(Z=G.charAt(k++),ee=b[Z in vL?G.charAt(k++):Z],!ee||(J=ee(q,H,J))<0)return-1}else if(Z!=H.charCodeAt(J++))return-1}return J}function S(q,G,H){var J=c.exec(G.slice(H));return J?(q.p=u.get(J[0].toLowerCase()),H+J[0].length):-1}function A(q,G,H){var J=d.exec(G.slice(H));return J?(q.w=p.get(J[0].toLowerCase()),H+J[0].length):-1}function C(q,G,H){var J=f.exec(G.slice(H));return J?(q.w=h.get(J[0].toLowerCase()),H+J[0].length):-1}function F(q,G,H){var J=x.exec(G.slice(H));return J?(q.m=y.get(J[0].toLowerCase()),H+J[0].length):-1}function N(q,G,H){var J=g.exec(G.slice(H));return J?(q.m=m.get(J[0].toLowerCase()),H+J[0].length):-1}function M(q,G,H){return T(q,t,G,H)}function O(q,G,H){return T(q,n,G,H)}function D(q,G,H){return T(q,r,G,H)}function I(q){return a[q.getDay()]}function U(q){return s[q.getDay()]}function Y(q){return l[q.getMonth()]}function X(q){return o[q.getMonth()]}function de(q){return i[+(q.getHours()>=12)]}function le(q){return 1+~~(q.getMonth()/3)}function ye(q){return a[q.getUTCDay()]}function ve(q){return s[q.getUTCDay()]}function Ee(q){return l[q.getUTCMonth()]}function Ne(q){return o[q.getUTCMonth()]}function Xe(q){return i[+(q.getUTCHours()>=12)]}function z(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var G=w(q+="",v);return G.toString=function(){return q},G},parse:function(q){var G=E(q+="",!1);return G.toString=function(){return q},G},utcFormat:function(q){var G=w(q+="",_);return G.toString=function(){return q},G},utcParse:function(q){var G=E(q+="",!0);return G.toString=function(){return q},G}}}var vL={"-":"",_:" ",0:"0"},yr=/^\s*\d+/,eme=/^%/,tme=/[\\^$*+?|[\]().{}]/g;function Bt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function nme(e){return e.replace(tme,"\\$&")}function yg(e){return new RegExp("^(?:"+e.map(nme).join("|")+")","i")}function _g(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function rme(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ime(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function sme(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ame(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ome(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function yL(e,t,n){var r=yr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function _L(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lme(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cme(e,t,n){var r=yr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function ume(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function bL(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function fme(e,t,n){var r=yr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function EL(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function hme(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function dme(e,t,n){var r=yr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function pme(e,t,n){var r=yr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function gme(e,t,n){var r=yr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mme(e,t,n){var r=eme.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function xme(e,t,n){var r=yr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function vme(e,t,n){var r=yr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wL(e,t){return Bt(e.getDate(),t,2)}function yme(e,t){return Bt(e.getHours(),t,2)}function _me(e,t){return Bt(e.getHours()%12||12,t,2)}function bme(e,t){return Bt(1+Vl.count(Wo(e),e),t,3)}function UW(e,t){return Bt(e.getMilliseconds(),t,3)}function Eme(e,t){return UW(e,t)+"000"}function wme(e,t){return Bt(e.getMonth()+1,t,2)}function Sme(e,t){return Bt(e.getMinutes(),t,2)}function Tme(e,t){return Bt(e.getSeconds(),t,2)}function Ame(e){var t=e.getDay();return t===0?7:t}function kme(e,t){return Bt(Dp.count(Wo(e)-1,e),t,2)}function zW(e){var t=e.getDay();return t>=4||t===0?j0(e):j0.ceil(e)}function Cme(e,t){return e=zW(e),Bt(j0.count(Wo(e),e)+(Wo(e).getDay()===4),t,2)}function Fme(e){return e.getDay()}function Ome(e,t){return Bt(I2.count(Wo(e)-1,e),t,2)}function Nme(e,t){return Bt(e.getFullYear()%100,t,2)}function Dme(e,t){return e=zW(e),Bt(e.getFullYear()%100,t,2)}function Rme(e,t){return Bt(e.getFullYear()%1e4,t,4)}function Ime(e,t){var n=e.getDay();return e=n>=4||n===0?j0(e):j0.ceil(e),Bt(e.getFullYear()%1e4,t,4)}function $me(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Bt(t/60|0,"0",2)+Bt(t%60,"0",2)}function SL(e,t){return Bt(e.getUTCDate(),t,2)}function Mme(e,t){return Bt(e.getUTCHours(),t,2)}function Lme(e,t){return Bt(e.getUTCHours()%12||12,t,2)}function Pme(e,t){return Bt(1+lu.count(jo(e),e),t,3)}function HW(e,t){return Bt(e.getUTCMilliseconds(),t,3)}function Bme(e,t){return HW(e,t)+"000"}function Ume(e,t){return Bt(e.getUTCMonth()+1,t,2)}function zme(e,t){return Bt(e.getUTCMinutes(),t,2)}function Hme(e,t){return Bt(e.getUTCSeconds(),t,2)}function Vme(e){var t=e.getUTCDay();return t===0?7:t}function Wme(e,t){return Bt(Rp.count(jo(e)-1,e),t,2)}function VW(e){var t=e.getUTCDay();return t>=4||t===0?G0(e):G0.ceil(e)}function jme(e,t){return e=VW(e),Bt(G0.count(jo(e),e)+(jo(e).getUTCDay()===4),t,2)}function Gme(e){return e.getUTCDay()}function qme(e,t){return Bt($2.count(jo(e)-1,e),t,2)}function Xme(e,t){return Bt(e.getUTCFullYear()%100,t,2)}function Yme(e,t){return e=VW(e),Bt(e.getUTCFullYear()%100,t,2)}function Kme(e,t){return Bt(e.getUTCFullYear()%1e4,t,4)}function Jme(e,t){var n=e.getUTCDay();return e=n>=4||n===0?G0(e):G0.ceil(e),Bt(e.getUTCFullYear()%1e4,t,4)}function Zme(){return"+0000"}function TL(){return"%"}function AL(e){return+e}function kL(e){return Math.floor(+e/1e3)}var Cd,iO,WW,sO,jW;Qme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qme(e){return Cd=BW(e),iO=Cd.format,WW=Cd.parse,sO=Cd.utcFormat,jW=Cd.utcParse,Cd}function e1e(e){return new Date(e)}function t1e(e){return e instanceof Date?+e:+new Date(+e)}function aO(e,t,n,r,i,s,a,o,l,c){var u=kW(),f=u.invert,h=u.domain,d=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),x=c("%a %d"),y=c("%b %d"),v=c("%B"),_=c("%Y");function b(w){return(l(w)<w?d:o(w)<w?p:a(w)<w?g:s(w)<w?m:r(w)<w?i(w)<w?x:y:n(w)<w?v:_)(w)}return u.invert=function(w){return new Date(f(w))},u.domain=function(w){return arguments.length?h(Array.from(w,t1e)):h().map(e1e)},u.ticks=function(w){var E=h();return e(E[0],E[E.length-1],w??10)},u.tickFormat=function(w,E){return E==null?b:c(E)},u.nice=function(w){var E=h();return(!w||typeof w.range!="function")&&(w=t(E[0],E[E.length-1],w??10)),w?h(NW(E,w)):u},u.copy=function(){return xx(u,aO(e,t,n,r,i,s,a,o,l,c))},u}function n1e(){return tl.apply(aO(Zge,Qge,Wo,T1,Dp,Vl,IE,DE,$l,iO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function r1e(){return tl.apply(aO(Kge,Jge,jo,A1,Rp,lu,$E,RE,$l,sO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ME(){var e=0,t=1,n,r,i,s,a=es,o=!1,l;function c(f){return f==null||isNaN(f=+f)?l:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(f){return arguments.length?(o=!!f,c):o},c.interpolator=function(f){return arguments.length?(a=f,c):a};function u(f){return function(h){var d,p;return arguments.length?([d,p]=h,a=f(d,p),c):[a(0),a(1)]}}return c.range=u(Vu),c.rangeRound=u(hx),c.unknown=function(f){return arguments.length?(l=f,c):l},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),c}}function ju(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function oO(){var e=Jh(ME()(es));return e.copy=function(){return ju(e,oO())},Wu.apply(e,arguments)}function GW(){var e=Q4(ME()).domain([1,10]);return e.copy=function(){return ju(e,GW()).base(e.base())},Wu.apply(e,arguments)}function qW(){var e=eO(ME());return e.copy=function(){return ju(e,qW()).constant(e.constant())},Wu.apply(e,arguments)}function lO(){var e=tO(ME());return e.copy=function(){return ju(e,lO()).exponent(e.exponent())},Wu.apply(e,arguments)}function i1e(){return lO.apply(null,arguments).exponent(.5)}function LE(){var e=0,t=.5,n=1,r=1,i,s,a,o,l,c=es,u,f=!1,h;function d(g){return isNaN(g=+g)?h:(g=.5+((g=+u(g))-s)*(r*g<r*s?o:l),c(f?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),s=u(t=+t),a=u(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,d):[e,t,n]},d.clamp=function(g){return arguments.length?(f=!!g,d):f},d.interpolator=function(g){return arguments.length?(c=g,d):c};function p(g){return function(m){var x,y,v;return arguments.length?([x,y,v]=m,c=I4(g,[x,y,v]),d):[c(0),c(.5),c(1)]}}return d.range=p(Vu),d.rangeRound=p(hx),d.unknown=function(g){return arguments.length?(h=g,d):h},function(g){return u=g,i=g(e),s=g(t),a=g(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,d}}function XW(){var e=Jh(LE()(es));return e.copy=function(){return ju(e,XW())},Wu.apply(e,arguments)}function YW(){var e=Q4(LE()).domain([.1,1,10]);return e.copy=function(){return ju(e,YW()).base(e.base())},Wu.apply(e,arguments)}function KW(){var e=eO(LE());return e.copy=function(){return ju(e,KW()).constant(e.constant())},Wu.apply(e,arguments)}function cO(){var e=tO(LE());return e.copy=function(){return ju(e,cO()).exponent(e.exponent())},Wu.apply(e,arguments)}function s1e(){return cO.apply(null,arguments).exponent(.5)}function nl(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const a1e=nl("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),o1e=nl("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),l1e=nl("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),c1e=nl("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),u1e=nl("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),f1e=nl("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),h1e=nl("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),d1e=nl("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),p1e=nl("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),g1e=nl("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function jt(e){return function(){return e}}const CL=Math.abs,Ur=Math.atan2,df=Math.cos,m1e=Math.max,DT=Math.min,go=Math.sin,Uf=Math.sqrt,Hr=1e-12,q0=Math.PI,M2=q0/2,JW=2*q0;function x1e(e){return e>1?0:e<-1?q0:Math.acos(e)}function FL(e){return e>=1?M2:e<=-1?-M2:Math.asin(e)}function PE(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new P4(t)}function v1e(e){return e.innerRadius}function y1e(e){return e.outerRadius}function _1e(e){return e.startAngle}function b1e(e){return e.endAngle}function E1e(e){return e&&e.padAngle}function w1e(e,t,n,r,i,s,a,o){var l=n-e,c=r-t,u=a-i,f=o-s,h=f*l-u*c;if(!(h*h<Hr))return h=(u*(t-s)-f*(e-i))/h,[e+h*l,t+h*c]}function qv(e,t,n,r,i,s,a){var o=e-n,l=t-r,c=(a?s:-s)/Uf(o*o+l*l),u=c*l,f=-c*o,h=e+u,d=t+f,p=n+u,g=r+f,m=(h+p)/2,x=(d+g)/2,y=p-h,v=g-d,_=y*y+v*v,b=i-s,w=h*g-p*d,E=(v<0?-1:1)*Uf(m1e(0,b*b*_-w*w)),T=(w*v-y*E)/_,S=(-w*y-v*E)/_,A=(w*v+y*E)/_,C=(-w*y+v*E)/_,F=T-m,N=S-x,M=A-m,O=C-x;return F*F+N*N>M*M+O*O&&(T=A,S=C),{cx:T,cy:S,x01:-u,y01:-f,x11:T*(i/b-1),y11:S*(i/b-1)}}function S1e(){var e=v1e,t=y1e,n=jt(0),r=null,i=_1e,s=b1e,a=E1e,o=null,l=PE(c);function c(){var u,f,h=+e.apply(this,arguments),d=+t.apply(this,arguments),p=i.apply(this,arguments)-M2,g=s.apply(this,arguments)-M2,m=CL(g-p),x=g>p;if(o||(o=u=l()),d<h&&(f=d,d=h,h=f),!(d>Hr))o.moveTo(0,0);else if(m>JW-Hr)o.moveTo(d*df(p),d*go(p)),o.arc(0,0,d,p,g,!x),h>Hr&&(o.moveTo(h*df(g),h*go(g)),o.arc(0,0,h,g,p,x));else{var y=p,v=g,_=p,b=g,w=m,E=m,T=a.apply(this,arguments)/2,S=T>Hr&&(r?+r.apply(this,arguments):Uf(h*h+d*d)),A=DT(CL(d-h)/2,+n.apply(this,arguments)),C=A,F=A,N,M;if(S>Hr){var O=FL(S/h*go(T)),D=FL(S/d*go(T));(w-=O*2)>Hr?(O*=x?1:-1,_+=O,b-=O):(w=0,_=b=(p+g)/2),(E-=D*2)>Hr?(D*=x?1:-1,y+=D,v-=D):(E=0,y=v=(p+g)/2)}var I=d*df(y),U=d*go(y),Y=h*df(b),X=h*go(b);if(A>Hr){var de=d*df(v),le=d*go(v),ye=h*df(_),ve=h*go(_),Ee;if(m<q0)if(Ee=w1e(I,U,ye,ve,de,le,Y,X)){var Ne=I-Ee[0],Xe=U-Ee[1],z=de-Ee[0],q=le-Ee[1],G=1/go(x1e((Ne*z+Xe*q)/(Uf(Ne*Ne+Xe*Xe)*Uf(z*z+q*q)))/2),H=Uf(Ee[0]*Ee[0]+Ee[1]*Ee[1]);C=DT(A,(h-H)/(G-1)),F=DT(A,(d-H)/(G+1))}else C=F=0}E>Hr?F>Hr?(N=qv(ye,ve,I,U,d,F,x),M=qv(de,le,Y,X,d,F,x),o.moveTo(N.cx+N.x01,N.cy+N.y01),F<A?o.arc(N.cx,N.cy,F,Ur(N.y01,N.x01),Ur(M.y01,M.x01),!x):(o.arc(N.cx,N.cy,F,Ur(N.y01,N.x01),Ur(N.y11,N.x11),!x),o.arc(0,0,d,Ur(N.cy+N.y11,N.cx+N.x11),Ur(M.cy+M.y11,M.cx+M.x11),!x),o.arc(M.cx,M.cy,F,Ur(M.y11,M.x11),Ur(M.y01,M.x01),!x))):(o.moveTo(I,U),o.arc(0,0,d,y,v,!x)):o.moveTo(I,U),!(h>Hr)||!(w>Hr)?o.lineTo(Y,X):C>Hr?(N=qv(Y,X,de,le,h,-C,x),M=qv(I,U,ye,ve,h,-C,x),o.lineTo(N.cx+N.x01,N.cy+N.y01),C<A?o.arc(N.cx,N.cy,C,Ur(N.y01,N.x01),Ur(M.y01,M.x01),!x):(o.arc(N.cx,N.cy,C,Ur(N.y01,N.x01),Ur(N.y11,N.x11),!x),o.arc(0,0,h,Ur(N.cy+N.y11,N.cx+N.x11),Ur(M.cy+M.y11,M.cx+M.x11),x),o.arc(M.cx,M.cy,C,Ur(M.y11,M.x11),Ur(M.y01,M.x01),!x))):o.arc(0,0,h,b,_,x)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-q0/2;return[df(f)*u,go(f)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:jt(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:jt(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:jt(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:jt(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:jt(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:jt(+u),c):s},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:jt(+u),c):a},c.context=function(u){return arguments.length?(o=u??null,c):o},c}function ZW(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QW(e){this._context=e}QW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function uO(e){return new QW(e)}function ej(e){return e[0]}function tj(e){return e[1]}function nj(e,t){var n=jt(!0),r=null,i=uO,s=null,a=PE(o);e=typeof e=="function"?e:e===void 0?ej:jt(e),t=typeof t=="function"?t:t===void 0?tj:jt(t);function o(l){var c,u=(l=ZW(l)).length,f,h=!1,d;for(r==null&&(s=i(d=a())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,c,l),+t(f,c,l));if(d)return s=null,d+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:jt(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:jt(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:jt(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function rj(e,t,n){var r=null,i=jt(!0),s=null,a=uO,o=null,l=PE(c);e=typeof e=="function"?e:e===void 0?ej:jt(+e),t=typeof t=="function"?t:jt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?tj:jt(+n);function c(f){var h,d,p,g=(f=ZW(f)).length,m,x=!1,y,v=new Array(g),_=new Array(g);for(s==null&&(o=a(y=l())),h=0;h<=g;++h){if(!(h<g&&i(m=f[h],h,f))===x)if(x=!x)d=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=d;--p)o.point(v[p],_[p]);o.lineEnd(),o.areaEnd()}x&&(v[h]=+e(m,h,f),_[h]=+t(m,h,f),o.point(r?+r(m,h,f):v[h],n?+n(m,h,f):_[h]))}if(y)return o=null,y+""||null}function u(){return nj().defined(i).curve(a).context(s)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:jt(+f),r=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:jt(+f),c):e},c.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:jt(+f),c):r},c.y=function(f){return arguments.length?(t=typeof f=="function"?f:jt(+f),n=null,c):t},c.y0=function(f){return arguments.length?(t=typeof f=="function"?f:jt(+f),c):t},c.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:jt(+f),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:jt(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),c):a},c.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),c):s},c}const T1e={draw(e,t){const n=Uf(t/q0);e.moveTo(n,0),e.arc(0,0,n,0,JW)}};function A1e(e,t){let n=null,r=PE(i);e=typeof e=="function"?e:jt(e||T1e),t=typeof t=="function"?t:jt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:jt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:jt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function bu(){}function L2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function BE(e){this._context=e}BE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:L2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:L2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function k1e(e){return new BE(e)}function ij(e){this._context=e}ij.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:L2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C1e(e){return new ij(e)}function sj(e){this._context=e}sj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:L2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function F1e(e){return new sj(e)}function aj(e,t){this._basis=new BE(e),this._beta=t}aj.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,a=t[n]-i,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(r+l*s),this._beta*t[o]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const O1e=function e(t){function n(r){return t===1?new BE(r):new aj(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function P2(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function fO(e,t){this._context=e,this._k=(1-t)/6}fO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:P2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:P2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const N1e=function e(t){function n(r){return new fO(r,t)}return n.tension=function(r){return e(+r)},n}(0);function hO(e,t){this._context=e,this._k=(1-t)/6}hO.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:P2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const D1e=function e(t){function n(r){return new hO(r,t)}return n.tension=function(r){return e(+r)},n}(0);function dO(e,t){this._context=e,this._k=(1-t)/6}dO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:P2(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R1e=function e(t){function n(r){return new dO(r,t)}return n.tension=function(r){return e(+r)},n}(0);function pO(e,t,n){var r=e._x1,i=e._y1,s=e._x2,a=e._y2;if(e._l01_a>Hr){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Hr){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,s,a,e._x2,e._y2)}function oj(e,t){this._context=e,this._alpha=t}oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:pO(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const I1e=function e(t){function n(r){return t?new oj(r,t):new fO(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lj(e,t){this._context=e,this._alpha=t}lj.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pO(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $1e=function e(t){function n(r){return t?new lj(r,t):new hO(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function cj(e,t){this._context=e,this._alpha=t}cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pO(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const M1e=function e(t){function n(r){return t?new cj(r,t):new dO(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function uj(e){this._context=e}uj.prototype={areaStart:bu,areaEnd:bu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function L1e(e){return new uj(e)}function OL(e){return e<0?-1:1}function NL(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(OL(s)+OL(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function DL(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function RT(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function B2(e){this._context=e}B2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:RT(this,this._t0,DL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,RT(this,DL(this,n=NL(this,e,t)),n);break;default:RT(this,this._t0,n=NL(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function fj(e){this._context=new hj(e)}(fj.prototype=Object.create(B2.prototype)).point=function(e,t){B2.prototype.point.call(this,t,e)};function hj(e){this._context=e}hj.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function P1e(e){return new B2(e)}function B1e(e){return new fj(e)}function dj(e){this._context=e}dj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=RL(e),i=RL(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function RL(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function U1e(e){return new dj(e)}function UE(e,t){this._context=e,this._t=t}UE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function z1e(e){return new UE(e,.5)}function H1e(e){return new UE(e,0)}function V1e(e){return new UE(e,1)}function Qg(e,t,n){this.k=e,this.x=t,this.y=n}Qg.prototype={constructor:Qg,scale:function(e){return e===1?this:new Qg(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Qg(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Qg.prototype;const Qd=["Region","RegionLabel","Color","ColorGroup","Inset","Geographic Area"],IL=Qd.length,Xv=2,IT=4,Yv=5,W1e=[{text:"C (center)",value:"C"},{text:"L (left)",value:"L"},{text:"R (right)",value:"R"},{text:"T (top)",value:"T"},{text:"D (down)",value:"D"}],ed=gce("cartogram",()=>{const e=Jr(""),t=Jr({}),n=Jr(""),r=Jr({showGrid:!0,numberOfPanels:window.innerWidth>768?2:1});return{currentMapName:e,versions:t,highlightedRegionID:n,options:r}}),j1e={key:0,class:"d-flex p-2"},G1e=["value"],q1e={key:1},X1e=vr({__name:"CMenuSelectMap",props:{isEmbed:{type:Boolean},maps:{},mapTitle:{},mapDBKey:{}},emits:["map_changed"],setup(e,{emit:t}){const n=ed(),r=e,i=t;let s;fc(async()=>{new URLSearchParams(window.location.search),s=null,a()});async function a(){var o=s||(r.mapDBKey?"/static/userdata/"+r.mapDBKey+"/data.csv":"/static/cartdata/"+n.currentMapName+"/data.csv");let l=await TV(o);n.versions={};for(let c=0;c<l.columns.length;c++){if(Qd.includes(l.columns[c]))continue;let u=l.columns[c].match(/\(([^)]+)\)$/),f=u?u[1].trim():"",h=l.columns[c].replace("("+f+")","").trim();n.versions[c.toString()]={key:c.toString(),header:l.columns[c],name:h,unit:f}}i("map_changed")}return(o,l)=>r.isEmbed?ei("",!0):(Le(),He("div",j1e,[r.mapDBKey?(Le(),He("span",q1e,gr(r.mapTitle),1)):Ki((Le(),He("select",{key:0,class:"form-select","onUpdate:modelValue":l[0]||(l[0]=c=>gn(n).currentMapName=c),onChange:a},[(Le(!0),He(mt,null,Zr(r.maps,(c,u)=>(Le(),He("option",{value:u},gr(c.name),9,G1e))),256))],544)),[[gh,gn(n).currentMapName]])]))}});function Y1e(e){var t=0;return e.forEach(n=>{t+=n.Area}),t}function $L(e,t,n){var r=0,i=0,s=[],a=[];n.forEach(l=>{if(l[e]&&l[e].toString()!==""&&l[e].toString()!=="NA"){let c=typeof l[e]=="string"?Number(l[e]):l[e];i+=c}else s.push(l.Region)}),a=Array(s.length),t.forEach(l=>{let c=s.indexOf(l.Region);c>-1?a[c]=l.Area:r+=l.Area});const o=i/r;return a.forEach(function(l){i+=o*l,r+=l}),[r,i]}const n_=[1,2,5,10,20,50];function pj(e){let t=99,n=Math.floor(Math.log10(e));const r=e/Math.pow(10,n);let i=Math.abs(r-t);return n_.forEach(function(s){Math.abs(r-s)<i&&(i=Math.abs(r-s),t=s)}),[t,n]}function Kv(){return[[1,0,0],[0,1,0],[0,0,1]]}function Jv(e,t){return[[e,0,0],[0,t,0],[0,0,1]]}function bg(e){return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]}function K1e(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function Tc(e,t){if(e.length!==3||t.length!==3)throw new Error("Both matrices should be 3x3.");const n=[[0,0,0],[0,0,0],[0,0,0]];for(let r=0;r<3;r++)for(let i=0;i<3;i++)for(let s=0;s<3;s++)n[r][i]+=e[r][s]*t[s][i];return n}function BC(e,t){var r;var n=e+"-icon";navigator.clipboard.writeText(t),(r=document.getElementById(n))==null||r.setAttribute("src","/static/img/clipboard-check.svg"),setTimeout(function(){var i;(i=document.getElementById(n))==null||i.setAttribute("src","/static/img/clipboard.svg")},2e3)}function r_(e,t,n){return e!=="custom"&&n==="Geographic Area.json"?"/static/cartdata/"+e+"/Geographic Area.json":(t&&t!==""?"/static/userdata/"+t+"/":"/static/cartdata/"+e+"/")+n}const J1e={class:"form-group"},Z1e={id:"citation-text",class:"text-primary",href:"https://www.pnas.org/content/115/10/E2156",target:"_blank",rel:"noopener noreferrer"},gj=vr({__name:"CTextCitation",setup(e){var t="Gastner MT, Seguy V, More P. Fast low-based algorithm for creating density-equalizing map projections. Proc Natl Acad Sci USA 115(10):E2156–E2164 (2018).";return(n,r)=>(Le(),He("div",null,[r[2]||(r[2]=Q("p",{class:"lead text-center"},"Liked our work? Make sure to credit us using the citation below:",-1)),Q("div",J1e,[Q("a",Z1e,gr(gn(t)),1),Q("button",{style:{"margin-top":"25px"},class:"clipboard-copy",id:"clipboard-citation","data-animation":"false",title:"Copy",onClick:r[0]||(r[0]=i=>BC("clipboard-citation",gn(t)))},r[1]||(r[1]=[Q("img",{id:"clipboard-citation-icon",src:"/static/img/clipboard.svg",alt:"Copy button",title:"Copy"},null,-1)]))])]))}}),Q1e={class:"modal fade text-wrap",id:"shareModal",tabindex:"-1","aria-labelledby":"shareModalLabel","aria-hidden":"true"},exe={class:"modal-dialog"},txe={class:"modal-content"},nxe={class:"modal-body"},rxe={class:"text-center"},ixe=["href"],sxe=["href"],axe=["href"],oxe=["href"],lxe={class:"mb-3"},cxe={class:"form-group"},uxe=["value"],fxe={id:"share-embed",class:"mb-5"},hxe={class:"form-group"},dxe={id:"share-embed-code",class:"form-control w-100",disabled:"",rows:"3",style:{"font-family":"monospace",resize:"none"}},pxe=vr({__name:"CMenuBtnShare",props:{mapDBKey:{}},setup(e){const t=ed(),n=e,r=au(()=>n.mapDBKey&&n.mapDBKey!==""?location.protocol+"//"+location.host+"/cartogram/key/"+n.mapDBKey:location.protocol+"//"+location.host+"/cartogram/map/"+t.currentMapName),i=au(()=>window.encodeURIComponent(r.value)),s=au(()=>'<iframe src="'+(r.value+"/embed")+'" width="800" height="550" style="border: 1px solid black;"></iframe>');function a(){var o=new XMLHttpRequest;o.open("GET",r.value)}return(o,l)=>(Le(),He(mt,null,[Q("button",{class:"btn btn-primary me-2 d-flex align-items-center","data-bs-toggle":"modal","data-bs-target":"#shareModal",title:"Save and share cartogram",onClick:l[0]||(l[0]=c=>a())},l[3]||(l[3]=[Q("span",{class:"d-none d-md-block me-2"},"Share",-1),Q("i",{class:"fas fa-share-alt"},null,-1)])),Q("div",Q1e,[Q("div",exe,[Q("div",txe,[l[15]||(l[15]=Q("div",{class:"modal-header"},[Q("h1",{class:"modal-title fs-5",id:"shareModalLabel"},"Share cartogram"),Q("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Q("div",nxe,[Q("div",null,[l[8]||(l[8]=Q("div",null,[Q("p",{class:"bg-warning-subtle p-1 rounded"},[Q("span",{class:"badge text-bg-warning"},"Important"),Qn(" The share link/embed will be pruned from our server if there is no access for one year. We strongly advise you to back up your original data in a safe place so you can regenerate the cartogram if needed. ")])],-1)),l[9]||(l[9]=Q("h3",{class:"text-center"},"Share now",-1)),Q("div",rxe,[Q("a",{href:"https://www.facebook.com/sharer/sharer.php?u="+i.value,onclick:"javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;",target:"_blank",title:"Share on Facebook",class:"social-link",id:"facebook-share"},l[4]||(l[4]=[Q("i",{class:"fab fa-facebook-square"},null,-1)]),8,ixe),Q("a",{href:"https://www.linkedin.com/shareArticle?url="+i.value+"&mini=true&title=Cartogram&summary=Create%20cartograms%20with%20go-cart.io&source=go-cart.io",onclick:"javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=520,width=570');return false;",target:"_blank",title:"Share on LinkedIn",class:"social-link",id:"linkedin-share"},l[5]||(l[5]=[Q("i",{class:"fab fa-linkedin"},null,-1)]),8,sxe),Q("a",{href:"https://twitter.com/share?url="+i.value,onclick:"javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;",target:"_blank",title:"Share on Twitter",class:"social-link",id:"twitter-share"},l[6]||(l[6]=[Q("i",{class:"fab fa-twitter-square"},null,-1)]),8,axe),Q("a",{href:"mailto:?body="+i.value,title:"Share by Email",class:"social-link",id:"email-share"},l[7]||(l[7]=[Q("i",{class:"fas fa-envelope-square"},null,-1)]),8,oxe)])]),Q("div",lxe,[l[11]||(l[11]=Q("h3",{class:"text-center"},"Link",-1)),Q("div",cxe,[Q("input",{type:"text",id:"share-link-href",class:"form-control w-100",disabled:"",style:{"font-family":"monospace"},value:r.value},null,8,uxe),Q("button",{style:{"margin-top":"4.6px"},"data-animation":"false",class:"clipboard-copy",id:"clipboard-link",title:"Copy",onClick:l[1]||(l[1]=c=>BC("clipboard-link",r.value))},l[10]||(l[10]=[Q("img",{id:"clipboard-link-icon",src:"/static/img/clipboard.svg",alt:"Copy button"},null,-1)]))])]),Q("div",fxe,[l[13]||(l[13]=Q("h3",{class:"text-center"},"Embed",-1)),l[14]||(l[14]=Q("p",{class:"text-center"}," To embed yor cartogram into any webpage, insert the HTML code below: ",-1)),Q("div",hxe,[Q("textarea",dxe,gr(s.value),1),Q("button",{class:"clipboard-copy",id:"clipboard-embed","data-animation":"false",title:"Copy",onClick:l[2]||(l[2]=c=>BC("clipboard-embed",s.value))},l[12]||(l[12]=[Q("img",{id:"clipboard-embed-icon",src:"/static/img/clipboard.svg",alt:"Copy button"},null,-1)]))])]),St(gj)])])])])],64))}}),vx=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},gxe=vx(pxe,[["__scopeId","data-v-9afc939e"]]),mxe={class:"navbar bg-light p-0"},xxe={class:"w-100 mw-100 d-flex justify-content-between"},vxe={key:0,class:"p-2"},yxe={class:"py-2 d-flex flex-nowrap"},_xe=["href"],bxe={class:"dropdown me-2 d-flex"},Exe={class:"dropdown-menu dropdown-menu-end p-2 container",style:{width:"250px"}},wxe={class:"row"},Sxe={class:"col-4 text-end"},Txe={class:"row"},Axe={class:"col-4 text-end"},kxe=["value"],Cxe=vr({__name:"CMenuBar",props:{isEmbed:{type:Boolean,default:!1},maps:{},mapTitle:{},mapDBKey:{}},emits:["map_changed"],setup(e,{emit:t}){const n=ed(),r=e,i=t;function s(a){i("map_changed",a)}return(a,o)=>(Le(),He("nav",mxe,[Q("div",xxe,[r.isEmbed?(Le(),He("div",vxe,o[2]||(o[2]=[Q("img",{src:"/static/img/gocart_final.svg",width:"80",alt:"go-cart.io logo"},null,-1)]))):ei("",!0),St(X1e,{maps:r.maps,mapTitle:r.mapTitle,mapDBKey:r.mapDBKey,isEmbed:r.isEmbed,onMap_changed:s},null,8,["maps","mapTitle","mapDBKey","isEmbed"]),Q("div",yxe,[Q("a",{class:"btn btn-primary me-2 d-flex align-items-center",title:"Edit cartogram",href:r.mapDBKey?"/cartogram/edit/key/"+r.mapDBKey:"/cartogram/edit/map/"+gn(n).currentMapName},o[3]||(o[3]=[Q("span",{class:"d-none d-md-block me-2"},"Edit",-1),Q("i",{class:"far fa-edit"},null,-1)]),8,_xe),St(gxe,{mapDBKey:r.mapDBKey},null,8,["mapDBKey"]),Q("div",bxe,[o[6]||(o[6]=Q("button",{class:"btn btn-primary dropdown-toggle d-flex align-items-center",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",title:"Customize cartogram viewer"},[Q("span",{class:"d-none d-md-block me-2"},"Customize"),Q("i",{class:"fas fa-cog"})],-1)),Q("div",Exe,[Q("div",wxe,[o[4]||(o[4]=Q("div",{class:"col-8"},[Q("label",{class:"form-check-label",for:"gridline-toggle-cartogram"},"Show grid lines")],-1)),Q("div",Sxe,[Ki(Q("input",{type:"checkbox",class:"form-check-input","onUpdate:modelValue":o[0]||(o[0]=l=>gn(n).options.showGrid=l)},null,512),[[N0,gn(n).options.showGrid]])])]),Q("div",Txe,[o[5]||(o[5]=Q("div",{class:"col-8"},[Q("label",{class:"form-check-label",for:"gridline-toggle-cartogram"},"Number of panels")],-1)),Q("div",Axe,[Ki(Q("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=l=>gn(n).options.numberOfPanels=l)},[(Le(),He(mt,null,Zr([1,2,3,4,5],l=>Q("option",{key:l,value:l},gr(l),9,kxe)),64))],512),[[gh,gn(n).options.numberOfPanels]])])])])])])])]))}});class Fxe{constructor(){vv(this,"touches",new Map);vv(this,"touchIds",[]);vv(this,"thumbIndex",-1)}set(t){if(!(this.touches.size>=3||!t.pointerId))switch(this.touchIds.push(t.pointerId),this.touches.set(t.pointerId,t),this.touches.size){case 1:this.thumbIndex=t.pointerId;return;case 2:return;case 3:let n=Math.hypot(this.getTouchId(this.touchIds[1]).pageY-this.getTouchId(this.touchIds[0]).pageY,this.getTouchId(this.touchIds[1]).pageX-this.getTouchId(this.touchIds[0]).pageX),r=Math.hypot(this.getTouchId(this.touchIds[2]).pageY-this.getTouchId(this.touchIds[1]).pageY,this.getTouchId(this.touchIds[2]).pageX-this.getTouchId(this.touchIds[1]).pageX),i=Math.hypot(this.getTouchId(this.touchIds[0]).pageY-this.getTouchId(this.touchIds[2]).pageY,this.getTouchId(this.touchIds[0]).pageX-this.getTouchId(this.touchIds[2]).pageX);n<=r&&n<=i?this.thumbIndex=this.getTouchId(this.touchIds[2]).pointerId:n>r&&r<=i?this.thumbIndex=this.getTouchId(this.touchIds[0]).pointerId:this.thumbIndex=this.getTouchId(this.touchIds[1]).pointerId;return;default:return}}update(t){this.touches.has(t.pointerId)&&this.touches.set(t.pointerId,t)}clear(t){this.touches.delete(t.pointerId),this.touchIds=this.touchIds.filter(n=>n!==t.pointerId),this.thumbIndex===t.pointerId&&(this.thumbIndex=this.touchIds[0])}length(){return this.touches.size}getTouches(){return this.touches}getTouchId(t){return this.touches.has(t)?this.touches.get(t):{pageX:-1,pageY:-1,pointerId:-1}}getAllPoints(t=0,n=0){let r=[];return this.touches.forEach((i,s)=>{r.push([i.pageX-t,i.pageY-n])}),r}getMergedPoints(t=0,n=0){try{if(this.touches.size===1)return[this.getThumb(t,n)];if(this.touches.size>1)return[this.getThumb(t,n),this.getOthers(t,n)]}catch{}return[]}getThumb(t=0,n=0){return[this.getTouchId(this.thumbIndex).pageX-t,this.getTouchId(this.thumbIndex).pageY-n]}getOthers(t=0,n=0){if(this.touches.size<2)return[];let r=0,i=0;return this.touches.forEach((s,a)=>{a!==this.thumbIndex&&(r+=s.pageX-t,i+=s.pageY-n)}),[r/(this.touches.size-1),i/(this.touches.size-1)]}}const Oxe=["cx","cy"],Nxe={key:0},Dxe=["x1","y1","x2","y2"],Rxe=vr({__name:"CTouchVis",props:{touchInfo:{},touchLenght:{}},setup(e){const t=Jr();var n=0,r=0;const i=e,s=hs({points:[],line:[]});fc(()=>{let o=t.value.getBoundingClientRect();n=o.left,r=o.top,a()}),Fi(()=>i.touchLenght,(o,l)=>{a()});function a(){s.points=[],s.line=[];try{i.touchInfo.length()>2&&(s.line=i.touchInfo.getMergedPoints(n,r))}catch(o){console.log(o)}}return(o,l)=>(Le(),He("svg",{ref_key:"svgEl",ref:t,class:"w-100 h-100 position-absolute z-3",style:{"pointer-events":"none"}},[(Le(!0),He(mt,null,Zr(s.points,(c,u)=>(Le(),He("g",null,[Q("circle",{cx:c[0],cy:c[1],fill:"blue",r:"5"},null,8,Oxe)]))),256)),s.line.length>0?(Le(),He("g",Nxe,[Q("line",{x1:s.line[0][0],y1:s.line[0][1],x2:s.line[1][0],y2:s.line[1][1],style:{stroke:"rgb(255, 0, 0)","stroke-width":"2"}},null,8,Dxe)])):ei("",!0)],512))}});function ds(e,t,n){return e.fields=t||[],e.fname=n,e}function Fn(e){return e==null?null:e.fname}function si(e){return e==null?null:e.fields}function mj(e){return e.length===1?Ixe(e[0]):$xe(e)}const Ixe=e=>function(t){return t[e]},$xe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function fe(e){throw Error(e)}function rl(e){const t=[],n=e.length;let r=null,i=0,s="",a,o,l;e=e+"";function c(){t.push(s+e.substring(a,o)),s="",a=o+1}for(a=o=0;o<n;++o)if(l=e[o],l==="\\")s+=e.substring(a,o++),a=o;else if(l===r)c(),r=null,i=-1;else{if(r)continue;a===i&&l==='"'||a===i&&l==="'"?(a=o+1,r=l):l==="."&&!i?o>a?c():a=o+1:l==="["?(o>a&&c(),i=a=o+1):l==="]"&&(i||fe("Access path missing open bracket: "+e),i>0&&c(),i=0,a=o+1)}return i&&fe("Access path missing closing bracket: "+e),r&&fe("Access path missing closing quote: "+e),o>a&&(o++,c()),t}function pa(e,t,n){const r=rl(e);return e=r.length===1?r[0]:e,ds((n&&n.get||mj)(r),[e],t||e)}const yx=pa("id"),ui=ds(e=>e,[],"identity"),Wc=ds(()=>0,[],"zero"),Ip=ds(()=>1,[],"one"),ga=ds(()=>!0,[],"true"),Nc=ds(()=>!1,[],"false");function Mxe(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const xj=0,gO=1,mO=2,vj=3,yj=4;function xO(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mxe,r=e||xj;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=gO&&n(t||"error","ERROR",arguments),this},warn(){return r>=mO&&n(t||"warn","WARN",arguments),this},info(){return r>=vj&&n(t||"log","INFO",arguments),this},debug(){return r>=yj&&n(t||"log","DEBUG",arguments),this}}}var pe=Array.isArray;function Pe(e){return e===Object(e)}const ML=e=>e!=="__proto__";function $p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Lxe(r.signals,i.signals);else{const a=s==="legend"?{layout:1}:s==="style"?!0:null;Mp(r,s,i[s],a)}return r},{})}function Mp(e,t,n,r){if(!ML(t))return;let i,s;if(Pe(n)&&!pe(n)){s=Pe(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Mp(s,i,n[i]):ML(i)&&(s[i]=n[i])}else e[t]=n}function Lxe(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Nt(e){return e[e.length-1]}function ti(e){return e==null||e===""?null:+e}const _j=e=>t=>e*Math.exp(t),bj=e=>t=>Math.log(e*t),Ej=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wj=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,U2=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function zE(e,t,n,r){const i=n(e[0]),s=n(Nt(e)),a=(s-i)*t;return[r(i-a),r(s-a)]}function Sj(e,t){return zE(e,t,ti,ui)}function Tj(e,t){var n=Math.sign(e[0]);return zE(e,t,bj(n),_j(n))}function Aj(e,t,n){return zE(e,t,U2(n),U2(1/n))}function kj(e,t,n){return zE(e,t,Ej(n),wj(n))}function HE(e,t,n,r,i){const s=r(e[0]),a=r(Nt(e)),o=t!=null?r(t):(s+a)/2;return[i(o+(s-o)*n),i(o+(a-o)*n)]}function vO(e,t,n){return HE(e,t,n,ti,ui)}function yO(e,t,n){const r=Math.sign(e[0]);return HE(e,t,n,bj(r),_j(r))}function z2(e,t,n,r){return HE(e,t,n,U2(r),U2(1/r))}function _O(e,t,n,r){return HE(e,t,n,Ej(r),wj(r))}function Cj(e){return 1+~~(new Date(e).getMonth()/3)}function Fj(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Be(e){return e!=null?pe(e)?e:[e]:[]}function Oj(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function pt(e){return typeof e=="function"}const Pxe="descending";function bO(e,t,n){n=n||{},t=Be(t)||[];const r=[],i=[],s={},a=n.comparator||Bxe;return Be(e).forEach((o,l)=>{o!=null&&(r.push(t[l]===Pxe?-1:1),i.push(o=pt(o)?o:pa(o,null,n)),(si(o)||[]).forEach(c=>s[c]=1))}),i.length===0?null:ds(a(i,r),Object.keys(s))}const Lp=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Bxe=(e,t)=>e.length===1?Uxe(e[0],t[0]):zxe(e,t,e.length),Uxe=(e,t)=>function(n,r){return Lp(e(n),e(r))*t},zxe=(e,t,n)=>(t.push(0),function(r,i){let s,a=0,o=-1;for(;a===0&&++o<n;)s=e[o],a=Lp(s(r),s(i));return a*t[o]});function fi(e){return pt(e)?e:()=>e}function EO(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function ht(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Go(e,t){let n=0,r,i,s,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=a=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>a&&(a=i))}return[s,a]}function Nj(e,t){const n=e.length;let r=-1,i,s,a,o,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(o=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,o=r),a<s&&(a=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=a=s;break}if(r===n)return[-1,-1];for(o=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,o=r),a<s&&(a=s,l=r))}return[o,l]}function ze(e,t){return Object.hasOwn(e,t)}const Zv={};function Pp(e){let t={},n;function r(s){return ze(t,s)&&t[s]!==Zv}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,a){return r(s)||(++i.size,t[s]===Zv&&--i.empty),t[s]=a,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=Zv),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let a=0;for(const o in t){const l=t[o];l!==Zv&&(!n||!n(l))&&(s[o]=l,++a)}i.size=a,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function Dj(e,t,n,r,i,s){if(!n&&n!==0)return s;const a=+n;let o=e[0],l=Nt(e),c;l<o&&(c=o,o=l,l=c),c=Math.abs(t-o);const u=Math.abs(l-t);return c<u&&c<=a?r:u<=a?i:s}function Re(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),ht(r,n)}function e0(e,t,n,r){let i=t[0],s=t[t.length-1],a;return i>s&&(a=i,i=s,s=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Gu(e){return typeof e=="boolean"}function cu(e){return Object.prototype.toString.call(e)==="[object Date]"}function Rj(e){return e&&pt(e[Symbol.iterator])}function Ut(e){return typeof e=="number"}function Ij(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ue(e){return typeof e=="string"}function wO(e,t,n){e&&(e=t?Be(e).map(o=>o.replace(/\\(.)/g,"$1")):Be(e));const r=e&&e.length,i=n&&n.get||mj,s=o=>i(t?[o]:rl(o));let a;if(!r)a=function(){return""};else if(r===1){const o=s(e[0]);a=function(l){return""+o(l)}}else{const o=e.map(s);a=function(l){let c=""+o[0](l),u=0;for(;++u<r;)c+="|"+o[u](l);return c}}return ds(a,e,"key")}function $j(e,t){const n=e[0],r=Nt(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Hxe=1e4;function Mj(e){e=+e||Hxe;let t,n,r;const i=()=>{t={},n={},r=0},s=(a,o)=>(++r>e&&(n=t,t={},r=1),t[a]=o);return i(),{clear:i,has:a=>ze(t,a)||ze(n,a),get:a=>ze(t,a)?t[a]:ze(n,a)?s(a,n[a]):void 0,set:(a,o)=>ze(t,a)?t[a]=o:s(a,o)}}function Lj(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const a=r||new t.constructor(i+s);let o=0,l=0,c=0;for(;o<i&&l<s;++c)a[c]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<i;++o,++c)a[c]=t[o];for(;l<s;++l,++c)a[c]=n[l];return a}function em(e,t){let n="";for(;--t>=0;)n+=e;return n}function Pj(e,t,n,r){const i=n||" ",s=e+"",a=t-s.length;return a<=0?s:r==="left"?em(i,a)+s:r==="center"?em(i,~~(a/2))+s+em(i,Math.ceil(a/2)):s+em(i,a)}function _x(e){return e&&Nt(e)-e[0]||0}function Oe(e){return pe(e)?"["+e.map(Oe)+"]":Pe(e)||Ue(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function SO(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Vxe=e=>Ut(e)||cu(e)?e:Date.parse(e);function TO(e,t){return t=t||Vxe,e==null||e===""?null:t(e)}function AO(e){return e==null||e===""?null:e+""}function Ya(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Bj(e,t,n,r){const i=r??"…",s=e+"",a=s.length,o=Math.max(0,t-i.length);return a<=t?s:n==="left"?i+s.slice(a-o):n==="center"?s.slice(0,Math.ceil(o/2))+i+s.slice(a-~~(o/2)):s.slice(0,o)+i}function Uc(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Wxe(e){return e}function jxe(e){if(e==null)return Wxe;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],a=e.translate[1];return function(o,l){l||(t=n=0);var c=2,u=o.length,f=new Array(u);for(f[0]=(t+=o[0])*r+s,f[1]=(n+=o[1])*i+a;c<u;)f[c]=o[c],++c;return f}}function Gxe(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function qxe(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return LL(e,n)})}:LL(e,t)}function LL(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=Uj(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function Uj(e,t){var n=jxe(e.transform),r=e.arcs;function i(u,f){f.length&&f.pop();for(var h=r[u<0?~u:u],d=0,p=h.length;d<p;++d)f.push(n(h[d],d));u<0&&Gxe(f,p)}function s(u){return n(u)}function a(u){for(var f=[],h=0,d=u.length;h<d;++h)i(u[h],f);return f.length<2&&f.push(f[0]),f}function o(u){for(var f=a(u);f.length<4;)f.push(f[0]);return f}function l(u){return u.map(o)}function c(u){var f=u.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:u.geometries.map(c)};case"Point":h=s(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(s);break;case"LineString":h=a(u.arcs);break;case"MultiLineString":h=u.arcs.map(a);break;case"Polygon":h=l(u.arcs);break;case"MultiPolygon":h=u.arcs.map(l);break;default:return null}return{type:f,coordinates:h}}return c(t)}function Xxe(e,t){var n={},r={},i={},s=[],a=-1;t.forEach(function(c,u){var f=e.arcs[c<0?~c:c],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=t[++a],t[a]=c,t[u]=h)}),t.forEach(function(c){var u=o(c),f=u[0],h=u[1],d,p;if(d=i[f])if(delete i[d.end],d.push(c),d.end=h,p=r[h]){delete r[p.start];var g=p===d?d:d.concat(p);r[g.start=d.start]=i[g.end=p.end]=g}else r[d.start]=i[d.end]=d;else if(d=r[h])if(delete r[d.start],d.unshift(c),d.start=f,p=i[f]){delete i[p.end];var m=p===d?d:p.concat(d);r[m.start=p.start]=i[m.end=d.end]=m}else r[d.start]=i[d.end]=d;else d=[c],r[d.start=f]=i[d.end=h]=d});function o(c){var u=e.arcs[c<0?~c:c],f=u[0],h;return e.transform?(h=[0,0],u.forEach(function(d){h[0]+=d[0],h[1]+=d[1]})):h=u[u.length-1],c<0?[h,f]:[f,h]}function l(c,u){for(var f in c){var h=c[f];delete u[h.start],delete h.start,delete h.end,h.forEach(function(d){n[d<0?~d:d]=1}),s.push(h)}}return l(i,r),l(r,i),t.forEach(function(c){n[c<0?~c:c]||s.push([c])}),s}function Yxe(e){return Uj(e,Kxe.apply(this,arguments))}function Kxe(e,t,n){var r,i,s;if(arguments.length>1)r=Jxe(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Xxe(e,r)}}function Jxe(e,t,n){var r=[],i=[],s;function a(f){var h=f<0?~f:f;(i[h]||(i[h]=[])).push({i:f,g:s})}function o(f){f.forEach(a)}function l(f){f.forEach(o)}function c(f){f.forEach(l)}function u(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(u);break;case"LineString":o(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":c(f.arcs);break}}return u(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Nr="year",as="quarter",ai="month",er="week",os="date",Yr="day",qo="dayofyear",Ds="hours",Rs="minutes",ma="seconds",Ka="milliseconds",kO=[Nr,as,ai,er,os,Yr,qo,Ds,Rs,ma,Ka],$T=kO.reduce((e,t,n)=>(e[t]=1+n,e),{});function CO(e){const t=Be(e).slice(),n={};return t.length||fe("Missing time unit."),t.forEach(i=>{ze($T,i)?n[i]=1:fe(`Invalid time unit: ${i}.`)}),(n[er]||n[Yr]?1:0)+(n[as]||n[ai]||n[os]?1:0)+(n[qo]?1:0)>1&&fe(`Incompatible time units: ${e}`),t.sort((i,s)=>$T[i]-$T[s]),t}const Zxe={[Nr]:"%Y ",[as]:"Q%q ",[ai]:"%b ",[os]:"%d ",[er]:"W%U ",[Yr]:"%a ",[qo]:"%j ",[Ds]:"%H:00",[Rs]:"00:%M",[ma]:":%S",[Ka]:".%L",[`${Nr}-${ai}`]:"%Y-%m ",[`${Nr}-${ai}-${os}`]:"%Y-%m-%d ",[`${Ds}-${Rs}`]:"%H:%M"};function zj(e,t){const n=ht({},Zxe,t),r=CO(e),i=r.length;let s="",a=0,o,l;for(a=0;a<i;)for(o=r.length;o>a;--o)if(l=r.slice(a,o).join("-"),n[l]!=null){s+=n[l],a=o;break}return s.trim()}const Nf=new Date;function FO(e){return Nf.setFullYear(e),Nf.setMonth(0),Nf.setDate(1),Nf.setHours(0,0,0,0),Nf}function Hj(e){return Wj(new Date(e))}function Vj(e){return UC(new Date(e))}function Wj(e){return Vl.count(FO(e.getFullYear())-1,e)}function UC(e){return Dp.count(FO(e.getFullYear())-1,e)}function zC(e){return FO(e).getDay()}function Qxe(e,t,n,r,i,s,a){if(0<=e&&e<100){const o=new Date(-1,t,n,r,i,s,a);return o.setFullYear(e),o}return new Date(e,t,n,r,i,s,a)}function jj(e){return qj(new Date(e))}function Gj(e){return HC(new Date(e))}function qj(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lu.count(t-1,e)}function HC(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Rp.count(t-1,e)}function VC(e){return Nf.setTime(Date.UTC(e,0,1)),Nf.getUTCDay()}function eve(e,t,n,r,i,s,a){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,r,i,s,a));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,r,i,s,a))}function Xj(e,t,n,r,i){const s=t||1,a=Nt(e),o=(x,y,v)=>(v=v||x,tve(n[v],r[v],x===a&&s,y)),l=new Date,c=Ya(e),u=c[Nr]?o(Nr):fi(2012),f=c[ai]?o(ai):c[as]?o(as):Wc,h=c[er]&&c[Yr]?o(Yr,1,er+Yr):c[er]?o(er,1):c[Yr]?o(Yr,1):c[os]?o(os,1):c[qo]?o(qo,1):Ip,d=c[Ds]?o(Ds):Wc,p=c[Rs]?o(Rs):Wc,g=c[ma]?o(ma):Wc,m=c[Ka]?o(Ka):Wc;return function(x){l.setTime(+x);const y=u(l);return i(y,f(l),h(l,y),d(l),p(l),g(l),m(l))}}function tve(e,t,n,r){const i=n<=1?e:r?(s,a)=>r+n*Math.floor((e(s,a)-r)/n):(s,a)=>n*Math.floor(e(s,a)/n);return t?(s,a)=>t(i(s,a),a):i}function X0(e,t,n){return t+e*7-(n+6)%7}const nve={[Nr]:e=>e.getFullYear(),[as]:e=>Math.floor(e.getMonth()/3),[ai]:e=>e.getMonth(),[os]:e=>e.getDate(),[Ds]:e=>e.getHours(),[Rs]:e=>e.getMinutes(),[ma]:e=>e.getSeconds(),[Ka]:e=>e.getMilliseconds(),[qo]:e=>Wj(e),[er]:e=>UC(e),[er+Yr]:(e,t)=>X0(UC(e),e.getDay(),zC(t)),[Yr]:(e,t)=>X0(1,e.getDay(),zC(t))},rve={[as]:e=>3*e,[er]:(e,t)=>X0(e,0,zC(t))};function Yj(e,t){return Xj(e,t||1,nve,rve,Qxe)}const ive={[Nr]:e=>e.getUTCFullYear(),[as]:e=>Math.floor(e.getUTCMonth()/3),[ai]:e=>e.getUTCMonth(),[os]:e=>e.getUTCDate(),[Ds]:e=>e.getUTCHours(),[Rs]:e=>e.getUTCMinutes(),[ma]:e=>e.getUTCSeconds(),[Ka]:e=>e.getUTCMilliseconds(),[qo]:e=>qj(e),[er]:e=>HC(e),[Yr]:(e,t)=>X0(1,e.getUTCDay(),VC(t)),[er+Yr]:(e,t)=>X0(HC(e),e.getUTCDay(),VC(t))},sve={[as]:e=>3*e,[er]:(e,t)=>X0(e,0,VC(t))};function Kj(e,t){return Xj(e,t||1,ive,sve,eve)}const ave={[Nr]:Wo,[as]:T1.every(3),[ai]:T1,[er]:Dp,[os]:Vl,[Yr]:Vl,[qo]:Vl,[Ds]:IE,[Rs]:DE,[ma]:$l,[Ka]:W0},ove={[Nr]:jo,[as]:A1.every(3),[ai]:A1,[er]:Rp,[os]:lu,[Yr]:lu,[qo]:lu,[Ds]:$E,[Rs]:RE,[ma]:$l,[Ka]:W0};function Bp(e){return ave[e]}function Up(e){return ove[e]}function Jj(e,t,n){return e?e.offset(t,n):void 0}function Zj(e,t,n){return Jj(Bp(e),t,n)}function Qj(e,t,n){return Jj(Up(e),t,n)}function eG(e,t,n,r){return e?e.range(t,n,r):void 0}function tG(e,t,n,r){return eG(Bp(e),t,n,r)}function nG(e,t,n,r){return eG(Up(e),t,n,r)}const tm=1e3,nm=tm*60,rm=nm*60,VE=rm*24,lve=VE*7,PL=VE*30,WC=VE*365,rG=[Nr,ai,os,Ds,Rs,ma,Ka],im=rG.slice(0,-1),sm=im.slice(0,-1),am=sm.slice(0,-1),cve=am.slice(0,-1),uve=[Nr,er],BL=[Nr,ai],iG=[Nr],Eg=[[im,1,tm],[im,5,5*tm],[im,15,15*tm],[im,30,30*tm],[sm,1,nm],[sm,5,5*nm],[sm,15,15*nm],[sm,30,30*nm],[am,1,rm],[am,3,3*rm],[am,6,6*rm],[am,12,12*rm],[cve,1,VE],[uve,1,lve],[BL,1,PL],[BL,3,3*PL],[iG,1,WC]];function sG(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(_x(t))/n;let i=Fp(o=>o[2]).right(Eg,r),s,a;return i===Eg.length?(s=iG,a=yu(t[0]/WC,t[1]/WC,n)):i?(i=Eg[r/Eg[i-1][2]<Eg[i][2]/r?i-1:i],s=i[0],a=i[1]):(s=rG,a=Math.max(yu(t[0],t[1],n),1)),{units:s,step:a}}function om(e){const t={};return n=>t[n]||(t[n]=e(n))}function fve(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=hve(r,i);const a=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+a}}function hve(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function aG(e){const t=om(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=_h(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return fve(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,a){a=_h(a??",f");const o=yu(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let c;if(a.precision==null)switch(a.type){case"s":return isNaN(c=OV(o,l))||(a.precision=c),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=NV(o,l))||(a.precision=c-(a.type==="e"));break}case"f":case"%":{isNaN(c=FV(o))||(a.precision=c-(a.type==="%")*2);break}}return t(a)}}}let jC;oG();function oG(){return jC=aG({format:AE,formatPrefix:V4})}function lG(e){return aG(CV(e))}function H2(e){return arguments.length?jC=lG(e):jC}function UL(e,t,n){n=n||{},Pe(n)||fe(`Invalid time multi-format specifier: ${n}`);const r=t(ma),i=t(Rs),s=t(Ds),a=t(os),o=t(er),l=t(ai),c=t(as),u=t(Nr),f=e(n[Ka]||".%L"),h=e(n[ma]||":%S"),d=e(n[Rs]||"%I:%M"),p=e(n[Ds]||"%I %p"),g=e(n[os]||n[Yr]||"%a %d"),m=e(n[er]||"%b %d"),x=e(n[ai]||"%B"),y=e(n[as]||"%B"),v=e(n[Nr]||"%Y");return _=>(r(_)<_?f:i(_)<_?h:s(_)<_?d:a(_)<_?p:l(_)<_?o(_)<_?g:m:u(_)<_?c(_)<_?x:y:v)(_)}function cG(e){const t=om(e.format),n=om(e.utcFormat);return{timeFormat:r=>Ue(r)?t(r):UL(t,Bp,r),utcFormat:r=>Ue(r)?n(r):UL(n,Up,r),timeParse:om(e.parse),utcParse:om(e.utcParse)}}let GC;uG();function uG(){return GC=cG({format:iO,parse:WW,utcFormat:sO,utcParse:jW})}function fG(e){return cG(BW(e))}function k1(e){return arguments.length?GC=fG(e):GC}const qC=(e,t)=>ht({},e,t);function hG(e,t){const n=e?lG(e):H2(),r=t?fG(t):k1();return qC(n,r)}function OO(e,t){const n=arguments.length;return n&&n!==2&&fe("defaultLocale expects either zero or two arguments."),n?qC(H2(e),k1(t)):qC(H2(),k1())}function dve(){return oG(),uG(),OO()}const pve=/^(data:|([A-Za-z]+:)?\/\/)/,gve=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,mve=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,zL="file://";function xve(e,t){return n=>({options:n||{},sanitize:yve,load:vve,fileAccess:!1,file:_ve(t),http:Eve(e)})}async function vve(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function yve(e,t){t=ht({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,a;const o=gve.test(e.replace(mve,""));(e==null||typeof e!="string"||!o)&&fe("Sanitize failure, invalid URI: "+Oe(e));const l=pve.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),s=(i=e.startsWith(zL))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(zL.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function _ve(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):bve}async function bve(){fe("No file system access.")}function Eve(e){return e?async function(t,n){const r=ht({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?pt(s[i])?s[i]():s.text():fe(s.status+""+s.statusText)}:wve}async function wve(){fe("No HTTP fetch method available.")}const Sve=e=>e!=null&&e===e,Tve=e=>e==="true"||e==="false"||e===!0||e===!1,Ave=e=>!Number.isNaN(Date.parse(e)),dG=e=>!Number.isNaN(+e)&&!(e instanceof Date),kve=e=>dG(e)&&Number.isInteger(+e),XC={boolean:SO,integer:ti,number:ti,date:TO,string:AO,unknown:ui},Qv=[Tve,kve,dG,Ave],Cve=["boolean","integer","number","date"];function pG(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Qv.length,i=Qv.map((s,a)=>a+1);for(let s=0,a=0,o,l;s<n;++s)for(l=t?e[s][t]:e[s],o=0;o<r;++o)if(i[o]&&Sve(l)&&!Qv[o](l)&&(i[o]=0,++a,a===Qv.length))return"string";return Cve[i.reduce((s,a)=>s===0?a:s,0)-1]}function gG(e,t){return t.reduce((n,r)=>(n[r]=pG(e,r),n),{})}function HL(e){const t=function(n,r){const i={delimiter:e};return NO(n,r?ht(r,i):i)};return t.responseType="text",t}function NO(e,t){return t.header&&(e=t.header.map(Oe).join(t.delimiter)+`
`+e),EV(t.delimiter).parse(e+"")}NO.responseType="text";function Fve(e){return typeof Buffer=="function"&&pt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function DO(e,t){const n=t&&t.property?pa(t.property):ui;return Pe(e)&&!Fve(e)?Ove(n(e),t):n(JSON.parse(e))}DO.responseType="json";function Ove(e,t){return!pe(e)&&Rj(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Nve={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function mG(e,t){let n,r,i,s;return e=DO(e,t),t&&t.feature?(n=qxe,i=t.feature):t&&t.mesh?(n=Yxe,i=t.mesh,s=Nve[t.filter]):fe("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):fe("Invalid TopoJSON object: "+i),r&&r.features||[r]}mG.responseType="json";const i_={dsv:NO,csv:HL(","),tsv:HL("	"),json:DO,topojson:mG};function RO(e,t){return arguments.length>1?(i_[e]=t,this):ze(i_,e)?i_[e]:null}function xG(e){const t=RO(e);return t&&t.responseType||"text"}function vG(e,t,n,r){t=t||{};const i=RO(t.type||"json");return i||fe("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Dve(e,t.parse,n,r),ze(e,"columns")&&delete e.columns,e}function Dve(e,t,n,r){if(!e.length)return;const i=k1();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),a,o,l,c,u,f;t==="auto"&&(t=gG(e,s)),s=Object.keys(t);const h=s.map(d=>{const p=t[d];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!XC[p])throw Error("Illegal format pattern: "+d+":"+p);return XC[p]});for(l=0,u=e.length,f=s.length;l<u;++l)for(a=e[l],c=0;c<f;++c)o=s[c],a[o]=h[c](a[o])}const WE=xve(typeof fetch<"u"&&fetch,null);function jE(e){const t=e||ui,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}async function s_(e,t){try{await t(e)}catch(n){e.error(n)}}const yG=Symbol("vega_id");let Rve=1;function GE(e){return!!(e&&Je(e))}function Je(e){return e[yG]}function _G(e,t){return e[yG]=t,e}function Wt(e){const t=e===Object(e)?e:{data:e};return Je(t)?t:_G(t,Rve++)}function IO(e){return qE(e,Wt({}))}function qE(e,t){for(const n in e)t[n]=e[n];return t}function bG(e,t){return _G(t,Je(e))}function td(e,t){return e?t?(n,r)=>e(n,r)||Je(t(n))-Je(t(r)):(n,r)=>e(n,r)||Je(n)-Je(r):null}function EG(e){return e&&e.constructor===nd}function nd(){const e=[],t=[],n=[],r=[],i=[];let s=null,a=!1;return{constructor:nd,insert(o){const l=Be(o),c=l.length;for(let u=0;u<c;++u)e.push(l[u]);return this},remove(o){const l=pt(o)?r:t,c=Be(o),u=c.length;for(let f=0;f<u;++f)l.push(c[f]);return this},modify(o,l,c){const u={field:l,value:fi(c)};return pt(o)?(u.filter=o,i.push(u)):(u.tuple=o,n.push(u)),this},encode(o,l){return pt(o)?i.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return s=o,this},reflow(){return a=!0,this},pulse(o,l){const c={},u={};let f,h,d,p,g,m;for(f=0,h=l.length;f<h;++f)c[Je(l[f])]=1;for(f=0,h=t.length;f<h;++f)g=t[f],c[Je(g)]=-1;for(f=0,h=r.length;f<h;++f)p=r[f],l.forEach(y=>{p(y)&&(c[Je(y)]=-1)});for(f=0,h=e.length;f<h;++f)g=e[f],m=Je(g),c[m]?c[m]=1:o.add.push(Wt(e[f]));for(f=0,h=l.length;f<h;++f)g=l[f],c[Je(g)]<0&&o.rem.push(g);function x(y,v,_){_?y[v]=_(y):o.encode=v,a||(u[Je(y)]=y)}for(f=0,h=n.length;f<h;++f)d=n[f],g=d.tuple,p=d.field,m=c[Je(g)],m>0&&(x(g,p,d.value),o.modifies(p));for(f=0,h=i.length;f<h;++f)d=i[f],p=d.filter,l.forEach(y=>{p(y)&&c[Je(y)]>0&&x(y,d.field,d.value)}),o.modifies(d.field);if(a)o.mod=t.length||r.length?l.filter(y=>c[Je(y)]>0):l.slice();else for(m in u)o.mod.push(u[m]);return(s||s==null&&(t.length||r.length))&&o.clean(!0),o}}}const a_="_:mod:_";function XE(){Object.defineProperty(this,a_,{writable:!0,value:{}})}XE.prototype={set(e,t,n,r){const i=this,s=i[e],a=i[a_];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,a[t+":"+e]=-1,a[e]=-1):(s!==n||r)&&(i[e]=n,a[e]=pe(n)?1+n.length:-1),i},modified(e,t){const n=this[a_];if(arguments.length){if(pe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[a_]={},this}};let Ive=0;const $ve="pulse",Mve=new XE,Lve=1,Pve=2;function sn(e,t,n,r){this.id=++Ive,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function VL(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}sn.prototype={targets(){return this._targets||(this._targets=jE(yx))},set(e){return this.value!==e?(this.value=e,1):0},skip:VL(Lve),modified:VL(Pve),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new XE,i=this._argops=this._argops||[],s=[];let a,o,l,c;const u=(f,h,d)=>{d instanceof sn?(d!==this&&(t&&d.targets().add(this),s.push(d)),i.push({op:d,name:f,index:h})):r.set(f,h,d)};for(a in e)if(o=e[a],a===$ve)Be(o).forEach(f=>{f instanceof sn?f!==this&&(f.targets().add(this),s.push(f)):fe("Pulse parameters must be operator instances.")}),this.source=o;else if(pe(o))for(r.set(a,-1,Array(l=o.length)),c=0;c<l;++c)u(a,c,o[c]);else u(a,-1,o);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Mve,n=this._argops;let r,i,s,a;if(n){const o=n.length;for(i=0;i<o;++i)r=n[i],s=r.op,a=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,a);if(n.initonly){for(i=0;i<o;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Bve(e,t,n,r){let i=1,s;return e instanceof sn?s=e:e&&e.prototype instanceof sn?s=new e:pt(e)?s=new sn(null,e):(i=0,s=new sn(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Uve(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let zve=0;function YE(e,t,n){this.id=++zve,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Dc(e,t,n){return new YE(e,t,n)}YE.prototype={_filter:ga,_apply:ui,targets(){return this._targets||(this._targets=jE(yx))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Dc(e);return this.targets().add(t),t},apply(e){const t=Dc(null,e);return this.targets().add(t),t},merge(){const e=Dc();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Dc();return this.targets().add(Dc(null,null,EO(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Dc(null,null,()=>n=!0)),t.targets().add(Dc(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ga,this._targets=null}};function Hve(e,t,n,r){const i=this,s=Dc(n,r),a=function(c){c.dataflow=i;try{s.receive(c)}catch(u){i.error(u)}finally{i.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=Be(e);const l=o.length;for(let c=0;c<l;++c)o[c].addEventListener(t,a);return s}function Vve(e,t){const n=this.locale();return vG(e,t,n.timeParse,n.utcParse)}function Wve(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function jve(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:xG(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Gve(e,t,n){const r=this,i=r._pending||qve(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(ga).insert(s.data||[])),i.done(),s}function qve(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Xve={skip:!0};function Yve(e,t,n,r,i){return(e instanceof sn?Jve:Kve)(this,e,t,n,r,i),this}function Kve(e,t,n,r,i,s){const a=ht({},s,Xve);let o,l;pt(n)||(n=fi(n)),r===void 0?o=c=>e.touch(n(c)):pt(r)?(l=new sn(null,r,i,!1),o=c=>{l.evaluate(c);const u=n(c),f=l.value;EG(f)?e.pulse(u,f,s):e.update(u,f,a)}):o=c=>e.update(n(c),r,a),t.apply(o)}function Jve(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const a=s||{},o=new sn(null,Zve(n,r),i,!1);o.modified(a.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function Zve(e,t){return t=pt(t)?t:fi(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Qve(e){e.rank=++this._rank}function eye(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&fe("Cycle detected in dataflow graph.")}const V2={},So=1,zc=2,wl=4,tye=So|zc,WL=So|wl,Fd=So|zc|wl,jL=8,wg=16,GL=32,qL=64;function uu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function MT(e,t){const n=[];return Uc(e,t,r=>n.push(r)),n}function XL(e,t){const n={};return e.visit(t,r=>{n[Je(r)]=1}),r=>n[Je(r)]?null:r}function ey(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}uu.prototype={StopPropagation:V2,ADD:So,REM:zc,MOD:wl,ADD_REM:tye,ADD_MOD:WL,ALL:Fd,REFLOW:jL,SOURCE:wg,NO_SOURCE:GL,NO_FIELDS:qL,fork(e){return new uu(this.dataflow).init(this,e)},clone(){const e=this.fork(Fd);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Fd|wg)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new uu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&qL)&&(n.fields=e.fields),t&So?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&zc?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&wl?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&GL?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Fd;return t&So&&this.add.length||t&zc&&this.rem.length||t&wl&&this.mod.length},reflow(e){if(e)return this.fork(Fd).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(wl,XL(this,So))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return pe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?pe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&So&&(n.addF=ey(n.addF,t)),e&zc&&(n.remF=ey(n.remF,t)),e&wl&&(n.modF=ey(n.modF,t)),e&wg&&(n.srcF=ey(n.srcF,t)),n},materialize(e){e=e||Fd;const t=this;return e&So&&t.addF&&(t.add=MT(t.add,t.addF),t.addF=null),e&zc&&t.remF&&(t.rem=MT(t.rem,t.remF),t.remF=null),e&wl&&t.modF&&(t.mod=MT(t.mod,t.modF),t.modF=null),e&wg&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&wg)return Uc(n.source,n.srcF,r),n;e&So&&Uc(n.add,n.addF,r),e&zc&&Uc(n.rem,n.remF,r),e&wl&&Uc(n.mod,n.modF,r);const i=n.source;if(e&jL&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Uc(i,XL(n,WL),r):Uc(i,n.srcF,r))}return n}};function $O(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const o=i.fields||(i.fields={});for(const l in a.fields)o[l]=1}a.changed(i.ADD)&&(s|=i.ADD),a.changed(i.REM)&&(s|=i.REM),a.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Re($O,uu,{fork(e){const t=new uu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?pe(e)?e.some(r=>n[r]):n[e]:0},filter(){fe("MultiPulse does not support filtering.")},materialize(){fe("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function nye(e,t,n){const r=this,i=[];if(r._pulse)return wG(r);if(r._pending&&await r._pending,t&&await s_(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new uu(r,s,e),r._touched.forEach(u=>r._enqueue(u,!0)),r._touched=jE(yx);let a=0,o,l,c;try{for(;r._heap.size()>0;){if(o=r._heap.pop(),o.rank!==o.qrank){r._enqueue(o,!0);continue}l=o.run(r._getPulse(o,e)),l.then?l=await l:l.async&&(i.push(l.async),l=V2),l!==V2&&o._targets&&o._targets.forEach(u=>r._enqueue(u)),++a}}catch(u){r._heap.clear(),c=u}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${a} operators`),c&&(r._postrun=[],r.error(c)),r._postrun.length){const u=r._postrun.sort((f,h)=>h.priority-f.priority);r._postrun=[];for(let f=0;f<u.length;++f)await s_(r,u[f].callback)}return n&&await s_(r,n),i.length&&Promise.all(i).then(u=>r.runAsync(null,()=>{u.forEach(f=>{try{f(r)}catch(h){r.error(h)}})})),r}async function rye(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function iye(e,t,n){return this._pulse?wG(this):(this.evaluate(e,t,n),this)}function sye(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function wG(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function aye(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function oye(e,t){const n=e.source,r=this._clock;return n&&pe(n)?new $O(this,r,n.map(i=>i.pulse),t):this._input[e.id]||lye(this._pulse,n&&n.pulse)}function lye(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==V2&&(e.source=t.source),e)}const MO={skip:!1,force:!1};function cye(e,t){const n=t||MO;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function uye(e,t,n){const r=n||MO;return(e.set(t)||r.force)&&this.touch(e,r),this}function fye(e,t,n){this.touch(e,n||MO);const r=new uu(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function hye(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),SG(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,dye(t,0,e)):r=n,r}}}function SG(e,t,n,r){let i,s;const a=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(a,i)<0){e[n]=i,n=s;continue}break}return e[n]=a}function dye(e,t,n){const r=t,i=e.length,s=e[t];let a=(t<<1)+1,o;for(;a<i;)o=a+1,o<i&&n(e[a],e[o])>=0&&(a=o),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=s,SG(e,r,t,n)}function x0(){this.logger(xO()),this.logLevel(gO),this._clock=0,this._rank=0,this._locale=OO();try{this._loader=WE()}catch{}this._touched=jE(yx),this._input={},this._pulse=null,this._heap=hye((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Sg(e){return function(){return this._log[e].apply(this,arguments)}}x0.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Sg("error"),warn:Sg("warn"),info:Sg("info"),debug:Sg("debug"),logLevel:Sg("level"),cleanThreshold:1e4,add:Bve,connect:Uve,rank:Qve,rerank:eye,pulse:fye,touch:cye,update:uye,changeset:nd,ingest:Wve,parse:Vve,preload:Gve,request:jve,events:Hve,on:Yve,evaluate:nye,run:iye,runAsync:rye,runAfter:sye,_enqueue:aye,_getPulse:oye};function oe(e,t){sn.call(this,e,null,t)}Re(oe,sn,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Y0={};function TG(e){const t=AG(e);return t&&t.Definition||null}function AG(e){return e=e&&e.toLowerCase(),ze(Y0,e)?Y0[e]:null}function*kG(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function LO(e,t,n){const r=Float64Array.from(kG(e,n));return r.sort(zl),t.map(i=>TH(r,i))}function PO(e,t){return LO(e,[.25,.5,.75],t)}function BO(e,t){const n=e.length,r=bce(e,t),i=PO(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function CG(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],a=e.extent[1],o,l,c,u,f,h;const d=e.span||a-s||Math.abs(s)||1;if(e.step)o=e.step;else if(e.steps){for(u=d/t,f=0,h=e.steps.length;f<h&&e.steps[f]<u;++f);o=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),c=e.minstep||0,o=Math.max(c,Math.pow(n,Math.round(Math.log(d)/r)-l));Math.ceil(d/o)>t;)o*=n;for(f=0,h=i.length;f<h;++f)u=o/i[f],u>=c&&d/u<=t&&(o=u)}u=Math.log(o);const p=u>=0?0:~~(-u/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(u=Math.floor(s/o+g)*o,s=s<u?u-o:u,a=Math.ceil(a/o)*o),{start:s,stop:a===s?s+o:a,step:o}}var xa=Math.random;function pye(e){xa=e}function FG(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(kG(e,r)),s=i.length,a=t;let o,l,c,u;for(c=0,u=Array(a);c<a;++c){for(o=0,l=0;l<s;++l)o+=i[~~(xa()*s)];u[c]=o/s}return u.sort(zl),[rC(u,n/2),rC(u,1-n/2)]}function OG(e,t,n,r){r=r||(h=>h);const i=e.length,s=new Float64Array(i);let a=0,o=1,l=r(e[0]),c=l,u=l+t,f;for(;o<i;++o){if(f=r(e[o]),f>=u){for(c=(l+c)/2;a<o;++a)s[a]=c;u=f+t,l=f}c=f}for(c=(l+c)/2;a<o;++a)s[a]=c;return n?gye(s,t+t/4):s}function gye(e,t){const n=e.length;let r=0,i=1,s,a;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(a=i+(r+s-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=s}return e}function mye(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function xye(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(a){return arguments.length?(n=a||0,i=r-n,s):n},max(a){return arguments.length?(r=a||0,i=r-n,s):r},sample(){return n+Math.floor(i*xa())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const o=Math.floor(a);return o<n?0:o>=r?1:(o-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return s.min(e).max(t)}const NG=Math.sqrt(2*Math.PI),vye=Math.SQRT2;let Tg=NaN;function KE(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(Tg===Tg)n=Tg,Tg=NaN;else{do n=xa()*2-1,r=xa()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,Tg=r*s}return e+n*t}function UO(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*NG)}function JE(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const a=Math.exp(-i*i/2);let o;i<7.07106781186547?(o=.0352624965998911*i+.700383064443688,o=o*i+6.37396220353165,o=o*i+33.912866078383,o=o*i+112.079291497871,o=o*i+221.213596169931,o=o*i+220.206867912376,s=a*o,o=.0883883476483184*i+1.75566716318264,o=o*i+16.064177579207,o=o*i+86.7807322029461,o=o*i+296.564248779674,o=o*i+637.333633378831,o=o*i+793.826512519948,o=o*i+440.413735824752,s=s/o):(o=i+.65,o=i+4/o,o=i+3/o,o=i+2/o,o=i+1/o,s=a/o/2.506628274631)}return r>0?1-s:s}function ZE(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*vye*yye(2*e-1)}function yye(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function zO(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>KE(n,r),pdf:s=>UO(s,n,r),cdf:s=>JE(s,n,r),icdf:s=>ZE(s,n,r)};return i.mean(e).stdev(t)}function HO(e,t){const n=zO();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=BO(e)),i):t},sample(){return e[~~(xa()*r)]+t*n.sample()},pdf(s){let a=0,o=0;for(;o<r;++o)a+=n.pdf((s-e[o])/t);return a/t/r},cdf(s){let a=0,o=0;for(;o<r;++o)a+=n.cdf((s-e[o])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function VO(e,t){return e=e||0,t=t??1,Math.exp(e+KE()*t)}function WO(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*NG*e)}function jO(e,t,n){return JE(Math.log(e),t,n)}function GO(e,t,n){return Math.exp(ZE(e,t,n))}function DG(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>VO(n,r),pdf:s=>WO(s,n,r),cdf:s=>jO(s,n,r),icdf:s=>GO(s,n,r)};return i.mean(e).stdev(t)}function RG(e,t){let n=0,r;function i(a){const o=[];let l=0,c;for(c=0;c<n;++c)l+=o[c]=a[c]==null?1:+a[c];for(c=0;c<n;++c)o[c]/=l;return o}const s={weights(a){return arguments.length?(r=i(t=a||[]),s):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),s.weights(t)):e},sample(){const a=xa();let o=e[n-1],l=r[0],c=0;for(;c<n-1;l+=r[++c])if(a<l){o=e[c];break}return o.sample()},pdf(a){let o=0,l=0;for(;l<n;++l)o+=r[l]*e[l].pdf(a);return o},cdf(a){let o=0,l=0;for(;l<n;++l)o+=r[l]*e[l].cdf(a);return o},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function qO(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*xa()}function XO(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function YO(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function KO(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function IG(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>qO(n,r),pdf:s=>XO(s,n,r),cdf:s=>YO(s,n,r),icdf:s=>KO(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function JO(e,t,n){let r=0,i=0;for(const s of e){const a=n(s);t(s)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function bx(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function QE(e,t,n,r){e=e.filter(d=>{let p=t(d),g=n(d);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((d,p)=>t(d)-t(p));const i=e.length,s=new Float64Array(i),a=new Float64Array(i);let o=0,l=0,c=0,u,f,h;for(h of e)s[o]=u=+t(h),a[o]=f=+n(h),++o,l+=(u-l)/o,c+=(f-c)/o;for(o=0;o<i;++o)s[o]-=l,a[o]-=c;return[s,a,l,c]}function Ex(e,t,n,r){let i=-1,s,a;for(const o of e)s=t(o),a=n(o),s!=null&&(s=+s)>=s&&a!=null&&(a=+a)>=a&&r(s,a,++i)}function zp(e,t,n,r,i){let s=0,a=0;return Ex(e,t,n,(o,l)=>{const c=l-i(o),u=l-r;s+=c*c,a+=u*u}),1-s/a}function ZO(e,t,n){let r=0,i=0,s=0,a=0,o=0;Ex(e,t,n,(u,f)=>{++o,r+=(u-r)/o,i+=(f-i)/o,s+=(u*f-s)/o,a+=(u*u-a)/o});const l=bx(r,i,s,a),c=u=>l[0]+l[1]*u;return{coef:l,predict:c,rSquared:zp(e,t,n,i,c)}}function $G(e,t,n){let r=0,i=0,s=0,a=0,o=0;Ex(e,t,n,(u,f)=>{++o,u=Math.log(u),r+=(u-r)/o,i+=(f-i)/o,s+=(u*f-s)/o,a+=(u*u-a)/o});const l=bx(r,i,s,a),c=u=>l[0]+l[1]*Math.log(u);return{coef:l,predict:c,rSquared:zp(e,t,n,i,c)}}function MG(e,t,n){const[r,i,s,a]=QE(e,t,n);let o=0,l=0,c=0,u=0,f=0,h,d,p;Ex(e,t,n,(y,v)=>{h=r[f++],d=Math.log(v),p=h*v,o+=(v*d-o)/f,l+=(p-l)/f,c+=(p*d-c)/f,u+=(h*p-u)/f});const[g,m]=bx(l/a,o/a,c/a,u/a),x=y=>Math.exp(g+m*(y-s));return{coef:[Math.exp(g-m*s),m],predict:x,rSquared:zp(e,t,n,a,x)}}function LG(e,t,n){let r=0,i=0,s=0,a=0,o=0,l=0;Ex(e,t,n,(f,h)=>{const d=Math.log(f),p=Math.log(h);++l,r+=(d-r)/l,i+=(p-i)/l,s+=(d*p-s)/l,a+=(d*d-a)/l,o+=(h-o)/l});const c=bx(r,i,s,a),u=f=>c[0]*Math.pow(f,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:u,rSquared:zp(e,t,n,o,u)}}function QO(e,t,n){const[r,i,s,a]=QE(e,t,n),o=r.length;let l=0,c=0,u=0,f=0,h=0,d,p,g,m;for(d=0;d<o;)p=r[d],g=i[d++],m=p*p,l+=(m-l)/d,c+=(m*p-c)/d,u+=(m*m-u)/d,f+=(p*g-f)/d,h+=(m*g-h)/d;const x=u-l*l,y=l*x-c*c,v=(h*l-f*c)/y,_=(f*x-h*c)/y,b=-v*l,w=E=>(E=E-s,v*E*E+_*E+b+a);return{coef:[b-_*s+v*s*s+a,_-2*v*s,v],predict:w,rSquared:zp(e,t,n,a,w)}}function PG(e,t,n,r){if(r===0)return JO(e,t,n);if(r===1)return ZO(e,t,n);if(r===2)return QO(e,t,n);const[i,s,a,o]=QE(e,t,n),l=i.length,c=[],u=[],f=r+1;let h,d,p,g,m;for(h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],h)*s[p];for(c.push(g),m=new Float64Array(f),d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],h+d);m[d]=g}u.push(m)}u.push(c);const x=bye(u),y=v=>{v-=a;let _=o+x[0]+x[1]*v+x[2]*v*v;for(h=3;h<f;++h)_+=x[h]*Math.pow(v,h);return _};return{coef:_ye(f,x,-a,o),predict:y,rSquared:zp(e,t,n,o,y)}}function _ye(e,t,n,r){const i=Array(e);let s,a,o,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(o=t[s],l=1,i[s]+=o,a=1;a<=s;++a)l*=(s+1-a)/a,i[s-a]+=o*Math.pow(n,a)*l;return i[0]+=r,i}function bye(e){const t=e.length-1,n=[];let r,i,s,a,o;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(s=r;s<t+1;++s)o=e[s][r],e[s][r]=e[s][a],e[s][a]=o;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(o=0,s=i+1;s<t;++s)o+=e[s][i]*n[s];n[i]=(e[t][i]-o)/e[i][i]}return n}const YL=2,KL=1e-12;function BG(e,t,n,r){const[i,s,a,o]=QE(e,t,n,!0),l=i.length,c=Math.max(2,~~(r*l)),u=new Float64Array(l),f=new Float64Array(l),h=new Float64Array(l).fill(1);for(let d=-1;++d<=YL;){const p=[0,c-1];for(let m=0;m<l;++m){const x=i[m],y=p[0],v=p[1],_=x-i[y]>i[v]-x?y:v;let b=0,w=0,E=0,T=0,S=0;const A=1/Math.abs(i[_]-x||1);for(let N=y;N<=v;++N){const M=i[N],O=s[N],D=Eye(Math.abs(x-M)*A)*h[N],I=M*D;b+=D,w+=I,E+=O*D,T+=O*I,S+=M*I}const[C,F]=bx(w/b,E/b,T/b,S/b);u[m]=C+F*x,f[m]=Math.abs(s[m]-u[m]),wye(i,m+1,p)}if(d===YL)break;const g=AH(f);if(Math.abs(g)<KL)break;for(let m=0,x,y;m<l;++m)x=f[m]/(6*g),h[m]=x>=1?KL:(y=1-x*x)*y}return Sye(i,u,a,o)}function Eye(e){return(e=1-e*e*e)*e*e}function wye(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Sye(e,t,n,r){const i=e.length,s=[];let a=0,o=0,l=[],c;for(;a<i;++a)c=e[a]+n,l[0]===c?l[1]+=(t[a]-l[1])/++o:(o=0,l[1]+=r,l=[c,t[a]],s.push(l));return l[1]+=r,s}const Tye=.5*Math.PI/180;function ew(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],s=t[0],a=t[1],o=a-s,l=o/r,c=[i(s)],u=[];if(n===r){for(let g=1;g<r;++g)c.push(i(s+g/n*o));return c.push(i(a)),c}else{u.push(i(a));for(let g=n;--g>0;)u.push(i(s+g/n*o))}let f=c[0],h=u[u.length-1];const d=1/o,p=Aye(f[1],u);for(;h;){const g=i((f[0]+h[0])/2);g[0]-f[0]>=l&&kye(f,g,h,d,p)>Tye?u.push(g):(f=h,c.push(h),u.pop()),h=u[u.length-1]}return c}function Aye(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const a=t[s][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function kye(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-a)}function Cye(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function YC(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Cye(e)}function UG(e,t,n){return n||e+(t?"_"+t:"")}const LT=()=>{},Fye={init:LT,add:LT,rem:LT,idx:0},C1={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},wx=Object.keys(C1).filter(e=>e!=="__count__");function Oye(e,t){return(n,r)=>ht({name:e,aggregate_param:r,out:n||e},Fye,t)}[...wx,"__count__"].forEach(e=>{C1[e]=Oye(e,C1[e])});function zG(e,t,n){return C1[e](n,t)}function HG(e,t){return e.idx-t.idx}function Nye(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=C1[i]())})};return e.forEach(n),Object.values(t).sort(HG)}function Dye(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Rye(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Iye(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function $ye(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function VG(e,t){const n=t||ui,r=Nye(e),i=e.slice().sort(HG);function s(a){this._ops=r,this._out=i,this.cell=a,this.init()}return s.prototype.init=Dye,s.prototype.add=Rye,s.prototype.rem=Iye,s.prototype.set=$ye,s.prototype.get=n,s.fields=e.map(a=>a.out),s}function eN(e){this._key=e?pa(e):Je,this.reset()}const $r=eN.prototype;$r.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};$r.add=function(e){this._add.push(e)};$r.rem=function(e){this._rem.push(e)};$r.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),a={};let o,l,c;for(o=0;o<i;++o)a[n(t[o])]=1;for(o=0,l=0;o<r;++o)a[n(c=e[o])]?a[n(c)]=0:s[l++]=c;return this._rem=[],this._add=s};$r.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",ze(n,s)||(n[s]=1,++i);return i};$r.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=Nj(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};$r.argmin=function(e){return this.extent(e)[0]||{}};$r.argmax=function(e){return this.extent(e)[1]||{}};$r.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};$r.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};$r.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=PO(this.values(),e),this._get=e),this._q};$r.q1=function(e){return this.quartile(e)[0]};$r.q2=function(e){return this.quartile(e)[1]};$r.q3=function(e){return this.quartile(e)[2]};$r.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=FG(this.values(),1e3,.05,e),this._get=e),this._ci};$r.ci0=function(e){return this.ci(e)[0]};$r.ci1=function(e){return this.ci(e)[1]};function Eu(e){oe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Eu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:wx},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Re(Eu,oe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(o){let l,c,u,f;for(l in o)for(u=o[l].tuple,c=0;c<i;++c)r[c][f=u[n[c]]]=f}s(e._prev),s(t);function a(o,l,c){const u=n[c],f=r[c++];for(const h in f){const d=o?o+"|"+h:h;l[u]=f[h],c<i?a(d,l,c):t[d]||e.cell(d,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(y){const v=Be(si(y)),_=v.length;let b=0,w;for(;b<_;++b)r[w=v[b]]||(r[w]=1,t.push(w))}this._dims=Be(e.groupby),this._dnames=this._dims.map(y=>{const v=Fn(y);return i(y),n.push(v),v}),this.cellkey=e.key?e.key:YC(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],a=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],c=s.length,u={};let f,h,d,p,g,m,x;for(c!==a.length&&fe("Unmatched number of fields and aggregate ops."),x=0;x<c;++x){if(f=s[x],h=a[x],d=o[x]||null,f==null&&h!=="count"&&fe("Null aggregate field specified."),g=Fn(f),m=UG(h,g,l[x]),n.push(m),h==="count"){this._counts.push(m);continue}p=u[g],p||(i(f),p=u[g]=[],p.field=f,this._measures.push(p)),h!=="count"&&(this._countOnly=!1),p.push(zG(h,d,m))}return this._measures=this._measures.map(y=>VG(y,y.field)),Object.create(null)},cellkey:YC(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new eN),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let a=0;a<i;++a)s[n[a]]=r[a](e);return t?bG(t.tuple,s):Wt(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,a=e.rem,o=e.mod;let l,c,u,f;if(r)for(c in r)l=r[c],(!i||l.num)&&a.push(l.tuple);for(u=0,f=this._alen;u<f;++u)s.push(this.celltuple(t[u])),t[u]=null;for(u=0,f=this._mlen;u<f;++u)l=n[u],(l.num===0&&i?a:o).push(this.celltuple(l)),n[u]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Mye=1e-14;function tN(e){oe.call(this,null,e)}tN.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Re(tN,oe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,a=e.as||["bin0","bin1"],o=a[0],l=a[1];let c;return e.modified()?(t=t.reflow(!0),c=t.SOURCE):c=t.modified(si(e.field))?t.ADD_MOD:t.ADD,t.visit(c,n?u=>{const f=r(u);u[o]=f,u[l]=f==null?null:i+s*(1+(f-i)/s)}:u=>u[o]=r(u)),t.modifies(n?a:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=CG(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,a,o;(a=e.anchor)!=null&&(o=a-(i+r*Math.floor((a-i)/r)),i+=o,s+=o);const l=function(c){let u=ti(t(c));return u==null?null:u<i?-1/0:u>s?1/0:(u=Math.max(i,Math.min(u,s-r)),i+r*Math.floor(Mye+(u-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=ds(l,si(t),e.name||"bin_"+Fn(t))}});function WG(e,t,n){const r=e;let i=t||[],s=n||[],a={},o=0;return{add:l=>s.push(l),remove:l=>a[r(l)]=++o,size:()=>i.length,data:(l,c)=>(o&&(i=i.filter(u=>!a[r(u)]),a={},o=0),c&&l&&i.sort(l),s.length&&(i=l?Lj(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function nN(e){oe.call(this,[],e)}nN.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Re(nN,oe,{transform(e,t){const n=t.fork(t.ALL),r=WG(Je,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(td(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function jG(e){sn.call(this,null,Lye,e)}Re(jG,sn);function Lye(e){return this.value&&!e.modified()?this.value:bO(e.fields,e.orders)}function rN(e){oe.call(this,null,e)}rN.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Pye(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Re(rN,oe,{transform(e,t){const n=f=>h=>{for(var d=Pye(o(h),e.case,s)||[],p,g=0,m=d.length;g<m;++g)a.test(p=d[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,a=this._stop,o=e.field,l=e.as||["text","count"],c=n(f=>i[f]=1+(i[f]||0)),u=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,u)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,c;for(o in n)l=r[o],c=n[o]||0,!l&&c?(r[o]=l=Wt({}),l[i]=o,l[s]=c,a.add.push(l)):c===0?(l&&a.rem.push(l),n[o]=null,r[o]=null):l[s]!==c&&(l[s]=c,a.mod.push(l));return a.modifies(t)}});function iN(e){oe.call(this,null,e)}iN.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Re(iN,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return a?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=Bye(o,i,s,e.filter||ga)):n.mod=o,n.source=this.value,n.modifies(r)}});function Bye(e,t,n,r){for(var i=[],s={},a=e.length,o=0,l,c;o<a;++o)for(s[t]=c=e[o],l=0;l<a;++l)s[n]=e[l],r(s)&&(i.push(Wt(s)),s={},s[t]=c);return i}const JL={kde:HO,mixture:RG,normal:zO,lognormal:DG,uniform:IG},Uye="distributions",ZL="function",zye="field";function GG(e,t){const n=e[ZL];ze(JL,n)||fe("Unknown distribution function: "+n);const r=JL[n]();for(const i in e)i===zye?r.data((e.from||t()).map(e[i])):i===Uye?r[i](e[i].map(s=>GG(s,t))):typeof r[i]===ZL&&r[i](e[i]);return r}function sN(e){oe.call(this,null,e)}const qG=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Hye={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:qG},{name:"weights",type:"number",array:!0}]};sN.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:qG.concat(Hye)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Re(sN,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=GG(e.distribution,Vye(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&fe("Invalid density method: "+a),!e.extent&&!r.data&&fe("Missing density extent parameter."),a=r[a];const o=e.as||["value","density"],l=e.extent||Go(r.data()),c=ew(a,l,i,s).map(u=>{const f={};return f[o[0]]=u[0],f[o[1]]=u[1],Wt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function Vye(e){return()=>e.materialize(e.SOURCE).source}function XG(e,t){return e?e.map((n,r)=>t[r]||Fn(n)):null}function aN(e,t,n){const r=[],i=f=>f(l);let s,a,o,l,c,u;if(t==null)r.push(e.map(n));else for(s={},a=0,o=e.length;a<o;++a)l=e[a],c=t.map(i),u=s[c],u||(s[c]=u=[],u.dims=c,r.push(u)),u.push(n(l));return r}const YG="bin";function oN(e){oe.call(this,null,e)}oN.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:YG}]};const Wye=(e,t)=>_x(Go(e,t))/30;Re(oN,oe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=aN(t.source,e.groupby,ui),i=e.smooth||!1,s=e.field,a=e.step||Wye(n,s),o=td((p,g)=>s(p)-s(g)),l=e.as||YG,c=r.length;let u=1/0,f=-1/0,h=0,d;for(;h<c;++h){const p=r[h].sort(o);d=-1;for(const g of OG(p,a,i,s))g<u&&(u=g),g>f&&(f=g),p[++d][l]=g}return this.value={start:u,stop:f,step:a},t.reflow(!0).modifies(l)}});function KG(e){sn.call(this,null,jye,e),this.modified(!0)}Re(KG,sn);function jye(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ds(n=>t(n,e),si(t),Fn(t))}function lN(e){oe.call(this,[void 0,void 0],e)}lN.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Re(lN,oe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],a=n[1];if((i||s==null)&&(s=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,o=>{const l=ti(r(o));l!=null&&(l<s&&(s=l),l>a&&(a=l))}),!Number.isFinite(s)||!Number.isFinite(a)){let o=Fn(r);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${s}, ${a}]`),s=a=void 0}this.value=[s,a]}});function cN(e,t){sn.call(this,e),this.parent=t,this.count=0}Re(cN,sn,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function tw(e){oe.call(this,{},e),this._keys=Pp();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Re(tw,oe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=ze(i,e)&&i[e],a,o;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(o=r||(o=this._group[e])&&o.tuple,a=n.dataflow,s=new cN(n.fork(n.NO_SOURCE),this),a.add(s).connect(t(a,e,o)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,a=e.modified("key"),o=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const c=Je(l),u=s.get(c);u!==void 0&&(s.delete(c),o(u).rem(l))}),t.visit(t.ADD,l=>{const c=r(l);s.set(Je(l),c),o(c).add(l)}),a||t.modified(r.fields)?t.visit(t.MOD,l=>{const c=Je(l),u=s.get(c),f=r(l);u===f?o(f).mod(l):(s.set(c,f),o(u).rem(l),o(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(s.get(Je(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const c=Je(l),u=s.get(c),f=r(l);u!==f&&(s.set(c,f),o(u).rem(l),o(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function JG(e){sn.call(this,null,Gye,e)}Re(JG,sn);function Gye(e){return this.value&&!e.modified()?this.value:pe(e.name)?Be(e.name).map(t=>pa(t)):pa(e.name,e.as)}function uN(e){oe.call(this,Pp(),e)}uN.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Re(uN,oe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,a=i.rem,o=i.mod,l=e.expr;let c=!0;t.visit(t.REM,f=>{const h=Je(f);r.has(h)?r.delete(h):a.push(f)}),t.visit(t.ADD,f=>{l(f,e)?s.push(f):r.set(Je(f),1)});function u(f){const h=Je(f),d=l(f,e),p=r.get(h);d&&p?(r.delete(h),s.push(f)):!d&&!p?(r.set(h,1),a.push(f)):c&&d&&!p&&o.push(f)}return t.visit(t.MOD,u),e.modified()&&(c=!1,t.visit(t.REFLOW,u)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function fN(e){oe.call(this,[],e)}fN.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Re(fN,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=XG(r,e.as||[]),s=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=r.map(p=>p(o)),c=l.reduce((p,g)=>Math.max(p,g.length),0);let u=0,f,h,d;for(;u<c;++u){for(h=IO(o),f=0;f<a;++f)h[i[f]]=(d=l[f][u])==null?null:d;s&&(h[s]=u),n.add.push(h)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function hN(e){oe.call(this,[],e)}hN.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Re(hN,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Fn),s=e.as||["key","value"],a=s[0],o=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,c=>{for(let u=0,f;u<l;++u)f=IO(c),f[a]=i[u],f[o]=r[u](c),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function dN(e){oe.call(this,null,e)}dN.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Re(dN,oe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,a=>a[r]=n(a,e))}});function ZG(e){oe.call(this,[],e)}Re(ZG,oe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,a,o,l;if(s>0){for(a=[];--s>=0;)a.push(l=Wt(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else o=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,i=i.slice(-s);return n.source=this.value=i,n}});const ty={value:"value",median:AH,mean:Af,min:nC,max:Kf},qye=[];function pN(e){oe.call(this,[],e)}pN.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Xye(e){var t=e.method||ty.value,n;if(ty[t]==null)fe("Unrecognized imputation method: "+t);else return t===ty.value?(n=e.value!==void 0?e.value:0,()=>n):ty[t]}function Yye(e){const t=e.field;return n=>n?t(n):NaN}Re(pN,oe,{transform(e,t){var n=t.fork(t.ALL),r=Xye(e),i=Yye(e),s=Fn(e.field),a=Fn(e.key),o=(e.groupby||[]).map(Fn),l=Kye(t.source,e.groupby,e.key,e.keyvals),c=[],u=this.value,f=l.domain.length,h,d,p,g,m,x,y,v,_,b;for(m=0,v=l.length;m<v;++m)for(h=l[m],p=h.values,d=NaN,y=0;y<f;++y)if(h[y]==null){for(g=l.domain[y],b={_impute:!0},x=0,_=p.length;x<_;++x)b[o[x]]=p[x];b[a]=g,b[s]=Number.isNaN(d)?d=r(h,i):d,c.push(Wt(b))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),u.length&&(n.rem=n.materialize(n.REM).rem.concat(u)),this.value=c,n}});function Kye(e,t,n,r){var i=x=>x(m),s=[],a=r?r.slice():[],o={},l={},c,u,f,h,d,p,g,m;for(a.forEach((x,y)=>o[x]=y+1),h=0,g=e.length;h<g;++h)m=e[h],p=n(m),d=o[p]||(o[p]=a.push(p)),u=(c=t?t.map(i):qye)+"",(f=l[u])||(f=l[u]=[],s.push(f),f.values=c),f[d-1]=m;return s.domain=a,s}function gN(e){Eu.call(this,e)}gN.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:wx},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Re(gN,Eu,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{ht(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function mN(e){oe.call(this,null,e)}mN.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Re(mN,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=aN(r,e.groupby,e.field),s=(e.groupby||[]).map(Fn),a=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],c=[];let u=e.extent,f=e.steps||e.minsteps||25,h=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&fe("Invalid density method: "+o),e.resolve==="shared"&&(u||(u=Go(r,e.field)),f=h=e.steps||h),i.forEach(d=>{const p=HO(d,a)[o],g=e.counts?d.length:1,m=u||Go(d);ew(p,m,f,h).forEach(x=>{const y={};for(let v=0;v<s.length;++v)y[s[v]]=d.dims[v];y[l[0]]=x[0],y[l[1]]=x[1]*g,c.push(Wt(y))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function QG(e){sn.call(this,null,Jye,e)}Re(QG,sn);function Jye(e){return this.value&&!e.modified()?this.value:wO(e.fields,e.flat)}function eq(e){oe.call(this,[],e),this._pending=null}Re(eq,oe,{transform(e,t){const n=t.dataflow;return this._pending?PT(this,t,this._pending):Zye(e)?t.StopPropagation:e.values?PT(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Be(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>PT(this,t,Be(r.data)))}});function Zye(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function PT(e,t,n){n.forEach(Wt);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function xN(e){oe.call(this,{},e)}xN.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Re(xN,oe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,a=e.modified(),o=n.length;let l=a?t.SOURCE:t.ADD,c=t,u=e.as,f,h,d;return i?(h=i.length,o>1&&!u&&fe('Multi-field lookup requires explicit "as" parameter.'),u&&u.length!==o*h&&fe('The "as" parameter has too few output field names.'),u=u||i.map(Fn),f=function(p){for(var g=0,m=0,x,y;g<o;++g)if(y=r.get(n[g](p)),y==null)for(x=0;x<h;++x,++m)p[u[m]]=s;else for(x=0;x<h;++x,++m)p[u[m]]=i[x](y)}):(u||fe("Missing output field names."),f=function(p){for(var g=0,m;g<o;++g)m=r.get(n[g](p)),p[u[g]]=m??s}),a?c=t.reflow(!0):(d=n.some(p=>t.modified(p.fields)),l|=d?t.MOD:0),t.visit(l,f),c.modifies(u)}});function tq(e){sn.call(this,null,Qye,e)}Re(tq,sn);function Qye(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,a;for(s=0;s<n;++s)a=t[s],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function nq(e){sn.call(this,null,e_e,e)}Re(nq,sn);function e_e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function rq(e){oe.call(this,null,e)}Re(rq,oe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function vN(e){Eu.call(this,e)}vN.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:wx,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Re(vN,Eu,{_transform:Eu.prototype.transform,transform(e,t){return this._transform(t_e(e,t),t)}});function t_e(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=si(n).concat(si(r)),a=r_e(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(o=>n_e(o,n,r,s)),as:a.map(o=>o+""),modified:e.modified.bind(e)}}function n_e(e,t,n,r){return ds(i=>t(i)===e?n(i):NaN,r,e+"")}function r_e(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const a=e(s);r[a]||(r[a]=1,i.push(a))}),i.sort(Lp),t?i.slice(0,t):i}function iq(e){tw.call(this,e)}Re(iq,tw,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Je(s),n,t,s);return(e.modified("field")||r&&t.modified(si(r)))&&fe("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const a=i(s);r(s).forEach(o=>a.mod(o))}),t.visit(t.ADD,s=>{const a=i(s);r(s).forEach(o=>a.add(Wt(o)))}),t.visit(t.REM,s=>{const a=i(s);r(s).forEach(o=>a.rem(o))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function yN(e){oe.call(this,null,e)}yN.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Re(yN,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=XG(e.fields,e.as||[]),s=r?(o,l)=>i_e(o,l,r,i):qE;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,o=>{const l=Je(o);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,o=>{const l=s(o,Wt({}));a[Je(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(s(o,a[Je(o)]))}),n}});function i_e(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function sq(e){oe.call(this,null,e)}Re(sq,oe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function _N(e){oe.call(this,null,e)}_N.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const s_e=1e-14;Re(_N,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=aN(i,e.groupby,e.field),a=(e.groupby||[]).map(Fn),o=[],l=e.step||.01,c=e.probs||Ss(l/2,1-s_e,l),u=c.length;return s.forEach(f=>{const h=LO(f,c);for(let d=0;d<u;++d){const p={};for(let g=0;g<a.length;++g)p[a[g]]=f.dims[g];p[r[0]]=c[d],p[r[1]]=h[d],o.push(Wt(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function aq(e){oe.call(this,null,e)}Re(aq,oe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Je(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=IO(i);r[Je(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Je(i)];for(const a in i)s[a]=i[a],n.modifies(a);n.mod.push(s)})),n}});function bN(e){oe.call(this,[],e),this.count=0}bN.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Re(bN,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((u,f)=>(u[Je(f)]=1,u),{});let a=this.value,o=this.count,l=0;function c(u){let f,h;a.length<i?a.push(u):(h=~~((o+1)*xa()),h<a.length&&h>=l&&(f=a[h],s[Je(f)]&&n.rem.push(f),a[h]=u)),++o}if(t.rem.length&&(t.visit(t.REM,u=>{const f=Je(u);s[f]&&(s[f]=-1,n.rem.push(u)),--o}),a=a.filter(u=>s[Je(u)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(l=o=a.length,t.visit(t.SOURCE,u=>{s[Je(u)]||c(u)}),l=-1),r&&a.length>i){const u=a.length-i;for(let f=0;f<u;++f)s[Je(a[f])]=-1,n.rem.push(a[f]);a=a.slice(u)}return t.mod.length&&t.visit(t.MOD,u=>{s[Je(u)]&&n.mod.push(u)}),t.add.length&&t.visit(t.ADD,c),(t.add.length||l<0)&&(n.add=a.filter(u=>!s[Je(u)])),this.count=o,this.value=n.source=a,n}});function EN(e){oe.call(this,null,e)}EN.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Re(EN,oe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ss(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Wt(s)}),n.add=t.add.concat(this.value),n}});function oq(e){oe.call(this,null,e),this.modified(!0)}Re(oq,oe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function wN(e){oe.call(this,null,e)}const lq=["unit0","unit1"];wN.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:kO,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:lq}]};Re(wN,oe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),a=(i?Up:Bp)(s.unit).offset,o=e.as||lq,l=o[0],c=o[1],u=s.step;let f=s.start||1/0,h=s.stop||-1/0,d=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(si(n)))&&(t=t.reflow(!0),d=t.SOURCE,f=1/0,h=-1/0),t.visit(d,p=>{const g=n(p);let m,x;g==null?(p[l]=null,r&&(p[c]=null)):(p[l]=m=x=s(g),r&&(p[c]=x=a(m,u)),m<f&&(f=m),x>h&&(h=x))}),s.start=f,s.stop=h,t.modifies(r?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:sG({extent:e.extent||Go(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=CO(r),a=this.value||{},o=(n?Kj:Yj)(s,i);return o.unit=Nt(s),o.units=s,o.step=i,o.start=a.start,o.stop=a.stop,this.value=o}});function cq(e){oe.call(this,Pp(),e)}Re(cq,oe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=o=>i.set(r(o),o);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,o=>i.delete(r(o))),t.visit(t.ADD,s)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function uq(e){oe.call(this,null,e)}Re(uq,oe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(td(e.sort)):t.source).map(e.field))}});function a_e(e,t,n,r){const i=F1[e](t,n);return{init:i.init||Wc,update:function(s,a){a[r]=i.next(s)}}}const F1={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=F1.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||fe("ntile num must be greater than zero.");const n=F1.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||fe("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=o_e(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function o_e(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const l_e=Object.keys(F1);function fq(e){const t=Be(e.ops),n=Be(e.fields),r=Be(e.params),i=Be(e.aggregate_params),s=Be(e.as),a=this.outputs=[],o=this.windows=[],l={},c={},u=[],f=[];let h=!0;function d(p){Be(si(p)).forEach(g=>l[g]=1)}d(e.sort),t.forEach((p,g)=>{const m=n[g],x=r[g],y=i[g]||null,v=Fn(m),_=UG(p,v,s[g]);if(d(m),a.push(_),ze(F1,p))o.push(a_e(p,m,x,_));else{if(m==null&&p!=="count"&&fe("Null aggregate field specified."),p==="count"){u.push(_);return}h=!1;let b=c[v];b||(b=c[v]=[],b.field=m,f.push(b)),b.push(zG(p,y,_))}}),(u.length||f.length)&&(this.cell=c_e(f,u,h)),this.inputs=Object.keys(l)}const hq=fq.prototype;hq.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};hq.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<s;++a)r[a].update(e,t)};function c_e(e,t,n){e=e.map(l=>VG(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),a=0;a<i;++a)s[a]=new e[a](r);if(r.store)var o=r.data=new eN;return r.add=function(l){if(r.num+=1,!n){o&&o.add(l);for(let c=0;c<i;++c)s[c].add(s[c].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){o&&o.rem(l);for(let c=0;c<i;++c)s[c].rem(s[c].get(l),l)}},r.set=function(l){let c,u;for(o&&o.values(),c=0,u=t.length;c<u;++c)l[t[c]]=r.num;if(!n)for(c=0,u=s.length;c<u;++c)s[c].set(l)},r.init=function(){r.num=0,o&&o.reset();for(let l=0;l<i;++l)s[l].init()},r}function SN(e){oe.call(this,{},e),this._mlen=0,this._mods=[]}SN.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:l_e.concat(wx)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Re(SN,oe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=td(e.sort),i=YC(e.groupby),s=o=>this.group(i(o));let a=this.state;(!a||n)&&(a=this.state=new fq(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,o=>s(o).add(o))):(t.visit(t.REM,o=>s(o).remove(o)),t.visit(t.ADD,o=>s(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)u_e(this._mods[o],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=WG(Je),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function u_e(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,a=r.frame||[null,0],o=e.data(n),l=o.length,c=s?Fp(i):null,u={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:i||fi(-1)};t.init();for(let f=0;f<l;++f)f_e(u,a,f,l),s&&h_e(u,c),t.update(u,o[f])}function f_e(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function h_e(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,a=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<a&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const d_e=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Eu,bin:tN,collect:nN,compare:jG,countpattern:rN,cross:iN,density:sN,dotbin:oN,expression:KG,extent:lN,facet:tw,field:JG,filter:uN,flatten:fN,fold:hN,formula:dN,generate:ZG,impute:pN,joinaggregate:gN,kde:mN,key:QG,load:eq,lookup:xN,multiextent:tq,multivalues:nq,params:rq,pivot:vN,prefacet:iq,project:yN,proxy:sq,quantile:_N,relay:aq,sample:bN,sequence:EN,sieve:oq,subflow:cN,timeunit:wN,tupleindex:cq,values:uq,window:SN},Symbol.toStringTag,{value:"Module"}));function fu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const p_e=()=>typeof Image<"u"?Image:null;function TN(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const g_e="identity",K0="linear",ic="log",Sx="pow",Tx="sqrt",nw="symlog",wh="time",Sh="utc",Mo="sequential",Hp="diverging",J0="quantile",rw="quantize",iw="threshold",AN="ordinal",KC="point",dq="band",kN="bin-ordinal",sr="continuous",Ax="discrete",kx="discretizing",wa="interpolating",CN="temporal";function m_e(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function x_e(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,a,o,l,c;for(i<r&&(o=r,r=i,i=o),l=0,c=n.length;l<c;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),a=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function FN(){const e=Z4().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,a=!1,o=0,l=0,c=.5;delete e.unknown;function u(){const f=t().length,h=r[1]<r[0],d=r[1-h],p=TN(f,o,l);let g=r[h-0];i=(d-g)/(p||1),a&&(i=Math.floor(i)),g+=(d-g-i*(f-o))*c,s=i*(1-o),a&&(g=Math.round(g),s=Math.round(s));const m=Ss(f).map(x=>g+i*x);return n(h?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],u()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],a=!0,u()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,u()):a},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),o=l,u()):o},e.paddingInner=function(f){return arguments.length?(o=Math.max(0,Math.min(1,f)),u()):o},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),u()):l},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),u()):c},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const h=r[1]<r[0],d=h?n().reverse():n(),p=d.length-1;let g=+f[0],m=+f[1],x,y,v;if(!(g!==g||m!==m)&&(m<g&&(v=g,g=m,m=v),!(m<d[0]||g>r[1-h])))return x=Math.max(0,vu(d,g)-1),y=g===m?x:vu(d,m)-1,g-d[x]>s+1e-10&&++x,h&&(v=x,x=p-y,y=p-v),x>y?void 0:t().slice(x,y+1)},e.invert=function(f){const h=e.invertRange([f,f]);return h&&h[0]},e.copy=function(){return FN().domain(t()).range(r).round(a).paddingInner(o).paddingOuter(l).align(c)},u()}function pq(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return pq(t())},e}function v_e(){return pq(FN().paddingInner(1))}var y_e=Array.prototype.map;function __e(e){return y_e.call(e,ti)}const b_e=Array.prototype.slice;function gq(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(vu(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=__e(r),n):e.slice()},n.range=function(r){return arguments.length?(t=b_e.call(r),n):t.slice()},n.tickFormat=function(r,i){return CW(e[0],Nt(e),r??10,i)},n.copy=function(){return gq().domain(n.domain()).range(n.range())},n}const W2=new Map,mq=Symbol("vega_scale");function xq(e){return e[mq]=!0,e}function E_e(e){return e&&e[mq]===!0}function w_e(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?m_e(s):s.invertExtent?x_e(s):void 0),s.type=e,xq(s)};return r.metadata=Ya(Be(n)),r}function zt(e,t,n){return arguments.length>1?(W2.set(e,w_e(e,t,n)),this):vq(e)?W2.get(e):void 0}zt(g_e,OW);zt(K0,FW,sr);zt(ic,DW,[sr,ic]);zt(Sx,nO,sr);zt(Tx,zge,sr);zt(nw,RW,sr);zt(wh,n1e,[sr,CN]);zt(Sh,r1e,[sr,CN]);zt(Mo,oO,[sr,wa]);zt(`${Mo}-${K0}`,oO,[sr,wa]);zt(`${Mo}-${ic}`,GW,[sr,wa,ic]);zt(`${Mo}-${Sx}`,lO,[sr,wa]);zt(`${Mo}-${Tx}`,i1e,[sr,wa]);zt(`${Mo}-${nw}`,qW,[sr,wa]);zt(`${Hp}-${K0}`,XW,[sr,wa]);zt(`${Hp}-${ic}`,YW,[sr,wa,ic]);zt(`${Hp}-${Sx}`,cO,[sr,wa]);zt(`${Hp}-${Tx}`,s1e,[sr,wa]);zt(`${Hp}-${nw}`,KW,[sr,wa]);zt(J0,IW,[kx,J0]);zt(rw,$W,kx);zt(iw,MW,kx);zt(kN,gq,[Ax,kx]);zt(AN,Z4,Ax);zt(dq,FN,Ax);zt(KC,v_e,Ax);function vq(e){return W2.has(e)}function rd(e,t){const n=W2.get(e);return n&&n.metadata[t]}function ON(e){return rd(e,sr)}function Z0(e){return rd(e,Ax)}function JC(e){return rd(e,kx)}function yq(e){return rd(e,ic)}function S_e(e){return rd(e,CN)}function _q(e){return rd(e,wa)}function bq(e){return rd(e,J0)}const T_e=["clamp","base","constant","exponent"];function Eq(e,t){const n=t[0],r=Nt(t)-n;return function(i){return e(n+i*r)}}function sw(e,t,n){return I4(NN(t||"rgb",n),e)}function wq(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Sq(e,t,n){const r=n-t;let i,s,a;return!r||!Number.isFinite(r)?fi(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),a=zt(s)().domain([t,n]).range([0,1]),T_e.forEach(o=>e[o]?a[o](e[o]()):0),a)}function NN(e,t){const n=Xfe[A_e(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function A_e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const k_e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},C_e={accent:o1e,category10:a1e,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:l1e,observable10:c1e,paired:u1e,pastel1:f1e,pastel2:h1e,set1:d1e,set2:p1e,set3:g1e,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Tq(e){if(pe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function Aq(e,t){for(const n in e)aw(n,t(e[n]))}const QL={};Aq(C_e,Tq);Aq(k_e,e=>sw(Tq(e)));function aw(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(QL[e]=t,this):QL[e]}const o_="symbol",F_e="discrete",O_e="gradient",N_e=e=>pe(e)?e.map(t=>String(t)):String(e),D_e=(e,t)=>e[1]-t[1],R_e=(e,t)=>t[1]-e[1];function DN(e,t,n){let r;return Ut(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(_x(e.domain())/n||1)+1))),Pe(t)&&(r=t.step,t=t.interval),Ue(t)&&(t=e.type===wh?Bp(t):e.type==Sh?Up(t):fe("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function kq(e,t,n){let r=e.range(),i=r[0],s=Nt(r),a=D_e;if(i>s&&(r=s,s=i,i=r,a=R_e),i=Math.floor(i),s=Math.ceil(s),t=t.map(o=>[o,e(o)]).filter(o=>i<=o[1]&&o[1]<=s).sort(a).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Nt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,c)=>!(c%2));t.length<3&&(t=o)}return t}function RN(e,t){return e.bins?kq(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function Cq(e,t,n,r,i,s){const a=t.type;let o=N_e;if(a===wh||i===wh)o=e.timeFormat(r);else if(a===Sh||i===Sh)o=e.utcFormat(r);else if(yq(a)){const l=e.formatFloat(r);if(s||t.bins)o=l;else{const c=Fq(t,n,!1);o=u=>c(u)?l(u):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(o=e.format(r));return o}function Fq(e,t,n){const r=RN(e,t),i=e.base(),s=Math.log(i),a=Math.max(1,i*t/r.length),o=l=>{let c=l/Math.pow(i,Math.round(Math.log(l)/s));return c*i<i-.5&&(c*=i),c<=a};return n?r.filter(o):o}const ZC={[J0]:"quantiles",[rw]:"thresholds",[iw]:"domain"},Oq={[J0]:"quantiles",[rw]:"domain"};function Nq(e,t){return e.bins?M_e(e.bins):e.type===ic?Fq(e,t,!0):ZC[e.type]?$_e(e[ZC[e.type]]()):RN(e,t)}function I_e(e,t,n){const r=t[Oq[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)s=Math.min(s,r[a]-r[a-1]);return e.formatSpan(0,s,3*10,n)}function $_e(e){const t=[-1/0].concat(e);return t.max=1/0,t}function M_e(e){const t=e.slice(0,-1);return t.max=Nt(e),t}const L_e=e=>ZC[e.type]||e.bins;function Dq(e,t,n,r,i,s,a){const o=Oq[t.type]&&s!==wh&&s!==Sh?I_e(e,t,i):Cq(e,t,n,i,s,a);return r===o_&&L_e(t)?P_e(o):r===F_e?B_e(o):U_e(o)}const P_e=e=>(t,n,r)=>{const i=e5(r[n+1],e5(r.max,1/0)),s=t5(t,e),a=t5(i,e);return s&&a?s+" – "+a:a?"< "+a:"≥ "+s},e5=(e,t)=>e??t,B_e=e=>(t,n)=>n?e(t):null,U_e=e=>t=>e(t),t5=(e,t)=>Number.isFinite(e)?t(e):null;function z_e(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Nt(t),s=i-r;if(e.type===iw){const a=n?s/n:.1;r-=a,i+=a,s=i-r}return a=>(a-r)/s}function H_e(e,t,n,r){const i=r||t.type;return Ue(n)&&S_e(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===wh?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Sh?e.utcFormat("%A, %d %B %Y, %X UTC"):Dq(e,t,5,null,n,r,!0)}function Rq(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=H_e(e,t,n.format,n.formatType);if(JC(t.type)){const s=Nq(t).slice(1).map(i),a=s.length;return`${a} boundar${a===1?"y":"ies"}: ${s.join(", ")}`}else if(Z0(t.type)){const s=t.domain(),a=s.length,o=a>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${o}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Nt(s))}`}}let Iq=0;function V_e(){Iq=0}const j2="p_";function IN(e){return e&&e.gradient}function $q(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?j2:"";return i||(i=e.id="gradient_"+Iq++,r==="radial"?(e.x1=mo(e.x1,.5),e.y1=mo(e.y1,.5),e.r1=mo(e.r1,0),e.x2=mo(e.x2,.5),e.y2=mo(e.y2,.5),e.r2=mo(e.r2,.5),s=j2):(e.x1=mo(e.x1,0),e.y1=mo(e.y1,0),e.x2=mo(e.x2,1),e.y2=mo(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function mo(e,t){return e??t}function Mq(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const n5={basis:{curve:k1e},"basis-closed":{curve:C1e},"basis-open":{curve:F1e},bundle:{curve:O1e,tension:"beta",value:.85},cardinal:{curve:N1e,tension:"tension",value:0},"cardinal-open":{curve:R1e,tension:"tension",value:0},"cardinal-closed":{curve:D1e,tension:"tension",value:0},"catmull-rom":{curve:I1e,tension:"alpha",value:.5},"catmull-rom-closed":{curve:$1e,tension:"alpha",value:.5},"catmull-rom-open":{curve:M1e,tension:"alpha",value:.5},linear:{curve:uO},"linear-closed":{curve:L1e},monotone:{horizontal:B1e,vertical:P1e},natural:{curve:U1e},step:{curve:z1e},"step-after":{curve:V1e},"step-before":{curve:H1e}};function $N(e,t,n){var r=ze(n5,e)&&n5[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const W_e={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},j_e=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,G_e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,q_e=/^((\s+,?\s*)|(,\s*))/,X_e=/^[01]/;function Q0(e){const t=[];return(e.match(j_e)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),a=W_e[s],o=Y_e(s,a,r.slice(1).trim()),l=o.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...o.slice(0,a)]),l!==a){s==="m"&&(i=i==="M"?"L":"l");for(let c=a;c<l;c+=a)t.push([i,...o.slice(c,c+a)])}}),t}function Y_e(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const a=e==="a"&&(s===3||s===4)?X_e:G_e,o=n.slice(i).match(a);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");i+=o[0].length,r.push(+o[0]);const l=n.slice(i).match(q_e);l!==null&&(i+=l[0].length)}return r}const wu=Math.PI/180,K_e=1e-14,Df=Math.PI/2,Fo=Math.PI*2,Od=Math.sqrt(3)/2;var BT={},UT={},Lq=[].join;function J_e(e,t,n,r,i,s,a,o,l){const c=Lq.call(arguments);if(BT[c])return BT[c];const u=a*wu,f=Math.sin(u),h=Math.cos(u);n=Math.abs(n),r=Math.abs(r);const d=h*(o-e)*.5+f*(l-t)*.5,p=h*(l-t)*.5-f*(o-e)*.5;let g=d*d/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=h/n,x=f/n,y=-f/r,v=h/r,_=m*o+x*l,b=y*o+v*l,w=m*e+x*t,E=y*e+v*t;let S=1/((w-_)*(w-_)+(E-b)*(E-b))-.25;S<0&&(S=0);let A=Math.sqrt(S);s==i&&(A=-A);const C=.5*(_+w)-A*(E-b),F=.5*(b+E)+A*(w-_),N=Math.atan2(b-F,_-C);let O=Math.atan2(E-F,w-C)-N;O<0&&s===1?O+=Fo:O>0&&s===0&&(O-=Fo);const D=Math.ceil(Math.abs(O/(Df+.001))),I=[];for(let U=0;U<D;++U){const Y=N+U*O/D,X=N+(U+1)*O/D;I[U]=[C,F,Y,X,n,r,f,h]}return BT[c]=I}function Z_e(e){const t=Lq.call(e);if(UT[t])return UT[t];var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7];const u=c*a,f=-l*o,h=l*a,d=c*o,p=Math.cos(i),g=Math.sin(i),m=Math.cos(s),x=Math.sin(s),y=.5*(s-i),v=Math.sin(y*.5),_=8/3*v*v/Math.sin(y),b=n+p-_*g,w=r+g+_*p,E=n+m,T=r+x,S=E+_*x,A=T-_*m;return UT[t]=[u*b+f*w,h*b+d*w,u*S+f*A,h*S+d*A,u*E+f*T,h*E+d*T]}const js=["l",0,0,0,0,0,0,0];function Q_e(e,t,n){const r=js[0]=e[0];if(r==="a"||r==="A")js[1]=t*e[1],js[2]=n*e[2],js[3]=e[3],js[4]=e[4],js[5]=e[5],js[6]=t*e[6],js[7]=n*e[7];else if(r==="h"||r==="H")js[1]=t*e[1];else if(r==="v"||r==="V")js[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)js[i]=(i%2==1?t:n)*e[i];return js}function O1(e,t,n,r,i,s){var a,o=null,l=0,c=0,u=0,f=0,h,d,p,g,m=0,x=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var y=0,v=t.length;y<v;++y){switch(a=t[y],(i!==1||s!==1)&&(a=Q_e(a,i,s)),a[0]){case"l":l+=a[1],c+=a[2],e.lineTo(l+n,c+r);break;case"L":l=a[1],c=a[2],e.lineTo(l+n,c+r);break;case"h":l+=a[1],e.lineTo(l+n,c+r);break;case"H":l=a[1],e.lineTo(l+n,c+r);break;case"v":c+=a[1],e.lineTo(l+n,c+r);break;case"V":c=a[1],e.lineTo(l+n,c+r);break;case"m":l+=a[1],c+=a[2],m=l,x=c,e.moveTo(l+n,c+r);break;case"M":l=a[1],c=a[2],m=l,x=c,e.moveTo(l+n,c+r);break;case"c":h=l+a[5],d=c+a[6],u=l+a[3],f=c+a[4],e.bezierCurveTo(l+a[1]+n,c+a[2]+r,u+n,f+r,h+n,d+r),l=h,c=d;break;case"C":l=a[5],c=a[6],u=a[3],f=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,u+n,f+r,l+n,c+r);break;case"s":h=l+a[3],d=c+a[4],u=2*l-u,f=2*c-f,e.bezierCurveTo(u+n,f+r,l+a[1]+n,c+a[2]+r,h+n,d+r),u=l+a[1],f=c+a[2],l=h,c=d;break;case"S":h=a[3],d=a[4],u=2*l-u,f=2*c-f,e.bezierCurveTo(u+n,f+r,a[1]+n,a[2]+r,h+n,d+r),l=h,c=d,u=a[1],f=a[2];break;case"q":h=l+a[3],d=c+a[4],u=l+a[1],f=c+a[2],e.quadraticCurveTo(u+n,f+r,h+n,d+r),l=h,c=d;break;case"Q":h=a[3],d=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,h+n,d+r),l=h,c=d,u=a[1],f=a[2];break;case"t":h=l+a[1],d=c+a[2],o[0].match(/[QqTt]/)===null?(u=l,f=c):o[0]==="t"?(u=2*l-p,f=2*c-g):o[0]==="q"&&(u=2*l-u,f=2*c-f),p=u,g=f,e.quadraticCurveTo(u+n,f+r,h+n,d+r),l=h,c=d,u=l+a[1],f=c+a[2];break;case"T":h=a[1],d=a[2],u=2*l-u,f=2*c-f,e.quadraticCurveTo(u+n,f+r,h+n,d+r),l=h,c=d;break;case"a":r5(e,l+n,c+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+c+r]),l+=a[6],c+=a[7];break;case"A":r5(e,l+n,c+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],c=a[7];break;case"z":case"Z":l=m,c=x,e.closePath();break}o=a}}function r5(e,t,n,r){const i=J_e(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const a=Z_e(i[s]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const i5=.5773502691896257,s5={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Fo)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Od*n,i=r-n*i5,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Od*n,i=r-n*i5;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Od*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Od*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Od*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Od*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Pq(e){return ze(s5,e)?s5[e]:e2e(e)}var zT={};function e2e(e){if(!ze(zT,e)){const t=Q0(e);zT[e]={draw:function(n,r){O1(n,t,0,0,Math.sqrt(r)/2)}}}return zT[e]}const Ac=.448084975506;function t2e(e){return e.x}function n2e(e){return e.y}function r2e(e){return e.width}function i2e(e){return e.height}function xl(e){return typeof e=="function"?e:()=>+e}function ny(e,t,n){return Math.max(t,Math.min(e,n))}function Bq(){var e=t2e,t=n2e,n=r2e,r=i2e,i=xl(0),s=i,a=i,o=i,l=null;function c(u,f,h){var d,p=f??+e.call(this,u),g=h??+t.call(this,u),m=+n.call(this,u),x=+r.call(this,u),y=Math.min(m,x)/2,v=ny(+i.call(this,u),0,y),_=ny(+s.call(this,u),0,y),b=ny(+a.call(this,u),0,y),w=ny(+o.call(this,u),0,y);if(l||(l=d=TE()),v<=0&&_<=0&&b<=0&&w<=0)l.rect(p,g,m,x);else{var E=p+m,T=g+x;l.moveTo(p+v,g),l.lineTo(E-_,g),l.bezierCurveTo(E-Ac*_,g,E,g+Ac*_,E,g+_),l.lineTo(E,T-w),l.bezierCurveTo(E,T-Ac*w,E-Ac*w,T,E-w,T),l.lineTo(p+b,T),l.bezierCurveTo(p+Ac*b,T,p,T-Ac*b,p,T-b),l.lineTo(p,g+v),l.bezierCurveTo(p,g+Ac*v,p+Ac*v,g,p+v,g),l.closePath()}if(d)return l=null,d+""||null}return c.x=function(u){return arguments.length?(e=xl(u),c):e},c.y=function(u){return arguments.length?(t=xl(u),c):t},c.width=function(u){return arguments.length?(n=xl(u),c):n},c.height=function(u){return arguments.length?(r=xl(u),c):r},c.cornerRadius=function(u,f,h,d){return arguments.length?(i=xl(u),s=f!=null?xl(f):i,o=h!=null?xl(h):i,a=d!=null?xl(d):s,c):i},c.context=function(u){return arguments.length?(l=u??null,c):l},c}function Uq(){var e,t,n,r,i=null,s,a,o,l;function c(f,h,d){const p=d/2;if(s){var g=o-h,m=f-a;if(g||m){var x=Math.hypot(g,m),y=(g/=x)*l,v=(m/=x)*l,_=Math.atan2(m,g);i.moveTo(a-y,o-v),i.lineTo(f-g*p,h-m*p),i.arc(f,h,p,_-Math.PI,_),i.lineTo(a+y,o+v),i.arc(a,o,l,_,_+Math.PI)}else i.arc(f,h,p,0,Fo);i.closePath()}else s=1;a=f,o=h,l=p}function u(f){var h,d=f.length,p,g=!1,m;for(i==null&&(i=m=TE()),h=0;h<=d;++h)!(h<d&&r(p=f[h],h,f))===g&&(g=!g)&&(s=0),g&&c(+e(p,h,f),+t(p,h,f),+n(p,h,f));if(m)return i=null,m+""||null}return u.x=function(f){return arguments.length?(e=f,u):e},u.y=function(f){return arguments.length?(t=f,u):t},u.size=function(f){return arguments.length?(n=f,u):n},u.defined=function(f){return arguments.length?(r=f,u):r},u.context=function(f){return arguments.length?(f==null?i=null:i=f,u):i},u}function Cx(e,t){return e??t}const Fx=e=>e.x||0,Ox=e=>e.y||0,s2e=e=>e.width||0,a2e=e=>e.height||0,o2e=e=>(e.x||0)+(e.width||0),l2e=e=>(e.y||0)+(e.height||0),c2e=e=>e.startAngle||0,u2e=e=>e.endAngle||0,f2e=e=>e.padAngle||0,h2e=e=>e.innerRadius||0,d2e=e=>e.outerRadius||0,p2e=e=>e.cornerRadius||0,g2e=e=>Cx(e.cornerRadiusTopLeft,e.cornerRadius)||0,m2e=e=>Cx(e.cornerRadiusTopRight,e.cornerRadius)||0,x2e=e=>Cx(e.cornerRadiusBottomRight,e.cornerRadius)||0,v2e=e=>Cx(e.cornerRadiusBottomLeft,e.cornerRadius)||0,y2e=e=>Cx(e.size,64),_2e=e=>e.size||1,ow=e=>e.defined!==!1,b2e=e=>Pq(e.shape||"circle"),E2e=S1e().startAngle(c2e).endAngle(u2e).padAngle(f2e).innerRadius(h2e).outerRadius(d2e).cornerRadius(p2e),w2e=rj().x(Fx).y1(Ox).y0(l2e).defined(ow),S2e=rj().y(Ox).x1(Fx).x0(o2e).defined(ow),T2e=nj().x(Fx).y(Ox).defined(ow),A2e=Bq().x(Fx).y(Ox).width(s2e).height(a2e).cornerRadius(g2e,m2e,x2e,v2e),k2e=A1e().type(b2e).size(y2e),C2e=Uq().x(Fx).y(Ox).defined(ow).size(_2e);function MN(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function F2e(e,t){return E2e.context(e)(t)}function O2e(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?S2e:w2e).curve($N(r,n.orient,n.tension)).context(e)(t)}function N2e(e,t){const n=t[0],r=n.interpolate||"linear";return T2e.curve($N(r,n.orient,n.tension)).context(e)(t)}function Vp(e,t,n,r){return A2e.context(e)(t,n,r)}function D2e(e,t){return(t.mark.shape||t.shape).context(e)(t)}function R2e(e,t){return k2e.context(e)(t)}function I2e(e,t){return C2e.context(e)(t)}var zq=1;function Hq(){zq=1}function LN(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+zq++),a=i.clipping[s]||(i.clipping[s]={id:s});return pt(r)?a.path=r(null):MN(n)?a.path=Vp(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function jn(e){this.clear(),e&&this.union(e)}jn.prototype={clone(){return new jn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:a}=this,o=Math.cos(e),l=Math.sin(e),c=t-t*o+n*l,u=n-t*l-n*o;return[o*r-l*i+c,l*r+o*i+u,o*r-l*a+c,l*r+o*a+u,o*s-l*i+c,l*s+o*i+u,o*s-l*a+c,l*s+o*a+u]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function lw(e){this.mark=e,this.bounds=this.bounds||new jn}function cw(e){lw.call(this,e),this.items=this.items||[]}Re(cw,lw);class Vq{constructor(t){this._pending=0,this._loader=t||WE()}pending(){return this._pending}sanitizeURL(t){const n=this;return a5(n),n._loader.sanitize(t,{context:"href"}).then(r=>(Ag(n),r)).catch(()=>(Ag(n),null))}loadImage(t){const n=this,r=p_e();return a5(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const a=new r,o=ze(i,"crossOrigin")?i.crossOrigin:"anonymous";return o!=null&&(a.crossOrigin=o),a.onload=()=>Ag(n),a.onerror=()=>Ag(n),a.src=s,a}).catch(i=>(Ag(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function a5(e){e._pending+=1}function Ag(e){e._pending-=1}function hc(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?$2e(t,r):0))}return e}function $2e(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const M2e=Fo-1e-8;let uw,l_,c_,zf,QC,u_,eF,tF;const Xc=(e,t)=>uw.add(e,t),f_=(e,t)=>Xc(l_=e,c_=t),o5=e=>Xc(e,uw.y1),l5=e=>Xc(uw.x1,e),Rf=(e,t)=>QC*e+eF*t,If=(e,t)=>u_*e+tF*t,HT=(e,t)=>Xc(Rf(e,t),If(e,t)),VT=(e,t)=>f_(Rf(e,t),If(e,t));function Nx(e,t){return uw=e,t?(zf=t*wu,QC=tF=Math.cos(zf),u_=Math.sin(zf),eF=-u_):(QC=tF=1,zf=u_=eF=0),L2e}const L2e={beginPath(){},closePath(){},moveTo:VT,lineTo:VT,rect(e,t,n,r){zf?(HT(e+n,t),HT(e+n,t+r),HT(e,t+r),VT(e,t)):(Xc(e+n,t+r),f_(e,t))},quadraticCurveTo(e,t,n,r){const i=Rf(e,t),s=If(e,t),a=Rf(n,r),o=If(n,r);c5(l_,i,a,o5),c5(c_,s,o,l5),f_(a,o)},bezierCurveTo(e,t,n,r,i,s){const a=Rf(e,t),o=If(e,t),l=Rf(n,r),c=If(n,r),u=Rf(i,s),f=If(i,s);u5(l_,a,l,u,o5),u5(c_,o,c,f,l5),f_(u,f)},arc(e,t,n,r,i,s){if(r+=zf,i+=zf,l_=n*Math.cos(i)+e,c_=n*Math.sin(i)+t,Math.abs(i-r)>M2e)Xc(e-n,t-n),Xc(e+n,t+n);else{const a=c=>Xc(n*Math.cos(c)+e,n*Math.sin(c)+t);let o,l;if(a(r),a(i),i!==r)if(r=r%Fo,r<0&&(r+=Fo),i=i%Fo,i<0&&(i+=Fo),i<r&&(s=!s,o=r,r=i,i=o),s)for(i-=Fo,o=r-r%Df,l=0;l<4&&o>i;++l,o-=Df)a(o);else for(o=r-r%Df+Df,l=0;l<4&&o<i;++l,o=o+Df)a(o)}}};function c5(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function u5(e,t,n,r,i){const s=r-e+3*t-3*n,a=e+n-2*t,o=e-t;let l=0,c=0,u;Math.abs(s)>K_e?(u=a*a+o*s,u>=0&&(u=Math.sqrt(u),l=(-a+u)/s,c=(-a-u)/s)):l=.5*o/a,0<l&&l<1&&i(f5(l,e,t,n,r)),0<c&&c<1&&i(f5(c,e,t,n,r))}function f5(e,t,n,r,i){const s=1-e,a=s*s,o=e*e;return a*s*t+3*a*e*n+3*s*o*r+o*e*i}var hu=(hu=fu(1,1))?hu.getContext("2d"):null;const nF=new jn;function PN(e){return function(t,n){if(!hu)return!0;e(hu,t),nF.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:a}=nF;for(let o=i;o<=a;++o)for(let l=r;l<=s;++l)if(hu.isPointInPath(l,o))return!0;return!1}}function BN(e,t){return t.contains(e.x||0,e.y||0)}function Wq(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(nF.set(n,r,n+i,r+s))}function jq(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return t0(t,n,r,i,s)}function t0(e,t,n,r,i){const{x1:s,y1:a,x2:o,y2:l}=e,c=r-t,u=i-n;let f=0,h=1,d,p,g,m;for(m=0;m<4;++m){if(m===0&&(d=-c,p=-(s-t)),m===1&&(d=c,p=o-t),m===2&&(d=-u,p=-(a-n)),m===3&&(d=u,p=l-n),Math.abs(d)<1e-10&&p<0)return!1;if(g=p/d,d<0){if(g>h)return!1;g>f&&(f=g)}else if(d>0){if(g<f)return!1;g<h&&(h=g)}}return!0}function ep(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Na(e,t){return e??t}function h5(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function P2e(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Na(t.x1,.5)*r,n.y1+Na(t.y1,.5)*i,Math.max(r,i)*Na(t.r1,0),n.x1+Na(t.x2,.5)*r,n.y1+Na(t.y2,.5)*i,Math.max(r,i)*Na(t.r2,.5));else{const a=Na(t.x1,0),o=Na(t.y1,0),l=Na(t.x2,1),c=Na(t.y2,0);if(a===l||o===c||r===i)s=e.createLinearGradient(n.x1+a*r,n.y1+o*i,n.x1+l*r,n.y1+c*i);else{const u=fu(Math.ceil(r),Math.ceil(i)),f=u.getContext("2d");return f.scale(r,i),f.fillStyle=h5(f.createLinearGradient(a,o,l,c),t.stops),f.fillRect(0,0,r,i),e.createPattern(u,"no-repeat")}}return h5(s,t.stops)}function Gq(e,t,n){return IN(n)?P2e(e,n,t.bounds):n}function G2(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Gq(e,t,t.fill),!0):!1}var B2e=[];function tp(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Gq(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||B2e),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function U2e(e,t){return e.zindex-t.zindex||e.index-t.index}function UN(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(U2e)}function Ja(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=UN(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function q2(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=UN(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function zN(e){return function(t,n,r){Ja(n,i=>{(!r||r.intersects(i.bounds))&&qq(e,t,i,i)})}}function z2e(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&qq(e,t,n.items[0],n.items)}}function qq(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(ep(t,n),n.fill&&G2(t,n,i)&&t.fill(),n.stroke&&tp(t,n,i)&&t.stroke()))}function fw(e){return e=e||ga,function(t,n,r,i,s,a){return r*=t.pixelRatio,i*=t.pixelRatio,q2(n,o=>{const l=o.bounds;if(!(l&&!l.contains(s,a)||!l)&&e(t,o,r,i,s,a))return o})}}function Dx(e,t){return function(n,r,i,s){var a=Array.isArray(r)?r[0]:r,o=t??a.fill,l=a.stroke&&n.isPointInStroke,c,u;return l&&(c=a.strokeWidth,u=a.strokeCap,n.lineWidth=c??1,n.lineCap=u??"butt"),e(n,r)?!1:o&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function HN(e){return fw(Dx(e))}function Qf(e,t){return"translate("+e+","+t+")"}function VN(e){return"rotate("+e+")"}function H2e(e,t){return"scale("+e+","+t+")"}function Xq(e){return Qf(e.x||0,e.y||0)}function V2e(e){return Qf(e.x||0,e.y||0)+(e.angle?" "+VN(e.angle):"")}function W2e(e){return Qf(e.x||0,e.y||0)+(e.angle?" "+VN(e.angle):"")+(e.scaleX||e.scaleY?" "+H2e(e.scaleX||1,e.scaleY||1):"")}function WN(e,t,n){function r(a,o){a("transform",V2e(o)),a("d",t(null,o))}function i(a,o){return t(Nx(a,o.angle),o),hc(a,o).translate(o.x||0,o.y||0)}function s(a,o){var l=o.x||0,c=o.y||0,u=o.angle||0;a.translate(l,c),u&&a.rotate(u*=wu),a.beginPath(),t(a,o),u&&a.rotate(-u),a.translate(-l,-c)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:zN(s),pick:HN(s),isect:n||PN(s)}}var j2e=WN("arc",F2e);function G2e(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,a,o;--i>=0;)e[i].defined!==!1&&(o=Math.abs(e[i][r]-n),o<s&&(s=o,a=e[i]));return a}function q2e(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],a=i*i+s*s,a<n))return e[r];return null}function X2e(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function jN(e,t,n){function r(l,c){var u=c.mark.items;u.length&&l("d",t(null,u))}function i(l,c){var u=c.items;return u.length===0?l:(t(Nx(l),u),hc(l,u[0]))}function s(l,c){l.beginPath(),t(l,c)}const a=Dx(s);function o(l,c,u,f,h,d){var p=c.items,g=c.bounds;return!p||!p.length||g&&!g.contains(h,d)?null:(u*=l.pixelRatio,f*=l.pixelRatio,a(l,p,u,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:z2e(s),pick:o,isect:BN,tip:n}}var Y2e=jN("area",O2e,G2e);function K2e(e,t){var n=t.clip;e.save(),pt(n)?(e.beginPath(),n(e),e.clip()):Yq(e,t.group)}function Yq(e,t){e.beginPath(),MN(t)?Vp(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Kq(e){const t=Na(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function J2e(e,t){e("transform",Xq(t))}function Jq(e,t){const n=Kq(t);e("d",Vp(null,t,n,n))}function Z2e(e,t){e("class","background"),e("aria-hidden",!0),Jq(e,t)}function Q2e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Jq(e,t):e("d","")}function ebe(e,t,n){const r=t.clip?LN(n,t,t):null;e("clip-path",r)}function tbe(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),hc(e,t),e.translate(t.x||0,t.y||0)}function N1(e,t,n,r){const i=Kq(t);e.beginPath(),Vp(e,t,(n||0)+i,(r||0)+i)}const nbe=Dx(N1),rbe=Dx(N1,!1),ibe=Dx(N1,!0);function sbe(e,t,n,r){Ja(t,i=>{const s=i.x||0,a=i.y||0,o=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(N1(e,i,s,a),ep(e,i),i.fill&&G2(e,i,l)&&e.fill(),i.stroke&&!o&&tp(e,i,l)&&e.stroke()),e.save(),e.translate(s,a),i.clip&&Yq(e,i),n&&n.translate(-s,-a),Ja(i,c=>{(c.marktype==="group"||r==null||r.includes(c.marktype))&&this.draw(e,c,n,r)}),n&&n.translate(s,a),e.restore(),o&&i.stroke&&l&&(N1(e,i,s,a),ep(e,i),tp(e,i,l)&&e.stroke())})}function abe(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const a=n*e.pixelRatio,o=r*e.pixelRatio;return q2(t,l=>{let c,u,f;const h=l.bounds;if(h&&!h.contains(i,s))return;u=l.x||0,f=l.y||0;const d=u+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(i<u||i>d||s<f||s>p))return;if(e.save(),e.translate(u,f),u=i-u,f=s-f,g&&MN(l)&&!ibe(e,l,a,o))return e.restore(),null;const m=l.strokeForeground,x=t.interactive!==!1;return x&&m&&l.stroke&&rbe(e,l,a,o)?(e.restore(),l):(c=q2(l,y=>obe(y,u,f)?this.pick(y,n,r,u,f):null),!c&&x&&(l.fill||!m&&l.stroke)&&nbe(e,l,a,o)&&(c=l),e.restore(),c||null)})}function obe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var lbe={type:"group",tag:"g",nested:!1,attr:J2e,bound:tbe,draw:sbe,pick:abe,isect:Wq,content:ebe,background:Z2e,foreground:Q2e},D1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function GN(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function qN(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function XN(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function hw(e,t){return e==="center"?t/2:e==="right"?t:0}function dw(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function cbe(e,t,n){const r=GN(t,n),i=qN(t,r),s=XN(t,r),a=(t.x||0)-hw(t.align,i),o=(t.y||0)-dw(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,D1["xmlns:xlink"],"xlink:href"),e("transform",Qf(a,o)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function ube(e,t){const n=t.image,r=qN(t,n),i=XN(t,n),s=(t.x||0)-hw(t.align,r),a=(t.y||0)-dw(t.baseline,i);return e.set(s,a,s+r,a+i)}function fbe(e,t,n){Ja(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=GN(r,this);let s=qN(r,i),a=XN(r,i);if(s===0||a===0)return;let o=(r.x||0)-hw(r.align,s),l=(r.y||0)-dw(r.baseline,a),c,u,f,h;r.aspect!==!1&&(u=i.width/i.height,f=r.width/r.height,u===u&&f===f&&u!==f&&(f<u?(h=s/u,l+=(a-h)/2,a=h):(h=a*u,o+=(s-h)/2,s=h))),(i.complete||i.toDataURL)&&(ep(e,r),e.globalAlpha=(c=r.opacity)!=null?c:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,o,l,s,a))})}var hbe={type:"image",tag:"image",nested:!1,attr:cbe,bound:ube,draw:fbe,pick:fw(),isect:ga,get:GN,xOffset:hw,yOffset:dw},dbe=jN("line",N2e,q2e);function pbe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",W2e(t)),e("d",t.path)}function h_(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,a=t.scaleY||1,o=(t.angle||0)*wu,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Q0(n)).path=n),o&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(o),O1(e,l,0,0,s,a),e.rotate(-o),e.translate(-r,-i)):O1(e,l,r,i,s,a)}function gbe(e,t){return h_(Nx(e,t.angle),t)?e.set(0,0,0,0):hc(e,t,!0)}var mbe={type:"path",tag:"path",nested:!1,attr:pbe,bound:gbe,draw:zN(h_),pick:HN(h_),isect:PN(h_)};function xbe(e,t){e("d",Vp(null,t))}function vbe(e,t){var n,r;return hc(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function d5(e,t){e.beginPath(),Vp(e,t)}var ybe={type:"rect",tag:"path",nested:!1,attr:xbe,bound:vbe,draw:zN(d5),pick:HN(d5),isect:Wq};function _be(e,t){e("transform",Xq(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function bbe(e,t){var n,r;return hc(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Zq(e,t,n){var r,i,s,a;return t.stroke&&tp(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,a),!0):!1}function Ebe(e,t,n){Ja(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Zq(e,r,i)&&(ep(e,r),e.stroke())}})}function wbe(e,t,n,r){return e.isPointInStroke?Zq(e,t,1)&&e.isPointInStroke(n,r):!1}var Sbe={type:"rule",tag:"line",nested:!1,attr:_be,bound:bbe,draw:Ebe,pick:fw(wbe),isect:jq},Tbe=WN("shape",D2e),Abe=WN("symbol",R2e,BN);const p5=Mj();var Cs={height:il,measureWidth:YN,estimateWidth:X2,width:X2,canvas:Qq};Qq(!0);function Qq(e){Cs.width=e&&hu?YN:X2}function X2(e,t){return eX(Tu(e,t),il(e))}function eX(e,t){return~~(.8*e.length*t)}function YN(e,t){return il(e)<=0||!(t=Tu(e,t))?0:tX(t,pw(e))}function tX(e,t){const n=`(${t}) ${e}`;let r=p5.get(n);return r===void 0&&(hu.font=t,r=hu.measureText(e).width,p5.set(n,r)),r}function il(e){return e.fontSize!=null?+e.fontSize||0:11}function Su(e){return e.lineHeight!=null?e.lineHeight:il(e)+2}function kbe(e){return pe(e)?e.length>1?e:e[0]:e}function Rx(e){return kbe(e.lineBreak&&e.text&&!pe(e.text)?e.text.split(e.lineBreak):e.text)}function KN(e){const t=Rx(e);return(pe(t)?t.length-1:0)*Su(e)}function Tu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Fbe(e,n):n}function Cbe(e){if(Cs.width===YN){const t=pw(e);return n=>tX(n,t)}else if(Cs.width===X2){const t=il(e);return n=>eX(n,t)}else return t=>Cs.width(e,t)}function Fbe(e,t){var n=+e.limit,r=Cbe(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",a=0,o=t.length,l;if(n-=r(i),s){for(;a<o;)l=a+o>>>1,r(t.slice(l))>n?a=l+1:o=l;return i+t.slice(a)}else{for(;a<o;)l=1+(a+o>>>1),r(t.slice(0,l))<n?a=l:o=l-1;return t.slice(0,a)+i}}function Ix(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function pw(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+il(e)+"px "+Ix(e,t)}function JN(e){var t=e.baseline,n=il(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Su(e):t==="line-bottom"?.29*n-.5*Su(e):0)}const Obe={left:"start",center:"middle",right:"end"},Nm=new jn;function gw(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Df,t+=r*Math.cos(i),n+=r*Math.sin(i)),Nm.x1=t,Nm.y1=n,Nm}function Nbe(e,t){var n=t.dx||0,r=(t.dy||0)+JN(t),i=gw(t),s=i.x1,a=i.y1,o=t.angle||0,l;e("text-anchor",Obe[t.align]||"start"),o?(l=Qf(s,a)+" "+VN(o),(n||r)&&(l+=" "+Qf(n,r))):l=Qf(s+n,a+r),e("transform",l)}function ZN(e,t,n){var r=Cs.height(t),i=t.align,s=gw(t),a=s.x1,o=s.y1,l=t.dx||0,c=(t.dy||0)+JN(t)-Math.round(.8*r),u=Rx(t),f;if(pe(u)?(r+=Su(t)*(u.length-1),f=u.reduce((h,d)=>Math.max(h,Cs.width(t,d)),0)):f=Cs.width(t,u),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=a,c+=o,l+f,c+r),t.angle&&!n)e.rotate(t.angle*wu,a,o);else if(n===2)return e.rotatedPoints(t.angle*wu,a,o);return e}function Dbe(e,t,n){Ja(t,r=>{var i=r.opacity==null?1:r.opacity,s,a,o,l,c,u,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=pw(r),e.textAlign=r.align||"left",s=gw(r),a=s.x1,o=s.y1,r.angle&&(e.save(),e.translate(a,o),e.rotate(r.angle*wu),a=o=0),a+=r.dx||0,o+=(r.dy||0)+JN(r),u=Rx(r),ep(e,r),pe(u))for(c=Su(r),l=0;l<u.length;++l)f=Tu(r,u[l]),r.fill&&G2(e,r,i)&&e.fillText(f,a,o),r.stroke&&tp(e,r,i)&&e.strokeText(f,a,o),o+=c;else f=Tu(r,u),r.fill&&G2(e,r,i)&&e.fillText(f,a,o),r.stroke&&tp(e,r,i)&&e.strokeText(f,a,o);r.angle&&e.restore()}})}function Rbe(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=gw(t),o=a.x1,l=a.y1,c=ZN(Nm,t,1),u=-t.angle*wu,f=Math.cos(u),h=Math.sin(u),d=f*i-h*s+(o-f*o+h*l),p=h*i+f*s+(l-h*o-f*l);return c.contains(d,p)}function Ibe(e,t){const n=ZN(Nm,e,2);return t0(t,n[0],n[1],n[2],n[3])||t0(t,n[0],n[1],n[4],n[5])||t0(t,n[4],n[5],n[6],n[7])||t0(t,n[2],n[3],n[6],n[7])}var $be={type:"text",tag:"text",nested:!1,attr:Nbe,bound:ZN,draw:Dbe,pick:fw(Rbe),isect:Ibe},Mbe=jN("trail",I2e,X2e),Is={arc:j2e,area:Y2e,group:lbe,image:hbe,line:dbe,path:mbe,rect:ybe,rule:Sbe,shape:Tbe,symbol:Abe,text:$be,trail:Mbe};function rF(e,t,n){var r=Is[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new jn),e,n)}var g5={mark:null};function nX(e,t,n){var r=Is[e.marktype],i=r.bound,s=e.items,a=s&&s.length,o,l,c,u;if(r.nested)return a?c=s[0]:(g5.mark=e,c=g5),u=rF(c,i,n),t=t&&t.union(u)||u,t;if(t=t||e.bounds&&e.bounds.clear()||new jn,a)for(o=0,l=s.length;o<l;++o)t.union(rF(s[o],i,n));return e.bounds=t}const Lbe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function rX(e,t){return JSON.stringify(e,Lbe,t)}function iX(e){const t=typeof e=="string"?JSON.parse(e):e;return sX(t)}function sX(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&sX(n[i]);return t&&nX(e),e}class aX{constructor(t){arguments.length?this.root=iX(t):(this.root=m5({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cw(this.root)])}toJSON(t){return rX(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=m5(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function m5(e,t){const n={bounds:new jn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Yc(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function QN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Jn(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Yc(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Qs(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function oX(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function mw(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Pbe(e,t,n,r){var i=e&&e.mark,s,a;if(i&&(s=Is[i.marktype]).tip){for(a=mw(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=s.tip(i.items,a)}return e}let eD=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||WE(),this._tooltip=n||Bbe}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),a=Yc(null,"a");for(const o in i)a.setAttribute(o,i[o]);a.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Pbe(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,a=s.width(),o=s.height();let l=s.x1+i[0]+r.left,c=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,c+=t.y||0;return{x:l,y:c,width:a,height:o,left:l,top:c,right:l+a,bottom:c+o}}};function Bbe(e,t,n,r){e.element().setAttribute("title",r||"")}class $x{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Vq(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(a=>{a&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Ube="keydown",zbe="keypress",Hbe="keyup",lX="dragenter",d_="dragleave",cX="dragover",iF="pointerdown",Vbe="pointerup",Y2="pointermove",p_="pointerout",uX="pointerover",sF="mousedown",Wbe="mouseup",fX="mousemove",K2="mouseout",hX="mouseover",J2="click",jbe="dblclick",Gbe="wheel",dX="mousewheel",Z2="touchstart",Q2="touchmove",eb="touchend",qbe=[Ube,zbe,Hbe,lX,d_,cX,iF,Vbe,Y2,p_,uX,sF,Wbe,fX,K2,hX,J2,jbe,Gbe,dX,Z2,Q2,eb],aF=Y2,Dm=K2,oF=J2;class Mx extends eD{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=qbe,this.pointermove=v5([Y2,fX],[uX,hX],[p_,K2]),this.dragover=v5([cX],[lX],[d_]),this.pointerout=y5([p_,K2]),this.dragleave=y5([d_])}initialize(t,n,r){return this._canvas=t&&QN(t,"canvas"),[J2,sF,iF,Y2,p_,d_].forEach(i=>x5(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(dX,t)}pointerdown(t){this._down=this._active,this.fire(iF,t)}mousedown(t){this._down=this._active,this.fire(sF,t)}click(t){this._down===this._active&&(this.fire(J2,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Z2,t,!0)}touchmove(t){this.fire(Q2,t,!0)}touchend(t){this.fire(eb,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===oF&&i&&i.href?this.handleHref(n,i,i.href):(t===aF||t===Dm)&&this.handleTooltip(n,i,t!==Dm),s)for(let a=0,o=s.length;a<o;++a)s[a].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(x5(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=mw(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const a=this.context();return Is[t.marktype].pick.call(this,a,t,n,r,i,s)}}const Xbe=e=>e===Z2||e===Q2||e===eb?[Z2,Q2,eb]:[e];function x5(e,t){Xbe(t).forEach(n=>Ybe(e,n))}function Ybe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function lm(e,t,n){t.forEach(r=>e.fire(r,n))}function v5(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?lm(this,e,r):((!i||!i.exit)&&lm(this,n,r),this._active=s,lm(this,t,r),lm(this,e,r))}}function y5(e){return function(t){lm(this,e,t),this._active=null}}function Kbe(){return typeof window<"u"&&window.devicePixelRatio||1}function Jbe(e,t,n,r,i,s){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=a?Kbe():i;e.width=t*l,e.height=n*l;for(const c in s)o[c]=s[c];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class tb extends $x{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new jn,this._tempb=new jn}initialize(t,n,r,i,s,a){return this._options=a||{},this._canvas=this._options.externalContext?null:fu(1,1,this._options.type),t&&this._canvas&&(Qs(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Jbe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||fe("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,a=this._height,o=this._dirty,l=Zbe(i,s,a);r.save();const c=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):Qbe(r,l.intersect(o),i);return this.clear(-i[0],-i[1],s,a),this.draw(r,t,c,n),r.restore(),o.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Is[n.marktype];n.clip&&K2e(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,a=this.context();s.type!=="pdf"&&!s.externalContext&&a.clearRect(t,n,r,i),this._bgcolor!=null&&(a.fillStyle=this._bgcolor,a.fillRect(t,n,r,i))}}const Zbe=(e,t,n)=>new jn().set(0,0,t,n).translate(-e[0],-e[1]);function Qbe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class pX extends eD{constructor(t,n){super(t,n);const r=this;r._hrefHandler=WT(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=WT(r,(i,s)=>{r.handleTooltip(i,s,i.type!==Dm)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(oF,this._hrefHandler),i.removeEventListener(aF,this._tooltipHandler),i.removeEventListener(Dm,this._tooltipHandler)),this._svg=i=t&&QN(t,"svg"),i&&(i.addEventListener(oF,this._hrefHandler),i.addEventListener(aF,this._tooltipHandler),i.addEventListener(Dm,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const a={type:t,handler:n,listener:WT(this,n)};(i[r]||(i[r]=[])).push(a),this._svg&&this._svg.addEventListener(r,a.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const WT=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},gX="aria-hidden",tD="aria-label",nD="role",rD="aria-roledescription",mX="graphics-object",iD="graphics-symbol",xX=(e,t,n)=>({[nD]:e,[rD]:t,[tD]:n||void 0}),eEe=Ya(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),_5={axis:{desc:"axis",caption:rEe},legend:{desc:"legend",caption:iEe},"title-text":{desc:"title",caption:e=>`Title text '${E5(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${E5(e)}'`}},b5={ariaRole:nD,ariaRoleDescription:rD,description:tD};function vX(e,t){const n=t.aria===!1;if(e(gX,n||void 0),n||t.description==null)for(const r in b5)e(b5[r],void 0);else{const r=t.mark.marktype;e(tD,t.description),e(nD,t.ariaRole||(r==="group"?mX:iD)),e(rD,t.ariaRoleDescription||`${r} mark`)}}function yX(e){return e.aria===!1?{[gX]:!0}:eEe[e.role]?null:_5[e.role]?nEe(e,_5[e.role]):tEe(e)}function tEe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return xX(n?mX:iD,`${t} mark container`,e.description)}function nEe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return xX(t.role||iD,t.desc,n.description||r(n))}catch{return null}}function E5(e){return Be(e.text).join(" ")}function rEe(e){const t=e.datum,n=e.orient,r=t.title?_X(e):null,i=e.context,s=i.scales[t.scale].value,a=i.dataflow.locale(),o=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Z0(o)?"discrete":o} scale with ${Rq(a,s,e)}`}function iEe(e){const t=e.datum,n=t.title?_X(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),a=e.context,o=a.scales[i[s[0]]].value,l=a.dataflow.locale();return aEe(r)+(n?` titled '${n}'`:"")+` for ${sEe(s)} with ${Rq(l,o,e)}`}function _X(e){try{return Be(Nt(e.items).items[0].text).join(" ")}catch{return null}}function sEe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Nt(e)}function aEe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const bX=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),oEe=e=>bX(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function sD(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},a=(l,c)=>(c!=null&&(t+=` ${l}="${oEe(c)}"`),o),o={open(l){s(l),t="<"+l;for(var c=arguments.length,u=new Array(c>1?c-1:0),f=1;f<c;f++)u[f-1]=arguments[f];for(const h of u)for(const d in h)a(d,h[d]);return o},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),o},attr:a,text:l=>(n+=bX(l),o),toString:()=>e};return o}const EX=e=>wX(sD(),e)+"";function wX(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):wX(e,r)}return e.close()}const nb={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},rb={blend:"mix-blend-mode"},SX={fill:"none","stroke-miterlimit":10},kg=0,w5="http://www.w3.org/2000/xmlns/",Yn=D1.xmlns;class aD extends $x{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Jn(t,0,"svg",Yn),this._svg.setAttributeNS(w5,"xmlns",Yn),this._svg.setAttributeNS(w5,"xmlns:xlink",D1["xmlns:xlink"]),this._svg.setAttribute("version",D1.version),this._svg.setAttribute("class","marks"),Qs(t,1),this._root=Jn(this._svg,kg,"g",Yn),Kc(this._root,SX),Qs(this._svg,kg+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Kc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Jn(t,kg,"rect",Yn),Kc(r,{width:this._width,height:this._height,fill:n}));const i=EX(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Qs(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,a,o,l,c;for(o=0,l=t.length;o<l;++o)if(r=t[o],i=r.mark,i.marktype!==s&&(s=i.marktype,a=Is[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,S5(r,n),i.items.forEach(u=>{u.dirty=n})),!i.zdirty){if(r.exit){a.nested&&i.items.length?(c=i.items[0],c._svg&&this._update(a,c._svg,c)):r._svg&&(c=r._svg.parentNode,c&&c.removeChild(r._svg)),r._svg=null;continue}r=a.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,S5(r,n)):this._update(a,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,a=n.marktype,o=Is[a],l=n.interactive===!1?"none":null,c=o.tag==="g",u=T5(n,t,r,"g",s);if(a!=="group"&&i!=null&&!i.includes(a))return Qs(u,0),n._svg;u.setAttribute("class",oX(n));const f=yX(n);for(const g in f)xi(u,g,f[g]);c||xi(u,"pointer-events",l),xi(u,"clip-path",n.clip?LN(this,n,n.group):null);let h=null,d=0;const p=g=>{const m=this.isDirty(g),x=T5(g,u,h,o.tag,s);m&&(this._update(o,x,g),c&&uEe(this,x,g,i)),h=x,++d};return o.nested?n.items.length&&p(n.items[0]):Ja(n,p),Qs(u,d),u}_update(t,n,r){Ml=n,jr=n.__values__,vX(Rm,r),t.attr(Rm,r,this);const i=hEe[t.type];i&&i.call(this,t,n,r),Ml&&this.style(Ml,r)}style(t,n){if(n!=null){for(const r in nb){let i=r==="font"?Ix(n):n[r];if(i===jr[r])continue;const s=nb[r];i==null?t.removeAttribute(s):(IN(i)&&(i=$q(i,this._defs.gradient,TX())),t.setAttribute(s,i+"")),jr[r]=i}for(const r in rb)g_(t,rb[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Jn(t,kg+1,"defs",Yn)),i=lEe(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Jn(t,kg+1,"defs",Yn)),i=cEe(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Qs(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function S5(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function lEe(e,t,n){let r,i,s;if(t.gradient==="radial"){let a=Jn(e,n++,"pattern",Yn);Kc(a,{id:j2+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Jn(a,0,"rect",Yn),Kc(a,{width:1,height:1,fill:`url(${TX()}#${t.id})`}),e=Jn(e,n++,"radialGradient",Yn),Kc(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Jn(e,n++,"linearGradient",Yn),Kc(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Jn(e,r,"stop",Yn),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Qs(e,r),n}function cEe(e,t,n){let r;return e=Jn(e,n,"clipPath",Yn),e.setAttribute("id",t.id),t.path?(r=Jn(e,0,"path",Yn),r.setAttribute("d",t.path)):(r=Jn(e,0,"rect",Yn),Kc(r,{x:0,y:0,width:t.width,height:t.height})),Qs(e,1),n+1}function uEe(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Ja(n,a=>{i=e.mark(t,a,i,r),++s}),Qs(t,1+s)}function T5(e,t,n,r,i){let s=e._svg,a;if(!s&&(a=t.ownerDocument,s=Yc(a,r,Yn),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const o=Yc(a,"path",Yn);s.appendChild(o),o.__data__=e;const l=Yc(a,"g",Yn);s.appendChild(l),l.__data__=e;const c=Yc(a,"path",Yn);s.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(s.ownerSVGElement!==i||fEe(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function fEe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Ml=null,jr=null;const hEe={group(e,t,n){const r=Ml=t.childNodes[2];jr=r.__values__,e.foreground(Rm,n,this),jr=t.__values__,Ml=t.childNodes[1],e.content(Rm,n,this);const i=Ml=t.childNodes[0];e.background(Rm,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==jr.events&&(xi(r,"pointer-events",s),xi(i,"pointer-events",s),jr.events=s),n.strokeForeground&&n.stroke){const a=n.fill;xi(r,"display",null),this.style(i,n),xi(i,"stroke",null),a&&(n.fill=null),jr=r.__values__,this.style(r,n),a&&(n.fill=a),Ml=null}else xi(r,"display","none")},image(e,t,n){n.smooth===!1?(g_(t,"image-rendering","optimizeSpeed"),g_(t,"image-rendering","pixelated")):g_(t,"image-rendering",null)},text(e,t,n){const r=Rx(n);let i,s,a,o;pe(r)?(s=r.map(l=>Tu(n,l)),i=s.join(`
`),i!==jr.text&&(Qs(t,0),a=t.ownerDocument,o=Su(n),s.forEach((l,c)=>{const u=Yc(a,"tspan",Yn);u.__data__=n,u.textContent=l,c&&(u.setAttribute("x",0),u.setAttribute("dy",o)),t.appendChild(u)}),jr.text=i)):(s=Tu(n,r),s!==jr.text&&(t.textContent=s,jr.text=s)),xi(t,"font-family",Ix(n)),xi(t,"font-size",il(n)+"px"),xi(t,"font-style",n.fontStyle),xi(t,"font-variant",n.fontVariant),xi(t,"font-weight",n.fontWeight)}};function Rm(e,t,n){t!==jr[e]&&(n?dEe(Ml,e,t,n):xi(Ml,e,t),jr[e]=t)}function g_(e,t,n){n!==jr[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),jr[t]=n)}function Kc(e,t){for(const n in t)xi(e,n,t[n])}function xi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function dEe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function TX(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class AX extends $x{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=sD();n.open("svg",ht({},D1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",SX,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Is[n.marktype],i=r.tag,s=[vX,r.attr];t.open("g",{class:oX(n),"clip-path":n.clip?LN(this,n,n.group):null},yX(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const a=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(i,this.attr(n,o,s,i!=="g"?i:null)),i==="text"){const c=Rx(o);if(pe(c)){const u={x:0,dy:Su(o)};for(let f=0;f<c.length;++f)t.open("tspan",f?u:null).text(Tu(o,c[f])).close()}else t.text(Tu(o,c))}else if(i==="g"){const c=o.strokeForeground,u=o.fill,f=o.stroke;c&&f&&(o.stroke=null),t.open("path",this.attr(n,o,r.background,"bgrect")).close(),t.open("g",this.attr(n,o,r.content)),Ja(o,h=>this.mark(t,h)),t.close(),c&&f?(u&&(o.fill=null),o.stroke=f,t.open("path",this.attr(n,o,r.foreground,"bgrect")).close(),u&&(o.fill=u)):t.open("path",this.attr(n,o,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&a(n.items[0]):Ja(n,a),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},a=(o,l,c,u)=>{s[u||o]=l};return Array.isArray(r)?r.forEach(o=>o(a,n,this)):r(a,n,this),i&&pEe(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const a=n[s],o=a.stops;a.gradient==="radial"?(t.open("pattern",{id:j2+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):t.open("linearGradient",{id:s,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const s in r){const a=r[s];t.open("clipPath",{id:s}),a.path?t.open("path",{d:a.path}).close():t.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),t.close()}t.close()}}}function pEe(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Ix(t),e["font-size"]=il(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in nb){let o=t[a];const l=nb[a];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(IN(o)&&(o=$q(o,i.gradient,"")),e[l]=o)}for(const a in rb){const o=t[a];o!=null&&(s=s||[],s.push(`${rb[a]}: ${o};`))}return s&&(e.style=s.join(" ")),e}const Ra={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function gEe(e){Ra.svgMarkTypes=e.svgMarkTypes??["text"],Ra.svgOnTop=e.svgOnTop??!0,Ra.debug=e.debug??!1}class lF extends $x{constructor(t){super(t),this._svgRenderer=new aD(t),this._canvasRenderer=new tb(t)}initialize(t,n,r,i,s){this._root_el=Jn(t,0,"div");const a=Jn(this._root_el,0,"div"),o=Jn(this._root_el,1,"div");return this._root_el.style.position="relative",Ra.debug||(a.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Ra.svgOnTop?o:a,this._canvasEl=Ra.svgOnTop?a:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Ra.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Ra.svgMarkTypes.includes(s));this._svgRenderer.render(t,Ra.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Ra.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class kX extends Mx{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Jn(Jn(t,0,"div"),Ra.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const CX="canvas",FX="hybrid",OX="png",NX="svg",DX="none",Jc={Canvas:CX,PNG:OX,SVG:NX,Hybrid:FX,None:DX},Th={};Th[CX]=Th[OX]={renderer:tb,headless:tb,handler:Mx};Th[NX]={renderer:aD,headless:AX,handler:pX};Th[FX]={renderer:lF,headless:lF,handler:kX};Th[DX]={};function xw(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Th[e]=t,this):Th[e]}function RX(e,t,n){const r=[],i=new jn().union(t),s=e.marktype;return s?IX(e,i,n,r):s==="group"?$X(e,i,n,r):fe("Intersect scene must be mark node or group item.")}function IX(e,t,n,r){if(mEe(e,t,n)){const i=e.items,s=e.marktype,a=i.length;let o=0;if(s==="group")for(;o<a;++o)$X(i[o],t,n,r);else for(const l=Is[s].isect;o<a;++o){const c=i[o];MX(c,t,l)&&r.push(c)}}return r}function mEe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function $X(e,t,n,r){n&&n(e.mark)&&MX(e,t,Is.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const a=e.x||0,o=e.y||0;t.translate(-a,-o);for(let l=0;l<s;++l)IX(i[l],t,n,r);t.translate(a,o)}return r}function MX(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const jT=new jn;function LX(e){const t=e.clip;if(pt(t))t(Nx(jT.clear()));else if(t)jT.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(jT)}const xEe=1e-9;function oD(e,t,n){return e===t?!0:n==="path"?PX(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ut(e)&&Ut(t)?Math.abs(e-t)<=xEe:!e||!t||!Pe(e)&&!Pe(t)?e==t:vEe(e,t)}function PX(e,t){return oD(Q0(e),Q0(t))}function vEe(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!oD(e[i],t[i],i))return!1;return typeof e==typeof t}function yEe(){Hq(),V_e()}const np="top",Pa="left",Ua="right",Au="bottom",_Ee="top-left",bEe="top-right",EEe="bottom-left",wEe="bottom-right",lD="start",cF="middle",_i="end",SEe="x",TEe="y",vw="group",cD="axis",uD="title",AEe="frame",kEe="scope",fD="legend",BX="row-header",UX="row-footer",zX="row-title",HX="column-header",VX="column-footer",WX="column-title",CEe="padding",FEe="symbol",jX="fit",GX="fit-x",qX="fit-y",OEe="pad",hD="none",ry="all",uF="each",dD="flush",Zc="column",Qc="row";function XX(e){oe.call(this,null,e)}Re(XX,oe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Is[i],a=s.bound;let o=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),o=iy(r,a),r.items.forEach(c=>{c.bounds.clear().union(o)});else if(i===vw||e.modified())switch(t.visit(t.MOD,c=>n.dirty(c)),o.clear(),r.items.forEach(c=>o.union(iy(c,a))),r.role){case cD:case fD:case uD:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,c=>{o.union(iy(c,a))}),t.visit(t.MOD,c=>{l=l||o.alignsWith(c.bounds),n.dirty(c),o.union(iy(c,a))}),l&&(o.clear(),r.items.forEach(c=>o.union(c.bounds)));return LX(r),t.modifies("bounds")}});function iy(e,t,n){return t(e.bounds.clear(),e,n)}const A5=":vega_identifier:";function pD(e){oe.call(this,0,e)}pD.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Re(pD,oe,{transform(e,t){const n=NEe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function NEe(e){return e._signals[A5]||(e._signals[A5]=e.add(0))}function YX(e){oe.call(this,null,e)}Re(YX,oe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,DEe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===vw?cw:lw;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function DEe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function KX(e){oe.call(this,null,e)}const k5={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!JX(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},JX=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),C5=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(JX(i,s=e[n].bounds,t))return!0},REe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},IEe=(e,t,n)=>{var r=e.range(),i=new jn;return t===np||t===Au?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},F5=e=>(e.forEach(t=>t.opacity=1),e),O5=(e,t)=>e.reflow(t.modified()).modifies("opacity");Re(KX,oe,{transform(e,t){const n=k5[e.method]||k5.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(F5(i),t=O5(t,e)),t;if(i=i.filter(REe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=F5(i),t=O5(t,e),s.length>=3&&C5(s,r)){do s=n(s,r);while(s.length>=3&&C5(s,r));s.length<3&&!Nt(i).opacity&&(s.length>1&&(Nt(s).opacity=0),Nt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=IEe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{a(l)||(l.opacity=0)}));const o=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function ZX(e){oe.call(this,null,e)}Re(ZX,oe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Vr=new jn;function n0(e,t,n){return e[t]===n?0:(e[t]=n,1)}function $Ee(e){var t=e.items[0].orient;return t===Pa||t===Ua}function MEe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function LEe(e,t,n,r){var i=t.items[0],s=i.datum,a=i.translate!=null?i.translate:.5,o=i.orient,l=MEe(s),c=i.range,u=i.offset,f=i.position,h=i.minExtent,d=i.maxExtent,p=s.title&&i.items[l[2]].items[0],g=i.titlePadding,m=i.bounds,x=p&&KN(p),y=0,v=0,_,b;switch(Vr.clear().union(m),m.clear(),(_=l[0])>-1&&m.union(i.items[_].bounds),(_=l[1])>-1&&m.union(i.items[_].bounds),o){case np:y=f||0,v=-u,b=Math.max(h,Math.min(d,-m.y1)),m.add(0,-b).add(c,0),p&&sy(e,p,b,g,x,0,-1,m);break;case Pa:y=-u,v=f||0,b=Math.max(h,Math.min(d,-m.x1)),m.add(-b,0).add(0,c),p&&sy(e,p,b,g,x,1,-1,m);break;case Ua:y=n+u,v=f||0,b=Math.max(h,Math.min(d,m.x2)),m.add(0,0).add(b,c),p&&sy(e,p,b,g,x,1,1,m);break;case Au:y=f||0,v=r+u,b=Math.max(h,Math.min(d,m.y2)),m.add(0,0).add(c,b),p&&sy(e,p,b,g,0,0,1,m);break;default:y=i.x,v=i.y}return hc(m.translate(y,v),i),n0(i,"x",y+a)|n0(i,"y",v+a)&&(i.bounds=Vr,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function sy(e,t,n,r,i,s,a,o){const l=t.bounds;if(t.auto){const c=a*(n+i+r);let u=0,f=0;e.dirty(t),s?u=(t.x||0)-(t.x=c):f=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(l.translate(-u,-f)),e.dirty(t)}o.union(l)}const N5=(e,t)=>Math.floor(Math.min(e,t)),D5=(e,t)=>Math.ceil(Math.max(e,t));function PEe(e){var t=e.items,n=t.length,r=0,i,s;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===vw)switch(i.role){case cD:case fD:case uD:break;case BX:a.rowheaders.push(...s);break;case UX:a.rowfooters.push(...s);break;case HX:a.colheaders.push(...s);break;case VX:a.colfooters.push(...s);break;case zX:a.rowtitle=s[0];break;case WX:a.coltitle=s[0];break;default:a.marks.push(...s)}return a}function BEe(e){return new jn().set(0,0,e.width||0,e.height||0)}function UEe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function pn(e,t,n){const r=Pe(e)?e[t]:e;return r??(n!==void 0?n:0)}function R5(e){return e<0?Math.ceil(-e):0}function QX(e,t,n){var r=!n.nodirty,i=n.bounds===dD?BEe:UEe,s=Vr.set(0,0,0,0),a=pn(n.align,Zc),o=pn(n.align,Qc),l=pn(n.padding,Zc),c=pn(n.padding,Qc),u=n.columns||t.length,f=u<=0?1:Math.ceil(t.length/u),h=t.length,d=Array(h),p=Array(u),g=0,m=Array(h),x=Array(f),y=0,v=Array(h),_=Array(h),b=Array(h),w,E,T,S,A,C,F,N,M,O,D;for(E=0;E<u;++E)p[E]=0;for(E=0;E<f;++E)x[E]=0;for(E=0;E<h;++E)C=t[E],A=b[E]=i(C),C.x=C.x||0,v[E]=0,C.y=C.y||0,_[E]=0,T=E%u,S=~~(E/u),g=Math.max(g,F=Math.ceil(A.x2)),y=Math.max(y,N=Math.ceil(A.y2)),p[T]=Math.max(p[T],F),x[S]=Math.max(x[S],N),d[E]=l+R5(A.x1),m[E]=c+R5(A.y1),r&&e.dirty(t[E]);for(E=0;E<h;++E)E%u===0&&(d[E]=0),E<u&&(m[E]=0);if(a===uF)for(T=1;T<u;++T){for(D=0,E=T;E<h;E+=u)D<d[E]&&(D=d[E]);for(E=T;E<h;E+=u)d[E]=D+p[T-1]}else if(a===ry){for(D=0,E=0;E<h;++E)E%u&&D<d[E]&&(D=d[E]);for(E=0;E<h;++E)E%u&&(d[E]=D+g)}else for(a=!1,T=1;T<u;++T)for(E=T;E<h;E+=u)d[E]+=p[T-1];if(o===uF)for(S=1;S<f;++S){for(D=0,E=S*u,w=E+u;E<w;++E)D<m[E]&&(D=m[E]);for(E=S*u;E<w;++E)m[E]=D+x[S-1]}else if(o===ry){for(D=0,E=u;E<h;++E)D<m[E]&&(D=m[E]);for(E=u;E<h;++E)m[E]=D+y}else for(o=!1,S=1;S<f;++S)for(E=S*u,w=E+u;E<w;++E)m[E]+=x[S-1];for(M=0,E=0;E<h;++E)M=d[E]+(E%u?M:0),v[E]+=M-t[E].x;for(T=0;T<u;++T)for(O=0,E=T;E<h;E+=u)O+=m[E],_[E]+=O-t[E].y;if(a&&pn(n.center,Zc)&&f>1)for(E=0;E<h;++E)A=a===ry?g:p[E%u],M=A-b[E].x2-t[E].x-v[E],M>0&&(v[E]+=M/2);if(o&&pn(n.center,Qc)&&u!==1)for(E=0;E<h;++E)A=o===ry?y:x[~~(E/u)],O=A-b[E].y2-t[E].y-_[E],O>0&&(_[E]+=O/2);for(E=0;E<h;++E)s.union(b[E].translate(v[E],_[E]));switch(M=pn(n.anchor,SEe),O=pn(n.anchor,TEe),pn(n.anchor,Zc)){case _i:M-=s.width();break;case cF:M-=s.width()/2}switch(pn(n.anchor,Qc)){case _i:O-=s.height();break;case cF:O-=s.height()/2}for(M=Math.round(M),O=Math.round(O),s.clear(),E=0;E<h;++E)t[E].mark.bounds.clear();for(E=0;E<h;++E)C=t[E],C.x+=v[E]+=M,C.y+=_[E]+=O,s.union(C.mark.bounds.union(C.bounds.translate(v[E],_[E]))),r&&e.dirty(C);return s}function zEe(e,t,n){var r=PEe(t),i=r.marks,s=n.bounds===dD?HEe:VEe,a=n.offset,o=n.columns||i.length,l=o<=0?1:Math.ceil(i.length/o),c=l*o,u,f,h,d,p,g,m;const x=QX(e,i,n);x.empty()&&x.set(0,0,0,0),r.rowheaders&&(g=pn(n.headerBand,Qc,null),u=ay(e,r.rowheaders,i,o,l,-pn(a,"rowHeader"),N5,0,s,"x1",0,o,1,g)),r.colheaders&&(g=pn(n.headerBand,Zc,null),f=ay(e,r.colheaders,i,o,o,-pn(a,"columnHeader"),N5,1,s,"y1",0,1,o,g)),r.rowfooters&&(g=pn(n.footerBand,Qc,null),h=ay(e,r.rowfooters,i,o,l,pn(a,"rowFooter"),D5,0,s,"x2",o-1,o,1,g)),r.colfooters&&(g=pn(n.footerBand,Zc,null),d=ay(e,r.colfooters,i,o,o,pn(a,"columnFooter"),D5,1,s,"y2",c-o,1,o,g)),r.rowtitle&&(p=pn(n.titleAnchor,Qc),m=pn(a,"rowTitle"),m=p===_i?h+m:u-m,g=pn(n.titleBand,Qc,.5),I5(e,r.rowtitle,m,0,x,g)),r.coltitle&&(p=pn(n.titleAnchor,Zc),m=pn(a,"columnTitle"),m=p===_i?d+m:f-m,g=pn(n.titleBand,Zc,.5),I5(e,r.coltitle,m,1,x,g))}function HEe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function VEe(e,t){return e.bounds[t]}function ay(e,t,n,r,i,s,a,o,l,c,u,f,h,d){var p=n.length,g=0,m=0,x,y,v,_,b,w,E,T,S;if(!p)return g;for(x=u;x<p;x+=f)n[x]&&(g=a(g,l(n[x],c)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=s,y=0,_=t.length;y<_;++y)e.dirty(t[y]),t[y].mark.bounds.clear();for(x=u,y=0,_=t.length;y<_;++y,x+=f){for(w=t[y],b=w.mark.bounds,v=x;v>=0&&(E=n[v])==null;v-=h);o?(T=d==null?E.x:Math.round(E.bounds.x1+d*E.bounds.width()),S=g):(T=g,S=d==null?E.y:Math.round(E.bounds.y1+d*E.bounds.height())),b.union(w.bounds.translate(T-(w.x||0),S-(w.y||0))),w.x=T,w.y=S,e.dirty(w),m=a(m,b[c])}return m}function I5(e,t,n,r,i,s){if(t){e.dirty(t);var a=n,o=n;r?a=Math.round(i.x1+s*i.width()):o=Math.round(i.y1+s*i.height()),t.bounds.translate(a-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=o,e.dirty(t)}}function WEe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function jEe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function GEe(e,t,n,r,i,s,a){const o=WEe(n,t),l=jEe(e,o("offset",0)),c=o("anchor",lD),u=c===_i?1:c===cF?.5:0,f={align:uF,bounds:o("bounds",dD),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Pa:f.anchor={x:Math.floor(r.x1)-l,column:_i,y:u*(a||r.height()+2*r.y1),row:c};break;case Ua:f.anchor={x:Math.ceil(r.x2)+l,y:u*(a||r.height()+2*r.y1),row:c};break;case np:f.anchor={y:Math.floor(i.y1)-l,row:_i,x:u*(s||i.width()+2*i.x1),column:c};break;case Au:f.anchor={y:Math.ceil(i.y2)+l,x:u*(s||i.width()+2*i.x1),column:c};break;case _Ee:f.anchor={x:l,y:l};break;case bEe:f.anchor={x:s-l,y:l,column:_i};break;case EEe:f.anchor={x:l,y:a-l,row:_i};break;case wEe:f.anchor={x:s-l,y:a-l,column:_i,row:_i};break}return f}function qEe(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,a=n.x,o=n.y,l,c;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),YEe(e,n,n.items[0].items[0]),s=XEe(n,s),l=2*n.padding,c=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),c=Math.ceil(s.height()+c)),r.type===FEe&&KEe(n.items[0].items[0].items[0].items),i!==hD&&(n.x=a=0,n.y=o=0),n.width=l,n.height=c,hc(s.set(a,o,a+l,o+c),n),n.mark.bounds.clear().union(s),n}function XEe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function YEe(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&Cg(e,n,i,s);else{var a=t.items[1].items[0],o=a.anchor,l=t.titlePadding||0,c=r-a.x,u=r-a.y;switch(a.orient){case Pa:i+=Math.ceil(a.bounds.width())+l;break;case Ua:case Au:break;default:s+=a.bounds.height()+l}switch((i||s)&&Cg(e,n,i,s),a.orient){case Pa:u+=Nd(t,n,a,o,1,1);break;case Ua:c+=Nd(t,n,a,_i,0,0)+l,u+=Nd(t,n,a,o,1,1);break;case Au:c+=Nd(t,n,a,o,0,0),u+=Nd(t,n,a,_i,-1,0,1)+l;break;default:c+=Nd(t,n,a,o,0,0)}(c||u)&&Cg(e,a,c,u),(c=Math.round(a.bounds.x1-r))<0&&(Cg(e,n,-c,0),Cg(e,a,-c,0))}}function Nd(e,t,n,r,i,s,a){const o=e.datum.type!=="symbol",l=n.datum.vgrad,c=o&&(s||!l)&&!a?t.items[0]:t,u=c.bounds[i?"y2":"x2"]-e.padding,f=l&&s?u:0,h=l&&s?0:u,d=i<=0?0:KN(n);return Math.round(r===lD?f:r===_i?h-d:.5*(u-d))}function Cg(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function KEe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function JEe(e,t,n,r,i){var s=t.items[0],a=s.frame,o=s.orient,l=s.anchor,c=s.offset,u=s.padding,f=s.items[0].items[0],h=s.items[1]&&s.items[1].items[0],d=o===Pa||o===Ua?r:n,p=0,g=0,m=0,x=0,y=0,v;if(a!==vw?o===Pa?(p=i.y2,d=i.y1):o===Ua?(p=i.y1,d=i.y2):(p=i.x1,d=i.x2):o===Pa&&(p=r,d=0),v=l===lD?p:l===_i?d:(p+d)/2,h&&h.text){switch(o){case np:case Au:y=f.bounds.height()+u;break;case Pa:x=f.bounds.width()+u;break;case Ua:x=-f.bounds.width()-u;break}Vr.clear().union(h.bounds),Vr.translate(x-(h.x||0),y-(h.y||0)),n0(h,"x",x)|n0(h,"y",y)&&(e.dirty(h),h.bounds.clear().union(Vr),h.mark.bounds.clear().union(Vr),e.dirty(h)),Vr.clear().union(h.bounds)}else Vr.clear();switch(Vr.union(f.bounds),o){case np:g=v,m=i.y1-Vr.height()-c;break;case Pa:g=i.x1-Vr.width()-c,m=v;break;case Ua:g=i.x2+Vr.width()+c,m=v;break;case Au:g=v,m=i.y2+c;break;default:g=s.x,m=s.y}return n0(s,"x",g)|n0(s,"y",m)&&(Vr.translate(g,m),e.dirty(s),s.bounds.clear().union(Vr),t.bounds.clear().union(Vr),e.dirty(s)),s.bounds}function eY(e){oe.call(this,null,e)}Re(eY,oe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&zEe(n,r,e.layout),QEe(n,r,e)}),ZEe(e.mark.group)?t.reflow():t}});function ZEe(e){return e&&e.mark.role!=="legend-entry"}function QEe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),a=new jn().set(0,0,i,s),o=a.clone(),l=a.clone(),c=[],u,f,h,d,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case cD:d=$Ee(f)?o:l,d.union(LEe(e,f,i,s));break;case uD:u=f;break;case fD:c.push(qEe(e,f));break;case AEe:case kEe:case BX:case UX:case zX:case HX:case VX:case WX:o.union(f.bounds),l.union(f.bounds);break;default:a.union(f.bounds)}if(c.length){const m={};c.forEach(x=>{h=x.orient||Ua,h!==hD&&(m[h]||(m[h]=[])).push(x)});for(const x in m){const y=m[x];QX(e,y,GEe(y,x,n.legends,o,l,i,s))}c.forEach(x=>{const y=x.bounds;if(y.equals(x._bounds)||(x.bounds=x._bounds,e.dirty(x),x.bounds=y,e.dirty(x)),n.autosize&&(n.autosize.type===jX||n.autosize.type===GX||n.autosize.type===qX))switch(x.orient){case Pa:case Ua:a.add(y.x1,0).add(y.x2,0);break;case np:case Au:a.add(0,y.y1).add(0,y.y2)}else a.union(y)})}a.union(o).union(l),u&&a.union(JEe(e,u,i,s,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),ewe(e,t,a,n)}function ewe(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let a=e._width,o=e._height,l=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),u=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const h=Math.max(0,Math.ceil(n.x2-l)),d=Math.max(0,Math.ceil(n.y2-u));if(i.contains===CEe){const p=e.padding();a-=p.left+p.right,o-=p.top+p.bottom}s===hD?(c=0,f=0,l=a,u=o):s===jX?(l=Math.max(0,a-c-h),u=Math.max(0,o-f-d)):s===GX?(l=Math.max(0,a-c-h),o=u+f+d):s===qX?(a=l+c+h,u=Math.max(0,o-f-d)):s===OEe&&(a=l+c+h,o=u+f+d),e._resizeView(a,o,l,u,[c,f],i.resize)}const twe=Object.freeze(Object.defineProperty({__proto__:null,bound:XX,identifier:pD,mark:YX,overlap:KX,render:ZX,viewlayout:eY},Symbol.toStringTag,{value:"Module"}));function tY(e){oe.call(this,null,e)}Re(tY,oe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,o=DN(s,a,e.minstep),l=e.format||Cq(n,s,o,e.formatSpecifier,e.formatType,!!e.values),c=e.values?kq(s,e.values,o):RN(s,o);return i&&(r.rem=i),i=c.map((u,f)=>Wt({index:f/(c.length-1||1),value:u,label:l(u)})),e.extra&&i.length&&i.push(Wt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function nY(e){oe.call(this,null,e)}function nwe(){return Wt({})}function rwe(e){const t=Pp().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Re(nY,oe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||nwe,s=e.key||Je,a=this.value;return pe(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(s))&&fe("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=rwe(s)),t.visit(t.ADD,o=>{const l=s(o);let c=a.get(l);c?c.exit?(a.empty--,r.add.push(c)):r.mod.push(c):(c=i(o),a.set(l,c),r.add.push(c)),c.datum=o,c.exit=!1}),t.visit(t.MOD,o=>{const l=s(o),c=a.get(l);c&&(c.datum=o,r.mod.push(c))}),t.visit(t.REM,o=>{const l=s(o),c=a.get(l);o===c.datum&&!c.exit&&(r.rem.push(c),c.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function rY(e){oe.call(this,null,e)}Re(rY,oe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(pe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var a=s==="enter",o=i.update||Nc,l=i.enter||Nc,c=i.exit||Nc,u=(s&&!a?i[s]:o)||Nc;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),o(f,e)}),n.modifies(l.output),n.modifies(o.output),u!==Nc&&u!==o&&(t.visit(t.ADD,f=>{u(f,e)}),n.modifies(u.output))),t.changed(t.REM)&&c!==Nc&&(t.visit(t.REM,f=>{c(f,e)}),n.modifies(c.output)),a||u!==Nc){const f=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(f,h=>{const d=l(h,e)||r;(u(h,e)||d)&&n.mod.push(h)}),n.mod.length&&n.modifies(l.output)):t.visit(f,h=>{(u(h,e)||r)&&n.mod.push(h)}),n.mod.length&&n.modifies(u.output)}return n.changed()?n:t.StopPropagation}});function iY(e){oe.call(this,[],e)}Re(iY,oe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||o_,a=e.scale,o=+e.limit,l=DN(a,e.count==null?5:e.count,e.minstep),c=!!e.values||s===o_,u=e.format||Dq(n,a,l,s,e.formatSpecifier,e.formatType,c),f=e.values||Nq(a,l),h,d,p,g,m;return i&&(r.rem=i),s===o_?(o&&f.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,o-1),m=!0):i=f,pt(p=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),g=i.reduce((x,y)=>Math.max(x,p(y,e)),0)):p=fi(g=p||8),i=i.map((x,y)=>Wt({index:y,label:u(x,y,i),value:x,offset:g,size:p(x,e)})),m&&(m=f[i.length],i.push(Wt({index:i.length,label:`…${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):s===O_e?(h=a.domain(),d=Sq(a,h[0],Nt(h)),f.length<3&&!e.values&&h[0]!==Nt(h)&&(f=[h[0],Nt(h)]),i=f.map((x,y)=>Wt({index:y,label:u(x,y,f),value:x,perc:d(x)}))):(p=f.length-1,d=z_e(a),i=f.map((x,y)=>Wt({index:y,label:u(x,y,f),value:x,perc:y?d(x):0,perc2:y===p?1:d(f[y+1])}))),r.source=i,r.add=i,this.value=i,r}});const iwe=e=>e.source.x,swe=e=>e.source.y,awe=e=>e.target.x,owe=e=>e.target.y;function gD(e){oe.call(this,{},e)}gD.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Re(gD,oe,{transform(e,t){var n=e.sourceX||iwe,r=e.sourceY||swe,i=e.targetX||awe,s=e.targetY||owe,a=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",c=$5.get(l+"-"+o)||$5.get(l);return c||fe("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,u=>{u[a]=c(n(u),r(u),i(u),s(u))}),t.reflow(e.modified()).modifies(a)}});const sY=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,lwe=(e,t,n,r)=>sY(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),aY=(e,t,n,r)=>{var i=n-e,s=r-t,a=Math.hypot(i,s)/2,o=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+o+" 0 1 "+n+","+r},cwe=(e,t,n,r)=>aY(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oY=(e,t,n,r)=>{const i=n-e,s=r-t,a=.2*(i+s),o=.2*(s-i);return"M"+e+","+t+"C"+(e+a)+","+(t+o)+" "+(n+o)+","+(r-a)+" "+n+","+r},uwe=(e,t,n,r)=>oY(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fwe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,hwe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,dwe=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*o+"L"+r*a+","+r*o},pwe=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},gwe=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},mwe=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),a=Math.cos(n),o=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*a+","+l*o+" "+r*a+","+r*o},$5=Pp({line:sY,"line-radial":lwe,arc:aY,"arc-radial":cwe,curve:oY,"curve-radial":uwe,"orthogonal-horizontal":fwe,"orthogonal-vertical":hwe,"orthogonal-radial":dwe,"diagonal-horizontal":pwe,"diagonal-vertical":gwe,"diagonal-radial":mwe});function mD(e){oe.call(this,null,e)}mD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Re(mD,oe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||Ip,a=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,c=l.map(s),u=c.length,f=a,h=(o-a)/CH(c),d=Ss(u),p,g,m;for(e.sort&&d.sort((x,y)=>c[x]-c[y]),p=0;p<u;++p)m=c[d[p]],g=l[d[p]],g[r]=f,g[i]=f+=m*h;return this.value=c,t.reflow(e.modified()).modifies(n)}});const xwe=5;function vwe(e){const t=e.type;return!e.bins&&(t===K0||t===Sx||t===Tx)}function lY(e){return ON(e)&&e!==Mo}const ywe=Ya(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function cY(e){oe.call(this,null,e),this.modified(!0)}Re(cY,oe,{transform(e,t){var n=t.dataflow,r=this.value,i=_we(e);(!r||i!==r.type)&&(this.value=r=zt(i)());for(i in e)if(!ywe[i]){if(i==="padding"&&lY(r.type))continue;pt(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Awe(r,e,Twe(r,e,Ewe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _we(e){var t=e.type,n="",r;return t===Mo?Mo+"-"+K0:(bwe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Mo+"-":r===3?Hp+"-":""),(n+t||K0).toLowerCase())}function bwe(e){const t=e.type;return ON(t)&&t!==wh&&t!==Sh&&(e.scheme||e.range&&e.range.length&&e.range.every(Ue))}function Ewe(e,t,n){const r=wwe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,a=t.zero||t.zero===void 0&&vwe(e),o,l;if(!i)return 0;if((a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[o]<0&&(i[o]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const c=l>i[o]?o+1:l<i[0]?0:o;c!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(c,0,l)}return lY(s)&&t.padding&&i[0]!==Nt(i)&&(i=Swe(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(uY(s,i,n)),s===AN&&e.unknown(t.domainImplicit?MC:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&DN(e,t.nice)||null),i.length}function wwe(e,t,n){return t?(e.domain(uY(e.type,t,n)),t.length):-1}function Swe(e,t,n,r,i,s){var a=Math.abs(Nt(n)-n[0]),o=a/(a-2*r),l=e===ic?yO(t,null,o):e===Tx?z2(t,null,o,.5):e===Sx?z2(t,null,o,i||1):e===nw?_O(t,null,o,s||1):vO(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function uY(e,t,n){if(yq(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Oe(t))}return t}function Twe(e,t,n){let r=t.bins;if(r&&!pe(r)){const i=e.domain(),s=i[0],a=Nt(i),o=r.step;let l=r.start==null?s:r.start,c=r.stop==null?a:r.stop;o||fe("Scale bins parameter missing step property."),l<s&&(l=o*Math.ceil(s/o)),c>a&&(c=o*Math.floor(a/o)),r=Ss(l,c+o/2,o)}return r?e.bins=r:e.bins&&delete e.bins,e.type===kN&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Awe(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=kwe(r,t,n);else if(t.scheme&&(s=Cwe(r,t,n),pt(s))){if(e.interpolator)return e.interpolator(s);fe(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&_q(r))return e.interpolator(sw(fF(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(NN(t.interpolate,t.interpolateGamma)):pt(e.round)?e.round(i):pt(e.rangeRound)&&e.interpolate(i?hx:Vu),s&&e.range(fF(s,t.reverse))}function kwe(e,t,n){e!==dq&&e!==KC&&fe("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===KC?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*TN(n,i,r)]}function Cwe(e,t,n){var r=t.schemeExtent,i,s;return pe(t.scheme)?s=sw(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=aw(i),s||fe(`Unrecognized scheme name: ${t.scheme}`)),n=e===iw?n+1:e===kN?n-1:e===J0||e===rw?+t.schemeCount||xwe:n,_q(e)?M5(s,r,t.reverse):pt(s)?wq(M5(s,r),n):e===AN?s:s.slice(0,n)}function M5(e,t,n){return pt(e)&&(t||n)?Eq(e,fF(t||[0,1],n)):e}function fF(e,t){return t?e.slice().reverse():e}function fY(e){oe.call(this,null,e)}Re(fY,oe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(td(e.sort)),this.modified(n),t}});const L5="zero",hY="center",dY="normalize",pY=["y0","y1"];function xD(e){oe.call(this,null,e)}xD.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:L5,values:[L5,hY,dY]},{name:"as",type:"string",array:!0,length:2,default:pY}]};Re(xD,oe,{transform(e,t){var n=e.as||pY,r=n[0],i=n[1],s=td(e.sort),a=e.field||Ip,o=e.offset===hY?Fwe:e.offset===dY?Owe:Nwe,l,c,u,f;for(l=Dwe(t.source,e.groupby,s,a),c=0,u=l.length,f=l.max;c<u;++c)o(l[c],f,a,r,i);return t.reflow(e.modified()).modifies(n)}});function Fwe(e,t,n,r,i){for(var s=(t-e.sum)/2,a=e.length,o=0,l;o<a;++o)l=e[o],l[r]=s,l[i]=s+=Math.abs(n(l))}function Owe(e,t,n,r,i){for(var s=1/e.sum,a=0,o=e.length,l=0,c=0,u;l<o;++l)u=e[l],u[r]=a,u[i]=a=s*(c+=Math.abs(n(u)))}function Nwe(e,t,n,r,i){for(var s=0,a=0,o=e.length,l=0,c,u;l<o;++l)u=e[l],c=+n(u),c<0?(u[r]=a,u[i]=a+=c):(u[r]=s,u[i]=s+=c)}function Dwe(e,t,n,r){var i=[],s=g=>g(u),a,o,l,c,u,f,h,d,p;if(t==null)i.push(e.slice());else for(a={},o=0,l=e.length;o<l;++o)u=e[o],f=t.map(s),h=a[f],h||(a[f]=h=[],i.push(h)),h.push(u);for(f=0,p=0,c=i.length;f<c;++f){for(h=i[f],o=0,d=0,l=h.length;o<l;++o)d+=Math.abs(r(h[o]));h.sum=d,d>p&&(p=d),n&&h.sort(n)}return i.max=p,i}const Rwe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:tY,datajoin:nY,encode:rY,legendentries:iY,linkpath:gD,pie:mD,scale:cY,sortitems:fY,stack:xD},Symbol.toStringTag,{value:"Module"}));var Iwe=Math.abs,hF=Math.cos,ib=Math.sin,$we=1e-6,gY=Math.PI,dF=gY/2,P5=Mwe(2);function B5(e){return e>1?dF:e<-1?-dF:Math.asin(e)}function Mwe(e){return e>0?Math.sqrt(e):0}function Lwe(e,t){var n=e*ib(t),r=30,i;do t-=i=(t+ib(t)-n)/(1+hF(t));while(Iwe(i)>$we&&--r>0);return t/2}function Pwe(e,t,n){function r(i,s){return[e*i*hF(s=Lwe(n,s)),t*ib(s)]}return r.invert=function(i,s){return s=B5(s/t),[i/(e*hF(s)),B5((2*s+ib(2*s))/n)]},r}var Bwe=Pwe(P5/dF,P5,gY);function Uwe(){return el(Bwe).scale(169.529)}const zwe=aW(),pF=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Hwe(e,t){return function n(){const r=t();return r.type=e,r.path=aW().projection(r),r.copy=r.copy||function(){const i=n();return pF.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},xq(r)}}function vD(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(sb[e]=Hwe(e,t),this):sb[e]||null}function mY(e){return e&&e.path||zwe}const sb={albers:lW,albersusa:dpe,azimuthalequalarea:ppe,azimuthalequidistant:gpe,conicconformal:vpe,conicequalarea:N2,conicequidistant:bpe,equalEarth:wpe,equirectangular:ype,gnomonic:Spe,identity:Tpe,mercator:mpe,mollweide:Uwe,naturalEarth1:Ape,orthographic:kpe,stereographic:Cpe,transversemercator:Fpe};for(const e in sb)vD(e,sb[e]);function Vwe(){}const vl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function xY(){var e=1,t=1,n=o;function r(l,c){return c.map(u=>i(l,u))}function i(l,c){var u=[],f=[];return s(l,c,h=>{n(h,l,c),Wwe(h)>0?u.push([h]):f.push(h)}),f.forEach(h=>{for(var d=0,p=u.length,g;d<p;++d)if(jwe((g=u[d])[0],h)!==-1){g.push(h);return}}),{type:"MultiPolygon",value:c,coordinates:u}}function s(l,c,u){var f=[],h=[],d,p,g,m,x,y;for(d=p=-1,m=l[0]>=c,vl[m<<1].forEach(v);++d<e-1;)g=m,m=l[d+1]>=c,vl[g|m<<1].forEach(v);for(vl[m<<0].forEach(v);++p<t-1;){for(d=-1,m=l[p*e+e]>=c,x=l[p*e]>=c,vl[m<<1|x<<2].forEach(v);++d<e-1;)g=m,m=l[p*e+e+d+1]>=c,y=x,x=l[p*e+d+1]>=c,vl[g|m<<1|x<<2|y<<3].forEach(v);vl[m|x<<3].forEach(v)}for(d=-1,x=l[p*e]>=c,vl[x<<2].forEach(v);++d<e-1;)y=x,x=l[p*e+d+1]>=c,vl[x<<2|y<<3].forEach(v);vl[x<<3].forEach(v);function v(_){var b=[_[0][0]+d,_[0][1]+p],w=[_[1][0]+d,_[1][1]+p],E=a(b),T=a(w),S,A;(S=h[E])?(A=f[T])?(delete h[S.end],delete f[A.start],S===A?(S.ring.push(w),u(S.ring)):f[S.start]=h[A.end]={start:S.start,end:A.end,ring:S.ring.concat(A.ring)}):(delete h[S.end],S.ring.push(w),h[S.end=T]=S):(S=f[T])?(A=h[E])?(delete f[S.start],delete h[A.end],S===A?(S.ring.push(w),u(S.ring)):f[A.start]=h[S.end]={start:A.start,end:S.end,ring:A.ring.concat(S.ring)}):(delete f[S.start],S.ring.unshift(b),f[S.start=E]=S):f[E]=h[T]={start:E,end:T,ring:[b,w]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function o(l,c,u){l.forEach(f=>{var h=f[0],d=f[1],p=h|0,g=d|0,m,x=c[g*e+p];h>0&&h<e&&p===h&&(m=c[g*e+p-1],f[0]=h+(u-m)/(x-m)-.5),d>0&&d<t&&g===d&&(m=c[(g-1)*e+p],f[1]=d+(u-m)/(x-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var c=Math.floor(l[0]),u=Math.floor(l[1]);return c>=0&&u>=0||fe("invalid size"),e=c,t=u,r},r.smooth=function(l){return arguments.length?(n=l?o:Vwe,r):n===o},r}function Wwe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function jwe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Gwe(e,t[n]))return i;return 0}function Gwe(e,t){for(var n=t[0],r=t[1],i=-1,s=0,a=e.length,o=a-1;s<a;o=s++){var l=e[s],c=l[0],u=l[1],f=e[o],h=f[0],d=f[1];if(qwe(l,f,t))return 0;u>r!=d>r&&n<(h-c)*(r-u)/(d-u)+c&&(i=-i)}return i}function qwe(e,t,n){var r;return Xwe(e,t,n)&&Ywe(e[r=+(e[0]===t[0])],n[r],t[r])}function Xwe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Ywe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function vY(e,t,n){return function(r){var i=Go(r),s=n?Math.min(i[0],0):i[0],a=i[1],o=a-s,l=t?yu(s,a,e):o/(e+1);return Ss(s+l,a,l)}}function yD(e){oe.call(this,null,e)}yD.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Re(yD,oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ui,s=xY().smooth(e.smooth!==!1),a=e.thresholds||Kwe(r,i,e),o=e.as===null?null:e.as||"contour",l=[];return r.forEach(c=>{const u=i(c),f=s.size([u.width,u.height])(u.values,pe(a)?a:a(u.values));Jwe(f,u,c,e),f.forEach(h=>{l.push(qE(c,Wt(o!=null?{[o]:h}:h)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Kwe(e,t,n){const r=vY(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Kf(t(i).values)))}function Jwe(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(pt(i)&&(i=i(n,r)),pt(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const a=(Ut(i)?i:i[0])||1,o=(Ut(i)?i:i[1])||1,l=s&&s[0]||0,c=s&&s[1]||0;e.forEach(yY(t,a,o,l,c))}function yY(e,t,n,r,i){const s=e.x1||0,a=e.y1||0,o=t*n<0;function l(f){f.forEach(c)}function c(f){o&&f.reverse(),f.forEach(u)}function u(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-a)*n+i}return function(f){return f.coordinates.forEach(l),f}}function U5(e,t,n){const r=e>=0?e:BO(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function GT(e){return pt(e)?e:fi(+e)}function _Y(){var e=l=>l[0],t=l=>l[1],n=Ip,r=[-1,-1],i=960,s=500,a=2;function o(l,c){const u=U5(r[0],l,e)>>a,f=U5(r[1],l,t)>>a,h=u?u+2:0,d=f?f+2:0,p=2*h+(i>>a),g=2*d+(s>>a),m=new Float32Array(p*g),x=new Float32Array(p*g);let y=m;l.forEach(_=>{const b=h+(+e(_)>>a),w=d+(+t(_)>>a);b>=0&&b<p&&w>=0&&w<g&&(m[b+w*p]+=+n(_))}),u>0&&f>0?(Dd(p,g,m,x,u),Rd(p,g,x,m,f),Dd(p,g,m,x,u),Rd(p,g,x,m,f),Dd(p,g,m,x,u),Rd(p,g,x,m,f)):u>0?(Dd(p,g,m,x,u),Dd(p,g,x,m,u),Dd(p,g,m,x,u),y=x):f>0&&(Rd(p,g,m,x,f),Rd(p,g,x,m,f),Rd(p,g,m,x,f),y=x);const v=c?Math.pow(2,-2*a):1/CH(y);for(let _=0,b=p*g;_<b;++_)y[_]*=v;return{values:y,scale:1<<a,width:p,height:g,x1:h,y1:d,x2:h+(i>>a),y2:d+(s>>a)}}return o.x=function(l){return arguments.length?(e=GT(l),o):e},o.y=function(l){return arguments.length?(t=GT(l),o):t},o.weight=function(l){return arguments.length?(n=GT(l),o):n},o.size=function(l){if(!arguments.length)return[i,s];var c=+l[0],u=+l[1];return c>=0&&u>=0||fe("invalid size"),i=c,s=u,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||fe("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),o):1<<a},o.bandwidth=function(l){return arguments.length?(l=Be(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&fe("invalid bandwidth"),r=l,o):r},o}function Dd(e,t,n,r,i){const s=(i<<1)+1;for(let a=0;a<t;++a)for(let o=0,l=0;o<e+i;++o)o<e&&(l+=n[o+a*e]),o>=i&&(o>=s&&(l-=n[o-s+a*e]),r[o-i+a*e]=l/Math.min(o+1,e-1+s-o,s))}function Rd(e,t,n,r,i){const s=(i<<1)+1;for(let a=0;a<e;++a)for(let o=0,l=0;o<t+i;++o)o<t&&(l+=n[a+o*e]),o>=i&&(o>=s&&(l-=n[a+(o-s)*e]),r[a+(o-i)*e]=l/Math.min(o+1,t-1+s-o,s))}function _D(e){oe.call(this,null,e)}_D.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Zwe=["x","y","weight","size","cellSize","bandwidth"];function bY(e,t){return Zwe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Re(_D,oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Qwe(r,e.groupby),s=(e.groupby||[]).map(Fn),a=bY(_Y(),e),o=e.as||"grid",l=[];function c(u,f){for(let h=0;h<s.length;++h)u[s[h]]=f[h];return u}return l=i.map(u=>Wt(c({[o]:a(u,e.counts)},u.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Qwe(e,t){var n=[],r=u=>u(o),i,s,a,o,l,c;if(t==null)n.push(e);else for(i={},s=0,a=e.length;s<a;++s)o=e[s],l=t.map(r),c=i[l],c||(i[l]=c=[],c.dims=l,n.push(c)),c.push(o);return n}function bD(e){oe.call(this,null,e)}bD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Re(bD,oe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=xY().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||vY(e.count||10,e.nice,!!i),a=e.size,o,l;return i||(i=t.materialize(t.SOURCE).source,o=bY(_Y(),e)(i,!0),l=yY(o,o.scale||1,o.scale||1,0,0),a=[o.width,o.height],i=o.values),s=pe(s)?s:s(i),i=r.size(a)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Wt),n}});const gF="Feature",ED="FeatureCollection",eSe="MultiPoint";function wD(e){oe.call(this,null,e)}wD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Re(wD,oe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],a=i&&i[1],o=e.geojson||!i&&ui,l=t.ADD,c;c=e.modified()||t.changed(t.REM)||t.modified(si(o))||s&&t.modified(si(s))||a&&t.modified(si(a)),(!this.value||c)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),o&&t.visit(l,u=>n.push(o(u))),s&&a&&(t.visit(l,u=>{var f=s(u),h=a(u);f!=null&&h!=null&&(f=+f)===f&&(h=+h)===h&&r.push([f,h])}),n=n.concat({type:gF,geometry:{type:eSe,coordinates:r}})),this.value={type:ED,features:n}}});function SD(e){oe.call(this,null,e)}SD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Re(SD,oe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ui,s=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=mY(e.projection),n.materialize().reflow()):a=i===ui||t.modified(i.fields)?n.ADD_MOD:n.ADD;const o=tSe(r,e.pointRadius);return n.visit(a,l=>l[s]=r(i(l))),r.pointRadius(o),n.modifies(s)}});function tSe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function TD(e){oe.call(this,null,e)}TD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Re(TD,oe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],a=s[0],o=s[1],l;function c(u){const f=n([r(u),i(u)]);f?(u[a]=f[0],u[o]=f[1]):(u[a]=void 0,u[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,c)),t.modifies(s)}});function AD(e){oe.call(this,null,e)}AD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Re(AD,oe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=nSe(mY(e.projection),e.field||pa("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,a=>a[i]=r),n.modifies(i)}});function nSe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(s),a};return r.context=i=>(e.context(i),r),r}function kD(e){oe.call(this,[],e),this.generator=G0e()}kD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Re(kD,oe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)pt(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(bG(n[0],i)):t.add.push(Wt(i)),n[0]=i,t}});function CD(e){oe.call(this,null,e)}CD.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Re(CD,oe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ui,s=iSe(e.opacity,e),a=rSe(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Kf(n.map(c=>Kf(i(c).values))):0};return n.forEach(c=>{const u=i(c),f=ht({},c,l);r||(f.$max=Kf(u.values||[])),c[o]=sSe(u,f,a.dep?a:fi(a(f)),s.dep?s:fi(s(f)))}),t.reflow(!0).modifies(o)}});function rSe(e,t){let n;return pt(e)?(n=r=>_u(e(r,t)),n.dep=EY(e)):n=fi(_u(e||"#888")),n}function iSe(e,t){let n;return pt(e)?(n=r=>e(r,t),n.dep=EY(e)):e?n=fi(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function EY(e){if(!pt(e))return!1;const t=Ya(si(e));return t.$x||t.$y||t.$value||t.$max}function sSe(e,t,n,r){const i=e.width,s=e.height,a=e.x1||0,o=e.y1||0,l=e.x2||i,c=e.y2||s,u=e.values,f=u?m=>u[m]:Wc,h=fu(l-a,c-o),d=h.getContext("2d"),p=d.getImageData(0,0,l-a,c-o),g=p.data;for(let m=o,x=0;m<c;++m){t.$y=m-o;for(let y=a,v=m*i;y<l;++y,x+=4){t.$x=y-a,t.$value=f(y+v);const _=n(t);g[x+0]=_.r,g[x+1]=_.g,g[x+2]=_.b,g[x+3]=~~(255*r(t))}}return d.putImageData(p,0,0),h}function wY(e){oe.call(this,null,e),this.modified(!0)}Re(wY,oe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=oSe(e.type),pF.forEach(r=>{e[r]!=null&&z5(n,r,e[r])})):pF.forEach(r=>{e.modified(r)&&z5(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&aSe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function aSe(e,t){const n=lSe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function oSe(e){const t=vD((e||"mercator").toLowerCase());return t||fe("Unrecognized projection type: "+e),t()}function z5(e,t,n){pt(e[t])&&e[t](n)}function lSe(e){return e=Be(e),e.length===1?e[0]:{type:ED,features:e.reduce((t,n)=>t.concat(cSe(n)),[])}}function cSe(e){return e.type===ED?e.features:Be(e).filter(t=>t!=null).map(t=>t.type===gF?t:{type:gF,geometry:t})}const uSe=Object.freeze(Object.defineProperty({__proto__:null,contour:bD,geojson:wD,geopath:SD,geopoint:TD,geoshape:AD,graticule:kD,heatmap:CD,isocontour:yD,kde2d:_D,projection:wY},Symbol.toStringTag,{value:"Module"})),H5={center:Mde,collide:t0e,nbody:h0e,link:r0e,x:d0e,y:p0e},cm="forces",mF=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],fSe=["static","iterations"],SY=["x","y","vx","vy"];function FD(e){oe.call(this,null,e)}FD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:SY}]};Re(FD,oe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(mF),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&TY(n,e,0,t)):(this.value=n=dSe(t.source,e),n.on("tick",hSe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(fSe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,c=o.length,u;l<c;++l)if(u=o[l],!(u.name!==cm||u.op._argval.force!=="link")){for(var r=u.op._argops,i=0,s=r.length,a;i<s;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(SY)}});function hSe(e,t){return()=>e.touch(t).run()}function dSe(e,t){const n=f0e(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),TY(n,t,!0).on("end",()=>s=!0)}function TY(e,t,n,r){var i=Be(t.forces),s,a,o,l;for(s=0,a=mF.length;s<a;++s)o=mF[s],o!==cm&&t.modified(o)&&e[o](t[o]);for(s=0,a=i.length;s<a;++s)l=cm+s,o=n||t.modified(cm,s)?gSe(i[s]):r&&pSe(i[s],r)?e.force(l):null,o&&e.force(l,o);for(a=e.numForces||0;s<a;++s)e.force(cm+s,null);return e.numForces=i.length,e}function pSe(e,t){var n,r;for(n in e)if(pt(r=e[n])&&t.modified(si(r)))return 1;return 0}function gSe(e){var t,n;ze(H5,e.force)||fe("Unrecognized force: "+e.force),t=H5[e.force]();for(n in e)pt(t[n])&&mSe(t[n],e[n],e);return t}function mSe(e,t,n){e(pt(t)?r=>t(r,n):t)}const xSe=Object.freeze(Object.defineProperty({__proto__:null,force:FD},Symbol.toStringTag,{value:"Module"}));function xF(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function OD(e){oe.call(this,null,e)}OD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const vSe=e=>e.values;Re(OD,oe,{transform(e,t){t.source||fe("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(a=>{a.children&&GE(a.data)&&i.rem.push(a.data)}),this.value=s=J4({values:Be(e.keys).reduce((a,o)=>(a.key(o),a),ySe()).entries(i.source)},vSe),n&&s.each(a=>{a.children&&(a=Wt(a.data),i.add.push(a),i.source.push(a))}),xF(s,Je,Je)),i.source.root=s,i}});function ySe(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const a=i.length,o=e[s++],l={},c={};let u=-1,f,h,d;for(;++u<a;)f=o(h=i[u])+"",(d=l[f])?d.push(h):l[f]=[h];for(f in l)c[f]=n(l[f],s);return c}function r(i,s){if(++s>e.length)return i;const a=[];for(const o in i)a.push({key:o,values:r(i[o],s)});return a}return t}function dc(e){oe.call(this,null,e)}const _Se=(e,t)=>e.parent===t.parent?1:2;Re(dc,oe,{transform(e,t){(!t.source||!t.source.root)&&fe(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(td(e.sort,a=>a.data)),bSe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?_Se:Ip);try{this.value=n(i)}catch(a){fe(a)}return i.each(a=>ESe(a,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function bSe(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function ESe(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const vF=["x","y","r","depth","children"];function ND(e){dc.call(this,e)}ND.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:vF.length,default:vF}]};Re(ND,dc,{layout:pge,params:["radius","size","padding"],fields:vF});const yF=["x0","y0","x1","y1","depth","children"];function DD(e){dc.call(this,e)}DD.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yF.length,default:yF}]};Re(DD,dc,{layout:gge,params:["size","round","padding"],fields:yF});function RD(e){oe.call(this,null,e)}RD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Re(RD,oe,{transform(e,t){t.source||fe("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?xF(lL().id(e.key).parentId(e.parentKey)(i.source),e.key,ga):xF(lL()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const V5={tidy:Tge,cluster:Lpe},_F=["x","y","depth","children"];function ID(e){dc.call(this,e)}ID.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:_F.length,default:_F}]};Re(ID,dc,{layout(e){const t=e||"tidy";if(ze(V5,t))return V5[t]();fe("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:_F});function $D(e){oe.call(this,[],e)}$D.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Re($D,oe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||fe("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>s[Je(a)]=1),r.each(a=>{const o=a.data,l=a.parent&&a.parent.data;l&&s[Je(o)]&&s[Je(l)]&&i.add.push(Wt({source:l,target:o}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>s[Je(a)]=1),n.forEach(a=>{(s[Je(a.source)]||s[Je(a.target)])&&i.mod.push(a)})),i}});const W5={binary:kge,dice:mx,slice:OE,slicedice:Cge,squarify:AW,resquarify:Fge},bF=["x0","y0","x1","y1","depth","children"];function MD(e){dc.call(this,e)}MD.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:bF.length,default:bF}]};Re(MD,dc,{layout(){const e=Age();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ze(W5,t)?e.tile(W5[t]):fe("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:bF});const wSe=Object.freeze(Object.defineProperty({__proto__:null,nest:OD,pack:ND,partition:DD,stratify:RD,tree:ID,treelinks:$D,treemap:MD},Symbol.toStringTag,{value:"Module"})),qT=4278190080;function SSe(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function TSe(e,t,n,r,i){const s=e.width,a=e.height,o=r||i,l=fu(s,a).getContext("2d"),c=fu(s,a).getContext("2d"),u=o&&fu(s,a).getContext("2d");n.forEach(T=>m_(l,T,!1)),m_(c,t,!1),o&&m_(u,t,!0);const f=XT(l,s,a),h=XT(c,s,a),d=o&&XT(u,s,a),p=e.bitmap(),g=o&&e.bitmap();let m,x,y,v,_,b,w,E;for(x=0;x<a;++x)for(m=0;m<s;++m)_=x*s+m,b=f[_]&qT,E=h[_]&qT,w=o&&d[_]&qT,(b||w||E)&&(y=e(m),v=e(x),!i&&(b||E)&&p.set(y,v),o&&(b||w)&&g.set(y,v));return[p,g]}function XT(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function m_(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>m_(e,s.items,n))}):Is[r].draw(e,{items:n?t.map(ASe):t})}function ASe(e){const t=qE(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const yl=5,gi=31,R1=32,Hc=new Uint32Array(R1+1),$a=new Uint32Array(R1+1);$a[0]=0;Hc[0]=~$a[0];for(let e=1;e<=R1;++e)$a[e]=$a[e-1]<<1|1,Hc[e]=~$a[e];function kSe(e,t){const n=new Uint32Array(~~((e*t+R1)/R1));function r(s,a){n[s]|=a}function i(s,a){n[s]&=a}return{array:n,get:(s,a)=>{const o=a*e+s;return n[o>>>yl]&1<<(o&gi)},set:(s,a)=>{const o=a*e+s;r(o>>>yl,1<<(o&gi))},clear:(s,a)=>{const o=a*e+s;i(o>>>yl,~(1<<(o&gi)))},getRange:(s,a,o,l)=>{let c=l,u,f,h,d;for(;c>=a;--c)if(u=c*e+s,f=c*e+o,h=u>>>yl,d=f>>>yl,h===d){if(n[h]&Hc[u&gi]&$a[(f&gi)+1])return!0}else{if(n[h]&Hc[u&gi]||n[d]&$a[(f&gi)+1])return!0;for(let p=h+1;p<d;++p)if(n[p])return!0}return!1},setRange:(s,a,o,l)=>{let c,u,f,h,d;for(;a<=l;++a)if(c=a*e+s,u=a*e+o,f=c>>>yl,h=u>>>yl,f===h)r(f,Hc[c&gi]&$a[(u&gi)+1]);else for(r(f,Hc[c&gi]),r(h,$a[(u&gi)+1]),d=f+1;d<h;++d)r(d,4294967295)},clearRange:(s,a,o,l)=>{let c,u,f,h,d;for(;a<=l;++a)if(c=a*e+s,u=a*e+o,f=c>>>yl,h=u>>>yl,f===h)i(f,$a[c&gi]|Hc[(u&gi)+1]);else for(i(f,$a[c&gi]),i(h,Hc[(u&gi)+1]),d=f+1;d<h;++d)i(d,0)},outOfBounds:(s,a,o,l)=>s<0||a<0||l>=t||o>=e}}function CSe(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),a=o=>~~((o+n)/r);return a.invert=o=>o*r-n,a.bitmap=()=>kSe(i,s),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function FSe(e,t,n,r){const i=e.width,s=e.height;return function(a){const o=a.datum.datum.items[r].items,l=o.length,c=a.datum.fontSize,u=Cs.width(a.datum,a.datum.text);let f=0,h,d,p,g,m,x,y;for(let v=0;v<l;++v)h=o[v].x,p=o[v].y,d=o[v].x2===void 0?h:o[v].x2,g=o[v].y2===void 0?p:o[v].y2,m=(h+d)/2,x=(p+g)/2,y=Math.abs(d-h+g-p),y>=f&&(f=y,a.x=m,a.y=x);return m=u/2,x=c/2,h=a.x-m,d=a.x+m,p=a.y-x,g=a.y+x,a.align="center",h<0&&d<=i?a.align="left":0<=h&&i<d&&(a.align="right"),a.baseline="middle",p<0&&g<=s?a.baseline="top":0<=p&&s<g&&(a.baseline="bottom"),!0}}function ab(e,t,n,r,i,s){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>s}function eu(e,t,n,r,i,s,a,o){const l=i*s/(r*2),c=e(t-l),u=e(t+l),f=e(n-(s=s/2)),h=e(n+s);return a.outOfBounds(c,f,u,h)||a.getRange(c,f,u,h)||o&&o.getRange(c,f,u,h)}function OSe(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1];function l(c,u,f,h,d){const p=e.invert(c),g=e.invert(u);let m=f,x=s,y;if(!ab(p,g,h,d,i,s)&&!eu(e,p,g,d,h,m,a,o)&&!eu(e,p,g,d,h,d,a,null)){for(;x-m>=1;)y=(m+x)/2,eu(e,p,g,d,h,y,a,o)?x=y:m=y;if(m>f)return[p,g,m,!0]}}return function(c){const u=c.datum.datum.items[r].items,f=u.length,h=c.datum.fontSize,d=Cs.width(c.datum,c.datum.text);let p=n?h:0,g=!1,m=!1,x=0,y,v,_,b,w,E,T,S,A,C,F,N,M,O,D,I,U;for(let Y=0;Y<f;++Y){for(y=u[Y].x,_=u[Y].y,v=u[Y].x2===void 0?y:u[Y].x2,b=u[Y].y2===void 0?_:u[Y].y2,y>v&&(U=y,y=v,v=U),_>b&&(U=_,_=b,b=U),A=e(y),F=e(v),C=~~((A+F)/2),N=e(_),O=e(b),M=~~((N+O)/2),T=C;T>=A;--T)for(S=M;S>=N;--S)I=l(T,S,p,d,h),I&&([c.x,c.y,p,g]=I);for(T=C;T<=F;++T)for(S=M;S<=O;++S)I=l(T,S,p,d,h),I&&([c.x,c.y,p,g]=I);!g&&!n&&(D=Math.abs(v-y+b-_),w=(y+v)/2,E=(_+b)/2,D>=x&&!ab(w,E,d,h,i,s)&&!eu(e,w,E,h,d,h,a,null)&&(x=D,c.x=w,c.y=E,m=!0))}return g||m?(w=d/2,E=h/2,a.setRange(e(c.x-w),e(c.y-E),e(c.x+w),e(c.y+E)),c.align="center",c.baseline="middle",!0):!1}}const NSe=[-1,-1,1,1],DSe=[-1,1,-1,1];function RSe(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1],l=e.bitmap();return function(c){const u=c.datum.datum.items[r].items,f=u.length,h=c.datum.fontSize,d=Cs.width(c.datum,c.datum.text),p=[];let g=n?h:0,m=!1,x=!1,y=0,v,_,b,w,E,T,S,A,C,F,N,M;for(let O=0;O<f;++O){for(v=u[O].x,b=u[O].y,_=u[O].x2===void 0?v:u[O].x2,w=u[O].y2===void 0?b:u[O].y2,p.push([e((v+_)/2),e((b+w)/2)]);p.length;)if([S,A]=p.pop(),!(a.get(S,A)||o.get(S,A)||l.get(S,A))){l.set(S,A);for(let D=0;D<4;++D)E=S+NSe[D],T=A+DSe[D],l.outOfBounds(E,T,E,T)||p.push([E,T]);if(E=e.invert(S),T=e.invert(A),C=g,F=s,!ab(E,T,d,h,i,s)&&!eu(e,E,T,h,d,C,a,o)&&!eu(e,E,T,h,d,h,a,null)){for(;F-C>=1;)N=(C+F)/2,eu(e,E,T,h,d,N,a,o)?F=N:C=N;C>g&&(c.x=E,c.y=T,g=C,m=!0)}}!m&&!n&&(M=Math.abs(_-v+w-b),E=(v+_)/2,T=(b+w)/2,M>=y&&!ab(E,T,d,h,i,s)&&!eu(e,E,T,h,d,h,a,null)&&(y=M,c.x=E,c.y=T,x=!0))}return m||x?(E=d/2,T=h/2,a.setRange(e(c.x-E),e(c.y-T),e(c.x+E),e(c.y+T)),c.align="center",c.baseline="middle",!0):!1}}const ISe=["right","center","left"],$Se=["bottom","middle","top"];function MSe(e,t,n,r){const i=e.width,s=e.height,a=t[0],o=t[1],l=r.length;return function(c){const u=c.boundary,f=c.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>s)return!1;let h=c.textWidth??0,d,p,g,m,x,y,v,_,b,w,E,T,S,A,C;for(let F=0;F<l;++F){if(d=(n[F]&3)-1,p=(n[F]>>>2&3)-1,g=d===0&&p===0||r[F]<0,m=d&&p?Math.SQRT1_2:1,x=r[F]<0?-1:1,y=u[1+d]+r[F]*d*m,E=u[4+p]+x*f*p/2+r[F]*p*m,_=E-f/2,b=E+f/2,T=e(y),A=e(_),C=e(b),!h)if(j5(T,T,A,C,a,o,y,y,_,b,u,g))h=Cs.width(c.datum,c.datum.text);else continue;if(w=y+x*h*d/2,y=w-h/2,v=w+h/2,T=e(y),S=e(v),j5(T,S,A,C,a,o,y,v,_,b,u,g))return c.x=d?d*x<0?v:y:w,c.y=p?p*x<0?b:_:E,c.align=ISe[d*x+1],c.baseline=$Se[p*x+1],a.setRange(T,A,S,C),!0}return!1}}function j5(e,t,n,r,i,s,a,o,l,c,u,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const YT=0,KT=4,JT=8,ZT=0,QT=1,eA=2,LSe={"top-left":YT+ZT,top:YT+QT,"top-right":YT+eA,left:KT+ZT,middle:KT+QT,right:KT+eA,"bottom-left":JT+ZT,bottom:JT+QT,"bottom-right":JT+eA},PSe={naive:FSe,"reduced-search":OSe,floodfill:RSe};function BSe(e,t,n,r,i,s,a,o,l,c,u){if(!e.length)return e;const f=Math.max(r.length,i.length),h=USe(r,f),d=zSe(i,f),p=HSe(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,m=g==="area",x=VSe(p,g,o,l),y=c===null||c===1/0,v=m&&u==="naive";let _=-1,b=-1;const w=e.map(A=>{const C=y?Cs.width(A,A.text):void 0;return _=Math.max(_,C),b=Math.max(b,A.fontSize),{datum:A,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:x(A),textWidth:C}});c=c===null||c===1/0?Math.max(_,b)+Math.max(...r):c;const E=CSe(t[0],t[1],c);let T;if(!v){n&&w.sort((F,N)=>n(F.datum,N.datum));let A=!1;for(let F=0;F<d.length&&!A;++F)A=d[F]===5||h[F]<0;const C=(p&&a||m)&&e.map(F=>F.datum);T=s.length||C?TSe(E,C||[],s,A,m):SSe(E,a&&w)}const S=m?PSe[u](E,T,a,l):MSe(E,T,d,h);return w.forEach(A=>A.opacity=+S(A)),w}function USe(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function zSe(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=LSe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function HSe(e){return e&&e.mark&&e.mark.marktype}function VSe(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const a=s.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:s=>{const a=s.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}const EF=["x","y","opacity","align","baseline"],AY=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function LD(e){oe.call(this,null,e)}LD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:AY},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:EF.length,default:EF}]};Re(LD,oe,{transform(e,t){function n(s){const a=e[s];return pt(a)&&t.modified(a.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&fe("Size parameter should be specified as a [width, height] array.");const i=e.as||EF;return BSe(t.materialize(t.SOURCE).source||[],e.size,e.sort,Be(e.offset==null?1:e.offset),Be(e.anchor||AY),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const a=s.datum;a[i[0]]=s.x,a[i[1]]=s.y,a[i[2]]=s.opacity,a[i[3]]=s.align,a[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const WSe=Object.freeze(Object.defineProperty({__proto__:null,label:LD},Symbol.toStringTag,{value:"Module"}));function kY(e,t){var n=[],r=function(u){return u(o)},i,s,a,o,l,c;if(t==null)n.push(e);else for(i={},s=0,a=e.length;s<a;++s)o=e[s],l=t.map(r),c=i[l],c||(i[l]=c=[],c.dims=l,n.push(c)),c.push(o);return n}function PD(e){oe.call(this,null,e)}PD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Re(PD,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kY(r,e.groupby),s=(e.groupby||[]).map(Fn),a=s.length,o=e.as||[Fn(e.x),Fn(e.y)],l=[];i.forEach(c=>{BG(c,e.x,e.y,e.bandwidth||.3).forEach(u=>{const f={};for(let h=0;h<a;++h)f[s[h]]=c.dims[h];f[o[0]]=u[0],f[o[1]]=u[1],l.push(Wt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const wF={constant:JO,linear:ZO,log:$G,exp:MG,pow:LG,quad:QO,poly:PG},jSe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function BD(e){oe.call(this,null,e)}BD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(wF)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Re(BD,oe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kY(r,e.groupby),s=(e.groupby||[]).map(Fn),a=e.method||"linear",o=e.order==null?3:e.order,l=jSe(a,o),c=e.as||[Fn(e.x),Fn(e.y)],u=wF[a],f=[];let h=e.extent;ze(wF,a)||fe("Invalid regression method: "+a),h!=null&&a==="log"&&h[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),i.forEach(d=>{if(d.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=u(d,e.x,e.y,o);if(e.params){f.push(Wt({keys:d.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=h||Go(d,e.x),x=y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=d.dims[_];v[c[0]]=y[0],v[c[1]]=y[1],f.push(Wt(v))};a==="linear"||a==="constant"?m.forEach(y=>x([y,g.predict(y)])):ew(g.predict,m,25,200).forEach(x)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const GSe=Object.freeze(Object.defineProperty({__proto__:null,loess:PD,regression:BD},Symbol.toStringTag,{value:"Module"}));function UD(e){oe.call(this,null,e)}UD.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const qSe=[-1e5,-1e5,1e5,1e5];Re(UD,oe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:qSe;const s=this.value=B4.from(r,e.x,e.y).voronoi(i);for(let a=0,o=r.length;a<o;++a){const l=s.cellPolygon(a);r[a][n]=l&&!YSe(l)?XSe(l):null}return t.reflow(e.modified()).modifies(n)}});function XSe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function YSe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const KSe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:UD},Symbol.toStringTag,{value:"Module"}));var tA=Math.PI/180,um=64,x_=2048;function JSe(){var e=[256,256],t,n,r,i,s,a,o,l=CY,c=[],u=Math.random,f={};f.layout=function(){for(var p=h(fu()),g=rTe((e[0]>>5)*e[1]),m=null,x=c.length,y=-1,v=[],_=c.map(w=>({text:t(w),font:n(w),style:i(w),weight:s(w),rotate:a(w),size:~~(r(w)+1e-14),padding:o(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,E)=>E.size-w.size);++y<x;){var b=_[y];b.x=e[0]*(u()+.5)>>1,b.y=e[1]*(u()+.5)>>1,ZSe(p,b,_,y),b.hasText&&d(g,b,m)&&(v.push(b),m?eTe(m,b):m=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=e[0]>>1,b.y-=e[1]>>1)}return v};function h(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(um<<5)/g,p.height=x_/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function d(p,g,m){for(var x=g.x,y=g.y,v=Math.hypot(e[0],e[1]),_=l(e),b=u()<.5?1:-1,w=-b,E,T,S;(E=_(w+=b))&&(T=~~E[0],S=~~E[1],!(Math.min(Math.abs(T),Math.abs(S))>=v));)if(g.x=x+T,g.y=y+S,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!QSe(g,p,e[0]))&&(!m||tTe(g,m))){for(var A=g.sprite,C=g.width>>5,F=e[0]>>5,N=g.x-(C<<4),M=N&127,O=32-M,D=g.y1-g.y0,I=(g.y+g.y0)*F+(N>>5),U,Y=0;Y<D;Y++){U=0;for(var X=0;X<=C;X++)p[I+X]|=U<<O|(X<C?(U=A[Y*C+X])>>>M:0);I+=F}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(c=p,f):c},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=pf(p),f):n},f.fontStyle=function(p){return arguments.length?(i=pf(p),f):i},f.fontWeight=function(p){return arguments.length?(s=pf(p),f):s},f.rotate=function(p){return arguments.length?(a=pf(p),f):a},f.text=function(p){return arguments.length?(t=pf(p),f):t},f.spiral=function(p){return arguments.length?(l=iTe[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=pf(p),f):r},f.padding=function(p){return arguments.length?(o=pf(p),f):o},f.random=function(p){return arguments.length?(u=p,f):u},f}function ZSe(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(um<<5)/s,x_/s);var a=0,o=0,l=0,c=n.length,u,f,h,d,p;for(--r;++r<c;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,u=i.measureText(t.text+"m").width*s,h=t.size<<1,t.rotate){var g=Math.sin(t.rotate*tA),m=Math.cos(t.rotate*tA),x=u*m,y=u*g,v=h*m,_=h*g;u=Math.max(Math.abs(x+_),Math.abs(x-_))+31>>5<<5,h=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else u=u+31>>5<<5;if(h>l&&(l=h),a+u>=um<<5&&(a=0,o+=l,l=0),o+h>=x_)break;i.translate((a+(u>>1))/s,(o+(h>>1))/s),t.rotate&&i.rotate(t.rotate*tA),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=u,t.height=h,t.xoff=a,t.yoff=o,t.x1=u>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=u}for(var b=i.getImageData(0,0,(um<<5)/s,x_/s).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(u=t.width,f=u>>5,h=t.y1-t.y0,d=0;d<h*f;d++)w[d]=0;if(a=t.xoff,a==null)return;o=t.yoff;var E=0,T=-1;for(p=0;p<h;p++){for(d=0;d<u;d++){var S=f*p+(d>>5),A=b[(o+p)*(um<<5)+(a+d)<<2]?1<<31-d%32:0;w[S]|=A,E|=A}E?T=p:(t.y0++,h--,p--,o++)}t.y1=t.y0+T,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function QSe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),a=s&127,o=32-a,l=e.y1-e.y0,c=(e.y+e.y0)*n+(s>>5),u,f=0;f<l;f++){u=0;for(var h=0;h<=i;h++)if((u<<o|(h<i?(u=r[f*i+h])>>>a:0))&t[c+h])return!0;c+=n}return!1}function eTe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function tTe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function CY(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function nTe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var a=s<0?-1:1;switch(Math.sqrt(1+4*a*s)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function rTe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function pf(e){return typeof e=="function"?e:function(){return e}}var iTe={archimedean:CY,rectangular:nTe};const FY=["x","y","font","fontSize","fontStyle","fontWeight","angle"],sTe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function zD(e){oe.call(this,JSe(),e)}zD.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:FY}]};Re(zD,oe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&fe("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return pt(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||sTe.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,a=e.as||FY;let o=e.fontSize||14,l;if(pt(o)?l=e.fontSizeRange:o=fi(o),l){const p=o,g=zt("sqrt")().domain(Go(i,p)).range(l);o=m=>g(p(m))}i.forEach(p=>{p[a[0]]=NaN,p[a[1]]=NaN,p[a[3]]=0});const c=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(xa).layout(),u=s.size(),f=u[0]>>1,h=u[1]>>1,d=c.length;for(let p=0,g,m;p<d;++p)g=c[p],m=g.datum,m[a[0]]=g.x+f,m[a[1]]=g.y+h,m[a[2]]=g.font,m[a[3]]=g.size,m[a[4]]=g.style,m[a[5]]=g.weight,m[a[6]]=g.rotate;return t.reflow(r).modifies(a)}});const aTe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:zD},Symbol.toStringTag,{value:"Module"})),oTe=e=>new Uint8Array(e),lTe=e=>new Uint16Array(e),Im=e=>new Uint32Array(e);function cTe(){let e=8,t=[],n=Im(0),r=oy(0,e),i=oy(0,e);return{data:()=>t,seen:()=>n=uTe(n,t.length),add(s){for(let a=0,o=t.length,l=s.length,c;a<l;++a)c=s[a],c._index=o++,t.push(c)},remove(s,a){const o=t.length,l=Array(o-s),c=t;let u,f,h;for(f=0;!a[f]&&f<o;++f)l[f]=t[f],c[f]=f;for(h=f;f<o;++f)u=t[f],a[f]?c[f]=-1:(c[f]=h,r[h]=r[f],i[h]=i[f],l[h]=u,u._index=h++),r[f]=0;return t=l,c},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,a){r[s]|=a},clear(s,a){r[s]&=~a},resize(s,a){const o=r.length;(s>o||a>e)&&(e=Math.max(a,e),r=oy(s,e,r),i=oy(s,e))}}}function uTe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function oy(e,t,n){const r=(t<257?oTe:t<65537?lTe:Im)(e);return n&&r.set(n),r}function G5(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const a=this,o=a.bisect(a.range,i.value),l=i.index,c=o[0],u=o[1],f=l.length;let h;for(h=0;h<c;++h)s[l[h]]|=r;for(h=u;h<f;++h)s[l[h]]|=r;return a}}}function q5(){let e=Im(0),t=[],n=0;function r(o,l,c){if(!l.length)return[];const u=n,f=l.length,h=Im(f);let d=Array(f),p,g,m;for(m=0;m<f;++m)d[m]=o(l[m]),h[m]=m;if(d=fTe(d,h),u)p=t,g=e,t=Array(u+f),e=Im(u+f),hTe(c,p,g,u,d,h,f,t,e);else{if(c>0)for(m=0;m<f;++m)h[m]+=c;t=d,e=h}return n=u+f,{index:h,value:d}}function i(o,l){const c=n;let u,f,h;for(f=0;!l[e[f]]&&f<c;++f);for(h=f;f<c;++f)l[u=e[f]]||(e[h]=u,t[h]=t[f],++h);n=c-o}function s(o){for(let l=0,c=n;l<c;++l)e[l]=o[e[l]]}function a(o,l){let c;return l?c=l.length:(l=t,c=n),[yce(l,o[0],0,c),vu(l,o[1],0,c)]}return{insert:r,remove:i,bisect:a,reindex:s,index:()=>e,size:()=>n}}function fTe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Ece(e,t)}function hTe(e,t,n,r,i,s,a,o,l){let c=0,u=0,f;for(f=0;c<r&&u<a;++f)t[c]<i[u]?(o[f]=t[c],l[f]=n[c++]):(o[f]=i[u],l[f]=s[u++]+e);for(;c<r;++c,++f)o[f]=t[c],l[f]=n[c];for(;u<a;++u,++f)o[f]=i[u],l[f]=s[u]+e}function HD(e){oe.call(this,cTe(),e),this._indices=null,this._dims=null}HD.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Re(HD,oe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],a=r.length;let o=0,l,c;for(;o<a;++o)l=n[o].fname,c=i[l]||(i[l]=q5()),s.push(G5(c,o,r[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,a=this._dims,o=this.value,l=o.curr(),c=o.prev(),u=o.all(),f=n.rem=n.add,h=n.mod,d=i.length,p={};let g,m,x,y,v,_,b,w,E;if(c.set(l),t.rem.length&&(v=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(_={},y=t.mod,b=0,w=y.length;b<w;++b)_[y[b]._index]=1;for(b=0;b<d;++b)E=r[b],(!a[b]||e.modified("fields",b)||t.modified(E.fields))&&(x=E.fname,(g=p[x])||(s[x]=m=q5(),p[x]=g=m.insert(E,t.source,0)),a[b]=G5(m,b,i[b]).onAdd(g,l));for(b=0,w=o.data().length;b<w;++b)v[b]||(c[b]!==l[b]?f.push(b):_[b]&&l[b]!==u&&h.push(b));return o.mask=(1<<d)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,a=this._indices,o=e.fields,l={},c=n.add,u=i.size()+r.length,f=s.length;let h=i.size(),d,p,g;i.resize(u,f),i.add(r);const m=i.curr(),x=i.prev(),y=i.all();for(d=0;d<f;++d)p=o[d].fname,g=l[p]||(l[p]=a[p].insert(o[d],r,h)),s[d].onAdd(g,m);for(;h<u;++h)x[h]=y,m[h]!==y&&c.push(h)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),a=e.mod;let o,l,c;for(o=0,l=a.length;o<l;++o)c=a[o]._index,i[c]!==s&&n.push(c)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),a=i.prev(),o=i.all(),l={},c=n.rem,u=t.rem;let f,h,d,p;for(f=0,h=u.length;f<h;++f)d=u[f]._index,l[d]=1,a[d]=p=s[d],s[d]=o,p!==o&&c.push(d);for(d in r)r[d].remove(h,l);return this.reindex(t,h,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const a in r)r[a].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,a=r.length;let o=0,l,c;for(n.filters=0,c=0;c<a;++c)e.modified("query",c)&&(l=c,++o);if(o===1)o=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(c=0,o=0;c<a;++c)e.modified("query",c)&&(o|=r[c].one,this.incrementAll(r[c],i[c],s,n.add),n.rem=n.add);return o},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),a=i.curr(),o=i.prev(),l=e.index(),c=e.bisect(e.range),u=e.bisect(t),f=u[0],h=u[1],d=c[0],p=c[1],g=e.one;let m,x,y;if(f<d)for(m=f,x=Math.min(d,h);m<x;++m)y=l[m],s[y]!==n&&(o[y]=a[y],s[y]=n,r.push(y)),a[y]^=g;else if(f>d)for(m=d,x=Math.min(f,p);m<x;++m)y=l[m],s[y]!==n&&(o[y]=a[y],s[y]=n,r.push(y)),a[y]^=g;if(h>p)for(m=Math.max(f,p),x=h;m<x;++m)y=l[m],s[y]!==n&&(o[y]=a[y],s[y]=n,r.push(y)),a[y]^=g;else if(h<p)for(m=Math.max(d,h),x=p;m<x;++m)y=l[m],s[y]!==n&&(o[y]=a[y],s[y]=n,r.push(y)),a[y]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),a=e.index(),o=e.bisect(e.range),l=e.bisect(t),c=l[0],u=l[1],f=o[0],h=o[1],d=e.one;let p,g,m;if(c<f)for(p=c,g=Math.min(f,u);p<g;++p)m=a[p],s[m]^=d,n.push(m);else if(c>f)for(p=f,g=Math.min(c,h);p<g;++p)m=a[p],s[m]^=d,r.push(m);if(u>h)for(p=Math.max(c,h),g=u;p<g;++p)m=a[p],s[m]^=d,n.push(m);else if(u<h)for(p=Math.max(f,u),g=h;p<g;++p)m=a[p],s[m]^=d,r.push(m);e.range=t.slice()}});function VD(e){oe.call(this,null,e)}VD.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Re(VD,oe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const s=t.fork(t.ALL),a=r.data(),o=r.curr(),l=r.prev(),c=u=>o[u]&n?null:a[u];return s.filter(s.MOD,c),i&i-1?(s.filter(s.ADD,u=>{const f=o[u]&n;return!f&&f^l[u]&n?a[u]:null}),s.filter(s.REM,u=>{const f=o[u]&n;return f&&!(f^(f^l[u]&n))?a[u]:null})):(s.filter(s.ADD,c),s.filter(s.REM,u=>(o[u]&n)===i?a[u]:null)),s.filter(s.SOURCE,u=>c(u._index))}});const dTe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:HD,resolvefilter:VD},Symbol.toStringTag,{value:"Module"})),pTe="RawCode",Ah="Literal",gTe="Property",mTe="Identifier",xTe="ArrayExpression",vTe="BinaryExpression",OY="CallExpression",yTe="ConditionalExpression",_Te="LogicalExpression",bTe="MemberExpression",ETe="ObjectExpression",wTe="UnaryExpression";function io(e){this.type=e}io.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=STe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function STe(e){switch(e.type){case xTe:return e.elements;case vTe:case _Te:return[e.left,e.right];case OY:return[e.callee].concat(e.arguments);case yTe:return[e.test,e.consequent,e.alternate];case bTe:return[e.object,e.property];case ETe:return e.properties;case gTe:return[e.key,e.value];case wTe:return[e.argument];case mTe:case Ah:case pTe:default:return[]}}var sl,qe,ue,oi,Yt,yw=1,Lx=2,kh=3,qu=4,_w=5,id=6,Gi=7,Px=8,TTe=9;sl={};sl[yw]="Boolean";sl[Lx]="<end>";sl[kh]="Identifier";sl[qu]="Keyword";sl[_w]="Null";sl[id]="Numeric";sl[Gi]="Punctuator";sl[Px]="String";sl[TTe]="RegularExpression";var ATe="ArrayExpression",kTe="BinaryExpression",CTe="CallExpression",FTe="ConditionalExpression",NY="Identifier",OTe="Literal",NTe="LogicalExpression",DTe="MemberExpression",RTe="ObjectExpression",ITe="Property",$Te="UnaryExpression",hr="Unexpected token %0",MTe="Unexpected number",LTe="Unexpected string",PTe="Unexpected identifier",BTe="Unexpected reserved word",UTe="Unexpected end of input",SF="Invalid regular expression",nA="Invalid regular expression: missing /",DY="Octal literals are not allowed in strict mode.",zTe="Duplicate data property in object literal not allowed in strict mode",kr="ILLEGAL",I1="Disabled.",HTe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),VTe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function bw(e,t){if(!e)throw new Error("ASSERT: "+t)}function Tl(e){return e>=48&&e<=57}function WD(e){return"0123456789abcdefABCDEF".includes(e)}function $m(e){return"01234567".includes(e)}function WTe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function $1(e){return e===10||e===13||e===8232||e===8233}function Bx(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&HTe.test(String.fromCharCode(e))}function ob(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&VTe.test(String.fromCharCode(e))}const jTe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function RY(){for(;ue<oi;){const e=qe.charCodeAt(ue);if(WTe(e)||$1(e))++ue;else break}}function TF(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ue<oi&&WD(qe[ue])?(r=qe[ue++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Pt({},hr,kr);return String.fromCharCode(i)}function GTe(){var e,t,n,r;for(e=qe[ue],t=0,e==="}"&&Pt({},hr,kr);ue<oi&&(e=qe[ue++],!!WD(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Pt({},hr,kr),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function IY(){var e,t;for(e=qe.charCodeAt(ue++),t=String.fromCharCode(e),e===92&&(qe.charCodeAt(ue)!==117&&Pt({},hr,kr),++ue,e=TF("u"),(!e||e==="\\"||!Bx(e.charCodeAt(0)))&&Pt({},hr,kr),t=e);ue<oi&&(e=qe.charCodeAt(ue),!!ob(e));)++ue,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),qe.charCodeAt(ue)!==117&&Pt({},hr,kr),++ue,e=TF("u"),(!e||e==="\\"||!ob(e.charCodeAt(0)))&&Pt({},hr,kr),t+=e);return t}function qTe(){var e,t;for(e=ue++;ue<oi;){if(t=qe.charCodeAt(ue),t===92)return ue=e,IY();if(ob(t))++ue;else break}return qe.slice(e,ue)}function XTe(){var e,t,n;return e=ue,t=qe.charCodeAt(ue)===92?IY():qTe(),t.length===1?n=kh:jTe.hasOwnProperty(t)?n=qu:t==="null"?n=_w:t==="true"||t==="false"?n=yw:n=kh,{type:n,value:t,start:e,end:ue}}function rA(){var e=ue,t=qe.charCodeAt(ue),n,r=qe[ue],i,s,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ue,{type:Gi,value:String.fromCharCode(t),start:e,end:ue};default:if(n=qe.charCodeAt(ue+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ue+=2,{type:Gi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ue};case 33:case 61:return ue+=2,qe.charCodeAt(ue)===61&&++ue,{type:Gi,value:qe.slice(e,ue),start:e,end:ue}}}if(a=qe.substr(ue,4),a===">>>=")return ue+=4,{type:Gi,value:a,start:e,end:ue};if(s=a.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ue+=3,{type:Gi,value:s,start:e,end:ue};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ue+=2,{type:Gi,value:i,start:e,end:ue};if(i==="//"&&Pt({},hr,kr),"<>=!+-*%&|^/".includes(r))return++ue,{type:Gi,value:r,start:e,end:ue};Pt({},hr,kr)}function YTe(e){let t="";for(;ue<oi&&WD(qe[ue]);)t+=qe[ue++];return t.length===0&&Pt({},hr,kr),Bx(qe.charCodeAt(ue))&&Pt({},hr,kr),{type:id,value:parseInt("0x"+t,16),start:e,end:ue}}function KTe(e){let t="0"+qe[ue++];for(;ue<oi&&$m(qe[ue]);)t+=qe[ue++];return(Bx(qe.charCodeAt(ue))||Tl(qe.charCodeAt(ue)))&&Pt({},hr,kr),{type:id,value:parseInt(t,8),octal:!0,start:e,end:ue}}function X5(){var e,t,n;if(n=qe[ue],bw(Tl(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ue,e="",n!=="."){if(e=qe[ue++],n=qe[ue],e==="0"){if(n==="x"||n==="X")return++ue,YTe(t);if($m(n))return KTe(t);n&&Tl(n.charCodeAt(0))&&Pt({},hr,kr)}for(;Tl(qe.charCodeAt(ue));)e+=qe[ue++];n=qe[ue]}if(n==="."){for(e+=qe[ue++];Tl(qe.charCodeAt(ue));)e+=qe[ue++];n=qe[ue]}if(n==="e"||n==="E")if(e+=qe[ue++],n=qe[ue],(n==="+"||n==="-")&&(e+=qe[ue++]),Tl(qe.charCodeAt(ue)))for(;Tl(qe.charCodeAt(ue));)e+=qe[ue++];else Pt({},hr,kr);return Bx(qe.charCodeAt(ue))&&Pt({},hr,kr),{type:id,value:parseFloat(e),start:t,end:ue}}function JTe(){var e="",t,n,r,i,s=!1;for(t=qe[ue],bw(t==="'"||t==='"',"String literal must starts with a quote"),n=ue,++ue;ue<oi;)if(r=qe[ue++],r===t){t="";break}else if(r==="\\")if(r=qe[ue++],!r||!$1(r.charCodeAt(0)))switch(r){case"u":case"x":qe[ue]==="{"?(++ue,e+=GTe()):e+=TF(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:$m(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),ue<oi&&$m(qe[ue])&&(s=!0,i=i*8+"01234567".indexOf(qe[ue++]),"0123".includes(r)&&ue<oi&&$m(qe[ue])&&(i=i*8+"01234567".indexOf(qe[ue++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&qe[ue]===`
`&&++ue;else{if($1(r.charCodeAt(0)))break;e+=r}return t!==""&&Pt({},hr,kr),{type:Px,value:e,octal:s,start:n,end:ue}}function ZTe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Pt({},SF)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Pt({},SF)}try{return new RegExp(e,t)}catch{return null}}function QTe(){var e,t,n,r,i;for(e=qe[ue],bw(e==="/","Regular expression literal must start with a slash"),t=qe[ue++],n=!1,r=!1;ue<oi;)if(e=qe[ue++],t+=e,e==="\\")e=qe[ue++],$1(e.charCodeAt(0))&&Pt({},nA),t+=e;else if($1(e.charCodeAt(0)))Pt({},nA);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Pt({},nA),i=t.substr(1,t.length-2),{value:i,literal:t}}function eAe(){var e,t,n;for(t="",n="";ue<oi&&(e=qe[ue],!!ob(e.charCodeAt(0)));)++ue,e==="\\"&&ue<oi?Pt({},hr,kr):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Pt({},SF,n),{value:n,literal:t}}function tAe(){var e,t,n,r;return Yt=null,RY(),e=ue,t=QTe(),n=eAe(),r=ZTe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ue}}function nAe(e){return e.type===kh||e.type===qu||e.type===yw||e.type===_w}function $Y(){if(RY(),ue>=oi)return{type:Lx,start:ue,end:ue};const e=qe.charCodeAt(ue);return Bx(e)?XTe():e===40||e===41||e===59?rA():e===39||e===34?JTe():e===46?Tl(qe.charCodeAt(ue+1))?X5():rA():Tl(e)?X5():rA()}function Ji(){const e=Yt;return ue=e.end,Yt=$Y(),ue=e.end,e}function MY(){const e=ue;Yt=$Y(),ue=e}function rAe(e){const t=new io(ATe);return t.elements=e,t}function Y5(e,t,n){const r=new io(e==="||"||e==="&&"?NTe:kTe);return r.operator=e,r.left=t,r.right=n,r}function iAe(e,t){const n=new io(CTe);return n.callee=e,n.arguments=t,n}function sAe(e,t,n){const r=new io(FTe);return r.test=e,r.consequent=t,r.alternate=n,r}function jD(e){const t=new io(NY);return t.name=e,t}function fm(e){const t=new io(OTe);return t.value=e.value,t.raw=qe.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function K5(e,t,n){const r=new io(DTe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function aAe(e){const t=new io(RTe);return t.properties=e,t}function J5(e,t,n){const r=new io(ITe);return r.key=t,r.value=n,r.kind=e,r}function oAe(e,t){const n=new io($Te);return n.operator=e,n.argument=t,n.prefix=!0,n}function Pt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,a)=>(bw(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=ue,n.description=i,n}function Ew(e){e.type===Lx&&Pt(e,UTe),e.type===id&&Pt(e,MTe),e.type===Px&&Pt(e,LTe),e.type===kh&&Pt(e,PTe),e.type===qu&&Pt(e,BTe),Pt(e,hr,e.value)}function li(e){const t=Ji();(t.type!==Gi||t.value!==e)&&Ew(t)}function cn(e){return Yt.type===Gi&&Yt.value===e}function iA(e){return Yt.type===qu&&Yt.value===e}function lAe(){const e=[];for(ue=Yt.start,li("[");!cn("]");)cn(",")?(Ji(),e.push(null)):(e.push(Ch()),cn("]")||li(","));return Ji(),rAe(e)}function Z5(){ue=Yt.start;const e=Ji();return e.type===Px||e.type===id?(e.octal&&Pt(e,DY),fm(e)):jD(e.value)}function cAe(){var e,t,n,r;if(ue=Yt.start,e=Yt,e.type===kh)return n=Z5(),li(":"),r=Ch(),J5("init",n,r);if(e.type===Lx||e.type===Gi)Ew(e);else return t=Z5(),li(":"),r=Ch(),J5("init",t,r)}function uAe(){var e=[],t,n,r,i={},s=String;for(ue=Yt.start,li("{");!cn("}");)t=cAe(),t.key.type===NY?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Pt({},zTe):i[r]=!0,e.push(t),cn("}")||li(",");return li("}"),aAe(e)}function fAe(){li("(");const e=GD();return li(")"),e}const hAe={if:1};function dAe(){var e,t,n;if(cn("("))return fAe();if(cn("["))return lAe();if(cn("{"))return uAe();if(e=Yt.type,ue=Yt.start,e===kh||hAe[Yt.value])n=jD(Ji().value);else if(e===Px||e===id)Yt.octal&&Pt(Yt,DY),n=fm(Ji());else{if(e===qu)throw new Error(I1);e===yw?(t=Ji(),t.value=t.value==="true",n=fm(t)):e===_w?(t=Ji(),t.value=null,n=fm(t)):cn("/")||cn("/=")?(n=fm(tAe()),MY()):Ew(Ji())}return n}function pAe(){const e=[];if(li("("),!cn(")"))for(;ue<oi&&(e.push(Ch()),!cn(")"));)li(",");return li(")"),e}function gAe(){ue=Yt.start;const e=Ji();return nAe(e)||Ew(e),jD(e.value)}function mAe(){return li("."),gAe()}function xAe(){li("[");const e=GD();return li("]"),e}function vAe(){var e,t,n;for(e=dAe();;)if(cn("."))n=mAe(),e=K5(".",e,n);else if(cn("("))t=pAe(),e=iAe(e,t);else if(cn("["))n=xAe(),e=K5("[",e,n);else break;return e}function Q5(){const e=vAe();if(Yt.type===Gi&&(cn("++")||cn("--")))throw new Error(I1);return e}function v_(){var e,t;if(Yt.type!==Gi&&Yt.type!==qu)t=Q5();else{if(cn("++")||cn("--"))throw new Error(I1);if(cn("+")||cn("-")||cn("~")||cn("!"))e=Ji(),t=v_(),t=oAe(e.value,t);else{if(iA("delete")||iA("void")||iA("typeof"))throw new Error(I1);t=Q5()}}return t}function eP(e){let t=0;if(e.type!==Gi&&e.type!==qu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function yAe(){var e,t,n,r,i,s,a,o,l,c;if(e=Yt,l=v_(),r=Yt,i=eP(r),i===0)return l;for(r.prec=i,Ji(),t=[e,Yt],a=v_(),s=[l,r,a];(i=eP(Yt))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)a=s.pop(),o=s.pop().value,l=s.pop(),t.pop(),n=Y5(o,l,a),s.push(n);r=Ji(),r.prec=i,s.push(r),t.push(Yt),n=v_(),s.push(n)}for(c=s.length-1,n=s[c],t.pop();c>1;)t.pop(),n=Y5(s[c-1].value,s[c-2],n),c-=2;return n}function Ch(){var e,t,n;return e=yAe(),cn("?")&&(Ji(),t=Ch(),li(":"),n=Ch(),e=sAe(e,t,n)),e}function GD(){const e=Ch();if(cn(","))throw new Error(I1);return e}function qD(e){qe=e,ue=0,oi=qe.length,Yt=null,MY();const t=GD();if(Yt.type!==Lx)throw new Error("Unexpect token after expression.");return t}var LY={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function PY(e){function t(a,o,l,c){let u=e(o[0]);return l&&(u=l+"("+u+")",l.lastIndexOf("new ",0)===0&&(u="("+u+")")),u+"."+a+(c<0?"":c===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(a,o,l){return c=>t(a,c,o,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&fe("Missing arguments to clamp function."),a.length>3&&fe("Too many arguments to clamp function.");const o=a.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(a){a.length<3&&fe("Missing arguments to if function."),a.length>3&&fe("Too many arguments to if function.");const o=a.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function _Ae(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function BY(e){e=e||{};const t=e.allowed?Ya(e.allowed):{},n=e.forbidden?Ya(e.forbidden):{},r=e.constants||LY,i=(e.functions||PY)(f),s=e.globalvar,a=e.fieldvar,o=pt(s)?s:p=>`${s}["${p}"]`;let l={},c={},u=0;function f(p){if(Ue(p))return p;const g=h[p.type];return g==null&&fe("Unsupported type: "+p.type),g(p)}const h={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return u>0?g:ze(n,g)?fe("Illegal identifier: "+g):ze(r,g)?r[g]:ze(t,g)?g:(l[g]=1,o(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(u+=1);const x=f(p.property);return m===a&&(c[_Ae(x)]=1),g&&(u-=1),m+(g?"."+x:"["+x+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&fe("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,x=ze(i,g)&&i[g];return x||fe("Unrecognized function: "+g),pt(x)?x(m):x+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{u+=1;const g=f(p.key);return u-=1,g+":"+f(p.value)}};function d(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},g}return d.functions=i,d.constants=r,d}const tP=Symbol("vega_selection_getter");function UY(e){return(!e.getter||!e.getter[tP])&&(e.getter=pa(e.field),e.getter[tP]=!0),e.getter}const XD="intersect",nP="union",bAe="vlMulti",EAe="vlPoint",rP="or",wAe="and",Ao="_vgsid_",M1=pa(Ao),SAe="E",TAe="R",AAe="R-E",kAe="R-LE",CAe="R-RE",FAe="E-LT",OAe="E-LTE",NAe="E-GT",DAe="E-GTE",RAe="E-VALID",IAe="E-ONE",lb="index:unit";function iP(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,a,o;s<i;++s)if(o=n[s],a=UY(o)(e),cu(a)&&(a=ti(a)),cu(r[s])&&(r[s]=ti(r[s])),pe(r[s])&&cu(r[s][0])&&(r[s]=r[s].map(ti)),o.type===SAe){if(pe(r[s])?!r[s].includes(a):a!==r[s])return!1}else if(o.type===TAe){if(!e0(a,r[s]))return!1}else if(o.type===CAe){if(!e0(a,r[s],!0,!1))return!1}else if(o.type===AAe){if(!e0(a,r[s],!1,!1))return!1}else if(o.type===kAe){if(!e0(a,r[s],!1,!0))return!1}else if(o.type===FAe){if(a>=r[s])return!1}else if(o.type===OAe){if(a>r[s])return!1}else if(o.type===NAe){if(a<=r[s])return!1}else if(o.type===DAe){if(a<r[s])return!1}else if(o.type===RAe){if(a===null||isNaN(a))return!1}else if(o.type===IAe&&r[s].indexOf(a)===-1)return!1;return!0}function $Ae(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[lb]&&r[lb].value:void 0,a=n===XD,o=i.length,l=0,c,u,f,h,d;l<o;++l)if(c=i[l],s&&a){if(u=u||{},f=u[h=c.unit]||0,f===-1)continue;if(d=iP(t,c),u[h]=d?-1:++f,d&&s.size===1)return!0;if(!d&&f===s.get(h).count)return!1}else if(d=iP(t,c),a^d)return d;return o&&a}const zY=Fp(M1),MAe=zY.left,LAe=zY.right;function PAe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[lb]&&r[lb].value:void 0,a=n===XD,o=M1(t),l=MAe(i,o);if(l===i.length||M1(i[l])!==o)return!1;if(s&&a){if(s.size===1)return!0;if(LAe(i,o)-l<s.size)return!1}return!0}function BAe(e,t){return e.map(n=>ht(t.fields?{values:t.fields.map(r=>UY(r)(n.datum))}:{[Ao]:M1(n.datum)},t))}function UAe(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],a={},o={},l={},c,u,f,h,d,p,g,m,x,y,v=s.length,_=0,b,w;_<v;++_)if(c=s[_],h=c.unit,u=c.fields,f=c.values,u&&f){for(b=0,w=u.length;b<w;++b)d=u[b],g=a[d.field]||(a[d.field]={}),m=g[h]||(g[h]=[]),l[d.field]=x=d.type.charAt(0),y=sA[`${x}_union`],g[h]=y(m,Be(f[b]));n&&(m=o[h]||(o[h]=[]),m.push(Be(f).reduce((E,T,S)=>(E[u[S].field]=T,E),{})))}else d=Ao,p=M1(c),g=a[d]||(a[d]={}),m=g[h]||(g[h]=[]),m.push(p),n&&(m=o[h]||(o[h]=[]),m.push({[Ao]:p}));if(t=t||nP,a[Ao]?a[Ao]=sA[`${Ao}_${t}`](...Object.values(a[Ao])):Object.keys(a).forEach(E=>{a[E]=Object.keys(a[E]).map(T=>a[E][T]).reduce((T,S)=>T===void 0?S:sA[`${l[E]}_${t}`](T,S))}),s=Object.keys(o),n&&s.length){const E=r?EAe:bAe;a[E]=t===nP?{[rP]:s.reduce((T,S)=>(T.push(...o[S]),T),[])}:{[wAe]:s.map(T=>({[rP]:o[T]}))}}return a}var sA={[`${Ao}_union`]:Oce,[`${Ao}_intersect`]:Cce,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=ti(t[0]),r=ti(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ti(t[0]),r=ti(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const zAe=":",HAe="@";function YD(e,t,n,r){t[0].type!==Ah&&fe("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Nt(t).value,a="unit",o=HAe+a,l=zAe+i;s===XD&&!ze(r,o)&&(r[o]=n.getData(i).indataRef(n,a)),ze(r,l)||(r[l]=n.getData(i).tuplesRef())}function HY(e){const t=this.context.data[e];return t?t.values.value:[]}function VAe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function WAe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ga).insert(t)),1}function jAe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Ux=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},GAe=Ux("format"),VY=Ux("timeFormat"),qAe=Ux("utcFormat"),XAe=Ux("timeParse"),YAe=Ux("utcParse"),ly=new Date(2e3,0,1);function ww(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(ly.setYear(2e3),ly.setMonth(e),ly.setDate(t),VY.call(this,ly,n))}function KAe(e){return ww.call(this,e,1,"%B")}function JAe(e){return ww.call(this,e,1,"%b")}function ZAe(e){return ww.call(this,0,2+e,"%A")}function QAe(e){return ww.call(this,0,2+e,"%a")}const eke=":",tke="@",AF="%",WY="$";function KD(e,t,n,r){t[0].type!==Ah&&fe("First argument to data functions must be a string literal.");const i=t[0].value,s=eke+i;if(!ze(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function nke(e,t,n,r){t[0].type!==Ah&&fe("First argument to indata must be a string literal."),t[1].type!==Ah&&fe("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,a=tke+s;ze(a,r)||(r[a]=n.getData(i).indataRef(n,s))}function Ri(e,t,n,r){if(t[0].type===Ah)sP(n,r,t[0].value);else for(e in n.scales)sP(n,r,e)}function sP(e,t,n){const r=AF+n;if(!ze(t,r))try{t[r]=e.scaleRef(n)}catch{}}function al(e,t){if(Ue(e)){const n=t.scales[e];return n&&E_e(n.value)?n.value:void 0}}function rke(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ri,n._range=Ri,n._scale=Ri;const r=i=>"_["+(i.type===Ah?Oe(AF+i.value):Oe(AF)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function JD(e,t){return function(n,r,i){if(n){const s=al(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const ike=JD("area",T0e),ske=JD("bounds",F0e),ake=JD("centroid",$0e);function oke(e,t){const n=al(e,(t||this).context);return n&&n.scale()}function lke(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function ZD(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function cke(){return ZD(this.context.dataflow,"warn",arguments)}function uke(){return ZD(this.context.dataflow,"info",arguments)}function fke(){return ZD(this.context.dataflow,"debug",arguments)}function aA(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kF(e){const t=_u(e),n=aA(t.r),r=aA(t.g),i=aA(t.b);return .2126*n+.7152*r+.0722*i}function hke(e,t){const n=kF(e),r=kF(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function dke(){const e=[].slice.call(arguments);return e.unshift({}),ht(...e)}function jY(e,t){return e===t||e!==e&&t!==t?!0:pe(e)?pe(t)&&e.length===t.length?pke(e,t):!1:Pe(e)&&Pe(t)?GY(e,t):!1}function pke(e,t){for(let n=0,r=e.length;n<r;++n)if(!jY(e[n],t[n]))return!1;return!0}function GY(e,t){for(const n in e)if(!jY(e[n],t[n]))return!1;return!0}function aP(e){return t=>GY(e,t)}function gke(e,t,n,r,i,s){const a=this.context.dataflow,o=this.context.data[e],l=o.input,c=a.stamp();let u=o.changes,f,h;if(a._trigger===!1||!(l.value.length||t||r))return 0;if((!u||u.stamp<c)&&(o.changes=u=a.changeset(),u.stamp=c,a.runAfter(()=>{o.modified=!0,a.pulse(l,u).run()},!0,1)),n&&(f=n===!0?ga:pe(n)||GE(n)?n:aP(n),u.remove(f)),t&&u.insert(t),r&&(f=aP(r),l.value.some(f)?u.remove(f):u.insert(r)),i)for(h in s)u.modify(i,h,s[h]);return 1}function mke(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function xke(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const oP={};function vke(e,t){const n=oP[t]||(oP[t]=pa(t));return pe(e)?e.map(n):n(e)}function Sw(e){return pe(e)||ArrayBuffer.isView(e)?e:null}function QD(e){return Sw(e)||(Ue(e)?e:null)}function yke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sw(e).join(...n)}function _ke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return QD(e).indexOf(...n)}function bke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return QD(e).lastIndexOf(...n)}function Eke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return QD(e).slice(...n)}function wke(e,t,n){return pt(n)&&fe("Function argument passed to replace."),String(e).replace(t,n)}function Ske(e){return Sw(e).slice().reverse()}function Tke(e){return Sw(e).slice().sort(Lp)}function Ake(e,t,n){return TN(e||0,t||0,n||0)}function kke(e,t){const n=al(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Cke(e,t){const n=al(e,(t||this).context);return n?n.copy():void 0}function Fke(e,t){const n=al(e,(t||this).context);return n?n.domain():[]}function Oke(e,t,n){const r=al(e,(n||this).context);return r?pe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Nke(e,t){const n=al(e,(t||this).context);return n&&n.range?n.range():[]}function Dke(e,t,n){const r=al(e,(n||this).context);return r?r(t):void 0}function Rke(e,t,n,r,i){let s=typeof e=="string"?al(e,(i||this).context):e;const a=Mq(t,n);let o=s.domain(),l=o[0],c=Nt(o),u=ui;return c-l?u=Sq(s,l,c):s=(s.interpolator?zt("sequential")().interpolator(s.interpolator()):zt("linear")().interpolate(s.interpolate()).range(s.range())).domain([l=0,c=1]),s.ticks&&(o=s.ticks(+r||15),l!==o[0]&&o.unshift(l),c!==Nt(o)&&o.push(c)),o.forEach(f=>a.stop(u(f),s(f))),a}function Ike(e,t,n){const r=al(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function $ke(e){let t=null;return function(n){return n?O1(n,t=t||Q0(e)):e}}const qY=e=>e.data;function XY(e,t){const n=HY.call(t,e);return n.root&&n.root.lookup||{}}function Mke(e,t,n){const r=XY(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(qY):void 0}function Lke(e,t){const n=XY(e,this)[t];return n?n.ancestors().map(qY):void 0}const YY=()=>typeof window<"u"&&window||null;function Pke(){const e=YY();return e?e.screen:{}}function Bke(){const e=YY();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Uke(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function KY(e,t,n){if(!e)return[];const[r,i]=e,s=new jn().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return RX(a,s,zke(t))}function zke(e){let t=null;if(e){const n=Be(e.marktype),r=Be(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Hke(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Be(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Vke(e){return Be(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Wke(e,t,n){const{x:r,y:i,mark:s}=n,a=new jn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,c]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),c<a.y1&&(a.y1=c),c>a.y2&&(a.y2=c);return a.translate(r,i),KY([[a.x1,a.y1],[a.x2,a.y2]],e,s).filter(l=>jke(l.x,l.y,t))}function jke(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[a,o]=n[s],[l,c]=n[i];c>t!=o>t&&e<(a-l)*(t-c)/(o-c)+l&&r++}return r&1}const L1={random(){return xa()},cumulativeNormal:JE,cumulativeLogNormal:jO,cumulativeUniform:YO,densityNormal:UO,densityLogNormal:WO,densityUniform:XO,quantileNormal:ZE,quantileLogNormal:GO,quantileUniform:KO,sampleNormal:KE,sampleLogNormal:VO,sampleUniform:qO,isArray:pe,isBoolean:Gu,isDate:cu,isDefined(e){return e!==void 0},isNumber:Ut,isObject:Pe,isRegExp:Ij,isString:Ue,isTuple:GE,isValid(e){return e!=null&&e===e},toBoolean:SO,toDate(e){return TO(e)},toNumber:ti,toString:AO,indexof:_ke,join:yke,lastindexof:bke,replace:wke,reverse:Ske,sort:Tke,slice:Eke,flush:Dj,lerp:$j,merge:dke,pad:Pj,peek:Nt,pluck:vke,span:_x,inrange:e0,truncate:Bj,rgb:_u,lab:s2,hcl:a2,hsl:r2,luminance:kF,contrast:hke,sequence:Ss,format:GAe,utcFormat:qAe,utcParse:YAe,utcOffset:Qj,utcSequence:nG,timeFormat:VY,timeParse:XAe,timeOffset:Zj,timeSequence:tG,timeUnitSpecifier:zj,monthFormat:KAe,monthAbbrevFormat:JAe,dayFormat:ZAe,dayAbbrevFormat:QAe,quarter:Cj,utcquarter:Fj,week:Vj,utcweek:Gj,dayofyear:Hj,utcdayofyear:jj,warn:cke,info:uke,debug:fke,extent(e){return Go(e)},inScope:lke,intersect:KY,clampRange:Oj,pinchDistance:mke,pinchAngle:xke,screen:Pke,containerSize:Uke,windowSize:Bke,bandspace:Ake,setdata:WAe,pathShape:$ke,panLinear:Sj,panLog:Tj,panPow:Aj,panSymlog:kj,zoomLinear:vO,zoomLog:yO,zoomPow:z2,zoomSymlog:_O,encode:jAe,modify:gke,lassoAppend:Hke,lassoPath:Vke,intersectLasso:Wke},Gke=["view","item","group","xy","x","y"],qke="event.vega.",JY="this.",eR={},ZY={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Oe(WY+e)}]`,functions:Xke,constants:LY,visitors:eR},CF=BY(ZY);function Xke(e){const t=PY(e);Gke.forEach(n=>t[n]=qke+n);for(const n in L1)t[n]=JY+n;return ht(t,rke(e,L1,eR)),t}function Pn(e,t,n){return arguments.length===1?L1[e]:(L1[e]=t,n&&(eR[e]=n),CF&&(CF.functions[e]=JY+e),this)}Pn("bandwidth",kke,Ri);Pn("copy",Cke,Ri);Pn("domain",Fke,Ri);Pn("range",Nke,Ri);Pn("invert",Oke,Ri);Pn("scale",Dke,Ri);Pn("gradient",Rke,Ri);Pn("geoArea",ike,Ri);Pn("geoBounds",ske,Ri);Pn("geoCentroid",ake,Ri);Pn("geoShape",Ike,Ri);Pn("geoScale",oke,Ri);Pn("indata",VAe,nke);Pn("data",HY,KD);Pn("treePath",Mke,KD);Pn("treeAncestors",Lke,KD);Pn("vlSelectionTest",$Ae,YD);Pn("vlSelectionIdTest",PAe,YD);Pn("vlSelectionResolve",UAe,YD);Pn("vlSelectionTuples",BAe);function Xo(e,t){const n={};let r;try{e=Ue(e)?e:Oe(e)+"",r=qD(e)}catch{fe("Expression parse error: "+e)}r.visit(s=>{if(s.type!==OY)return;const a=s.callee.name,o=ZY.visitors[a];o&&o(a,s.arguments,t,n)});const i=CF(r);return i.globals.forEach(s=>{const a=WY+s;!ze(n,a)&&t.getSignal(s)&&(n[a]=t.signalRef(s))}),{$expr:ht({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Yke(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Kke=Ya(["rule"]),lP=Ya(["group","image","rect"]);function Jke(e,t){let n="";return Kke[t]||(e.x2&&(e.x?(lP[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(lP[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function tR(e){return(e+"").toLowerCase()}function Zke(e){return tR(e)==="operator"}function Qke(e){return tR(e)==="collect"}function Fg(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function eCe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var tCe={operator:(e,t)=>Fg(e,["_"],t.code),parameter:(e,t)=>Fg(e,["datum","_"],t.code),event:(e,t)=>Fg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Fg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const a="o["+Oe(s)+"]";i+=`$=${r[s].code};if(${a}!==$)${a}=$,m=1;`}return i+=Jke(r,n),i+="return m;",Fg(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Oe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,a)=>{const o=t[a];let l,c;return s.path?(l=`a${s.path}`,c=`b${s.path}`):((n=n||{})["f"+a]=s,l=`this.f${a}(a)`,c=`this.f${a}(b)`),eCe(l,c,-o,o)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function nCe(e){const t=this;Zke(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function rCe(e){const t=this;if(e.params){const n=t.get(e.id);n||fe("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function iCe(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=pe(i)?i.map(s=>cP(s,n,t)):cP(i,n,t)}return t}function cP(e,t,n){if(!e||!Pe(e))return e;for(let r=0,i=uP.length,s;r<i;++r)if(s=uP[r],ze(e,s.key))return s.parse(e,t,n);return e}var uP=[{key:"$ref",parse:sCe},{key:"$key",parse:oCe},{key:"$expr",parse:aCe},{key:"$field",parse:lCe},{key:"$encode",parse:uCe},{key:"$compare",parse:cCe},{key:"$context",parse:fCe},{key:"$subflow",parse:hCe},{key:"$tupleid",parse:dCe}];function sCe(e,t){return t.get(e.$ref)||fe("Operator not defined: "+e.$ref)}function aCe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ds(t.parameterExpression(e.$expr),e.$fields))}function oCe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=wO(e.$key,e.$flat,t.expr.codegen))}function lCe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=pa(e.$field,e.$name,t.expr.codegen))}function cCe(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Be(e.$compare).map(i=>i&&i.$tupleid?Je:i);return t.fn[n]||(t.fn[n]=bO(r,e.$order,t.expr.codegen))}function uCe(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ds(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function fCe(e,t){return t}function hCe(e,t){const n=e.$subflow;return function(r,i,s){const a=t.fork().parse(n),o=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(s),o.detachSubflow=()=>t.detach(a),o}}function dCe(){return Je}function pCe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&fe("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function gCe(e){var t=this,n=Pe(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,a=void 0;r||fe("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(a=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,a)}const mCe={skip:!0};function xCe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const a=t.signals[s];e.signals(s,a)&&(r[s]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const a=t.data[s];e.data(s,a)&&(i[s]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function vCe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],mCe)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(ga).insert(r[s]))}),(e.subcontext||[]).forEach((s,a)=>{const o=t.subcontext[a];o&&o.setState(s)})}function QY(e,t,n,r){return new eK(e,t,n,r)}function eK(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||tCe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function fP(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}eK.prototype=fP.prototype={fork(){const e=new fP(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Qke(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const a=n.data[s]||(n.data[s]={});e.data[s].forEach(o=>a[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[tR(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Yke,parseOperator:nCe,parseOperatorParameters:rCe,parseParameters:iCe,parseStream:pCe,parseUpdate:gCe,getState:xCe,setState:vCe};function yCe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),tK(t,e.description()))}function tK(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function _Ce(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const oA="default";function bCe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:oA,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Ue(i)?i:i.user:oA,a=r.item&&r.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Ue(r)||(i=r.item,r=r.user),FF(e,r&&r!==oA?r:i||r),i},{cursor:t})}function FF(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function cb(e,t){var n=e._runtime.data;return ze(n,t)||fe("Unrecognized data set: "+t),n[t]}function ECe(e,t){return arguments.length<2?cb(this,e).values.value:Tw.call(this,e,nd().remove(ga).insert(t))}function Tw(e,t){EG(t)||fe("Second argument to changes must be a changeset.");const n=cb(this,e);return n.modified=!0,this.pulse(n.input,t)}function wCe(e,t){return Tw.call(this,e,nd().insert(t))}function SCe(e,t){return Tw.call(this,e,nd().remove(t))}function nK(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function rK(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Aw(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function TCe(e){var t=Aw(e),n=nK(e),r=rK(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function ACe(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,a,o;return i&&(o=Aw(e),a=t.changedTouches?t.changedTouches[0]:t,s=mw(a,i),s[0]-=o[0],s[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=kCe(e,n,s),t}function kCe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var o=r,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function s(a){if(!a)return n;Ue(a)&&(a=i(a));const o=n.slice();for(;a;)o[0]-=a.x||0,o[1]-=a.y||0,a=a.mark&&a.mark.group;return o}return{view:fi(e),item:fi(t||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]}}const hP="view",CCe="timer",FCe="window",OCe={trap:!1};function NCe(e){const t=ht({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{pe(r[s])&&(r[s]=Ya(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function iK(e,t,n,r){e._eventListeners.push({type:n,sources:Be(t),handler:r})}function DCe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function cy(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Pe(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function RCe(e,t,n){var r=this,i=new YE(n),s=function(c,u){r.runAsync(null,()=>{e===hP&&DCe(r,t)&&c.preventDefault(),i.receive(ACe(r,c,u))})},a;if(e===CCe)cy(r,"timer",t)&&r.timer(s,t);else if(e===hP)cy(r,"view",t)&&r.addEventListener(t,s,OCe);else if(e===FCe?cy(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&cy(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var o=0,l=a.length;o<l;++o)a[o].addEventListener(t,s);iK(r,a,t,s)}return i}function dP(e){return e.item}function pP(e){return e.item.mark.source}function gP(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function ICe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",dP),pP,gP(e)),this.on(this.events("view","pointerout",dP),pP,gP(t)),this}function $Ce(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,a,o,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(a=r[i],s=a.sources.length;--s>=0;)a.sources[s].removeEventListener(a.type,a.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,o=n[i].handler,this._handler.off(l,o);return this}function Fs(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const MCe="vega-bind",LCe="vega-bind-name",PCe="vega-bind-radio";function BCe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=EO(r.debounce,i.update))),(r.input==null&&r.element?UCe:HCe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function UCe(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),iK(r,t,i,s),e.set=a=>{t.value=a,t.dispatchEvent(zCe(i))}}function zCe(e){return typeof Event<"u"?new Event(e):{type:e}}function HCe(e,t,n,r){const i=r.signal(n.signal),s=Fs("div",{class:MCe}),a=n.input==="radio"?s:s.appendChild(Fs("label"));a.appendChild(Fs("span",{class:LCe},n.name||n.signal)),t.appendChild(s);let o=VCe;switch(n.input){case"checkbox":o=WCe;break;case"select":o=jCe;break;case"radio":o=GCe;break;case"range":o=qCe;break}o(e,a,n,i)}function VCe(e,t,n,r){const i=Fs("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function WCe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Fs("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=a=>s.checked=!!a||null}function jCe(e,t,n,r){const i=Fs("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,o)=>{const l={value:a};ub(a,r)&&(l.selected=!0),i.appendChild(Fs("option",l,(s[o]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let o=0,l=n.options.length;o<l;++o)if(ub(n.options[o],a)){i.selectedIndex=o;return}}}function GCe(e,t,n,r){const i=Fs("span",{class:PCe}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,o)=>{const l={type:"radio",name:n.signal,value:a};ub(a,r)&&(l.checked=!0);const c=Fs("input",l);c.addEventListener("change",()=>e.update(a));const u=Fs("label",{},(s[o]||a)+"");return u.prepend(c),i.appendChild(u),c}),e.set=a=>{const o=e.elements,l=o.length;for(let c=0;c<l;++c)ub(o[c].value,a)&&(o[c].checked=!0)}}function qCe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,a=n.step||yu(s,i,100),o=Fs("input",{type:"range",name:n.signal,min:s,max:i,step:a});o.value=r;const l=Fs("span",{},+r);t.appendChild(o),t.appendChild(l);const c=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",c),o.addEventListener("change",c),e.elements=[o],e.set=u=>{o.value=u,l.textContent=u}}function ub(e,t){return e===t||e+""==t+""}function sK(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,nK(e),rK(e),Aw(e),i,s).background(e.background())}function nR(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function XCe(e,t,n,r){const i=new r(e.loader(),nR(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Aw(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function YCe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=xw(r);e=n._el=e?lA(n,e,!0):null,yCe(n),s||n.error("Unrecognized renderer type: "+r);const a=s.handler||Mx,o=e?s.renderer:s.headless;return n._renderer=o?sK(n,n._renderer,e,o):null,n._handler=XCe(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=lA(n,t,!0):e.appendChild(Fs("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=lA(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{BCe(n,l.element||t,l)})),n}function lA(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Og=e=>+e||0,KCe=e=>({top:e,bottom:e,left:e,right:e});function mP(e){return Pe(e)?{top:Og(e.top),bottom:Og(e.bottom),left:Og(e.left),right:Og(e.right)}:KCe(Og(e))}async function rR(e,t,n,r){const i=xw(t),s=i&&i.headless;return s||fe("Unrecognized renderer type: "+t),await e.runAsync(),sK(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function JCe(e,t){e!==Jc.Canvas&&e!==Jc.SVG&&e!==Jc.PNG&&fe("Unrecognized image type: "+e);const n=await rR(this,e,t);return e===Jc.SVG?ZCe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function ZCe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function QCe(e,t){return(await rR(this,Jc.Canvas,e,t)).canvas()}async function eFe(e){return(await rR(this,Jc.SVG,e)).svg()}function tFe(e,t,n){return QY(e,Y0,L1,n).parse(t)}function nFe(e){var t=this._runtime.scales;return ze(t,e)||fe("Unrecognized scale or projection: "+e),t[e].value}var aK="width",oK="height",iR="padding",xP={skip:!0};function lK(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===iR?r.left+r.right:0)}function cK(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===iR?r.top+r.bottom:0)}function rFe(e){var t=e._signals,n=t[aK],r=t[oK],i=t[iR];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=lK(e,o.size),s()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=cK(e,o.size),s()},{size:r});const a=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function iFe(e,t,n,r,i,s){this.runAfter(a=>{let o=0;a._autosize=0,a.width()!==n&&(o=1,a.signal(aK,n,xP),a._resizeWidth.skip(!0)),a.height()!==r&&(o=1,a.signal(oK,r,xP),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),o&&a.run("enter"),s&&a.runAfter(l=>l.resize())},!1,1)}function sFe(e){return this._runtime.getState(e||{data:aFe,signals:oFe,recurse:!0})}function aFe(e,t){return t.modified&&pe(t.input.value)&&!e.startsWith("_:vega:_")}function oFe(e,t){return!(e==="parent"||t instanceof Y0.proxy)}function lFe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function cFe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Qfe(n,t))}function uFe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",fFe(r))}function fFe(e){return e==null?"":pe(e)?uK(e):Pe(e)&&!cu(e)?hFe(e):e+""}function hFe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(pe(n)?uK(n):fK(n))}).join(`
`)}function uK(e){return"["+e.map(fK).join(", ")+"]"}function fK(e){return pe(e)?"[…]":Pe(e)&&!cu(e)?"{…}":e}function dFe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function hK(e,t){const n=this;if(t=t||{},x0.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=ht({},e.locale,t.locale);n.locale(hG(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Jc.Canvas,n._scenegraph=new aX;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||uFe,n._redraw=!0,n._handler=new Mx().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=NCe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=tFe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:ht({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=lK(n,n._width),n._viewHeight=cK(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,rFe(n),_Ce(n),bCe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function uy(e,t){return ze(e._signals,t)?e._signals[t]:fe("Unrecognized signal name: "+Oe(t))}function dK(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function vP(e,t,n,r){let i=dK(n,r);return i||(i=nR(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function yP(e,t,n){const r=dK(t,n);return r&&t._targets.remove(r),e}Re(hK,x0,{async evaluate(e,t,n){if(await x0.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,TCe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&s_(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&tK(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=uy(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",mP(e)):mP(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(xw(e)||fe("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(x0.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(uy(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:iFe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=nR(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return vP(this,e,uy(this,e),t)},removeSignalListener(e,t){return yP(this,uy(this,e),t)},addDataListener(e,t){return vP(this,e,cb(this,e).values,t)},removeDataListener(e,t){return yP(this,cb(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=FF(this,null);this._globalCursor=!!e,t&&FF(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:cFe,events:RCe,finalize:$Ce,hover:ICe,data:ECe,change:Tw,insert:wCe,remove:SCe,scale:nFe,initialize:YCe,toImageURL:JCe,toCanvas:QCe,toSVG:eFe,getState:sFe,setState:lFe,_watchPixelRatio:dFe});const pFe="view",fb="[",hb="]",pK="{",gK="}",gFe=":",mK=",",mFe="@",xFe=">",vFe=/[[\]{}]/,yFe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let xK,vK;function Xu(e,t,n){return xK=t||pFe,vK=n||yFe,yK(e.trim()).map(OF)}function _Fe(e){return vK[e]}function Mm(e,t,n,r,i){const s=e.length;let a=0,o;for(;t<s;++t){if(o=e[t],!a&&o===n)return t;i&&i.indexOf(o)>=0?--a:r&&r.indexOf(o)>=0&&++a}return t}function yK(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Mm(e,i,mK,fb+pK,hb+gK),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function OF(e){return e[0]==="["?bFe(e):EFe(e)}function bFe(e){const t=e.length;let n=1,r;if(n=Mm(e,n,hb,fb,hb),n===t)throw"Empty between selector: "+e;if(r=yK(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==xFe)throw"Expected '>' after between selector: "+e;r=r.map(OF);const i=OF(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function EFe(e){const t={source:xK},n=[];let r=[0,0],i=0,s=0,a=e.length,o=0,l,c;if(e[a-1]===gK){if(o=e.lastIndexOf(pK),o>=0){try{r=wFe(e.substring(o+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),a=e.length}else throw"Unmatched right brace: "+e;o=0}if(!a)throw e;if(e[0]===mFe&&(i=++o),l=Mm(e,o,gFe),l<a&&(n.push(e.substring(s,l).trim()),s=o=++l),o=Mm(e,o,fb),o===a)n.push(e.substring(s,a).trim());else if(n.push(e.substring(s,o).trim()),c=[],s=++o,s===a)throw"Unmatched left bracket: "+e;for(;o<a;){if(o=Mm(e,o,hb),o===a)throw"Unmatched left bracket: "+e;if(c.push(e.substring(s,o).trim()),o<a-1&&e[++o]!==fb)throw"Expected left bracket: "+e;s=++o}if(!(a=n.length)||vFe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):_Fe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),c!=null&&(t.filter=c),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function wFe(e){const t=e.split(mK);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function SFe(e){return Pe(e)?e:{type:e||"pad"}}const Ng=e=>+e||0,TFe=e=>({top:e,bottom:e,left:e,right:e});function AFe(e){return Pe(e)?e.signal?e:{top:Ng(e.top),bottom:Ng(e.bottom),left:Ng(e.left),right:Ng(e.right)}:TFe(Ng(e))}const dr=e=>Pe(e)&&!pe(e)?ht({},e):{value:e};function _P(e,t,n,r){return n!=null?(Pe(n)&&!pe(n)||pe(n)&&n.length&&Pe(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Rr(e,t,n){for(const r in t)_P(e,r,t[r]);for(const r in n)_P(e,r,n[r],"update")}function Wp(e,t,n){for(const r in t)n&&ze(n,r)||(e[r]=ht(e[r]||{},t[r]));return e}function Wd(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const sR="mark",aR="frame",oR="scope",kFe="axis",CFe="axis-domain",FFe="axis-grid",OFe="axis-label",NFe="axis-tick",DFe="axis-title",RFe="legend",IFe="legend-band",$Fe="legend-entry",MFe="legend-gradient",_K="legend-label",LFe="legend-symbol",PFe="legend-title",BFe="title",UFe="title-text",zFe="title-subtitle";function HFe(e,t,n,r,i){const s={},a={};let o,l,c,u;l="lineBreak",t==="text"&&i[l]!=null&&!Wd(l,e)&&cA(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),u=n===aR?i.group:n===sR?ht({},i.mark,i[t]):null;for(l in u)c=Wd(l,e)||(l==="fill"||l==="stroke")&&(Wd("fill",e)||Wd("stroke",e)),c||cA(s,l,u[l]);Be(r).forEach(f=>{const h=i.style&&i.style[f];for(const d in h)Wd(d,e)||cA(s,d,h[d])}),e=ht({},e);for(l in s)u=s[l],u.signal?(o=o||{})[l]=u:a[l]=u;return e.enter=ht(a,e.enter),o&&(e.update=ht(o,e.update)),e}function cA(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const bK=e=>Ue(e)?Oe(e):e.signal?`(${e.signal})`:EK(e);function kw(e){if(e.gradient!=null)return WFe(e);let t=e.signal?`(${e.signal})`:e.color?VFe(e.color):e.field!=null?EK(e.field):e.value!==void 0?Oe(e.value):void 0;return e.scale!=null&&(t=jFe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${y_(e.exponent)})`),e.mult!=null&&(t+=`*${y_(e.mult)}`),e.offset!=null&&(t+=`+${y_(e.offset)}`),e.round&&(t=`round(${t})`),t}const fy=(e,t,n,r)=>`(${e}(${[t,n,r].map(kw).join(",")})+'')`;function VFe(e){return e.c?fy("hcl",e.h,e.c,e.l):e.h||e.s?fy("hsl",e.h,e.s,e.l):e.l||e.a?fy("lab",e.l,e.a,e.b):e.r||e.g||e.b?fy("rgb",e.r,e.g,e.b):null}function WFe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Oe(n));for(;t.length&&Nt(t)==null;)t.pop();return t.unshift(bK(e.gradient)),`gradient(${t.join(",")})`}function y_(e){return Pe(e)?"("+kw(e)+")":e}function EK(e){return wK(Pe(e)?e:{datum:e})}function wK(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):fe("Invalid field reference: "+Oe(e));return e.signal||(r=Ue(r)?rl(r).map(Oe).join("]["):wK(r)),t+"["+r+"]"}function jFe(e,t){const n=bK(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+y_(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function GFe(e){let t="";return e.forEach(n=>{const r=kw(n);t+=n.test?`(${n.test})?${r}:`:r}),Nt(t)===":"&&(t+="null"),t}function SK(e,t,n,r,i,s){const a={};s=s||{},s.encoders={$encode:a},e=HFe(e,t,n,r,i.config);for(const o in e)a[o]=qFe(e[o],t,s,i);return s}function qFe(e,t,n,r){const i={},s={};for(const a in e)e[a]!=null&&(i[a]=YFe(XFe(e[a]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function XFe(e){return pe(e)?GFe(e):kw(e)}function YFe(e,t,n,r){const i=Xo(e,t);return i.$fields.forEach(s=>r[s]=1),ht(n,i.$params),i.$expr}const KFe="outer",JFe=["value","update","init","react","bind"];function bP(e,t){fe(e+' for "outer" push: '+Oe(t))}function TK(e,t){const n=e.name;if(e.push===KFe)t.signals[n]||bP("No prior signal definition",n),JFe.forEach(r=>{e[r]!==void 0&&bP("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function NF(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Cw(e,t,n,r){return new NF(e,t,n,r)}function db(e,t){return Cw("operator",e,t)}function Ke(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function P1(e,t){return t?{$field:e,$name:t}:{$field:e}}const DF=P1("key");function EP(e,t){return{$compare:e,$order:t}}function ZFe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const QFe="ascending",e3e="descending";function t3e(e){return Pe(e)?(e.order===e3e?"-":"+")+Fw(e.op,e.field):""}function Fw(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const lR="scope",RF="view";function nr(e){return e&&e.signal}function n3e(e){return e&&e.expr}function __(e){if(nr(e))return!0;if(Pe(e)){for(const t in e)if(__(e[t]))return!0}return!1}function Ia(e,t){return e??t}function eh(e){return e&&e.signal||e}const wP="timer";function B1(e,t){return(e.merge?i3e:e.stream?s3e:e.type?a3e:fe("Invalid stream specification: "+Oe(e)))(e,t)}function r3e(e){return e===lR?RF:e||RF}function i3e(e,t){const n=e.merge.map(i=>B1(i,t)),r=cR({merge:n},e,t);return t.addStream(r).id}function s3e(e,t){const n=B1(e.stream,t),r=cR({stream:n},e,t);return t.addStream(r).id}function a3e(e,t){let n;e.type===wP?(n=t.event(wP,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(r3e(e.source),e.type);const r=cR({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function cR(e,t,n){let r=t.between;return r&&(r.length!==2&&fe('Stream "between" parameter must have 2 entries: '+Oe(t)),e.between=[B1(r[0],n),B1(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(o3e(t.marktype,t.markname,t.markrole)),t.source===lR&&r.push("inScope(event.item)"),r.length&&(e.filter=Xo("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function o3e(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const l3e={code:"_.$value",ast:{type:"Identifier",value:"value"}};function c3e(e,t,n){const r=e.encode,i={target:n};let s=e.events,a=e.update,o=[];s||fe("Signal update missing events specification."),Ue(s)&&(s=Xu(s,t.isSubscope()?lR:RF)),s=Be(s).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[f3e(o)]),s.length&&o.push(s.length>1?{merge:s}:s[0]),r!=null&&(a&&fe("Signal encode and update are mutually exclusive."),a="encode(item(),"+Oe(r)+")"),i.update=Ue(a)?Xo(a,t):a.expr!=null?Xo(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:l3e,$params:{$value:t.signalRef(a.signal)}}:fe("Invalid signal update specification."),e.force&&(i.options={force:!0}),o.forEach(l=>t.addUpdate(ht(u3e(l,t),i)))}function u3e(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):B1(e,t)}}function f3e(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function h3e(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?fe("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Xo(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>c3e(i,t,n.id))}const rn=e=>(t,n,r)=>Cw(e,n,t||void 0,r),AK=rn("aggregate"),d3e=rn("axisticks"),kK=rn("bound"),so=rn("collect"),SP=rn("compare"),p3e=rn("datajoin"),CK=rn("encode"),g3e=rn("expression"),m3e=rn("facet"),x3e=rn("field"),v3e=rn("key"),y3e=rn("legendentries"),_3e=rn("load"),b3e=rn("mark"),E3e=rn("multiextent"),w3e=rn("multivalues"),S3e=rn("overlap"),T3e=rn("params"),FK=rn("prefacet"),A3e=rn("projection"),k3e=rn("proxy"),C3e=rn("relay"),OK=rn("render"),F3e=rn("scale"),sd=rn("sieve"),O3e=rn("sortitems"),NK=rn("viewlayout"),N3e=rn("values");let D3e=0;const DK={min:"min",max:"max",count:"sum"};function R3e(e,t){const n=e.type||"linear";vq(n)||fe("Unrecognized scale type: "+Oe(n)),t.addScale(e.name,{type:n,domain:void 0})}function I3e(e,t){const n=t.getScale(e.name).params;let r;n.domain=RK(e.domain,e,t),e.range!=null&&(n.range=$K(e,t,n)),e.interpolate!=null&&W3e(e.interpolate,n),e.nice!=null&&(n.nice=V3e(e.nice,t)),e.bins!=null&&(n.bins=H3e(e.bins,t));for(r in e)ze(n,r)||r==="name"||(n[r]=sa(e[r],t))}function sa(e,t){return Pe(e)?e.signal?t.signalRef(e.signal):fe("Unsupported object: "+Oe(e)):e}function b_(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>sa(n,t))}function Ow(e){fe("Can not find data set: "+Oe(e))}function RK(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&fe("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(pe(e)?$3e:e.fields?L3e:M3e)(e,t,n)}function $3e(e,t,n){return e.map(r=>sa(r,n))}function M3e(e,t,n){const r=n.getData(e.data);return r||Ow(e.data),Z0(t.type)?r.valuesRef(n,e.field,IK(e.sort,!1)):bq(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function L3e(e,t,n){const r=e.data,i=e.fields.reduce((s,a)=>(a=Ue(a)?{data:r,field:a}:pe(a)||a.signal?P3e(a,n):a,s.push(a),s),[]);return(Z0(t.type)?B3e:bq(t.type)?U3e:z3e)(e,n,i)}function P3e(e,t){const n="_:vega:_"+D3e++,r=so({});if(pe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Oe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,sd({})]),{data:n,field:"data"}}function B3e(e,t,n){const r=IK(e.sort,!0);let i,s;const a=n.map(c=>{const u=t.getData(c.data);return u||Ow(c.data),u.countsRef(t,c.field,r)}),o={groupby:DF,pulse:a};r&&(i=r.op||"count",s=r.field?Fw(i,r.field):"count",o.ops=[DK[i]],o.fields=[t.fieldRef(s)],o.as=[s]),i=t.add(AK(o));const l=t.add(so({pulse:Ke(i)}));return s=t.add(N3e({field:DF,sort:t.sortRef(r),pulse:Ke(l)})),Ke(s)}function IK(e,t){return e&&(!e.field&&!e.op?Pe(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?fe("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!DK[e.op]&&fe("Multiple domain scales can not be sorted using "+e.op)),e}function U3e(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Ow(i.data),s.domainRef(t,i.field)});return Ke(t.add(w3e({values:r})))}function z3e(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Ow(i.data),s.extentRef(t,i.field)});return Ke(t.add(E3e({extents:r})))}function H3e(e,t){return e.signal||pe(e)?b_(e,t):t.objectProperty(e)}function V3e(e,t){return e.signal?t.signalRef(e.signal):Pe(e)?{interval:sa(e.interval),step:sa(e.step)}:sa(e)}function W3e(e,t){t.interpolate=sa(e.type||e),e.gamma!=null&&(t.interpolateGamma=sa(e.gamma))}function $K(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Ue(i)){if(r&&ze(r,i))return e=ht({},e,{range:r[i]}),$K(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Z0(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:fe("Unrecognized scale range value: "+Oe(i))}else if(i.scheme){n.scheme=pe(i.scheme)?b_(i.scheme,t):sa(i.scheme,t),i.extent&&(n.schemeExtent=b_(i.extent,t)),i.count&&(n.schemeCount=sa(i.count,t));return}else if(i.step){n.rangeStep=sa(i.step,t);return}else{if(Z0(e.type)&&!pe(i))return RK(i,e,t);pe(i)||fe("Unsupported range type: "+Oe(i))}return i.map(s=>(pe(s)?b_:sa)(s,t))}function j3e(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=IF(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=IF(n[i],i,t));t.addProjection(e.name,r)}function IF(e,t,n){return pe(e)?e.map(r=>IF(r,t,n)):Pe(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:fe("Unsupported parameter object: "+Oe(e)):e}const ao="top",jp="left",Gp="right",ku="bottom",MK="center",G3e="vertical",q3e="start",X3e="middle",Y3e="end",$F="index",uR="label",K3e="offset",rp="perc",J3e="perc2",ca="value",zx="guide-label",fR="guide-title",Z3e="group-title",Q3e="group-subtitle",TP="symbol",E_="gradient",MF="discrete",LF="size",e4e="shape",t4e="fill",n4e="stroke",r4e="strokeWidth",i4e="strokeDash",s4e="opacity",hR=[LF,e4e,t4e,n4e,r4e,i4e,s4e],Hx={name:1,style:1,interactive:1},Mt={value:0},ua={value:1},Nw="group",LK="rect",dR="rule",a4e="symbol",ad="text";function U1(e){return e.type=Nw,e.interactive=e.interactive||!1,e}function ps(e,t){const n=(r,i)=>Ia(e[r],Ia(t[r],i));return n.isVertical=r=>G3e===Ia(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ia(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ia(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ia(e.columns,Ia(t.columns,+n.isVertical(!0))),n}function PK(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function o4e(e,t,n){const r=t.config.style[n];return r&&r[e]}function Dw(e,t,n){return`item.anchor === '${q3e}' ? ${e} : item.anchor === '${Y3e}' ? ${t} : ${n}`}const pR=Dw(Oe(jp),Oe(Gp),Oe(MK));function l4e(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Pe(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function BK(e,t){return t?e?Pe(e)?Object.assign({},e,{offset:BK(e.offset,t)}):{value:e,offset:t}:t:e}function $s(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Wp(e.encode,t,Hx)):e.interactive=!1,e}function c4e(e,t,n,r){const i=ps(e,n),s=i.isVertical(),a=i.gradientThickness(),o=i.gradientLength();let l,c,u,f,h;s?(c=[0,1],u=[0,0],f=a,h=o):(c=[0,0],u=[1,0],f=o,h=a);const d={enter:l={opacity:Mt,x:Mt,y:Mt,width:dr(f),height:dr(h)},update:ht({},l,{opacity:ua,fill:{gradient:t,start:c,stop:u}}),exit:{opacity:Mt}};return Rr(d,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),$s({type:LK,role:MFe,encode:d},r)}function u4e(e,t,n,r,i){const s=ps(e,n),a=s.isVertical(),o=s.gradientThickness(),l=s.gradientLength();let c,u,f,h,d="";a?(c="y",f="y2",u="x",h="width",d="1-"):(c="x",f="x2",u="y",h="height");const p={opacity:Mt,fill:{scale:t,field:ca}};p[c]={signal:d+"datum."+rp,mult:l},p[u]=Mt,p[f]={signal:d+"datum."+J3e,mult:l},p[h]=dr(o);const g={enter:p,update:ht({},p,{opacity:ua}),exit:{opacity:Mt}};return Rr(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),$s({type:LK,role:IFe,key:ca,from:i,encode:g},r)}const f4e=`datum.${rp}<=0?"${jp}":datum.${rp}>=1?"${Gp}":"${MK}"`,h4e=`datum.${rp}<=0?"${ku}":datum.${rp}>=1?"${ao}":"${X3e}"`;function AP(e,t,n,r){const i=ps(e,t),s=i.isVertical(),a=dr(i.gradientThickness()),o=i.gradientLength();let l=i("labelOverlap"),c,u,f,h,d="";const p={enter:c={opacity:Mt},update:u={opacity:ua,text:{field:uR}},exit:{opacity:Mt}};return Rr(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ia(e.labelLimit,t.gradientLabelLimit)}),s?(c.align={value:"left"},c.baseline=u.baseline={signal:h4e},f="y",h="x",d="1-"):(c.align=u.align={signal:f4e},c.baseline={value:"top"},f="x",h="y"),c[f]=u[f]={signal:d+"datum."+rp,mult:o},c[h]=u[h]=a,a.offset=Ia(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+$F}:void 0,$s({type:ad,role:_K,style:zx,key:ca,from:r,encode:p,overlap:l},n)}function d4e(e,t,n,r,i){const s=ps(e,t),a=n.entries,o=!!(a&&a.interactive),l=a?a.name:void 0,c=s("clipHeight"),u=s("symbolOffset"),f={data:"value"},h=`(${i}) ? datum.${K3e} : datum.${LF}`,d=c?dr(c):{field:LF},p=`datum.${$F}`,g=`max(1, ${i})`;let m,x,y,v,_;d.mult=.5,m={enter:x={opacity:Mt,x:{signal:h,mult:.5,offset:u},y:d},update:y={opacity:ua,x:x.x,y:x.y},exit:{opacity:Mt}};let b=null,w=null;e.fill||(b=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),Rr(m,{fill:s("symbolFillColor",b),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),hR.forEach(A=>{e[A]&&(y[A]=x[A]={scale:e[A],field:ca})});const E=$s({type:a4e,role:LFe,key:ca,from:f,clip:c?!0:void 0,encode:m},n.symbols),T=dr(u);T.offset=s("labelOffset"),m={enter:x={opacity:Mt,x:{signal:h,offset:T},y:d},update:y={opacity:ua,text:{field:uR},x:x.x,y:x.y},exit:{opacity:Mt}},Rr(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const S=$s({type:ad,role:_K,style:zx,key:ca,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!c},width:Mt,height:c?dr(c):Mt,opacity:Mt},exit:{opacity:Mt},update:y={opacity:ua,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,y.row.signal=`${p}%${v}`,y.column.signal=`floor(${p} / ${v})`,_={field:["row",p]}):(y.row.signal=`floor(${p} / ${g})`,y.column.signal=`${p} % ${g}`,_={field:p}),y.column.signal=`(${i})?${y.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:$F}},U1({role:oR,from:r,encode:Wp(m,a,Hx),marks:[E,S],name:l,interactive:o,sort:_})}function p4e(e,t){const n=ps(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const gR='item.orient === "left"',mR='item.orient === "right"',Rw=`(${gR} || ${mR})`,g4e=`datum.vgrad && ${Rw}`,m4e=Dw('"top"','"bottom"','"middle"'),x4e=Dw('"right"','"left"','"center"'),v4e=`datum.vgrad && ${mR} ? (${x4e}) : (${Rw} && !(datum.vgrad && ${gR})) ? "left" : ${pR}`,y4e=`item._anchor || (${Rw} ? "middle" : "start")`,_4e=`${g4e} ? (${gR} ? -90 : 90) : 0`,b4e=`${Rw} ? (datum.vgrad ? (${mR} ? "bottom" : "top") : ${m4e}) : "top"`;function E4e(e,t,n,r){const i=ps(e,t),s={enter:{opacity:Mt},update:{opacity:ua,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Mt}};return Rr(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:y4e},angle:{signal:_4e},align:{signal:v4e},baseline:{signal:b4e},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),$s({type:ad,role:PFe,style:fR,from:r,encode:s},n)}function w4e(e,t){let n;return Pe(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+kP(e.path)+")":e.sphere&&(n="geoShape("+kP(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function kP(e){return Pe(e)&&e.signal?e.signal:Oe(e)}function UK(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Nw?oR:t||sR}function S4e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||UK(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function T4e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function xR(e,t){const n=TG(e.type);n||fe("Unrecognized transform type: "+Oe(e.type));const r=Cw(n.type.toLowerCase(),null,zK(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function zK(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const a=e.params[s];r[a.name]=A4e(a,t,n)}return r}function A4e(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return k4e(e,t,n);if(i===void 0){e.required&&fe("Missing required "+Oe(t.type)+" parameter: "+Oe(e.name));return}else{if(r==="param")return C4e(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!nr(i)?i.map(s=>CP(e,s,n)):CP(e,i,n)}function CP(e,t,n){const r=e.type;if(nr(t))return OP(r)?fe("Expression references can not be signals."):uA(r)?n.fieldRef(t):NP(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||uA(r);return i&&F4e(t)?n.exprRef(t.expr,t.as):i&&O4e(t)?P1(t.field,t.as):OP(r)?Xo(t,n):N4e(r)?Ke(n.getData(t).values):uA(r)?P1(t):NP(r)?n.compareRef(t):t}}function k4e(e,t,n){return Ue(t.from)||fe('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function C4e(e,t,n){const r=t[e.name];return e.array?(pe(r)||fe("Expected an array of sub-parameters. Instead: "+Oe(r)),r.map(i=>FP(e,i,n))):FP(e,r,n)}function FP(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const o in i.key)if(i.key[o]!==t[o]){i=null;break}if(i)break}i||fe("Unsupported parameter: "+Oe(t));const s=ht(zK(i,t,n),i.key);return Ke(n.add(T3e(s)))}const F4e=e=>e&&e.expr,O4e=e=>e&&e.field,N4e=e=>e==="data",OP=e=>e==="expr",uA=e=>e==="field",NP=e=>e==="compare";function D4e(e,t,n){let r,i,s,a,o;return e?(r=e.facet)&&(t||fe("Only group marks can be faceted."),r.field!=null?a=o=w_(r,n):(e.data?o=Ke(n.getData(e.data).aggregate):(s=xR(ht({type:"aggregate",groupby:Be(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=w_(r,n),a=o=Ke(n.add(s))),i=n.keyRef(r.groupby,!0))):a=Ke(n.add(so(null,[{}]))),a||(a=w_(e,n)),{key:i,pulse:a,parent:o}}function w_(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ke(t.getData(e.data).output)}function Fh(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Fh.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],a=null,o=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Ke(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(a=t[o]);return new Fh(e,s,i,r,a)};function HK(e){return Ue(e)?e:null}function DP(e,t,n){const r=Fw(n.op,n.field);let i;if(t.ops){for(let s=0,a=t.as.length;s<a;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Dg(e,t,n,r,i,s,a){const o=t[n]||(t[n]={}),l=t3e(s);let c=HK(i),u,f;if(c!=null&&(e=t.scope,c=c+(l?"|"+l:""),u=o[c]),!u){const h=s?{field:DF,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Ke(t.output)};l&&(h.sort=e.sortRef(s)),f=e.add(Cw(r,void 0,h)),a&&(t.index[i]=f),u=Ke(f),c!=null&&(o[c]=u)}return u}Fh.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=HK(t);let a,o,l;return s!=null&&(e=r.scope,a=i[s]),a?n&&n.field&&DP(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ke(r.output)},n&&n.field&&DP(e,l,n),o=e.add(AK(l)),a=e.add(so({pulse:Ke(o)})),a={agg:o,ref:Ke(a)},s!=null&&(i[s]=a)),a.ref},tuplesRef(){return Ke(this.values)},extentRef(e,t){return Dg(e,this,"extent","extent",t,!1)},domainRef(e,t){return Dg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Dg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Dg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Dg(e,this,"indata","tupleindex",t,!0,!0)}};function R4e(e,t,n){const r=e.from.facet,i=r.name,s=w_(r,t);let a;r.name||fe("Facet must have a name: "+Oe(r)),r.data||fe("Facet must reference a data set: "+Oe(r)),r.field?a=t.add(FK({field:t.fieldRef(r.field),pulse:s})):r.groupby?a=t.add(m3e({key:t.keyRef(r.groupby),group:Ke(t.proxy(n.parent)),pulse:s})):fe("Facet must specify groupby or field: "+Oe(r));const o=t.fork(),l=o.add(so()),c=o.add(sd({pulse:Ke(l)}));o.addData(i,new Fh(o,l,l,c)),o.addSignal("parent",null),a.params.subflow={$subflow:o.parse(e).toRuntime()}}function I4e(e,t,n){const r=t.add(FK({pulse:n.pulse})),i=t.fork();i.add(sd()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function VK(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,a=e.modify,o=e.values,l=t.add(db()),c="if("+e.trigger+',modify("'+n+'",'+[i,r,s,a,o].map(f=>f??"null").join(",")+"),0)",u=Xo(c,t);l.update=u.$expr,l.params=u.$params}function Iw(e,t){const n=UK(e),r=e.type===Nw,i=e.from&&e.from.facet,s=e.overlap;let a=e.layout||n===oR||n===aR,o,l,c,u,f,h,d;const p=n===sR||a||i,g=D4e(e.from,r,t);l=t.add(p3e({key:g.key||(e.key?P1(e.key):void 0),pulse:g.pulse,clean:!r}));const m=Ke(l);l=c=t.add(so({pulse:m})),l=t.add(b3e({markdef:S4e(e),interactive:T4e(e.interactive,t),clip:w4e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ke(l)}));const x=Ke(l);l=u=t.add(CK(SK(e.encode,e.type,n,e.style,t,{mod:!1,pulse:x}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const E=xR(w,t),T=E.metadata;(T.generates||T.changes)&&fe("Mark transforms should not generate new data."),T.nomod||(u.params.mod=!0),E.params.pulse=Ke(l),t.add(l=E)}),e.sort&&(l=t.add(O3e({sort:t.compareRef(e.sort),pulse:Ke(l)})));const y=Ke(l);(i||a)&&(a=t.add(NK({layout:t.objectProperty(e.layout),legends:t.legends,mark:x,pulse:y})),h=Ke(a));const v=t.add(kK({mark:x,pulse:h||y}));d=Ke(v),r&&(p&&(o=t.operators,o.pop(),a&&o.pop()),t.pushState(y,h||d,m),i?R4e(e,t,g):p?I4e(e,t,g):t.parse(e),t.popState(),p&&(a&&o.push(a),o.push(v))),s&&(d=$4e(s,d,t));const _=t.add(OK({pulse:d})),b=t.add(sd({pulse:Ke(_)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Fh(t,c,_,b)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&fe("Marks only support modify triggers."),VK(w,t,f)}))}function $4e(e,t,n){const r=e.method,i=e.bound,s=e.separation,a={separation:nr(s)?n.signalRef(s.signal):s,method:nr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const o=i.tolerance;a.boundTolerance=nr(o)?n.signalRef(o.signal):+o,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Ke(n.add(S3e(a)))}function M4e(e,t){const n=t.config.legend,r=e.encode||{},i=ps(e,n),s=r.legend||{},a=s.name||void 0,o=s.interactive,l=s.style,c={};let u=0,f,h,d;hR.forEach(v=>e[v]?(c[v]=e[v],u=u||e[v]):0),u||fe("Missing valid scale for legend.");const p=L4e(e,t.scaleType(u)),g={title:e.title!=null,scales:c,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=Ke(t.add(so(null,[g]))),x={enter:{x:{value:0},y:{value:0}}},y=Ke(t.add(y3e(h={type:p,scale:t.scaleRef(u),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===E_?(d=[c4e(e,u,n,r.gradient),AP(e,n,r.labels,y)],h.count=h.count||t.signalRef(`max(2,2*floor((${eh(i.gradientLength())})/100))`)):p===MF?d=[u4e(e,u,n,r.gradient,y),AP(e,n,r.labels,y)]:(f=p4e(e,n),d=[d4e(e,n,r,y,eh(f.columns))],h.size=U4e(e,t,d[0].marks)),d=[U1({role:$Fe,from:m,encode:x,marks:d,layout:f,interactive:o})],g.title&&d.push(E4e(e,n,r.title,m)),Iw(U1({role:RFe,from:m,encode:Wp(B4e(i,e,n),s,Hx),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:o,style:l}),t)}function L4e(e,t){let n=e.type||TP;return!e.type&&P4e(e)===1&&(e.fill||e.stroke)&&(n=ON(t)?E_:JC(t)?MF:TP),n!==E_?n:JC(t)?MF:E_}function P4e(e){return hR.reduce((t,n)=>t+(e[n]?1:0),0)}function B4e(e,t,n){const r={enter:{},update:{}};return Rr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function U4e(e,t,n){const r=eh(RP("size",e,n)),i=eh(RP("strokeWidth",e,n)),s=eh(z4e(n[1].encode,t,zx));return Xo(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function RP(e,t,n){return t[e]?`scale("${t[e]}",datum)`:PK(e,n[0].encode)}function z4e(e,t,n){return PK("fontSize",e)||o4e("fontSize",t,n)}const H4e=`item.orient==="${jp}"?-90:item.orient==="${Gp}"?90:0`;function V4e(e,t){e=Ue(e)?{text:e}:e;const n=ps(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,a=i.interactive,o=i.style,l=[],c={},u=Ke(t.add(so(null,[c])));return l.push(G4e(e,n,W4e(e),u)),e.subtitle&&l.push(q4e(e,n,r.subtitle,u)),Iw(U1({role:BFe,from:u,encode:j4e(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:a,style:o}),t)}function W4e(e){const t=e.encode;return t&&t.title||ht({name:e.name,interactive:e.interactive,style:e.style},t)}function j4e(e,t){const n={enter:{},update:{}};return Rr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:pR},angle:{signal:H4e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Wp(n,t,Hx)}function G4e(e,t,n,r){const i={value:0},s=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Rr(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),$s({type:ad,role:UFe,style:Z3e,from:r,encode:a},n)}function q4e(e,t,n,r){const i={value:0},s=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Rr(a,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),$s({type:ad,role:zFe,style:Q3e,from:r,encode:a},n)}function X4e(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(xR(r,t))}),e.on&&e.on.forEach(r=>{VK(r,t,e.name)}),t.addDataPipeline(e.name,Y4e(e,t,n))}function Y4e(e,t,n){const r=[];let i=null,s=!1,a=!1,o,l,c,u,f;for(e.values?nr(e.values)||__(e.format)?(r.push(IP(t,e)),r.push(i=gf())):r.push(i=gf({$ingest:e.values,$format:e.format})):e.url?__(e.url)||__(e.format)?(r.push(IP(t,e)),r.push(i=gf())):r.push(i=gf({$request:e.url,$format:e.format})):e.source&&(i=o=Be(e.source).map(h=>Ke(t.getData(h).output)),r.push(null)),l=0,c=n.length;l<c;++l)u=n[l],f=u.metadata,!i&&!f.source&&r.push(i=gf()),r.push(u),f.generates&&(a=!0),f.modifies&&!a&&(s=!0),f.source?i=u:f.changes&&(i=null);return o&&(c=o.length-1,r[0]=C3e({derive:s,pulse:c?o:o[0]}),(s||c)&&r.splice(1,0,gf())),i||r.push(gf()),r.push(sd({})),r}function gf(e){const t=so({},e);return t.metadata={source:!0},t}function IP(e,t){return _3e({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const WK=e=>e===ku||e===ao,$w=(e,t,n)=>nr(e)?Q4e(e.signal,t,n):e===jp||e===ao?t:n,pr=(e,t,n)=>nr(e)?J4e(e.signal,t,n):WK(e)?t:n,qa=(e,t,n)=>nr(e)?Z4e(e.signal,t,n):WK(e)?n:t,jK=(e,t,n)=>nr(e)?eOe(e.signal,t,n):e===ao?{value:t}:{value:n},K4e=(e,t,n)=>nr(e)?tOe(e.signal,t,n):e===Gp?{value:t}:{value:n},J4e=(e,t,n)=>GK(`${e} === '${ao}' || ${e} === '${ku}'`,t,n),Z4e=(e,t,n)=>GK(`${e} !== '${ao}' && ${e} !== '${ku}'`,t,n),Q4e=(e,t,n)=>vR(`${e} === '${jp}' || ${e} === '${ao}'`,t,n),eOe=(e,t,n)=>vR(`${e} === '${ao}'`,t,n),tOe=(e,t,n)=>vR(`${e} === '${Gp}'`,t,n),GK=(e,t,n)=>(t=t!=null?dr(t):t,n=n!=null?dr(n):n,$P(t)&&$P(n)?(t=t?t.signal||Oe(t.value):null,n=n?n.signal||Oe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[ht({test:e},t)].concat(n||[])),$P=e=>e==null||Object.keys(e).length===1,vR=(e,t,n)=>({signal:`${e} ? (${r0(t)}) : (${r0(n)})`}),nOe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${jp}' ? (${r0(r)}) : `:"")+(n!=null?`${e} === '${ku}' ? (${r0(n)}) : `:"")+(i!=null?`${e} === '${Gp}' ? (${r0(i)}) : `:"")+(t!=null?`${e} === '${ao}' ? (${r0(t)}) : `:"")+"(null)"}),r0=e=>nr(e)?e.signal:e==null?null:Oe(e),rOe=(e,t)=>t===0?0:nr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},v0=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Id(e,t,n,r){let i;if(t&&ze(t,e))return t[e];if(ze(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[fR][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[zx][i]}return null}function MP(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function iOe(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,o,l,c;if(nr(a)){const f=MP([n.axisX,n.axisY]),h=MP([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(c of f)o[c]=pr(a,Id(c,n.axisX,i,r),Id(c,n.axisY,i,r));l={};for(c of h)l[c]=nOe(a.signal,Id(c,n.axisTop,i,r),Id(c,n.axisBottom,i,r),Id(c,n.axisLeft,i,r),Id(c,n.axisRight,i,r))}else o=a===ao||a===ku?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return o||l||s?ht({},i,o,l,s):i}function sOe(e,t,n,r){const i=ps(e,t),s=e.orient;let a,o;const l={enter:a={opacity:Mt},update:o={opacity:ua},exit:{opacity:Mt}};Rr(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const c=LP(e,0),u=LP(e,1);return a.x=o.x=pr(s,c,Mt),a.x2=o.x2=pr(s,u),a.y=o.y=qa(s,c,Mt),a.y2=o.y2=qa(s,u),$s({type:dR,role:CFe,from:r,encode:l},n)}function LP(e,t){return{scale:e.scale,range:t}}function aOe(e,t,n,r,i){const s=ps(e,t),a=e.orient,o=e.gridScale,l=$w(a,1,-1),c=oOe(e.offset,l);let u,f,h;const d={enter:u={opacity:Mt},update:h={opacity:ua},exit:f={opacity:Mt}};Rr(d,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:ca,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=pr(a,{signal:"height"},{signal:"width"}),m=o?{scale:o,range:0,mult:l,offset:c}:{value:0,offset:c},x=o?{scale:o,range:1,mult:l,offset:c}:ht(g,{mult:l,offset:c});return u.x=h.x=pr(a,p,m),u.y=h.y=qa(a,p,m),u.x2=h.x2=qa(a,x),u.y2=h.y2=pr(a,x),f.x=pr(a,p),f.y=qa(a,p),$s({type:dR,role:FFe,key:ca,from:r,encode:d},n)}function oOe(e,t){if(t!==1)if(!Pe(e))e=nr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=ht({},e);for(;n.mult!=null;)if(Pe(n.mult))n=n.mult=ht({},n.mult);else return n.mult=nr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function lOe(e,t,n,r,i,s){const a=ps(e,t),o=e.orient,l=$w(o,-1,1);let c,u,f;const h={enter:c={opacity:Mt},update:f={opacity:ua},exit:u={opacity:Mt}};Rr(h,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const d=dr(i);d.mult=l;const p={scale:e.scale,field:ca,band:s.band,extra:s.extra,offset:s.offset,round:a("tickRound")};return f.y=c.y=pr(o,Mt,p),f.y2=c.y2=pr(o,d),u.x=pr(o,p),f.x=c.x=qa(o,Mt,p),f.x2=c.x2=qa(o,d),u.y=qa(o,p),$s({type:dR,role:NFe,key:ca,from:r,encode:h},n)}function fA(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function cOe(e,t,n,r,i,s){const a=ps(e,t),o=e.orient,l=e.scale,c=$w(o,-1,1),u=eh(a("labelFlush")),f=eh(a("labelFlushOffset")),h=a("labelAlign"),d=a("labelBaseline");let p=u===0||!!u,g;const m=dr(i);m.mult=c,m.offset=dr(a("labelPadding")||0),m.offset.mult=c;const x={scale:l,field:ca,band:.5,offset:BK(s.offset,a("labelOffset"))},y=pr(o,p?fA(l,u,'"left"','"right"','"center"'):{value:"center"},K4e(o,"left","right")),v=pr(o,jK(o,"bottom","top"),p?fA(l,u,'"top"','"bottom"','"middle"'):{value:"middle"}),_=fA(l,u,`-(${f})`,f,0);p=p&&f;const b={opacity:Mt,x:pr(o,x,m),y:qa(o,x,m)},w={enter:b,update:g={opacity:ua,text:{field:uR},x:b.x,y:b.y,align:y,baseline:v},exit:{opacity:Mt,x:b.x,y:b.y}};Rr(w,{dx:!h&&p?pr(o,_):null,dy:!d&&p?qa(o,_):null}),Rr(w,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:h,baseline:d});const E=a("labelBound");let T=a("labelOverlap");return T=T||E?{separation:a("labelSeparation"),method:T,order:"datum.index",bound:E?{scale:l,orient:o,tolerance:E}:null}:void 0,g.align!==y&&(g.align=v0(g.align,y)),g.baseline!==v&&(g.baseline=v0(g.baseline,v)),$s({type:ad,role:OFe,style:zx,key:ca,from:r,encode:w,overlap:T},n)}function uOe(e,t,n,r){const i=ps(e,t),s=e.orient,a=$w(s,-1,1);let o,l;const c={enter:o={opacity:Mt,anchor:dr(i("titleAnchor",null)),align:{signal:pR}},update:l=ht({},o,{opacity:ua,text:dr(e.title)}),exit:{opacity:Mt}},u={signal:`lerp(range("${e.scale}"), ${Dw(0,1,.5)})`};return l.x=pr(s,u),l.y=qa(s,u),o.angle=pr(s,Mt,rOe(a,90)),o.baseline=pr(s,jK(s,ku,ao),{value:ku}),l.angle=o.angle,l.baseline=o.baseline,Rr(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),fOe(i,s,c,n),c.update.align=v0(c.update.align,o.align),c.update.angle=v0(c.update.angle,o.angle),c.update.baseline=v0(c.update.baseline,o.baseline),$s({type:ad,role:DFe,style:fR,from:r,encode:c},n)}function fOe(e,t,n,r){const i=(o,l)=>o!=null?(n.update[l]=v0(dr(o),n.update[l]),!1):!Wd(l,r),s=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===s?dr(a):pr(t,dr(a),dr(s))}function hOe(e,t){const n=iOe(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,a=i.interactive,o=i.style,l=ps(e,n),c=l4e(l),u={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=Ke(t.add(so({},[u]))),h=Ke(t.add(d3e({scale:t.scaleRef(e.scale),extra:t.property(c.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),d=[];let p;return u.grid&&d.push(aOe(e,n,r.grid,h,c)),u.ticks&&(p=l("tickSize"),d.push(lOe(e,n,r.ticks,h,p,c))),u.labels&&(p=u.ticks?p:0,d.push(cOe(e,n,r.labels,h,p,c))),u.domain&&d.push(sOe(e,n,r.domain,f)),u.title&&d.push(uOe(e,n,r.title,f)),Iw(U1({role:kFe,from:f,encode:Wp(dOe(l,e),i,Hx),marks:d,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:a,style:o}),t)}function dOe(e,t){const n={enter:{},update:{}};return Rr(n,{orient:e("orient"),offset:e("offset")||0,position:Ia(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function qK(e,t,n){const r=Be(e.signals),i=Be(e.scales);return n||r.forEach(s=>TK(s,t)),Be(e.projections).forEach(s=>j3e(s,t)),i.forEach(s=>R3e(s,t)),Be(e.data).forEach(s=>X4e(s,t)),i.forEach(s=>I3e(s,t)),(n||r).forEach(s=>h3e(s,t)),Be(e.axes).forEach(s=>hOe(s,t)),Be(e.marks).forEach(s=>Iw(s,t)),Be(e.legends).forEach(s=>M4e(s,t)),e.title&&V4e(e.title,t),t.parseLambdas(),t}const pOe=e=>Wp({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function gOe(e,t){const n=t.config,r=Ke(t.root=t.add(db())),i=mOe(e,n);i.forEach(c=>TK(c,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(so()),a=t.add(CK(SK(pOe(e.encode),Nw,aR,e.style,t,{pulse:Ke(s)}))),o=t.add(NK({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Ke(a)}));t.operators.pop(),t.pushState(Ke(a),Ke(o),null),qK(e,t,i),t.operators.push(o);let l=t.add(kK({mark:r,pulse:Ke(o)}));return l=t.add(OK({pulse:Ke(l)})),l=t.add(sd({pulse:Ke(l)})),t.addData("root",new Fh(t,s,s,l)),t}function Rg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function mOe(e,t){const n=a=>Ia(e[a],t[a]),r=[Rg("background",n("background")),Rg("autosize",SFe(n("autosize"))),Rg("padding",AFe(n("padding"))),Rg("width",n("width")||0),Rg("height",n("height")||0)],i=r.reduce((a,o)=>(a[o.name]=o,a),{}),s={};return Be(e.signals).forEach(a=>{ze(i,a.name)?a=ht(i[a.name],a):r.push(a),s[a.name]=a}),Be(t.signals).forEach(a=>{!ze(s,a.name)&&!ze(i,a.name)&&r.push(a)}),r}function XK(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function PP(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}XK.prototype=PP.prototype={parse(e){return qK(e,this)},fork(){return new PP(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof NF?Ke(e):e;return this.add(k3e({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let a,o;r&&(a=r.data||(r.data={}),o=a[i]||(a[i]=[]),o.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Ke(this.add(sd({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ke(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Nt(this._parent)},encode(){return Nt(this._encode)},lookup(){return Nt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ue(e))return P1(e,t);e.signal||fe("Unsupported field reference: "+Oe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Ke(this.add(x3e(i)))}return r},compareRef(e){let t=!1;const n=s=>nr(s)?(t=!0,this.signalRef(s.signal)):n3e(s)?(t=!0,this.exprRef(s.expr)):s,r=Be(e.field).map(n),i=Be(e.order).map(n);return t?Ke(this.add(SP({fields:r,orders:i}))):EP(r,i)},keyRef(e,t){let n=!1;const r=s=>nr(s)?(n=!0,Ke(i[s.signal])):s,i=this.signals;return e=Be(e).map(r),n?Ke(this.add(v3e({fields:e,flat:t}))):ZFe(e,t)},sortRef(e){if(!e)return e;const t=Fw(e.op,e.field),n=e.order||QFe;return n.signal?Ke(this.add(SP({fields:t,orders:this.signalRef(n.signal)}))):EP(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ze(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&fe("Duplicate signal name: "+Oe(e));const n=t instanceof NF?t:this.add(db(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||fe("Unrecognized signal name: "+Oe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ke(this.signals[e]):(ze(this.lambdas,e)||(this.lambdas[e]=this.add(db(null))),Ke(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Xo(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Pe(e)?e:this.signalRef(e.signal||yR(e))},exprRef(e,t){const n={expr:Xo(e,this)};return t&&(n.expr.$name=t),Ke(this.add(g3e(n)))},addBinding(e,t){this.bindings||fe("Nested signals do not support binding: "+Oe(e)),this.bindings.push(ht({signal:e},t))},addScaleProj(e,t){ze(this.scales,e)&&fe("Duplicate scale or projection name: "+Oe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,F3e(t))},addProjection(e,t){this.addScaleProj(e,A3e(t))},getScale(e){return this.scales[e]||fe("Unrecognized scale name: "+Oe(e)),this.scales[e]},scaleRef(e){return Ke(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ze(this.data,e)&&fe("Duplicate data set name: "+Oe(e)),this.data[e]=t},getData(e){return this.data[e]||fe("Undefined data set name: "+Oe(e)),this.data[e]},addDataPipeline(e,t){return ze(this.data,e)&&fe("Duplicate data set name: "+Oe(e)),this.addData(e,Fh.fromEntries(this,t))}};function yR(e){return(pe(e)?xOe:vOe)(e)}function xOe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Pe(i)?i.signal||yR(i):Oe(i))}return n+"]"}function vOe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Oe(r)+":"+(Pe(i)?i.signal||yR(i):Oe(i));return t+"}"}function yOe(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function _Oe(e,t,n){return Pe(e)||fe("Input Vega specification must be an object."),t=$p(yOe(),t,e.config),gOe(e,new XK(t,n)).toRuntime()}var bOe="5.31.0";ht(Y0,d_e,twe,Rwe,uSe,xSe,WSe,wSe,GSe,KSe,aTe,dTe);const EOe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:jn,CanvasHandler:Mx,CanvasRenderer:tb,DATE:os,DAY:Yr,DAYOFYEAR:qo,Dataflow:x0,Debug:yj,Error:gO,EventStream:YE,Gradient:Mq,GroupItem:cw,HOURS:Ds,Handler:eD,HybridHandler:kX,HybridRenderer:lF,Info:vj,Item:lw,MILLISECONDS:Ka,MINUTES:Rs,MONTH:ai,Marks:Is,MultiPulse:$O,None:xj,Operator:sn,Parameters:XE,Pulse:uu,QUARTER:as,RenderType:Jc,Renderer:$x,ResourceLoader:Vq,SECONDS:ma,SVGHandler:pX,SVGRenderer:aD,SVGStringRenderer:AX,Scenegraph:aX,TIME_UNITS:kO,Transform:oe,View:hK,WEEK:er,Warn:mO,YEAR:Nr,accessor:ds,accessorFields:si,accessorName:Fn,array:Be,ascending:Lp,bandwidthNRD:BO,bin:CG,bootstrapCI:FG,boundClip:LX,boundContext:Nx,boundItem:rF,boundMark:nX,boundStroke:hc,changeset:nd,clampRange:Oj,codegenExpression:BY,compare:bO,constant:fi,cumulativeLogNormal:jO,cumulativeNormal:JE,cumulativeUniform:YO,dayofyear:Hj,debounce:EO,defaultLocale:OO,definition:TG,densityLogNormal:WO,densityNormal:UO,densityUniform:XO,domChild:Jn,domClear:Qs,domCreate:Yc,domFind:QN,dotbin:OG,error:fe,expressionFunction:Pn,extend:ht,extent:Go,extentIndex:Nj,falsy:Nc,fastmap:Pp,field:pa,flush:Dj,font:pw,fontFamily:Ix,fontSize:il,format:i_,formatLocale:H2,formats:RO,hasOwnProperty:ze,id:yx,identity:ui,inferType:pG,inferTypes:gG,ingest:Wt,inherits:Re,inrange:e0,interpolate:NN,interpolateColors:sw,interpolateRange:Eq,intersect:RX,intersectBoxLine:t0,intersectPath:PN,intersectPoint:BN,intersectRule:jq,isArray:pe,isBoolean:Gu,isDate:cu,isFunction:pt,isIterable:Rj,isNumber:Ut,isObject:Pe,isRegExp:Ij,isString:Ue,isTuple:GE,key:wO,lerp:$j,lineHeight:Su,loader:WE,locale:hG,logger:xO,lruCache:Mj,markup:sD,merge:Lj,mergeConfig:$p,multiLineOffset:KN,one:Ip,pad:Pj,panLinear:Sj,panLog:Tj,panPow:Aj,panSymlog:kj,parse:_Oe,parseExpression:qD,parseSelector:Xu,path:TE,pathCurves:$N,pathEqual:PX,pathParse:Q0,pathRectangle:Bq,pathRender:O1,pathSymbols:Pq,pathTrail:Uq,peek:Nt,point:mw,projection:vD,quantileLogNormal:GO,quantileNormal:ZE,quantileUniform:KO,quantiles:LO,quantizeInterpolator:wq,quarter:Cj,quartiles:PO,get random(){return xa},randomInteger:xye,randomKDE:HO,randomLCG:mye,randomLogNormal:DG,randomMixture:RG,randomNormal:zO,randomUniform:IG,read:vG,regressionConstant:JO,regressionExp:MG,regressionLinear:ZO,regressionLoess:BG,regressionLog:$G,regressionPoly:PG,regressionPow:LG,regressionQuad:QO,renderModule:xw,repeat:em,resetDefaultLocale:dve,resetSVGClipId:Hq,resetSVGDefIds:yEe,responseType:xG,runtimeContext:QY,sampleCurve:ew,sampleLogNormal:VO,sampleNormal:KE,sampleUniform:qO,scale:zt,sceneEqual:oD,sceneFromJSON:iX,scenePickVisit:q2,sceneToJSON:rX,sceneVisit:Ja,sceneZOrder:UN,scheme:aw,serializeXML:EX,setHybridRendererOptions:gEe,setRandom:pye,span:_x,splitAccessPath:rl,stringValue:Oe,textMetrics:Cs,timeBin:sG,timeFloor:Yj,timeFormatLocale:k1,timeInterval:Bp,timeOffset:Zj,timeSequence:tG,timeUnitSpecifier:zj,timeUnits:CO,toBoolean:SO,toDate:TO,toNumber:ti,toSet:Ya,toString:AO,transform:AG,transforms:Y0,truncate:Bj,truthy:ga,tupleid:Je,typeParsers:XC,utcFloor:Kj,utcInterval:Up,utcOffset:Qj,utcSequence:nG,utcdayofyear:jj,utcquarter:Fj,utcweek:Gj,version:bOe,visitArray:Uc,week:Vj,writeConfig:Mp,zero:Wc,zoomLinear:vO,zoomLog:yO,zoomPow:z2,zoomSymlog:_O},Symbol.toStringTag,{value:"Module"})),wOe=/("(?:[^\\"]|\\.)*")|[:,]/g;function hA(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return function s(a,o,l){a&&typeof a.toJSON=="function"&&(a=a.toJSON());const c=JSON.stringify(a,i);if(c===void 0)return c;const u=r-o.length-l;if(c.length<=u){const f=c.replace(wOe,(h,d)=>d||`${h} `);if(f.length<=u)return f}if(i!=null&&(a=JSON.parse(c),i=void 0),typeof a=="object"&&a!==null){const f=o+n,h=[];let d=0,p,g;if(Array.isArray(a)){p="[",g="]";const{length:m}=a;for(;d<m;d++)h.push(s(a[d],f,d===m-1?0:1)||"null")}else{p="{",g="}";const m=Object.keys(a),{length:x}=m;for(;d<x;d++){const y=m[d],v=`${JSON.stringify(y)}: `,_=s(a[y],f,v.length+(d===x-1?0:1));_!==void 0&&h.push(v+_)}}if(h.length>0)return[p,n+h.join(`,
${f}`),g].join(`
${o}`)}return c}(e,"",0)}function SOe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var TOe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},AOe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},kOe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const COe=Array.prototype.slice,mf=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,COe.call(t,1))},FOe=(e,t,n,r,i,s,a)=>new Date(e,t||0,n??1,r||0,i||0,s||0,a||0);var OOe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:FOe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return mf("join",arguments)},indexof:function(){return mf("indexOf",arguments)},lastindexof:function(){return mf("lastIndexOf",arguments)},slice:function(){return mf("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Lp),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return mf("substring",arguments,String)},split:function(){return mf("split",arguments,String)},replace:function(){return mf("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const NOe=["view","item","group","xy","x","y"],PF=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&PF.add(setImmediate);const DOe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:TOe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),PF.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||OOe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>AOe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>kOe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,PF.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Ig(e,t,n,r,i,s){const a=o=>DOe[o.type](a,o);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=r,a.event=i,a.item=s,NOe.forEach(o=>a.fn[o]=function(){return i.vega[o](...arguments)}),a(e)}var ROe={operator(e,t){const n=t.ast,r=e.functions;return i=>Ig(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>Ig(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Ig(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const a=s.item&&s.item.datum;return Ig(n,r,i,a,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(a,o)=>{const l=a.datum;let c=0,u;for(const f in r)u=Ig(r[f].ast,i,o,l,void 0,a),a[f]!==u&&(a[f]=u,c=1);return n!=="rule"&&SOe(a,r,s),c}}};const IOe="5.23.0",$Oe={version:IOe};function _R(e){return Te(e,"or")}function bR(e){return Te(e,"and")}function ER(e){return Te(e,"not")}function S_(e,t){if(ER(e))S_(e.not,t);else if(bR(e))for(const n of e.and)S_(n,t);else if(_R(e))for(const n of e.or)S_(n,t);else t(e)}function y0(e,t){return ER(e)?{not:y0(e.not,t)}:bR(e)?{and:e.and.map(n=>y0(n,t))}:_R(e)?{or:e.or.map(n=>y0(n,t))}:t(e)}const at=structuredClone;function YK(e){throw new Error(e)}function ip(e,t){const n={};for(const r of t)ze(e,r)&&(n[r]=e[r]);return n}function ts(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>nn(e)).join(",")})`};function At(e){if(Ut(e))return e;const t=Ue(e)?e:nn(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function BF(e){return e===!1||e===null}function yt(e,t){return e.includes(t)}function sp(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function wR(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function KK(e,...t){for(const n of t)MOe(e,n??{});return e}function MOe(e,t){for(const n of Se(t))Mp(e,n,t[n],!0)}function Oo(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function LOe(e,t){const n=Se(e),r=Se(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function JK(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function SR(e,t){for(const n of e)if(t.has(n))return!0;return!1}function UF(e){const t=new Set;for(const n of e){const i=rl(n).map((a,o)=>o===0?a:`[${a}]`),s=i.map((a,o)=>i.slice(0,o+1).join(""));for(const a of s)t.add(a)}return t}function TR(e,t){return e===void 0||t===void 0?!0:SR(UF(e),UF(t))}function tn(e){return Se(e).length===0}const Se=Object.keys,Dr=Object.values,Cu=Object.entries;function z1(e){return e===!0||e===!1}function xn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Lm(e,t){return ER(e)?`!(${Lm(e.not,t)})`:bR(e)?`(${e.and.map(n=>Lm(n,t)).join(") && (")})`:_R(e)?`(${e.or.map(n=>Lm(n,t)).join(") || (")})`:t(e)}function pb(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&pb(e[n],t)&&delete e[n],tn(e)}function Vx(e){return e.charAt(0).toUpperCase()+e.substr(1)}function AR(e,t="datum"){const n=rl(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Oe).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function ZK(e,t="datum"){return`${t}[${Oe(rl(e).join("."))}]`}function Xt(e){return`datum['${e.replaceAll("'","\\'")}']`}function POe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function va(e){return`${rl(e).map(POe).join("\\.")}`}function Oh(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function qp(e){return`${rl(e).join(".")}`}function ap(e){return e?rl(e).length:0}function $n(...e){return e.find(t=>t!==void 0)}let QK=42;function eJ(e){const t=++QK;return e?String(e)+t:t}function BOe(){QK=42}function tJ(e){return nJ(e)?e:`__${e}`}function nJ(e){return e.startsWith("__")}function H1(e){if(e!==void 0)return(e%360+360)%360}function Mw(e){return Ut(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const BP=Object.getPrototypeOf(structuredClone({}));function Ts(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Ts(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Ts(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==BP.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==BP.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Ts(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function nn(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const a=t.push(r)-1,o=Object.keys(r).sort();for(s="",i=0;i<o.length;i++){const l=o[i],c=n(r[l]);c&&(s&&(s+=","),s+=JSON.stringify(l)+":"+c)}return t.splice(a,1),`{${s}}`}(e)}function Te(e,t){return Pe(e)&&ze(e,t)&&e[t]!==void 0}const Wl="row",jl="column",Lw="facet",vn="x",_r="y",oo="x2",ol="y2",Yu="xOffset",Xp="yOffset",lo="radius",pc="radius2",Sa="theta",gc="theta2",co="latitude",uo="longitude",fo="latitude2",ya="longitude2",Ku="time",ls="color",ll="fill",cl="stroke",cs="shape",mc="size",od="angle",xc="opacity",Ju="fillOpacity",Zu="strokeOpacity",Qu="strokeWidth",ef="strokeDash",Wx="text",op="order",jx="detail",Pw="key",Nh="tooltip",Bw="href",Uw="url",zw="description",UOe={x:1,y:1,x2:1,y2:1},rJ={theta:1,theta2:1,radius:1,radius2:1};function iJ(e){return ze(rJ,e)}const kR={longitude:1,longitude2:1,latitude:1,latitude2:1};function sJ(e){switch(e){case co:return"y";case fo:return"y2";case uo:return"x";case ya:return"x2"}}function aJ(e){return ze(kR,e)}const zOe=Se(kR),CR={...UOe,...rJ,...kR,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function _0(e){return e===ls||e===ll||e===cl}const oJ={row:1,column:1,facet:1},aa=Se(oJ),FR={...CR,...oJ},HOe=Se(FR),{order:FZe,detail:OZe,tooltip:NZe,...VOe}=FR,{row:DZe,column:RZe,facet:IZe,...WOe}=VOe;function jOe(e){return ze(WOe,e)}function lJ(e){return ze(FR,e)}const GOe=[oo,ol,fo,ya,gc,pc];function cJ(e){return ld(e)!==e}function ld(e){switch(e){case oo:return vn;case ol:return _r;case fo:return co;case ya:return uo;case gc:return Sa;case pc:return lo}return e}function Fu(e){if(iJ(e))switch(e){case Sa:return"startAngle";case gc:return"endAngle";case lo:return"outerRadius";case pc:return"innerRadius"}return e}function ul(e){switch(e){case vn:return oo;case _r:return ol;case co:return fo;case uo:return ya;case Sa:return gc;case lo:return pc}}function us(e){switch(e){case vn:case oo:return"width";case _r:case ol:return"height"}}function uJ(e){switch(e){case vn:return"xOffset";case _r:return"yOffset";case oo:return"x2Offset";case ol:return"y2Offset";case Sa:return"thetaOffset";case lo:return"radiusOffset";case gc:return"theta2Offset";case pc:return"radius2Offset"}}function OR(e){switch(e){case vn:return"xOffset";case _r:return"yOffset"}}function qOe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const XOe=Se(CR),{x:$Ze,y:MZe,x2:LZe,y2:PZe,xOffset:BZe,yOffset:UZe,latitude:zZe,longitude:HZe,latitude2:VZe,longitude2:WZe,theta:jZe,theta2:GZe,radius:qZe,radius2:XZe,...NR}=CR,YOe=Se(NR),DR={x:1,y:1},vc=Se(DR);function Mn(e){return ze(DR,e)}const RR={theta:1,radius:1},KOe=Se(RR);function Hw(e){return e==="width"?vn:_r}const fJ={xOffset:1,yOffset:1};function Gx(e){return ze(fJ,e)}const JOe={time:1};function dA(e){return e in JOe}const{text:YZe,tooltip:KZe,href:JZe,url:ZZe,description:QZe,detail:eQe,key:tQe,order:nQe,...hJ}=NR,ZOe=Se(hJ);function QOe(e){return ze(NR,e)}function eNe(e){switch(e){case ls:case ll:case cl:case mc:case cs:case xc:case Qu:case ef:return!0;case Ju:case Zu:case od:case Ku:return!1}}const dJ={...DR,...RR,...fJ,...hJ},IR=Se(dJ);function fl(e){return ze(dJ,e)}function tNe(e,t){return rNe(e)[t]}const pJ={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:rQe,...nNe}=pJ;function rNe(e){switch(e){case ls:case ll:case cl:case zw:case jx:case Pw:case Nh:case Bw:case op:case xc:case Ju:case Zu:case Qu:case Lw:case Wl:case jl:return pJ;case vn:case _r:case Yu:case Xp:case co:case uo:case Ku:return nNe;case oo:case ol:case fo:case ya:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case mc:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case ef:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case cs:return{point:"always",geoshape:"always"};case Wx:return{text:"always"};case od:return{point:"always",square:"always",text:"always"};case Uw:return{image:"always"};case Sa:return{text:"always",arc:"always"};case lo:return{text:"always",arc:"always"};case gc:case pc:return{arc:"always"}}}function pA(e){switch(e){case vn:case _r:case Sa:case lo:case Yu:case Xp:case mc:case od:case Qu:case xc:case Ju:case Zu:case Ku:case oo:case ol:case gc:case pc:return;case Lw:case Wl:case jl:case cs:case ef:case Wx:case Nh:case Bw:case Uw:case zw:return"discrete";case ls:case ll:case cl:return"flexible";case co:case uo:case fo:case ya:case jx:case Pw:case op:return}}const iNe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},sNe={count:1,min:1,max:1};function sc(e){return Te(e,"argmin")}function tf(e){return Te(e,"argmax")}function $R(e){return Ue(e)&&ze(iNe,e)}const aNe=new Set(["count","valid","missing","distinct"]);function Vw(e){return Ue(e)&&aNe.has(e)}function oNe(e){return Ue(e)&&yt(["min","max"],e)}const lNe=new Set(["count","sum","distinct","valid","missing"]),cNe=new Set(["mean","average","median","q1","q3","min","max"]);function gJ(e){return Gu(e)&&(e=tS(e,void 0)),"bin"+Se(e).map(t=>Ww(e[t])?xn(`_${t}_${Cu(e[t])}`):xn(`_${t}_${e[t]}`)).join("")}function ln(e){return e===!0||cd(e)&&!e.binned}function Er(e){return e==="binned"||cd(e)&&e.binned===!0}function cd(e){return Pe(e)}function Ww(e){return Te(e,"param")}function UP(e){switch(e){case Wl:case jl:case mc:case ls:case ll:case cl:case Qu:case xc:case Ju:case Zu:case cs:return 6;case ef:return 4;default:return 10}}function qx(e){return Te(e,"expr")}function wr(e,{level:t}={level:0}){const n=Se(e||{}),r={};for(const i of n)r[i]=t===0?Es(e[i]):wr(e[i],{level:t-1});return r}function mJ(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:a,color:o,subtitleColor:l,subtitleFont:c,subtitleFontSize:u,subtitleFontStyle:f,subtitleFontWeight:h,subtitleLineHeight:d,subtitlePadding:p,...g}=e,m={...g,...o?{fill:o}:{}},x={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...a!==void 0?{limit:a}:{}},y={...l?{subtitleColor:l}:{},...c?{subtitleFont:c}:{},...u?{subtitleFontSize:u}:{},...f?{subtitleFontStyle:f}:{},...h?{subtitleFontWeight:h}:{},...d?{subtitleLineHeight:d}:{},...p?{subtitlePadding:p}:{}},v=ip(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:v,nonMarkTitleProperties:x,subtitle:y}}function Vc(e){return Ue(e)||pe(e)&&Ue(e[0])}function Ye(e){return Te(e,"signal")}function ud(e){return Te(e,"step")}function uNe(e){return pe(e)?!1:Te(e,"fields")&&!Te(e,"data")}function fNe(e){return pe(e)?!1:Te(e,"fields")&&Te(e,"data")}function Ll(e){return pe(e)?!1:Te(e,"field")&&Te(e,"data")}const hNe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},dNe=Se(hNe),pNe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},zF=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function xJ(e){const t=pe(e.condition)?e.condition.map(zP):zP(e.condition);return{...Es(e),condition:t}}function Es(e){if(qx(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function zP(e){if(qx(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function un(e){if(qx(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ye(e)?e:e!==void 0?{value:e}:void 0}function gNe(e){return Ye(e)?e.signal:Oe(e)}function HP(e){return Ye(e)?e.signal:Oe(e.value)}function za(e){return Ye(e)?e.signal:e==null?null:Oe(e)}function mNe(e,t,n){for(const r of n){const i=Yo(r,t.markDef,t.config);i!==void 0&&(e[r]=un(i))}return e}function vJ(e){return[].concat(e.type,e.style??[])}function Qt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&Te(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Yo(e,t,n,r)}function Yo(e,t,n,{vgChannel:r}={}){const i=HF(e,t,n.style);return $n(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function HF(e,t,n){return yJ(e,vJ(t),n)}function yJ(e,t,n){t=Be(t);let r;for(const i of t){const s=n[i];Te(s,e)&&(r=s[e])}return r}function _J(e,t){return Be(e).reduce((n,r)=>(n.field.push($e(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function bJ(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Ts(i,r))return;n.push(r)}),n}function EJ(e,t){return Ts(e,t)||!t?e:e?[...Be(e),...Be(t)].join(", "):t}function wJ(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Vc(n)||Ye(n))&&(Vc(r)||Ye(r)))return{explicit:e.explicit,value:EJ(n,r)};if(Vc(n)||Ye(n))return{explicit:e.explicit,value:n};if(Vc(r)||Ye(r))return{explicit:e.explicit,value:r};if(!Vc(n)&&!Ye(n)&&!Vc(r)&&!Ye(r))return{explicit:e.explicit,value:bJ(n,r)};throw new Error("It should never reach here")}function MR(e){return`Invalid specification ${nn(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const xNe='Autosize "fit" only works for single views and layered views.';function VP(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function WP(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function jP(e){return e?`Dropping "fit-${e}" because spec has discrete ${us(e)}.`:'Dropping "fit" because spec has discrete size.'}function LR(e){return`Unknown field for ${e}. Cannot calculate view size.`}function GP(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function vNe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function yNe(e){return`The "nearest" transform is not supported for ${e} marks.`}function SJ(e){return`Selection not supported for ${e} yet.`}function _Ne(e){return`Cannot find a selection named "${e}".`}const bNe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",ENe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",wNe="Legend bindings are only supported for selections over an individual field or encoding channel.";function SNe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function TNe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const ANe="The same selection must be used to override scale domains in a layered view.",kNe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function CNe(e){return`Unknown repeated value "${e}".`}function qP(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const FNe="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",PR="Animation involving facet, layer, or concat is currently unsupported.";function ONe(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Oe(e)}.`}function NNe(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Oe(t)} encoding found for selection ${Oe(n.param)}. Using "field": ${Oe(r)}.`}const DNe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function RNe(e){return`Unrecognized parse "${e}".`}function XP(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const INe="Attempt to add the same child twice.";function $Ne(e){return`Ignoring an invalid transform: ${nn(e)}.`}const MNe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function YP(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function LNe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${nn(t)} is overridden by a child projection ${nn(n)}.`}const PNe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function BNe(e){return`${e}Offset dropped because ${e} is continuous`}function UNe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${nn(n)}}.`}function TJ(e){return`Invalid field type "${e}".`}function zNe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function HNe(e){return`Invalid aggregation operator "${e}".`}function AJ(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function VNe(e){return`Position range does not support relative band size for ${e}.`}function VF(e,t){return`Dropping ${nn(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const WNe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function jw(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function jNe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function GNe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function qNe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function XNe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function gA(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function YNe(e){return`The ${e} for range marks cannot be an expression`}function KNe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function JNe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function ZNe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function QNe(e){return`Cannot use the relative band size with ${e} scale.`}function eDe(e){return`Using unaggregated domain with raw field has no effect (${nn(e)}).`}function tDe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function nDe(e){return`Unaggregated domain is currently unsupported for log scale (${nn(e)}).`}function rDe(e){return`Cannot apply size to non-oriented mark "${e}".`}function iDe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function sDe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function kJ(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function CJ(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function aDe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${nn(n)} and ${nn(r)}). Using ${nn(n)}.`}function oDe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${nn(n)} and ${nn(r)}). Using the union of the two domains.`}function lDe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function cDe(e){return`Dropping sort property ${nn(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const KP="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",uDe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",fDe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",hDe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function dDe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function pDe(e){return`Stack is applied to a non-linear scale (${e}).`}function gDe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function gb(e,t){return`Invalid ${e}: ${nn(t)}.`}function mDe(e){return`Dropping day from datetime ${nn(e)} as day cannot be combined with other units.`}function xDe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function vDe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function yDe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function JP(e){return`1D error band does not support ${e}.`}function FJ(e){return`Channel ${e} is required for "binned" bin.`}function _De(e){return`Channel ${e} should not be used with "binned" bin.`}function bDe(e){return`Domain for ${e} is required for threshold scale.`}const OJ=xO(mO);let Dh=OJ;function EDe(e){return Dh=e,Dh}function wDe(){return Dh=OJ,Dh}function BR(...e){Dh.error(...e)}function Ae(...e){Dh.warn(...e)}function SDe(...e){Dh.debug(...e)}function fd(e){if(e&&Pe(e)){for(const t of zR)if(Te(e,t))return!0}return!1}const NJ=["january","february","march","april","may","june","july","august","september","october","november","december"],TDe=NJ.map(e=>e.substr(0,3)),DJ=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],ADe=DJ.map(e=>e.substr(0,3));function kDe(e){if(Mw(e)&&(e=+e),Ut(e))return e>4&&Ae(gb("quarter",e)),e-1;throw new Error(gb("quarter",e))}function CDe(e){if(Mw(e)&&(e=+e),Ut(e))return e-1;{const t=e.toLowerCase(),n=NJ.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=TDe.indexOf(r);if(i!==-1)return i;throw new Error(gb("month",e))}}function FDe(e){if(Mw(e)&&(e=+e),Ut(e))return e%7;{const t=e.toLowerCase(),n=DJ.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=ADe.indexOf(r);if(i!==-1)return i;throw new Error(gb("day",e))}}function UR(e,t){const n=[];if(t&&e.day!==void 0&&Se(e).length>1&&(Ae(mDe(e)),e=at(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?CDe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?kDe(e.quarter):e.quarter;n.push(Ut(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?FDe(e.day):e.day;n.push(Ut(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Rh(e){const n=UR(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function ODe(e){const n=UR(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function NDe(e){const t=UR(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const RJ={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},zR=Se(RJ);function DDe(e){return ze(RJ,e)}function hd(e){return Pe(e)?e.binned:IJ(e)}function IJ(e){return e&&e.startsWith("binned")}function HR(e){return e.startsWith("utc")}function RDe(e){return e.substring(3)}const IDe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Gw(e){return zR.filter(t=>MJ(e,t))}function $J(e){const t=Gw(e);return t[t.length-1]}function MJ(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function $De(e,t,{end:n}={end:!1}){const r=AR(t),i=HR(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let a;const o={};for(const l of zR)MJ(e,l)&&(o[l]=s(l),a=l);return n&&(o[a]+="+1"),ODe(o)}function LJ(e){if(!e)return;const t=Gw(e);return`timeUnitSpecifier(${nn(t)}, ${nn(IDe)})`}function MDe(e,t,n){if(!e)return;const r=LJ(e);return`${n||HR(e)?"utc":"time"}Format(${t}, ${r})`}function mr(e){if(!e)return;let t;return Ue(e)?IJ(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Pe(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),HR(t.unit)&&(t.utc=!0,t.unit=RDe(t.unit)),t}function LDe(e){const{utc:t,...n}=mr(e);return n.unit?(t?"utc":"")+Se(n).map(r=>xn(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Se(n).map(r=>xn(`_${r}_${n[r]}`)).join("")}function PJ(e,t=n=>n){const n=mr(e),r=$J(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:a}=BJ(r,n.step),o={...i,[a]:+i[a]+s};return`${t(Rh(o))} - ${t(Rh(i))}`}}const PDe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function BDe(e){return ze(PDe,e)}function BJ(e,t=1){if(BDe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function UDe(e){return Te(e,"param")}function VR(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function WR(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function jR(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function GR(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function qR(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function XR(e){if(e!=null&&e.field){if(pe(e.range)&&e.range.length===2)return!0;if(Ye(e.range))return!0}return!1}function YR(e){return!!(e!=null&&e.field)&&(pe(e.oneOf)||pe(e.in))}function zDe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function UJ(e){return YR(e)||VR(e)||XR(e)||WR(e)||GR(e)||jR(e)||qR(e)}function yo(e,t){return nS(e,{timeUnit:t,wrapTime:!0})}function HDe(e,t){return e.map(n=>yo(n,t))}function zJ(e,t=!0){const{field:n}=e,r=mr(e.timeUnit),{unit:i,binned:s}=r||{},a=$e(e,{expr:"datum"}),o=i?`time(${s?a:$De(i,n)})`:a;if(VR(e))return`${o}===${yo(e.equal,i)}`;if(WR(e)){const l=e.lt;return`${o}<${yo(l,i)}`}else if(GR(e)){const l=e.gt;return`${o}>${yo(l,i)}`}else if(jR(e)){const l=e.lte;return`${o}<=${yo(l,i)}`}else if(qR(e)){const l=e.gte;return`${o}>=${yo(l,i)}`}else{if(YR(e))return`indexof([${HDe(e.oneOf,i).join(",")}], ${o}) !== -1`;if(zDe(e))return qw(o,e.valid);if(XR(e)){const{range:l}=wr(e),c=Ye(l)?{signal:`${l.signal}[0]`}:l[0],u=Ye(l)?{signal:`${l.signal}[1]`}:l[1];if(c!==null&&u!==null&&t)return"inrange("+o+", ["+yo(c,i)+", "+yo(u,i)+"])";const f=[];return c!==null&&f.push(`${o} >= ${yo(c,i)}`),u!==null&&f.push(`${o} <= ${yo(u,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${nn(e)}`)}function qw(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function VDe(e){return UJ(e)&&e.timeUnit?{...e,timeUnit:mr(e.timeUnit)}:e}const Xx={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function WDe(e){return e==="quantitative"||e==="temporal"}function HJ(e){return e==="ordinal"||e==="nominal"}const Ih=Xx.quantitative,KR=Xx.ordinal,lp=Xx.temporal,JR=Xx.nominal,Yp=Xx.geojson;function jDe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Ih:return"quantitative";case"t":case lp:return"temporal";case"o":case KR:return"ordinal";case"n":case JR:return"nominal";case Yp:return"geojson"}}const Sr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},WF={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function GDe(e,t){const n=WF[e],r=WF[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const qDe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function ZP(e){return qDe[e]}const VJ=new Set(["linear","log","pow","sqrt","symlog"]),WJ=new Set([...VJ,"time","utc"]);function jJ(e){return VJ.has(e)}const GJ=new Set(["quantile","quantize","threshold"]),XDe=new Set([...WJ,...GJ,"sequential","identity"]),YDe=new Set(["ordinal","bin-ordinal","point","band"]);function xr(e){return YDe.has(e)}function Za(e){return XDe.has(e)}function No(e){return WJ.has(e)}function cp(e){return GJ.has(e)}const KDe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function JDe(e){return!Ue(e)&&Te(e,"name")}function qJ(e){return Te(e,"param")}function ZDe(e){return Te(e,"unionWith")}function QDe(e){return Pe(e)&&"field"in e}const eRe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:iQe,domain:sQe,range:aQe,rangeMax:oQe,rangeMin:lQe,scheme:cQe,...tRe}=eRe,nRe=Se(tRe);function jF(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return No(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return No(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return No(e);case"nice":return No(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Za(e)&&!yt(["log","time","utc","threshold","quantile"],e)}}function XJ(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return _0(e)?void 0:ZNe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function rRe(e,t){return yt([KR,JR],t)?e===void 0||xr(e):t===lp?yt([Sr.TIME,Sr.UTC,void 0],e):t===Ih?jJ(e)||cp(e)||e===void 0:!0}function iRe(e,t,n=!1){if(!fl(e))return!1;switch(e){case vn:case _r:case Yu:case Xp:case Sa:case lo:return No(t)||t==="band"?!0:t==="point"?!n:!1;case Ku:return yt(["linear","band"],t);case mc:case Qu:case xc:case Ju:case Zu:case od:return No(t)||cp(t)||yt(["band","point","ordinal"],t);case ls:case ll:case cl:return t!=="band";case ef:case cs:return t==="ordinal"||cp(t)}}function sRe(e){return Pe(e)&&"value"in e}const zi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},YJ=zi.arc,Xw=zi.area,Yw=zi.bar,aRe=zi.image,Kw=zi.line,Jw=zi.point,oRe=zi.rect,mb=zi.rule,KJ=zi.text,ZR=zi.tick,lRe=zi.trail,QR=zi.circle,eI=zi.square,JJ=zi.geoshape;function nf(e){return["line","area","trail"].includes(e)}function V1(e){return["rect","bar","image","arc","tick"].includes(e)}const cRe=new Set(Se(zi));function Ko(e){return Te(e,"type")}const uRe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],fRe=["fill","fillOpacity"],hRe=[...uRe,...fRe],dRe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},QP=Se(dRe),mA=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],pRe={area:["line","point"],bar:mA,rect:mA,line:["point"],tick:["bandSize","thickness",...mA]},gRe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},mRe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},ZJ=Se(mRe);function $h(e){return Te(e,"band")}const xRe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},vRe=5,tI={binSpacing:0,continuousBandSize:vRe,minBandSize:.25,timeUnitBandPosition:.5},yRe={...tI,binSpacing:1},_Re={...tI,thickness:1};function bRe(e){return Ko(e)?e.type:e}function QJ(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function nI({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var o,l;if(!r||!Za(r)||i)return"always-valid";const s=QJ(Qt("invalid",e,t),{isPath:nf(e.type)});return((l=(o=t.scale)==null?void 0:o.invalid)==null?void 0:l[n])!==void 0?"show":s}function ERe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function eZ({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,a=t.domainHasZero();return a==="definitely"?{scale:e,value:0}:a==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function tZ({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var u;const a=n==null?void 0:n.get("type"),o=eo(t),l=Vw(o==null?void 0:o.aggregate),c=nI({scaleChannel:e,markDef:i,config:s,scaleType:a,isCountAggregate:l});if(o&&c==="show"){const f=((u=s.scale.invalid)==null?void 0:u[e])??"zero-or-min";return{test:qw($e(o,{expr:"datum"}),!1),...wRe(f,n,r)}}}function wRe(e,t,n){if(sRe(e)){const{value:r}=e;return Ye(r)?{signal:r.signal}:{value:r}}return eZ({scale:t,scaleName:n,mode:"zeroOrMin"})}function rI(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:a}=e,o=ld(t),l=iI(e),c=tZ({scaleChannel:o,channelDef:n,scale:i,scaleName:s,markDef:r,config:a});return c!==void 0?[c,l]:l}function SRe(e){const{datum:t}=e;return fd(t)?Rh(t):`${nn(t)}`}function th(e,t,n,r){const i={};if(t&&(i.scale=t),hl(e)){const{datum:s}=e;fd(s)?i.signal=Rh(s):Ye(s)?i.signal=s.signal:qx(s)?i.signal=s.expr:i.value=s}else i.field=$e(e,n);if(r){const{offset:s,band:a}=r;s&&(i.offset=s),a&&(i.band=a)}return i}function xb({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:a=.5}){const o=!Ye(a)&&0<a&&a<1?"datum":void 0,l=$e(t,{expr:o,suffix:i}),c=n!==void 0?$e(n,{expr:o}):$e(t,{suffix:s,expr:o}),u={};if(a===0||a===1){u.scale=e;const f=a===0?l:c;u.field=f}else{const f=Ye(a)?`(1-${a.signal}) * ${l} + ${a.signal} * ${c}`:`${1-a} * ${l} + ${a} * ${c}`;u.signal=`scale("${e}", ${f})`}return r&&(u.offset=r),u}function TRe({scaleName:e,fieldDef:t}){const n=$e(t,{expr:"datum"}),r=$e(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function iI({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:a,stack:o,offset:l,defaultRef:c,bandPosition:u}){if(t){if(ot(t)){const f=a==null?void 0:a.get("type");if(Bi(t)){u??(u=Ou({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:h,timeUnit:d,type:p}=t;if(ln(h)||u&&d&&p===lp)return o!=null&&o.impute?th(t,s,{binSuffix:"mid"},{offset:l}):u&&!xr(f)?xb({scaleName:s,fieldOrDatumDef:t,bandPosition:u,offset:l}):th(t,s,Qx(t,e)?{binSuffix:"range"}:{},{offset:l});if(Er(h)){if(Fe(n))return xb({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:u,offset:l});Ae(FJ(e===vn?oo:ol))}}return th(t,s,xr(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?u??t.bandPosition??.5:void 0})}else if(Qa(t)){const f=t.value,h=l?{offset:l}:{};return{...Pm(e,f),...h}}}return pt(c)&&(c=c()),c&&{...c,...l?{offset:l}:{}}}function Pm(e,t){return yt(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:yt(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:un(t)}function Mh(e){return e&&e!=="number"&&e!=="time"}function nZ(e,t,n){return`${e}(${t}${n?`, ${nn(n)}`:""})`}const ARe=" – ";function sI({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,c;if(Mh(n))return Ha({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const a=rZ(e,r,i),o=up(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(o==="quantitative"){if(i&&s.normalizedNumberFormatType)return Ha({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Ha({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(o==="temporal"&&s.timeFormatType&&Fe(e)&&e.timeUnit===void 0)return Ha({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(hp(e)){const u=CRe({field:a,timeUnit:Fe(e)?(l=mr(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:dd(e)&&((c=e.scale)==null?void 0:c.type)===Sr.UTC});return u?{signal:u}:void 0}if(t=GF({type:o,specifiedFormat:t,config:s,normalizeStack:i}),Fe(e)&&ln(e.bin)){const u=$e(e,{expr:r,binSuffix:"end"});return{signal:Yx(a,u,t,n,s)}}else return t||up(e)==="quantitative"?{signal:`${aZ(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function rZ(e,t,n){return Fe(e)?n?`${$e(e,{expr:t,suffix:"end"})}-${$e(e,{expr:t,suffix:"start"})}`:$e(e,{expr:t}):SRe(e)}function Ha({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:a}){if(a??(a=rZ(e,r,i)),a!=="datum.value"&&Fe(e)&&ln(e.bin)){const o=$e(e,{expr:r,binSuffix:"end"});return{signal:Yx(a,o,t,n,s)}}return{signal:nZ(n,a,t)}}function iZ(e,t,n,r,i,s){var a;if(!(Ue(r)&&Mh(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&up(e)==="quantitative"&&(i.normalizedNumberFormatType&&fp(e)&&e.stack==="normalize"||i.numberFormatType))){if(fp(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return GF({type:"quantitative",config:i,normalizeStack:!0});if(hp(e)){const o=Fe(e)?(a=mr(e.timeUnit))==null?void 0:a.unit:void 0;return o===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:kRe({specifiedFormat:n,timeUnit:o,config:i,omitTimeFormatConfig:s})}return GF({type:t,specifiedFormat:n,config:i})}}function sZ(e,t,n){var r;if(e&&(Ye(e)||e==="number"||e==="time"))return e;if(hp(t)&&n!=="time"&&n!=="utc")return Fe(t)&&((r=mr(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function GF({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Ue(t))return t;if(e===Ih)return r?n.normalizedNumberFormat:n.numberFormat}function kRe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:LJ(t)}:r?void 0:n.timeFormat)}function aZ(e,t){return`format(${e}, "${t||""}")`}function e8(e,t,n,r){return Mh(n)?nZ(n,e,t):aZ(e,(Ue(t)?t:void 0)??r.numberFormat)}function Yx(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Yx(e,t,i.numberFormat,i.numberFormatType,i);const s=e8(e,n,r,i),a=e8(t,n,r,i);return`${qw(e,!1)} ? "null" : ${s} + "${ARe}" + ${a}`}function CRe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Ue(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):MDe(t,e,s)}const Zw="min",FRe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function t8(e){return ze(FRe,e)}function ORe(e){return Te(e,"encoding")}function Gl(e){return e&&(e.op==="count"||Te(e,"field"))}function oZ(e){return e&&pe(e)}function Kx(e){return Te(e,"row")||Te(e,"column")}function aI(e){return Te(e,"header")}function Qw(e){return Te(e,"facet")}function NRe(e){return Te(e,"param")}function DRe(e){return!Ue(e)&&Te(e,"repeat")}function n8(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function oI(e){return Te(e,"sort")}function Ou({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ot(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Fe(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Yo("timeUnitBandPosition",n,r);if(ln(s))return .5}}function lZ({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:a}){var c,u,f;const o=us(e),l=Qt(a?"size":o,r,i,{vgChannel:o});if(l!==void 0)return l;if(Fe(t)){const{timeUnit:h,bin:d}=t;if(h&&!n)return{band:Yo("timeUnitBandSize",r,i)};if(ln(d)&&!xr(s))return{band:1}}if(V1(r.type))return s?xr(s)?((c=i[r.type])==null?void 0:c.discreteBandSize)||{band:1}:(u=i[r.type])==null?void 0:u.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function cZ(e,t,n,r){return ln(e.bin)||e.timeUnit&&Bi(e)&&e.type==="temporal"?Ou({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function uZ(e){return Te(e,"sort")&&!Te(e,"field")}function Jx(e){return Te(e,"condition")}function eS(e){const t=e==null?void 0:e.condition;return!!t&&!pe(t)&&Fe(t)}function Zx(e){const t=e==null?void 0:e.condition;return!!t&&!pe(t)&&ot(t)}function RRe(e){const t=e==null?void 0:e.condition;return!!t&&(pe(t)||Qa(t))}function Fe(e){return Te(e,"field")||(e==null?void 0:e.aggregate)==="count"}function up(e){return e==null?void 0:e.type}function hl(e){return Te(e,"datum")}function tu(e){return Bi(e)&&!yb(e)||vb(e)}function r8(e){return Bi(e)&&e.type==="quantitative"&&!e.bin||vb(e)}function vb(e){return hl(e)&&Ut(e.datum)}function ot(e){return Fe(e)||hl(e)}function Bi(e){return e&&(Te(e,"field")||e.aggregate==="count")&&Te(e,"type")}function Qa(e){return Te(e,"value")}function dd(e){return Te(e,"scale")||Te(e,"sort")}function fp(e){return Te(e,"axis")||Te(e,"stack")||Te(e,"impute")}function fZ(e){return Te(e,"legend")}function hZ(e){return Te(e,"format")||Te(e,"formatType")}function IRe(e){return ts(e,["legend","axis","header","scale"])}function $Re(e){return Te(e,"op")}function $e(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(LRe(e))n=tJ("count");else{let a;if(!t.nofn)if($Re(e))a=e.op;else{const{bin:o,aggregate:l,timeUnit:c}=e;ln(o)?(a=gJ(o),i=(t.binSuffix??"")+(t.suffix??"")):l?tf(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):sc(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):a=String(l):c&&!hd(c)&&(a=LDe(c),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?qp(n):t.expr?ZK(n,t.expr)+s:va(n)+s}function yb(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Fe(e)&&!!e.bin;case"temporal":return!1}throw new Error(TJ(e.type))}function MRe(e){var t;return dd(e)&&cp((t=e.scale)==null?void 0:t.type)}function LRe(e){return e.aggregate==="count"}function PRe(e,t){var a;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ln(r))return`${n} (binned)`;if(i&&!hd(i)){const o=(a=mr(i))==null?void 0:a.unit;if(o)return`${n} (${Gw(o).join("-")})`}else if(s)return tf(s)?`${n} for max ${s.argmax}`:sc(s)?`${n} for min ${s.argmin}`:`${Vx(s)} of ${n}`;return n}function BRe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(tf(t))return`${i} for argmax(${t.argmax})`;if(sc(t))return`${i} for argmin(${t.argmin})`;const s=r&&!hd(r)?mr(r):void 0,a=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ln(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}const dZ=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return BRe(e);default:return PRe(e,t)}};let pZ=dZ;function gZ(e){pZ=e}function URe(){gZ(dZ)}function b0(e,t,{allowDisabling:n,includeDefault:r=!0}){var o;const i=(o=lI(e))==null?void 0:o.title;if(!Fe(e))return i??e.title;const s=e,a=r?cI(s,t):void 0;return n?$n(i,s.title,a):i??s.title??a}function lI(e){if(fp(e)&&e.axis)return e.axis;if(fZ(e)&&e.legend)return e.legend;if(aI(e)&&e.header)return e.header}function cI(e,t){return pZ(e,t)}function _b(e){if(hZ(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=lI(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function zRe(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(oI(e)&&pe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!tf(n)&&!sc(n))return"quantitative";if(dd(e)&&((s=e.scale)!=null&&s.type))switch(WF[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function eo(e){if(Fe(e))return e;if(eS(e))return e.condition}function tr(e){if(ot(e))return e;if(Zx(e))return e.condition}function mZ(e,t,n,r={}){if(Ue(e)||Ut(e)||Gu(e)){const i=Ue(e)?"string":Ut(e)?"number":"boolean";return Ae(UNe(t,i,e)),{value:e}}return ot(e)?bb(e,t,n,r):Zx(e)?{...e,condition:bb(e.condition,t,n,r)}:e}function bb(e,t,n,r){if(hZ(e)){const{format:i,formatType:s,...a}=e;if(Mh(s)&&!n.customFormatTypes)return Ae(YP(t)),bb(a,t,n,r)}else{const i=fp(e)?"axis":fZ(e)?"legend":aI(e)?"header":null;if(i&&e[i]){const{format:s,formatType:a,...o}=e[i];if(Mh(a)&&!n.customFormatTypes)return Ae(YP(t)),bb({...e,[i]:o},t,n,r)}}return Fe(e)?uI(e,t,r):HRe(e)}function HRe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ut(n)?"quantitative":Ue(n)?"nominal":fd(n)?"temporal":void 0,{...e,type:t}}function uI(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:a}=e,o={...e};if(!n&&r&&!$R(r)&&!tf(r)&&!sc(r)&&(Ae(HNe(r)),delete o.aggregate),i&&(o.timeUnit=mr(i)),a&&(o.field=`${a}`),ln(s)&&(o.bin=tS(s,t)),Er(s)&&!Mn(t)&&Ae(_De(t)),Bi(o)){const{type:l}=o,c=jDe(l);l!==c&&(o.type=c),l!=="quantitative"&&Vw(r)&&(Ae(zNe(l,r)),o.type="quantitative")}else if(!cJ(t)){const l=zRe(o,t);o.type=l}if(Bi(o)){const{compatible:l,warning:c}=VRe(o,t)||{};l===!1&&Ae(c)}if(oI(o)&&Ue(o.sort)){const{sort:l}=o;if(t8(l))return{...o,sort:{encoding:l}};const c=l.substring(1);if(l.charAt(0)==="-"&&t8(c))return{...o,sort:{encoding:c,order:"descending"}}}if(aI(o)){const{header:l}=o;if(l){const{orient:c,...u}=l;if(c)return{...o,header:{...u,labelOrient:l.labelOrient||c,titleOrient:l.titleOrient||c}}}}return o}function tS(e,t){return Gu(e)?{maxbins:UP(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:UP(t)}:e}const $d={compatible:!0};function VRe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Wl:case jl:case Lw:return yb(e)?$d:{compatible:!1,warning:GNe(t)};case vn:case _r:case Yu:case Xp:case ls:case ll:case cl:case Wx:case jx:case Pw:case Nh:case Bw:case Uw:case od:case Sa:case lo:case zw:return $d;case uo:case ya:case co:case fo:return n!==Ih?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:$d;case xc:case Ju:case Zu:case Qu:case mc:case gc:case pc:case oo:case ol:case Ku:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:$d;case cs:case ef:return!yb(e)&&!MRe(e)?{compatible:!1,warning:qNe(t)}:$d;case op:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:$d}}function hp(e){const{formatType:t}=_b(e);return t==="time"||!t&&WRe(e)}function WRe(e){return e&&(e.type==="temporal"||Fe(e)&&!!e.timeUnit)}function nS(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=mr(t))==null?void 0:l.unit);let a=s||n==="temporal",o;return qx(e)?o=e.expr:Ye(e)?o=e.signal:fd(e)?(a=!0,o=Rh(e)):(Ue(e)||Ut(e))&&a&&(o=`datetime(${nn(e)})`,DDe(s)&&(Ut(e)&&e<1e4||Ue(e)&&isNaN(Date.parse(e)))&&(o=Rh({[s]:e}))),o?r&&a?`time(${o})`:o:i?void 0:nn(e)}function xZ(e,t){const{type:n}=e;return t.map(r=>{const i=Fe(e)&&!hd(e.timeUnit)?e.timeUnit:void 0,s=nS(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function Qx(e,t){return ln(e.bin)?fl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const i8={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ev(e){return e==null?void 0:e.condition}const vZ=["domain","grid","labels","ticks","title"],jRe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},yZ={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},GRe={...yZ,style:1,labelExpr:1,encoding:1};function s8(e){return ze(GRe,e)}const qRe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},_Z=Se(qRe);function yc(e){return Te(e,"mark")}class rS{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return yc(t)?bRe(t.mark)===this.name:!1}}function nh(e,t){const n=e&&e[t];return n?pe(n)?sp(n,r=>!!r.field):Fe(n)||eS(n):!1}function bZ(e,t){const n=e&&e[t];return n?pe(n)?sp(n,r=>!!r.field):Fe(n)||hl(n)||Zx(n):!1}function EZ(e,t){if(Mn(t)){const n=e[t];if((Fe(n)||hl(n))&&(HJ(n.type)||Fe(n)&&n.timeUnit)){const r=OR(t);return bZ(e,r)}}return!1}function wZ(e){return sp(HOe,t=>{if(nh(e,t)){const n=e[t];if(pe(n))return sp(n,r=>!!r.aggregate);{const r=eo(n);return r&&!!r.aggregate}}return!1})}function SZ(e,t){const n=[],r=[],i=[],s=[],a={};return fI(e,(o,l)=>{if(Fe(o)){const{field:c,aggregate:u,bin:f,timeUnit:h,...d}=o;if(u||h||f){const p=lI(o),g=p==null?void 0:p.title;let m=$e(o,{forAs:!0});const x={...g?[]:{title:b0(o,t,{allowDisabling:!0})},...d,field:m};if(u){let y;if(tf(u)?(y="argmax",m=$e({op:"argmax",field:u.argmax},{forAs:!0}),x.field=`${m}.${c}`):sc(u)?(y="argmin",m=$e({op:"argmin",field:u.argmin},{forAs:!0}),x.field=`${m}.${c}`):u!=="boxplot"&&u!=="errorbar"&&u!=="errorband"&&(y=u),y){const v={op:y,as:m};c&&(v.field=c),s.push(v)}}else if(n.push(m),Bi(o)&&ln(f)){if(r.push({bin:f,field:c,as:m}),n.push($e(o,{binSuffix:"end"})),Qx(o,l)&&n.push($e(o,{binSuffix:"range"})),Mn(l)){const y={field:`${m}_end`};a[`${l}2`]=y}x.bin="binned",cJ(l)||(x.type=Ih)}else if(h&&!hd(h)){i.push({timeUnit:h,field:c,as:m});const y=Bi(o)&&o.type!==lp&&"time";y&&(l===Wx||l===Nh?x.formatType=y:QOe(l)?x.legend={formatType:y,...x.legend}:Mn(l)&&(x.axis={formatType:y,...x.axis}))}a[l]=x}else n.push(c),a[l]=e[l]}else a[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:a}}function XRe(e,t,n){const r=tNe(t,n);if(r){if(r==="binned"){const i=e[t===oo?vn:_r];return!!(Fe(i)&&Fe(e[t])&&Er(i.bin))}}else return!1;return!0}function YRe(e,t,n,r){const i={};for(const s of Se(e))lJ(s)||Ae(jNe(s));for(let s of XOe){if(!e[s])continue;const a=e[s];if(Gx(s)){const o=qOe(s),l=i[o];if(Fe(l)&&WDe(l.type)&&Fe(a)&&!l.timeUnit){Ae(BNe(o));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ae(PNe),s=Sa),!XRe(e,s,t)){Ae(jw(s,t));continue}if(s===mc&&t==="line"){const o=eo(e[s]);if(o!=null&&o.aggregate){Ae(WNe);continue}}if(s===ls&&(n?"fill"in e:"stroke"in e)){Ae(AJ("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===jx||s===op&&!pe(a)&&!Qa(a)||s===Nh&&pe(a)){if(a){if(s===op){const o=e[s];if(uZ(o)){i[s]=o;continue}}i[s]=Be(a).reduce((o,l)=>(Fe(l)?o.push(uI(l,s)):Ae(VF(l,s)),o),[])}}else{if(s===Nh&&a===null)i[s]=null;else if(!Fe(a)&&!hl(a)&&!Qa(a)&&!Jx(a)&&!Ye(a)){Ae(VF(a,s));continue}i[s]=mZ(a,s,r)}}return i}function iS(e,t){const n={};for(const r of Se(e)){const i=mZ(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function KRe(e){const t=[];for(const n of Se(e))if(nh(e,n)){const r=e[n],i=Be(r);for(const s of i)Fe(s)?t.push(s):eS(s)&&t.push(s.condition)}return t}function fI(e,t,n){if(e)for(const r of Se(e)){const i=e[r];if(pe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function JRe(e,t,n,r){return e?Se(e).reduce((i,s)=>{const a=e[s];return pe(a)?a.reduce((o,l)=>t.call(r,o,l,s),i):t.call(r,i,a,s)},n):n}function TZ(e,t){return Se(t).reduce((n,r)=>{switch(r){case vn:case _r:case Bw:case zw:case Uw:case oo:case ol:case Yu:case Xp:case Sa:case gc:case lo:case pc:case Ku:case co:case uo:case fo:case ya:case Wx:case cs:case od:case Nh:return n;case op:if(e==="line"||e==="trail")return n;case jx:case Pw:{const i=t[r];if(pe(i)||Fe(i))for(const s of Be(i))s.aggregate||n.push($e(s,{}));return n}case mc:if(e==="trail")return n;case ls:case ll:case cl:case xc:case Ju:case Zu:case ef:case Qu:{const i=eo(t[r]);return i&&!i.aggregate&&n.push($e(i,{})),n}}},[])}function ZRe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(pe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return pe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function qF(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:a,titlePrefix:o})=>{const l=r?` of ${hI(t)}`:"";return{field:a+t.field,type:t.type,title:Ye(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),s=KRe(n).map(IRe);return{tooltip:[...i,...Oo(s,At)]}}function hI(e){const{title:t,field:n}=e;return $n(t,n)}function dI(e,t,n,r,i){const{scale:s,axis:a}=n;return({partName:o,mark:l,positionPrefix:c,endPositionPrefix:u=void 0,extraEncoding:f={}})=>{const h=hI(n);return AZ(e,o,i,{mark:l,encoding:{[t]:{field:`${c}_${n.field}`,type:n.type,...h!==void 0?{title:h}:{},...s!==void 0?{scale:s}:{},...a!==void 0?{axis:a}:{}},...Ue(u)?{[`${t}2`]:{field:`${u}_${n.field}`}}:{},...r,...f}})}}function AZ(e,t,n,r){const{clip:i,color:s,opacity:a}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...a?{opacity:a}:{},...Ko(r.mark)?r.mark:{type:r.mark},style:`${o}-${String(t)}`,...Gu(e[t])?{}:e[t]}}]:[]}function kZ(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],a=r[`${i}2`],o=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:hy(s,n),continuousAxisChannelDef2:hy(a,n),continuousAxisChannelDefError:hy(o,n),continuousAxisChannelDefError2:hy(l,n),continuousAxis:i}}function hy(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ae(yDe(n,t)),r}else return e}function CZ(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Ko(n)&&n.orient)return n.orient;if(tu(i)){if(tu(s)){const a=Fe(i)&&i.aggregate,o=Fe(s)&&s.aggregate;if(!a&&o===t)return"vertical";if(!o&&a===t)return"horizontal";if(a===t&&o===t)throw new Error("Both x and y cannot have aggregate");return hp(s)&&!hp(i)?"horizontal":"vertical"}return"horizontal"}else{if(tu(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Eb="boxplot",QRe=["box","median","outliers","rule","ticks"],eIe=new rS(Eb,OZ);function FZ(e){return Ut(e)?"tukey":e}function OZ(e,{config:t}){e={...e,encoding:iS(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...a}=e,o=Ko(n)?n:{type:n};i&&Ae(SJ("boxplot"));const l=o.extent??t.boxplot.extent,c=Qt("size",o,t),u=o.invalid,f=FZ(l),{bins:h,timeUnits:d,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:x,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:w}=tIe(e,l,t),E=qp(g.field),{color:T,size:S,...A}=v,C=te=>dI(o,m,g,te,t.boxplot),F=C(A),N=C(v),M=(Pe(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",O=C({...A,...S?{size:S}:{},color:{condition:{test:`${Xt(`lower_box_${g.field}`)} >= ${Xt(`upper_box_${g.field}`)}`,...T||{value:M}}}}),D=qF([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,v),I={type:"tick",color:"black",opacity:1,orient:_,invalid:u,aria:!1},U=f==="min-max"?D:qF([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,v),Y=[...F({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...F({partName:"rule",mark:{type:"rule",invalid:u,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...F({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:U}),...F({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:U})],X=[...f!=="tukey"?Y:[],...N({partName:"box",mark:{type:"bar",...c?{size:c}:{},orient:b,invalid:u,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:D}),...O({partName:"median",mark:{type:"tick",invalid:u,...Pe(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...c?{size:c}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:D})];if(f==="min-max")return{...a,transform:(a.transform??[]).concat(p),layer:X};const de=Xt(`lower_box_${g.field}`),le=Xt(`upper_box_${g.field}`),ye=`(${le} - ${de})`,ve=`${de} - ${l} * ${ye}`,Ee=`${le} + ${l} * ${ye}`,Ne=Xt(g.field),Xe={joinaggregate:NZ(g.field),groupby:x},z={transform:[{filter:`(${ve} <= ${Ne}) && (${Ne} <= ${Ee})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${E}`},{op:"max",field:g.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${E}`},...y],groupby:x}],layer:Y},{tooltip:q,...G}=A,{scale:H,axis:J}=g,k=hI(g),L=ts(J,["title"]),K=AZ(o,"outliers",t.boxplot,{transform:[{filter:`(${Ne} < ${ve}) || (${Ne} > ${Ee})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...k!==void 0?{title:k}:{},...H!==void 0?{scale:H}:{},...tn(L)?{}:{axis:L}},...G,...T?{color:T}:{},...w?{tooltip:w}:{}}})[0];let Z;const ee=[...h,...d,Xe];return K?Z={transform:ee,layer:[K,z]}:(Z=z,Z.transform.unshift(...ee)),{...a,layer:[Z,{transform:p,layer:X}]}}function NZ(e){const t=qp(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function tIe(e,t,n){const r=CZ(e,Eb),{continuousAxisChannelDef:i,continuousAxis:s}=kZ(e,r,Eb),a=i.field,o=qp(a),l=FZ(t),c=[...NZ(a),{op:"median",field:a,as:`mid_box_${o}`},{op:"min",field:a,as:(l==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:a,as:(l==="min-max"?"upper_whisker_":"max_")+o}],u=l==="min-max"||l==="tukey"?[]:[{calculate:`${Xt(`upper_box_${o}`)} - ${Xt(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${Xt(`upper_box_${o}`)} + ${Xt(`iqr_${o}`)} * ${t}, ${Xt(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${Xt(`lower_box_${o}`)} - ${Xt(`iqr_${o}`)} * ${t}, ${Xt(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[s]:f,...h}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=ZRe(h),{bins:g,timeUnits:m,aggregate:x,groupby:y,encoding:v}=SZ(p,n),_=r==="vertical"?"horizontal":"vertical",b=r,w=[...g,...m,{aggregate:[...x,...c],groupby:y},...u];return{bins:g,timeUnits:m,transform:w,groupby:y,aggregate:x,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:d}}const pI="errorbar",nIe=["ticks","rule"],rIe=new rS(pI,DZ);function DZ(e,{config:t}){e={...e,encoding:iS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:a,markDef:o,outerSpec:l,tooltipEncoding:c}=RZ(e,pI,t);delete s.size;const u=dI(o,i,r,s,t.errorbar),f=o.thickness,h=o.size,d={type:"tick",orient:a,aria:!1,...f!==void 0?{thickness:f}:{},...h!==void 0?{size:h}:{}},p=[...u({partName:"ticks",mark:d,positionPrefix:"lower",extraEncoding:c}),...u({partName:"ticks",mark:d,positionPrefix:"upper",extraEncoding:c}),...u({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function iIe(e,t){const{encoding:n}=e;if(sIe(n))return{orient:CZ(e,t),inputType:"raw"};const r=aIe(n),i=oIe(n),s=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(ot(o)&&ot(l))throw new Error(`${t} cannot have both x2 and y2`);if(ot(o)){if(tu(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ot(l)){if(tu(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,c=n.yError,u=n.yError2;if(ot(l)&&!ot(o))throw new Error(`${t} cannot have xError2 without xError`);if(ot(u)&&!ot(c))throw new Error(`${t} cannot have yError2 without yError`);if(ot(o)&&ot(c))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ot(o)){if(tu(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ot(c)){if(tu(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function sIe(e){return(ot(e.x)||ot(e.y))&&!ot(e.x2)&&!ot(e.y2)&&!ot(e.xError)&&!ot(e.xError2)&&!ot(e.yError)&&!ot(e.yError2)}function aIe(e){return ot(e.x2)||ot(e.y2)}function oIe(e){return ot(e.xError)||ot(e.xError2)||ot(e.yError)||ot(e.yError2)}function RZ(e,t,n){const{mark:r,encoding:i,params:s,projection:a,...o}=e,l=Ko(r)?r:{type:r};s&&Ae(SJ(t));const{orient:c,inputType:u}=iIe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:h,continuousAxisChannelDefError:d,continuousAxisChannelDefError2:p,continuousAxis:g}=kZ(e,c,t),{errorBarSpecificAggregate:m,postAggregateCalculates:x,tooltipSummary:y,tooltipTitleWithFieldName:v}=lIe(l,f,h,d,p,u,t,n),{[g]:_,[g==="x"?"x2":"y2"]:b,[g==="x"?"xError":"yError"]:w,[g==="x"?"xError2":"yError2"]:E,...T}=i,{bins:S,timeUnits:A,aggregate:C,groupby:F,encoding:N}=SZ(T,n),M=[...C,...m],O=u!=="raw"?[]:F,D=qF(y,f,N,v);return{transform:[...o.transform??[],...S,...A,...M.length===0?[]:[{aggregate:M,groupby:O}],...x],groupby:O,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:N,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:D}}function lIe(e,t,n,r,i,s,a,o){let l=[],c=[];const u=t.field;let f,h=!1;if(s==="raw"){const d=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,p=e.extent?e.extent:d==="mean"?"stderr":"iqr";if(d==="median"!=(p==="iqr")&&Ae(vDe(d,p,a)),p==="stderr"||p==="stdev")l=[{op:p,field:u,as:`extent_${u}`},{op:d,field:u,as:`center_${u}`}],c=[{calculate:`${Xt(`center_${u}`)} + ${Xt(`extent_${u}`)}`,as:`upper_${u}`},{calculate:`${Xt(`center_${u}`)} - ${Xt(`extent_${u}`)}`,as:`lower_${u}`}],f=[{fieldPrefix:"center_",titlePrefix:Vx(d)},{fieldPrefix:"upper_",titlePrefix:a8(d,p,"+")},{fieldPrefix:"lower_",titlePrefix:a8(d,p,"-")}],h=!0;else{let g,m,x;p==="ci"?(g="mean",m="ci0",x="ci1"):(g="median",m="q1",x="q3"),l=[{op:m,field:u,as:`lower_${u}`},{op:x,field:u,as:`upper_${u}`},{op:g,field:u,as:`center_${u}`}],f=[{fieldPrefix:"upper_",titlePrefix:b0({field:u,aggregate:x,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:b0({field:u,aggregate:m,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:b0({field:u,aggregate:g,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ae(xDe(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],c=[{calculate:Xt(n.field),as:`upper_${u}`},{calculate:Xt(u),as:`lower_${u}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:u}],c=[{calculate:`${Xt(u)} + ${Xt(r.field)}`,as:`upper_${u}`}],i?c.push({calculate:`${Xt(u)} + ${Xt(i.field)}`,as:`lower_${u}`}):c.push({calculate:`${Xt(u)} - ${Xt(r.field)}`,as:`lower_${u}`}));for(const d of c)f.push({fieldPrefix:d.as.substring(0,6),titlePrefix:Oh(Oh(d.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:h}}function a8(e,t,n){return`${Vx(e)} ${n} ${t}`}const gI="errorband",cIe=["band","borders"],uIe=new rS(gI,IZ);function IZ(e,{config:t}){e={...e,encoding:iS(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:a,outerSpec:o,tooltipEncoding:l}=RZ(e,gI,t),c=a,u=dI(c,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let h={type:f?"area":"rect"},d={type:f?"line":"rule"};const p={...c.interpolate?{interpolate:c.interpolate}:{},...c.tension&&c.interpolate?{tension:c.tension}:{}};return f?(h={...h,...p,ariaRoleDescription:"errorband"},d={...d,...p,aria:!1}):c.interpolate?Ae(JP("interpolate")):c.tension&&Ae(JP("tension")),{...o,transform:n,layer:[...u({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...u({partName:"borders",mark:d,positionPrefix:"lower",extraEncoding:l}),...u({partName:"borders",mark:d,positionPrefix:"upper",extraEncoding:l})]}}const $Z={};function mI(e,t,n){const r=new rS(e,t);$Z[e]={normalizer:r,parts:n}}function fIe(){return Se($Z)}mI(Eb,OZ,QRe);mI(pI,DZ,nIe);mI(gI,IZ,cIe);const hIe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],MZ={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},LZ={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},dIe=Se(MZ),pIe=Se(LZ),gIe={header:1,headerRow:1,headerColumn:1,headerFacet:1},PZ=Se(gIe),BZ=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],mIe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},xIe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},to="_vgsid_",vIe={point:{on:"click",fields:[to],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function xI(e){return e==="legend"||!!(e!=null&&e.legend)}function xA(e){return xI(e)&&Pe(e)}function vI(e){return!!(e!=null&&e.select)}function UZ(e){const t=[];for(const n of e||[]){if(vI(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const a={...s,bind:i,init:r};t.push(a)}else{const a={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(a)}}return t}function yIe(e){return sS(e)||_I(e)||yI(e)}function yI(e){return Te(e,"concat")}function sS(e){return Te(e,"vconcat")}function _I(e){return Te(e,"hconcat")}function zZ({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Jo(e){return Te(e,"step")}function o8(e){return Te(e,"view")||Te(e,"width")||Te(e,"height")}const l8=20,_Ie={align:1,bounds:1,center:1,columns:1,spacing:1},bIe=Se(_Ie);function EIe(e,t,n){const r=n[t],i={},{spacing:s,columns:a}=r;s!==void 0&&(i.spacing=s),a!==void 0&&(Qw(e)&&!Kx(e.facet)||yI(e))&&(i.columns=a),sS(e)&&(i.columns=1);for(const o of bIe)if(e[o]!==void 0)if(o==="spacing"){const l=e[o];i[o]=Ut(l)?l:{row:l.row??s,column:l.column??s}}else i[o]=e[o];return i}function XF(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function YF(e,t){const n=wb(e,t);return Jo(n)?n.step:HZ}function wb(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return $n(n,{step:e.step})}const HZ=20,wIe={continuousWidth:200,continuousHeight:200,step:HZ},SIe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:wIe,mark:gRe,arc:{},area:{},bar:yRe,circle:{},geoshape:{},image:{},line:{},point:{},rect:tI,rule:{color:"black"},square:{},text:{color:"black"},tick:_Re,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:KDe,projection:{},legend:mIe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:vIe,style:{},title:{},facet:{spacing:l8},concat:{spacing:l8},normalizedNumberFormat:".0%"},_l=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],c8={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},u8={blue:_l[0],orange:_l[1],red:_l[2],teal:_l[3],green:_l[4],yellow:_l[5],purple:_l[6],pink:_l[7],brown:_l[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function TIe(e={}){return{signals:[{name:"color",value:Pe(e)?{...u8,...e}:u8}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function AIe(e){return{signals:[{name:"fontSize",value:Pe(e)?{...c8,...e}:c8}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function kIe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function VZ(e){const t=Se(e||{}),n={};for(const r of t){const i=e[r];n[r]=ev(i)?xJ(i):Es(i)}return n}function CIe(e){const t=Se(e),n={};for(const r of t)n[r]=VZ(e[r]);return n}const FIe=[...ZJ,..._Z,...PZ,"background","padding","legend","lineBreak","scale","style","title","view"];function WZ(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,a=$p({},at(SIe),n?kIe(n):{},t?TIe(t):{},r?AIe(r):{},s||{});i&&Mp(a,"selection",i,!0);const o=ts(a,FIe);for(const l of["background","lineBreak","padding"])a[l]&&(o[l]=Es(a[l]));for(const l of ZJ)a[l]&&(o[l]=wr(a[l]));for(const l of _Z)a[l]&&(o[l]=VZ(a[l]));for(const l of PZ)a[l]&&(o[l]=wr(a[l]));if(a.legend&&(o.legend=wr(a.legend)),a.scale){const{invalid:l,...c}=a.scale,u=wr(l,{level:1});o.scale={...wr(c),...Se(u).length>0?{invalid:u}:{}}}return a.style&&(o.style=CIe(a.style)),a.title&&(o.title=wr(a.title)),a.view&&(o.view=wr(a.view)),o}const OIe=new Set(["view",...cRe]),NIe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],DIe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...pRe};function RIe(e){e=at(e);for(const t of NIe)delete e[t];if(e.axis)for(const t in e.axis)ev(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of hIe)delete e.legend[t];if(e.mark){for(const t of QP)delete e.mark[t];e.mark.tooltip&&Pe(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(UZ(e.params)),delete e.params);for(const t of OIe){for(const r of QP)delete e[t][r];const n=DIe[t];if(n)for(const r of n)delete e[t][r];$Ie(e,t)}for(const t of fIe())delete e[t];IIe(e);for(const t in e)Pe(e[t])&&tn(e[t])&&delete e[t];return tn(e)?void 0:e}function IIe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=mJ(e.title);tn(t)||(e.style["group-title"]={...e.style["group-title"],...t}),tn(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),tn(r)?delete e.title:e.title=r}function $Ie(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};tn(s)||(e.style[n??t]=s),delete e[t]}function aS(e){return Te(e,"layer")}function MIe(e){return Te(e,"repeat")}function LIe(e){return!pe(e.repeat)&&Te(e.repeat,"layer")}class bI{map(t,n){return Qw(t)?this.mapFacet(t,n):MIe(t)?this.mapRepeat(t,n):_I(t)?this.mapHConcat(t,n):sS(t)?this.mapVConcat(t,n):yI(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(aS(t))return this.mapLayer(t,n);if(yc(t))return this.mapUnit(t,n);throw new Error(MR(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const PIe={zero:1,center:1,normalize:1};function BIe(e){return ze(PIe,e)}const UIe=new Set([YJ,Yw,Xw,mb,Jw,QR,eI,Kw,KJ,ZR]),zIe=new Set([Yw,Xw,YJ]);function Md(e){return Fe(e)&&up(e)==="quantitative"&&!e.bin}function f8(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),a=e[t],o=e[i];if(Fe(a)&&Fe(o))if(Md(a)&&Md(o)){if(a.stack)return t;if(o.stack)return i;const l=Fe(a)&&!!a.aggregate,c=Fe(o)&&!!o.aggregate;if(l!==c)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Md(a))return t;if(Md(o))return i}else{if(Md(a))return s&&n==="vertical"?void 0:t;if(Md(o))return s&&n==="horizontal"?void 0:i}}function HIe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function jZ(e,t){var g,m;const n=Ko(e)?e:{type:e},r=n.type;if(!UIe.has(r))return null;const i=f8(t,"x",n)||f8(t,"theta",n);if(!i)return null;const s=t[i],a=Fe(s)?$e(s,{}):void 0,o=HIe(i),l=[],c=new Set;if(t[o]){const x=t[o],y=Fe(x)?$e(x,{}):void 0;y&&y!==a&&(l.push(o),c.add(y))}const u=o==="x"?"xOffset":"yOffset",f=t[u],h=Fe(f)?$e(f,{}):void 0;h&&h!==a&&(l.push(u),c.add(h));const d=YOe.reduce((x,y)=>{if(y!=="tooltip"&&nh(t,y)){const v=t[y];for(const _ of Be(v)){const b=eo(_);if(b.aggregate)continue;const w=$e(b,{});(!w||!c.has(w))&&x.push({channel:y,fieldDef:b})}}return x},[]);let p;return s.stack!==void 0?Gu(s.stack)?p=s.stack?"zero":null:p=s.stack:zIe.has(r)&&(p="zero"),!p||!BIe(p)||wZ(t)&&d.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((m=s==null?void 0:s.scale)==null?void 0:m.type)!==Sr.LINEAR&&s!=null&&s.stack&&Ae(pDe(s.scale.type)),ot(t[ul(i)])?(s.stack!==void 0&&Ae(dDe(i)),null):(Fe(s)&&s.aggregate&&!lNe.has(s.aggregate)&&Ae(gDe(s.aggregate)),{groupbyChannels:l,groupbyFields:c,fieldChannel:i,impute:s.impute===null?!1:nf(r),stackBy:d,offset:p}))}function GZ(e,t,n){const r=wr(e),i=Qt("orient",r,n);if(r.orient=GIe(r.type,t,i),i!==void 0&&i!==r.orient&&Ae(JNe(r.orient,i)),r.type==="bar"&&r.orient){const l=Qt("cornerRadiusEnd",r,n);if(l!==void 0){const c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:xRe[r.orient];for(const u of c)r[u]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Qt("opacity",r,n),a=Qt("fillOpacity",r,n);return s===void 0&&a===void 0&&(r.opacity=WIe(r.type,t)),Qt("cursor",r,n)===void 0&&(r.cursor=VIe(r,t,n)),r}function VIe(e,t,n){return t.href||e.href||Qt("href",e,n)?"pointer":e.cursor}function WIe(e,t){if(yt([Jw,ZR,QR,eI],e)&&!wZ(t))return .7}function jIe(e,t,{graticule:n}){if(n)return!1;const r=Yo("filled",e,t),i=e.type;return $n(r,i!==Jw&&i!==Kw&&i!==mb)}function GIe(e,t,n){switch(e){case Jw:case QR:case eI:case KJ:case oRe:case aRe:return}const{x:r,y:i,x2:s,y2:a}=t;switch(e){case Yw:if(Fe(r)&&(Er(r.bin)||Fe(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Fe(i)&&(Er(i.bin)||Fe(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||s){if(n)return n;if(!s)return(Fe(r)&&r.type===Ih&&!ln(r.bin)||vb(r))&&Fe(i)&&Er(i.bin)?"horizontal":"vertical";if(!a)return(Fe(i)&&i.type===Ih&&!ln(i.bin)||vb(i))&&Fe(r)&&Er(r.bin)?"vertical":"horizontal"}case mb:if(s&&!(Fe(r)&&Er(r.bin))&&a&&!(Fe(i)&&Er(i.bin)))return;case Xw:if(a)return Fe(i)&&Er(i.bin)?"horizontal":"vertical";if(s)return Fe(r)&&Er(r.bin)?"vertical":"horizontal";if(e===mb){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Kw:case ZR:{const o=r8(r),l=r8(i);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l)return"vertical";{const c=Bi(r)&&r.type===lp,u=Bi(i)&&i.type===lp;if(c&&!u)return"vertical";if(!c&&u)return"horizontal"}return}}return"vertical"}function qIe(e){const{point:t,line:n,...r}=e;return Se(r).length>1?r:r.type}function XIe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ts(e[t],["point","line"])});return e}function vA(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Pe(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Pe(t.point)?t.point:{}:void 0}function h8(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class YIe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(yc(t)){const{mark:r,encoding:i}=t,s=Ko(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!vA(s,n[s.type],i);case"area":return!!vA(s,n[s.type],i)||!!h8(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:a,mark:o,name:l,encoding:c,...u}=t,f=iS(c,i),h=Ko(o)?o:{type:o},d=vA(h,i[h.type],f),p=h.type==="area"&&h8(h,i[h.type]),g=[{name:l,...s?{params:s}:{},mark:qIe({...h.type==="area"&&h.opacity===void 0&&h.fillOpacity===void 0?{opacity:.7}:{},...h}),encoding:ts(f,["shape"])}],m=jZ(GZ(h,f,i),f);let x=f;if(m){const{fieldChannel:y,offset:v}=m;x={...f,[y]:{...f[y],...v?{stack:v}:{}}}}return x=ts(x,["y2","x2"]),p&&g.push({...a?{projection:a}:{},mark:{type:"line",...ip(h,["clip","interpolate","tension","tooltip"]),...p},encoding:x}),d&&g.push({...a?{projection:a}:{},mark:{type:"point",opacity:1,filled:!0,...ip(h,["clip","tooltip"]),...d},encoding:x}),r({...u,layer:g},{...n,config:XIe(i)})}}function KIe(e,t){return t?Kx(e)?XZ(e,t):qZ(e,t):e}function yA(e,t){return t?XZ(e,t):e}function KF(e,t,n){const r=t[e];if(DRe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ae(CNe(r.repeat));return}return t}function qZ(e,t){if(e=KF("field",e,t),e!==void 0){if(e===null)return null;if(oI(e)&&Gl(e.sort)){const n=KF("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function d8(e,t){if(Fe(e))return qZ(e,t);{const n=KF("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function p8(e,t){if(ot(e)){const n=d8(e,t);if(n)return n;if(Jx(e))return{condition:e.condition}}else{if(Zx(e)){const n=d8(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function XZ(e,t){const n={};for(const r in e)if(Te(e,r)){const i=e[r];if(pe(i))n[r]=i.map(s=>p8(s,t)).filter(s=>s);else{const s=p8(i,t);s!==void 0&&(n[r]=s)}}return n}class JIe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(yc(t)){const{encoding:n,mark:r}=t;if(r==="line"||Ko(r)&&r.type==="line")for(const i of GOe){const s=ld(i),a=n[s];if(n[i]&&(Fe(a)&&!Er(a.bin)||hl(a)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ae(KNe(!!i.x2,!!i.y2)),r({...t,mark:Pe(s)?{...s,type:"rule"}:"rule"},n)}}class ZIe extends bI{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[eIe,rIe,uIe,new YIe,new JIe]}map(t,n){if(yc(t)){const r=nh(t.encoding,Wl),i=nh(t.encoding,jl),s=nh(t.encoding,Lw);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=yA(t.encoding,n.repeater),a={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(a,n.config))return l.run(a,n,o);return a}mapRepeat(t,n){return LIe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:a,column:o,layer:l}=r,{repeater:c={},repeaterPrefix:u=""}=n;return a||o?this.mapRepeat({...t,repeat:{...a?{row:a}:{},...o?{column:o}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(f=>{const h={...c,layer:f},d=`${(i.name?`${i.name}_`:"")+u}child__layer_${xn(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:h,repeaterPrefix:d});return p.name=d,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...a}=t;!pe(r)&&t.columns&&(t=ts(t,["columns"]),Ae(qP("repeat")));const o=[],{repeater:l={},repeaterPrefix:c=""}=n,u=!pe(r)&&r.row||[l?l.row:null],f=!pe(r)&&r.column||[l?l.column:null],h=pe(r)&&r||[l?l.repeat:null];for(const p of h)for(const g of u)for(const m of f){const x={repeat:p,row:g,column:m,layer:l.layer},y=(i.name?`${i.name}_`:"")+c+"child__"+(pe(r)?`${xn(p)}`:(r.row?`row_${xn(g)}`:"")+(r.column?`column_${xn(m)}`:"")),v=this.map(i,{...n,repeater:x,repeaterPrefix:y});v.name=y,o.push(ts(v,["data"]))}const d=pe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...a,columns:d,concat:o}}mapFacet(t,n){const{facet:r}=t;return Kx(r)&&t.columns&&(t=ts(t,["columns"]),Ae(qP("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:a,config:o}=n,l=m8({parentProjection:a,projection:i}),c=g8({parentEncoding:s,encoding:yA(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...c?{encoding:c}:{}},{config:o})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...a}=t.encoding,{mark:o,width:l,projection:c,height:u,view:f,params:h,encoding:d,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),x=yA(a,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...u?{height:u}:{},...f?{view:f}:{},...c?{projection:c}:{},mark:o,encoding:x,...h?{params:h}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ae(XNe([...r?[Wl]:[],...i?[jl]:[]]));const a={},o={};for(const l of[Wl,jl]){const c=t[l];if(c){const{align:u,center:f,spacing:h,columns:d,...p}=c;a[l]=p;for(const g of["align","center","spacing"])c[g]!==void 0&&(o[g]??(o[g]={}),o[g][l]=c[g])}}return{facetMapping:a,layout:o}}else{const{align:a,center:o,spacing:l,columns:c,...u}=s;return{facetMapping:KIe(u,n.repeater),layout:{...a?{align:a}:{},...o?{center:o}:{},...l?{spacing:l}:{},...c?{columns:c}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:a,...o}=t,l={...i,parentEncoding:g8({parentEncoding:n,encoding:s,layer:!0}),parentProjection:m8({parentProjection:r,projection:a})};return super.mapLayer({...o,...t.name?{name:[l.repeaterPrefix,t.name].filter(c=>c).join("_")}:{}},l)}}function g8({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Se(e),...Se(t)]);for(const s of i){const a=t[s],o=e[s];if(ot(a)){const l={...o,...a};r[s]=l}else Zx(a)?r[s]={...a,condition:{...o,...a.condition}}:a||a===null?r[s]=a:(n||Qa(o)||Ye(o)||ot(o)||pe(o))&&(r[s]=o)}}else r=t;return!r||tn(r)?void 0:r}function m8(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ae(LNe({parentProjection:t,projection:n})),n??t}function EI(e){return Te(e,"filter")}function QIe(e){return Te(e,"stop")}function YZ(e){return Te(e,"lookup")}function e$e(e){return Te(e,"data")}function t$e(e){return Te(e,"param")}function n$e(e){return Te(e,"pivot")}function r$e(e){return Te(e,"density")}function i$e(e){return Te(e,"quantile")}function s$e(e){return Te(e,"regression")}function a$e(e){return Te(e,"loess")}function o$e(e){return Te(e,"sample")}function l$e(e){return Te(e,"window")}function c$e(e){return Te(e,"joinaggregate")}function u$e(e){return Te(e,"flatten")}function f$e(e){return Te(e,"calculate")}function KZ(e){return Te(e,"bin")}function h$e(e){return Te(e,"impute")}function d$e(e){return Te(e,"timeUnit")}function p$e(e){return Te(e,"aggregate")}function g$e(e){return Te(e,"stack")}function m$e(e){return Te(e,"fold")}function x$e(e){return Te(e,"extent")&&!Te(e,"density")&&!Te(e,"regression")}function v$e(e){return e.map(t=>EI(t)?{filter:y0(t.filter,VDe)}:t)}class y$e extends bI{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=x8(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=x8(t,n),t.encoding){const r={};for(const[i,s]of Cu(t.encoding))r[i]=JZ(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Cu(r).map(([s,a])=>{const{init:o,bind:l,empty:c,...u}=a;u.type==="single"?(u.type="point",u.toggle=!1):u.type==="multi"&&(u.type="point"),n.emptySelections[s]=c!=="none";for(const f of Dr(n.selectionPredicates[s]??{}))f.empty=c!=="none";return{name:s,value:o,select:u,bind:l}})}:t}}function x8(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(EI(s))return{filter:JF(s,t)};if(KZ(s)&&cd(s.bin))return{...s,bin:ZZ(s.bin)};if(YZ(s)){const{selection:a,...o}=s.from;return a?{...s,from:{param:a,...o}}:s}return s});return{...r,transform:i}}return e}function JZ(e,t){var r,i;const n=at(e);if(Fe(n)&&cd(n.bin)&&(n.bin=ZZ(n.bin)),dd(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...a}=n.scale.domain;n.scale.domain={...a,...s?{param:s}:{}}}if(Jx(n))if(pe(n.condition))n.condition=n.condition.map(s=>{const{selection:a,param:o,test:l,...c}=s;return o?s:{...c,test:JF(s,t)}});else{const{selection:s,param:a,test:o,...l}=JZ(n.condition,t);n.condition=a?n.condition:{...l,test:JF(n.condition,t)}}return n}function ZZ(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function JF(e,t){const n=r=>y0(r,i=>{var s;const a=t.emptySelections[i]??!0,o={param:i,empty:a};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(o),o});return e.selection?n(e.selection):y0(e.test||e.filter,r=>r.selection?n(r.selection):r)}class ZF extends bI{map(t,n){const r=n.selections??[];if(t.params&&!yc(t)){const i=[];for(const s of t.params)vI(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const a of r)if(!a.views||!a.views.length)s.push(a);else for(const o of a.views)(Ue(o)&&(o===t.name||i.includes(o))||pe(o)&&o.map(l=>i.indexOf(l)).every((l,c,u)=>l!==-1&&(c===0||l>u[c-1])))&&s.push(a);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=ZF.prototype[e];ZF.prototype[e]=function(n,r){return t.call(this,n,_$e(n,r))}}function _$e(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function QZ(e,t){t===void 0&&(t=WZ(e.config));const n=S$e(e,t),{width:r,height:i}=e,s=T$e(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const b$e=new ZIe,E$e=new y$e,w$e=new ZF;function S$e(e,t={}){const n={config:t};return w$e.map(b$e.map(E$e.map(e,n),n),n)}function v8(e){return Ue(e)?{type:e}:e??{}}function T$e(e,t,n){let{width:r,height:i}=t;const s=yc(e)||aS(e),a={};s?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(Ae(VP("width")),r=void 0),i=="container"&&(Ae(VP("height")),i=void 0));const o={type:"pad",...a,...n?v8(n.autosize):{},...v8(e.autosize)};if(o.type==="fit"&&!s&&(Ae(xNe),o.type="pad"),r=="container"&&!(o.type=="fit"||o.type=="fit-x")&&Ae(WP("width")),i=="container"&&!(o.type=="fit"||o.type=="fit-y")&&Ae(WP("height")),!Ts(o,{type:"pad"}))return o}function A$e(e){return["fit","fit-x","fit-y"].includes(e)}function k$e(e){return e?`fit-${Hw(e)}`:"fit"}const C$e=["background","padding"];function y8(e,t){const n={};for(const r of C$e)e&&e[r]!==void 0&&(n[r]=Es(e[r]));return t&&(n.params=e.params),n}class _c{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new _c(at(this.explicit),at(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return $n(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Se(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function To(e){return{explicit:!0,value:e}}function ms(e){return{explicit:!1,value:e}}function eQ(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:oS(t,n,r,i)}}function oS(e,t,n,r){return e.explicit&&t.explicit&&Ae(aDe(n,r,e.value,t.value)),e}function Nu(e,t,n,r,i=oS){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ts(e.value,t.value)?e:i(e,t,n,r)}class F$e extends _c{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function dp(e){return Te(e,"url")}function W1(e){return Te(e,"values")}function tQ(e){return Te(e,"name")&&!dp(e)&&!W1(e)&&!du(e)}function du(e){return e&&(nQ(e)||rQ(e)||wI(e))}function nQ(e){return Te(e,"sequence")}function rQ(e){return Te(e,"sphere")}function wI(e){return Te(e,"graticule")}var En;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(En||(En={}));function iQ({invalid:e,isPath:t}){switch(QJ(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function O$e(e){const{marks:t,scales:n}=iQ(e);return t===n?En.Main:n==="include-invalid-values"?En.PreFilterInvalid:En.PostFilterInvalid}class Jt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ae(INe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class ns extends Jt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${eJ()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function _A(e){return e.as!==void 0}function _8(e){return`${e}_end`}class Lo extends Jt{clone(){return new Lo(null,at(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,a)=>{const{field:o,timeUnit:l}=s;if(l){let c;if(hd(l)){if(bn(n)){const{mark:u,markDef:f,config:h}=n,d=Ou({fieldDef:s,markDef:f,config:h});(V1(u)||d)&&(c={timeUnit:mr(l),field:o})}}else c={as:$e(s,{forAs:!0}),field:o,timeUnit:l};if(bn(n)){const{mark:u,markDef:f,config:h}=n,d=Ou({fieldDef:s,markDef:f,config:h});V1(u)&&Mn(a)&&d!==.5&&(c.rectBandPosition=d)}c&&(i[At(c)]=c)}return i},{});return tn(r)?null:new Lo(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=mr(r),a={...i,timeUnit:s};return new Lo(t,{[At(a)]:a})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Cu(this.timeUnits)){const s=_A(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Dr(this.timeUnits).map(t=>_A(t)?t.as:_8(t.field)))}dependentFields(){return new Set(Dr(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${At(this.timeUnits)}`}assemble(){const t=[];for(const n of Dr(this.timeUnits)){const{rectBandPosition:r}=n,i=mr(n.timeUnit);if(_A(n)){const{field:s,as:a}=n,{unit:o,utc:l,...c}=i,u=[a,`${a}_end`];t.push({field:va(s),type:"timeunit",...o?{units:Gw(o)}:{},...l?{timezone:"utc"}:{},...c,as:u}),t.push(...b8(u,r,i))}else if(n){const{field:s}=n,a=s.replaceAll("\\.","."),o=sQ({timeUnit:i,field:a}),l=_8(a);t.push({type:"formula",expr:o,as:l}),t.push(...b8([a,l],r,i))}}return t}}const lS="offsetted_rect_start",cS="offsetted_rect_end";function sQ({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=$J(r),{part:a,step:o}=BJ(s,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', ${Xt(t)}, ${n?-o:o})`}function b8([e,t],n,r){if(n!==void 0&&n!==.5){const i=Xt(e),s=Xt(t);return[{type:"formula",expr:E8([sQ({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${lS}`},{type:"formula",expr:E8([i,s],n+.5),as:`${e}_${cS}`}]}return[]}function E8([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const tv="_tuple_fields";class N$e{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const D$e={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new N$e),s={},a={},o=new Set,l=(p,g)=>{const m=g==="visual"?p.channel:p.field;let x=xn(`${r}_${m}`);for(let y=1;o.has(x);y++)x=xn(`${r}_${m}_${y}`);return o.add(x),{[g]:x}},c=t.type,u=e.config.selection[c],f=n.value!==void 0?Be(n.value):null;let{fields:h,encodings:d}=Pe(n.select)?n.select:{};if(!h&&!d&&f){for(const p of f)if(Pe(p))for(const g of Se(p))jOe(g)?(d||(d=[])).push(g):c==="interval"?(Ae(kNe),d=u.encodings):(h??(h=[])).push(g)}!h&&!d&&(d=u.encodings,"fields"in u&&(h=u.fields));for(const p of d??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){Ae(vNe(p,g.aggregate));continue}else if(!m){Ae(GP(p));continue}if(g.timeUnit&&!hd(g.timeUnit)){m=e.vgField(p);const x={timeUnit:g.timeUnit,as:m,field:g.field};a[At(x)]=x}if(!s[m]){const x=c==="interval"&&fl(p)&&Za(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",y={field:m,channel:p,type:x,index:i.items.length};y.signals={...l(y,"data"),...l(y,"visual")},i.items.push(s[m]=y),i.hasField[m]=s[m],i.hasSelectionId=i.hasSelectionId||m===to,aJ(p)?(y.geoChannel=p,y.channel=sJ(p),i.hasChannel[y.channel]=s[m]):i.hasChannel[p]=s[m]}}else Ae(GP(p))}for(const p of h??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===to}f&&(t.init=f.map(p=>i.items.map(g=>Pe(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),tn(a)||(i.timeUnit=new Lo(null,a))},signals:(e,t,n)=>{const r=t.name+tv;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(cQ)})}},aQ="_curr",T_="anim_value",jd="anim_clock",QF="eased_anim_clock",oQ="min_extent",lQ="max_range_extent",bA="last_tick_at",EA="is_playing",R$e=1/60*1e3,I$e=(e,t)=>[{name:QF,update:jd},{name:`${e}_domain`,init:`domain('${t}')`},{name:oQ,init:`extent(${e}_domain)[0]`},{name:lQ,init:`extent(range('${t}'))[1]`},{name:T_,update:`invert('${t}', ${QF})`}],$$e={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Po(t)&&(n=n.concat([{name:jd,init:"0",on:[{events:{type:"timer",throttle:R$e},update:`${EA} ? (${jd} + (now() - ${bA}) > ${lQ} ? 0 : ${jd} + (now() - ${bA})) : ${jd}`}]},{name:bA,init:"now()",on:[{events:[{signal:jd},{signal:EA}],update:"now()"}]},{name:EA,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+tv,s=t.project,a="(item().isVoronoi ? datum.datum : datum)",o=Dr(e.component.selection??{}).reduce((u,f)=>f.type==="interval"?u.concat(f.name+E0):u,[]).map(u=>`indexof(item().mark.name, '${u}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let c=`unit: ${rh(e)}, `;if(t.project.hasSelectionId)c+=`${to}: ${a}[${Oe(to)}]`;else if(Po(t))c+=`fields: ${i}, values: [${T_} ? ${T_} : ${oQ}]`;else{const u=s.items.map(f=>{const h=e.fieldDef(f.channel);return h!=null&&h.bin?`[${a}[${Oe(e.vgField(f.channel,{}))}], ${a}[${Oe(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${a}[${Oe(f.field)}]`}).join(", ");c+=`fields: ${i}, values: [${u}]`}if(Po(t))return n.concat(I$e(t.name,e.scaleName(Ku)),[{name:r+oc,on:[{events:[{signal:QF},{signal:T_}],update:`{${c}}`,force:!0}]}]);{const u=t.events;return n.concat([{name:r+oc,on:u?[{events:u,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}}};function cQ(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=va(i.field),i}function Lh(e,t=!0,n=ui){if(pe(e)){const r=e.map(i=>Lh(i,t,n));return t?`[${r.join(", ")}]`:r}else if(fd(e))return n(t?Rh(e):NDe(e));return t?n(nn(e)):e}function M$e(e,t){for(const n of Dr(e.component.selection??{})){const r=n.name;let i=`${r}${oc}, ${n.resolve==="global"?"true":`{unit: ${rh(e)}}`}`;for(const s of fS)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+cMe,on:[{events:{signal:n.name+oc},update:`modify(${Oe(n.name+Ph)}, ${i})`}]})}return SI(t)}function L$e(e,t){if(e.component.selection&&Se(e.component.selection).length){const n=Oe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Xu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return SI(t)}function P$e(e,t){let n=!1;for(const r of Dr(e.component.selection??{})){const i=r.name,s=Oe(i+Ph);if(t.filter(o=>o.name===i).length===0){const o=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${AQ}(${s}, ${Oe(o)}${l}`})}n=!0;for(const o of fS)o.defined(r)&&o.topLevelSignals&&(t=o.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),SI(t)}function B$e(e,t){const n=[],r=[],i=rh(e,{escape:!1});for(const s of Dr(e.component.selection??{})){const a={name:s.name+Ph};if(s.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:to}}]),s.init){const l=s.project.items.map(cQ);a.values=s.project.hasSelectionId?s.init.map(c=>({unit:i,[to]:Lh(c,!1)[0]})):s.init.map(c=>({unit:i,fields:l,values:Lh(c,!1)}))}if([...n,...t].filter(l=>l.name===s.name+Ph).length||n.push(a),Po(s)&&t.length){const l=e.lookupDataSource(e.getDataName(En.Main)),c=t.find(f=>f.name===l),u=c.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(u){c.transform=c.transform.filter(h=>h!==u);const f={name:c.name+aQ,source:c.name,transform:[u]};r.push(f)}}}return n.concat(t,r)}function uQ(e,t){for(const n of Dr(e.component.selection??{}))for(const r of fS)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function U$e(e,t){for(const n of e.children)bn(n)&&(t=uQ(n,t));return t}function z$e(e,t,n,r){const i=NQ(e,t.param,t);return{signal:Za(n.get("type"))&&pe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function SI(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const ql={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!fl(i))continue;const s=e.getScaleComponent(i),a=s?s.get("type"):void 0;if(a=="sequential"&&Ae(ENe),!s||!Za(a)){Ae(bNe);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(a=>n.filter(o=>o.name===a.signals.data).length===0);if(!e.parent||t3(e)||r.length===0)return n;const i=n.find(a=>a.name===t.name);let s=i.update;if(s.includes(AQ))i.update=`{${r.map(a=>`${Oe(va(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of r){const o=`${Oe(va(a.field))}: ${a.signals.data}`;s.includes(o)||(s=`${s.substring(0,s.length-1)}, ${o}}`)}i.update=s}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!t3(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function e3(e,t){return`domain(${Oe(e.scaleName(t))})`}function t3(e){return e.parent&&eg(e.parent)&&(!e.parent.parent||t3(e.parent.parent))}const E0="_brush",fQ="_scale_trigger",$g="geo_interval_init_tick",hQ="_init",H$e="_center",V$e={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Pe(n.select)?n.select:{}};i.fields=[to],i.encodings||(i.encodings=n.value?Se(n.value):[uo,co]),n.select={type:"interval",...i}}if(t.translate&&!ql.defined(t)){const i=`!event.item || event.item.mark.name !== ${Oe(t.name+E0)}`;for(const s of t.events){if(!s.between){Ae(`${s} is not an ordered event stream for interval selections.`);continue}const a=Be((r=s.between[0]).filter??(r.filter=[]));a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+oc,s=Dr(t.project.hasChannel).filter(o=>o.channel===vn||o.channel===_r),a=t.init?t.init[0]:null;if(n.push(...s.reduce((o,l)=>o.concat(W$e(e,t,l,a&&a[l.index])),[])),e.hasProjection){const o=Oe(e.projectionName()),l=e.projectionName()+H$e,{x:c,y:u}=t.project.hasChannel,f=c&&c.signals.visual,h=u&&u.signals.visual,d=c?a&&a[c.index]:`${l}[0]`,p=u?a&&a[u.index]:`${l}[1]`,g=b=>e.getSizeSignalRef(b).signal,m=`[[${f?f+"[0]":"0"}, ${h?h+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${h?h+"[1]":g("height")}]]`;a&&(n.unshift({name:r+hQ,init:`[scale(${o}, [${c?d[0]:d}, ${u?p[0]:p}]), scale(${o}, [${c?d[1]:d}, ${u?p[1]:p}])]`}),(!c||!u)&&(n.find(w=>w.name===l)||n.unshift({name:l,update:`invert(${o}, [${g("width")}/2, ${g("height")}/2])`})));const x=`intersect(${m}, {markname: ${Oe(e.getName("marks"))}}, unit.mark)`,y=`{unit: ${rh(e)}}`,v=`vlSelectionTuples(${x}, ${y})`,_=s.map(b=>b.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...a?[{signal:$g}]:[]],update:v}]})}else{if(!ql.defined(t)){const c=r+fQ,u=s.map(f=>{const h=f.channel,{data:d,visual:p}=f.signals,g=Oe(e.scaleName(h)),m=e.getScaleComponent(h).get("type"),x=Za(m)?"+":"";return`(!isArray(${d}) || (${x}invert(${g}, ${p})[0] === ${x}${d}[0] && ${x}invert(${g}, ${p})[1] === ${x}${d}[1]))`});u.length&&n.push({name:c,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:u.join(" && ")+` ? ${c} : {}`}]})}const o=s.map(c=>c.signals.data),l=`unit: ${rh(e)}, fields: ${r+tv}, values`;return n.concat({name:i,...a?{init:`{${l}: ${Lh(a)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${l}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(bn(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===$g).length||n.unshift({name:$g,value:null,on:[{events:"timer{1}",update:`${$g} === null ? {} : ${$g}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,a=i==null?void 0:i.signals.visual,o=s==null?void 0:s.signals.visual,l=`data(${Oe(t.name+Ph)})`;if(ql.defined(t)||!i&&!s)return n;const c={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:s!==void 0?{signal:`${o}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of Se(c))c[m]=[{test:`${l}.length && ${l}[0].unit === ${rh(e)}`,...c[m]},{value:0}];const{fill:u,fillOpacity:f,cursor:h,...d}=t.mark,p=Se(d).reduce((m,x)=>(m[x]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,s!==void 0&&`${o}[0] !== ${o}[1]`].filter(y=>y).join(" && "),value:d[x]},{value:null}],m),{}),g=h??(t.translate?"move":null);return[{name:`${r+E0}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:u},fillOpacity:{value:f}},update:c}},...n,{name:r+E0,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...c,...p}}}]}};function W$e(e,t,n,r){const i=!e.hasProjection,s=n.channel,a=n.signals.visual,o=Oe(i?e.scaleName(s):e.projectionName()),l=h=>`scale(${o}, ${h})`,c=e.getSizeSignalRef(s===vn?"width":"height").signal,u=`${s}(unit)`,f=t.events.reduce((h,d)=>[...h,{events:d.between[0],update:`[${u}, ${u}]`},{events:d,update:`[${a}[0], clamp(${u}, 0, ${c})]`}],[]);if(i){const h=n.signals.data,d=ql.defined(t),p=e.getScaleComponent(s),g=p?p.get("type"):void 0,m=r?{init:Lh(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+fQ},update:Za(g)?`[${l(`${h}[0]`)}, ${l(`${h}[1]`)}]`:"[0, 0]"}),d?[{name:h,on:[]}]:[{name:a,...m,on:f},{name:h,...r?{init:Lh(r)}:{},on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${o}, ${a})`}]}]}else{const h=s===vn?0:1,d=t.name+hQ,p=r?{init:`[${d}[0][${h}], ${d}[1][${h}]]`}:{value:[]};return[{name:a,...p,on:f}]}}function Kp({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=Jx(t)&&t.condition;let a=[];s&&(a=Be(s).map(c=>{const u=i(c);if(NRe(c)){const{param:f,empty:h}=c;return{test:OQ(e,{param:f,empty:h}),...u}}else return{test:Ab(e,c.test),...u}})),r!==void 0&&a.push(r);const o=i(t);return o!==void 0&&a.push(o),a.length>1||a.length===1&&a[0].test?{[n]:a}:a.length===1?{[n]:a[0]}:{}}function TI(e,t="text"){const n=e.encoding[t];return Kp({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>uS(r,e.config),invalidValueRef:void 0})}function uS(e,t,n="datum"){if(e){if(Qa(e))return un(e.value);if(ot(e)){const{format:r,formatType:i}=_b(e);return sI({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function dQ(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,a=n.tooltip;if(pe(a))return{tooltip:w8({tooltip:a},s,i,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Kp({model:e,channelDef:a,vgChannel:"tooltip",mainRefFn:c=>{const u=uS(c,i,o);if(u)return u;if(c===null)return;let f=Qt("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Ue(f))return{value:f};if(Pe(f))return Ye(f)?f:f.content==="encoding"?w8(n,s,i,t):{signal:o}},invalidValueRef:void 0})}}function pQ(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,a=r?"datum.datum":"datum",o=[];function l(u,f){const h=ld(f),d=Bi(u)?u:{...u,type:e[h].type},p=d.title||cI(d,i),g=Be(p).join(", ").replaceAll(/"/g,'\\"');let m;if(Mn(f)){const x=f==="x"?"x2":"y2",y=eo(e[x]);if(Er(d.bin)&&y){const v=$e(d,{expr:a}),_=$e(y,{expr:a}),{format:b,formatType:w}=_b(d);m=Yx(v,_,b,w,i),s.add(x)}}if((Mn(f)||f===Sa||f===lo)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:x,formatType:y}=_b(d);m=sI({fieldOrDatumDef:d,format:x,formatType:y,expr:a,config:i,normalizeStack:!0}).signal}m??(m=uS(d,i,a).signal),o.push({channel:f,key:g,value:m})}fI(e,(u,f)=>{Fe(u)?l(u,f):eS(u)&&l(u.condition,f)});const c={};for(const{channel:u,key:f,value:h}of o)!s.has(u)&&!c[f]&&(c[f]=h);return c}function w8(e,t,n,{reactiveGeom:r}={}){const i=pQ(e,t,n,{reactiveGeom:r}),s=Cu(i).map(([a,o])=>`"${a}": ${o}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function j$e(e){const{markDef:t,config:n}=e,r=Qt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...G$e(e),...q$e(e)}}function G$e(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Qt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:ze(pNe,t)?{}:{ariaRoleDescription:{value:t}}}function q$e(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return Kp({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>uS(l,e.config),invalidValueRef:void 0});const a=Qt("description",n,r);if(a!=null)return{description:un(a)};if(r.aria===!1)return{};const o=pQ(t,i,r);if(!tn(o))return{description:{signal:Cu(o).map(([l,c],u)=>`"${u>0?"; ":""}${l}: " + (${c})`).join(" + ")}}}function Tr(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:a}=n;let{defaultRef:o,defaultValue:l}=n;const c=i[e];o===void 0&&(l??(l=Qt(e,r,s,{vgChannel:a,ignoreVgConfig:!Jx(c)})),l!==void 0&&(o=un(l)));const u={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=tZ({...u,scaleChannel:e,channelDef:c});return Kp({model:t,channelDef:c,vgChannel:a??e,invalidValueRef:f,mainRefFn:d=>iI({...u,channel:e,channelDef:d,stack:null,defaultRef:o})})}function gQ(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,a=t.filled??Qt("filled",n,i),o=yt(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Qt(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??o,c=Qt(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],u=a?"fill":"stroke",f={...l?{fill:un(l)}:{},...c?{stroke:un(c)}:{}};return n.color&&(a?n.fill:n.stroke)&&Ae(AJ("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Tr("color",e,{vgChannel:u,defaultValue:a?l:c}),...Tr("fill",e,{defaultValue:r.fill?l:void 0}),...Tr("stroke",e,{defaultValue:r.stroke?c:void 0})}}function X$e(e){const{encoding:t,mark:n}=e,r=t.order;return!nf(n)&&Qa(r)?Kp({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>un(i.value),invalidValueRef:void 0}):{}}function pp({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,a=t[s],o=n[s];if((s==="xOffset"||s==="yOffset")&&o)return{offsetType:"encoding",offset:iI({channel:s,channelDef:o,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:un(a),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function Ni(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:a,stack:o}=t,l=i[e],c=i[ul(e)],u=t.scaleName(e),f=t.getScaleComponent(e),{offset:h,offsetType:d}=pp({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=AI({model:t,defaultPos:n,channel:e,scaleName:u,scale:f}),g=!l&&Mn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Y$e({channel:e,channelDef:l,channel2Def:c,markDef:s,config:a,scaleName:u,scale:f,stack:o,offset:h,defaultRef:p,bandPosition:d==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function Y$e(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:a}=e;if(ot(n)&&i&&t===i.fieldChannel){if(Fe(n)){let o=n.bandPosition;if(o===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return xb({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:s})}return th(n,r,{suffix:"end"},{offset:s})}return rI(e)}function AI({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:a}=e;return()=>{const o=ld(n),l=Fu(n),c=Qt(n,s,a,{vgChannel:l});if(c!==void 0)return Pm(n,c);switch(t){case"zeroOrMin":return S8({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:o,config:a});case"zeroOrMax":return S8({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:a});case"mid":return{...e[us(n)],mult:.5}}}}function S8({mainChannel:e,config:t,...n}){const r=eZ(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:a}=i.zeroOrMax;return{signal:`min(${s},${a})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const K$e={left:"x",center:"xc",right:"x2"},J$e={top:"y",middle:"yc",bottom:"y2"};function mQ(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Fu(e);const i=e==="x"?"align":"baseline",s=Qt(i,t,n);let a;return Ye(s)?(Ae(YNe(i)),a=void 0):a=s,e==="x"?K$e[a||(r==="top"?"left":"center")]:J$e[a||r]}function Sb(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?xQ(e,t,{defaultPos:n,defaultPos2:r}):Ni(e,t,{defaultPos:n})}function xQ(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,a=ul(e),o=us(e),l=Z$e(t,r,a),c=l[o]?mQ(e,i,s):Fu(e);return{...Ni(e,t,{defaultPos:n,vgChannel:c}),...l}}function Z$e(e,t,n){const{encoding:r,mark:i,markDef:s,stack:a,config:o}=e,l=ld(n),c=us(n),u=Fu(n),f=r[l],h=e.scaleName(l),d=e.getScaleComponent(l),{offset:p}=n in r||n in s?pp({channel:n,markDef:s,encoding:r,model:e}):pp({channel:l,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=us(n),x=e.markDef[m];return x!=null?{[m]:{value:x}}:{[u]:{field:e.getName(n)}}}const g=Q$e({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:o,scaleName:h,scale:d,stack:a,offset:p,defaultRef:void 0});return g!==void 0?{[u]:g}:dy(n,s)||dy(n,{[n]:HF(n,s,o.style),[c]:HF(c,s,o.style)})||dy(n,o[i])||dy(n,o.mark)||{[u]:AI({model:e,defaultPos:t,channel:n,scaleName:h,scale:d})()}}function Q$e({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:a,stack:o,offset:l,defaultRef:c}){return ot(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?th(t,s,{suffix:"start"},{offset:l}):rI({channel:e,channelDef:n,scaleName:s,scale:a,stack:o,markDef:r,config:i,offset:l,defaultRef:c})}function dy(e,t){const n=us(e),r=Fu(e);if(t[r]!==void 0)return{[r]:Pm(e,t[r])};if(t[e]!==void 0)return{[r]:Pm(e,t[e])};if(t[n]){const i=t[n];if($h(i))Ae(VNe(n));else return{[n]:Pm(e,i)}}}function ac(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,a=ul(t),o=us(t),l=r[t],c=r[a],u=e.getScaleComponent(t),f=u?u.get("type"):void 0,h=i.orient,d=r[o]??r.size??Qt("size",i,n,{vgChannel:o}),p=uJ(t),g=s==="bar"&&(t==="x"?h==="vertical":h==="horizontal")||s==="tick"&&(t==="y"?h==="vertical":h==="horizontal");return Fe(l)&&(ln(l.bin)||Er(l.bin)||l.timeUnit&&!c)&&!(d&&!$h(d))&&!r[p]&&!xr(f)?nMe({fieldDef:l,fieldDef2:c,channel:t,model:e}):(ot(l)&&xr(f)||g)&&!c?tMe(l,t,e):xQ(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function eMe(e,t,n,r,i,s,a){if($h(i))if(n){const l=n.get("type");if(l==="band"){let c=`bandwidth('${t}')`;i.band!==1&&(c=`${i.band} * ${c}`);const u=Yo("minBandSize",{type:a},r);return{signal:u?`max(${za(u)}, ${c})`:c}}else i.band!==1&&(Ae(QNe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Ye(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(ud(l)&&Ut(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:c,rectBandPaddingInner:u,tickBandPaddingInner:f}=r.scale,h=$n(l,a==="tick"?f:a==="bar"?c:u);if(Ye(h))return{signal:`(1 - (${h.signal})) * ${e}`};if(Ut(h))return{signal:`${1-h} * ${e}`}}return{value:YF(r.view,e)-2}}function tMe(e,t,n){var S,A;const{markDef:r,encoding:i,config:s,stack:a}=n,o=r.orient,l=n.scaleName(t),c=n.getScaleComponent(t),u=us(t),f=ul(t),h=uJ(t),d=n.scaleName(h),p=n.getScaleComponent(OR(t)),g=r.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=Tr("size",n,{vgChannel:u,defaultRef:un(r.size)}):Ae(rDe(r.type)));const x=!!m,y=lZ({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(S=c||p)==null?void 0:S.get("type"),useVlSizeChannel:g});m=m||{[u]:eMe(u,d||l,p||c,s,y,!!e,r.type)};const v=((A=c||p)==null?void 0:A.get("type"))==="band"&&$h(y)&&!x?"top":"middle",_=mQ(t,r,s,v),b=_==="xc"||_==="yc",{offset:w,offsetType:E}=pp({channel:t,markDef:r,encoding:i,model:n,bandPosition:b?.5:0}),T=rI({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:c,stack:a,offset:w,defaultRef:AI({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:c}),bandPosition:b?E==="encoding"?0:.5:Ye(y)?{signal:`(1-${y})/2`}:$h(y)?(1-y.band)/2:0});if(u)return{[_]:T,...m};{const C=Fu(f),F=m[u],N=w?{...F,offset:w}:F;return{[_]:T,[C]:pe(T)?[T[0],{...T[1],offset:N}]:{...T,offset:N}}}}function T8(e,t,n,r,i,s,a){if(iJ(e))return 0;const o=e==="x"||e==="y2",l=o?-t/2:t/2;if(Ye(n)||Ye(i)||Ye(r)||s){const c=za(n),u=za(i),f=za(r),h=za(s),p=s?`(${a} < ${h} ? ${o?"":"-"}0.5 * (${h} - (${a})) : ${l})`:l,g=f?`${f} + `:"",m=c?`(${c} ? -1 : 1) * `:"",x=u?`(${u} + ${p})`:p;return{signal:g+m+x}}else return i=i||0,r+(n?-i-l:+i+l)}function nMe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var A;const{config:i,markDef:s,encoding:a}=r,o=r.getScaleComponent(n),l=r.scaleName(n),c=o?o.get("type"):void 0,u=o.get("reverse"),f=lZ({channel:n,fieldDef:e,markDef:s,config:i,scaleType:c}),h=(A=r.component.axes[n])==null?void 0:A[0],d=(h==null?void 0:h.get("translate"))??.5,p=Mn(n)?Qt("binSpacing",s,i)??0:0,g=ul(n),m=Fu(n),x=Fu(g),y=Yo("minBandSize",s,i),{offset:v}=pp({channel:n,markDef:s,encoding:a,model:r,bandPosition:0}),{offset:_}=pp({channel:g,markDef:s,encoding:a,model:r,bandPosition:0}),b=TRe({fieldDef:e,scaleName:l}),w=T8(n,p,u,d,v,y,b),E=T8(g,p,u,d,_??v,y,b),T=Ye(f)?{signal:`(1-${f.signal})/2`}:$h(f)?(1-f.band)/2:.5,S=Ou({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ln(e.bin)||e.timeUnit){const C=e.timeUnit&&S!==.5;return{[x]:A8({fieldDef:e,scaleName:l,bandPosition:T,offset:E,useRectOffsetField:C}),[m]:A8({fieldDef:e,scaleName:l,bandPosition:Ye(T)?{signal:`1-${T.signal}`}:1-T,offset:w,useRectOffsetField:C})}}else if(Er(e.bin)){const C=th(e,l,{},{offset:E});if(Fe(t))return{[x]:C,[m]:th(t,l,{},{offset:w})};if(cd(e.bin)&&e.bin.step)return{[x]:C,[m]:{signal:`scale("${l}", ${$e(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}Ae(FJ(g))}function A8({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return xb({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:lS,endSuffix:cS}:{}})}const rMe=new Set(["aria","width","height"]);function Ta(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?gQ(e):{};return{...iMe(e.markDef,t),...k8("fill",n),...k8("stroke",r),...Tr("opacity",e),...Tr("fillOpacity",e),...Tr("strokeOpacity",e),...Tr("strokeWidth",e),...Tr("strokeDash",e),...X$e(e),...dQ(e),...TI(e,"href"),...j$e(e)}}function k8(e,t){return t?{[e]:t}:{}}function iMe(e,t){return dNe.reduce((n,r)=>(!rMe.has(r)&&Te(e,r)&&t[r]!=="ignore"&&(n[r]=un(e[r])),n),{})}function kI(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var c;let a;if(!fl(s)||!(a=e.getScaleType(s)))return;const o=Vw(i.aggregate),l=nI({scaleChannel:s,markDef:n,config:t,scaleType:a,isCountAggregate:o});if(ERe(l)){const u=e.vgField(s,{expr:"datum",binSuffix:(c=e.stack)!=null&&c.impute?"mid":void 0});u&&r.add(u)}}),r.size>0)return{defined:{signal:[...r].map(s=>qw(s,!0)).join(" && ")}}}function C8(e,t){if(t!==void 0)return{[e]:un(t)}}const wA="voronoi",vQ={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(wA)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(nf(s))return Ae(yNe(s)),n;const a={name:e.getName(wA),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...dQ(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((c,u)=>{const f=c.name??"";f===e.component.mark[0].name?o=u:f.includes(wA)&&(l=!0)}),l||n.splice(o+1,0,a),n}},yQ={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!xI(e.bind),parse:(e,t,n)=>kQ(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,a=t.init&&t.init[0],o=vQ.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,c)=>{const u=xn(`${r}_${l.field}`);n.filter(h=>h.name===u).length||n.unshift({name:u,...a?{init:Lh(a[c])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${Oe(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(c=>c.name===r+oc),a=r+tv,o=i.items.map(c=>xn(`${r}_${c.field}`)),l=o.map(c=>`${c} !== null`).join(" && ");return o.length&&(s.update=`${l} ? {fields: ${a}, values: [${o.join(", ")}]} : null`),delete s.value,delete s.on,n}},Tb="_toggle",_Q={defined:e=>e.type==="point"&&!Po(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Tb,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+oc,r=t.name+Tb;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${rh(e)}}, `)+`${r} ? ${n} : null`}},sMe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Po(e),parse:(e,t)=>{t.clear&&(t.clear=Ue(t.clear)?Xu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(yQ.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===xn(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(a=>a.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const a=n.findIndex(o=>o.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(s=>s.name===t.name+oc);r(i,"null"),_Q.defined(t)&&(i=n.findIndex(s=>s.name===t.name+Tb),r(i,"false"))}return n}},bQ={defined:e=>{const t=e.resolve==="global"&&e.bind&&xI(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==to;return t&&!n&&Ae(wNe),t&&n},parse:(e,t,n)=>{const r=at(n);if(r.select=Ue(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},kQ(t,r),Pe(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=Be(o.filter??[]),o.filter.includes(a)||o.filter.push(a)}const i=xA(t.bind)?t.bind.legend:"click",s=Ue(i)?Xu(i,"view"):Be(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=xA(t.bind)&&t.bind.legend,s=a=>o=>{const l=at(o);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const o=`${xn(a.field)}_legend`,l=`${r}_${o}`;if(n.filter(u=>u.name===l).length===0){const u=i.merge.map(s(`${o}_symbols`)).concat(i.merge.map(s(`${o}_labels`))).concat(i.merge.map(s(`${o}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:u,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(h=>h.name===r+oc),a=r+tv,o=i.items.filter(h=>h.hasLegend).map(h=>xn(`${r}_${xn(h.field)}_legend`)),c=`${o.map(h=>`${h} !== null`).join(" && ")} ? {fields: ${a}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?s.on.push({events:o.map(h=>({signal:h})),update:c}):o.length>0&&(s.update=c,delete s.value,delete s.on);const u=n.find(h=>h.name===r+Tb),f=xA(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push({...u.on[0],events:f}):u.on[0].events=f),n}};function aMe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Dr(e.component.selection??{})){const a=s.project.hasField[r]??s.project.hasChannel[t];if(a&&bQ.defined(s)){const o=n.get("selections")??[];o.push(s.name),n.set("selections",o,!1),a.hasLegend=!0}}}const EQ="_translate_anchor",wQ="_translate_delta",oMe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=ql.defined(t),s=r+EQ,{x:a,y:o}=t.project.hasChannel;let l=Xu(t.translate,"scope");return i||(l=l.map(c=>(c.between[0].markname=r+E0,c))),n.push({name:s,value:{},on:[{events:l.map(c=>c.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${i?e3(e,vn):`slice(${a.signals.visual})`}`:"")+(o!==void 0?`, extent_y: ${i?e3(e,_r):`slice(${o.signals.visual})`}`:"")+"}"}]},{name:r+wQ,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),a!==void 0&&F8(e,t,a,"width",n),o!==void 0&&F8(e,t,o,"height",n),n}};function F8(e,t,n,r,i){const s=t.name,a=s+EQ,o=s+wQ,l=n.channel,c=ql.defined(t),u=i.find(b=>b.name===n.signals[c?"data":"visual"]),f=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(l),d=h&&h.get("type"),p=h&&h.get("reverse"),g=c?l===vn?p?"":"-":p?"-":"":"",m=`${a}.extent_${l}`,x=`${g}${o}.${l} / ${c?`${f}`:`span(${m})`}`,y=!c||!h?"panLinear":d==="log"?"panLog":d==="symlog"?"panSymlog":d==="pow"?"panPow":"panLinear",v=c?d==="pow"?`, ${h.get("exponent")??1}`:d==="symlog"?`, ${h.get("constant")??1}`:"":"",_=`${y}(${m}, ${x}${v})`;u.on.push({events:{signal:o},update:c?_:`clampRange(${_}, 0, ${f})`})}const SQ="_zoom_anchor",TQ="_zoom_delta",lMe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=ql.defined(t),s=r+TQ,{x:a,y:o}=t.project.hasChannel,l=Oe(e.scaleName(vn)),c=Oe(e.scaleName(_r));let u=Xu(t.zoom,"scope");return i||(u=u.map(f=>(f.markname=r+E0,f))),n.push({name:r+SQ,on:[{events:u,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:u,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&O8(e,t,a,"width",n),o!==void 0&&O8(e,t,o,"height",n),n}};function O8(e,t,n,r,i){const s=t.name,a=n.channel,o=ql.defined(t),l=i.find(y=>y.name===n.signals[o?"data":"visual"]),c=e.getSizeSignalRef(r).signal,u=e.getScaleComponent(a),f=u&&u.get("type"),h=o?e3(e,a):l.name,d=s+TQ,p=`${s}${SQ}.${a}`,g=!o||!u?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=o?f==="pow"?`, ${u.get("exponent")??1}`:f==="symlog"?`, ${u.get("constant")??1}`:"":"",x=`${g}(${h}, ${p}, ${d}${m})`;l.on.push({events:{signal:d},update:o?x:`clampRange(${x}, 0, ${c})`})}const Ph="_store",oc="_tuple",cMe="_modify",AQ="vlSelectionResolve",fS=[$$e,V$e,D$e,_Q,yQ,ql,bQ,sMe,oMe,lMe,vQ];function uMe(e){let t=e.parent;for(;t&&!Os(t);)t=t.parent;return t}function rh(e,{escape:t}={escape:!0}){let n=t?Oe(e.name):e.name;const r=uMe(e);if(r){const{facet:i}=r;for(const s of aa)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Oe(r.vgField(s))}])`)}return n}function CI(e){return Dr(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function kQ(e,t){(Ue(t.select)||!t.select.on)&&delete e.events,(Ue(t.select)||!t.select.clear)&&delete e.clear,(Ue(t.select)||!t.select.toggle)&&delete e.toggle}function Po(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function n3(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...n3(e.object)),t.push(...n3(e.property))),t)}function CQ(e){return e.object.type==="MemberExpression"?CQ(e.object):e.object.name==="datum"}function FQ(e){const t=qD(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&CQ(r)&&n.add(n3(r).slice(1).join("."))}),n}class Jp extends Jt{clone(){return new Jp(null,this.model,at(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=Ab(this.model,this.filter,this),this._dependentFields=FQ(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function fMe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const a=xn(s.name),o=s.select,l=Ue(o)?o:o.type,c=Pe(o)?at(o):{type:l},u=r[l];for(const d in u)d==="fields"||d==="encodings"||(d==="mark"&&(c.mark={...u.mark,...c.mark}),(c[d]===void 0||c[d]===!0)&&(c[d]=at(u[d]??c[d])));const f=n[a]={...c,name:a,type:l,init:s.value,bind:s.bind,events:Ue(c.on)?Xu(c.on,"scope"):Be(at(c.on))};if(Po(f)&&(i++,i>1)){delete n[a];continue}const h=at(s);for(const d of fS)d.defined(f)&&d.parse&&d.parse(e,f,h)}return i>1&&Ae(FNe),n}function OQ(e,t,n,r="datum"){const i=Ue(t)?t:t.param,s=xn(i),a=Oe(s+Ph);let o;try{o=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(o.project.timeUnit){const h=n??e.component.data.raw,d=o.project.timeUnit.clone();h.parent?d.insertAsParentOf(h):h.parent=d}const l=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",c=o.resolve==="global"?")":`, ${Oe(o.resolve)})`,u=`${l}${a}, ${r}${c}`,f=`length(data(${a}))`;return t.empty===!1?`${f} && ${u}`:`!${f} || ${u}`}function NQ(e,t,n){const r=xn(t),i=n.encoding;let s=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=a.project.items[0].field,a.project.items.length>1&&Ae(ONe(s));else if(i&&!s){const o=a.project.items.filter(l=>l.channel===i);!o.length||o.length>1?(s=a.project.items[0].field,Ae(NNe(o,i,n,s))):s=o[0].field}return`${a.name}[${Oe(va(s))}]`}function hMe(e,t){for(const[n,r]of Cu(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new ns(new Jp(t,e,{param:n}),i,En.Lookup,e.component.data.outputNodeRefCounts)}}function Ab(e,t,n){return Lm(t,r=>Ue(r)?r:UDe(r)?OQ(e,r,n):zJ(r))}function dMe(e,t){if(e)return pe(e)&&!Vc(e)?e.map(n=>cI(n,t)).join(", "):e}function SA(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function hm(e,t,n,r={header:!1}){var f,h;const{disable:i,orient:s,scale:a,labelExpr:o,title:l,zindex:c,...u}=e.combine();if(!i){for(const d in u){const p=d,g=jRe[p],m=u[p];if(g&&g!==t&&g!=="both")delete u[p];else if(ev(m)){const{condition:x,...y}=m,v=Be(x),_=i8[p];if(_){const{vgProp:b,part:w}=_,E=[...v.map(T=>{const{test:S,...A}=T;return{test:Ab(null,S),...A}}),y];SA(u,w,b,E),delete u[p]}else if(_===null){const b={signal:v.map(w=>{const{test:E,...T}=w;return`${Ab(null,E)} ? ${HP(T)} : `}).join("")+HP(y)};u[p]=b}}else if(Ye(m)){const x=i8[p];if(x){const{vgProp:y,part:v}=x;SA(u,v,y,m),delete u[p]}}yt(["labelAlign","labelBaseline"],p)&&u[p]===null&&delete u[p]}if(t==="grid"){if(!u.grid)return;if(u.encode){const{grid:d}=u.encode;u.encode={...d?{grid:d}:{}},tn(u.encode)&&delete u.encode}return{scale:a,orient:s,...u,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:$n(c,0)}}else{if(!r.header&&e.mainExtracted)return;if(o!==void 0){let p=o;(h=(f=u.encode)==null?void 0:f.labels)!=null&&h.update&&Ye(u.encode.labels.update.text)&&(p=Oh(o,"datum.label",u.encode.labels.update.text.signal)),SA(u,"labels","text",{signal:p})}if(u.labelAlign===null&&delete u.labelAlign,u.encode){for(const p of vZ)e.hasAxisPart(p)||delete u.encode[p];tn(u.encode)&&delete u.encode}const d=dMe(l,n);return{scale:a,orient:s,grid:!1,...d?{title:d}:{},...u,...n.aria===!1?{aria:!1}:{},zindex:$n(c,0)}}}}function DQ(e){const{axes:t}=e.component,n=[];for(const r of vc)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",a=e.getSizeSignalRef(s).signal;s!==a&&n.push({name:s,update:a})}}return n}function pMe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>hm(i,"grid",t)),...r.map(i=>hm(i,"grid",t)),...n.map(i=>hm(i,"main",t)),...r.map(i=>hm(i,"main",t))].filter(i=>i)}function N8(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...Se(a),...Se(o)]),c={};for(const u of l.values())c[u]={signal:`${r.signal} === "${s}" ? ${za(a[u])} : ${za(o[u])}`};return c}return t[i]})])}function gMe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:jJ(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",a=Ye(n)?"axisOrient":`axis${Vx(n)}`,o=[...i,...i.map(c=>s+c.substr(4))],l=["axis",a,s];return{vlOnlyAxisConfig:N8(o,r,e,n),vgAxisConfig:N8(l,r,e,n),axisConfigStyle:mMe([...l,...o],r)}}function mMe(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Be(s);for(const a of s)n.push(t.style[a])}}return Object.assign.apply(null,n)}function r3(e,t,n,r={}){var s;const i=yJ(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[a])==null?void 0:s[e])!==void 0)return{configFrom:a,configValue:r[a][e]};return{}}const D8={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??xMe(n,e),gridScale:({model:e,channel:t})=>vMe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||IQ(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||RQ(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??_Me(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??bMe(t.type,n,Fe(t)&&!!t.timeUnit,Fe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,a=s?t.getSizeSignalRef(s):void 0;return n.tickCount??wMe({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:SMe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$Q(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",a=t.fieldDef(s);return bJ(i?[n8(i)]:[],Fe(a)?[n8(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>TMe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??AMe(n,t)};function xMe(e,t){return!xr(e)&&Fe(t)&&!ln(t==null?void 0:t.bin)&&!Er(t==null?void 0:t.bin)}function vMe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function yMe(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Ye(s)?s:H1(s);{const{configValue:a}=r3("labelAngle",r,t==null?void 0:t.style,i);return a!==void 0?H1(a):n===vn&&yt([JR,KR],e.type)&&!(Fe(e)&&e.timeUnit)?270:void 0}}function i3(e){return`(((${e.signal} % 360) + 360) % 360)`}function RQ(e,t,n,r){if(e!==void 0)if(n==="x"){if(Ye(e)){const i=i3(e),s=Ye(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ye(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ye(e)){const i=i3(e),s=Ye(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Ye(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function IQ(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Ye(e)){const a=i3(e),o=Ye(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${o} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Ye(t)){const a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function _Me(e,t){if(t==="x"&&yt(["quantitative","temporal"],e))return!0}function bMe(e,t,n,r){if(n&&!Pe(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function EMe(e){return e==="x"?"bottom":"left"}function wMe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!xr(t)&&t!=="log"){if(Fe(e)){if(ln(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&yt(["month","hours","day","quarter"],(i=mr(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function SMe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Fe(t)){const{timeUnit:n}=t;if(n){const r=PJ(n);if(r)return{signal:r}}}}function $Q(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,a=i?i.title:void 0;if(s&&a)return EJ(s,a);if(s)return s;if(a)return a;if(s!==void 0)return s;if(a!==void 0)return a}function TMe(e,t){const n=e.values;if(pe(n))return xZ(t,n);if(Ye(n))return n}function AMe(e,t){return e==="rect"&&yb(t)?1:0}class gp extends Jt{clone(){return new gp(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=FQ(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(dd(r)&&oZ(r.sort)){const{field:s,timeUnit:a}=r,o=r.sort,l=o.map((c,u)=>`${zJ({field:s,timeUnit:a,equal:c})} ? ${u} : `).join("")+o.length;t=new gp(t,{calculate:l,as:mp(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${At(this.transform)}`}}function mp(e,t,n){return $e(e,{prefix:t,suffix:"sort_index",...n})}function hS(e,t){return yt(["top","bottom"],t)?"column":yt(["left","right"],t)||e==="row"?"row":"column"}function xp(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return $n((t||{})[e],i[e],n.header[e])}function dS(e,t,n,r){const i={};for(const s of e){const a=xp(s,t||{},n,r);a!==void 0&&(i[s]=a)}return i}const FI=["row","column"],OI=["header","footer"];function kMe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:a,titleOrient:o}=dS(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=hS(t,o),c=H1(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...LQ(c,l),...MQ(l,c,s),...PQ(r,i,t,dIe,MZ)}}}function MQ(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=IQ(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function LQ(e,t){const n=RQ(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function CMe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of OI)if(n[i])for(const s of n[i]){const a=OMe(e,t,i,n,s);a!=null&&r.push(a)}return r}function FMe(e,t){const{sort:n}=e;return Gl(n)?{field:$e(n,{expr:"datum"}),order:n.order??"ascending"}:pe(n)?{field:mp(e,t,{expr:"datum"}),order:"ascending"}:{field:$e(e,{expr:"datum"}),order:n??"ascending"}}function s3(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:a,labelOrient:o,labelExpr:l}=dS(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),c=sI({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,u=hS(t,o);return{text:{signal:l?Oh(Oh(l,"datum.label",c),"datum.value",$e(e,{expr:"parent"})):c},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...LQ(s,u),...MQ(u,s,a),...PQ(n,e,t,pIe,LZ)}}function OMe(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:a}=r,o=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:f}=dS(["labelOrient"],a.header,o,t);(t==="row"&&!yt(["top","bottom"],f)||t==="column"&&!yt(["left","right"],f))&&(s=s3(a,t,o))}const l=Os(e)&&!Kx(e.facet),c=i.axes,u=(c==null?void 0:c.length)>0;if(s||u){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:FMe(a,t)}:{},...u&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...u?{axes:c}:{}}}}return null}const NMe={column:{start:0,end:1},row:{start:1,end:0}};function DMe(e,t){return NMe[t][e]}function RMe(e,t){const n={};for(const r of aa){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:a}=dS(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),o=hS(r,a),l=DMe(s,o);l!==void 0&&(n[o]=l)}}return tn(n)?void 0:n}function PQ(e,t,n,r,i){const s={};for(const a of r){if(!i[a])continue;const o=xp(a,t==null?void 0:t.header,e,n);o!==void 0&&(s[i[a]]=o)}return s}function NI(e){return[...py(e,"width"),...py(e,"height"),...py(e,"childWidth"),...py(e,"childHeight")]}function py(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const a=s.get("type"),o=s.get("range");if(xr(a)&&ud(o)){const l=e.scaleName(n);return Os(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[R8(l,o)]:[R8(l,o),{name:i,update:BQ(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),a=s?"containerSize()[0]":"containerSize()[1]",o=XF(e.config.view,s?"width":"height"),l=`isFinite(${a}) ? ${a} : ${o}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function R8(e,t){const n=`${e}_step`;return Ye(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function BQ(e,t,n){const r=t.get("type"),i=t.get("padding"),s=$n(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${za(a)}, ${za(s)}) * ${e}_step`}function UQ(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function zQ(e,t){return Se(e).reduce((n,r)=>({...n,...Kp({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>un(i.value),invalidValueRef:void 0})}),{})}function HQ(e,t){if(Os(t))return e==="theta"?"independent":"shared";if(eg(t))return"shared";if(PI(t))return Mn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function DI(e,t){const n=e.scale[t],r=Mn(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ae(lDe(t)),"independent"):e[r][t]||"shared"}const IMe={...xIe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},VQ=Se(IMe);class $Me extends _c{}const I8={symbols:MMe,gradient:LMe,labels:PMe,entries:BMe};function MMe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:a,encoding:o,config:l,mark:c}=n,u=a.filled&&c!=="trail";let f={...mNe({},n,hRe),...gQ(n,{filled:u})};const h=i.get("symbolOpacity")??l.legend.symbolOpacity,d=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=h===void 0?WQ(o.opacity)??a.opacity:void 0;if(f.fill){if(r==="fill"||u&&r===ls)delete f.fill;else if(Te(f.fill,"field"))d?delete f.fill:(f.fill=un(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=un(g??1));else if(pe(f.fill)){const m=a3(o.fill??o.color)??a.fill??(u&&a.color);m&&(f.fill=un(m))}}if(f.stroke){if(r==="stroke"||!u&&r===ls)delete f.stroke;else if(Te(f.stroke,"field")||p)delete f.stroke;else if(pe(f.stroke)){const m=$n(a3(o.stroke||o.color),a.stroke,u?a.color:void 0);m&&(f.stroke={value:m})}}if(r!==xc){const m=Fe(t)&&GQ(n,i,t);m?f.opacity=[{test:m,...un(g??1)},un(l.legend.unselectedOpacity)]:g&&(f.opacity=un(g))}return f={...f,...e},tn(f)?void 0:f}function LMe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:a}=t;let o={};const c=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?WQ(a.opacity)||s.opacity:void 0;return c&&(o.opacity=un(c)),o={...o,...e},tn(o)?void 0:o}function PMe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},a=n.config,o=Fe(t)?GQ(n,i,t):void 0,l=o?[{test:o,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:c,formatType:u}=s;let f;Mh(u)?f=Ha({fieldOrDatumDef:t,field:"datum.value",format:c,formatType:u,config:a}):c===void 0&&u===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?f=Ha({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&Fe(t)&&t.timeUnit===void 0&&(f=Ha({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const h={...l?{opacity:l}:{},...f?{text:f}:{},...e};return tn(h)?void 0:h}function BMe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function WQ(e){return jQ(e,(t,n)=>Math.max(t,n.value))}function a3(e){return jQ(e,(t,n)=>$n(t,n.value))}function jQ(e,t){if(RRe(e))return Be(e.condition).reduce(t,e.value);if(Qa(e))return e.value}function GQ(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Oe(n.field);return r.map(s=>`(!length(data(${Oe(xn(s)+Ph)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const $8={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return iZ(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return sZ(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??GMe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??qMe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??zMe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>b0(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(_0(n)&&No(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>UMe(t,e)};function UMe(e,t){const n=e.values;if(pe(n))return xZ(t,n);if(Ye(n))return n}function zMe(e,t,n,r){if(t!=="shape"){const i=a3(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function HMe(e){const{legend:t}=e;return $n(t.type,VMe(e))}function VMe({channel:e,timeUnit:t,scaleType:n}){if(_0(e)){if(yt(["quarter","month","day"],t))return"symbol";if(No(n))return"gradient"}return"symbol"}function WMe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??jMe(n,t)}function jMe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function GMe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:a,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(No(i))return n==="horizontal"?r==="top"||r==="bottom"?M8(t,"width",a,s):a:M8(t,"height",l,o)}function M8(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function qMe(e){if(yt(["quantile","threshold","log","symlog"],e))return"greedy"}function qQ(e){const t=bn(e)?XMe(e):ZMe(e);return e.component.legends=t,t}function XMe(e){const{encoding:t}=e,n={};for(const r of[ls,...BZ]){const i=tr(t[r]);!i||!e.getScaleComponent(r)||r===cs&&Fe(i)&&i.type===Yp||(n[r]=JMe(e,r))}return n}function YMe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function KMe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function JMe(e,t){var _;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,a=s.legend,o=new $Me({},YMe(e,t));aMe(e,t,o);const l=n!==void 0?!n:a.disable;if(o.set("disable",l,n!==void 0),l)return o;n=n||{};const c=e.getScaleComponent(t).get("type"),u=tr(i[t]),f=Fe(u)?(_=mr(u.timeUnit))==null?void 0:_.unit:void 0,h=n.orient||s.legend.orient||"right",d=HMe({legend:n,channel:t,timeUnit:f,scaleType:c}),p=WMe({legend:n,legendType:d,orient:h,legendConfig:a}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:u,legendConfig:a,config:s,scaleType:c,orient:h,legendType:d,direction:p};for(const b of VQ){if(d==="gradient"&&b.startsWith("symbol")||d==="symbol"&&b.startsWith("gradient"))continue;const w=b in $8?$8[b](g):n[b];if(w!==void 0){const E=KMe(w,b,n,e.fieldDef(t));(E||s.legend[b]===void 0)&&o.set(b,w,E)}}const m=(n==null?void 0:n.encoding)??{},x=o.get("selections"),y={},v={fieldOrDatumDef:u,model:e,channel:t,legendCmpt:o,legendType:d};for(const b of["labels","legend","title","symbols","gradient","entries"]){const w=zQ(m[b]??{},e),E=b in I8?I8[b](w,v):w;E!==void 0&&!tn(E)&&(y[b]={...x!=null&&x.length&&Fe(u)?{name:`${xn(u.field)}_legend_${b}`}:{},...x!=null&&x.length?{interactive:!!x}:{},update:E})}return tn(y)||o.set("encode",y,!!(n!=null&&n.encoding)),o}function ZMe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){qQ(r);for(const i of Se(r.component.legends))n.legend[i]=DI(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=XQ(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Se(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function XQ(e,t){var s,a,o,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const c of VQ){const u=Nu(e.getWithExplicit(c),t.getWithExplicit(c),c,"legend",(f,h)=>{switch(c){case"symbolType":return QMe(f,h);case"title":return wJ(f,h);case"type":return i=!0,ms("symbol")}return oS(f,h,c,"legend")});e.setWithExplicit(c,u)}return i&&((a=(s=e.implicit)==null?void 0:s.encode)!=null&&a.gradient&&pb(e.implicit,["encode","gradient"]),(l=(o=e.explicit)==null?void 0:o.encode)!=null&&l.gradient&&pb(e.explicit,["encode","gradient"])),e}function QMe(e,t){return t.value==="circle"?t:e}function e6e(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function YQ(e){const t=e.component.legends,n={};for(const i of Se(t)){const s=e.getScaleComponent(i),a=nn(s.get("domains"));if(n[a])for(const o of n[a])XQ(o,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return Dr(n).flat().map(i=>t6e(i,e.config)).filter(i=>i!==void 0)}function t6e(e,t){var a,o,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(a=s.encode)!=null&&a.symbols){const c=s.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!s.stroke&&(c.stroke={value:"transparent"});for(const u of BZ)s[u]&&delete c[u]}if(s.title||delete s.title,r!==void 0){let c=r;(l=(o=s.encode)==null?void 0:o.labels)!=null&&l.update&&Ye(s.encode.labels.update.text)&&(c=Oh(r,"datum.label",s.encode.labels.update.text.signal)),e6e(s,"labels","text",{signal:c})}return s}}function n6e(e){return eg(e)||PI(e)?r6e(e):KQ(e)}function r6e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),KQ(e))}function KQ(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},s=t.data.reduce((a,o)=>{const l=Ye(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return yt(a,l)||a.push(l),a},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const i6e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class JQ extends _c{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function ZQ(e){e.component.projection=bn(e)?s6e(e):l6e(e)}function s6e(e){if(e.hasProjection){const t=wr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?a6e(e):void 0,s=new JQ(e.projectionName(!0),{...wr(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function a6e(e){const t=[],{encoding:n}=e;for(const r of[[uo,co],[ya,fo]])(tr(n[r[0]])||tr(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(cs)&&e.typedFieldDef(cs).type===Yp&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(En.Main)),t}function o6e(e,t){const n=wR(i6e,i=>!!(!ze(e.explicit,i)&&!ze(t.explicit,i)||ze(e.explicit,i)&&ze(t.explicit,i)&&Ts(e.get(i),t.get(i))));if(Ts(e.size,t.size)){if(n)return e;if(Ts(e.explicit,{}))return t;if(Ts(t.explicit,{}))return e}return null}function l6e(e){if(e.children.length===0)return;let t;for(const r of e.children)ZQ(r);const n=wR(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=o6e(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new JQ(r,t.specifiedProjection,t.size,at(t.data));for(const s of e.children){const a=s.component.projection;a&&(a.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function c6e(e,t,n,r){if(Qx(t,n)){const i=bn(e)?e.axis(n)??e.legend(n)??{}:{},s=$e(t,{expr:"datum"}),a=$e(t,{expr:"datum",binSuffix:"end"});return{formulaAs:$e(t,{binSuffix:"range",forAs:!0}),formula:Yx(s,a,i.format,i.formatType,r)}}return{}}function QQ(e,t){return`${gJ(e)}_${t}`}function u6e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function RI(e,t,n){const r=tS(n,void 0)??{},i=QQ(r,t);return e.getName(`${i}_bins`)}function f6e(e){return"as"in e}function L8(e,t,n){let r,i;f6e(e)?r=Ue(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[$e(e,{forAs:!0}),$e(e,{binSuffix:"end",forAs:!0})];const s={...tS(t,void 0)},a=QQ(s,e.field),{signal:o,extentSignal:l}=u6e(n,a);if(Ww(s.extent)){const u=s.extent;i=NQ(n,u.param,u),delete s.extent}const c={bin:s,field:e.field,as:[r],...o?{signal:o}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:a,binComponent:c}}class Bo extends Jt{clone(){return new Bo(null,at(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,a)=>{if(Bi(s)&&ln(s.bin)){const{key:o,binComponent:l}=L8(s,s.bin,n);i[o]={...l,...i[o],...c6e(n,s,a,n.config)}}return i},{});return tn(r)?null:new Bo(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=L8(n,n.bin,r);return new Bo(t,{[i]:s})}merge(t,n){for(const r of Se(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Oo([...this.bins[r].as,...t.bins[r].as],At)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Dr(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Dr(this.bins).map(t=>t.field))}hash(){return`Bin ${At(this.bins)}`}assemble(){return Dr(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...a}=t.bin,o={type:"bin",field:va(t.field),as:r,signal:t.signal,...Ww(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...a};!s&&t.extentSignal&&(n.push({type:"extent",field:va(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const l of i)for(let c=0;c<2;c++)n.push({type:"formula",expr:$e({field:r[c]},{expr:"datum"}),as:l[c]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function h6e(e,t,n,r){var s;const i=bn(r)?r.encoding[ul(t)]:void 0;if(Bi(n)&&bn(r)&&cZ(n,i,r.markDef,r.config)){e.add($e(n,{})),e.add($e(n,{suffix:"end"}));const{mark:a,markDef:o,config:l}=r,c=Ou({fieldDef:n,markDef:o,config:l});V1(a)&&c!==.5&&Mn(t)&&(e.add($e(n,{suffix:lS})),e.add($e(n,{suffix:cS}))),n.bin&&Qx(n,t)&&e.add($e(n,{binSuffix:"range"}))}else if(aJ(t)){const a=sJ(t);e.add(r.getName(a))}else e.add($e(n));return dd(n)&&QDe((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function d6e(e,t){for(const n of Se(t)){const r=t[n];for(const i of Se(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Xa extends Jt{clone(){return new Xa(null,new Set(this.dimensions),at(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((a,o)=>{const{aggregate:l,field:c}=a;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([$e(a,{forAs:!0})]);else{if(sc(l)||tf(l)){const u=sc(l)?"argmin":"argmax",f=l[u];i[f]??(i[f]={}),i[f][u]=new Set([$e({op:u,field:f},{forAs:!0})])}else i[c]??(i[c]={}),i[c][l]=new Set([$e(a,{forAs:!0})]);fl(o)&&n.scaleDomain(o)==="unaggregated"&&(i[c]??(i[c]={}),i[c].min=new Set([$e({field:c,aggregate:"min"},{forAs:!0})]),i[c].max=new Set([$e({field:c,aggregate:"max"},{forAs:!0})]))}else h6e(s,o,a,n)}),s.size+Se(i).length===0)?null:new Xa(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const a of n.aggregate){const{op:o,field:l,as:c}=a;o&&(o==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([c||$e(a,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[o]??(r[o]=new Set),s[l][o].add(c||$e(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+Se(s).length===0?null:new Xa(t,i,s)}merge(t){return JK(this.dimensions,t.dimensions)?(d6e(this.measures,t.measures),!0):(SDe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Se(this.measures)])}producedFields(){const t=new Set;for(const n of Se(this.measures))for(const r of Se(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${At({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Se(this.measures))for(const a of Se(this.measures[s]))for(const o of this.measures[s][a])r.push(o),t.push(a),n.push(s==="*"?null:va(s));return{type:"aggregate",groupby:[...this.dimensions].map(va),ops:t,fields:n,as:r}}}class Zp extends Jt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of aa){const a=n.facet[s];if(a){const{bin:o,sort:l}=a;this[s]={name:n.getName(`${s}_domain`),fields:[$e(a),...ln(o)?[$e(a,{binSuffix:"end"})]:[]],...Gl(l)?{sortField:l}:pe(l)?{sortIndexField:mp(a,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of aa)this[n]&&(t+=` ${n.charAt(0)}:${At(this[n])}`);return t}get fields(){var n;const t=[];for(const r of aa)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of aa)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of vc){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(xr(i)&&ud(s)){const a=pS(this.childModel,n),o=LI(a);o?t[n]=o:Ae(LR(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],a=[],o=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),a.push("max")):(s.push(r[i]),a.push("distinct")),o.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:c}=this[t];if(l){const{op:u=Zw,field:f}=l;s.push(f),a.push(u),o.push($e(l,{forAs:!0}))}else c&&(s.push(c),a.push("max"),o.push(c));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:a,as:o}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const c of FI){for(const u of OI){const f=(r[c]&&r[c][u])??[];for(const h of f)if(((l=h.axes)==null?void 0:l.length)>0){s[c]=!0;break}}if(s[c]){const u=`length(data("${this.facet.name}"))`,f=c==="row"?n?{signal:`ceil(${u} / ${n})`}:1:n?{signal:`min(${u}, ${n})`}:{signal:u};i.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:a,column:o}=s;return(a||o)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:a}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(r.x??[],r.y??[]),l=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:l}]})}for(const o of[jl,Wl])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,r));if(a){const o=this.assembleFacetHeaderData(r);o&&t.push(...o)}return t}}function P8(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function p6e(e,t){const n=AR(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=P8(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=P8(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ae(RNe(t)),null}function g6e(e){const t={};return S_(e.filter,n=>{if(UJ(n)){let r=null;VR(n)?r=Es(n.equal):jR(n)?r=Es(n.lte):WR(n)?r=Es(n.lt):GR(n)?r=Es(n.gt):qR(n)?r=Es(n.gte):XR(n)?r=n.range[0]:YR(n)&&(r=(n.oneOf??n.in)[0]),r&&(fd(r)?t[n.field]="date":Ut(r)?t[n.field]="number":Ue(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function m6e(e){const t={};function n(r){hp(r)?t[r.field]="date":r.type==="quantitative"&&oNe(r.aggregate)?t[r.field]="number":ap(r.field)>1?r.field in t||(t[r.field]="flatten"):dd(r)&&Gl(r.sort)&&ap(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((bn(e)||Os(e))&&e.forEachFieldDef((r,i)=>{if(Bi(r))n(r);else{const s=ld(i),a=e.fieldDef(s);n({...r,type:a.type})}}),bn(e)){const{mark:r,markDef:i,encoding:s}=e;if(nf(r)&&!e.encoding.order){const a=i.orient==="horizontal"?"y":"x",o=s[a];Fe(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function x6e(e){const t={};if(bn(e)&&e.component.selection)for(const n of Se(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&ap(i.field)>1&&(t[i.field]="flatten")}return t}class ni extends Jt{clone(){return new ni(null,at(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${At(this._parse)}`}static makeExplicit(t,n,r){var a;let i={};const s=n.data;return!du(s)&&((a=s==null?void 0:s.format)!=null&&a.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const o of Se(r)){const l=i.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===r[o]||l.value==="derived"||r[o]==="flatten"?delete r[o]:Ae(XP(o,r[o],l.value)))}for(const o of Se(n)){const l=i.get(o);l!==void 0&&(l===n[o]?delete n[o]:Ae(XP(o,n[o],l)))}const s=new _c(n,r);i.copyAll(s);const a={};for(const o of Se(s.combine())){const l=s.get(o);l!==null&&(a[o]=l)}return Se(a).length===0||i.parseNothing?null:new ni(t,a)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Se(this._parse)){const r=this._parse[n];ap(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Se(this._parse))}dependentFields(){return new Set(Se(this._parse))}assembleTransforms(t=!1){return Se(this._parse).filter(n=>t?ap(n)>1:!0).map(n=>{const r=p6e(n,this._parse[n]);return r?{type:"formula",expr:r,as:qp(n)}:null}).filter(n=>n!==null)}}class Du extends Jt{clone(){return new Du(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([to])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:to}}}class nv extends Jt{clone(){return new nv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${At(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class rv extends Jt{clone(){return new rv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${At(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Bh extends Jt{constructor(t){super(null),t??(t={name:"source"});let n;if(du(t)||(n=t.format?{...ts(t.format,["parse"])}:{}),W1(t))this._data={values:t.values};else if(dp(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];yt(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else rQ(t)?this._data={values:[{type:"Sphere"}]}:(tQ(t)||du(t))&&(this._data={});this._generator=du(t),t.name&&(this._name=t.name),n&&!tn(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var B8=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},v6e=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},dm;function II(e){return e instanceof Bh||e instanceof nv||e instanceof rv}class $I{constructor(){dm.set(this,void 0),B8(this,dm,!1,"f")}setModified(){B8(this,dm,!0,"f")}get modifiedFlag(){return v6e(this,dm,"f")}}dm=new WeakMap;class pd extends $I{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class MI extends $I{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class y6e extends MI{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Se(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class _6e extends MI{constructor(t){super(),this.requiresSelectionId=t&&CI(t)}run(t){t instanceof Du&&(this.requiresSelectionId&&(II(t.parent)||t.parent instanceof Xa||t.parent instanceof ni)||(this.setModified(),t.remove()))}}class b6e extends $I{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Lo&&(r=t.producedFields(),SR(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class E6e extends MI{constructor(){super()}run(t){t instanceof ns&&!t.isRequired()&&(this.setModified(),t.remove())}}class w6e extends pd{run(t){if(!II(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ni)if(t instanceof ni)this.setModified(),t.merge(n);else{if(TR(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class S6e extends pd{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ni);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const a of r){const o=a.parse;for(const l of Se(o))l in i?i[l]!==o[l]&&s.add(l):i[l]=o[l]}for(const a of s)delete i[a];if(!tn(i)){this.setModified();const a=new ni(t,i);for(const o of n){if(o instanceof ni)for(const l of Se(i))delete o.parse[l];t.removeChild(o),o.parent=a,o instanceof ni&&Se(o.parse).length===0&&o.remove()}}}}}class T6e extends pd{run(t){t instanceof ns||t.numChildren()>0||t instanceof Zp||t instanceof Bh||(this.setModified(),t.remove())}}class A6e extends pd{run(t){const n=t.children.filter(i=>i instanceof Lo),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class k6e extends pd{run(t){const n=t.children.filter(i=>i instanceof Xa),r={};for(const i of n){const s=At(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Se(r)){const s=r[i];if(s.length>1){const a=s.pop();for(const o of s)a.merge(o)&&(t.removeChild(o),o.parent=a,o.remove(),this.setModified())}}}}class C6e extends pd{constructor(t){super(),this.model=t}run(t){const n=!(II(t)||t instanceof Jp||t instanceof ni||t instanceof Du),r=[],i=[];for(const s of t.children)s instanceof Bo&&(n&&!TR(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const a of r)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Bo?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class F6e extends pd{run(t){const n=[...t.children];if(!sp(n,a=>a instanceof ns)||t.numChildren()<=1)return;const i=[];let s;for(const a of n)if(a instanceof ns){let o=a;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof ns)o=l;else break}i.push(...o.children),s?(t.removeChild(a),a.parent=s.parent,s.parent.removeChild(s),s.parent=o,this.setModified()):s=o}else i.push(a);if(i.length){this.setModified();for(const a of i)a.parent.removeChild(a),a.parent=s}}}class gd extends Jt{clone(){return new gd(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Oo(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??$e(t)}hash(){return`JoinAggregateTransform ${At(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class vp extends Jt{clone(){return new vp(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:a,scales:o}=r;if(a==="include-invalid-values"&&o==="include-invalid-values")return null;const l=n.reduceFieldDef((c,u,f)=>{const h=fl(f)&&n.getScaleComponent(f);if(h){const d=h.get("type"),{aggregate:p}=u,g=nI({scaleChannel:f,markDef:s,config:i,scaleType:d,isCountAggregate:Vw(p)});g!=="show"&&g!=="always-valid"&&(c[u.field]=u)}return c},{});return Se(l).length?new vp(t,l):null}dependentFields(){return new Set(Se(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${At(this.filter)}`}assemble(){const t=Se(this.filter).reduce((n,r)=>{const i=this.filter[r],s=$e(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${o3(s)}))`):i.type==="quantitative"&&n.push(o3(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function o3(e){return`isValid(${e}) && isFinite(+${e})`}function O6e(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=$e(r);return i&&t.push(i),t},[])}function N6e(e){return pe(e)&&e.every(t=>Ue(t))&&e.length>1}class Xl extends Jt{clone(){return new Xl(null,at(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:a="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const f of n.sort)o.push(f.field),l.push($n(f.order,"ascending"));const c={field:o,order:l};let u;return N6e(s)?u=s:Ue(s)?u=[s,`${s}_end`]:u=[`${n.stack}_start`,`${n.stack}_end`],new Xl(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:c,facetby:[],as:u})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:a,offset:o,impute:l}=r,c=s.map(d=>{const p=i[d];return eo(p)}).filter(d=>!!d),u=O6e(n),f=n.encoding.order;let h;if(pe(f)||Fe(f))h=_J(f);else{const d=uZ(f)?f.sort:a==="y"?"descending":"ascending";h=u.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(d)),p),{field:[],order:[]})}return new Xl(t,{dimensionFieldDefs:c,stackField:n.vgField(a),facetby:[],stackby:u,sort:h,offset:o,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${At(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[$e(i,{binSuffix:"mid"})]:[$e(i,{}),$e(i,{binSuffix:"end"})]:[$e(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:a,offset:o,impute:l,as:c}=this._stack;if(l)for(const u of r){const{bandPosition:f=.5,bin:h}=u;if(h){const d=$e(u,{expr:"datum"}),p=$e(u,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${o3(d)} ? ${f}*${d}+${1-f}*${p} : ${d}`,as:$e(u,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:$e(u,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:c,offset:o}),t}}class Qp extends Jt{clone(){return new Qp(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Oo(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??$e(t)}hash(){return`WindowTransform ${At(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>$R(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...a!==void 0?{groupby:a}:{}};const o=[],l=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)o.push(f.field),l.push(f.order??"ascending");const c={field:o,order:l},u=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:c,...u!==void 0?{ignorePeers:u}:{},...a!==void 0?{groupby:a}:{},...s!==void 0?{frame:s}:{}}}}function D6e(e){function t(n){if(!(n instanceof Zp)){const r=n.clone();if(r instanceof ns){const i=c3+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Xa||r instanceof Xl||r instanceof Qp||r instanceof gd)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function l3(e){if(e instanceof Zp)if(e.numChildren()===1&&!(e.children[0]instanceof ns)){const t=e.children[0];(t instanceof Xa||t instanceof Xl||t instanceof Qp||t instanceof gd)&&t.addDimensions(e.fields),t.swapWithParent(),l3(e)}else{const t=e.model.component.data.main;eee(t);const n=D6e(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(l3)}function eee(e){if(e instanceof ns&&e.type===En.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Zp||(t.swapWithParent(),eee(e))}}const c3="scale_",gy=5;function u3(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!u3(t.children))return!1}return!0}function Fa(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function U8(e,t,n){let r=e.sources,i=!1;return i=Fa(new E6e,r)||i,i=Fa(new _6e(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Fa(new T6e,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Fa(new w6e,r)||i,i=Fa(new C6e(t),r)||i,i=Fa(new b6e,r)||i,i=Fa(new S6e,r)||i,i=Fa(new k6e,r)||i,i=Fa(new A6e,r)||i,i=Fa(new y6e,r)||i,i=Fa(new F6e,r)||i),e.sources=r,i}function R6e(e,t){u3(e.sources);let n=0,r=0;for(let i=0;i<gy&&U8(e,t,!0);i++)n++;e.sources.map(l3);for(let i=0;i<gy&&U8(e,t,!1);i++)r++;u3(e.sources),Math.max(n,r)===gy&&Ae(`Maximum optimization runs(${gy}) reached.`)}class lr{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new lr(()=>t(n))}}function tee(e){bn(e)?I6e(e):$6e(e)}function I6e(e){const t=e.component.scales;for(const n of Se(t)){const r=L6e(e,n);if(t[n].setWithExplicit("domains",r),B6e(e,n),e.component.data.isFaceted){let s=e;for(;!Os(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const o of r.value)Ll(o)&&(o.data=c3+o.data.replace(c3,""))}}}function $6e(e){for(const n of e.children)tee(n);const t=e.component.scales;for(const n of Se(t)){let r,i=null;for(const s of e.children){const a=s.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=Nu(r,a.getWithExplicit("domains"),"domains","scale",f3);const o=a.get("selectionExtent");i&&o&&i.param!==o.param&&Ae(ANe),i=o}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function M6e(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=z8(t,n);if(!i){Ae(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=z8(t,n);if(i)return"unaggregated"}return e}function L6e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=M6e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&tr(r.x2)?tr(r.x)?Nu(Rc(n,i,e,"x"),Rc(n,i,e,"x2"),"domain","scale",f3):Rc(n,i,e,"x2"):t==="y"&&tr(r.y2)?tr(r.y)?Nu(Rc(n,i,e,"y"),Rc(n,i,e,"y2"),"domain","scale",f3):Rc(n,i,e,"y2"):Rc(n,i,e,t)}function P6e(e,t,n){return e.map(r=>({signal:`{data: ${nS(r,{timeUnit:n,type:t})}}`}))}function TA(e,t,n){var i;const r=(i=mr(n))==null?void 0:i.unit;return t==="temporal"||r?P6e(e,t,r):[e]}function Rc(e,t,n,r){const{encoding:i,markDef:s,mark:a,config:o,stack:l}=n,c=tr(i[r]),{type:u}=c,f=c.timeUnit,h=O$e({invalid:Yo("invalid",s,o),isPath:nf(a)});if(ZDe(t)){const g=Rc(e,void 0,n,r),m=TA(t.unionWith,u,f);return To([...m,...g.value])}else{if(Ye(t))return To([t]);if(t&&t!=="unaggregated"&&!qJ(t))return To(TA(t,u,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return ms([[0,1]]);const g=n.requestDataName(h);return ms([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const d=fl(r)&&Fe(c)?U6e(n,r,e):void 0;if(hl(c)){const g=TA([c.datum],u,f);return ms(g)}const p=c;if(t==="unaggregated"){const{field:g}=c;return ms([{data:n.requestDataName(h),field:$e({field:g,aggregate:"min"})},{data:n.requestDataName(h),field:$e({field:g,aggregate:"max"})}])}else if(ln(p.bin)){if(xr(e))return ms(e==="bin-ordinal"?[]:[{data:z1(d)?n.requestDataName(h):n.requestDataName(En.Raw),field:n.vgField(r,Qx(p,r)?{binSuffix:"range"}:{}),sort:d===!0||!Pe(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:g}=p;if(ln(g)){const m=RI(n,p.field,g);return ms([new lr(()=>{const x=n.getSignalName(m);return`[${x}.start, ${x}.stop]`})])}else return ms([{data:n.requestDataName(h),field:n.vgField(r,{})}])}}else if(p.timeUnit&&yt(["time","utc"],e)){const g=i[ul(r)];if(cZ(p,g,s,o)){const m=n.requestDataName(h),x=Ou({fieldDef:p,fieldDef2:g,markDef:s,config:o}),y=V1(a)&&x!==.5&&Mn(r);return ms([{data:m,field:n.vgField(r,y?{suffix:lS}:{})},{data:m,field:n.vgField(r,{suffix:y?cS:"end"})}])}}return ms(d?[{data:z1(d)?n.requestDataName(h):n.requestDataName(En.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(h),field:n.vgField(r)}])}function AA(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Zw),...r?{field:va(r)}:{},...i?{order:i}:{}}}function B6e(e,t){var o;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(o=e.fieldDef(t))==null?void 0:o.bin,s=qJ(r)?r:void 0,a=cd(i)&&Ww(i.extent)?i.extent:void 0;(s||a)&&n.set("selectionExtent",s??a,!0)}function U6e(e,t,n){if(!xr(n))return;const r=e.fieldDef(t),i=r.sort;if(oZ(i))return{op:"min",field:mp(r,t),order:"ascending"};const{stack:s}=e,a=s?new Set([...s.groupbyFields,...s.stackBy.map(o=>o.fieldDef.field)]):void 0;if(Gl(i)){const o=s&&!a.has(i.field);return AA(i,o)}else if(ORe(i)){const{encoding:o,order:l}=i,c=e.fieldDef(o),{aggregate:u,field:f}=c,h=s&&!a.has(f);if(sc(u)||tf(u))return AA({field:$e(c),order:l},h);if($R(u)||!u)return AA({op:u,field:f,order:l},h)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(yt(["ascending",void 0],i))return!0}}function z8(e,t){const{aggregate:n,type:r}=e;return n?Ue(n)&&!cNe.has(n)?{valid:!1,reason:tDe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:nDe(e)}:{valid:!0}:{valid:!1,reason:eDe(e)}}function f3(e,t,n,r){return e.explicit&&t.explicit&&Ae(oDe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function z6e(e){const t=Oo(e.map(a=>{if(Ll(a)){const{sort:o,...l}=a;return l}return a}),At),n=Oo(e.map(a=>{if(Ll(a)){const o=a.sort;return o!==void 0&&!z1(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(a=>a!==void 0),At);if(t.length===0)return;if(t.length===1){const a=e[0];if(Ll(a)&&n.length>0){let o=n[0];if(n.length>1){Ae(KP);const l=n.filter(c=>Pe(c)&&"op"in c&&c.op!=="min");n.every(c=>Pe(c)&&"op"in c)&&l.length===1?o=l[0]:o=!0}else if(Pe(o)&&"field"in o){const l=o.field;a.field===l&&(o=o.order?{order:o.order}:!0)}return{...a,sort:o}}return a}const r=Oo(n.map(a=>z1(a)||!("op"in a)||Ue(a.op)&&ze(sNe,a.op)?a:(Ae(cDe(a)),!0)),At);let i;r.length===1?i=r[0]:r.length>1&&(Ae(KP),i=!0);const s=Oo(e.map(a=>Ll(a)?a.data:null),a=>a);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(o=>o.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function LI(e){if(Ll(e)&&Ue(e.field))return e.field;if(uNe(e)){let t;for(const n of e.fields)if(Ll(n)&&Ue(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ae(uDe),t}return Ae(fDe),t}else if(fNe(e)){Ae(hDe);const t=e.fields[0];return Ue(t)?t:void 0}}function pS(e,t){const r=e.component.scales[t].get("domains").map(i=>(Ll(i)&&(i.data=e.lookupDataSource(i.data)),i));return z6e(r)}function nee(e){return eg(e)||PI(e)?e.children.reduce((t,n)=>t.concat(nee(n)),H8(e)):H8(e)}function H8(e){return Se(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:a,selectionExtent:o,domains:l,range:c,reverse:u,...f}=i,h=H6e(i.range,s,n,e),d=pS(e,n),p=o?z$e(e,o,r,d):null;return t.push({name:s,type:a,...d?{domain:d}:{},...p?{domainRaw:p}:{},range:h,...u!==void 0?{reverse:u}:{},...f}),t},[])}function H6e(e,t,n,r){if(Mn(n)){if(ud(e))return{step:{signal:`${t}_step`}}}else if(Pe(e)&&Ll(e))return{...e,data:r.lookupDataSource(e.data)};return e}class ree extends _c{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(yt([Sr.LOG,Sr.TIME,Sr.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&yt([Sr.LINEAR,Sr.SQRT,Sr.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,a=!1;for(const o of r){if(pe(o)){const l=o[0],c=o[o.length-1];if(Ut(l)&&Ut(c))if(l<=0&&c>=0){i=!0;continue}else{s=!0;continue}}a=!0}if(i)return"definitely";if(s&&!a)return"definitely-not"}return"maybe"}}const V6e=["range","scheme"];function W6e(e){const t=e.component.scales;for(const n of IR){const r=t[n];if(!r)continue;const i=j6e(n,e);r.setWithExplicit("range",i)}}function V8(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=us(t),a=e.getName(s);if(Pe(r)&&r.binned&&r.step!==void 0)return new lr(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${l})`});if(ln(r)){const o=RI(e,i,r);return new lr(()=>{const l=e.getSignalName(o),c=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(a)} / (${c})`})}}}function j6e(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of V6e)if(n[f]!==void 0){const h=jF(s,f),d=XJ(e,f);if(!h)Ae(kJ(s,f,e));else if(d)Ae(d);else switch(f){case"range":{const p=n.range;if(pe(p)){if(Mn(e))return To(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),x=t.getSignalName.bind(t);return lr.fromName(x,m)}return g}))}else if(Pe(p))return To({data:t.requestDataName(En.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return To(p)}case"scheme":return To(G6e(n[f]))}}const a=e===vn||e==="xOffset"?"width":"height",o=r[a];if(Jo(o)){if(Mn(e))if(xr(s)){const f=see(o,t,e);if(f)return To({step:f})}else Ae(CJ(a));else if(Gx(e)){const f=e===Yu?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=aee(o,s);if(p)return To(p)}}}const{rangeMin:l,rangeMax:c}=n,u=q6e(e,t);return(l!==void 0||c!==void 0)&&jF(s,"rangeMin")&&pe(u)&&u.length===2?To([l??u[0],c??u[1]]):ms(u)}function G6e(e){return JDe(e)?{scheme:e.name,...ts(e,["name"])}:{scheme:e}}function iee(e,t,n,{center:r}={}){const i=us(e),s=t.getName(i),a=t.getSignalName.bind(t);return e===_r&&Za(n)?r?[lr.fromName(o=>`${a(o)}/2`,s),lr.fromName(o=>`-${a(o)}/2`,s)]:[lr.fromName(a,s),0]:r?[lr.fromName(o=>`-${a(o)}/2`,s),lr.fromName(o=>`${a(o)}/2`,s)]:[0,lr.fromName(a,s)]}function q6e(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:a}=tr(s[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:u}=t.specifiedScales[e];switch(e){case vn:case _r:{if(yt(["point","band"],l)){const f=oee(e,n,r.view);if(Jo(f))return{step:see(f,t,e)}}return iee(e,t,l)}case Yu:case Xp:return X6e(e,t,l);case mc:{const f=J6e(i,r),h=Z6e(i,n,t,r);return cp(l)?K6e(f,h,Y6e(l,r,c,e)):[f,h]}case Sa:return[0,Math.PI*2];case od:return[0,360];case lo:return[0,new lr(()=>{const f=t.getSignalName(Os(t.parent)?"child_width":"width"),h=t.getSignalName(Os(t.parent)?"child_height":"height");return`min(${f},${h})/2`})];case Ku:return{step:1e3/r.scale.framesPerSecond};case Qu:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case ef:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case cs:return"symbol";case ls:case ll:case cl:return l==="ordinal"?a==="nominal"?"category":"ordinal":u!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case xc:case Ju:case Zu:return[r.scale.minOpacity,r.scale.maxOpacity]}}function see(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=OR(n),a=r[s];if(zZ({step:e,offsetIsDiscrete:ot(a)&&HJ(a.type)})==="offset"&&bZ(r,s)){const l=t.getScaleComponent(s);let u=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const h=l.get("paddingInner")??l.get("padding")??0,d=l.get("paddingOuter")??l.get("padding")??0;u=`bandspace(${u}, ${h}, ${d})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${u} / (1-${gNe(f)})`}}else return e.step}function aee(e,t){if(zZ({step:e,offsetIsDiscrete:xr(t)})==="offset")return{step:e.step}}function X6e(e,t,n){const r=e===Yu?"x":"y",i=t.getScaleComponent(r);if(!i)return iee(r,t,n,{center:!0});const s=i.get("type"),a=t.scaleName(r),{markDef:o,config:l}=t;if(s==="band"){const c=oee(r,t.size,t.config.view);if(Jo(c)){const u=aee(c,n);if(u)return u}return[0,{signal:`bandwidth('${a}')`}]}else{const c=t.encoding[r];if(Fe(c)&&c.timeUnit){const u=PJ(c.timeUnit,p=>`scale('${a}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,h=Ou({fieldDef:c,markDef:o,config:l})-.5,d=h!==0?` + ${h}`:"";if(f){const p=Ye(f)?`${f.signal}/2`+d:`${f/2+h}`,g=Ye(f)?`(1 - ${f.signal}/2)`+d:`${1-f/2+h}`;return[{signal:`${p} * (${u})`},{signal:`${g} * (${u})`}]}return[0,{signal:u}]}return YK(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function oee(e,t,n){const r=e===vn?"width":"height",i=t[r];return i||wb(n,r)}function Y6e(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&pe(n)?n.length+1:(Ae(bDe(r)),3)}}function K6e(e,t,n){const r=()=>{const i=za(t),s=za(e),a=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${a}, ${a})`};return Ye(t)?new lr(r):{signal:r()}}function J6e(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(jw("size",e))}const W8=.95;function Z6e(e,t,n,r){const i={x:V8(n,"x"),y:V8(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=j8(t,i,r.view);return Ut(s)?s-1:new lr(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=j8(t,i,r.view);return Ut(s)?Math.pow(W8*s,2):new lr(()=>`pow(${W8} * ${s.signal}, 2)`)}}throw new Error(jw("size",e))}function j8(e,t,n){const r=Jo(e.width)?e.width.step:YF(n,"width"),i=Jo(e.height)?e.height.step:YF(n,"height");return t.x||t.y?new lr(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function lee(e,t){bn(e)?Q6e(e,t):uee(e,t)}function Q6e(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:a}=e;for(const o of Se(n)){const l=a[o],c=n[o],u=e.getScaleComponent(o),f=tr(i[o]),h=l[t],d=u.get("type"),p=u.get("padding"),g=u.get("paddingInner"),m=jF(d,t),x=XJ(o,t);if(h!==void 0&&(m?x&&Ae(x):Ae(kJ(d,t,o))),m&&x===void 0)if(h!==void 0){const y=f.timeUnit,v=f.type;switch(t){case"domainMax":case"domainMin":fd(l[t])||v==="temporal"||y?c.set(t,{signal:nS(l[t],{type:v,timeUnit:y})},!0):c.set(t,l[t],!0);break;default:c.copyKeyFromObject(t,l)}}else{const y=Te(G8,t)?G8[t]({model:e,channel:o,fieldOrDatumDef:f,scaleType:d,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:EZ(i,o),hasSecondaryRangeChannel:!!i[ul(o)]}):r.scale[t];y!==void 0&&c.set(t,y,!1)}}}const G8={bins:({model:e,fieldOrDatumDef:t})=>Fe(t)?eLe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>tLe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>nLe(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>rLe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>iLe(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>sLe(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Fe(e)?e.sort:void 0;return aLe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:a})=>oLe(e,t,n,r,i,s.scale,a)};function cee(e){bn(e)?W6e(e):uee(e,"range")}function uee(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?cee(r):lee(r,t);for(const r of Se(n)){let i;for(const s of e.children){const a=s.component.scales[r];if(a){const o=a.getWithExplicit(t);i=Nu(i,o,t,"scale",eQ((l,c)=>{switch(t){case"range":return l.step&&c.step?l.step-c.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function eLe(e,t){const n=t.bin;if(ln(n)){const r=RI(e,t.field,n);return new lr(()=>e.getSignalName(r))}else if(Er(n)&&cd(n)&&n.step!==void 0)return{step:n.step}}function tLe(e,t){if(yt([ls,ll,cl],e)&&t!=="nominal")return"hcl"}function nLe(e,t,n,r,i,s){var a;if(!((a=eo(s))!=null&&a.bin||pe(n)||i!=null||r!=null||yt([Sr.TIME,Sr.UTC],e)))return Mn(t)?!0:void 0}function rLe(e,t,n,r,i,s){if(Mn(e)){if(No(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:o}=i;if(a==="bar"&&!(Fe(r)&&(r.bin||r.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Sr.POINT)return n.pointPadding}}function iLe(e,t,n,r,i,s=!1){if(e===void 0){if(Mn(t)){const{bandPaddingInner:a,barBandPaddingInner:o,rectBandPaddingInner:l,tickBandPaddingInner:c,bandWithNestedOffsetPaddingInner:u}=i;return s?u:$n(a,n==="bar"?o:n==="tick"?c:l)}else if(Gx(t)&&r===Sr.BAND)return i.offsetBandPaddingInner}}function sLe(e,t,n,r,i,s=!1){if(e===void 0){if(Mn(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:o}=i;if(s)return o;if(n===Sr.BAND)return $n(a,Ye(r)?{signal:`${r.signal}/2`}:r/2)}else if(Gx(t)){if(n===Sr.POINT)return .5;if(n===Sr.BAND)return i.offsetBandPaddingOuter}}}function aLe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Za(e)&&t==="descending"?Ye(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Za(e)&&t==="descending")return!0}function oLe(e,t,n,r,i,s,a){if(!!n&&n!=="unaggregated"&&Za(i)){if(pe(n)){const l=n[0],c=n[n.length-1];if(Ut(l)&&l<=0&&Ut(c)&&c>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!cp(i))return!0;if(!(Fe(t)&&t.bin)&&yt([...vc,...KOe],e)){const{orient:l,type:c}=r;return yt(["bar","area","line","trail"],c)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:yt(["bar","area"],c)&&!a?!0:s==null?void 0:s.zero}return!1}function lLe(e,t,n,r,i=!1){const s=cLe(t,n,r,i),{type:a}=e;return fl(t)?a!==void 0?iRe(t,a)?Fe(n)&&!rRe(a,n.type)?(Ae(sDe(a,s)),s):a:(Ae(iDe(t,a,s)),s):s:null}function cLe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(_0(e)||pA(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ae(gA(e,"ordinal")),"ordinal";if(dA(e))return"band";if(Mn(e)||Gx(e)){if(yt(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in RR)return"band";const s=n[us(e)];return $h(s)||fp(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return _0(e)?"time":pA(e)==="discrete"?(Ae(gA(e,"temporal")),"ordinal"):Fe(t)&&t.timeUnit&&mr(t.timeUnit).utc?"utc":dA(e)?"band":"time";case"quantitative":return _0(e)?Fe(t)&&ln(t.bin)?"bin-ordinal":"linear":pA(e)==="discrete"?(Ae(gA(e,"quantitative")),"ordinal"):dA(e)?"band":"linear";case"geojson":return}throw new Error(TJ(t.type))}function uLe(e,{ignoreRange:t}={}){fee(e),tee(e);for(const n of nRe)lee(e,n);t||cee(e)}function fee(e){bn(e)?e.component.scales=fLe(e):e.component.scales=dLe(e)}function fLe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of IR){const a=tr(t[s]);if(a&&n===JJ&&s===cs&&a.type===Yp)continue;let o=a&&a.scale;if(a&&o!==null&&o!==!1){o??(o={});const l=EZ(t,s),c=lLe(o,s,a,r,l);i[s]=new ree(e.scaleName(`${s}`,!0),{value:c,explicit:o.type===c})}}return i}const hLe=eQ((e,t)=>ZP(e)-ZP(t));function dLe(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){fee(s);for(const a of Se(s.component.scales))if((t=i.scale)[a]??(t[a]=HQ(a,e)),i.scale[a]==="shared"){const o=r[a],l=s.component.scales[a].getWithExplicit("type");o?GDe(o.value,l.value)?r[a]=Nu(o,l,"type","scale",hLe):(i.scale[a]="independent",delete r[a]):r[a]=l}}for(const s of Se(r)){const a=e.scaleName(s,!0),o=r[s];n[s]=new ree(a,o);for(const l of e.children){const c=l.component.scales[s];c&&(l.renameScale(c.get("name"),a),c.merged=!0)}}return n}class kA{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function bn(e){return(e==null?void 0:e.type)==="unit"}function Os(e){return(e==null?void 0:e.type)==="facet"}function PI(e){return(e==null?void 0:e.type)==="concat"}function eg(e){return(e==null?void 0:e.type)==="layer"}class BI{constructor(t,n,r,i,s,a,o){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=wr(o),this.name=t.name??i,this.title=Vc(t.title)?{text:t.title}:t.title?wr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new kA,this.projectionNameMap=r?r.projectionNameMap:new kA,this.signalNameMap=r?r.signalNameMap:new kA,this.data=t.data,this.description=t.description,this.transforms=v$e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:EIe(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Qw(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new _c,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...a?at(a):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){uLe(this)}parseProjection(){ZQ(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){qQ(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Se(r)){const a=r[s];a!==void 0&&(i[s]=un(a))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=un(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:tn(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=RMe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of aa)t[r].title&&n.push(kMe(this,r));for(const r of FI)n=n.concat(CMe(this,r));return n}assembleAxes(){return pMe(this.component.axes,this.config)}assembleLegends(){return YQ(this)}assembleProjections(){return n6e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...mJ(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return yt(["unit","layer"],this.type)?yt(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),tn(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Os(this.parent)?nee(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return xn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(En[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Os(this.parent)){const n=UQ(t),r=Hw(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),a=i.get("range");if(xr(s)&&ud(a)){const o=i.get("name"),l=pS(this,r),c=LI(l);if(c){const u=$e({aggregate:"distinct",field:c},{expr:"datum"});return{signal:BQ(o,i,u)}}else return Ae(LR(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(lJ(t)&&fl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(_Ne(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class hee extends BI{vgField(t,n={}){const r=this.fieldDef(t);if(r)return $e(r,n)}reduceFieldDef(t,n){return JRe(this.getMapping(),(r,i,s)=>{const a=eo(i);return a?t(r,a,s):r},n)}forEachFieldDef(t,n){fI(this.getMapping(),(r,i)=>{const s=eo(r);s&&t(s,i)},n)}}class gS extends Jt{clone(){return new gS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${At(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class mS extends Jt{clone(){return new mS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${At(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class xS extends Jt{clone(){return new xS(this.parent,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,a)=>i[a]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${At(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class vS extends Jt{clone(){return new vS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${At(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class w0 extends Jt{clone(){return new w0(null,at(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[uo,co],[ya,fo]]){const s=i.map(a=>{const o=tr(n.encoding[a]);return Fe(o)?o.field:hl(o)?{expr:`${o.datum}`}:Qa(o)?{expr:`${o.value}`}:void 0});(s[0]||s[1])&&(t=new w0(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(cs)){const i=n.typedFieldDef(cs);i.type===Yp&&(t=new w0(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Ue);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${At(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class j1 extends Jt{clone(){return new j1(null,this.projection,at(this.fields),at(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[uo,co],[ya,fo]]){const i=r.map(a=>{const o=tr(n.encoding[a]);return Fe(o)?o.field:hl(o)?{expr:`${o.datum}`}:Qa(o)?{expr:`${o.value}`}:void 0}),s=r[0]===ya?"2":"";(i[0]||i[1])&&(t=new j1(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ue))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${At(this.fields)} ${At(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class ih extends Jt{clone(){return new ih(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new ih(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Fe(i)&&Fe(s)){const a=i.impute?i:s.impute?s:void 0;if(a===void 0)return;const o=i.impute?s:s.impute?i:void 0,{method:l,value:c,frame:u,keyvals:f}=a.impute,h=TZ(n.mark,r);return new ih(t,{impute:a.field,key:o.field,...l?{method:l}:{},...c!==void 0?{value:c}:{},...u?{frame:u}:{},...f!==void 0?{keyvals:f}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${At(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:a,frame:o=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:QIe(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?a:null};if(i&&i!=="value"){const c={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:o,ignorePeers:!1,...s?{groupby:s}:{}},u={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,c,u]}else return[l]}}class yS extends Jt{clone(){return new yS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${At(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class G1 extends Jt{clone(){return new G1(null,at(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:a}=r;let o=null;if(e$e(a)){let l=gee(a.data,s);l||(l=new Bh(a.data),s.push(l));const c=n.getName(`lookup_${i}`);o=new ns(l,c,En.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[c]=o}else if(t$e(a)){const l=a.param;r={as:l,...r};let c;try{c=n.getSelectionComponent(xn(l),l)}catch{throw new Error(SNe(l))}if(o=c.materialized,!o)throw new Error(TNe(l))}return new G1(t,r,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Be(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${At({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Be(this.transform.as)}:{}};else{let n=this.transform.as;Ue(n)||(Ae(MNe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class _S extends Jt{clone(){return new _S(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${At(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class bS extends Jt{clone(){return new bS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=at(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${At(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class ES extends Jt{clone(){return new ES(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Oo((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${At(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class wS extends Jt{clone(){return new wS(null,at(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${At(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function dee(e){let t=0;function n(r,i){if(r instanceof Bh&&!r.isGenerator&&!dp(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ni&&(r.parent instanceof Bh&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Zp){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof nv||r instanceof rv||r instanceof vp||r instanceof Jp||r instanceof gp||r instanceof j1||r instanceof Xa||r instanceof G1||r instanceof Qp||r instanceof gd||r instanceof vS||r instanceof xS||r instanceof gS||r instanceof yS||r instanceof _S||r instanceof bS||r instanceof Du||r instanceof wS||r instanceof ES||r instanceof mS)&&i.transform.push(r.assemble()),(r instanceof Bo||r instanceof Lo||r instanceof ih||r instanceof Xl||r instanceof w0)&&i.transform.push(...r.assemble()),r instanceof ns&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof ns?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof ns&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const a of r.children)n(a,{name:null,source:s,transform:[]});break}}}return n}function pLe(e){const t=[],n=dee(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function gLe(e,t){const n=[],r=dee(n);let i=0;for(const a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);const o=a.assemble();r(a,o)}for(const a of n)a.transform.length===0&&delete a.transform;let s=0;for(const[a,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(s++,0,n.splice(a,1)[0]);for(const a of n)for(const o of a.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const a of n)a.name in t&&(a.values=t[a.name]);return n}function mLe(e){return e==="top"||e==="left"||Ye(e)?"header":"footer"}function xLe(e){for(const t of aa)vLe(e,t);q8(e,"x"),q8(e,"y")}function vLe(e,t){var a;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const o=n[t],l=xp("title",null,r,t);let c=b0(o,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(c=pe(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const u=xp("labelOrient",o.header,r,t),f=o.header!==null?$n((a=o.header)==null?void 0:a.labels,r.header.labels,!0):!1,h=yt(["bottom","right"],u)?"footer":"header";s.layoutHeaders[t]={title:o.header!==null?c:null,facetFieldDef:o,[h]:t==="facet"?[]:[pee(e,t,f)]}}}function pee(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function q8(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=DI(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",a=r[s];for(const o of n.component.axes[t]){const l=mLe(o.get("orient"));a[l]??(a[l]=[pee(e,s,!1)]);const c=hm(o,"main",e.config,{header:!0});c&&a[l][0].axes.push(c),o.mainExtracted=!0}}}}function yLe(e){UI(e),kb(e,"width"),kb(e,"height")}function _Le(e){UI(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";kb(e,t),kb(e,n)}function UI(e){for(const t of e.children)t.parseLayoutSize()}function kb(e,t){const n=UQ(t),r=Hw(n),i=e.component.resolve,s=e.component.layoutSize;let a;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),c=i.scale[r]??HQ(r,e);if(c==="independent"&&l.value==="step"){a=void 0;break}if(a){if(c==="independent"&&a.value!==l.value){a=void 0;break}a=Nu(a,l,n,"")}else a=l}if(a){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,a)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function bLe(e){const{size:t,component:n}=e;for(const r of vc){const i=us(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Jo(s)?"step":s,!0)}else{const s=ELe(e,i);n.layoutSize.set(i,s,!1)}}}function ELe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),a=i.get("range");if(xr(s)){const o=wb(r.view,t);return ud(a)||Jo(o)?"step":o}else return XF(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return XF(r.view,t);{const s=wb(r.view,t);return Jo(s)?s.step:s}}}function h3(e,t,n){return $e(t,{suffix:`by_${$e(e)}`,...n})}class Bm extends hee{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=jI(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Kx(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Se(t),r={};for(const i of n){if(![Wl,jl].includes(i)){Ae(jw(i,"facet"));break}const s=t[i];if(s.field===void 0){Ae(VF(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=uI(t,n);return r.header?r.header=wr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return Te(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=SS(this),this.child.parseData()}parseLayoutSize(){UI(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Po(t))&&BR(PR)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),xLe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of aa)for(const r of OI){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:a}=i;if(a){const o=xp("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(o)){const l=hS(n,o);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const o=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Bm))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Bm?{...this.channelHasField("column")?{encode:{update:{columns:{field:$e(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Bm){if(this.child.channelHasField("column")){const i=$e(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of vc){const s=this.child.component.scales[i];if(s&&!s.merged){const a=s.get("type"),o=s.get("range");if(xr(a)&&ud(o)){const l=pS(this.child,i),c=LI(l);c?(t.push(c),n.push("distinct"),r.push(`distinct_${c}`)):Ae(LR(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:a,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const u of aa){const f=this.facet[u];if(f){l.push($e(f));const{bin:h,sort:d}=f;if(ln(h)&&l.push($e(f,{binSuffix:"end"})),Gl(d)){const{field:p,op:g=Zw}=d,m=h3(f,d);r&&i?(s.push(m),a.push("max"),o.push(m)):(s.push(p),a.push(g),o.push(m))}else if(pe(d)){const p=mp(f,u);s.push(p),a.push("max"),o.push(p)}}}const c=!!r&&!!i;return{name:t,data:n,groupby:l,...c||s.length>0?{aggregate:{...c?{cross:c}:{},...s.length?{fields:s,ops:a,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Gl(r.sort)?[h3(r,r.sort,{expr:"datum"})]:pe(r.sort)?[mp(r,t,{expr:"datum"})]:[$e(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Gl(i)?i.order:!pe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return s3(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of FI)if(t[s]){const a=xp("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(a))return s3(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=pLe(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:aa.map(l=>this.facetSortFields(l)).flat(),order:aa.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(L$e(this,[]))}]}getMapping(){return this.facet}}function wLe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Gl(s.sort)){const{field:a,op:o=Zw}=s.sort;e=i=new gd(e,{joinaggregate:[{op:o,field:a,as:h3(s,s.sort,{forAs:!0})}],groupby:[$e(s)]})}return i}return null}function gee(e,t){var n,r,i,s;for(const a of t){const o=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,c=(r=o.format)==null?void 0:r.feature;if(l&&c)continue;const u=(i=e.format)==null?void 0:i.feature;if((u||c)&&u!==c)continue;const f=(s=o.format)==null?void 0:s.mesh;if(!((l||f)&&l!==f)){if(W1(e)&&W1(o)){if(Ts(e.values,o.values))return a}else if(dp(e)&&dp(o)){if(e.url===o.url)return a}else if(tQ(e)&&e.name===a.dataName)return a}}return null}function SLe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Bh({values:[]});return t.push(r),r}const n=gee(e.data,t);if(n)return du(e.data)||(n.data.format=KK({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Bh(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function TLe(e,t,n){let r=0;for(const i of t.transforms){let s,a;if(f$e(i))a=e=new gp(e,i),s="derived";else if(EI(i)){const o=g6e(i);a=e=ni.makeWithAncestors(e,{},o,n)??e,e=new Jp(e,t,i.filter)}else if(KZ(i))a=e=Bo.makeFromTransform(e,i,t),s="number";else if(d$e(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ni(e,{[i.field]:s}),n.set(i.field,s,!1)),a=e=Lo.makeFromTransform(e,i);else if(p$e(i))a=e=Xa.makeFromTransform(e,i),s="number",CI(t)&&(e=new Du(e));else if(YZ(i))a=e=G1.make(e,t,i,r++),s="derived";else if(l$e(i))a=e=new Qp(e,i),s="number";else if(c$e(i))a=e=new gd(e,i),s="number";else if(g$e(i))a=e=Xl.makeFromTransform(e,i),s="derived";else if(m$e(i))a=e=new vS(e,i),s="derived";else if(x$e(i))a=e=new mS(e,i),s="derived";else if(u$e(i))a=e=new xS(e,i),s="derived";else if(n$e(i))a=e=new ES(e,i),s="derived";else if(o$e(i))e=new wS(e,i);else if(h$e(i))a=e=ih.makeFromTransform(e,i),s="derived";else if(r$e(i))a=e=new gS(e,i),s="derived";else if(i$e(i))a=e=new _S(e,i),s="derived";else if(s$e(i))a=e=new bS(e,i),s="derived";else if(a$e(i))a=e=new yS(e,i),s="derived";else{Ae($Ne(i));continue}if(a&&s!==void 0)for(const o of a.producedFields()??[])n.set(o,s,!1)}return e}function SS(e){var m;let t=SLe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(du(i)||dp(i)||W1(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new F$e;du(i)?(nQ(i)?t=new rv(t,i.sequence):wI(i)&&(t=new nv(t,i.graticule)),a.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(a.parseNothing=!0),t=ni.makeExplicit(t,e,a)??t,t=new Du(t);const o=e.parent&&eg(e.parent);(bn(e)||Os(e))&&o&&(t=Bo.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=TLe(t,e,a));const l=x6e(e),c=m6e(e);t=ni.makeWithAncestors(t,{},{...l,...c},a)??t,bn(e)&&(t=w0.parseAll(t,e),t=j1.parseAll(t,e)),(bn(e)||Os(e))&&(o||(t=Bo.makeFromEncoding(t,e)??t),t=Lo.makeFromEncoding(t,e)??t,t=gp.parseAllForSortIndex(t,e));const u=t=my(En.Raw,e,t);if(bn(e)){const x=Xa.makeFromEncoding(t,e);x&&(t=x,CI(e)&&(t=new Du(t))),t=ih.makeFromEncoding(t,e)??t,t=Xl.makeFromEncoding(t,e)??t}let f,h;if(bn(e)){const{markDef:x,mark:y,config:v}=e,_=Qt("invalid",x,v),{marks:b,scales:w}=h=iQ({invalid:_,isPath:nf(y)});b!==w&&w==="include-invalid-values"&&(f=t=my(En.PreFilterInvalid,e,t)),b==="exclude-invalid-values"&&(t=vp.make(t,e,h)??t)}const d=t=my(En.Main,e,t);let p;if(bn(e)&&h){const{marks:x,scales:y}=h;x==="include-invalid-values"&&y==="exclude-invalid-values"&&(t=vp.make(t,e,h)??t,p=t=my(En.PostFilterInvalid,e,t))}bn(e)&&hMe(e,d);let g=null;if(Os(e)){const x=e.getName("facet");t=wLe(t,e.facet)??t,g=new Zp(t,e,x,d.getSource()),n[x]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:u,main:d,facetRoot:g,ancestorParse:a,preFilterInvalid:f,postFilterInvalid:p}}function my(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),a=new ns(n,s,e,i);return r[s]=a,a}class ALe extends BI{constructor(t,n,r,i){var s,a,o,l;super(t,"concat",n,r,i,t.resolve),(((a=(s=t.resolve)==null?void 0:s.axis)==null?void 0:a.x)==="shared"||((l=(o=t.resolve)==null?void 0:o.axis)==null?void 0:l.y)==="shared")&&Ae(DNe),this.children=this.getChildren(t).map((c,u)=>jI(c,this,this.getName(`concat_${u}`),void 0,i))}parseData(){this.component.data=SS(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Se(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Po(t))&&BR(PR)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return sS(t)?t.vconcat:_I(t)?t.hconcat:t.concat}parseLayoutSize(){_Le(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=NI(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function kLe(e){return e===!1||e===null}const CLe={disable:1,gridScale:1,scale:1,...yZ,labelExpr:1,encode:1},mee=Se(CLe);class zI extends _c{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new zI(at(this.explicit),at(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!kLe(this.get(t))}hasOrientSignalRef(){return Ye(this.explicit.orient)}}function FLe(e,t,n){const{encoding:r,config:i}=e,s=tr(r[t])??tr(r[ul(t)]),a=e.axis(t)||{},{format:o,formatType:l}=a;if(Mh(l))return{text:Ha({fieldOrDatumDef:s,field:"datum.value",format:o,formatType:l,config:i}),...n};if(o===void 0&&l===void 0&&i.customFormatTypes){if(up(s)==="quantitative"){if(fp(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Ha({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Ha({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(up(s)==="temporal"&&i.timeFormatType&&Fe(s)&&!s.timeUnit)return{text:Ha({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function OLe(e){return vc.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[LLe(n,e)]),t),{})}const NLe={bottom:"top",top:"bottom",left:"right",right:"left"};function DLe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Se(i.component.axes))n.axis[s]=DI(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=RLe(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of vc){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const a of s.component.axes[i]){const{value:o,explicit:l}=a.getWithExplicit("orient");if(!Ye(o)){if(r[o]>0&&!l){const c=NLe[o];r[o]>r[c]&&a.set("orient",c,!1)}r[o]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,a]of(t[i]||[]).entries())s>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function RLe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const a=i.getWithExplicit("orient"),o=s.getWithExplicit("orient");if(a.explicit&&o.explicit&&a.value!==o.value)return;e[r]=ILe(i,s)}}}else return t.map(n=>n.clone());return e}function ILe(e,t){for(const n of mee){const r=Nu(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return wJ(i,s);case"gridScale":return{explicit:i.explicit,value:$n(i.value,s.value)}}return oS(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function $Le(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ye(n.labelAngle)?n.labelAngle:H1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$Q(r,i))return!0}return e===n[t]}const MLe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function LLe(e,t){var x,y;let n=t.axis(e);const r=new zI,i=tr(t.encoding[e]),{mark:s,config:a}=t,o=(n==null?void 0:n.orient)||((x=a[e==="x"?"axisX":"axisY"])==null?void 0:x.orient)||((y=a.axis)==null?void 0:y.orient)||EMe(e),l=t.getScaleComponent(e).get("type"),c=gMe(e,l,o,t.config),u=n!==void 0?!n:r3("disable",a.style,n==null?void 0:n.style,c).configValue;if(r.set("disable",u,n!==void 0),u)return r;n=n||{};const f=yMe(i,n,e,a.style,c),h=sZ(n.formatType,i,l),d=iZ(i,i.type,n.format,n.formatType,a,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:o,labelAngle:f,format:d,formatType:h,mark:s,config:a};for(const v of mee){const _=v in D8?D8[v](p):s8(v)?n[v]:void 0,b=_!==void 0,w=$Le(_,v,n,t,e);if(b&&w)r.set(v,_,w);else{const{configValue:E=void 0,configFrom:T=void 0}=s8(v)&&v!=="values"?r3(v,a.style,n.style,c):{},S=E!==void 0;b&&!S?r.set(v,_,w):(T!=="vgAxisConfig"||MLe.has(v)&&S||ev(E)||Ye(E))&&r.set(v,E,!1)}}const g=n.encoding??{},m=vZ.reduce((v,_)=>{if(!r.hasAxisPart(_))return v;const b=zQ(g[_]??{},t),w=_==="labels"?FLe(t,e,b):b;return w!==void 0&&!tn(w)&&(v[_]={update:w}),v},{});return tn(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function PLe({encoding:e,size:t}){for(const n of vc){const r=us(n);Jo(t[r])&&tu(e[n])&&(delete t[r],Ae(CJ(r)))}return t}const BLe={vgMark:"arc",encodeEntry:e=>({...Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...ac(e,"radius"),...ac(e,"theta")})},ULe={vgMark:"area",encodeEntry:e=>({...Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Sb("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Sb("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...kI(e)})},zLe={vgMark:"rect",encodeEntry:e=>({...Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ac(e,"x"),...ac(e,"y")})},HLe={vgMark:"shape",encodeEntry:e=>({...Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Fe(n)&&n.type===Yp?{field:$e(n,{expr:"datum"})}:{}}]}},VLe={vgMark:"image",encodeEntry:e=>({...Ta(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ac(e,"x"),...ac(e,"y"),...TI(e,"url")})},WLe={vgMark:"line",encodeEntry:e=>({...Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...Tr("size",e,{vgChannel:"strokeWidth"}),...kI(e)})},jLe={vgMark:"trail",encodeEntry:e=>({...Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...Tr("size",e),...kI(e)})};function HI(e,t){const{config:n}=e;return{...Ta(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...Tr("size",e),...Tr("angle",e),...GLe(e,n,t)}}function GLe(e,t,n){return n?{shape:{value:n}}:Tr("shape",e)}const qLe={vgMark:"symbol",encodeEntry:e=>HI(e)},XLe={vgMark:"symbol",encodeEntry:e=>HI(e,"circle")},YLe={vgMark:"symbol",encodeEntry:e=>HI(e,"square")},KLe={vgMark:"rect",encodeEntry:e=>({...Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ac(e,"x"),...ac(e,"y")})},JLe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Sb("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Sb("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Tr("size",e,{vgChannel:"strokeWidth"})}}},ZLe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ta(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...TI(e),...Tr("size",e,{vgChannel:"fontSize"}),...Tr("angle",e),...C8("align",QLe(e.markDef,n,t)),...C8("baseline",e5e(e.markDef,n,t)),...Ni("radius",e,{defaultPos:null}),...Ni("theta",e,{defaultPos:null})}}};function QLe(e,t,n){if(Qt("align",e,n)===void 0)return"center"}function e5e(e,t,n){if(Qt("baseline",e,n)===void 0)return"middle"}const t5e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",a=r==="horizontal"?"height":"width";return{...Ta(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ac(e,i),...Ni(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[a]:un(Qt("thickness",n,t))}}},xy={arc:BLe,area:ULe,bar:zLe,circle:XLe,geoshape:HLe,image:VLe,line:WLe,point:qLe,rect:KLe,rule:JLe,square:YLe,text:ZLe,tick:t5e,trail:jLe};function n5e(e){if(yt([Kw,Xw,lRe],e.mark)){const t=TZ(e.mark,e.encoding);if(t.length>0)return r5e(e,t)}else if(e.mark===Yw){const t=zF.some(n=>Qt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return i5e(e)}return VI(e)}const X8="faceted_path_";function r5e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:X8+e.requestDataName(En.Main),data:e.requestDataName(En.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:VI(e,{fromPrefix:X8})}]}const Y8="stack_group_";function i5e(e){var c;const[t]=VI(e,{fromPrefix:Y8}),n=e.scaleName(e.stack.fieldChannel),r=(u={})=>e.vgField(e.stack.fieldChannel,u),i=(u,f)=>{const h=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${u}(${h.map(d=>`scale('${n}',${d})`).join(",")})`};let s,a;e.stack.fieldChannel==="x"?(s={...ip(t.encode.update,["y","yc","y2","height",...zF]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ts(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...ip(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ts(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of zF){const f=Yo(u,e.markDef,e.config);t.encode.update[u]?(s[u]=t.encode.update[u],delete t.encode.update[u]):f&&(s[u]=un(f)),f&&(t.encode.update[u]={value:0})}const o=[];if(((c=e.stack.groupbyChannels)==null?void 0:c.length)>0)for(const u of e.stack.groupbyChannels){const f=e.fieldDef(u),h=$e(f);h&&o.push(h),(f!=null&&f.bin||f!=null&&f.timeUnit)&&o.push($e(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,f)=>{if(t.encode.update[f])return{...u,[f]:t.encode.update[f]};{const h=Yo(f,e.markDef,e.config);return h!==void 0?{...u,[f]:un(h)}:u}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(En.Main),name:Y8+e.requestDataName(En.Main),groupby:o,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function s5e(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,a=t.order;if(!(!pe(a)&&Qa(a)&&BF(a.value)||!a&&BF(Qt("order",i,s)))){if((pe(a)||Fe(a))&&!n)return _J(a,{expr:"datum"});if(nf(r)){const o=i.orient==="horizontal"?"y":"x",l=t[o];if(Fe(l))return{field:o}}}}function VI(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,a=$n(r.clip,a5e(e),o5e(e)),o=vJ(r),l=i.key,c=s5e(e),u=l5e(e),f=Qt("aria",r,s),h=xy[n].postEncodingTransform?xy[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:xy[n].vgMark,...a?{clip:a}:{},...o?{style:o}:{},...l?{key:l.field}:{},...c?{sort:c}:{},...u||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(En.Main)},encode:{update:xy[n].encodeEntry(e)},...h?{transform:h}:{}}]}function a5e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function o5e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function l5e(e){if(!e.component.selection)return null;const t=Se(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Se(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class xee extends hee{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,o8(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=c=>{var u,f,h;return(u=c.from)!=null&&u.data&&(c.from.data=this.lookupDataSource(c.from.data),"time"in this.encoding&&(c.from.data=c.from.data+aQ)),(h=(f=c.from)==null?void 0:f.facet)!=null&&h.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c};const a=Ko(t.mark)?{...t.mark}:{type:t.mark},o=a.type;a.filled===void 0&&(a.filled=jIe(a,s,{graticule:t.data&&wI(t.data)}));const l=this.encoding=YRe(t.encoding||{},o,a.filled,s);this.markDef=GZ(a,l,s),this.size=PLe({encoding:l,size:o8(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=jZ(this.markDef,l),this.specifiedScales=this.initScales(o,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(c=>vI(c))}get hasProjection(){const{encoding:t}=this,n=this.mark===JJ,r=t&&zOe.some(i=>ot(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return IR.reduce((r,i)=>{const s=tr(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=wr(t);return pe(n)&&(i.domain=n.map(Es)),pe(r)&&(i.range=r.map(Es)),i}initAxes(t){return vc.reduce((n,r)=>{const i=t[r];if(ot(i)||r===vn&&ot(t.x2)||r===_r&&ot(t.y2)){const s=ot(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Se(t),r={};for(const i of n){const s=t[i];r[i]=ev(s)?xJ(s):Es(s)}return r}initLegends(t){return ZOe.reduce((n,r)=>{const i=tr(t[r]);if(i&&eNe(r)){const s=i.legend;n[r]=s&&wr(s)}return n},{})}parseData(){this.component.data=SS(this)}parseLayoutSize(){bLe(this)}parseSelections(){this.component.selection=fMe(this,this.selection)}parseMarkGroup(){this.component.mark=n5e(this)}parseAxesAndHeaders(){this.component.axes=OLe(this)}assembleSelectionTopLevelSignals(t){return P$e(this,t)}assembleSignals(){return[...DQ(this),...M$e(this,[])]}assembleSelectionData(t){return B$e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return NI(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!eg(this.parent))&&(t=uQ(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return nh(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return eo(n)}typedFieldDef(t){const n=this.fieldDef(t);return Bi(n)?n:null}}class WI extends BI{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const a={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,l)=>{if(aS(o))return new WI(o,this,this.getName(`layer_${l}`),a,s);if(yc(o))return new xee(o,this,this.getName(`layer_${l}`),a,s);throw new Error(MR(o))})}parseData(){this.component.data=SS(this);for(const t of this.children)t.parseData()}parseLayoutSize(){yLe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Se(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Po(t))&&BR(PR)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){DLe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),DQ(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),NI(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Be(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return U$e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),YQ(this))}}function jI(e,t,n,r,i){if(Qw(e))return new Bm(e,t,n,i);if(aS(e))return new WI(e,t,n,r,i);if(yc(e))return new xee(e,t,n,r,i);if(yIe(e))return new ALe(e,t,n,i);throw new Error(MR(e))}function c5e(e,t={}){t.logger&&EDe(t.logger),t.fieldTitle&&gZ(t.fieldTitle);try{const n=WZ($p(t.config,e.config)),r=QZ(e,n),i=jI(r,null,"",void 0,n);return i.parse(),R6e(i.component.data,i),{spec:f5e(i,u5e(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&wDe(),t.fieldTitle&&URe()}}function u5e(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Ue(t)&&(t={type:t}),i&&s&&A$e(t.type)){if(i==="step"&&s==="step")Ae(jP()),t.type="pad";else if(i==="step"||s==="step"){const a=i==="step"?"width":"height";Ae(jP(Hw(a)));const o=a==="width"?"height":"width";t.type=k$e(o)}}return{...Se(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...y8(n,!1),...y8(e,!0)}}function f5e(e,t,n={},r){const i=e.config?RIe(e.config):void 0,s=gLe(e.component.data,n),a=e.assembleSelectionData(s),o=e.assembleProjections(),l=e.assembleTitle(),c=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:h,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...l?{title:l}:{},...c?{style:c}:{},...u?{encode:{update:u}}:{},data:a,...o.length>0?{projections:o}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...UZ(h)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const h5e=$Oe.version,d5e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ap,accessPathWithDatum:AR,accessWithDatumToUnescapedPath:Xt,compile:c5e,contains:yt,deepEqual:Ts,deleteNestedProperty:pb,duplicate:at,entries:Cu,every:wR,fieldIntersection:TR,flatAccessWithDatum:ZK,getFirstDefined:$n,hasIntersection:SR,hasProperty:Te,hash:At,internalField:tJ,isBoolean:z1,isEmpty:tn,isEqual:LOe,isInternalField:nJ,isNullOrFalse:BF,isNumeric:Mw,keys:Se,logicalExpr:Lm,mergeDeep:KK,never:YK,normalize:QZ,normalizeAngle:H1,omit:ts,pick:ip,prefixGenerator:UF,removePathFromField:qp,replaceAll:Oh,replacePathInField:va,resetIdCounter:BOe,setEqual:JK,some:sp,stringify:nn,titleCase:Vx,unique:Oo,uniqueId:eJ,vals:Dr,varName:xn,version:h5e},Symbol.toStringTag,{value:"Module"}));function vee(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var p5e="2.15.0",g5e={version:p5e};const Ld="#fff",K8="#888",m5e={background:"#333",view:{stroke:K8},title:{color:Ld,subtitleColor:Ld},style:{"guide-label":{fill:Ld},"guide-title":{fill:Ld}},axis:{domainColor:Ld,gridColor:K8,tickColor:Ld}},xf="#4572a7",x5e={background:"#fff",arc:{fill:xf},area:{fill:xf},line:{stroke:xf,strokeWidth:2},path:{stroke:xf},rect:{fill:xf},shape:{stroke:xf},symbol:{fill:xf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},vf="#30a2da",CA="#cbcbcb",v5e="#999",y5e="#333",J8="#f0f0f0",Z8="#333",_5e={arc:{fill:vf},area:{fill:vf},axis:{domainColor:CA,grid:!0,gridColor:CA,gridWidth:1,labelColor:v5e,labelFontSize:10,titleColor:y5e,tickColor:CA,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:J8,group:{fill:J8},legend:{labelColor:Z8,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Z8,titleFontSize:14,titlePadding:10},line:{stroke:vf,strokeWidth:2},path:{stroke:vf,strokeWidth:.5},rect:{fill:vf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:vf},bar:{binSpacing:2,fill:vf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},yf="#000",b5e={group:{fill:"#e5e5e5"},arc:{fill:yf},area:{fill:yf},line:{stroke:yf},path:{stroke:yf},rect:{fill:yf},shape:{stroke:yf},symbol:{fill:yf,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},E5e=22,w5e="normal",Q8="Benton Gothic, sans-serif",e9=11.5,S5e="normal",_f="#82c6df",FA="Benton Gothic Bold, sans-serif",t9="normal",n9=13,Mg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},T5e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:FA,fontSize:E5e,fontWeight:w5e},arc:{fill:_f},area:{fill:_f},line:{stroke:_f,strokeWidth:2},path:{stroke:_f},rect:{fill:_f},shape:{stroke:_f},symbol:{fill:_f,size:30},axis:{labelFont:Q8,labelFontSize:e9,labelFontWeight:S5e,titleFont:FA,titleFontSize:n9,titleFontWeight:t9},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Q8,labelFontSize:e9,symbolType:"square",titleFont:FA,titleFontSize:n9,titleFontWeight:t9},range:{category:Mg["category-6"],diverging:Mg["fireandice-6"],heatmap:Mg["fire-7"],ordinal:Mg["fire-7"],ramp:Mg["fire-7"]}},bf="#ab5787",vy="#979797",A5e={background:"#f9f9f9",arc:{fill:bf},area:{fill:bf},line:{stroke:bf},path:{stroke:bf},rect:{fill:bf},shape:{stroke:bf},symbol:{fill:bf,size:30},axis:{domainColor:vy,domainWidth:.5,gridWidth:.2,labelColor:vy,tickColor:vy,tickWidth:.2,titleColor:vy},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ef="#3e5c69",k5e={background:"#fff",arc:{fill:Ef},area:{fill:Ef},line:{stroke:Ef},path:{stroke:Ef},rect:{fill:Ef},shape:{stroke:Ef},symbol:{fill:Ef},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Gs="#1696d2",r9="#000000",C5e="#FFFFFF",yy="Lato",OA="Lato",F5e="Lato",O5e="#DEDDDD",N5e=18,Lg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},D5e={background:C5e,title:{anchor:"start",fontSize:N5e,font:yy},axisX:{domain:!0,domainColor:r9,domainWidth:1,grid:!1,labelFontSize:12,labelFont:OA,labelAngle:0,tickColor:r9,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:yy},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:O5e,gridWidth:1,labelFontSize:12,labelFont:OA,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:yy,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:OA,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:yy,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Lg["six-groups-cat-1"],diverging:Lg["diverging-colors"],heatmap:Lg["diverging-colors"],ordinal:Lg["six-groups-seq"],ramp:Lg["shades-blue"]},area:{fill:Gs},rect:{fill:Gs},line:{color:Gs,stroke:Gs,strokeWidth:5},trail:{color:Gs,stroke:Gs,strokeWidth:0,size:1},path:{stroke:Gs,strokeWidth:.5},point:{filled:!0},text:{font:F5e,color:Gs,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Gs,stroke:null}},arc:{fill:Gs},shape:{stroke:Gs},symbol:{fill:Gs,size:30}},wf="#3366CC",i9="#ccc",_y="Arial, sans-serif",R5e={arc:{fill:wf},area:{fill:wf},path:{stroke:wf},rect:{fill:wf},shape:{stroke:wf},symbol:{stroke:wf},circle:{fill:wf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:_y,fontSize:12},"guide-title":{font:_y,fontSize:12},"group-title":{font:_y,fontSize:12}},title:{font:_y,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:i9,tickColor:i9,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},GI=e=>e*(1/3+1),s9=GI(9),a9=GI(10),o9=GI(12),Pg="Segoe UI",l9="wf_standard-font, helvetica, arial, sans-serif",c9="#252423",Bg="#605E5C",u9="transparent",I5e="#C8C6C4",Da="#118DFF",$5e="#12239E",M5e="#E66C37",L5e="#6B007B",P5e="#E044A7",B5e="#744EC2",U5e="#D9B300",z5e="#D64550",yee=Da,_ee="#DEEFFF",f9=[_ee,yee],H5e=[_ee,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",yee],V5e={view:{stroke:u9},background:u9,font:Pg,header:{titleFont:l9,titleFontSize:o9,titleColor:c9,labelFont:Pg,labelFontSize:a9,labelColor:Bg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Bg,labelFontSize:s9,titleFont:l9,titleColor:c9,titleFontSize:o9,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:I5e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Da},line:{stroke:Da,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Pg,fontSize:s9,fill:Bg},arc:{fill:Da},area:{fill:Da,line:!0,opacity:.6},path:{stroke:Da},rect:{fill:Da},point:{fill:Da,filled:!0,size:75},shape:{stroke:Da},symbol:{fill:Da,strokeWidth:1.5,size:50},legend:{titleFont:Pg,titleFontWeight:"bold",titleColor:Bg,labelFont:Pg,labelFontSize:a9,labelColor:Bg,symbolType:"circle",symbolSize:75},range:{category:[Da,$5e,M5e,L5e,P5e,B5e,U5e,z5e],diverging:f9,heatmap:f9,ordinal:H5e}},NA='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',W5e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',DA=400,by={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},j5e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],G5e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function TS({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=by.gridBg[e],i=by.textPrimary[e],s=by.textSecondary[e],a=n==="dark"?j5e:G5e,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:NA,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:W5e,labelFontWeight:DA,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:by.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:NA,fill:s,fontWeight:DA},"guide-title":{font:NA,fill:s,fontWeight:DA}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const q5e=TS({theme:"white",background:"#ffffff"}),X5e=TS({theme:"g10",background:"#f4f4f4"}),Y5e=TS({theme:"g90",background:"#262626"}),K5e=TS({theme:"g100",background:"#161616"}),J5e=g5e.version,Z5e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:X5e,carbong100:K5e,carbong90:Y5e,carbonwhite:q5e,dark:m5e,excel:x5e,fivethirtyeight:_5e,ggplot2:b5e,googlecharts:R5e,latimes:T5e,powerbi:V5e,quartz:A5e,urbaninstitute:D5e,version:J5e,vox:k5e},Symbol.toStringTag,{value:"Module"}));function Q5e(e,t,n,r){if(pe(e))return`[${e.map(i=>t(Ue(i)?i:h9(i,n))).join(", ")}]`;if(Pe(e)){let i="";const{title:s,image:a,...o}=e;s&&(i+=`<h2>${t(s)}</h2>`),a&&(i+=`<img src="${new URL(t(a),r||location.href).href}">`);const l=Object.keys(o);if(l.length>0){i+="<table>";for(const c of l){let u=o[c];u!==void 0&&(Pe(u)&&(u=h9(u,n)),i+=`<tr><td class="key">${t(c)}</td><td class="value">${t(u)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function ePe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function h9(e,t){return JSON.stringify(e,ePe(t))}var tPe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const bee="vg-tooltip-element",nPe={offsetX:10,offsetY:10,id:bee,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:rPe,maxDepth:2,formatTooltip:Q5e,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function rPe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function iPe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return tPe.toString().replace(bee,e)}function Eee(e,t,{offsetX:n,offsetY:r}){const i=wee({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),s=["bottom-right","bottom-left","top-right","top-left"];for(const a of s)if(See(i[a],t))return i[a];return i["top-left"]}function sPe(e,t,n,r,i){const{position:s,offsetX:a,offsetY:o}=i,l=e._el.getBoundingClientRect(),c=e._origin,u=aPe(l,c,n),f=wee(u,r,a,o),h=Array.isArray(s)?s:[s];for(const d of h)if(See(f[d],r)&&!oPe(t,f[d],r))return f[d];return Eee(t,r,i)}function aPe(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,s=e.top+t[1]+r.y1,a=n;for(;a.mark.group;)a=a.mark.group,i+=a.x??0,s+=a.y??0;const o=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+o,y1:s,y2:s+l}}function wee(e,t,n,r){const i=(e.x1+e.x2)/2,s=(e.y1+e.y2)/2,a=e.x1-t.width-n,o=i-t.width/2,l=e.x2+n,c=e.y1-t.height-r,u=s-t.height/2,f=e.y2+r;return{top:{x:o,y:c},bottom:{x:o,y:f},left:{x:a,y:u},right:{x:l,y:u},"top-left":{x:a,y:c},"top-right":{x:l,y:c},"bottom-left":{x:a,y:f},"bottom-right":{x:l,y:f}}}function See(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function oPe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class lPe{constructor(t){this.options={...nPe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=iPe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:a}=this.options.anchor==="mark"?sPe(t,n,r,this.el.getBoundingClientRect(),this.options):Eee(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${a}px`,this.el.style.left=`${s}px`}}var RA={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var cPe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uPe=Object.prototype.hasOwnProperty;function d3(e,t){return uPe.call(e,t)}function p3(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)d3(e,i)&&r.push(i);return r}function As(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function g3(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ff(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Tee(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function m3(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(m3(e[t]))return!0}else if(typeof e=="object"){for(var r=p3(e),i=r.length,s=0;s<i;s++)if(m3(e[r[s]]))return!0}}return!1}function d9(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Aee=function(e){cPe(t,e);function t(n,r,i,s,a){var o=this.constructor,l=e.call(this,d9(n,{name:r,index:i,operation:s,tree:a}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=a,Object.setPrototypeOf(l,o.prototype),l.message=d9(n,{name:r,index:i,operation:s,tree:a}),l}return t}(Error),An=Aee,fPe=As,i0={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Cb(n,this.path);r&&(r=As(r));var i=sh(n,{op:"remove",path:this.from}).removed;return sh(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Cb(n,this.from);return sh(n,{op:"add",path:this.path,value:As(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:q1(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},hPe={add:function(e,t,n){return g3(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:i0.move,copy:i0.copy,test:i0.test,_get:i0._get};function Cb(e,t){if(t=="")return e;var n={op:"_get",path:t};return sh(e,n),n.value}function sh(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Fb(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=Cb(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=q1(e,t.value),a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new An("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return a}}else{r||(e=As(e));var o=t.path||"",l=o.split("/"),c=e,u=1,f=l.length,h=void 0,d=void 0,p=void 0;for(typeof n=="function"?p=n:p=Fb;;){if(d=l[u],d&&d.indexOf("~")!=-1&&(d=Tee(d)),i&&(d=="__proto__"||d=="prototype"&&u>0&&l[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(c[d]===void 0?h=l.slice(0,u).join("/"):u==f-1&&(h=t.path),h!==void 0&&p(t,0,e,h)),u++,Array.isArray(c)){if(d==="-")d=c.length;else{if(n&&!g3(d))throw new An("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);g3(d)&&(d=~~d)}if(u>=f){if(n&&t.op==="add"&&d>c.length)throw new An("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var a=hPe[t.op].call(t,c,d,e);if(a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}}else if(u>=f){var a=i0[t.op].call(t,c,d,e);if(a.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return a}if(c=c[d],n&&u<f&&(!c||typeof c!="object"))throw new An("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function AS(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new An("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=As(e));for(var s=new Array(t.length),a=0,o=t.length;a<o;a++)s[a]=sh(e,t[a],n,!0,i,a),e=s[a].newDocument;return s.newDocument=e,s}function dPe(e,t,n){var r=sh(e,t);if(r.test===!1)throw new An("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Fb(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new An("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(i0[e.op]){if(typeof e.path!="string")throw new An("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new An('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new An("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new An("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&m3(e.value))throw new An("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new An("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new An("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},o=kee([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new An("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new An("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function kee(e,t,n){try{if(!Array.isArray(e))throw new An("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)AS(As(t),As(e),n||!0);else{n=n||Fb;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof An)return i;throw i}}function q1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,a;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!q1(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(e);if(s=o.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!q1(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}var pPe=Object.freeze({__proto__:null,JsonPatchError:An,_areEquals:q1,applyOperation:sh,applyPatch:AS,applyReducer:dPe,deepClone:fPe,getValueByPointer:Cb,validate:kee,validator:Fb});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var qI=new WeakMap,gPe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),mPe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function xPe(e){return qI.get(e)}function vPe(e,t){return e.observers.get(t)}function yPe(e,t){e.observers.delete(t.callback)}function _Pe(e,t){t.unobserve()}function bPe(e,t){var n=[],r,i=xPe(e);if(!i)i=new gPe(e),qI.set(e,i);else{var s=vPe(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=As(e),t){r.callback=t,r.next=null;var a=function(){x3(r)},o=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return r.patches=n,r.object=e,r.unobserve=function(){x3(r),clearTimeout(r.next),yPe(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},i.observers.set(t,new mPe(t,r)),r}function x3(e,t){t===void 0&&(t=!1);var n=qI.get(e.object);XI(n.value,e.object,e.patches,"",t),e.patches.length&&AS(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function XI(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=p3(t),a=p3(e),o=!1,l=a.length-1;l>=0;l--){var c=a[l],u=e[c];if(d3(t,c)&&!(t[c]===void 0&&u!==void 0&&Array.isArray(t)===!1)){var f=t[c];typeof u=="object"&&u!=null&&typeof f=="object"&&f!=null&&Array.isArray(u)===Array.isArray(f)?XI(u,f,n,r+"/"+Ff(c),i):u!==f&&(i&&n.push({op:"test",path:r+"/"+Ff(c),value:As(u)}),n.push({op:"replace",path:r+"/"+Ff(c),value:As(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ff(c),value:As(u)}),n.push({op:"remove",path:r+"/"+Ff(c)}),o=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!o&&s.length==a.length))for(var l=0;l<s.length;l++){var c=s[l];!d3(e,c)&&t[c]!==void 0&&n.push({op:"add",path:r+"/"+Ff(c),value:As(t[c])})}}}function EPe(e,t,n){n===void 0&&(n=!1);var r=[];return XI(e,t,r,"",n),r}var wPe=Object.freeze({__proto__:null,compare:EPe,generate:x3,observe:bPe,unobserve:_Pe});Object.assign({},pPe,wPe,{JsonPatchError:Aee,deepClone:As,escapePathComponent:Ff,unescapePathComponent:Tee});function SPe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var IA,p9;function TPe(){if(p9)return IA;p9=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,r)}return this}}return IA=e,IA}var $A,g9;function YI(){if(g9)return $A;g9=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return $A=r=>r?typeof r!="object"?e:r:t,$A}var Ey={exports:{}},MA,m9;function KI(){if(m9)return MA;m9=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return MA={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},MA}var LA,x9;function kS(){return x9||(x9=1,LA=typeof process=="object"&&RA&&RA.NODE_DEBUG&&/\bsemver\b/i.test(RA.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),LA}var v9;function JI(){return v9||(v9=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=KI(),s=kS();t=e.exports={};const a=t.re=[],o=t.safeRe=[],l=t.src=[],c=t.t={};let u=0;const f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[f,r]],d=g=>{for(const[m,x]of h)g=g.split(`${m}*`).join(`${m}{0,${x}}`).split(`${m}+`).join(`${m}{1,${x}}`);return g},p=(g,m,x)=>{const y=d(m),v=u++;s(g,v,m),c[g]=v,l[v]=m,a[v]=new RegExp(m,x?"g":void 0),o[v]=new RegExp(y,x?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),p("FULL",`^${l[c.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),p("LOOSE",`^${l[c.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),p("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[c.COERCE],!0),p("COERCERTLFULL",l[c.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Ey,Ey.exports)),Ey.exports}var PA,y9;function APe(){if(y9)return PA;y9=1;const e=/^[0-9]+$/,t=(r,i)=>{const s=e.test(r),a=e.test(i);return s&&a&&(r=+r,i=+i),r===i?0:s&&!a?-1:a&&!s?1:r<i?-1:1};return PA={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},PA}var BA,_9;function ZI(){if(_9)return BA;_9=1;const e=kS(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=KI(),{safeRe:r,t:i}=JI(),s=YI(),{compareIdentifiers:a}=APe();class o{constructor(c,u){if(u=s(u),c instanceof o){if(c.loose===!!u.loose&&c.includePrerelease===!!u.includePrerelease)return c;c=c.version}else if(typeof c!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof c}".`);if(c.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",c,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const f=c.trim().match(u.loose?r[i.LOOSE]:r[i.FULL]);if(!f)throw new TypeError(`Invalid Version: ${c}`);if(this.raw=c,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const d=+h;if(d>=0&&d<n)return d}return h}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(c){if(e("SemVer.compare",this.version,this.options,c),!(c instanceof o)){if(typeof c=="string"&&c===this.version)return 0;c=new o(c,this.options)}return c.version===this.version?0:this.compareMain(c)||this.comparePre(c)}compareMain(c){return c instanceof o||(c=new o(c,this.options)),a(this.major,c.major)||a(this.minor,c.minor)||a(this.patch,c.patch)}comparePre(c){if(c instanceof o||(c=new o(c,this.options)),this.prerelease.length&&!c.prerelease.length)return-1;if(!this.prerelease.length&&c.prerelease.length)return 1;if(!this.prerelease.length&&!c.prerelease.length)return 0;let u=0;do{const f=this.prerelease[u],h=c.prerelease[u];if(e("prerelease compare",u,f,h),f===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(f===void 0)return-1;if(f===h)continue;return a(f,h)}while(++u)}compareBuild(c){c instanceof o||(c=new o(c,this.options));let u=0;do{const f=this.build[u],h=c.build[u];if(e("build compare",u,f,h),f===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(f===void 0)return-1;if(f===h)continue;return a(f,h)}while(++u)}inc(c,u,f){switch(c){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,f),this.inc("pre",u,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,f),this.inc("pre",u,f);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(f)?1:0;if(!u&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[h];else{let d=this.prerelease.length;for(;--d>=0;)typeof this.prerelease[d]=="number"&&(this.prerelease[d]++,d=-2);if(d===-1){if(u===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(u){let d=[u,h];f===!1&&(d=[u]),a(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=d):this.prerelease=d}break}default:throw new Error(`invalid increment argument: ${c}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return BA=o,BA}var UA,b9;function tg(){if(b9)return UA;b9=1;const e=ZI();return UA=(n,r,i)=>new e(n,i).compare(new e(r,i)),UA}var zA,E9;function kPe(){if(E9)return zA;E9=1;const e=tg();return zA=(n,r,i)=>e(n,r,i)===0,zA}var HA,w9;function CPe(){if(w9)return HA;w9=1;const e=tg();return HA=(n,r,i)=>e(n,r,i)!==0,HA}var VA,S9;function FPe(){if(S9)return VA;S9=1;const e=tg();return VA=(n,r,i)=>e(n,r,i)>0,VA}var WA,T9;function OPe(){if(T9)return WA;T9=1;const e=tg();return WA=(n,r,i)=>e(n,r,i)>=0,WA}var jA,A9;function NPe(){if(A9)return jA;A9=1;const e=tg();return jA=(n,r,i)=>e(n,r,i)<0,jA}var GA,k9;function DPe(){if(k9)return GA;k9=1;const e=tg();return GA=(n,r,i)=>e(n,r,i)<=0,GA}var qA,C9;function RPe(){if(C9)return qA;C9=1;const e=kPe(),t=CPe(),n=FPe(),r=OPe(),i=NPe(),s=DPe();return qA=(o,l,c,u)=>{switch(l){case"===":return typeof o=="object"&&(o=o.version),typeof c=="object"&&(c=c.version),o===c;case"!==":return typeof o=="object"&&(o=o.version),typeof c=="object"&&(c=c.version),o!==c;case"":case"=":case"==":return e(o,c,u);case"!=":return t(o,c,u);case">":return n(o,c,u);case">=":return r(o,c,u);case"<":return i(o,c,u);case"<=":return s(o,c,u);default:throw new TypeError(`Invalid operator: ${l}`)}},qA}var XA,F9;function IPe(){if(F9)return XA;F9=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(u,f){if(f=n(f),u instanceof t){if(u.loose===!!f.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),a("comparator",u,f),this.options=f,this.loose=!!f.loose,this.parse(u),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(u){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],h=u.match(f);if(!h)throw new TypeError(`Invalid comparator: ${u}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new o(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(u){if(a("Comparator.test",u,this.options.loose),this.semver===e||u===e)return!0;if(typeof u=="string")try{u=new o(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,f){if(!(u instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(u.value,f).test(this.value):u.operator===""?u.value===""?!0:new l(this.value,f).test(u.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,f)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,f)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}XA=t;const n=YI(),{safeRe:r,t:i}=JI(),s=RPe(),a=kS(),o=ZI(),l=Cee();return XA}var YA,O9;function Cee(){if(O9)return YA;O9=1;const e=/\s+/g;class t{constructor(O,D){if(D=i(D),O instanceof t)return O.loose===!!D.loose&&O.includePrerelease===!!D.includePrerelease?O:new t(O.raw,D);if(O instanceof s)return this.raw=O.value,this.set=[[O]],this.formatted=void 0,this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=O.trim().replace(e," "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(U=>!g(U[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&m(U[0])){this.set=[U];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let O=0;O<this.set.length;O++){O>0&&(this.formatted+="||");const D=this.set[O];for(let I=0;I<D.length;I++)I>0&&(this.formatted+=" "),this.formatted+=D[I].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(O){const I=((this.options.includePrerelease&&d)|(this.options.loose&&p))+":"+O,U=r.get(I);if(U)return U;const Y=this.options.loose,X=Y?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];O=O.replace(X,F(this.options.includePrerelease)),a("hyphen replace",O),O=O.replace(l[c.COMPARATORTRIM],u),a("comparator trim",O),O=O.replace(l[c.TILDETRIM],f),a("tilde trim",O),O=O.replace(l[c.CARETTRIM],h),a("caret trim",O);let de=O.split(" ").map(Ee=>y(Ee,this.options)).join(" ").split(/\s+/).map(Ee=>C(Ee,this.options));Y&&(de=de.filter(Ee=>(a("loose invalid filter",Ee,this.options),!!Ee.match(l[c.COMPARATORLOOSE])))),a("range list",de);const le=new Map,ye=de.map(Ee=>new s(Ee,this.options));for(const Ee of ye){if(g(Ee))return[Ee];le.set(Ee.value,Ee)}le.size>1&&le.has("")&&le.delete("");const ve=[...le.values()];return r.set(I,ve),ve}intersects(O,D){if(!(O instanceof t))throw new TypeError("a Range is required");return this.set.some(I=>x(I,D)&&O.set.some(U=>x(U,D)&&I.every(Y=>U.every(X=>Y.intersects(X,D)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new o(O,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(N(this.set[D],O,this.options))return!0;return!1}}YA=t;const n=TPe(),r=new n,i=YI(),s=IPe(),a=kS(),o=ZI(),{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:f,caretTrimReplace:h}=JI(),{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:p}=KI(),g=M=>M.value==="<0.0.0-0",m=M=>M.value==="",x=(M,O)=>{let D=!0;const I=M.slice();let U=I.pop();for(;D&&I.length;)D=I.every(Y=>U.intersects(Y,O)),U=I.pop();return D},y=(M,O)=>(a("comp",M,O),M=w(M,O),a("caret",M),M=_(M,O),a("tildes",M),M=T(M,O),a("xrange",M),M=A(M,O),a("stars",M),M),v=M=>!M||M.toLowerCase()==="x"||M==="*",_=(M,O)=>M.trim().split(/\s+/).map(D=>b(D,O)).join(" "),b=(M,O)=>{const D=O.loose?l[c.TILDELOOSE]:l[c.TILDE];return M.replace(D,(I,U,Y,X,de)=>{a("tilde",M,I,U,Y,X,de);let le;return v(U)?le="":v(Y)?le=`>=${U}.0.0 <${+U+1}.0.0-0`:v(X)?le=`>=${U}.${Y}.0 <${U}.${+Y+1}.0-0`:de?(a("replaceTilde pr",de),le=`>=${U}.${Y}.${X}-${de} <${U}.${+Y+1}.0-0`):le=`>=${U}.${Y}.${X} <${U}.${+Y+1}.0-0`,a("tilde return",le),le})},w=(M,O)=>M.trim().split(/\s+/).map(D=>E(D,O)).join(" "),E=(M,O)=>{a("caret",M,O);const D=O.loose?l[c.CARETLOOSE]:l[c.CARET],I=O.includePrerelease?"-0":"";return M.replace(D,(U,Y,X,de,le)=>{a("caret",M,U,Y,X,de,le);let ye;return v(Y)?ye="":v(X)?ye=`>=${Y}.0.0${I} <${+Y+1}.0.0-0`:v(de)?Y==="0"?ye=`>=${Y}.${X}.0${I} <${Y}.${+X+1}.0-0`:ye=`>=${Y}.${X}.0${I} <${+Y+1}.0.0-0`:le?(a("replaceCaret pr",le),Y==="0"?X==="0"?ye=`>=${Y}.${X}.${de}-${le} <${Y}.${X}.${+de+1}-0`:ye=`>=${Y}.${X}.${de}-${le} <${Y}.${+X+1}.0-0`:ye=`>=${Y}.${X}.${de}-${le} <${+Y+1}.0.0-0`):(a("no pr"),Y==="0"?X==="0"?ye=`>=${Y}.${X}.${de}${I} <${Y}.${X}.${+de+1}-0`:ye=`>=${Y}.${X}.${de}${I} <${Y}.${+X+1}.0-0`:ye=`>=${Y}.${X}.${de} <${+Y+1}.0.0-0`),a("caret return",ye),ye})},T=(M,O)=>(a("replaceXRanges",M,O),M.split(/\s+/).map(D=>S(D,O)).join(" ")),S=(M,O)=>{M=M.trim();const D=O.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return M.replace(D,(I,U,Y,X,de,le)=>{a("xRange",M,I,U,Y,X,de,le);const ye=v(Y),ve=ye||v(X),Ee=ve||v(de),Ne=Ee;return U==="="&&Ne&&(U=""),le=O.includePrerelease?"-0":"",ye?U===">"||U==="<"?I="<0.0.0-0":I="*":U&&Ne?(ve&&(X=0),de=0,U===">"?(U=">=",ve?(Y=+Y+1,X=0,de=0):(X=+X+1,de=0)):U==="<="&&(U="<",ve?Y=+Y+1:X=+X+1),U==="<"&&(le="-0"),I=`${U+Y}.${X}.${de}${le}`):ve?I=`>=${Y}.0.0${le} <${+Y+1}.0.0-0`:Ee&&(I=`>=${Y}.${X}.0${le} <${Y}.${+X+1}.0-0`),a("xRange return",I),I})},A=(M,O)=>(a("replaceStars",M,O),M.trim().replace(l[c.STAR],"")),C=(M,O)=>(a("replaceGTE0",M,O),M.trim().replace(l[O.includePrerelease?c.GTE0PRE:c.GTE0],"")),F=M=>(O,D,I,U,Y,X,de,le,ye,ve,Ee,Ne)=>(v(I)?D="":v(U)?D=`>=${I}.0.0${M?"-0":""}`:v(Y)?D=`>=${I}.${U}.0${M?"-0":""}`:X?D=`>=${D}`:D=`>=${D}${M?"-0":""}`,v(ye)?le="":v(ve)?le=`<${+ye+1}.0.0-0`:v(Ee)?le=`<${ye}.${+ve+1}.0-0`:Ne?le=`<=${ye}.${ve}.${Ee}-${Ne}`:M?le=`<${ye}.${ve}.${+Ee+1}-0`:le=`<=${le}`,`${D} ${le}`.trim()),N=(M,O,D)=>{for(let I=0;I<M.length;I++)if(!M[I].test(O))return!1;if(O.prerelease.length&&!D.includePrerelease){for(let I=0;I<M.length;I++)if(a(M[I].semver),M[I].semver!==s.ANY&&M[I].semver.prerelease.length>0){const U=M[I].semver;if(U.major===O.major&&U.minor===O.minor&&U.patch===O.patch)return!0}return!1}return!0};return YA}var KA,N9;function $Pe(){if(N9)return KA;N9=1;const e=Cee();return KA=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},KA}var MPe=$Pe(),Fee=SPe(MPe);function LPe(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let a=40;function o(c){c.source===r&&(a=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function l(){a<=0||(r.postMessage(n,s),setTimeout(l,i),a-=1)}setTimeout(l,i)}var PPe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Oee(e,...t){for(const n of t)BPe(e,n);return e}function BPe(e,t){for(const n of Object.keys(t))Mp(e,n,t[n],!0)}const Eo=EOe;let X1=d5e;const wy=typeof window<"u"?window:void 0;var bB;X1===void 0&&((bB=wy==null?void 0:wy.vl)!=null&&bB.compile)&&(X1=wy.vl);const UPe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},zPe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},pm={vega:"Vega","vega-lite":"Vega-Lite"},Ob={vega:Eo.version,"vega-lite":X1?X1.version:"not available"},HPe={vega:e=>e,"vega-lite":(e,t)=>X1.compile(e,{config:t}).spec},VPe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,WPe="chart-wrapper";function jPe(e){return typeof e=="function"}function D9(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+s),a.document.title=`${pm[r]} JSON Source`}function GPe(e,t){if(e.$schema){const n=vee(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${pm[n.library]}, but mode argument sets ${pm[t]??t}.`);const r=n.library;return Fee(Ob[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${pm[r]} ${n.version}, but the current version of ${pm[r]} is v${Ob[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Nee(e){return!!(e&&"load"in e)}function R9(e){return Nee(e)?e:Eo.loader(e)}function qPe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Ue(t.defaultStyle)&&(t.defaultStyle=!1),t}async function v3(e,t,n={}){let r,i;Ue(t)?(i=R9(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=qPe(r),a=s.loader;(!i||a)&&(i=R9(n.loader??a));const o=await I9(s,i),l=await I9(n,i),c={...Oee(l,o),config:$p(l.config??{},o.config??{})};return await YPe(e,r,c,i)}async function I9(e,t){const n=Ue(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Ue(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function XPe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function YPe(e,t,n={},r){const i=n.theme?$p(Z5e[n.theme],n.config??{}):n.config,s=Gu(n.actions)?n.actions:Oee({},UPe,n.actions??{}),a={...zPe,...n.i18n},o=n.renderer??"canvas",l=n.logLevel??Eo.Warn,c=n.downloadFileName??"visualization",u=typeof e=="string"?document.querySelector(e):e;if(!u)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const b="vega-embed-style",{root:w,rootContainer:E}=XPe(u);if(!w.getElementById(b)){const T=document.createElement("style");T.id=b,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?PPe.toString():n.defaultStyle,E.appendChild(T)}}const f=GPe(t,n.mode);let h=HPe[f](t,i);if(f==="vega-lite"&&h.$schema){const b=vee(h.$schema);Fee(Ob.vega,`^${b.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${b.version}, but current version is v${Ob.vega}.`)}u.classList.add("vega-embed"),s&&u.classList.add("has-actions"),u.innerHTML="";let d=u;if(s){const b=document.createElement("div");b.classList.add(WPe),u.appendChild(b),d=b}const p=n.patch;if(p&&(h=p instanceof Function?p(h):AS(h,p,!0,!1).newDocument),n.formatLocale&&Eo.formatLocale(n.formatLocale),n.timeFormatLocale&&Eo.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const b in n.expressionFunctions){const w=n.expressionFunctions[b];"fn"in w?Eo.expressionFunction(b,w.fn,w.visitor):w instanceof Function&&Eo.expressionFunction(b,w)}const{ast:g}=n,m=Eo.parse(h,f==="vega-lite"?{}:i,{ast:g}),x=new(n.viewClass||Eo.View)(m,{loader:r,logLevel:l,renderer:o,...g?{expr:Eo.expressionInterpreter??n.expr??ROe}:{}});if(x.addSignalListener("autosize",(b,w)=>{const{type:E}=w;E=="fit-x"?(d.classList.add("fit-x"),d.classList.remove("fit-y")):E=="fit-y"?(d.classList.remove("fit-x"),d.classList.add("fit-y")):E=="fit"?d.classList.add("fit-x","fit-y"):d.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:b,tooltip:w}=n,E=b&&!Nee(b)?b==null?void 0:b.baseURL:void 0,T=jPe(w)?w:new lPe({baseURL:E,...w===!0?{}:w}).call;x.tooltip(T)}let{hover:y}=n;if(y===void 0&&(y=f==="vega"),y){const{hoverSet:b,updateSet:w}=typeof y=="boolean"?{}:y;x.hover(b,w)}n&&(n.width!=null&&x.width(n.width),n.height!=null&&x.height(n.height),n.padding!=null&&x.padding(n.padding)),await x.initialize(d,n.bind).runAsync();let v;if(s!==!1){let b=u;if(n.defaultStyle!==!1||n.forceActionsMenu){const E=document.createElement("details");E.title=a.CLICK_TO_VIEW_ACTIONS,u.append(E),b=E;const T=document.createElement("summary");T.innerHTML=VPe,E.append(T),v=S=>{E.contains(S.target)||E.removeAttribute("open")},document.addEventListener("click",v)}const w=document.createElement("div");if(b.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(const E of["svg","png"])if(s===!0||s.export===!0||s.export[E]){const T=a[`${E.toUpperCase()}_ACTION`],S=document.createElement("a"),A=Pe(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;S.text=T,S.href="#",S.target="_blank",S.download=`${c}.${E}`,S.addEventListener("mousedown",async function(C){C.preventDefault();const F=await x.toImageURL(E,A);this.href=F}),w.append(S)}}if(s===!0||s.source!==!1){const E=document.createElement("a");E.text=a.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(T){D9(hA(t),n.sourceHeader??"",n.sourceFooter??"",f),T.preventDefault()}),w.append(E)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const E=document.createElement("a");E.text=a.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(T){D9(hA(h),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),w.append(E)}if(s===!0||s.editor!==!1){const E=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=a.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(S){LPe(window,E,{config:i,mode:p?"vega":f,renderer:o,spec:hA(p?h:t)}),S.preventDefault()}),w.append(T)}}function _(){v&&document.removeEventListener("click",v),x.finalize()}return{view:x,spec:t,vgSpec:h,finalize:_,embedOptions:n}}const KPe="https://vega.github.io/schema/vega/v5.json",JPe={top:50,bottom:10},ZPe={type:"fit",contains:"padding"},QPe=[{name:"width",init:"containerSize()[0]",on:[{events:"window:resize",update:"containerSize()[0]"}]},{name:"height",init:"containerSize()[1]",on:[{events:"window:resize",update:"containerSize()[1]"}]},{name:"active",value:null,on:[{events:"shape:mouseover",update:'datum["properties"]["cartogram_id"]'},{events:"mouseover[!event.item]",update:"null"}]},{name:"colorScheme",value:"pastel1"}],e8e=[{name:"source_csv",url:"",format:{type:"csv",delimiter:","}},{name:"source_geojson",url:"",format:{type:"json",parse:{}}},{name:"geo_1",source:"source_geojson",transform:[{type:"flatten",fields:["features"]},{type:"project",fields:["features.type","features.properties","features.geometry"],as:["type","properties","geometry"]},{type:"lookup",from:"source_csv",key:"Region",fields:["properties.Region"],as:["cartogram_data"],default:{Color:"lightgrey",ColorGroup:"-1"}},{type:"formula",expr:"geoArea('source_projection', datum.geometry)",as:"Area"},{type:"formula",expr:'datum["properties"]["label"]["x"]',as:"x"},{type:"formula",expr:'datum["properties"]["label"]["y"]',as:"y"}]},{name:"geo_1_dividers",source:"source_geojson",transform:[{type:"filter",expr:"datum.dividers != null"},{type:"flatten",fields:["dividers"]},{type:"project",fields:["dividers.type","dividers.properties","dividers.geometry"],as:["type","properties","geometry"]}]}],t8e=[{name:"source_projection",size:{signal:"[width, height]"},fit:{signal:"data('source_geojson')"},type:"identity",reflectY:!0}],n8e=[{name:"font_size",type:"band",domain:{data:"geo_1",field:"Area",sort:!0},range:[8,12]},{name:"color_group",type:"ordinal",domain:{data:"source_csv",field:"ColorGroup"},range:{scheme:{signal:"colorScheme"}}}],r8e=[{name:"polygon_marks",type:"shape",style:["geoshape"],from:{data:"geo_1"},encode:{update:{description:{signal:'"geoshape_" + datum["properties"]["cartogram_id"]'},stroke:{value:"black"},strokeWidth:{signal:'datum["properties"]["cartogram_id"] == active? 1 : 0.2'},tooltip:{signal:"datum.cartogram_data"},fill:[{test:"isValid(datum.cartogram_data.Color)",field:"cartogram_data.Color"},{test:"isValid(datum.cartogram_data.ColorGroup)",scale:"color_group",field:"cartogram_data.ColorGroup"},{value:"lightgrey"}],ariaRoleDescription:{value:"geoshape"}}},transform:[{type:"geoshape",projection:"source_projection"}]},{name:"divider_marks",type:"shape",style:["geoshape"],from:{data:"geo_1_dividers"},encode:{update:{description:{value:"dividers"},stroke:{value:"white"},strokeWidth:{value:8},strokeCap:{value:"round"},ariaRoleDescription:{value:"geoshape"}}},transform:[{type:"geoshape",projection:"source_projection"}]},{name:"divider_marks_border",type:"shape",style:["geoshape"],from:{data:"geo_1_dividers"},encode:{update:{description:{value:"dividers"},stroke:{value:"black"},strokeWidth:{value:1},ariaRoleDescription:{value:"geoshape"}}},transform:[{type:"geoshape",projection:"source_projection"}]},{name:"label_marks",type:"text",style:["text"],from:{data:"geo_1"},encode:{update:{text:{field:"cartogram_data.RegionLabel"},x:{field:"x"},y:{field:"y"},description:{signal:'"geolabel_" + datum["properties"]["cartogram_id"]'},align:{value:"center"},baseline:{value:"middle"},fontSize:[{test:"datum.Area < 1000",scale:"font_size",field:"Area"},{value:12}],opacity:{signal:"datum.Area < 400 ? 0:1"},ariaRoleDescription:{value:"geolabel"}}},transform:[{type:"geopoint",fields:["x","y"],projection:"source_projection"}],interactive:!1}],Dee={$schema:KPe,padding:JPe,autosize:ZPe,signals:QPe,data:e8e,projections:t8e,scales:n8e,marks:r8e},i8e={class:"d-flex flex-column card-body p-0"},s8e={class:"d-flex position-absolute z-1"},a8e=["id","width"],o8e=["x2"],l8e=["x1","x2"],c8e=["cx"],u8e=["id","width","height"],f8e=["id"],h8e=["width","height"],d8e=["id"],p8e=["innerHTML"],g8e=["innerHTML"],m8e=["id"],x8e=["id"],v8e=["id"],y8e=["id"],_8e=["id"],b8e=["fill"],qs=3,E8e=.3,w8e=vr({__name:"CPanelLegend",props:{panelID:{},mapDBKey:{},versionKey:{},affineScale:{default:[1,1]}},emits:["gridChanged","versionUpdated"],setup(e,{expose:t,emit:n}){const r=ed(),i=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language,s=Gf("colorScheme");var a=JSON.parse(JSON.stringify(Dee));const o=Jr();var l,c,u,f,h,d=-1,p=0;const g=e,m=hs({version:r.versions[g.versionKey],legendUnit:"",legendTotal:"",currentGridIndex:1,gridDataKeys:[1],gridData:{},handlePosition:0,scalePowerOf10:1});t({getCurrentScale:w});const x=n;Fi(()=>g.versionKey,(D,I)=>{m.version=r.versions[g.versionKey],y()}),Fi(()=>r.highlightedRegionID,(D,I)=>{O(D)}),Fi(()=>r.options.numberOfPanels,(D,I)=>{v()}),Fi(()=>g.affineScale,(D,I)=>{C()},{deep:!0}),fc(async()=>{if(!m.version)return;a.signals[3].value=!s||s==="custom"?"pastel1":s,a.data[0].url=r_(r.currentMapName,g.mapDBKey,"data.csv"),a.data[1].url=r_(r.currentMapName,g.mapDBKey,m.version.name+".json"),l=hf("#"+g.panelID+"-vis"),c=hf("#"+g.panelID+"-offscreen"),u=(await v3("#"+g.panelID+"-vis",a,{renderer:"svg",actions:!1})).view;let[I,U]=$L(m.version.header,u.data("geo_1"),u.data("source_csv"));f=I,h=U,u.addResizeListener(function(){f=Y1e(u.data("geo_1")),_()}),u.addSignalListener("active",function(Y,X){r.highlightedRegionID=X}),u.addEventListener("pointerup",function(Y,X){let de=X==null?void 0:X.datum.cartogram_data;u.tooltip()(u,Y,X,de)}),_()});async function y(){a.data[1].url=r_(r.currentMapName,g.mapDBKey,m.version.name+".json");var D=0;let I=await v3("#"+g.panelID+"-offscreen",a,{renderer:"svg",actions:!1}),[U,Y]=$L(m.version.header,I.view.data("geo_1"),I.view.data("source_csv"));f=U,h=Y,_();function X(){I.view.runAfter(()=>x("versionUpdated")),I.view.initialize("#"+g.panelID+"-vis").runAsync(),u=I.view}l.selectAll('path[aria-roledescription="geoshape"]').each(function(){let de=hf(this).attr("aria-label"),le=de.replace("geoshape","geolabel"),ye=c.select('path[aria-label="'+de+'"]').attr("d");if(hf(this).transition().ease(Zy).duration(1e3).attr("d",ye).on("start",function(){D++}).on("end",function(){--D===0&&X()}),!le||le==="dividers")return;let ve=c.select('text[aria-label="'+le+'"]'),Ee=ve.attr("transform"),Ne=ve.attr("opacity"),Xe=ve.attr("font-size");l.select('text[aria-label="'+le+'"]').transition().ease(Zy).duration(1e3).attr("transform",Ee).attr("opacity",Ne).attr("font-size",Xe).on("start",function(){D++}).on("end",function(){--D===0&&X()})})}async function v(){await u.resize(),await u.width(u.container().offsetWidth).runAsync(),_()}async function _(){if(!m.version)return;b(),await fh(),E(m.currentGridIndex);const D=Math.floor(Math.log10(h)),I=h/Math.pow(10,D);m.legendTotal=F(I,D),N()}function b(){if(h===0||f===0)return;const D=h/f;let I=h/100,U=Math.sqrt(I/D);for(;U<20;)I*=2,U=Math.sqrt(I/D);let Y=[],[X,de]=pj(I),le=n_.indexOf(X),ye=le===0?le:le-1,ve=ye+qs+1;for(;ve>=n_.length&&ye>0;)ve--,ye--;let Ee=n_.slice(ye,ve);for(let Ne=0;Ne<=qs;Ne++)Y[Ne]=U*Math.sqrt(Ee[Ne]*Math.pow(10,de)/I);for(let Ne=0;Ne<=qs;Ne++)m.gridData[Ne]={width:Y[Ne],scaleNiceNumber:Ee[Ne]};m.gridDataKeys=[m.currentGridIndex],m.scalePowerOf10=de}function w(){var D;return((D=m.gridData[m.currentGridIndex])==null?void 0:D.scaleNiceNumber)/(g.affineScale[0]*g.affineScale[1])}async function E(D){var I;m.currentGridIndex=D,m.gridDataKeys=[m.currentGridIndex],await fh();for(let U=0;U<=qs;U++)U<=D?hf("#"+g.panelID+"-legend"+U+" rect").attr("fill","#EEEEEE"):hf("#"+g.panelID+"-legend"+U+" rect").attr("fill","#D6D6D6");C(),M((I=m.gridData[D])==null?void 0:I.width)}function T(D){D.isPrimary&&(o.value.setPointerCapture(D.pointerId),d=D.pointerId,m.handlePosition=D.offsetX)}function S(D){if(d===D.pointerId){var I=D.pageX-p,U=m.handlePosition+I;m.handlePosition=Math.max(0,Math.min(U,m.gridData[qs].width)),p=D.pageX}}function A(D){if(d===D.pointerId){o.value.releasePointerCapture(D.pointerId),d=-1;var I=0,U=Number.MAX_VALUE;for(let X=0;X<=qs;X++){var Y=Math.abs(m.handlePosition-m.gridData[X].width);Y<U&&(U=Y,I=X)}E(I),x("gridChanged")}}function C(){if(!m.gridData[qs])return;let D=m.gridData[m.currentGridIndex].scaleNiceNumber;D=D/(g.affineScale[0]*g.affineScale[1]),m.legendUnit=F(D,m.scalePowerOf10)}function F(D,I){let U=D*Math.pow(10,I);const Y=Intl.NumberFormat(i,{notation:"compact",compactDisplay:"short"});let X="";return X+=Y.format(U),X}function N(){if(!m.gridData[qs])return;const D=m.gridData[m.currentGridIndex].width||20;M(D)}function M(D){if(isNaN(D))return;let I=r.options.showGrid?E8e:0;const U=hf("#"+g.panelID+"-grid");U.select("path").attr("stroke-opacity",I).attr("d","M "+D*5+" 0 L 0 0 0 "+D*5),U.attr("width")?U.transition().ease(Zy).duration(1e3).attr("width",D).attr("height",D):U.attr("width",D).attr("height",D),m.handlePosition=D}function O(D){u==null||u.signal("active",D).runAsync()}return(D,I)=>{var U;return Le(),He("div",i8e,[Q("div",s8e,[m.gridData[qs]?(Le(),He("svg",{key:0,ref_key:"legendSvgEl",ref:o,class:"d-flex position-absolute z-2",style:{cursor:"pointer",top:"-15px","touch-action":"none"},height:"30px",stroke:"#AAAAAA","stroke-width":"2px",id:g.panelID+"-slider",width:m.gridData[qs].width+15,onPointerdown:Gc(T,["stop","prevent"]),onPointermove:Gc(S,["stop","prevent"]),onPointerup:Gc(A,["stop","prevent"])},[Q("line",{x1:"0",y1:"15",x2:m.gridData[qs].width,y2:"15"},null,8,o8e),(Le(!0),He(mt,null,Zr(m.gridData,Y=>(Le(),He("line",{x1:Y.width,y1:"8",x2:Y.width,y2:"16"},null,8,l8e))),256)),Q("circle",{id:"handle",r:"5",cx:m.handlePosition,cy:"15","stroke-width":"0px"},null,8,c8e)],40,a8e)):ei("",!0),m.gridData[qs]?(Le(),He("svg",{key:1,id:g.panelID+"-legend",style:{cursor:"pointer",opacity:"0.5"},width:m.gridData[m.currentGridIndex].width+2,height:m.gridData[m.currentGridIndex].width+2},[(Le(!0),He(mt,null,Zr(m.gridDataKeys,Y=>(Le(),He("g",{id:g.panelID+"-legend"+Y,"stroke-width":"2px",fill:"#EEEEEE",stroke:"#AAAAAA"},[Q("rect",{x:"1",y:"1",width:m.gridData[Y].width,height:m.gridData[Y].width},null,8,h8e)],8,f8e))),256))],8,u8e)):ei("",!0),Q("div",{id:g.panelID+"-legend-num",class:"flex-fill p-1"},[Q("span",{innerHTML:m.legendUnit},null,8,p8e),Qn(" "+gr((U=m.version)==null?void 0:U.unit)+" ",1),Q("div",null,[I[0]||(I[0]=Qn("Total: ")),Q("span",{innerHTML:m.legendTotal},null,8,g8e)])],8,d8e)]),Q("div",{id:g.panelID,class:"d-flex flex-fill position-relative"},[Q("div",null,[Q("div",{id:g.panelID+"-offscreen",class:"vis-area offscreen"},null,8,x8e),Q("div",{id:g.panelID+"-vis",class:"vis-area"},null,8,v8e),vU(D.$slots,"default",{},void 0,!0)]),(Le(),He("svg",{width:"100%",height:"100%",id:g.panelID+"-grid-area"},[Q("defs",null,[Q("pattern",{id:g.panelID+"-grid",patternUnits:"userSpaceOnUse"},I[1]||(I[1]=[Q("path",{fill:"none",stroke:"#5A5A5A","stroke-width":"2","stroke-opacity":"0.3"},null,-1)]),8,_8e)]),gn(r).options.showGrid?(Le(),He("rect",{key:0,width:"100%",height:"100%",fill:"url(#"+g.panelID+"-grid)"},null,8,b8e)):ei("",!0)],8,y8e))],8,m8e)])}}}),S8e=vx(w8e,[["__scopeId","data-v-ab58bde2"]]),T8e={class:"btn-group d-flex flex-shrink-1",style:{"min-width":"40px"},role:"group","aria-label":"Data"},A8e=["disabled"],k8e=["onClick"],C8e={key:0,class:"fas fa-check"},F8e=vr({__name:"CPanelSelectVersion",props:{currentVersionName:{}},emits:["version_changed"],setup(e,{emit:t}){const n=ed(),r=e,i=t,s=hs({isPlaying:!1});function a(){s.isPlaying=!0;let o=Object.keys(n.versions),l=0;i("version_changed",o[l++]);let c=setInterval(function(){i("version_changed",o[l++]),l>=o.length&&(clearInterval(c),s.isPlaying=!1)},1e3)}return(o,l)=>(Le(),He("div",T8e,[Object.keys(gn(n).versions).length>2?(Le(),He("button",{key:0,class:"btn btn-primary",disabled:s.isPlaying,onClick:l[0]||(l[0]=c=>a())},l[1]||(l[1]=[Q("i",{class:"fas fa-play"},null,-1)]),8,A8e)):ei("",!0),(Le(!0),He(mt,null,Zr(gn(n).versions,(c,u)=>(Le(),He("button",{type:"button",class:Do(["btn btn-outline-primary version",{active:r.currentVersionName===u.toString()}]),onClick:()=>{i("version_changed",u.toString())}},[Qn(gr(c.name)+" ",1),gn(n).versions.length===2&&r.currentVersionName===u.toString()?(Le(),He("i",C8e)):ei("",!0)],10,k8e))),256))]))}}),O8e=vx(F8e,[["__scopeId","data-v-8163542d"]]),N8e=["data-bs-target","title"],D8e=["id"],R8e={class:"modal-dialog"},I8e={class:"modal-content"},$8e={class:"modal-body"},M8e={class:"text-center"},L8e=["href"],P8e=vr({__name:"CPanelBtnDownload",props:{mapDBKey:{},versionKey:{},panelID:{}},setup(e){const t=ed(),n=e,r=au(()=>t.versions[n.versionKey]),i=au(()=>r_(t.currentMapName,n.mapDBKey,t.versions[n.versionKey].name+".json"));function s(){var a='<?xml version="1.0" encoding="UTF-8" standalone="no"?>';let o=document.getElementById(n.panelID+"-vis").querySelector("svg").cloneNode(!0);o.setAttribute("xmlns","http://www.w3.org/2000/svg");let l=document.getElementById(n.panelID+"-legend").cloneNode(!0);o.appendChild(l);let c=document.getElementById(n.panelID+"-legend-num").textContent||"",u=document.createElement("text"),f=2+parseFloat(l.getAttribute("width"));u.innerHTML=c,u.setAttribute("font-family","sans-serif"),u.setAttribute("font-size","12px"),u.setAttribute("x",f.toString()),u.setAttribute("y","20"),o.appendChild(u),o.appendChild(document.getElementById(n.panelID+"-grid-area").cloneNode(!0));const h=document.createElement("a");h.href="data:image/svg+xml;base64,"+window.btoa(a+o.outerHTML.replace(/×/g,"&#xD7;")),h.download=t.versions[n.versionKey].name+".svg",document.body.appendChild(h),h.click(),document.body.removeChild(h)}return(a,o)=>(Le(),He(mt,null,[Q("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#downloadModal"+r.value.key,title:"Download "+r.value.name},o[1]||(o[1]=[Q("i",{class:"fas fa-download"},null,-1)]),8,N8e),Q("div",{class:"modal fade text-wrap",id:"downloadModal"+r.value.key,tabindex:"-1","aria-hidden":"true"},[Q("div",R8e,[Q("div",I8e,[o[3]||(o[3]=Q("div",{class:"modal-header"},[Q("h1",{class:"modal-title fs-5"},"Your map is ready!"),Q("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Q("div",$8e,[o[2]||(o[2]=Q("p",{class:"lead text-center"},"Download",-1)),Q("p",M8e,[Q("a",{onClick:o[0]||(o[0]=l=>s()),class:"btn btn-lg btn-primary mx-3"},"SVG"),Q("a",{href:i.value,download:"",class:"btn btn-lg btn-primary"},"GeoJSON",8,L8e)]),St(gj)])])])],8,D8e)],64))}}),B8e={class:"card w-100"},U8e={class:"d-flex flex-column card-body"},z8e={class:"position-absolute end-0",style:{width:"2.5rem"}},H8e=["title"],V8e={key:0,class:"fas fa-unlock"},W8e={key:1,class:"fas fa-lock"},j8e={key:2,class:"fas fa-unlock"},G8e={key:3,class:"fas fa-arrows-alt-h"},q8e={key:4,class:"fas fa-arrows-alt-v"},X8e={class:"card-footer d-flex justify-content-between"},$9=300,Y8e=vr({__name:"CPanel",props:{panelID:{},defaultVersionKey:{},mapDBKey:{default:""}},setup(e){let t=new Fxe;var n,r,i,s=0;const a="ontouchstart"in window||navigator.maxTouchPoints,o=Jr(),l=e,c=hs({versionKey:l.defaultVersionKey,cursor:"grab",isLockRatio:!0,touchLenght:0,lastMove:0,stretchDirection:"x",affineMatrix:Kv(),affineScale:[1,1]});function u(y){t.set(y),c.touchLenght=t.length();var v=new Date().getTime(),_=v-s;if(t.length()===1&&_<$9&&_>0)m();else{const b=t.getMergedPoints();b.length>0&&(n=b.length>1&&Math.atan2(b[1][1]-b[0][1],b[1][0]-b[0][0]),r=[Af(b,w=>w[0])||0,Af(b,w=>w[1])||0],i=b.length>1&&Math.hypot(b[1][1]-b[0][1],b[1][0]-b[0][0]))}s=new Date().getTime(),c.lastMove=s}function f(y){if(o.value.$el.releasePointerCapture(y.pointerId),t.clear(y),c.touchLenght=t.length(),x(),t.length()===0)r=null;else{const v=t.getMergedPoints();v.length>0&&(n=v.length>1&&Math.atan2(v[1][1]-v[0][1],v[1][0]-v[0][0]),r=[Af(v,_=>_[0])||0,Af(v,_=>_[1])||0],i=v.length>1&&Math.hypot(v[1][1]-v[0][1],v[1][0]-v[0][0]))}}function h(y){var N;if(t.update(y),t.length()<1||t.length()>3||!r)return;(N=document.getElementById("vg-tooltip-element"))==null||N.classList.remove("visible"),o.value.$el.setPointerCapture(y.pointerId);const v=t.getMergedPoints();var _=Kv(),b=0,w=[0,0],E=[1,1],T=new Date().getTime();if(v.length>1&&(t.length()===3||t.length()===2&&!c.isLockRatio)){var S=Math.atan2(v[1][1]-v[0][1],v[1][0]-v[0][0]);n&&typeof n=="number"?b=S-n:b=0,n=S,_=Tc(_,bg(b));var A=Math.hypot(v[1][1]-v[0][1],v[1][0]-v[0][0]);i&&typeof i=="number"?E[0]=A/i:E[0]=0,c.affineScale[0]*=E[0],i=A,E[0]!==0&&(_=Tc(_,bg(n)),_=Tc(_,Jv(E[0],1)),_=Tc(_,bg(-n)))}else if(v.length>1){if(n&&typeof n=="number"){var S=Math.atan2(v[1][1]-v[0][1],v[1][0]-v[0][0]);b=S-n,n=S,_=Tc(_,bg(b))}if(i&&typeof i=="number"){var A=Math.hypot(v[1][1]-v[0][1],v[1][0]-v[0][0]);E[0]=A/i,E[1]=A/i,c.affineScale[0]*=E[0],c.affineScale[1]*=E[1],i=A,E[0]!==0&&E[1]!==0&&(_=Tc(_,Jv(E[0],E[1])))}}var C=T-s;if(t.length()>1||t.length()===1&&C>$9){var F=[Af(v,M=>M[0])||0,Af(v,M=>M[1])||0];w[0]=F[0]-r[0],w[1]=F[1]-r[1],r=F,_=Tc(_,K1e(w[0],w[1]))}g(_,c.affineMatrix),c.lastMove=new Date().getTime()}function d(y){var v=[];if(y.shiftKey)v=bg(y.wheelDelta/1e3);else{var _=1+y.wheelDelta/1e3,b;c.isLockRatio?b=[_,_]:c.stretchDirection==="x"?b=[_,1]:b=[1,_],c.affineScale[0]*=b[0],c.affineScale[1]*=b[1],v=Jv(b[0],b[1])}g(v,c.affineMatrix)}function p(){a?c.isLockRatio=!c.isLockRatio:c.isLockRatio?(c.stretchDirection="x",c.isLockRatio=!1):c.stretchDirection==="x"?c.stretchDirection="y":c.isLockRatio=!0}function g(y,v){c.affineMatrix=Tc(y,v),ffe("#"+l.panelID+" g.root").attr("transform","matrix("+c.affineMatrix[0][0]+" "+c.affineMatrix[1][0]+" "+c.affineMatrix[0][1]+" "+c.affineMatrix[1][1]+" "+c.affineMatrix[0][2]+" "+c.affineMatrix[1][2]+")")}function m(){c.affineMatrix=Kv(),c.affineScale=[1,1],g(c.affineMatrix,c.affineMatrix)}function x(){let y=o.value.getCurrentScale();if(y===0)return;let[v,_]=pj(y),b=v*Math.pow(10,_),w=Math.sqrt(y/b);c.affineScale[0]*=w,c.affineScale[1]*=w;var E=Jv(w,w);g(E,c.affineMatrix)}return(y,v)=>(Le(),He(mt,null,[Q("div",B8e,[Q("div",U8e,[St(S8e,{ref_key:"legendEl",ref:o,style:Bu([{"touch-action":"none"},{cursor:c.cursor}]),panelID:l.panelID,mapDBKey:l.mapDBKey,versionKey:c.versionKey,affineScale:c.affineScale,onGridChanged:x,onPointerdown:Gc(u,["stop","prevent"]),onPointermove:Gc(h,["stop","prevent"]),onPointerup:Gc(f,["stop","prevent"]),onWheel:Gc(d,["stop","prevent"]),onVersionUpdated:v[0]||(v[0]=_=>g(c.affineMatrix,Kv()))},{default:iE(()=>v[4]||(v[4]=[Q("img",{class:"position-absolute bottom-0 end-0 z-3",src:"/static/img/by.svg",alt:"cc-by"},null,-1)])),_:1},8,["style","panelID","mapDBKey","versionKey","affineScale"]),Q("div",z8e,[Q("button",{class:"btn btn-secondary w-100 my-1",onClick:v[1]||(v[1]=_=>p()),title:c.isLockRatio?"Switch to free transform":"Switch to lock ratio"},[c.touchLenght===3?(Le(),He("i",V8e)):c.isLockRatio?(Le(),He("i",W8e)):gn(a)?(Le(),He("i",j8e)):c.stretchDirection==="x"?(Le(),He("i",G8e)):(Le(),He("i",q8e))],8,H8e),Q("button",{class:"btn btn-secondary w-100 my-1",onClick:v[2]||(v[2]=_=>m()),title:"Reset"},v[5]||(v[5]=[Q("i",{class:"fas fa-crosshairs"},null,-1)]))])]),Q("div",X8e,[St(O8e,{currentVersionName:c.versionKey,onVersion_changed:v[3]||(v[3]=_=>c.versionKey=_)},null,8,["currentVersionName"]),St(P8e,{mapDBKey:l.mapDBKey,versionKey:c.versionKey,panelID:l.panelID},null,8,["mapDBKey","versionKey","panelID"])])]),(Le(),dh(Rxe,{key:c.lastMove,touchInfo:gn(t),touchLenght:c.touchLenght},null,8,["touchInfo","touchLenght"]))],64))}}),K8e=vr({__name:"Cartogram",props:{maps:{},mapName:{},mapTitle:{},mapDBKey:{},mode:{}},setup(e){const t=ed(),n=e,r=hs({mapkey:-1,versionKeys:[]});Y3(()=>{t.currentMapName=n.mapName?n.mapName:""});async function i(){r.mapkey=Date.now(),r.versionKeys=Object.keys(t.versions)}return(s,a)=>(Le(),He(mt,null,[St(Cxe,{isEmbed:n.mode==="embed",maps:n.maps,mapTitle:n.mapTitle,mapDBKey:n.mapDBKey,onMap_changed:i},null,8,["isEmbed","maps","mapTitle","mapDBKey"]),r.versionKeys.length>0?(Le(),He("div",{id:"cartogram",class:"d-flex flex-fill card-group position-relative mx-2",key:r.mapkey},[(Le(!0),He(mt,null,Zr(gn(t).options.numberOfPanels,o=>(Le(),dh(Y8e,{panelID:"c-area"+o.toString(),defaultVersionKey:gn(t).options.numberOfPanels===1?r.versionKeys[r.versionKeys.length-1]:o===1?r.versionKeys[0]:r.versionKeys[r.versionKeys.length-1],mapDBKey:n.mapDBKey},null,8,["panelID","defaultVersionKey","mapDBKey"]))),256))])):ei("",!0)],64))}});var Ii="top",Ms="bottom",Ls="right",$i="left",CS="auto",ng=[Ii,Ms,Ls,$i],Uh="start",yp="end",Ree="clippingParents",QI="viewport",Gd="popper",Iee="reference",y3=ng.reduce(function(e,t){return e.concat([t+"-"+Uh,t+"-"+yp])},[]),e$=[].concat(ng,[CS]).reduce(function(e,t){return e.concat([t,t+"-"+Uh,t+"-"+yp])},[]),$ee="beforeRead",Mee="read",Lee="afterRead",Pee="beforeMain",Bee="main",Uee="afterMain",zee="beforeWrite",Hee="write",Vee="afterWrite",Wee=[$ee,Mee,Lee,Pee,Bee,Uee,zee,Hee,Vee];function Zo(e){return e?(e.nodeName||"").toLowerCase():null}function Ps(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function zh(e){var t=Ps(e).Element;return e instanceof t||e instanceof Element}function fa(e){var t=Ps(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function t$(e){if(typeof ShadowRoot>"u")return!1;var t=Ps(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function J8e(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},s=t.elements[n];!fa(s)||!Zo(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(a){var o=i[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function Z8e(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],s=t.attributes[r]||{},a=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),o=a.reduce(function(l,c){return l[c]="",l},{});!fa(i)||!Zo(i)||(Object.assign(i.style,o),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const n$={name:"applyStyles",enabled:!0,phase:"write",fn:J8e,effect:Z8e,requires:["computeStyles"]};function Uo(e){return e.split("-")[0]}var ah=Math.max,Nb=Math.min,_p=Math.round;function _3(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function jee(){return!/^((?!chrome|android).)*safari/i.test(_3())}function bp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&fa(e)&&(i=e.offsetWidth>0&&_p(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&_p(r.height)/e.offsetHeight||1);var a=zh(e)?Ps(e):window,o=a.visualViewport,l=!jee()&&n,c=(r.left+(l&&o?o.offsetLeft:0))/i,u=(r.top+(l&&o?o.offsetTop:0))/s,f=r.width/i,h=r.height/s;return{width:f,height:h,top:u,right:c+f,bottom:u+h,left:c,x:c,y:u}}function r$(e){var t=bp(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Gee(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&t$(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function lc(e){return Ps(e).getComputedStyle(e)}function Q8e(e){return["table","td","th"].indexOf(Zo(e))>=0}function rf(e){return((zh(e)?e.ownerDocument:e.document)||window.document).documentElement}function FS(e){return Zo(e)==="html"?e:e.assignedSlot||e.parentNode||(t$(e)?e.host:null)||rf(e)}function M9(e){return!fa(e)||lc(e).position==="fixed"?null:e.offsetParent}function e9e(e){var t=/firefox/i.test(_3()),n=/Trident/i.test(_3());if(n&&fa(e)){var r=lc(e);if(r.position==="fixed")return null}var i=FS(e);for(t$(i)&&(i=i.host);fa(i)&&["html","body"].indexOf(Zo(i))<0;){var s=lc(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function iv(e){for(var t=Ps(e),n=M9(e);n&&Q8e(n)&&lc(n).position==="static";)n=M9(n);return n&&(Zo(n)==="html"||Zo(n)==="body"&&lc(n).position==="static")?t:n||e9e(e)||t}function i$(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Um(e,t,n){return ah(e,Nb(t,n))}function t9e(e,t,n){var r=Um(e,t,n);return r>n?n:r}function qee(){return{top:0,right:0,bottom:0,left:0}}function Xee(e){return Object.assign({},qee(),e)}function Yee(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var n9e=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Xee(typeof t!="number"?t:Yee(t,ng))};function r9e(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,o=Uo(n.placement),l=i$(o),c=[$i,Ls].indexOf(o)>=0,u=c?"height":"width";if(!(!s||!a)){var f=n9e(i.padding,n),h=r$(s),d=l==="y"?Ii:$i,p=l==="y"?Ms:Ls,g=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],m=a[l]-n.rects.reference[l],x=iv(s),y=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,v=g/2-m/2,_=f[d],b=y-h[u]-f[p],w=y/2-h[u]/2+v,E=Um(_,w,b),T=l;n.modifiersData[r]=(t={},t[T]=E,t.centerOffset=E-w,t)}}function i9e(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Gee(t.elements.popper,i)&&(t.elements.arrow=i))}const Kee={name:"arrow",enabled:!0,phase:"main",fn:r9e,effect:i9e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ep(e){return e.split("-")[1]}var s9e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function a9e(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:_p(n*i)/i||0,y:_p(r*i)/i||0}}function L9(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,h=a.x,d=h===void 0?0:h,p=a.y,g=p===void 0?0:p,m=typeof u=="function"?u({x:d,y:g}):{x:d,y:g};d=m.x,g=m.y;var x=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),v=$i,_=Ii,b=window;if(c){var w=iv(n),E="clientHeight",T="clientWidth";if(w===Ps(n)&&(w=rf(n),lc(w).position!=="static"&&o==="absolute"&&(E="scrollHeight",T="scrollWidth")),w=w,i===Ii||(i===$i||i===Ls)&&s===yp){_=Ms;var S=f&&w===b&&b.visualViewport?b.visualViewport.height:w[E];g-=S-r.height,g*=l?1:-1}if(i===$i||(i===Ii||i===Ms)&&s===yp){v=Ls;var A=f&&w===b&&b.visualViewport?b.visualViewport.width:w[T];d-=A-r.width,d*=l?1:-1}}var C=Object.assign({position:o},c&&s9e),F=u===!0?a9e({x:d,y:g},Ps(n)):{x:d,y:g};if(d=F.x,g=F.y,l){var N;return Object.assign({},C,(N={},N[_]=y?"0":"",N[v]=x?"0":"",N.transform=(b.devicePixelRatio||1)<=1?"translate("+d+"px, "+g+"px)":"translate3d("+d+"px, "+g+"px, 0)",N))}return Object.assign({},C,(t={},t[_]=y?g+"px":"",t[v]=x?d+"px":"",t.transform="",t))}function o9e(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,a=s===void 0?!0:s,o=n.roundOffsets,l=o===void 0?!0:o,c={placement:Uo(t.placement),variation:Ep(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,L9(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,L9(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const s$={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:o9e,data:{}};var Sy={passive:!0};function l9e(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=i===void 0?!0:i,a=r.resize,o=a===void 0?!0:a,l=Ps(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Sy)}),o&&l.addEventListener("resize",n.update,Sy),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Sy)}),o&&l.removeEventListener("resize",n.update,Sy)}}const a$={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:l9e,data:{}};var c9e={left:"right",right:"left",bottom:"top",top:"bottom"};function A_(e){return e.replace(/left|right|bottom|top/g,function(t){return c9e[t]})}var u9e={start:"end",end:"start"};function P9(e){return e.replace(/start|end/g,function(t){return u9e[t]})}function o$(e){var t=Ps(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function l$(e){return bp(rf(e)).left+o$(e).scrollLeft}function f9e(e,t){var n=Ps(e),r=rf(e),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;var c=jee();(c||!c&&t==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o+l$(e),y:l}}function h9e(e){var t,n=rf(e),r=o$(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=ah(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=ah(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+l$(e),l=-r.scrollTop;return lc(i||n).direction==="rtl"&&(o+=ah(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function c$(e){var t=lc(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Jee(e){return["html","body","#document"].indexOf(Zo(e))>=0?e.ownerDocument.body:fa(e)&&c$(e)?e:Jee(FS(e))}function zm(e,t){var n;t===void 0&&(t=[]);var r=Jee(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=Ps(r),a=i?[s].concat(s.visualViewport||[],c$(r)?r:[]):r,o=t.concat(a);return i?o:o.concat(zm(FS(a)))}function b3(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function d9e(e,t){var n=bp(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function B9(e,t,n){return t===QI?b3(f9e(e,n)):zh(t)?d9e(t,n):b3(h9e(rf(e)))}function p9e(e){var t=zm(FS(e)),n=["absolute","fixed"].indexOf(lc(e).position)>=0,r=n&&fa(e)?iv(e):e;return zh(r)?t.filter(function(i){return zh(i)&&Gee(i,r)&&Zo(i)!=="body"}):[]}function g9e(e,t,n,r){var i=t==="clippingParents"?p9e(e):[].concat(t),s=[].concat(i,[n]),a=s[0],o=s.reduce(function(l,c){var u=B9(e,c,r);return l.top=ah(u.top,l.top),l.right=Nb(u.right,l.right),l.bottom=Nb(u.bottom,l.bottom),l.left=ah(u.left,l.left),l},B9(e,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Zee(e){var t=e.reference,n=e.element,r=e.placement,i=r?Uo(r):null,s=r?Ep(r):null,a=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2,l;switch(i){case Ii:l={x:a,y:t.y-n.height};break;case Ms:l={x:a,y:t.y+t.height};break;case Ls:l={x:t.x+t.width,y:o};break;case $i:l={x:t.x-n.width,y:o};break;default:l={x:t.x,y:t.y}}var c=i?i$(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Uh:l[c]=l[c]-(t[u]/2-n[u]/2);break;case yp:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function wp(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,s=n.strategy,a=s===void 0?e.strategy:s,o=n.boundary,l=o===void 0?Ree:o,c=n.rootBoundary,u=c===void 0?QI:c,f=n.elementContext,h=f===void 0?Gd:f,d=n.altBoundary,p=d===void 0?!1:d,g=n.padding,m=g===void 0?0:g,x=Xee(typeof m!="number"?m:Yee(m,ng)),y=h===Gd?Iee:Gd,v=e.rects.popper,_=e.elements[p?y:h],b=g9e(zh(_)?_:_.contextElement||rf(e.elements.popper),l,u,a),w=bp(e.elements.reference),E=Zee({reference:w,element:v,placement:i}),T=b3(Object.assign({},v,E)),S=h===Gd?T:w,A={top:b.top-S.top+x.top,bottom:S.bottom-b.bottom+x.bottom,left:b.left-S.left+x.left,right:S.right-b.right+x.right},C=e.modifiersData.offset;if(h===Gd&&C){var F=C[i];Object.keys(A).forEach(function(N){var M=[Ls,Ms].indexOf(N)>=0?1:-1,O=[Ii,Ms].indexOf(N)>=0?"y":"x";A[N]+=F[O]*M})}return A}function m9e(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?e$:l,u=Ep(r),f=u?o?y3:y3.filter(function(p){return Ep(p)===u}):ng,h=f.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=f);var d=h.reduce(function(p,g){return p[g]=wp(e,{placement:g,boundary:i,rootBoundary:s,padding:a})[Uo(g)],p},{});return Object.keys(d).sort(function(p,g){return d[p]-d[g]})}function x9e(e){if(Uo(e)===CS)return[];var t=A_(e);return[P9(e),t,P9(t)]}function v9e(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!0:a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,g=n.allowedAutoPlacements,m=t.options.placement,x=Uo(m),y=x===m,v=l||(y||!p?[A_(m)]:x9e(m)),_=[m].concat(v).reduce(function(ve,Ee){return ve.concat(Uo(Ee)===CS?m9e(t,{placement:Ee,boundary:u,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:g}):Ee)},[]),b=t.rects.reference,w=t.rects.popper,E=new Map,T=!0,S=_[0],A=0;A<_.length;A++){var C=_[A],F=Uo(C),N=Ep(C)===Uh,M=[Ii,Ms].indexOf(F)>=0,O=M?"width":"height",D=wp(t,{placement:C,boundary:u,rootBoundary:f,altBoundary:h,padding:c}),I=M?N?Ls:$i:N?Ms:Ii;b[O]>w[O]&&(I=A_(I));var U=A_(I),Y=[];if(s&&Y.push(D[F]<=0),o&&Y.push(D[I]<=0,D[U]<=0),Y.every(function(ve){return ve})){S=C,T=!1;break}E.set(C,Y)}if(T)for(var X=p?3:1,de=function(Ee){var Ne=_.find(function(Xe){var z=E.get(Xe);if(z)return z.slice(0,Ee).every(function(q){return q})});if(Ne)return S=Ne,"break"},le=X;le>0;le--){var ye=de(le);if(ye==="break")break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}}const Qee={name:"flip",enabled:!0,phase:"main",fn:v9e,requiresIfExists:["offset"],data:{_skip:!1}};function U9(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function z9(e){return[Ii,Ls,Ms,$i].some(function(t){return e[t]>=0})}function y9e(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,a=wp(t,{elementContext:"reference"}),o=wp(t,{altBoundary:!0}),l=U9(a,r),c=U9(o,i,s),u=z9(l),f=z9(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const ete={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:y9e};function _9e(e,t,n){var r=Uo(e),i=[$i,Ii].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[$i,Ls].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}function b9e(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=i===void 0?[0,0]:i,a=e$.reduce(function(u,f){return u[f]=_9e(f,t.rects,s),u},{}),o=a[t.placement],l=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}const tte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:b9e};function E9e(e){var t=e.state,n=e.name;t.modifiersData[n]=Zee({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const u$={name:"popperOffsets",enabled:!0,phase:"read",fn:E9e,data:{}};function w9e(e){return e==="x"?"y":"x"}function S9e(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=i===void 0?!0:i,a=n.altAxis,o=a===void 0?!1:a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,h=n.tether,d=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=wp(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),x=Uo(t.placement),y=Ep(t.placement),v=!y,_=i$(x),b=w9e(_),w=t.modifiersData.popperOffsets,E=t.rects.reference,T=t.rects.popper,S=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,A=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,F={x:0,y:0};if(w){if(s){var N,M=_==="y"?Ii:$i,O=_==="y"?Ms:Ls,D=_==="y"?"height":"width",I=w[_],U=I+m[M],Y=I-m[O],X=d?-T[D]/2:0,de=y===Uh?E[D]:T[D],le=y===Uh?-T[D]:-E[D],ye=t.elements.arrow,ve=d&&ye?r$(ye):{width:0,height:0},Ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:qee(),Ne=Ee[M],Xe=Ee[O],z=Um(0,E[D],ve[D]),q=v?E[D]/2-X-z-Ne-A.mainAxis:de-z-Ne-A.mainAxis,G=v?-E[D]/2+X+z+Xe+A.mainAxis:le+z+Xe+A.mainAxis,H=t.elements.arrow&&iv(t.elements.arrow),J=H?_==="y"?H.clientTop||0:H.clientLeft||0:0,k=(N=C==null?void 0:C[_])!=null?N:0,L=I+q-k-J,K=I+G-k,Z=Um(d?Nb(U,L):U,I,d?ah(Y,K):Y);w[_]=Z,F[_]=Z-I}if(o){var ee,te=_==="x"?Ii:$i,he=_==="x"?Ms:Ls,xe=w[b],_e=b==="y"?"height":"width",ge=xe+m[te],me=xe-m[he],be=[Ii,$i].indexOf(x)!==-1,ae=(ee=C==null?void 0:C[b])!=null?ee:0,Ge=be?ge:xe-E[_e]-T[_e]-ae+A.altAxis,et=be?xe+E[_e]+T[_e]-ae-A.altAxis:me,Qe=d&&be?t9e(Ge,xe,et):Um(d?Ge:ge,xe,d?et:me);w[b]=Qe,F[b]=Qe-xe}t.modifiersData[r]=F}}const nte={name:"preventOverflow",enabled:!0,phase:"main",fn:S9e,requiresIfExists:["offset"]};function T9e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function A9e(e){return e===Ps(e)||!fa(e)?o$(e):T9e(e)}function k9e(e){var t=e.getBoundingClientRect(),n=_p(t.width)/e.offsetWidth||1,r=_p(t.height)/e.offsetHeight||1;return n!==1||r!==1}function C9e(e,t,n){n===void 0&&(n=!1);var r=fa(t),i=fa(t)&&k9e(t),s=rf(t),a=bp(e,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Zo(t)!=="body"||c$(s))&&(o=A9e(t)),fa(t)?(l=bp(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=l$(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function F9e(e){var t=new Map,n=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function i(s){n.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!n.has(o)){var l=t.get(o);l&&i(l)}}),r.push(s)}return e.forEach(function(s){n.has(s.name)||i(s)}),r}function O9e(e){var t=F9e(e);return Wee.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function N9e(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function D9e(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var H9={placement:"bottom",modifiers:[],strategy:"absolute"};function V9(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function OS(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,s=i===void 0?H9:i;return function(o,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},H9,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},f=[],h=!1,d={state:u,setOptions:function(x){var y=typeof x=="function"?x(u.options):x;g(),u.options=Object.assign({},s,u.options,y),u.scrollParents={reference:zh(o)?zm(o):o.contextElement?zm(o.contextElement):[],popper:zm(l)};var v=O9e(D9e([].concat(r,u.options.modifiers)));return u.orderedModifiers=v.filter(function(_){return _.enabled}),p(),d.update()},forceUpdate:function(){if(!h){var x=u.elements,y=x.reference,v=x.popper;if(V9(y,v)){u.rects={reference:C9e(y,iv(v),u.options.strategy==="fixed"),popper:r$(v)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(A){return u.modifiersData[A.name]=Object.assign({},A.data)});for(var _=0;_<u.orderedModifiers.length;_++){if(u.reset===!0){u.reset=!1,_=-1;continue}var b=u.orderedModifiers[_],w=b.fn,E=b.options,T=E===void 0?{}:E,S=b.name;typeof w=="function"&&(u=w({state:u,options:T,name:S,instance:d})||u)}}}},update:N9e(function(){return new Promise(function(m){d.forceUpdate(),m(u)})}),destroy:function(){g(),h=!0}};if(!V9(o,l))return d;d.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){u.orderedModifiers.forEach(function(m){var x=m.name,y=m.options,v=y===void 0?{}:y,_=m.effect;if(typeof _=="function"){var b=_({state:u,name:x,instance:d,options:v}),w=function(){};f.push(b||w)}})}function g(){f.forEach(function(m){return m()}),f=[]}return d}}var R9e=OS(),I9e=[a$,u$,s$,n$],$9e=OS({defaultModifiers:I9e}),M9e=[a$,u$,s$,n$,tte,Qee,nte,Kee,ete],f$=OS({defaultModifiers:M9e});const rte=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Uee,afterRead:Lee,afterWrite:Vee,applyStyles:n$,arrow:Kee,auto:CS,basePlacements:ng,beforeMain:Pee,beforeRead:$ee,beforeWrite:zee,bottom:Ms,clippingParents:Ree,computeStyles:s$,createPopper:f$,createPopperBase:R9e,createPopperLite:$9e,detectOverflow:wp,end:yp,eventListeners:a$,flip:Qee,hide:ete,left:$i,main:Bee,modifierPhases:Wee,offset:tte,placements:e$,popper:Gd,popperGenerator:OS,popperOffsets:u$,preventOverflow:nte,read:Mee,reference:Iee,right:Ls,start:Uh,top:Ii,variationPlacements:y3,viewport:QI,write:Hee},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const kc=new Map,JA={set(e,t,n){kc.has(e)||kc.set(e,new Map);const r=kc.get(e);if(!r.has(t)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(t,n)},get(e,t){return kc.has(e)&&kc.get(e).get(t)||null},remove(e,t){if(!kc.has(e))return;const n=kc.get(e);n.delete(t),n.size===0&&kc.delete(e)}},L9e=1e6,P9e=1e3,E3="transitionend",ite=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),e),B9e=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),U9e=e=>{do e+=Math.floor(Math.random()*L9e);while(document.getElementById(e));return e},z9e=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),i=Number.parseFloat(n);return!r&&!i?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*P9e)},ste=e=>{e.dispatchEvent(new Event(E3))},Yl=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),Ru=e=>Yl(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(ite(e)):null,rg=e=>{if(!Yl(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const r=e.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return t},Iu=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",ate=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?ate(e.parentNode):null},Db=()=>{},sv=e=>{e.offsetHeight},ote=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ZA=[],H9e=e=>{document.readyState==="loading"?(ZA.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of ZA)t()}),ZA.push(e)):e()},_a=()=>document.documentElement.dir==="rtl",Aa=e=>{H9e(()=>{const t=ote();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}})},Zi=(e,t=[],n=e)=>typeof e=="function"?e(...t):n,lte=(e,t,n=!0)=>{if(!n){Zi(e);return}const i=z9e(t)+5;let s=!1;const a=({target:o})=>{o===t&&(s=!0,t.removeEventListener(E3,a),Zi(e))};t.addEventListener(E3,a),setTimeout(()=>{s||ste(t)},i)},h$=(e,t,n,r)=>{const i=e.length;let s=e.indexOf(t);return s===-1?!n&&r?e[i-1]:e[0]:(s+=n?1:-1,r&&(s=(s+i)%i),e[Math.max(0,Math.min(s,i-1))])},V9e=/[^.]*(?=\..*)\.|.*/,W9e=/\..*/,j9e=/::\d+$/,QA={};let W9=1;const cte={mouseenter:"mouseover",mouseleave:"mouseout"},G9e=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ute(e,t){return t&&`${t}::${W9++}`||e.uidEvent||W9++}function fte(e){const t=ute(e);return e.uidEvent=t,QA[t]=QA[t]||{},QA[t]}function q9e(e,t){return function n(r){return d$(r,{delegateTarget:e}),n.oneOff&&we.off(e,r.type,t),t.apply(e,[r])}}function X9e(e,t,n){return function r(i){const s=e.querySelectorAll(t);for(let{target:a}=i;a&&a!==this;a=a.parentNode)for(const o of s)if(o===a)return d$(i,{delegateTarget:a}),r.oneOff&&we.off(e,i.type,t,n),n.apply(a,[i])}}function hte(e,t,n=null){return Object.values(e).find(r=>r.callable===t&&r.delegationSelector===n)}function dte(e,t,n){const r=typeof t=="string",i=r?n:t||n;let s=pte(e);return G9e.has(s)||(s=e),[r,i,s]}function j9(e,t,n,r,i){if(typeof t!="string"||!e)return;let[s,a,o]=dte(t,n,r);t in cte&&(a=(p=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return p.call(this,g)})(a));const l=fte(e),c=l[o]||(l[o]={}),u=hte(c,a,s?n:null);if(u){u.oneOff=u.oneOff&&i;return}const f=ute(a,t.replace(V9e,"")),h=s?X9e(e,n,a):q9e(e,a);h.delegationSelector=s?n:null,h.callable=a,h.oneOff=i,h.uidEvent=f,c[f]=h,e.addEventListener(o,h,s)}function w3(e,t,n,r,i){const s=hte(t[n],r,i);s&&(e.removeEventListener(n,s,!!i),delete t[n][s.uidEvent])}function Y9e(e,t,n,r){const i=t[n]||{};for(const[s,a]of Object.entries(i))s.includes(r)&&w3(e,t,n,a.callable,a.delegationSelector)}function pte(e){return e=e.replace(W9e,""),cte[e]||e}const we={on(e,t,n,r){j9(e,t,n,r,!1)},one(e,t,n,r){j9(e,t,n,r,!0)},off(e,t,n,r){if(typeof t!="string"||!e)return;const[i,s,a]=dte(t,n,r),o=a!==t,l=fte(e),c=l[a]||{},u=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;w3(e,l,a,s,i?n:null);return}if(u)for(const f of Object.keys(l))Y9e(e,l,f,t.slice(1));for(const[f,h]of Object.entries(c)){const d=f.replace(j9e,"");(!o||t.includes(d))&&w3(e,l,a,h.callable,h.delegationSelector)}},trigger(e,t,n){if(typeof t!="string"||!e)return null;const r=ote(),i=pte(t),s=t!==i;let a=null,o=!0,l=!0,c=!1;s&&r&&(a=r.Event(t,n),r(e).trigger(a),o=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),c=a.isDefaultPrevented());const u=d$(new Event(t,{bubbles:o,cancelable:!0}),n);return c&&u.preventDefault(),l&&e.dispatchEvent(u),u.defaultPrevented&&a&&a.preventDefault(),u}};function d$(e,t={}){for(const[n,r]of Object.entries(t))try{e[n]=r}catch{Object.defineProperty(e,n,{configurable:!0,get(){return r}})}return e}function G9(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function ek(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Kl={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${ek(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${ek(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let i=r.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=G9(e.dataset[r])}return t},getDataAttribute(e,t){return G9(e.getAttribute(`data-bs-${ek(t)}`))}};class av{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const r=Yl(n)?Kl.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...Yl(n)?Kl.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[r,i]of Object.entries(n)){const s=t[r],a=Yl(s)?"element":B9e(s);if(!new RegExp(i).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${a}" but expected type "${i}".`)}}}const K9e="5.3.3";class ho extends av{constructor(t,n){super(),t=Ru(t),t&&(this._element=t,this._config=this._getConfig(n),JA.set(this._element,this.constructor.DATA_KEY,this))}dispose(){JA.remove(this._element,this.constructor.DATA_KEY),we.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,r=!0){lte(t,n,r)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return JA.get(Ru(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return K9e}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const tk=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>ite(n)).join(","):null},tt={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(n=>n.matches(t))},parents(e,t){const n=[];let r=e.parentNode.closest(t);for(;r;)n.push(r),r=r.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(n=>!Iu(n)&&rg(n))},getSelectorFromElement(e){const t=tk(e);return t&&tt.findOne(t)?t:null},getElementFromSelector(e){const t=tk(e);return t?tt.findOne(t):null},getMultipleElementsFromSelector(e){const t=tk(e);return t?tt.find(t):[]}},NS=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,r=e.NAME;we.on(document,n,`[data-bs-dismiss="${r}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Iu(this))return;const s=tt.getElementFromSelector(this)||this.closest(`.${r}`);e.getOrCreateInstance(s)[t]()})},J9e="alert",Z9e="bs.alert",gte=`.${Z9e}`,Q9e=`close${gte}`,e7e=`closed${gte}`,t7e="fade",n7e="show";class DS extends ho{static get NAME(){return J9e}close(){if(we.trigger(this._element,Q9e).defaultPrevented)return;this._element.classList.remove(n7e);const n=this._element.classList.contains(t7e);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),we.trigger(this._element,e7e),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=DS.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}NS(DS,"close");Aa(DS);const r7e="button",i7e="bs.button",s7e=`.${i7e}`,a7e=".data-api",o7e="active",q9='[data-bs-toggle="button"]',l7e=`click${s7e}${a7e}`;class RS extends ho{static get NAME(){return r7e}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(o7e))}static jQueryInterface(t){return this.each(function(){const n=RS.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}we.on(document,l7e,q9,e=>{e.preventDefault();const t=e.target.closest(q9);RS.getOrCreateInstance(t).toggle()});Aa(RS);const c7e="swipe",ig=".bs.swipe",u7e=`touchstart${ig}`,f7e=`touchmove${ig}`,h7e=`touchend${ig}`,d7e=`pointerdown${ig}`,p7e=`pointerup${ig}`,g7e="touch",m7e="pen",x7e="pointer-event",v7e=40,y7e={endCallback:null,leftCallback:null,rightCallback:null},_7e={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Rb extends av{constructor(t,n){super(),this._element=t,!(!t||!Rb.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return y7e}static get DefaultType(){return _7e}static get NAME(){return c7e}dispose(){we.off(this._element,ig)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Zi(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=v7e)return;const n=t/this._deltaX;this._deltaX=0,n&&Zi(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(we.on(this._element,d7e,t=>this._start(t)),we.on(this._element,p7e,t=>this._end(t)),this._element.classList.add(x7e)):(we.on(this._element,u7e,t=>this._start(t)),we.on(this._element,f7e,t=>this._move(t)),we.on(this._element,h7e,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===m7e||t.pointerType===g7e)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const b7e="carousel",E7e="bs.carousel",sf=`.${E7e}`,mte=".data-api",w7e="ArrowLeft",S7e="ArrowRight",T7e=500,Ug="next",Pd="prev",qd="left",k_="right",A7e=`slide${sf}`,nk=`slid${sf}`,k7e=`keydown${sf}`,C7e=`mouseenter${sf}`,F7e=`mouseleave${sf}`,O7e=`dragstart${sf}`,N7e=`load${sf}${mte}`,D7e=`click${sf}${mte}`,xte="carousel",Ty="active",R7e="slide",I7e="carousel-item-end",$7e="carousel-item-start",M7e="carousel-item-next",L7e="carousel-item-prev",vte=".active",yte=".carousel-item",P7e=vte+yte,B7e=".carousel-item img",U7e=".carousel-indicators",z7e="[data-bs-slide], [data-bs-slide-to]",H7e='[data-bs-ride="carousel"]',V7e={[w7e]:k_,[S7e]:qd},W7e={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},j7e={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ov extends ho{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=tt.findOne(U7e,this._element),this._addEventListeners(),this._config.ride===xte&&this.cycle()}static get Default(){return W7e}static get DefaultType(){return j7e}static get NAME(){return b7e}next(){this._slide(Ug)}nextWhenVisible(){!document.hidden&&rg(this._element)&&this.next()}prev(){this._slide(Pd)}pause(){this._isSliding&&ste(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){we.one(this._element,nk,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){we.one(this._element,nk,()=>this.to(t));return}const r=this._getItemIndex(this._getActive());if(r===t)return;const i=t>r?Ug:Pd;this._slide(i,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&we.on(this._element,k7e,t=>this._keydown(t)),this._config.pause==="hover"&&(we.on(this._element,C7e,()=>this.pause()),we.on(this._element,F7e,()=>this._maybeEnableCycle())),this._config.touch&&Rb.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of tt.find(B7e,this._element))we.on(r,O7e,i=>i.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(qd)),rightCallback:()=>this._slide(this._directionToOrder(k_)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),T7e+this._config.interval))}};this._swipeHelper=new Rb(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=V7e[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=tt.findOne(vte,this._indicatorsElement);n.classList.remove(Ty),n.removeAttribute("aria-current");const r=tt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);r&&(r.classList.add(Ty),r.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const r=this._getActive(),i=t===Ug,s=n||h$(this._getItems(),r,i,this._config.wrap);if(s===r)return;const a=this._getItemIndex(s),o=d=>we.trigger(this._element,d,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(r),to:a});if(o(A7e).defaultPrevented||!r||!s)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=s;const u=i?$7e:I7e,f=i?M7e:L7e;s.classList.add(f),sv(s),r.classList.add(u),s.classList.add(u);const h=()=>{s.classList.remove(u,f),s.classList.add(Ty),r.classList.remove(Ty,f,u),this._isSliding=!1,o(nk)};this._queueCallback(h,r,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(R7e)}_getActive(){return tt.findOne(P7e,this._element)}_getItems(){return tt.find(yte,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return _a()?t===qd?Pd:Ug:t===qd?Ug:Pd}_orderToDirection(t){return _a()?t===Pd?qd:k_:t===Pd?k_:qd}static jQueryInterface(t){return this.each(function(){const n=ov.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}we.on(document,D7e,z7e,function(e){const t=tt.getElementFromSelector(this);if(!t||!t.classList.contains(xte))return;e.preventDefault();const n=ov.getOrCreateInstance(t),r=this.getAttribute("data-bs-slide-to");if(r){n.to(r),n._maybeEnableCycle();return}if(Kl.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});we.on(window,N7e,()=>{const e=tt.find(H7e);for(const t of e)ov.getOrCreateInstance(t)});Aa(ov);const G7e="collapse",q7e="bs.collapse",lv=`.${q7e}`,X7e=".data-api",Y7e=`show${lv}`,K7e=`shown${lv}`,J7e=`hide${lv}`,Z7e=`hidden${lv}`,Q7e=`click${lv}${X7e}`,rk="show",s0="collapse",Ay="collapsing",eBe="collapsed",tBe=`:scope .${s0} .${s0}`,nBe="collapse-horizontal",rBe="width",iBe="height",sBe=".collapse.show, .collapse.collapsing",S3='[data-bs-toggle="collapse"]',aBe={parent:null,toggle:!0},oBe={parent:"(null|element)",toggle:"boolean"};class Y1 extends ho{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const r=tt.find(S3);for(const i of r){const s=tt.getSelectorFromElement(i),a=tt.find(s).filter(o=>o===this._element);s!==null&&a.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return aBe}static get DefaultType(){return oBe}static get NAME(){return G7e}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(sBe).filter(o=>o!==this._element).map(o=>Y1.getOrCreateInstance(o,{toggle:!1}))),t.length&&t[0]._isTransitioning||we.trigger(this._element,Y7e).defaultPrevented)return;for(const o of t)o.hide();const r=this._getDimension();this._element.classList.remove(s0),this._element.classList.add(Ay),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Ay),this._element.classList.add(s0,rk),this._element.style[r]="",we.trigger(this._element,K7e)},a=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[r]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||we.trigger(this._element,J7e).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,sv(this._element),this._element.classList.add(Ay),this._element.classList.remove(s0,rk);for(const i of this._triggerArray){const s=tt.getElementFromSelector(i);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Ay),this._element.classList.add(s0),we.trigger(this._element,Z7e)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(t=this._element){return t.classList.contains(rk)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Ru(t.parent),t}_getDimension(){return this._element.classList.contains(nBe)?rBe:iBe}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(S3);for(const n of t){const r=tt.getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(t){const n=tt.find(tBe,this._config.parent);return tt.find(t,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const r of t)r.classList.toggle(eBe,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const r=Y1.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}we.on(document,Q7e,S3,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const t of tt.getMultipleElementsFromSelector(this))Y1.getOrCreateInstance(t,{toggle:!1}).toggle()});Aa(Y1);const X9="dropdown",lBe="bs.dropdown",md=`.${lBe}`,p$=".data-api",cBe="Escape",Y9="Tab",uBe="ArrowUp",K9="ArrowDown",fBe=2,hBe=`hide${md}`,dBe=`hidden${md}`,pBe=`show${md}`,gBe=`shown${md}`,_te=`click${md}${p$}`,bte=`keydown${md}${p$}`,mBe=`keyup${md}${p$}`,Xd="show",xBe="dropup",vBe="dropend",yBe="dropstart",_Be="dropup-center",bBe="dropdown-center",Hf='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',EBe=`${Hf}.${Xd}`,C_=".dropdown-menu",wBe=".navbar",SBe=".navbar-nav",TBe=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",ABe=_a()?"top-end":"top-start",kBe=_a()?"top-start":"top-end",CBe=_a()?"bottom-end":"bottom-start",FBe=_a()?"bottom-start":"bottom-end",OBe=_a()?"left-start":"right-start",NBe=_a()?"right-start":"left-start",DBe="top",RBe="bottom",IBe={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},$Be={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class zo extends ho{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=tt.next(this._element,C_)[0]||tt.prev(this._element,C_)[0]||tt.findOne(C_,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return IBe}static get DefaultType(){return $Be}static get NAME(){return X9}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Iu(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!we.trigger(this._element,pBe,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SBe))for(const r of[].concat(...document.body.children))we.on(r,"mouseover",Db);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Xd),this._element.classList.add(Xd),we.trigger(this._element,gBe,t)}}hide(){if(Iu(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!we.trigger(this._element,hBe,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))we.off(r,"mouseover",Db);this._popper&&this._popper.destroy(),this._menu.classList.remove(Xd),this._element.classList.remove(Xd),this._element.setAttribute("aria-expanded","false"),Kl.removeDataAttribute(this._menu,"popper"),we.trigger(this._element,dBe,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Yl(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${X9.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof rte>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Yl(this._config.reference)?t=Ru(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=f$(t,this._menu,n)}_isShown(){return this._menu.classList.contains(Xd)}_getPlacement(){const t=this._parent;if(t.classList.contains(vBe))return OBe;if(t.classList.contains(yBe))return NBe;if(t.classList.contains(_Be))return DBe;if(t.classList.contains(bBe))return RBe;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(xBe)?n?kBe:ABe:n?FBe:CBe}_detectNavbar(){return this._element.closest(wBe)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Kl.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Zi(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const r=tt.find(TBe,this._menu).filter(i=>rg(i));r.length&&h$(r,n,t===K9,!r.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=zo.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===fBe||t.type==="keyup"&&t.key!==Y9)return;const n=tt.find(EBe);for(const r of n){const i=zo.getInstance(r);if(!i||i._config.autoClose===!1)continue;const s=t.composedPath(),a=s.includes(i._menu);if(s.includes(i._element)||i._config.autoClose==="inside"&&!a||i._config.autoClose==="outside"&&a||i._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Y9||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:i._element};t.type==="click"&&(o.clickEvent=t),i._completeHide(o)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),r=t.key===cBe,i=[uBe,K9].includes(t.key);if(!i&&!r||n&&!r)return;t.preventDefault();const s=this.matches(Hf)?this:tt.prev(this,Hf)[0]||tt.next(this,Hf)[0]||tt.findOne(Hf,t.delegateTarget.parentNode),a=zo.getOrCreateInstance(s);if(i){t.stopPropagation(),a.show(),a._selectMenuItem(t);return}a._isShown()&&(t.stopPropagation(),a.hide(),s.focus())}}we.on(document,bte,Hf,zo.dataApiKeydownHandler);we.on(document,bte,C_,zo.dataApiKeydownHandler);we.on(document,_te,zo.clearMenus);we.on(document,mBe,zo.clearMenus);we.on(document,_te,Hf,function(e){e.preventDefault(),zo.getOrCreateInstance(this).toggle()});Aa(zo);const Ete="backdrop",MBe="fade",J9="show",Z9=`mousedown.bs.${Ete}`,LBe={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},PBe={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class wte extends av{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return LBe}static get DefaultType(){return PBe}static get NAME(){return Ete}show(t){if(!this._config.isVisible){Zi(t);return}this._append();const n=this._getElement();this._config.isAnimated&&sv(n),n.classList.add(J9),this._emulateAnimation(()=>{Zi(t)})}hide(t){if(!this._config.isVisible){Zi(t);return}this._getElement().classList.remove(J9),this._emulateAnimation(()=>{this.dispose(),Zi(t)})}dispose(){this._isAppended&&(we.off(this._element,Z9),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(MBe),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Ru(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),we.on(t,Z9,()=>{Zi(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){lte(t,this._getElement(),this._config.isAnimated)}}const BBe="focustrap",UBe="bs.focustrap",Ib=`.${UBe}`,zBe=`focusin${Ib}`,HBe=`keydown.tab${Ib}`,VBe="Tab",WBe="forward",Q9="backward",jBe={autofocus:!0,trapElement:null},GBe={autofocus:"boolean",trapElement:"element"};class Ste extends av{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return jBe}static get DefaultType(){return GBe}static get NAME(){return BBe}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),we.off(document,Ib),we.on(document,zBe,t=>this._handleFocusin(t)),we.on(document,HBe,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,we.off(document,Ib))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const r=tt.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===Q9?r[r.length-1].focus():r[0].focus()}_handleKeydown(t){t.key===VBe&&(this._lastTabNavDirection=t.shiftKey?Q9:WBe)}}const e7=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",t7=".sticky-top",ky="padding-right",n7="margin-right";class T3{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ky,n=>n+t),this._setElementAttributes(e7,ky,n=>n+t),this._setElementAttributes(t7,n7,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ky),this._resetElementAttributes(e7,ky),this._resetElementAttributes(t7,n7)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,r){const i=this.getWidth(),s=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+i)return;this._saveInitialAttribute(a,n);const o=window.getComputedStyle(a).getPropertyValue(n);a.style.setProperty(n,`${r(Number.parseFloat(o))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,n){const r=t.style.getPropertyValue(n);r&&Kl.setDataAttribute(t,n,r)}_resetElementAttributes(t,n){const r=i=>{const s=Kl.getDataAttribute(i,n);if(s===null){i.style.removeProperty(n);return}Kl.removeDataAttribute(i,n),i.style.setProperty(n,s)};this._applyManipulationCallback(t,r)}_applyManipulationCallback(t,n){if(Yl(t)){n(t);return}for(const r of tt.find(t,this._element))n(r)}}const qBe="modal",XBe="bs.modal",ba=`.${XBe}`,YBe=".data-api",KBe="Escape",JBe=`hide${ba}`,ZBe=`hidePrevented${ba}`,Tte=`hidden${ba}`,Ate=`show${ba}`,QBe=`shown${ba}`,eUe=`resize${ba}`,tUe=`click.dismiss${ba}`,nUe=`mousedown.dismiss${ba}`,rUe=`keydown.dismiss${ba}`,iUe=`click${ba}${YBe}`,r7="modal-open",sUe="fade",i7="show",ik="modal-static",aUe=".modal.show",oUe=".modal-dialog",lUe=".modal-body",cUe='[data-bs-toggle="modal"]',uUe={backdrop:!0,focus:!0,keyboard:!0},fUe={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Hh extends ho{constructor(t,n){super(t,n),this._dialog=tt.findOne(oUe,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new T3,this._addEventListeners()}static get Default(){return uUe}static get DefaultType(){return fUe}static get NAME(){return qBe}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||we.trigger(this._element,Ate,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(r7),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||we.trigger(this._element,JBe).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(i7),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){we.off(window,ba),we.off(this._dialog,ba),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new wte({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ste({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=tt.findOne(lUe,this._dialog);n&&(n.scrollTop=0),sv(this._element),this._element.classList.add(i7);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,we.trigger(this._element,QBe,{relatedTarget:t})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){we.on(this._element,rUe,t=>{if(t.key===KBe){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),we.on(window,eUe,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),we.on(this._element,nUe,t=>{we.one(this._element,tUe,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(r7),this._resetAdjustments(),this._scrollBar.reset(),we.trigger(this._element,Tte)})}_isAnimated(){return this._element.classList.contains(sUe)}_triggerBackdropTransition(){if(we.trigger(this._element,ZBe).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(ik)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(ik),this._queueCallback(()=>{this._element.classList.remove(ik),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!t){const i=_a()?"paddingLeft":"paddingRight";this._element.style[i]=`${n}px`}if(!r&&t){const i=_a()?"paddingRight":"paddingLeft";this._element.style[i]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const r=Hh.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](n)}})}}we.on(document,iUe,cUe,function(e){const t=tt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),we.one(t,Ate,i=>{i.defaultPrevented||we.one(t,Tte,()=>{rg(this)&&this.focus()})});const n=tt.findOne(aUe);n&&Hh.getInstance(n).hide(),Hh.getOrCreateInstance(t).toggle(this)});NS(Hh);Aa(Hh);const hUe="offcanvas",dUe="bs.offcanvas",bc=`.${dUe}`,kte=".data-api",pUe=`load${bc}${kte}`,gUe="Escape",s7="show",a7="showing",o7="hiding",mUe="offcanvas-backdrop",Cte=".offcanvas.show",xUe=`show${bc}`,vUe=`shown${bc}`,yUe=`hide${bc}`,l7=`hidePrevented${bc}`,Fte=`hidden${bc}`,_Ue=`resize${bc}`,bUe=`click${bc}${kte}`,EUe=`keydown.dismiss${bc}`,wUe='[data-bs-toggle="offcanvas"]',SUe={backdrop:!0,keyboard:!0,scroll:!1},TUe={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class $u extends ho{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return SUe}static get DefaultType(){return TUe}static get NAME(){return hUe}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||we.trigger(this._element,xUe,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new T3().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(a7);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(s7),this._element.classList.remove(a7),we.trigger(this._element,vUe,{relatedTarget:t})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||we.trigger(this._element,yUe).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(o7),this._backdrop.hide();const n=()=>{this._element.classList.remove(s7,o7),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new T3().reset(),we.trigger(this._element,Fte)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){we.trigger(this._element,l7);return}this.hide()},n=!!this._config.backdrop;return new wte({className:mUe,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new Ste({trapElement:this._element})}_addEventListeners(){we.on(this._element,EUe,t=>{if(t.key===gUe){if(this._config.keyboard){this.hide();return}we.trigger(this._element,l7)}})}static jQueryInterface(t){return this.each(function(){const n=$u.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}we.on(document,bUe,wUe,function(e){const t=tt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Iu(this))return;we.one(t,Fte,()=>{rg(this)&&this.focus()});const n=tt.findOne(Cte);n&&n!==t&&$u.getInstance(n).hide(),$u.getOrCreateInstance(t).toggle(this)});we.on(window,pUe,()=>{for(const e of tt.find(Cte))$u.getOrCreateInstance(e).show()});we.on(window,_Ue,()=>{for(const e of tt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&$u.getOrCreateInstance(e).hide()});NS($u);Aa($u);const AUe=/^aria-[\w-]*$/i,Ote={"*":["class","dir","id","lang","role",AUe],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},kUe=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),CUe=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,FUe=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?kUe.has(n)?!!CUe.test(e.nodeValue):!0:t.filter(r=>r instanceof RegExp).some(r=>r.test(n))};function OUe(e,t,n){if(!e.length)return e;if(n&&typeof n=="function")return n(e);const i=new window.DOMParser().parseFromString(e,"text/html"),s=[].concat(...i.body.querySelectorAll("*"));for(const a of s){const o=a.nodeName.toLowerCase();if(!Object.keys(t).includes(o)){a.remove();continue}const l=[].concat(...a.attributes),c=[].concat(t["*"]||[],t[o]||[]);for(const u of l)FUe(u,c)||a.removeAttribute(u.nodeName)}return i.body.innerHTML}const NUe="TemplateFactory",DUe={allowList:Ote,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},RUe={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},IUe={entry:"(string|element|function|null)",selector:"(string|element)"};class $Ue extends av{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return DUe}static get DefaultType(){return RUe}static get NAME(){return NUe}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,s]of Object.entries(this._config.content))this._setContent(t,s,i);const n=t.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&n.classList.add(...r.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,r]of Object.entries(t))super._typeCheckConfig({selector:n,entry:r},IUe)}_setContent(t,n,r){const i=tt.findOne(r,t);if(i){if(n=this._resolvePossibleFunction(n),!n){i.remove();return}if(Yl(n)){this._putElementInTemplate(Ru(n),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(n);return}i.textContent=n}}_maybeSanitize(t){return this._config.sanitize?OUe(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Zi(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const MUe="tooltip",LUe=new Set(["sanitize","allowList","sanitizeFn"]),sk="fade",PUe="modal",Cy="show",BUe=".tooltip-inner",c7=`.${PUe}`,u7="hide.bs.modal",zg="hover",ak="focus",UUe="click",zUe="manual",HUe="hide",VUe="hidden",WUe="show",jUe="shown",GUe="inserted",qUe="click",XUe="focusin",YUe="focusout",KUe="mouseenter",JUe="mouseleave",ZUe={AUTO:"auto",TOP:"top",RIGHT:_a()?"left":"right",BOTTOM:"bottom",LEFT:_a()?"right":"left"},QUe={allowList:Ote,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},eze={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class sg extends ho{constructor(t,n){if(typeof rte>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return QUe}static get DefaultType(){return eze}static get NAME(){return MUe}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),we.off(this._element.closest(c7),u7,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=we.trigger(this._element,this.constructor.eventName(WUe)),r=(ate(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!r)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),we.trigger(this._element,this.constructor.eventName(GUe))),this._popper=this._createPopper(i),i.classList.add(Cy),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))we.on(o,"mouseover",Db);const a=()=>{we.trigger(this._element,this.constructor.eventName(jUe)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||we.trigger(this._element,this.constructor.eventName(HUe)).defaultPrevented)return;if(this._getTipElement().classList.remove(Cy),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))we.off(i,"mouseover",Db);this._activeTrigger[UUe]=!1,this._activeTrigger[ak]=!1,this._activeTrigger[zg]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),we.trigger(this._element,this.constructor.eventName(VUe)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(sk,Cy),n.classList.add(`bs-${this.constructor.NAME}-auto`);const r=U9e(this.constructor.NAME).toString();return n.setAttribute("id",r),this._isAnimated()&&n.classList.add(sk),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new $Ue({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[BUe]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(sk)}_isShown(){return this.tip&&this.tip.classList.contains(Cy)}_createPopper(t){const n=Zi(this._config.placement,[this,t,this._element]),r=ZUe[n.toUpperCase()];return f$(this._element,t,this._getPopperConfig(r))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Zi(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...n,...Zi(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")we.on(this._element,this.constructor.eventName(qUe),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(n!==zUe){const r=n===zg?this.constructor.eventName(KUe):this.constructor.eventName(XUe),i=n===zg?this.constructor.eventName(JUe):this.constructor.eventName(YUe);we.on(this._element,r,this._config.selector,s=>{const a=this._initializeOnDelegatedTarget(s);a._activeTrigger[s.type==="focusin"?ak:zg]=!0,a._enter()}),we.on(this._element,i,this._config.selector,s=>{const a=this._initializeOnDelegatedTarget(s);a._activeTrigger[s.type==="focusout"?ak:zg]=a._element.contains(s.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},we.on(this._element.closest(c7),u7,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=Kl.getDataAttributes(this._element);for(const r of Object.keys(n))LUe.has(r)&&delete n[r];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Ru(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,r]of Object.entries(this._config))this.constructor.Default[n]!==r&&(t[n]=r);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=sg.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Aa(sg);const tze="popover",nze=".popover-header",rze=".popover-body",ize={...sg.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},sze={...sg.DefaultType,content:"(null|string|element|function)"};class g$ extends sg{static get Default(){return ize}static get DefaultType(){return sze}static get NAME(){return tze}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[nze]:this._getTitle(),[rze]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=g$.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}Aa(g$);const aze="scrollspy",oze="bs.scrollspy",m$=`.${oze}`,lze=".data-api",cze=`activate${m$}`,f7=`click${m$}`,uze=`load${m$}${lze}`,fze="dropdown-item",Bd="active",hze='[data-bs-spy="scroll"]',ok="[href]",dze=".nav, .list-group",h7=".nav-link",pze=".nav-item",gze=".list-group-item",mze=`${h7}, ${pze} > ${h7}, ${gze}`,xze=".dropdown",vze=".dropdown-toggle",yze={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},_ze={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class IS extends ho{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return yze}static get DefaultType(){return _ze}static get NAME(){return aze}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Ru(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(we.off(this._config.target,f7),we.on(this._config.target,f7,ok,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const r=this._rootElement||window,i=n.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:i,behavior:"smooth"});return}r.scrollTop=i}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=a=>this._targetLinks.get(`#${a.target.id}`),r=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(n(a))},i=(this._rootElement||document.documentElement).scrollTop,s=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const a of t){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(a));continue}const o=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&o){if(r(a),!i)return;continue}!s&&!o&&r(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=tt.find(ok,this._config.target);for(const n of t){if(!n.hash||Iu(n))continue;const r=tt.findOne(decodeURI(n.hash),this._element);rg(r)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,r))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Bd),this._activateParents(t),we.trigger(this._element,cze,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(fze)){tt.findOne(vze,t.closest(xze)).classList.add(Bd);return}for(const n of tt.parents(t,dze))for(const r of tt.prev(n,mze))r.classList.add(Bd)}_clearActiveClass(t){t.classList.remove(Bd);const n=tt.find(`${ok}.${Bd}`,t);for(const r of n)r.classList.remove(Bd)}static jQueryInterface(t){return this.each(function(){const n=IS.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}we.on(window,uze,()=>{for(const e of tt.find(hze))IS.getOrCreateInstance(e)});Aa(IS);const bze="tab",Eze="bs.tab",xd=`.${Eze}`,wze=`hide${xd}`,Sze=`hidden${xd}`,Tze=`show${xd}`,Aze=`shown${xd}`,kze=`click${xd}`,Cze=`keydown${xd}`,Fze=`load${xd}`,Oze="ArrowLeft",d7="ArrowRight",Nze="ArrowUp",p7="ArrowDown",lk="Home",g7="End",Vf="active",m7="fade",ck="show",Dze="dropdown",Nte=".dropdown-toggle",Rze=".dropdown-menu",uk=`:not(${Nte})`,Ize='.list-group, .nav, [role="tablist"]',$ze=".nav-item, .list-group-item",Mze=`.nav-link${uk}, .list-group-item${uk}, [role="tab"]${uk}`,Dte='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',fk=`${Mze}, ${Dte}`,Lze=`.${Vf}[data-bs-toggle="tab"], .${Vf}[data-bs-toggle="pill"], .${Vf}[data-bs-toggle="list"]`;class Sp extends ho{constructor(t){super(t),this._parent=this._element.closest(Ize),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),we.on(this._element,Cze,n=>this._keydown(n)))}static get NAME(){return bze}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),r=n?we.trigger(n,wze,{relatedTarget:t}):null;we.trigger(t,Tze,{relatedTarget:n}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(Vf),this._activate(tt.getElementFromSelector(t));const r=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(ck);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),we.trigger(t,Aze,{relatedTarget:n})};this._queueCallback(r,t,t.classList.contains(m7))}_deactivate(t,n){if(!t)return;t.classList.remove(Vf),t.blur(),this._deactivate(tt.getElementFromSelector(t));const r=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(ck);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),we.trigger(t,Sze,{relatedTarget:n})};this._queueCallback(r,t,t.classList.contains(m7))}_keydown(t){if(![Oze,d7,Nze,p7,lk,g7].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(i=>!Iu(i));let r;if([lk,g7].includes(t.key))r=n[t.key===lk?0:n.length-1];else{const i=[d7,p7].includes(t.key);r=h$(n,t.target,i,!0)}r&&(r.focus({preventScroll:!0}),Sp.getOrCreateInstance(r).show())}_getChildren(){return tt.find(fk,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const r of n)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),r=this._getOuterElement(t);t.setAttribute("aria-selected",n),r!==t&&this._setAttributeIfNotExists(r,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=tt.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const r=this._getOuterElement(t);if(!r.classList.contains(Dze))return;const i=(s,a)=>{const o=tt.findOne(s,r);o&&o.classList.toggle(a,n)};i(Nte,Vf),i(Rze,ck),r.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,r){t.hasAttribute(n)||t.setAttribute(n,r)}_elemIsActive(t){return t.classList.contains(Vf)}_getInnerElement(t){return t.matches(fk)?t:tt.findOne(fk,t)}_getOuterElement(t){return t.closest($ze)||t}static jQueryInterface(t){return this.each(function(){const n=Sp.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}we.on(document,kze,Dte,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!Iu(this)&&Sp.getOrCreateInstance(this).show()});we.on(window,Fze,()=>{for(const e of tt.find(Lze))Sp.getOrCreateInstance(e)});Aa(Sp);const Pze="toast",Bze="bs.toast",af=`.${Bze}`,Uze=`mouseover${af}`,zze=`mouseout${af}`,Hze=`focusin${af}`,Vze=`focusout${af}`,Wze=`hide${af}`,jze=`hidden${af}`,Gze=`show${af}`,qze=`shown${af}`,Xze="fade",x7="hide",Fy="show",Oy="showing",Yze={animation:"boolean",autohide:"boolean",delay:"number"},Kze={animation:!0,autohide:!0,delay:5e3};class cv extends ho{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Kze}static get DefaultType(){return Yze}static get NAME(){return Pze}show(){if(we.trigger(this._element,Gze).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Xze);const n=()=>{this._element.classList.remove(Oy),we.trigger(this._element,qze),this._maybeScheduleHide()};this._element.classList.remove(x7),sv(this._element),this._element.classList.add(Fy,Oy),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||we.trigger(this._element,Wze).defaultPrevented)return;const n=()=>{this._element.classList.add(x7),this._element.classList.remove(Oy,Fy),we.trigger(this._element,jze)};this._element.classList.add(Oy),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Fy),super.dispose()}isShown(){return this._element.classList.contains(Fy)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const r=t.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){we.on(this._element,Uze,t=>this._onInteraction(t,!0)),we.on(this._element,zze,t=>this._onInteraction(t,!1)),we.on(this._element,Hze,t=>this._onInteraction(t,!0)),we.on(this._element,Vze,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=cv.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}NS(cv);Aa(cv);async function Jze(e){return new Promise((t,n)=>{const r=new FileReader;r.readAsBinaryString(e),r.onload=()=>t(r.result),r.onerror=i=>n(i)})}function Zze(e){let t=Date.now().toString();const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;let i=t.length;for(;i<e;)t+=n.charAt(Math.floor(Math.random()*r)),i+=1;return t}function hk(e,t,n){return e.map(r=>Object.keys(r).reduce((i,s)=>(i[s===t?n:s]=r[s],i),{}))}function Qze(e,t,n){return e.map(r=>r.hasOwnProperty(t)?r:{...r,[t]:n})}function v7(e,t,n="number"){return e.map(r=>Object.keys(r).reduce((i,s)=>(t.includes(s)?i[s]=r[s]:n==="number"&&(typeof r[s]=="number"||!isNaN(parseFloat(r[s])))&&(i[s]=parseFloat(r[s])),i),{}))}function eHe(e,t){return e.map(n=>[...t,...Object.keys(n).filter(i=>!t.includes(i))].reduce((i,s)=>(s in n?i[s]=n[s]:i[s]=null,i),{}))}function tHe(e,t,n){return e.map(r=>{const i=t.find(s=>s[n]===r[n]);return i?{...r,...i}:r})}function nHe(e){for(var t=[],n=0;n<e.items.length;n++){t[n]={};for(var r=0;r<e.fields.length;r++)if(e.fields[r].show||e.fields[r].name==="ColorGroup"){let i=e.fields[r].unit?e.fields[r].name+" ("+e.fields[r].unit+")":e.fields[r].name;t[n][i]=e.items[n][e.fields[r].label]}}return t}function rHe(e){return e.features?e.features.map(t=>{const{properties:n,...r}=t;return n||[]}):[]}function y7(e){let t=e.match(/\(([^)]+)\)$/),n=t?t[1].trim():"";return[e.replace("("+n+")","").trim(),n]}async function iHe(e,t=!1){var n=nHe(e),r=Dde(n);if(!t)return r;const i=new Blob([r],{type:"text/csv"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download="data.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a)}class Hm{static get(t,n=null,r=null,i=!0){return new Promise(function(s,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(this.readyState==4)if(this.status==200)try{s(i?JSON.parse(this.responseText):this.response)}catch(l){console.log(l),console.log(this.responseText),a(Error("Unable to parse output."))}else this.status==429?a(Error("Too many requests within specify time. Please try again later.")):(console.log(t),a(Error("Unable to fetch data from the server.")))},r!==null&&(o.onprogress=r),o.ontimeout=function(l){a(Error("The request has timed out."))},n!==null&&(o.timeout=n),o.open("GET",t,!0),o.send()})}static post(t,n,r={},i=18e4){return new Promise(function(s,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(this.readyState==4)if(this.status==200)try{s(JSON.parse(this.responseText))}catch(u){console.log(u),console.log(this.responseText),a(Error("Unable to parse output."))}else if(this.status==429)a(Error("Too many requests within specify time. Please try again later."));else{console.log(t);try{var l=JSON.parse(this.responseText),c=l.error?l.error:"Unable to fetch data from the server."}catch{c=this.responseText.replace(/<\/?[^>]+(>|$)/g,"")}a(Error(c))}},o.ontimeout=function(l){a(Error("The request has timed out."))},o.open("POST",t,!0),o.timeout=i,Object.keys(r).forEach(function(l,c){o.setRequestHeader(l,r[l])}),o.send(n)})}static serializePostVariables(t){var n="",r=!0;return Object.keys(t).forEach(function(i,s){n+=(r?"":"&")+i+"="+encodeURIComponent(t[i]),r=!1}),n}static generateMIMEBoundary(){for(var t="---------",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<25;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}const sHe={class:"p-2 text-bg-light"},aHe={key:0,class:"p-2"},oHe=["value"],lHe={key:1},cHe={class:"p-2"},uHe=["value"],fHe={class:"p-2"},hHe={class:"invalid-feedback"},dHe={key:0,class:"d-flex justify-content-center"},pHe={key:1,class:"p-2"},gHe=vr({__name:"CFormGeojson",props:{mapDBKey:{},maps:{},geoUrl:{}},emits:["changed"],setup(e,{emit:t}){const n=e,r=t,i=Jr();var s={};const a=hs({isLoading:!1,error:"",handler:"",geojsonUniqueProperties:[],geojsonRegionCol:""});async function o(c){if(i.value.value=null,s={},a.geojsonUniqueProperties=[],!!a.handler){var u="/static/cartdata/"+a.handler;Hm.get(u+"/Geographic Area.json").then(function(f){a.geojsonRegionCol="Region",r("changed",a.handler,f,a.geojsonRegionCol,u+"/data.csv")})}}async function l(c){s={},a.geojsonUniqueProperties=[];const u=c.target.files;if(!u||u.length==0)return;a.isLoading=!0;const f=new FormData;f.append("file",u[0]);var h=await new Promise(function(p,g){Hm.post("/api/v1/cartogram/preprocess/"+n.mapDBKey,f).then(function(m){p(m)},function(m){g(m)})}).catch(function(p){console.log(p),a.error="Unable to processs your geospatial file(s)",a.isLoading=!1});if(!(!h||!h.geojson)){var d=h.geojson;if(!d||!d.features){a.error="Invalid geospatial file",a.isLoading=!1;return}a.error="",s=d,a.geojsonUniqueProperties=h.unique,a.geojsonRegionCol="",a.handler="custom",a.isLoading=!1,r("changed",a.handler,{},"")}}return(c,u)=>(Le(),He("div",sHe,[u[8]||(u[8]=Q("div",{class:"badge text-bg-secondary"},"1. Define a map",-1)),n.geoUrl?(Le(),He("div",aHe,[Q("input",{type:"text",value:n.geoUrl,disabled:""},null,8,oHe)])):(Le(),He("div",lHe,[Q("div",cHe,[u[4]||(u[4]=Qn(" Select an appropriate map for your data. ")),Ki(Q("select",{class:"form-select","onUpdate:modelValue":u[0]||(u[0]=f=>a.handler=f),onChange:o},[u[3]||(u[3]=Q("option",null,null,-1)),(Le(!0),He(mt,null,Zr(n.maps,(f,h)=>(Le(),He("option",{value:h},gr(f.name),9,uHe))),256))],544),[[gh,a.handler]])]),Q("div",fHe,[u[5]||(u[5]=Qn(" OR upload your GeoJSONs or Shapefiles (.shp, .shx, and .dbf in zip). ")),Q("input",{ref_key:"fileEl",ref:i,class:Do(["form-control",{"is-invalid":a.error}]),type:"file",accept:".geojson,.json,.zip",onChange:l},null,34),Q("div",hHe,gr(a.error),1)]),a.isLoading?(Le(),He("div",dHe,u[6]||(u[6]=[Q("div",{class:"p-2 spinner-border",role:"status"},[Q("span",{class:"visually-hidden"},"Loading...")],-1)]))):ei("",!0),a.geojsonUniqueProperties.length>0?(Le(),He("div",pHe,[u[7]||(u[7]=Qn(" Which property contain unique region names (e.g., country names)? ")),Ki(Q("select",{class:"form-select","onUpdate:modelValue":u[1]||(u[1]=f=>a.geojsonRegionCol=f),onChange:u[2]||(u[2]=f=>r("changed",a.handler,gn(s),a.geojsonRegionCol))},[(Le(!0),He(mt,null,Zr(a.geojsonUniqueProperties,(f,h)=>(Le(),He("option",null,gr(f),1))),256))],544),[[gh,a.geojsonRegionCol]])])):ei("",!0)]))]))}});/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var ta=1200,mHe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],x$={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},v$=function(e){mHe.indexOf(e)!=-1&&(x$[0]=e)};function xHe(){v$(1252)}var Va=function(e){ta=e,v$(e)};function Rte(){Va(1200),xHe()}function _7(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e.charCodeAt(n);return t}function Ite(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}function vHe(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e[2*n]+(e[2*n+1]<<8));return t.join("")}function $te(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var gm=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return t==255&&n==254?Ite(e.slice(2)):t==254&&n==255?$te(e.slice(2)):t==65279?e.slice(1):e},Ny=function(t){return String.fromCharCode(t)},b7=function(t){return String.fromCharCode(t)},yHe=null,nu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E7(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0,l=0,c=0;c<e.length;)n=e.charCodeAt(c++),s=n>>2,r=e.charCodeAt(c++),a=(n&3)<<4|r>>4,i=e.charCodeAt(c++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),t+=nu.charAt(s)+nu.charAt(a)+nu.charAt(o)+nu.charAt(l);return t}function Bs(e){var t="",n=0,r=0,i=0,s=0,a=0,o=0,l=0;if(e.slice(0,5)=="data:"){var c=e.slice(0,1024).indexOf(";base64,");c>-1&&(e=e.slice(c+8))}e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)s=nu.indexOf(e.charAt(c++)),a=nu.indexOf(e.charAt(c++)),n=s<<2|a>>4,t+=String.fromCharCode(n),o=nu.indexOf(e.charAt(c++)),r=(a&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(r)),l=nu.indexOf(e.charAt(c++)),i=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(i));return t}var _t=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),of=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,n){return n?new Buffer(t,n):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}(),K1=function(){if(typeof Buffer>"u")return!1;var e=of([65,0]);if(!e)return!1;var t=e.toString("utf16le");return t.length==1}();function Mu(e){return _t?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function w7(e){return _t?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var _s=function(t){return _t?of(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)&255})};function cc(e){if(Array.isArray(e))return e.map(function(r){return String.fromCharCode(r)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function y$(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return y$(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var jc=_t?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:of(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)i=e[t].length,e[t]instanceof Uint8Array?r.set(e[t],n):typeof e[t]=="string"?r.set(new Uint8Array(_s(e[t])),n):r.set(new Uint8Array(e[t]),n);return r}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function _He(e){for(var t=[],n=0,r=e.length+250,i=Mu(e.length+255),s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a<128)i[n++]=a;else if(a<2048)i[n++]=192|a>>6&31,i[n++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=e.charCodeAt(++s)&1023;i[n++]=240|a>>8&7,i[n++]=128|a>>2&63,i[n++]=128|o>>6&15|(a&3)<<4,i[n++]=128|o&63}else i[n++]=224|a>>12&15,i[n++]=128|a>>6&63,i[n++]=128|a&63;n>r&&(t.push(i.slice(0,n)),n=0,i=Mu(65535),r=65530)}return t.push(i.slice(0,n)),jc(t)}var rs=/\u0000/g,mm=/[\u0001-\u0006]/g;function S0(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function Wa(e,t){var n=""+e;return n.length>=t?n:Ct("0",t-n.length)+n}function _$(e,t){var n=""+e;return n.length>=t?n:Ct(" ",t-n.length)+n}function $b(e,t){var n=""+e;return n.length>=t?n:n+Ct(" ",t-n.length)}function bHe(e,t){var n=""+Math.round(e);return n.length>=t?n:Ct("0",t-n.length)+n}function EHe(e,t){var n=""+e;return n.length>=t?n:Ct("0",t-n.length)+n}var S7=Math.pow(2,32);function Ud(e,t){if(e>S7||e<-S7)return bHe(e,t);var n=Math.round(e);return EHe(n,t)}function Mb(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var T7=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],dk=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function wHe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var st={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},A7={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SHe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Lb(e,t,n){for(var r=e<0?-1:1,i=e*r,s=0,a=1,o=0,l=1,c=0,u=0,f=Math.floor(i);c<t&&(f=Math.floor(i),o=f*a+s,u=f*c+l,!(i-f<5e-8));)i=1/(i-f),s=a,a=o,l=c,c=u;if(u>t&&(c>t?(u=l,o=s):(u=c,o=a)),!n)return[0,r*o,u];var h=Math.floor(r*o/u);return[h,r*o-h*u,u]}function THe(e){var t=e.toPrecision(16);if(t.indexOf("e")>-1){var n=t.slice(0,t.indexOf("e"));return n=n.indexOf(".")>-1?n.slice(0,n.slice(0,2)=="0."?17:16):n.slice(0,15)+Ct("0",n.length-15),n+t.slice(t.indexOf("e"))}var r=t.indexOf(".")>-1?t.slice(0,t.slice(0,2)=="0."?17:16):t.slice(0,15)+Ct("0",t.length-15);return Number(r)}function Al(e,t,n){if(e>2958465||e<0)return null;e=THe(e);var r=e|0,i=Math.floor(86400*(e-r)),s=0,a=[],o={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=FHe(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}function b$(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function AHe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function kHe(e){var t=e<0?12:11,n=b$(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10),n.length<=t)?n:e.toExponential(5)}function CHe(e){var t=b$(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function J1(e){if(!isFinite(e))return isNaN(e)?"#NUM!":"#DIV/0!";var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),n;return t>=-4&&t<=-1?n=e.toPrecision(10+t):Math.abs(t)<=9?n=kHe(e):t===10?n=e.toFixed(10).substr(0,12):n=CHe(e),b$(AHe(n.toUpperCase()))}function Vh(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):J1(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Us(14,rr(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function FHe(e,t){t[0]-=581;var n=e.getDay();return e<60&&(n=(n+6)%7),n}function OHe(e,t,n,r){var i="",s=0,a=0,o=n.y,l,c=0;switch(e){case 98:o=n.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:l=n.m,c=t.length;break;case 3:return dk[n.m-1][1];case 5:return dk[n.m-1][0];default:return dk[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=n.d,c=t.length;break;case 3:return T7[n.q][0];default:return T7[n.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return n.u===0&&(t=="s"||t=="ss")?Wa(n.S,t.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(n.S+n.u)),s>=60*a&&(s=0),t==="s"?s===0?"0":""+s/a:(i=Wa(s,2+r),t==="ss"?i.substr(0,2):"."+i.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+(r==0?Math.round(n.S+n.u):n.S);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:l=o,c=1;break}var u=c>0?Wa(l,c):"";return u}function Pl(e){var t=3;if(e.length<=t)return e;for(var n=e.length%t,r=e.substr(0,n);n!=e.length;n+=t)r+=(r.length>0?",":"")+e.substr(n,t);return r}var Mte=/%/g;function NHe(e,t,n){var r=t.replace(Mte,""),i=t.length-r.length;return Jl(e,r,n*Math.pow(10,2*i))+Ct("%",i)}function DHe(e,t,n){for(var r=t.length-1;t.charCodeAt(r-1)===44;)--r;return Jl(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}function Lte(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Lte(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var a=Math.floor(Math.log(t)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var Pte=/# (\?+)( ?)\/( ?)(\d+)/;function RHe(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),s=Math.floor(i/r),a=i-s*r,o=r;return n+(s===0?"":""+s)+" "+(a===0?Ct(" ",e[1].length+1+e[4].length):_$(a,e[1].length)+e[2]+"/"+e[3]+Wa(o,e[4].length))}function IHe(e,t,n){return n+(t===0?"":""+t)+Ct(" ",e[1].length+2+e[4].length)}var Bte=/^#*0*\.([0#]+)/,Ute=/\)[^)]*[0#]/,zte=/\(###\) ###\\?-####/;function yi(e){for(var t="",n,r=0;r!=e.length;++r)switch(n=e.charCodeAt(r)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(n)}return t}function k7(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function C7(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function $He(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function MHe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Ys(e,t,n){if(e.charCodeAt(0)===40&&!t.match(Ute)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Ys("n",r,n):"("+Ys("n",r,-n)+")"}if(t.charCodeAt(t.length-1)===44)return DHe(e,t,n);if(t.indexOf("%")!==-1)return NHe(e,t,n);if(t.indexOf("E")!==-1)return Lte(t,n);if(t.charCodeAt(0)===36)return"$"+Ys(e,t.substr(t.charAt(1)==" "?2:1),n);var i,s,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Ud(l,t.length);if(t.match(/^[#?]+$/))return i=Ud(n,0),i==="0"&&(i=""),i.length>t.length?i:yi(t.substr(0,t.length-i.length))+i;if(s=t.match(Pte))return RHe(s,l,c);if(t.match(/^#+0+$/))return c+Ud(l,t.length-t.indexOf("0"));if(s=t.match(Bte))return i=k7(n,s[1].length).replace(/^([^\.]+)$/,"$1."+yi(s[1])).replace(/\.$/,"."+yi(s[1])).replace(/\.(\d*)$/,function(p,g){return"."+g+Ct("0",yi(s[1]).length-g.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+k7(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Pl(Ud(l,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Ys(e,t,-n):Pl(""+(Math.floor(n)+$He(n,s[1].length)))+"."+Wa(C7(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return Ys(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=S0(Ys(e,t.replace(/[\\-]/g,""),n)),a=0,S0(S0(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return a<i.length?i.charAt(a++):p==="0"?"0":""}));if(t.match(zte))return i=Ys(e,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=Lb(l,Math.pow(10,a)-1,!1),i=""+c,u=Jl("n",s[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=$b(o[2],a),u.length<s[4].length&&(u=yi(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=Lb(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?_$(o[1],a)+s[2]+"/"+s[3]+$b(o[2],a):Ct(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=Ud(n,0),t.length<=i.length?i:yi(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=t.indexOf(".")-a,h=t.length-i.length-f;return yi(t.substr(0,f)+i+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return a=C7(n,s[1].length),n<0?"-"+Ys(e,t,-n):Pl(MHe(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Wa(0,3-p.length):"")+p})+"."+Wa(a,s[1].length);switch(t){case"###,##0.00":return Ys(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var d=Pl(Ud(l,0));return d!=="0"?c+d:"";case"###,###.00":return Ys(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Ys(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function LHe(e,t,n){for(var r=t.length-1;t.charCodeAt(r-1)===44;)--r;return Jl(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}function PHe(e,t,n){var r=t.replace(Mte,""),i=t.length-r.length;return Jl(e,r,n*Math.pow(10,2*i))+Ct("%",i)}function Hte(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Hte(e,-t);var i=e.indexOf(".");i===-1&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function _o(e,t,n){if(e.charCodeAt(0)===40&&!t.match(Ute)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?_o("n",r,n):"("+_o("n",r,-n)+")"}if(t.charCodeAt(t.length-1)===44)return LHe(e,t,n);if(t.indexOf("%")!==-1)return PHe(e,t,n);if(t.indexOf("E")!==-1)return Hte(t,n);if(t.charCodeAt(0)===36)return"$"+_o(e,t.substr(t.charAt(1)==" "?2:1),n);var i,s,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+Wa(l,t.length);if(t.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>t.length?i:yi(t.substr(0,t.length-i.length))+i;if(s=t.match(Pte))return IHe(s,l,c);if(t.match(/^#+0+$/))return c+Wa(l,t.length-t.indexOf("0"));if(s=t.match(Bte))return i=(""+n).replace(/^([^\.]+)$/,"$1."+yi(s[1])).replace(/\.$/,"."+yi(s[1])),i=i.replace(/\.(\d*)$/,function(p,g){return"."+g+Ct("0",yi(s[1]).length-g.length)}),t.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return c+Pl(""+l);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+_o(e,t,-n):Pl(""+n)+"."+Ct("0",s[1].length);if(s=t.match(/^#,#*,#0/))return _o(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=S0(_o(e,t.replace(/[\\-]/g,""),n)),a=0,S0(S0(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return a<i.length?i.charAt(a++):p==="0"?"0":""}));if(t.match(zte))return i=_o(e,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=Lb(l,Math.pow(10,a)-1,!1),i=""+c,u=Jl("n",s[1],o[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=$b(o[2],a),u.length<s[4].length&&(u=yi(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=Lb(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?_$(o[1],a)+s[2]+"/"+s[3]+$b(o[2],a):Ct(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:yi(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=t.indexOf(".")-a,h=t.length-i.length-f;return yi(t.substr(0,f)+i+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+_o(e,t,-n):Pl(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?Wa(0,3-p.length):"")+p})+"."+Wa(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var d=Pl(""+l);return d!=="0"?c+d:"";default:if(t.match(/\.[0#?]*$/))return _o(e,t.slice(0,t.lastIndexOf(".")),n)+yi(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Jl(e,t,n){return(n|0)===n?_o(e,t,n):Ys(e,t,n)}function BHe(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),n===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Vte=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function no(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":Mb(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(r=n;e.charAt(t++)!=="]"&&t<e.length;)r+=e.charAt(t);if(r.match(Vte))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||n=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function UHe(e,t,n,r){for(var i=[],s="",a=0,o="",l="t",c,u,f,h="H";a<e.length;)switch(o=e.charAt(a)){case"G":if(!Mb(e,a))throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(f=e.charCodeAt(++a))!==34&&a<e.length;)s+=String.fromCharCode(f);i[i.length]={t:"t",v:s},++a;break;case"\\":var d=e.charAt(++a),p=d==="("||d===")"?d:"t";i[i.length]={t:p,v:d},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:t},++a;break;case"B":case"b":if(e.charAt(a+1)==="1"||e.charAt(a+1)==="2"){if(c==null&&(c=Al(t,n,e.charAt(a+1)==="2"),c==null))return"";i[i.length]={t:"X",v:e.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=Al(t,n),c==null))return"";for(s=o;++a<e.length&&e.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"上":var g={t:o,v:o};if(c==null&&(c=Al(t,n)),e.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?e.charAt(a+2):o),g.t="T",h="h",a+=3):e.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",a+=5,h="h"):e.substr(a,5).toUpperCase()==="上午/下午"?(c!=null&&(g.v=c.H>=12?"下午":"上午"),g.t="T",a+=5,h="h"):(g.t="t",++a),c==null&&g.t==="T")return"";i[i.length]=g,l=o;break;case"[":for(s=o;e.charAt(a++)!=="]"&&a<e.length;)s+=e.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Vte)){if(c==null&&(c=Al(t,n),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",no(e)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=o;++a<e.length&&(o=e.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(e.charAt(a)==" "||e.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<e.length&&"0123456789".indexOf(e.charAt(++a))>-1;)s+=e.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);i[i.length]={t:"t",v:o},++a;break}var m=0,x=0,y;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=h,l="h",m<1&&(m=1);break;case"s":(y=i[a].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1),m=4),m<3&&(m=3);case"d":case"y":case"e":l=i[a].t;break;case"M":l=i[a].t,m<2&&(m=2);break;case"m":l==="s"&&(i[a].t="M",m<2&&(m=2));break;case"X":break;case"Z":m<1&&i[a].v.match(/[Hh]/)&&(m=1),m<2&&i[a].v.match(/[Mm]/)&&(m=2),m<3&&i[a].v.match(/[Ss]/)&&(m=3)}var v;switch(m){case 0:break;case 1:case 2:case 3:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H),c.H>=24&&(c.H=0,++c.D,v=Al(c.D),v.u=c.u,v.S=c.S,v.M=c.M,v.H=c.H,c=v);break;case 4:switch(x){case 1:c.u=Math.round(c.u*10)/10;break;case 2:c.u=Math.round(c.u*100)/100;break;case 3:c.u=Math.round(c.u*1e3)/1e3;break}c.u>=1&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H),c.H>=24&&(c.H=0,++c.D,v=Al(c.D),v.u=c.u,v.S=c.S,v.M=c.M,v.H=c.H,c=v);break}var _="",b;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=OHe(i[a].t.charCodeAt(0),i[a].v,c,x),i[a].t="t";break;case"n":case"?":for(b=a+1;i[b]!=null&&((o=i[b].t)==="?"||o==="D"||(o===" "||o==="t")&&i[b+1]!=null&&(i[b+1].t==="?"||i[b+1].t==="t"&&i[b+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[b].v==="/"||i[b].v===" "&&i[b+1]!=null&&i[b+1].t=="?"));)i[a].v+=i[b].v,i[b]={v:"",t:";"},++b;_+=i[a].v,a=b-1;break;case"G":i[a].t="t",i[a].v=Vh(t,n);break}var w="",E,T;if(_.length>0){_.charCodeAt(0)==40?(E=t<0&&_.charCodeAt(0)===45?-t:t,T=Jl("n",_,E)):(E=t<0&&r>1?-t:t,T=Jl("n",_,E),E<0&&i[0]&&i[0].t=="t"&&(T=T.substr(1),i[0].v="-"+i[0].v)),b=T.length-1;var S=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){S=a;break}var A=i.length;if(S===i.length&&T.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(b>=i[a].v.length-1?(b-=i[a].v.length,i[a].v=T.substr(b+1,i[a].v.length)):b<0?i[a].v="":(i[a].v=T.substr(0,b+1),b=-1),i[a].t="t",A=a);b>=0&&A<i.length&&(i[A].v=T.substr(0,b+1)+i[A].v)}else if(S!==i.length&&T.indexOf("E")===-1){for(b=T.indexOf(".")-1,a=S;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(u=i[a].v.indexOf(".")>-1&&a===S?i[a].v.indexOf(".")-1:i[a].v.length-1,w=i[a].v.substr(u+1);u>=0;--u)b>=0&&(i[a].v.charAt(u)==="0"||i[a].v.charAt(u)==="#")&&(w=T.charAt(b--)+w);i[a].v=w,i[a].t="t",A=a}for(b>=0&&A<i.length&&(i[A].v=T.substr(0,b+1)+i[A].v),b=T.indexOf(".")+1,a=S;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==S)){for(u=i[a].v.indexOf(".")>-1&&a===S?i[a].v.indexOf(".")+1:0,w=i[a].v.substr(0,u);u<i[a].v.length;++u)b<T.length&&(w+=T.charAt(b++));i[a].v=w,i[a].t="t",A=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(E=r>1&&t<0&&a>0&&i[a-1].v==="-"?-t:t,i[a].v=Jl(i[a].t,i[a].v,E),i[a].t="t");var C="";for(a=0;a!==i.length;++a)i[a]!=null&&(C+=i[a].v);return C}var F7=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function O7(e,t){if(t==null)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0;break}return!1}function zHe(e,t){var n=BHe(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof t!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(typeof t=="number"&&!isFinite(t)&&(t=0),n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=t>0?n[0]:t<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var a=n[0].match(F7),o=n[1].match(F7);return O7(t,a)?[r,n[0]]:O7(t,o)?[r,n[1]]:[r,n[a!=null&&o!=null?2:1]]}return[r,s]}function Us(e,t,n){n==null&&(n={});var r="";switch(typeof e){case"string":e=="m/d/yy"&&n.dateNF?r=n.dateNF:r=e;break;case"number":e==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:st)[e],r==null&&(r=n.table&&n.table[A7[e]]||st[A7[e]]),r==null&&(r=SHe[e]||"General");break}if(Mb(r,0))return Vh(t,n);t instanceof Date&&(t=rr(t,n.date1904));var i=zHe(r,t);if(Mb(i[1]))return Vh(t,n);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else{if(t===""||t==null)return"";if(isNaN(t)&&i[1].indexOf("0")>-1)return"#NUM!";if(!isFinite(t)&&i[1].indexOf("0")>-1)return"#DIV/0!"}return UHe(i[1],t,n,i[0])}function HHe(e,t){if(typeof t!="number"){t=+t||-1;for(var n=0;n<392;++n){if(st[n]==null){t<0&&(t=n);continue}if(st[n]==e){t=n;break}}t<0&&(t=391)}return st[t]=e,t}function Wte(){st=wHe()}var VHe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Pb=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function WHe(e){var t=typeof e=="number"?st[e]:e;return t=t.replace(Pb,"(\\d+)"),Pb.lastIndex=0,new RegExp("^"+t+"$")}function jHe(e,t,n){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(t.match(Pb)||[]).forEach(function(f,h){var d=parseInt(n[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=d;break;case"d":s=d;break;case"h":a=d;break;case"s":l=d;break;case"m":a>=0?o=d:i=d;break}}),Pb.lastIndex=0,l>=0&&o==-1&&i>=0&&(o=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var GHe={"d.m":"d\\.m"};function oh(e,t){return HHe(GHe[e]||e,t)}var N7=function(){var e={};e.version="1.2.0";function t(){for(var E=0,T=new Array(256),S=0;S!=256;++S)E=S,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,T[S]=E;return typeof Int32Array<"u"?new Int32Array(T):T}var n=t();function r(E){var T=0,S=0,A=0,C=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(A=0;A!=256;++A)C[A]=E[A];for(A=0;A!=256;++A)for(S=E[A],T=256+A;T<4096;T+=256)S=C[T]=S>>>8^E[S&255];var F=[];for(A=1;A!=16;++A)F[A-1]=typeof Int32Array<"u"&&typeof C.subarray=="function"?C.subarray(A*256,A*256+256):C.slice(A*256,A*256+256);return F}var i=r(n),s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],f=i[6],h=i[7],d=i[8],p=i[9],g=i[10],m=i[11],x=i[12],y=i[13],v=i[14];function _(E,T){for(var S=T^-1,A=0,C=E.length;A<C;)S=S>>>8^n[(S^E.charCodeAt(A++))&255];return~S}function b(E,T){for(var S=T^-1,A=E.length-15,C=0;C<A;)S=v[E[C++]^S&255]^y[E[C++]^S>>8&255]^x[E[C++]^S>>16&255]^m[E[C++]^S>>>24]^g[E[C++]]^p[E[C++]]^d[E[C++]]^h[E[C++]]^f[E[C++]]^u[E[C++]]^c[E[C++]]^l[E[C++]]^o[E[C++]]^a[E[C++]]^s[E[C++]]^n[E[C++]];for(A+=15;C<A;)S=S>>>8^n[(S^E[C++])&255];return~S}function w(E,T){for(var S=T^-1,A=0,C=E.length,F=0,N=0;A<C;)F=E.charCodeAt(A++),F<128?S=S>>>8^n[(S^F)&255]:F<2048?(S=S>>>8^n[(S^(192|F>>6&31))&255],S=S>>>8^n[(S^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,N=E.charCodeAt(A++)&1023,S=S>>>8^n[(S^(240|F>>8&7))&255],S=S>>>8^n[(S^(128|F>>2&63))&255],S=S>>>8^n[(S^(128|N>>6&15|(F&3)<<4))&255],S=S>>>8^n[(S^(128|N&63))&255]):(S=S>>>8^n[(S^(224|F>>12&15))&255],S=S>>>8^n[(S^(128|F>>6&63))&255],S=S>>>8^n[(S^(128|F&63))&255]);return~S}return e.table=n,e.bstr=_,e.buf=b,e.str=w,e}(),Ft=function(){var t={};t.version="1.2.2";function n(R,W){for(var P=R.split("/"),B=W.split("/"),V=0,j=0,re=Math.min(P.length,B.length);V<re;++V){if(j=P[V].length-B[V].length)return j;if(P[V]!=B[V])return P[V]<B[V]?-1:1}return P.length-B.length}function r(R){if(R.charAt(R.length-1)=="/")return R.slice(0,-1).indexOf("/")===-1?R:r(R.slice(0,-1));var W=R.lastIndexOf("/");return W===-1?R:R.slice(0,W+1)}function i(R){if(R.charAt(R.length-1)=="/")return i(R.slice(0,-1));var W=R.lastIndexOf("/");return W===-1?R:R.slice(W+1)}function s(R,W){typeof W=="string"&&(W=new Date(W));var P=W.getHours();P=P<<6|W.getMinutes(),P=P<<5|W.getSeconds()>>>1,R.write_shift(2,P);var B=W.getFullYear()-1980;B=B<<4|W.getMonth()+1,B=B<<5|W.getDate(),R.write_shift(2,B)}function a(R){var W=R.read_shift(2)&65535,P=R.read_shift(2)&65535,B=new Date,V=P&31;P>>>=5;var j=P&15;P>>>=4,B.setMilliseconds(0),B.setFullYear(P+1980),B.setMonth(j-1),B.setDate(V);var re=W&31;W>>>=5;var ce=W&63;return W>>>=6,B.setHours(W),B.setMinutes(ce),B.setSeconds(re<<1),B}function o(R){qn(R,0);for(var W={},P=0;R.l<=R.length-4;){var B=R.read_shift(2),V=R.read_shift(2),j=R.l+V,re={};switch(B){case 21589:P=R.read_shift(1),P&1&&(re.mtime=R.read_shift(4)),V>5&&(P&2&&(re.atime=R.read_shift(4)),P&4&&(re.ctime=R.read_shift(4))),re.mtime&&(re.mt=new Date(re.mtime*1e3));break;case 1:{var ce=R.read_shift(4),ne=R.read_shift(4);re.usz=ne*Math.pow(2,32)+ce,ce=R.read_shift(4),ne=R.read_shift(4),re.csz=ne*Math.pow(2,32)+ce}break}R.l=j,W[B]=re}return W}var l;function c(){return l||(l=qHe)}function u(R,W){if(R[0]==80&&R[1]==75)return z$(R,W);if((R[0]|32)==109&&(R[1]|32)==105)return bre(R,W);if(R.length<512)throw new Error("CFB file size "+R.length+" < 512");var P=3,B=512,V=0,j=0,re=0,ce=0,ne=0,ie=[],se=R.slice(0,512);qn(se,0);var ke=f(se);switch(P=ke[0],P){case 3:B=512;break;case 4:B=4096;break;case 0:if(ke[1]==0)return z$(R,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+P)}B!==512&&(se=R.slice(0,B),qn(se,28));var Ie=R.slice(0,B);h(se,P);var We=se.read_shift(4,"i");if(P===3&&We!==0)throw new Error("# Directory Sectors: Expected 0 saw "+We);se.l+=4,re=se.read_shift(4,"i"),se.l+=4,se.chk("00100000","Mini Stream Cutoff Size: "),ce=se.read_shift(4,"i"),V=se.read_shift(4,"i"),ne=se.read_shift(4,"i"),j=se.read_shift(4,"i");for(var Ce=-1,Me=0;Me<109&&(Ce=se.read_shift(4,"i"),!(Ce<0));++Me)ie[Me]=Ce;var ut=d(R,B);m(ne,j,ut,B,ie);var hn=y(ut,re,ie,B);re<hn.length&&(hn[re].name="!Directory"),V>0&&ce!==N&&(hn[ce].name="!MiniFAT"),hn[ie[0]].name="!FAT",hn.fat_addrs=ie,hn.ssz=B;var yn={},Lr=[],lg=[],cg=[];v(re,hn,ut,Lr,V,yn,lg,ce),p(lg,cg,Lr),Lr.shift();var ug={FileIndex:lg,FullPaths:cg};return W&&W.raw&&(ug.raw={header:Ie,sectors:ut}),ug}function f(R){if(R[R.l]==80&&R[R.l+1]==75)return[0,0];R.chk(M,"Header Signature: "),R.l+=16;var W=R.read_shift(2,"u");return[R.read_shift(2,"u"),W]}function h(R,W){var P=9;switch(R.l+=2,P=R.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+P);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+P);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+P)}R.chk("0600","Mini Sector Shift: "),R.chk("000000000000","Reserved: ")}function d(R,W){for(var P=Math.ceil(R.length/W)-1,B=[],V=1;V<P;++V)B[V-1]=R.slice(V*W,(V+1)*W);return B[P-1]=R.slice(P*W),B}function p(R,W,P){for(var B=0,V=0,j=0,re=0,ce=0,ne=P.length,ie=[],se=[];B<ne;++B)ie[B]=se[B]=B,W[B]=P[B];for(;ce<se.length;++ce)B=se[ce],V=R[B].L,j=R[B].R,re=R[B].C,ie[B]===B&&(V!==-1&&ie[V]!==V&&(ie[B]=ie[V]),j!==-1&&ie[j]!==j&&(ie[B]=ie[j])),re!==-1&&(ie[re]=B),V!==-1&&B!=ie[B]&&(ie[V]=ie[B],se.lastIndexOf(V)<ce&&se.push(V)),j!==-1&&B!=ie[B]&&(ie[j]=ie[B],se.lastIndexOf(j)<ce&&se.push(j));for(B=1;B<ne;++B)ie[B]===B&&(j!==-1&&ie[j]!==j?ie[B]=ie[j]:V!==-1&&ie[V]!==V&&(ie[B]=ie[V]));for(B=1;B<ne;++B)if(R[B].type!==0){if(ce=B,ce!=ie[ce])do ce=ie[ce],W[B]=W[ce]+"/"+W[B];while(ce!==0&&ie[ce]!==-1&&ce!=ie[ce]);ie[B]=-1}for(W[0]+="/",B=1;B<ne;++B)R[B].type!==2&&(W[B]+="/")}function g(R,W,P){for(var B=R.start,V=R.size,j=[],re=B;P&&V>0&&re>=0;)j.push(W.slice(re*F,re*F+F)),V-=F,re=$f(P,re*4);return j.length===0?Hn(0):jc(j).slice(0,R.size)}function m(R,W,P,B,V){var j=N;if(R===N){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(R!==-1){var re=P[R],ce=(B>>>2)-1;if(!re)return;for(var ne=0;ne<ce&&(j=$f(re,ne*4))!==N;++ne)V.push(j);W>=1&&m($f(re,B-4),W-1,P,B,V)}}function x(R,W,P,B,V){var j=[],re=[];V||(V=[]);var ce=B-1,ne=0,ie=0;for(ne=W;ne>=0;){V[ne]=!0,j[j.length]=ne,re.push(R[ne]);var se=P[Math.floor(ne*4/B)];if(ie=ne*4&ce,B<4+ie)throw new Error("FAT boundary crossed: "+ne+" 4 "+B);if(!R[se])break;ne=$f(R[se],ie)}return{nodes:j,data:B7([re])}}function y(R,W,P,B){var V=R.length,j=[],re=[],ce=[],ne=[],ie=B-1,se=0,ke=0,Ie=0,We=0;for(se=0;se<V;++se)if(ce=[],Ie=se+W,Ie>=V&&(Ie-=V),!re[Ie]){ne=[];var Ce=[];for(ke=Ie;ke>=0;){Ce[ke]=!0,re[ke]=!0,ce[ce.length]=ke,ne.push(R[ke]);var Me=P[Math.floor(ke*4/B)];if(We=ke*4&ie,B<4+We)throw new Error("FAT boundary crossed: "+ke+" 4 "+B);if(!R[Me]||(ke=$f(R[Me],We),Ce[ke]))break}j[Ie]={nodes:ce,data:B7([ne])}}return j}function v(R,W,P,B,V,j,re,ce){for(var ne=0,ie=B.length?2:0,se=W[R].data,ke=0,Ie=0,We;ke<se.length;ke+=128){var Ce=se.slice(ke,ke+128);qn(Ce,64),Ie=Ce.read_shift(2),We=A$(Ce,0,Ie-ie),B.push(We);var Me={name:We,type:Ce.read_shift(1),color:Ce.read_shift(1),L:Ce.read_shift(4,"i"),R:Ce.read_shift(4,"i"),C:Ce.read_shift(4,"i"),clsid:Ce.read_shift(16),state:Ce.read_shift(4,"i"),start:0,size:0},ut=Ce.read_shift(2)+Ce.read_shift(2)+Ce.read_shift(2)+Ce.read_shift(2);ut!==0&&(Me.ct=_(Ce,Ce.l-8));var hn=Ce.read_shift(2)+Ce.read_shift(2)+Ce.read_shift(2)+Ce.read_shift(2);hn!==0&&(Me.mt=_(Ce,Ce.l-8)),Me.start=Ce.read_shift(4,"i"),Me.size=Ce.read_shift(4,"i"),Me.size<0&&Me.start<0&&(Me.size=Me.type=0,Me.start=N,Me.name=""),Me.type===5?(ne=Me.start,V>0&&ne!==N&&(W[ne].name="!StreamData")):Me.size>=4096?(Me.storage="fat",W[Me.start]===void 0&&(W[Me.start]=x(P,Me.start,W.fat_addrs,W.ssz)),W[Me.start].name=Me.name,Me.content=W[Me.start].data.slice(0,Me.size)):(Me.storage="minifat",Me.size<0?Me.size=0:ne!==N&&Me.start!==N&&W[ne]&&(Me.content=g(Me,W[ne].data,(W[ce]||{}).data))),Me.content&&qn(Me.content,0),j[We]=Me,re.push(Me)}}function _(R,W){return new Date((bs(R,W+4)/1e7*Math.pow(2,32)+bs(R,W)/1e7-11644473600)*1e3)}function b(R,W){return c(),u(l.readFileSync(R),W)}function w(R,W){var P=W&&W.type;switch(P||_t&&Buffer.isBuffer(R)&&(P="buffer"),P||"base64"){case"file":return b(R,W);case"base64":return u(_s(Bs(R)),W);case"binary":return u(_s(R),W)}return u(R,W)}function E(R,W){var P=W||{},B=P.root||"Root Entry";if(R.FullPaths||(R.FullPaths=[]),R.FileIndex||(R.FileIndex=[]),R.FullPaths.length!==R.FileIndex.length)throw new Error("inconsistent CFB structure");R.FullPaths.length===0&&(R.FullPaths[0]=B+"/",R.FileIndex[0]={name:B,type:5}),P.CLSID&&(R.FileIndex[0].clsid=P.CLSID),T(R)}function T(R){var W="Sh33tJ5";if(!Ft.find(R,"/"+W)){var P=Hn(4);P[0]=55,P[1]=P[3]=50,P[2]=54,R.FileIndex.push({name:W,type:2,content:P,size:4,L:69,R:69,C:69}),R.FullPaths.push(R.FullPaths[0]+W),S(R)}}function S(R,W){E(R);for(var P=!1,B=!1,V=R.FullPaths.length-1;V>=0;--V){var j=R.FileIndex[V];switch(j.type){case 0:B?P=!0:(R.FileIndex.pop(),R.FullPaths.pop());break;case 1:case 2:case 5:B=!0,isNaN(j.R*j.L*j.C)&&(P=!0),j.R>-1&&j.L>-1&&j.R==j.L&&(P=!0);break;default:P=!0;break}}if(!(!P&&!W)){var re=new Date(1987,1,19),ce=0,ne=Object.create?Object.create(null):{},ie=[];for(V=0;V<R.FullPaths.length;++V)ne[R.FullPaths[V]]=!0,R.FileIndex[V].type!==0&&ie.push([R.FullPaths[V],R.FileIndex[V]]);for(V=0;V<ie.length;++V){var se=r(ie[V][0]);for(B=ne[se];!B;){for(;r(se)&&!ne[r(se)];)se=r(se);ie.push([se,{name:i(se).replace("/",""),type:1,clsid:D,ct:re,mt:re,content:null}]),ne[se]=!0,se=r(ie[V][0]),B=ne[se]}}for(ie.sort(function(We,Ce){return n(We[0],Ce[0])}),R.FullPaths=[],R.FileIndex=[],V=0;V<ie.length;++V)R.FullPaths[V]=ie[V][0],R.FileIndex[V]=ie[V][1];for(V=0;V<ie.length;++V){var ke=R.FileIndex[V],Ie=R.FullPaths[V];if(ke.name=i(Ie).replace("/",""),ke.L=ke.R=ke.C=-(ke.color=1),ke.size=ke.content?ke.content.length:0,ke.start=0,ke.clsid=ke.clsid||D,V===0)ke.C=ie.length>1?1:-1,ke.size=0,ke.type=5;else if(Ie.slice(-1)=="/"){for(ce=V+1;ce<ie.length&&r(R.FullPaths[ce])!=Ie;++ce);for(ke.C=ce>=ie.length?-1:ce,ce=V+1;ce<ie.length&&r(R.FullPaths[ce])!=r(Ie);++ce);ke.R=ce>=ie.length?-1:ce,ke.type=1}else r(R.FullPaths[V+1]||"")==r(Ie)&&(ke.R=V+1),ke.type=2}}}function A(R,W){var P=W||{};if(P.fileType=="mad")return Ere(R,P);switch(S(R),P.fileType){case"zip":return gre(R,P)}var B=function(We){for(var Ce=0,Me=0,ut=0;ut<We.FileIndex.length;++ut){var hn=We.FileIndex[ut];if(hn.content){var yn=hn.content.length;yn>0&&(yn<4096?Ce+=yn+63>>6:Me+=yn+511>>9)}}for(var Lr=We.FullPaths.length+3>>2,lg=Ce+7>>3,cg=Ce+127>>7,ug=lg+Me+Lr+cg,cf=ug+127>>7,WS=cf<=109?0:Math.ceil((cf-109)/127);ug+cf+WS+127>>7>cf;)WS=++cf<=109?0:Math.ceil((cf-109)/127);var dl=[1,WS,cf,cg,Lr,Me,Ce,0];return We.FileIndex[0].size=Ce<<6,dl[7]=(We.FileIndex[0].start=dl[0]+dl[1]+dl[2]+dl[3]+dl[4]+dl[5])+(dl[6]+7>>3),dl}(R),V=Hn(B[7]<<9),j=0,re=0;{for(j=0;j<8;++j)V.write_shift(1,O[j]);for(j=0;j<8;++j)V.write_shift(2,0);for(V.write_shift(2,62),V.write_shift(2,3),V.write_shift(2,65534),V.write_shift(2,9),V.write_shift(2,6),j=0;j<3;++j)V.write_shift(2,0);for(V.write_shift(4,0),V.write_shift(4,B[2]),V.write_shift(4,B[0]+B[1]+B[2]+B[3]-1),V.write_shift(4,0),V.write_shift(4,4096),V.write_shift(4,B[3]?B[0]+B[1]+B[2]-1:N),V.write_shift(4,B[3]),V.write_shift(-4,B[1]?B[0]-1:N),V.write_shift(4,B[1]),j=0;j<109;++j)V.write_shift(-4,j<B[2]?B[1]+j:-1)}if(B[1])for(re=0;re<B[1];++re){for(;j<236+re*127;++j)V.write_shift(-4,j<B[2]?B[1]+j:-1);V.write_shift(-4,re===B[1]-1?N:re+1)}var ce=function(We){for(re+=We;j<re-1;++j)V.write_shift(-4,j+1);We&&(++j,V.write_shift(-4,N))};for(re=j=0,re+=B[1];j<re;++j)V.write_shift(-4,I.DIFSECT);for(re+=B[2];j<re;++j)V.write_shift(-4,I.FATSECT);ce(B[3]),ce(B[4]);for(var ne=0,ie=0,se=R.FileIndex[0];ne<R.FileIndex.length;++ne)se=R.FileIndex[ne],se.content&&(ie=se.content.length,!(ie<4096)&&(se.start=re,ce(ie+511>>9)));for(ce(B[6]+7>>3);V.l&511;)V.write_shift(-4,I.ENDOFCHAIN);for(re=j=0,ne=0;ne<R.FileIndex.length;++ne)se=R.FileIndex[ne],se.content&&(ie=se.content.length,!(!ie||ie>=4096)&&(se.start=re,ce(ie+63>>6)));for(;V.l&511;)V.write_shift(-4,I.ENDOFCHAIN);for(j=0;j<B[4]<<2;++j){var ke=R.FullPaths[j];if(!ke||ke.length===0){for(ne=0;ne<17;++ne)V.write_shift(4,0);for(ne=0;ne<3;++ne)V.write_shift(4,-1);for(ne=0;ne<12;++ne)V.write_shift(4,0);continue}se=R.FileIndex[j],j===0&&(se.start=se.size?se.start-1:N);var Ie=j===0&&P.root||se.name;if(Ie.length>31&&(console.error("Name "+Ie+" will be truncated to "+Ie.slice(0,31)),Ie=Ie.slice(0,31)),ie=2*(Ie.length+1),V.write_shift(64,Ie,"utf16le"),V.write_shift(2,ie),V.write_shift(1,se.type),V.write_shift(1,se.color),V.write_shift(-4,se.L),V.write_shift(-4,se.R),V.write_shift(-4,se.C),se.clsid)V.write_shift(16,se.clsid,"hex");else for(ne=0;ne<4;++ne)V.write_shift(4,0);V.write_shift(4,se.state||0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,0),V.write_shift(4,se.start),V.write_shift(4,se.size),V.write_shift(4,0)}for(j=1;j<R.FileIndex.length;++j)if(se=R.FileIndex[j],se.size>=4096)if(V.l=se.start+1<<9,_t&&Buffer.isBuffer(se.content))se.content.copy(V,V.l,0,se.size),V.l+=se.size+511&-512;else{for(ne=0;ne<se.size;++ne)V.write_shift(1,se.content[ne]);for(;ne&511;++ne)V.write_shift(1,0)}for(j=1;j<R.FileIndex.length;++j)if(se=R.FileIndex[j],se.size>0&&se.size<4096)if(_t&&Buffer.isBuffer(se.content))se.content.copy(V,V.l,0,se.size),V.l+=se.size+63&-64;else{for(ne=0;ne<se.size;++ne)V.write_shift(1,se.content[ne]);for(;ne&63;++ne)V.write_shift(1,0)}if(_t)V.l=V.length;else for(;V.l<V.length;)V.write_shift(1,0);return V}function C(R,W){var P=R.FullPaths.map(function(ne){return ne.toUpperCase()}),B=P.map(function(ne){var ie=ne.split("/");return ie[ie.length-(ne.slice(-1)=="/"?2:1)]}),V=!1;W.charCodeAt(0)===47?(V=!0,W=P[0].slice(0,-1)+W):V=W.indexOf("/")!==-1;var j=W.toUpperCase(),re=V===!0?P.indexOf(j):B.indexOf(j);if(re!==-1)return R.FileIndex[re];var ce=!j.match(mm);for(j=j.replace(rs,""),ce&&(j=j.replace(mm,"!")),re=0;re<P.length;++re)if((ce?P[re].replace(mm,"!"):P[re]).replace(rs,"")==j||(ce?B[re].replace(mm,"!"):B[re]).replace(rs,"")==j)return R.FileIndex[re];return null}var F=64,N=-2,M="d0cf11e0a1b11ae1",O=[208,207,17,224,161,177,26,225],D="00000000000000000000000000000000",I={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:N,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:D,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function U(R,W,P){c();var B=A(R,P);l.writeFileSync(W,B)}function Y(R){for(var W=new Array(R.length),P=0;P<R.length;++P)W[P]=String.fromCharCode(R[P]);return W.join("")}function X(R,W){var P=A(R,W);switch(W&&W.type||"buffer"){case"file":return c(),l.writeFileSync(W.filename,P),P;case"binary":return typeof P=="string"?P:Y(P);case"base64":return E7(typeof P=="string"?P:Y(P));case"buffer":if(_t)return Buffer.isBuffer(P)?P:of(P);case"array":return typeof P=="string"?_s(P):P}return P}var de;function le(R){try{var W=R.InflateRaw,P=new W;if(P._processChunk(new Uint8Array([3,0]),P._finishFlushFlag),P.bytesRead)de=R;else throw new Error("zlib does not expose bytesRead")}catch(B){console.error("cannot use native zlib: "+(B.message||B))}}function ye(R,W){if(!de)return og(R,W);var P=de.InflateRaw,B=new P,V=B._processChunk(R.slice(R.l),B._finishFlushFlag);return R.l+=B.bytesRead,V}function ve(R){return de?de.deflateRawSync(R):Zt(R)}var Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Xe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function z(R){var W=(R<<1|R<<11)&139536|(R<<5|R<<15)&558144;return(W>>16|W>>8|W)&255}for(var q=typeof Uint8Array<"u",G=q?new Uint8Array(256):[],H=0;H<256;++H)G[H]=z(H);function J(R,W){var P=G[R&255];return W<=8?P>>>8-W:(P=P<<8|G[R>>8&255],W<=16?P>>>16-W:(P=P<<8|G[R>>16&255],P>>>24-W))}function k(R,W){var P=W&7,B=W>>>3;return(R[B]|(P<=6?0:R[B+1]<<8))>>>P&3}function L(R,W){var P=W&7,B=W>>>3;return(R[B]|(P<=5?0:R[B+1]<<8))>>>P&7}function K(R,W){var P=W&7,B=W>>>3;return(R[B]|(P<=4?0:R[B+1]<<8))>>>P&15}function Z(R,W){var P=W&7,B=W>>>3;return(R[B]|(P<=3?0:R[B+1]<<8))>>>P&31}function ee(R,W){var P=W&7,B=W>>>3;return(R[B]|(P<=1?0:R[B+1]<<8))>>>P&127}function te(R,W,P){var B=W&7,V=W>>>3,j=(1<<P)-1,re=R[V]>>>B;return P<8-B||(re|=R[V+1]<<8-B,P<16-B)||(re|=R[V+2]<<16-B,P<24-B)||(re|=R[V+3]<<24-B),re&j}function he(R,W,P){var B=W&7,V=W>>>3;return B<=5?R[V]|=(P&7)<<B:(R[V]|=P<<B&255,R[V+1]=(P&7)>>8-B),W+3}function xe(R,W,P){var B=W&7,V=W>>>3;return P=(P&1)<<B,R[V]|=P,W+1}function _e(R,W,P){var B=W&7,V=W>>>3;return P<<=B,R[V]|=P&255,P>>>=8,R[V+1]=P,W+8}function ge(R,W,P){var B=W&7,V=W>>>3;return P<<=B,R[V]|=P&255,P>>>=8,R[V+1]=P&255,R[V+2]=P>>>8,W+16}function me(R,W){var P=R.length,B=2*P>W?2*P:W+5,V=0;if(P>=W)return R;if(_t){var j=w7(B);if(R.copy)R.copy(j);else for(;V<R.length;++V)j[V]=R[V];return j}else if(q){var re=new Uint8Array(B);if(re.set)re.set(R);else for(;V<P;++V)re[V]=R[V];return re}return R.length=B,R}function be(R){for(var W=new Array(R),P=0;P<R;++P)W[P]=0;return W}function ae(R,W,P){var B=1,V=0,j=0,re=0,ce=0,ne=R.length,ie=q?new Uint16Array(32):be(32);for(j=0;j<32;++j)ie[j]=0;for(j=ne;j<P;++j)R[j]=0;ne=R.length;var se=q?new Uint16Array(ne):be(ne);for(j=0;j<ne;++j)ie[V=R[j]]++,B<V&&(B=V),se[j]=0;for(ie[0]=0,j=1;j<=B;++j)ie[j+16]=ce=ce+ie[j-1]<<1;for(j=0;j<ne;++j)ce=R[j],ce!=0&&(se[j]=ie[ce+16]++);var ke=0;for(j=0;j<ne;++j)if(ke=R[j],ke!=0)for(ce=J(se[j],B)>>B-ke,re=(1<<B+4-ke)-1;re>=0;--re)W[ce|re<<ke]=ke&15|j<<4;return B}var Ge=q?new Uint16Array(512):be(512),et=q?new Uint16Array(32):be(32);if(!q){for(var Qe=0;Qe<512;++Qe)Ge[Qe]=0;for(Qe=0;Qe<32;++Qe)et[Qe]=0}(function(){for(var R=[],W=0;W<32;W++)R.push(5);ae(R,et,32);var P=[];for(W=0;W<=143;W++)P.push(8);for(;W<=255;W++)P.push(9);for(;W<=279;W++)P.push(7);for(;W<=287;W++)P.push(8);ae(P,Ge,288)})();var dt=function(){for(var W=q?new Uint8Array(32768):[],P=0,B=0;P<Xe.length-1;++P)for(;B<Xe[P+1];++B)W[B]=P;for(;B<32768;++B)W[B]=29;var V=q?new Uint8Array(259):[];for(P=0,B=0;P<Ne.length-1;++P)for(;B<Ne[P+1];++B)V[B]=P;function j(ce,ne){for(var ie=0;ie<ce.length;){var se=Math.min(65535,ce.length-ie),ke=ie+se==ce.length;for(ne.write_shift(1,+ke),ne.write_shift(2,se),ne.write_shift(2,~se&65535);se-- >0;)ne[ne.l++]=ce[ie++]}return ne.l}function re(ce,ne){for(var ie=0,se=0,ke=q?new Uint16Array(32768):[];se<ce.length;){var Ie=Math.min(65535,ce.length-se);if(Ie<10){for(ie=he(ne,ie,+(se+Ie==ce.length)),ie&7&&(ie+=8-(ie&7)),ne.l=ie/8|0,ne.write_shift(2,Ie),ne.write_shift(2,~Ie&65535);Ie-- >0;)ne[ne.l++]=ce[se++];ie=ne.l*8;continue}ie=he(ne,ie,+(se+Ie==ce.length)+2);for(var We=0;Ie-- >0;){var Ce=ce[se];We=(We<<5^Ce)&32767;var Me=-1,ut=0;if((Me=ke[We])&&(Me|=se&-32768,Me>se&&(Me-=32768),Me<se))for(;ce[Me+ut]==ce[se+ut]&&ut<250;)++ut;if(ut>2){Ce=V[ut],Ce<=22?ie=_e(ne,ie,G[Ce+1]>>1)-1:(_e(ne,ie,3),ie+=5,_e(ne,ie,G[Ce-23]>>5),ie+=3);var hn=Ce<8?0:Ce-4>>2;hn>0&&(ge(ne,ie,ut-Ne[Ce]),ie+=hn),Ce=W[se-Me],ie=_e(ne,ie,G[Ce]>>3),ie-=3;var yn=Ce<4?0:Ce-2>>1;yn>0&&(ge(ne,ie,se-Me-Xe[Ce]),ie+=yn);for(var Lr=0;Lr<ut;++Lr)ke[We]=se&32767,We=(We<<5^ce[se])&32767,++se;Ie-=ut-1}else Ce<=143?Ce=Ce+48:ie=xe(ne,ie,1),ie=_e(ne,ie,G[Ce]),ke[We]=se&32767,++se}ie=_e(ne,ie,0)-1}return ne.l=(ie+7)/8|0,ne.l}return function(ne,ie){return ne.length<8?j(ne,ie):re(ne,ie)}}();function Zt(R){var W=Hn(50+Math.floor(R.length*1.1)),P=dt(R,W);return W.slice(0,P)}var De=q?new Uint16Array(32768):be(32768),ct=q?new Uint16Array(32768):be(32768),Dt=q?new Uint16Array(128):be(128),an=1,Vs=1;function On(R,W){var P=Z(R,W)+257;W+=5;var B=Z(R,W)+1;W+=5;var V=K(R,W)+4;W+=4;for(var j=0,re=q?new Uint8Array(19):be(19),ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ne=1,ie=q?new Uint8Array(8):be(8),se=q?new Uint8Array(8):be(8),ke=re.length,Ie=0;Ie<V;++Ie)re[Ee[Ie]]=j=L(R,W),ne<j&&(ne=j),ie[j]++,W+=3;var We=0;for(ie[0]=0,Ie=1;Ie<=ne;++Ie)se[Ie]=We=We+ie[Ie-1]<<1;for(Ie=0;Ie<ke;++Ie)(We=re[Ie])!=0&&(ce[Ie]=se[We]++);var Ce=0;for(Ie=0;Ie<ke;++Ie)if(Ce=re[Ie],Ce!=0){We=G[ce[Ie]]>>8-Ce;for(var Me=(1<<7-Ce)-1;Me>=0;--Me)Dt[We|Me<<Ce]=Ce&7|Ie<<3}var ut=[];for(ne=1;ut.length<P+B;)switch(We=Dt[ee(R,W)],W+=We&7,We>>>=3){case 16:for(j=3+k(R,W),W+=2,We=ut[ut.length-1];j-- >0;)ut.push(We);break;case 17:for(j=3+L(R,W),W+=3;j-- >0;)ut.push(0);break;case 18:for(j=11+ee(R,W),W+=7;j-- >0;)ut.push(0);break;default:ut.push(We),ne<We&&(ne=We);break}var hn=ut.slice(0,P),yn=ut.slice(P);for(Ie=P;Ie<286;++Ie)hn[Ie]=0;for(Ie=B;Ie<30;++Ie)yn[Ie]=0;return an=ae(hn,De,286),Vs=ae(yn,ct,30),W}function di(R,W){if(R[0]==3&&!(R[1]&3))return[Mu(W),2];for(var P=0,B=0,V=w7(W||1<<18),j=0,re=V.length>>>0,ce=0,ne=0;(B&1)==0;){if(B=L(R,P),P+=3,B>>>1)B>>1==1?(ce=9,ne=5):(P=On(R,P),ce=an,ne=Vs);else{P&7&&(P+=8-(P&7));var ie=R[P>>>3]|R[(P>>>3)+1]<<8;if(P+=32,ie>0)for(!W&&re<j+ie&&(V=me(V,j+ie),re=V.length);ie-- >0;)V[j++]=R[P>>>3],P+=8;continue}for(;;){!W&&re<j+32767&&(V=me(V,j+32767),re=V.length);var se=te(R,P,ce),ke=B>>>1==1?Ge[se]:De[se];if(P+=ke&15,ke>>>=4,(ke>>>8&255)===0)V[j++]=ke;else{if(ke==256)break;ke-=257;var Ie=ke<8?0:ke-4>>2;Ie>5&&(Ie=0);var We=j+Ne[ke];Ie>0&&(We+=te(R,P,Ie),P+=Ie),se=te(R,P,ne),ke=B>>>1==1?et[se]:ct[se],P+=ke&15,ke>>>=4;var Ce=ke<4?0:ke-2>>1,Me=Xe[ke];for(Ce>0&&(Me+=te(R,P,Ce),P+=Ce),!W&&re<We&&(V=me(V,We+100),re=V.length);j<We;)V[j]=V[j-Me],++j}}}return W?[V,P+7>>>3]:[V.slice(0,j),P+7>>>3]}function og(R,W){var P=R.slice(R.l||0),B=di(P,W);return R.l+=B[1],B[0]}function U$(R,W){if(R)typeof console<"u"&&console.error(W);else throw new Error(W)}function z$(R,W){var P=R;qn(P,0);var B=[],V=[],j={FileIndex:B,FullPaths:V};E(j,{root:W.root});for(var re=P.length-4;(P[re]!=80||P[re+1]!=75||P[re+2]!=5||P[re+3]!=6)&&re>=0;)--re;P.l=re+4,P.l+=4;var ce=P.read_shift(2);P.l+=6;var ne=P.read_shift(4);for(P.l=ne,re=0;re<ce;++re){P.l+=20;var ie=P.read_shift(4),se=P.read_shift(4),ke=P.read_shift(2),Ie=P.read_shift(2),We=P.read_shift(2);P.l+=8;var Ce=P.read_shift(4),Me=o(P.slice(P.l+ke,P.l+ke+Ie));P.l+=ke+Ie+We;var ut=P.l;P.l=Ce+4,Me&&Me[1]&&((Me[1]||{}).usz&&(se=Me[1].usz),(Me[1]||{}).csz&&(ie=Me[1].csz)),pre(P,ie,se,j,Me),P.l=ut}return j}function pre(R,W,P,B,V){R.l+=2;var j=R.read_shift(2),re=R.read_shift(2),ce=a(R);if(j&8257)throw new Error("Unsupported ZIP encryption");for(var ne=R.read_shift(4),ie=R.read_shift(4),se=R.read_shift(4),ke=R.read_shift(2),Ie=R.read_shift(2),We="",Ce=0;Ce<ke;++Ce)We+=String.fromCharCode(R[R.l++]);if(Ie){var Me=o(R.slice(R.l,R.l+Ie));(Me[21589]||{}).mt&&(ce=Me[21589].mt),(Me[1]||{}).usz&&(se=Me[1].usz),(Me[1]||{}).csz&&(ie=Me[1].csz),V&&((V[21589]||{}).mt&&(ce=V[21589].mt),(V[1]||{}).usz&&(se=V[1].usz),(V[1]||{}).csz&&(ie=V[1].csz))}R.l+=Ie;var ut=R.slice(R.l,R.l+ie);switch(re){case 8:ut=ye(R,se);break;case 0:R.l+=ie;break;default:throw new Error("Unsupported ZIP Compression method "+re)}var hn=!1;j&8&&(ne=R.read_shift(4),ne==134695760&&(ne=R.read_shift(4),hn=!0),ie=R.read_shift(4),se=R.read_shift(4)),ie!=W&&U$(hn,"Bad compressed size: "+W+" != "+ie),se!=P&&U$(hn,"Bad uncompressed size: "+P+" != "+se),VS(B,We,ut,{unsafe:!0,mt:ce})}function gre(R,W){var P=W||{},B=[],V=[],j=Hn(1),re=P.compression?8:0,ce=0,ne=0,ie=0,se=0,ke=0,Ie=R.FullPaths[0],We=Ie,Ce=R.FileIndex[0],Me=[],ut=0;for(ne=1;ne<R.FullPaths.length;++ne)if(We=R.FullPaths[ne].slice(Ie.length),Ce=R.FileIndex[ne],!(!Ce.size||!Ce.content||Array.isArray(Ce.content)&&Ce.content.length==0||We=="Sh33tJ5")){var hn=se,yn=Hn(We.length);for(ie=0;ie<We.length;++ie)yn.write_shift(1,We.charCodeAt(ie)&127);yn=yn.slice(0,yn.l),Me[ke]=typeof Ce.content=="string"?N7.bstr(Ce.content,0):N7.buf(Ce.content,0);var Lr=typeof Ce.content=="string"?_s(Ce.content):Ce.content;re==8&&(Lr=ve(Lr)),j=Hn(30),j.write_shift(4,67324752),j.write_shift(2,20),j.write_shift(2,ce),j.write_shift(2,re),Ce.mt?s(j,Ce.mt):j.write_shift(4,0),j.write_shift(-4,Me[ke]),j.write_shift(4,Lr.length),j.write_shift(4,Ce.content.length),j.write_shift(2,yn.length),j.write_shift(2,0),se+=j.length,B.push(j),se+=yn.length,B.push(yn),se+=Lr.length,B.push(Lr),j=Hn(46),j.write_shift(4,33639248),j.write_shift(2,0),j.write_shift(2,20),j.write_shift(2,ce),j.write_shift(2,re),j.write_shift(4,0),j.write_shift(-4,Me[ke]),j.write_shift(4,Lr.length),j.write_shift(4,Ce.content.length),j.write_shift(2,yn.length),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(4,0),j.write_shift(4,hn),ut+=j.l,V.push(j),ut+=yn.length,V.push(yn),++ke}return j=Hn(22),j.write_shift(4,101010256),j.write_shift(2,0),j.write_shift(2,0),j.write_shift(2,ke),j.write_shift(2,ke),j.write_shift(4,ut),j.write_shift(4,se),j.write_shift(2,0),jc([jc(B),jc(V),j])}var xv={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function mre(R,W){if(R.ctype)return R.ctype;var P=R.name||"",B=P.match(/\.([^\.]+)$/);return B&&xv[B[1]]||W&&(B=(P=W).match(/[\.\\]([^\.\\])+$/),B&&xv[B[1]])?xv[B[1]]:"application/octet-stream"}function xre(R){for(var W=E7(R),P=[],B=0;B<W.length;B+=76)P.push(W.slice(B,B+76));return P.join(`\r
`)+`\r
`}function vre(R){var W=R.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ie){var se=ie.charCodeAt(0).toString(16).toUpperCase();return"="+(se.length==1?"0"+se:se)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var P=[],B=W.split(`\r
`),V=0;V<B.length;++V){var j=B[V];if(j.length==0){P.push("");continue}for(var re=0;re<j.length;){var ce=76,ne=j.slice(re,re+ce);ne.charAt(ce-1)=="="?ce--:ne.charAt(ce-2)=="="?ce-=2:ne.charAt(ce-3)=="="&&(ce-=3),ne=j.slice(re,re+ce),re+=ce,re<j.length&&(ne+="="),P.push(ne)}}return P.join(`\r
`)}function yre(R){for(var W=[],P=0;P<R.length;++P){for(var B=R[P];P<=R.length&&B.charAt(B.length-1)=="=";)B=B.slice(0,B.length-1)+R[++P];W.push(B)}for(var V=0;V<W.length;++V)W[V]=W[V].replace(/[=][0-9A-Fa-f]{2}/g,function(j){return String.fromCharCode(parseInt(j.slice(1),16))});return _s(W.join(`\r
`))}function _re(R,W,P){for(var B="",V="",j="",re,ce=0;ce<10;++ce){var ne=W[ce];if(!ne||ne.match(/^\s*$/))break;var ie=ne.match(/^([^:]*?):\s*([^\s].*)$/);if(ie)switch(ie[1].toLowerCase()){case"content-location":B=ie[2].trim();break;case"content-type":j=ie[2].trim();break;case"content-transfer-encoding":V=ie[2].trim();break}}switch(++ce,V.toLowerCase()){case"base64":re=_s(Bs(W.slice(ce).join("")));break;case"quoted-printable":re=yre(W.slice(ce));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+V)}var se=VS(R,B.slice(P.length),re,{unsafe:!0});j&&(se.ctype=j)}function bre(R,W){if(Y(R.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var P=W&&W.root||"",B=(_t&&Buffer.isBuffer(R)?R.toString("binary"):Y(R)).split(`\r
`),V=0,j="";for(V=0;V<B.length;++V)if(j=B[V],!!/^Content-Location:/i.test(j)&&(j=j.slice(j.indexOf("file")),P||(P=j.slice(0,j.lastIndexOf("/")+1)),j.slice(0,P.length)!=P))for(;P.length>0&&(P=P.slice(0,P.length-1),P=P.slice(0,P.lastIndexOf("/")+1),j.slice(0,P.length)!=P););var re=(B[1]||"").match(/boundary="(.*?)"/);if(!re)throw new Error("MAD cannot find boundary");var ce="--"+(re[1]||""),ne=[],ie=[],se={FileIndex:ne,FullPaths:ie};E(se);var ke,Ie=0;for(V=0;V<B.length;++V){var We=B[V];We!==ce&&We!==ce+"--"||(Ie++&&_re(se,B.slice(ke,V),P),ke=V)}return se}function Ere(R,W){var P=W||{},B=P.boundary||"SheetJS";B="------="+B;for(var V=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+B.slice(2)+'"',"","",""],j=R.FullPaths[0],re=j,ce=R.FileIndex[0],ne=1;ne<R.FullPaths.length;++ne)if(re=R.FullPaths[ne].slice(j.length),ce=R.FileIndex[ne],!(!ce.size||!ce.content||re=="Sh33tJ5")){re=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ut){return"_x"+ut.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ut){return"_u"+ut.charCodeAt(0).toString(16)+"_"});for(var ie=ce.content,se=_t&&Buffer.isBuffer(ie)?ie.toString("binary"):Y(ie),ke=0,Ie=Math.min(1024,se.length),We=0,Ce=0;Ce<=Ie;++Ce)(We=se.charCodeAt(Ce))>=32&&We<128&&++ke;var Me=ke>=Ie*4/5;V.push(B),V.push("Content-Location: "+(P.root||"file:///C:/SheetJS/")+re),V.push("Content-Transfer-Encoding: "+(Me?"quoted-printable":"base64")),V.push("Content-Type: "+mre(ce,re)),V.push(""),V.push(Me?vre(se):xre(se))}return V.push(B+`--\r
`),V.join(`\r
`)}function wre(R){var W={};return E(W,R),W}function VS(R,W,P,B){var V=B&&B.unsafe;V||E(R);var j=!V&&Ft.find(R,W);if(!j){var re=R.FullPaths[0];W.slice(0,re.length)==re?re=W:(re.slice(-1)!="/"&&(re+="/"),re=(re+W).replace("//","/")),j={name:i(W),type:2},R.FileIndex.push(j),R.FullPaths.push(re),V||Ft.utils.cfb_gc(R)}return j.content=P,j.size=P?P.length:0,B&&(B.CLSID&&(j.clsid=B.CLSID),B.mt&&(j.mt=B.mt),B.ct&&(j.ct=B.ct)),j}function Sre(R,W){E(R);var P=Ft.find(R,W);if(P){for(var B=0;B<R.FileIndex.length;++B)if(R.FileIndex[B]==P)return R.FileIndex.splice(B,1),R.FullPaths.splice(B,1),!0}return!1}function Tre(R,W,P){E(R);var B=Ft.find(R,W);if(B){for(var V=0;V<R.FileIndex.length;++V)if(R.FileIndex[V]==B)return R.FileIndex[V].name=i(P),R.FullPaths[V]=P,!0}return!1}function Are(R){S(R,!0)}return t.find=C,t.read=w,t.parse=u,t.write=X,t.writeFile=U,t.utils={cfb_new:wre,cfb_add:VS,cfb_del:Sre,cfb_mov:Tre,cfb_gc:Are,ReadShift:Wm,CheckField:pne,prep_blob:qn,bconcat:jc,use_zlib:le,_deflateRaw:Zt,_inflateRaw:og,consts:I},t}(),qHe;function XHe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(r){if(!r.message||r.message.indexOf("onstruct")==-1)throw r}throw new Error("Cannot access file "+e)}function oa(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function E$(e){for(var t=[],n=oa(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}var jte=Date.UTC(1899,11,30,0,0,0),YHe=Date.UTC(1899,11,31,0,0,0),KHe=Date.UTC(1904,0,1,0,0,0);function rr(e,t){var n=e.getTime(),r=(n-jte)/(24*60*60*1e3);return t?(r-=1462,r<-1402?r-1:r):r<60?r-1:r}function pu(e){if(e>=60&&e<61)return e;var t=new Date;return t.setTime((e>60?e:e+1)*24*60*60*1e3+jte),t}function JHe(e){var t=0,n=0,r=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(n=1,s>3&&(r=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":n*=24;case"H":n*=60;case"M":if(r)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=n*parseInt(i[s],10)}return t}var ZHe=/^(\d+):(\d+)(:\d+)?(\.\d+)?$/,QHe=/^(\d+)-(\d+)-(\d+)$/,Gte=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)?(\.\d+)?$/;function Ir(e,t){if(e instanceof Date)return e;var n=e.match(ZHe);if(n)return new Date((t?KHe:YHe)+((parseInt(n[1],10)*60+parseInt(n[2],10))*60+(n[3]?parseInt(n[3].slice(1),10):0))*1e3+(n[4]?parseInt((n[4]+"000").slice(1,4),10):0));if(n=e.match(QHe),n)return new Date(Date.UTC(+n[1],+n[2]-1,+n[3],0,0,0,0));if(n=e.match(Gte),n)return new Date(Date.UTC(+n[1],+n[2]-1,+n[3],+n[4],+n[5],n[6]&&parseInt(n[6].slice(1),10)||0,n[7]&&parseInt((n[7]+"0000").slice(1,4),10)||0));var r=new Date(e);return r}function Wh(e,t){if(_t&&Buffer.isBuffer(e)){if(t&&K1){if(e[0]==255&&e[1]==254)return xm(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return xm($te(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return xm(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return xm(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return n[s]||s})}catch{}var r=[],i=0;try{for(i=0;i<e.length-65536;i+=65536)r.push(String.fromCharCode.apply(0,e.slice(i,i+65536)));r.push(String.fromCharCode.apply(0,e.slice(i)))}catch{try{for(;i<e.length-16384;i+=16384)r.push(String.fromCharCode.apply(0,e.slice(i,i+16384)));r.push(String.fromCharCode.apply(0,e.slice(i)))}catch{for(;i!=e.length;++i)r.push(String.fromCharCode(e[i]))}}return r.join("")}function Wn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Wn(e[n]));return t}function Ct(e,t){for(var n="";n.length<t;)n+=e;return n}function Ns(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(t=Number(r))||(r=r.replace(/[(]([^()]*)[)]/,function(i,s){return n=-n,s}),!isNaN(t=Number(r)))?t/n:t}var eVe=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/,tVe=/^([01]?\d|2[0-3])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))$/,nVe=/^(\d+)-(\d+)-(\d+)[T ](\d+):(\d+)(:\d+)(\.\d+)?[Z]?$/,rVe=new Date("6/9/69 00:00 UTC").valueOf()==-177984e5;function iVe(e){return e[2]?e[3]?e[4]?new Date(Date.UTC(1899,11,31,+e[1]%12+(e[7]=="p"?12:0),+e[2],+e[4],parseFloat(e[3])*1e3)):new Date(Date.UTC(1899,11,31,e[7]=="p"?12:0,+e[1],+e[2],parseFloat(e[3])*1e3)):e[5]?new Date(Date.UTC(1899,11,31,+e[1]%12+(e[7]=="p"?12:0),+e[2],+e[5],e[6]?parseFloat(e[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+e[1]%12+(e[7]=="p"?12:0),+e[2],0,0)):new Date(Date.UTC(1899,11,31,+e[1]%12+(e[7]=="p"?12:0),0,0,0))}function sVe(e){return e[2]?e[3]?e[4]?new Date(Date.UTC(1899,11,31,+e[1],+e[2],+e[4],parseFloat(e[3])*1e3)):new Date(Date.UTC(1899,11,31,0,+e[1],+e[2],parseFloat(e[3])*1e3)):e[5]?new Date(Date.UTC(1899,11,31,+e[1],+e[2],+e[5],e[6]?parseFloat(e[6])*1e3:0)):new Date(Date.UTC(1899,11,31,+e[1],+e[2],0,0)):new Date(Date.UTC(1899,11,31,+e[1],0,0,0))}var aVe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Z1(e){if(nVe.test(e))return e.indexOf("Z")==-1?$S(new Date(e)):new Date(e);var t=e.toLowerCase(),n=t.replace(/\s+/g," ").trim(),r=n.match(eVe);if(r)return iVe(r);if(r=n.match(tVe),r)return sVe(r);if(r=n.match(Gte),r)return new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],r[6]&&parseInt(r[6].slice(1),10)||0,r[7]&&parseInt((r[7]+"0000").slice(1,4),10)||0));var i=new Date(rVe&&e.indexOf("UTC")==-1?e+" UTC":e),s=new Date(NaN),a=i.getYear();i.getMonth();var o=i.getDate();if(isNaN(o))return s;if(t.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(t=t.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),t.length>3&&aVe.indexOf(t)==-1)return s}else if(t.replace(/[ap]m?/,"").match(/[a-z]/))return s;return a<0||a>8099||e.match(/[^-0-9:,\/\\\ ]/)?s:i}var oVe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(n,r,i){if(e||typeof r=="string")return n.split(r);for(var s=n.split(r),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}}();function jh(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}function $S(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))}function w$(e){var t=e.slice(0,1024),n=t.indexOf("<!DOCTYPE");if(n==-1)return e;var r=e.match(/<[\w]/);return r?e.slice(0,n)+e.slice(r.index):e}function S$(e,t,n){for(var r=[],i=e.indexOf(t);i>-1;){var s=e.indexOf(n,i+t.length);if(s==-1)break;r.push(e.slice(i,s+n.length)),i=e.indexOf(t,s+n.length)}return r.length>0?r:null}function uv(e,t,n){var r=[],i=0,s=e.indexOf(t);if(s==-1)return e;for(;s>-1;){r.push(e.slice(i,s));var a=e.indexOf(n,s+t.length);if(a==-1)break;(s=e.indexOf(t,i=a+n.length))==-1&&r.push(e.slice(i))}return r.join("")}var lVe={" ":1,"	":1,"\r":1,"\n":1,">":1};function lh(e,t){for(var n=e.indexOf("<"+t),r=t.length+1,i=e.length;n>=0&&n<=i-r&&!lVe[e.charAt(n+r)];)n=e.indexOf("<"+t,n+1);if(n===-1)return null;var s=e.indexOf(">",n+t.length);if(s===-1)return null;var a="</"+t+">",o=e.indexOf(a,s);return o==-1?null:[e.slice(n,o+a.length),e.slice(s+1,o)]}var cr=function(){var e={};return function(n,r){var i=e[r];i||(e[r]=i=[new RegExp("<(?:\\w+:)?"+r+"\\b[^<>]*>","g"),new RegExp("</(?:\\w+:)?"+r+">","g")]),i[0].lastIndex=i[1].lastIndex=0;var s=i[0].exec(n);if(!s)return null;var a=s.index,o=i[0].lastIndex;if(i[1].lastIndex=i[0].lastIndex,s=i[1].exec(n),!s)return null;var l=s.index,c=i[1].lastIndex;return[n.slice(a,c),n.slice(o,l)]}}(),qte=function(){var e={};return function(n,r){var i=[],s=e[r];s||(e[r]=s=[new RegExp("<(?:\\w+:)?"+r+"\\b[^<>]*>","g"),new RegExp("</(?:\\w+:)?"+r+">","g")]),s[0].lastIndex=s[1].lastIndex=0;for(var a;a=s[0].exec(n);){var o=a.index;if(s[1].lastIndex=s[0].lastIndex,a=s[1].exec(n),!a)return null;var l=s[1].lastIndex;i.push(n.slice(o,l)),s[0].lastIndex=s[1].lastIndex}return i.length==0?null:i}}(),cVe=function(){var e={};return function(n,r){var i=[],s=e[r];s||(e[r]=s=[new RegExp("<(?:\\w+:)?"+r+"\\b[^<>]*>","g"),new RegExp("</(?:\\w+:)?"+r+">","g")]),s[0].lastIndex=s[1].lastIndex=0;for(var a,o=0,l=0;a=s[0].exec(n);){if(o=a.index,i.push(n.slice(l,o)),l=o,s[1].lastIndex=s[0].lastIndex,a=s[1].exec(n),!a)return null;l=s[1].lastIndex,s[0].lastIndex=s[1].lastIndex}return i.push(n.slice(l)),i.length==0?"":i.join("")}}(),uVe=function(){var e={};return function(n,r){var i=[],s=e[r];s||(e[r]=s=[new RegExp("<"+r+"\\b[^<>]*>","ig"),new RegExp("</"+r+">","ig")]),s[0].lastIndex=s[1].lastIndex=0;for(var a;a=s[0].exec(n);){var o=a.index;if(s[1].lastIndex=s[0].lastIndex,a=s[1].exec(n),!a)return null;var l=s[1].lastIndex;i.push(n.slice(o,l)),s[0].lastIndex=s[1].lastIndex}return i.length==0?null:i}}();function Xte(e){return e?e.content&&e.type?Wh(e.content,!0):e.data?gm(e.data):e.asNodeBuffer&&_t?gm(e.asNodeBuffer().toString("binary")):e.asBinary?gm(e.asBinary()):e._data&&e._data.getContent?gm(Wh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Yte(e){if(!e)return null;if(e.data)return _7(e.data);if(e.asNodeBuffer&&_t)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?_7(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function fVe(e){return e&&e.name.slice(-4)===".bin"?Yte(e):Xte(e)}function Ks(e,t){for(var n=e.FullPaths||oa(e.files),r=t.toLowerCase().replace(/[\/]/g,"\\"),i=r.replace(/\\/g,"/"),s=0;s<n.length;++s){var a=n[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==a||i==a)return e.files?e.files[n[s]]:e.FileIndex[s]}return null}function T$(e,t){var n=Ks(e,t);if(n==null)throw new Error("Cannot find file "+t+" in zip");return n}function Un(e,t,n){if(!n)return fVe(T$(e,t));if(!t)return null;try{return Un(e,t)}catch{return null}}function Ci(e,t,n){if(!n)return Xte(T$(e,t));if(!t)return null;try{return Ci(e,t)}catch{return null}}function hVe(e,t,n){return Yte(T$(e,t))}function D7(e){for(var t=e.FullPaths||oa(e.files),n=[],r=0;r<t.length;++r)t[r].slice(-1)!="/"&&n.push(t[r].replace(/^Root Entry[\/]/,""));return n.sort()}function dVe(e,t,n){if(e.FullPaths){if(Array.isArray(n)&&typeof n[0]=="string"&&(n=n.join("")),typeof n=="string"){var r;return _t?r=of(n):r=_He(n),Ft.utils.cfb_add(e,t,r)}Ft.utils.cfb_add(e,t,n)}else e.file(t,n)}function Kte(e,t){switch(t.type){case"base64":return Ft.read(e,{type:"base64"});case"binary":return Ft.read(e,{type:"binary"});case"buffer":case"array":return Ft.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function a0(e,t){if(e.charAt(0)=="/")return e.slice(1);var n=t.split("/");t.slice(-1)!="/"&&n.pop();for(var r=e.split("/");r.length!==0;){var i=r.shift();i===".."?n.pop():i!=="."&&n.push(i)}return n.join("/")}var Jte=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Zte=/\s([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,R7=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?<>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'"<>\s=]+))*\s*[\/\?]?>/mg,pVe=/<[^<>]*>/g,Mr=Jte.match(R7)?R7:pVe,gVe=/<\w*:/,mVe=/<(\/?)\w+:/;function je(e,t,n){for(var r={},i=0,s=0;i!==e.length&&!((s=e.charCodeAt(i))===32||s===10||s===13);++i);if(t||(r[0]=e.slice(0,i)),i===e.length)return r;var a=e.match(Zte),o=0,l="",c=0,u="",f="",h=1;if(a)for(c=0;c!=a.length;++c){for(f=a[c].slice(1),s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(u=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(i=f.charCodeAt(s+1))==34||i==39?1:0,l=f.slice(s+1+h,f.length-h),o=0;o!=u.length&&u.charCodeAt(o)!==58;++o);if(o===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),r[u]=l,r[u.toLowerCase()]=l;else{var d=(o===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(o+1);if(r[d]&&u.slice(o-3,o)=="ext")continue;r[d]=l,r[d.toLowerCase()]=l}}return r}function xVe(e,t,n){for(var r={},i=0,s=0;i!==e.length&&!((s=e.charCodeAt(i))===32||s===10||s===13);++i);if(i===e.length)return r;var a=e.match(Zte),o="",l=0,c="",u="",f=1;if(a)for(l=0;l!=a.length;++l){for(u=a[l].slice(1),s=0;s!=u.length&&u.charCodeAt(s)!==61;++s);for(c=u.slice(0,s).trim();u.charCodeAt(s+1)==32;)++s;f=(i=u.charCodeAt(s+1))==34||i==39?1:0,o=u.slice(s+1+f,u.length-f),c.indexOf("_")>0&&(c=c.slice(0,c.indexOf("_"))),r[c]=o,r[c.toLowerCase()]=o}return r}function ka(e){return e.replace(mVe,"<$1")}var Qte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},vVe=E$(Qte),Et=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;function n(r){var i=r+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(e,function(o,l){return Qte[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var a=i.indexOf("]]>");return n(i.slice(0,s))+i.slice(s+9,a)+n(i.slice(a+3))}return function(i,s){var a=n(i);return s?a.replace(/\r\n/g,`
`):a}}(),yVe=/[&<>'"]/g,_Ve=/[\u0000-\u001f]/g;function Vm(e){var t=e+"";return t.replace(yVe,function(n){return vVe[n]}).replace(/\n/g,"<br/>").replace(_Ve,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}var I7=function(){var e=/&#(\d+);/g;function t(n,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(e,t)}}();function Gt(e){switch(e){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function pk(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0;n<e.length;){if(r=e.charCodeAt(n++),r<128){t+=String.fromCharCode(r);continue}if(i=e.charCodeAt(n++),r>191&&r<224){a=(r&31)<<6,a|=i&63,t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(n++),r<240){t+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=e.charCodeAt(n++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function $7(e){var t=Mu(2*e.length),n,r,i=1,s=0,a=0,o;for(r=0;r<e.length;r+=i)i=1,(o=e.charCodeAt(r))<128?n=o:o<224?(n=(o&31)*64+(e.charCodeAt(r+1)&63),i=2):o<240?(n=(o&15)*4096+(e.charCodeAt(r+1)&63)*64+(e.charCodeAt(r+2)&63),i=3):(i=4,n=(o&7)*262144+(e.charCodeAt(r+1)&63)*4096+(e.charCodeAt(r+2)&63)*64+(e.charCodeAt(r+3)&63),n-=65536,a=55296+(n>>>10&1023),n=56320+(n&1023)),a!==0&&(t[s++]=a&255,t[s++]=a>>>8,a=0),t[s++]=n%256,t[s++]=n>>>8;return t.slice(0,s).toString("ucs2")}function M7(e){return of(e,"binary").toString("utf8")}var Dy="foo bar bazâð£",en=_t&&(M7(Dy)==pk(Dy)&&M7||$7(Dy)==pk(Dy)&&$7)||pk,xm=_t?function(e){return of(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(r&63)))}return t.join("")},ene=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/(^|[^\t\n\r ])[\t\n\r ]+$/,"$1").replace(/>\s+/g,">").replace(/\b\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^<>]*>/g,""),i=0;i<e.length;++i)r=r.replace(e[i][0],e[i][1]);return r}}(),bVe=/<\/?(?:vt:)?variant>/g,EVe=/<(?:vt:)([^<"'>]*)>([\s\S]*)</;function L7(e,t){var n=je(e),r=qte(e,n.baseType)||[],i=[];if(r.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+r.length+" != "+n.size);return i}return r.forEach(function(s){var a=s.replace(bVe,"").match(EVe);a&&i.push({v:en(a[2]),t:a[1]})}),i}var wVe=/(^\s|\s$|\n)/;function SVe(e){return oa(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function TVe(e,t,n){return"<"+e+(n!=null?SVe(n):"")+(t!=null?(t.match(wVe)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function MS(e){if(_t&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return en(cc(y$(e)));throw new Error("Bad input format: expected Buffer or string")}var zn=/<([\/]?)([^\s?><!\/:"]*:|)([^\s?<>:\/"]+)(?:\s+[^<>=?"'\s]+="[^"]*?")*\s*[\/]?>/mg,AVe={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},kVe=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function CVe(e,t){for(var n=1-2*(e[t+7]>>>7),r=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),i=e[t+6]&15,s=5;s>=0;--s)i=i*256+e[t+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function FVe(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,a=r?-t:t;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[n+o]=s&255;e[n+6]=(i&15)<<4|s&15,e[n+7]=i>>4|r}var P7=function(e){for(var t=[],n=10240,r=0;r<e[0].length;++r)if(e[0][r])for(var i=0,s=e[0][r].length;i<s;i+=n)t.push.apply(t,e[0][r].slice(i,i+n));return t},B7=_t?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:of(t)})):P7(e)}:P7,U7=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(Bl(e,i)));return r.join("").replace(rs,"")},A$=_t?function(e,t,n){return!Buffer.isBuffer(e)||!K1?U7(e,t,n):e.toString("utf16le",t,n).replace(rs,"")}:U7,z7=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},tne=_t?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):z7(e,t,n)}:z7,H7=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(Yd(e,i)));return r.join("")},fv=_t?function(t,n,r){return Buffer.isBuffer(t)?t.toString("utf8",n,r):H7(t,n,r)}:H7,nne=function(e,t){var n=bs(e,t);return n>0?fv(e,t+4,t+4+n-1):""},rne=nne,ine=function(e,t){var n=bs(e,t);return n>0?fv(e,t+4,t+4+n-1):""},sne=ine,ane=function(e,t){var n=2*bs(e,t);return n>0?fv(e,t+4,t+4+n-1):""},one=ane,lne=function(t,n){var r=bs(t,n);return r>0?A$(t,n+4,n+4+r):""},cne=lne,une=function(e,t){var n=bs(e,t);return n>0?fv(e,t+4,t+4+n):""},fne=une,hne=function(e,t){return CVe(e,t)},Bb=hne,dne=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};_t&&(rne=function(t,n){if(!Buffer.isBuffer(t))return nne(t,n);var r=t.readUInt32LE(n);return r>0?t.toString("utf8",n+4,n+4+r-1):""},sne=function(t,n){if(!Buffer.isBuffer(t))return ine(t,n);var r=t.readUInt32LE(n);return r>0?t.toString("utf8",n+4,n+4+r-1):""},one=function(t,n){if(!Buffer.isBuffer(t)||!K1)return ane(t,n);var r=2*t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+r-1)},cne=function(t,n){if(!Buffer.isBuffer(t)||!K1)return lne(t,n);var r=t.readUInt32LE(n);return t.toString("utf16le",n+4,n+4+r)},fne=function(t,n){if(!Buffer.isBuffer(t))return une(t,n);var r=t.readUInt32LE(n);return t.toString("utf8",n+4,n+4+r)},Bb=function(t,n){return Buffer.isBuffer(t)?t.readDoubleLE(n):hne(t,n)},dne=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Yd=function(e,t){return e[t]},Bl=function(e,t){return e[t+1]*256+e[t]},OVe=function(e,t){var n=e[t+1]*256+e[t];return n<32768?n:(65535-n+1)*-1},bs=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},$f=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},NVe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Wm(e,t){var n="",r,i,s=[],a,o,l,c;switch(t){case"dbcs":if(c=this.l,_t&&Buffer.isBuffer(this)&&K1)n=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)n+=String.fromCharCode(Bl(this,c)),c+=2;e*=2;break;case"utf8":n=fv(this,this.l,this.l+e);break;case"utf16le":e*=2,n=A$(this,this.l,this.l+e);break;case"wstr":return Wm.call(this,e,"dbcs");case"lpstr-ansi":n=rne(this,this.l),e=4+bs(this,this.l);break;case"lpstr-cp":n=sne(this,this.l),e=4+bs(this,this.l);break;case"lpwstr":n=one(this,this.l),e=4+2*bs(this,this.l);break;case"lpp4":e=4+bs(this,this.l),n=cne(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+bs(this,this.l),n=fne(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,n="";(a=Yd(this,this.l+e++))!==0;)s.push(Ny(a));n=s.join("");break;case"_wstr":for(e=0,n="";(a=Bl(this,this.l+e))!==0;)s.push(Ny(a)),e+=2;e+=2,n=s.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Yd(this,c),this.l=c+1,o=Wm.call(this,e-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Ny(Bl(this,c))),c+=2}n=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Yd(this,c),this.l=c+1,o=Wm.call(this,e-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(Ny(Yd(this,c))),c+=1}n=s.join("");break;default:switch(e){case 1:return r=Yd(this,this.l),this.l++,r;case 2:return r=(t==="i"?OVe:Bl)(this,this.l),this.l+=2,r;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(r=(e>0?$f:NVe)(this,this.l),this.l+=4,r):(i=bs(this,this.l),this.l+=4,i);case 8:case-8:if(t==="f")return e==8?i=Bb(this,this.l):i=Bb([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:n=tne(this,this.l,e);break}}return this.l+=e,n}var DVe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},RVe=function(e,t,n){e[n]=t&255,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},IVe=function(e,t,n){e[n]=t&255,e[n+1]=t>>>8&255};function $Ve(e,t,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=t.length;++i)IVe(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if(n==="sbcs"||n=="cpstr"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=t.charCodeAt(i)&255;r=t.length}else if(n==="hex"){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var a=t.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:r=1,this[this.l]=t&255;break;case 2:r=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:r=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:r=4,DVe(this,t,this.l);break;case 8:if(r=8,n==="f"){FVe(this,t,this.l);break}case 16:break;case-4:r=4,RVe(this,t,this.l);break}return this.l+=r,this}function pne(e,t){var n=tne(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function qn(e,t){e.l=t,e.read_shift=Wm,e.chk=pne,e.write_shift=$Ve}function hi(e,t){e.l+=t}function Hn(e){var t=Mu(e);return qn(t,0),t}function Ec(e,t,n){if(e){var r,i,s;qn(e,e.l||0);for(var a=e.length,o=0,l=0;e.l<a;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var c=jb[o]||jb[65535];for(r=e.read_shift(1),s=r&127,i=1;i<4&&r&128;++i)s+=((r=e.read_shift(1))&127)<<7*i;l=e.l+s;var u=c.f&&c.f(e,s,n);if(e.l=l,t(u,c,o))return}}}function A3(){var e=[],t=_t?16384:2048;_t&&Hn(t).copy;var n=function(u){var f=Hn(u);return qn(f,0),f},r=n(t),i=function(){r&&(r.l&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&e.push(r)),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=n(Math.max(u+1,t)))},a=function(){return i(),jc(e)},o=function(){return i(),e},l=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(t)};return{next:s,push:l,end:a,_bufs:e,end2:o}}function jm(e,t,n){var r=Wn(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function V7(e,t,n){var r=Wn(e);return r.s=jm(r.s,t.s,n),r.e=jm(r.e,t.s,n),r}function Gm(e,t){if(e.cRel&&e.c<0)for(e=Wn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Wn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=$t(e);return!e.cRel&&e.cRel!=null&&(n=PVe(n)),!e.rRel&&e.rRel!=null&&(n=MVe(n)),n}function gk(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Lt(e.s.c)+":"+(e.e.cRel?"":"$")+Lt(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+qt(e.s.r)+":"+(e.e.rRel?"":"$")+qt(e.e.r):Gm(e.s,t.biff)+":"+Gm(e.e,t.biff)}function k$(e){return parseInt(LVe(e),10)-1}function qt(e){return""+(e+1)}function MVe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function LVe(e){return e.replace(/\$(\d+)$/,"$1")}function C$(e){for(var t=BVe(e),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function Lt(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function PVe(e){return e.replace(/^([A-Z])/,"$$$1")}function BVe(e){return e.replace(/^\$([A-Z])/,"$1")}function UVe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ri(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function $t(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function vd(e){var t=e.indexOf(":");return t==-1?{s:ri(e),e:ri(e)}:{s:ri(e.slice(0,t)),e:ri(e.slice(t+1))}}function wt(e,t){return typeof t>"u"||typeof t=="number"?wt(e.s,e.e):(typeof e!="string"&&(e=$t(e)),typeof t!="string"&&(t=$t(t)),e==t?e:e+":"+t)}function zVe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e.replace(/'/g,"''")+"'":e}function Ln(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=e.length;for(n=0;r<s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===s||i!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function W7(e,t){var n=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Us(e.z,n?rr(t):t)}catch{}try{return e.w=Us((e.XF||{}).numFmtId||(n?14:0),n?rr(t):t)}catch{return""+t}}function Lu(e,t,n){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),e.t=="e"?fs[e.v]||e.v:t==null?W7(e,e.v):W7(e,t))}function lf(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function HVe(e){var t={},n=e||{};return n.dense&&(t["!data"]=[]),t}function gne(e,t,n){var r=n||{},i=e?e["!data"]!=null:r.dense,s=e||(i?{"!data":[]}:{});i&&!s["!data"]&&(s["!data"]=[]);var a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?ri(r.origin):r.origin;a=l.r,o=l.c}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=Ln(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),a==-1&&(c.e.r=a=s["!ref"]?u.e.r+1:0)}else c.s.c=c.e.c=c.s.r=c.e.r=0;for(var f=[],h=!1,d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");var p=a+d;i&&(s["!data"][p]||(s["!data"][p]=[]),f=s["!data"][p]);for(var g=t[d],m=0;m!=g.length;++m)if(!(typeof g[m]>"u")){var x={v:g[m],t:""},y=o+m;if(c.s.r>p&&(c.s.r=p),c.s.c>y&&(c.s.c=y),c.e.r<p&&(c.e.r=p),c.e.c<y&&(c.e.c=y),h=!0,g[m]&&typeof g[m]=="object"&&!Array.isArray(g[m])&&!(g[m]instanceof Date))x=g[m];else if(Array.isArray(x.v)&&(x.f=g[m][1],x.v=x.v[0]),x.v===null)if(x.f)x.t="n";else if(r.nullError)x.t="e",x.v=0;else if(r.sheetStubs)x.t="z";else continue;else typeof x.v=="number"?isFinite(x.v)?x.t="n":isNaN(x.v)?(x.t="e",x.v=15):(x.t="e",x.v=7):typeof x.v=="boolean"?x.t="b":x.v instanceof Date?(x.z=r.dateNF||st[14],r.UTC||(x.v=$S(x.v)),r.cellDates?(x.t="d",x.w=Us(x.z,rr(x.v,r.date1904))):(x.t="n",x.v=rr(x.v,r.date1904),x.w=Us(x.z,x.v))):x.t="s";if(i)f[y]&&f[y].z&&(x.z=f[y].z),f[y]=x;else{var v=Lt(y)+(p+1);s[v]&&s[v].z&&(x.z=s[v].z),s[v]=x}}}return h&&c.s.c<104e5&&(s["!ref"]=wt(c)),s}function ag(e,t){return gne(null,e,t)}function VVe(e){return e.read_shift(4,"i")}function ci(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function WVe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function F$(e,t){var n=e.l,r=e.read_shift(1),i=ci(e),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)s.push(WVe(e));a.r=s}else a.r=[{ich:0,ifnt:0}];return e.l=n+t,a}var jVe=F$;function Ca(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function yd(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var GVe=ci;function LS(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var qVe=ci,k3=LS;function PS(e){var t=e.slice(e.l,e.l+4),n=t[0]&1,r=t[0]&2;e.l+=4;var i=r===0?Bb([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):$f(t,0)>>2;return n?i/100:i}function mne(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var _d=mne;function Kr(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function XVe(e){var t={},n=e.read_shift(1),r=n>>>1,i=e.read_shift(1),s=e.read_shift(2,"i"),a=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,r){case 0:t.auto=1;break;case 1:t.index=i;var c=ch[i];c&&(t.rgb=ex(c));break;case 2:t.rgb=ex([a,o,l]);break;case 3:t.theme=i;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function YVe(e){var t=e.read_shift(1);e.l++;var n={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return n}function xne(e,t){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=e.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return n[e.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function KVe(e){return xne(e,1)}function JVe(e){return xne(e,2)}var O$=2,ji=3,Ry=11,j7=12,Ub=19,Iy=64,ZVe=65,QVe=71,eWe=4108,tWe=4126,ar=80,vne=81,nWe=[ar,vne],rWe={1:{n:"CodePage",t:O$},2:{n:"Category",t:ar},3:{n:"PresentationFormat",t:ar},4:{n:"ByteCount",t:ji},5:{n:"LineCount",t:ji},6:{n:"ParagraphCount",t:ji},7:{n:"SlideCount",t:ji},8:{n:"NoteCount",t:ji},9:{n:"HiddenCount",t:ji},10:{n:"MultimediaClipCount",t:ji},11:{n:"ScaleCrop",t:Ry},12:{n:"HeadingPairs",t:eWe},13:{n:"TitlesOfParts",t:tWe},14:{n:"Manager",t:ar},15:{n:"Company",t:ar},16:{n:"LinksUpToDate",t:Ry},17:{n:"CharacterCount",t:ji},19:{n:"SharedDoc",t:Ry},22:{n:"HyperlinksChanged",t:Ry},23:{n:"AppVersion",t:ji,p:"version"},24:{n:"DigSig",t:ZVe},26:{n:"ContentType",t:ar},27:{n:"ContentStatus",t:ar},28:{n:"Language",t:ar},29:{n:"Version",t:ar},255:{},2147483648:{n:"Locale",t:Ub},2147483651:{n:"Behavior",t:Ub},1919054434:{}},iWe={1:{n:"CodePage",t:O$},2:{n:"Title",t:ar},3:{n:"Subject",t:ar},4:{n:"Author",t:ar},5:{n:"Keywords",t:ar},6:{n:"Comments",t:ar},7:{n:"Template",t:ar},8:{n:"LastAuthor",t:ar},9:{n:"RevNumber",t:ar},10:{n:"EditTime",t:Iy},11:{n:"LastPrinted",t:Iy},12:{n:"CreatedDate",t:Iy},13:{n:"ModifiedDate",t:Iy},14:{n:"PageCount",t:ji},15:{n:"WordCount",t:ji},16:{n:"CharCount",t:ji},17:{n:"Thumbnail",t:QVe},18:{n:"Application",t:ar},19:{n:"DocSecurity",t:ji},255:{},2147483648:{n:"Locale",t:Ub},2147483651:{n:"Behavior",t:Ub},1919054434:{}},G7={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},sWe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function aWe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var oWe=aWe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ch=Wn(oWe),fs={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Cr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},yne=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],q7={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function lWe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function cWe(e){var t=lWe();if(!e||!e.match)return t;var n={};if((e.match(Mr)||[]).forEach(function(r){var i=je(r);switch(i[0].replace(gVe,"<")){case"<?xml":break;case"<Types":t.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[i.Extension.toLowerCase()]=i.ContentType;break;case"<Override":t[q7[i.ContentType]]!==void 0&&t[q7[i.ContentType]].push(i.PartName);break}}),t.xmlns!==AVe.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}var o0={CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment"};function C3(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function qm(e,t){var n={"!id":{}};if(!e)return n;t.charAt(0)!=="/"&&(t="/"+t);var r={};return(e.match(Mr)||[]).forEach(function(i){var s=je(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=Et(s.Target),a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:a0(s.Target,t);n[o]=a,r[s.Id]=a}}),n["!id"]=r,n}var uWe="application/vnd.oasis.opendocument.spreadsheet";function fWe(e,t){for(var n=MS(e),r,i;r=zn.exec(n);)switch(r[3]){case"manifest":break;case"file-entry":if(i=je(r[0],!1),i.path=="/"&&i.type!==uWe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw r}}var X7=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function _ne(e){var t={};e=en(e);for(var n=0;n<X7.length;++n){var r=X7[n],i=lh(e,r[0]);i!=null&&i.length>0&&(t[r[1]]=Et(i[1])),r[2]==="date"&&t[r[1]]&&(t[r[1]]=Ir(t[r[1]]))}return t}var hWe=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function bne(e,t,n,r){var i=[];if(typeof e=="string")i=L7(e,r);else for(var s=0;s<e.length;++s)i=i.concat(e[s].map(function(u){return{v:u}}));var a=typeof t=="string"?L7(t,r).map(function(u){return u.v}):t,o=0,l=0;if(a.length>0)for(var c=0;c!==i.length;c+=2){switch(l=+i[c+1].v,i[c].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=l,n.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=a.slice(o,o+l);break}o+=l}}function dWe(e,t,n){var r={};return t||(t={}),e=en(e),hWe.forEach(function(i){var s=(cr(e,i[0])||[])[1];switch(i[2]){case"string":s&&(t[i[1]]=Et(s));break;case"bool":t[i[1]]=s==="true";break;case"raw":var a=lh(e,i[0]);a&&a.length>0&&(r[i[1]]=a[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&bne(r.HeadingPairs,r.TitlesOfParts,t,n),t}var pWe=/<[^<>]+>[^<]*/g;function gWe(e,t){var n={},r="",i=e.match(pWe);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=je(a);switch(ka(o[0])){case"<?xml":break;case"<Properties":break;case"<property":r=Et(o.name);break;case"</property>":r=null;break;default:if(a.indexOf("<vt:")===0){var l=a.split(">"),c=l[0].slice(4),u=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":n[r]=Et(u);break;case"bool":n[r]=Gt(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[r]=parseInt(u,10);break;case"r4":case"r8":case"decimal":n[r]=parseFloat(u);break;case"filetime":case"date":n[r]=Ir(u);break;case"cy":case"error":n[r]=Et(u);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",a,c,l)}}else if(a.slice(0,2)!=="</"){if(t.WTF)throw new Error(a)}}}return n}var mWe={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},mk;function xWe(e,t,n){mk||(mk=E$(mWe)),t=mk[t]||t,e[t]=n}function N$(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function vWe(e,t,n){var r=e.l,i=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-r&3;)++e.l;return i}function yWe(e,t,n){var r=e.read_shift(0,"lpwstr");return r}function Ene(e,t,n){return t===31?yWe(e):vWe(e,t,n)}function Xm(e,t,n){return Ene(e,t,n===!1?0:4)}function _We(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Ene(e,t,0)}function bWe(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r){var i=e.l;n[r]=e.read_shift(0,"lpwstr").replace(rs,""),e.l-i&2&&(e.l+=2)}return n}function EWe(e){for(var t=e.read_shift(4),n=[],r=0;r!=t;++r)n[r]=e.read_shift(0,"lpstr-cp").replace(rs,"");return n}function wWe(e){var t=e.l,n=zb(e,vne);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var r=zb(e,ji);return[n,r]}function SWe(e){for(var t=e.read_shift(4),n=[],r=0;r<t/2;++r)n.push(wWe(e));return n}function Y7(e,t){for(var n=e.read_shift(4),r={},i=0;i!=n;++i){var s=e.read_shift(4),a=e.read_shift(4);r[s]=e.read_shift(a,t===1200?"utf16le":"utf8").replace(rs,"").replace(mm,"!"),t===1200&&a%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),r}function wne(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),n}function TWe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function zb(e,t,n){var r=e.read_shift(2),i,s=n||{};if(e.l+=2,t!==j7&&r!==t&&nWe.indexOf(t)===-1&&!((t&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+t+" saw "+r);switch(t===j7?r:t){case 2:return i=e.read_shift(2,"i"),s.raw||(e.l+=2),i;case 3:return i=e.read_shift(4,"i"),i;case 11:return e.read_shift(4)!==0;case 19:return i=e.read_shift(4),i;case 30:e.l+=4,val=Xm(e,e[e.l-4]).replace(/(^|[^\u0000])\u0000+$/,"$1");break;case 31:e.l+=4,val=Xm(e,e[e.l-4]).replace(/(^|[^\u0000])\u0000+$/,"$1");break;case 64:return N$(e);case 65:return wne(e);case 71:return TWe(e);case 80:return Xm(e,r,!s.raw).replace(rs,"");case 81:return _We(e,r).replace(rs,"");case 4108:return SWe(e);case 4126:case 4127:return r==4127?bWe(e):EWe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+r)}}function K7(e,t){var n=e.l,r=e.read_shift(4),i=e.read_shift(4),s=[],a=0,o=0,l=-1,c={};for(a=0;a!=i;++a){var u=e.read_shift(4),f=e.read_shift(4);s[a]=[u,f+n]}s.sort(function(y,v){return y[1]-v[1]});var h={};for(a=0;a!=i;++a){if(e.l!==s[a][1]){var d=!0;if(a>0&&t)switch(t[s[a-1][0]].t){case 2:e.l+2===s[a][1]&&(e.l+=2,d=!1);break;case 80:e.l<=s[a][1]&&(e.l=s[a][1],d=!1);break;case 4108:e.l<=s[a][1]&&(e.l=s[a][1],d=!1);break}if((!t||a==0)&&e.l<=s[a][1]&&(d=!1,e.l=s[a][1]),d)throw new Error("Read Error: Expected address "+s[a][1]+" at "+e.l+" :"+a)}if(t){if(s[a][0]==0&&s.length>a+1&&s[a][1]==s[a+1][1])continue;var p=t[s[a][0]];if(h[p.n]=zb(e,p.t,{raw:!0}),p.p==="version"&&(h[p.n]=String(h[p.n]>>16)+"."+("0000"+String(h[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(h[p.n]){case 0:h[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Va(o=h[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[p.n])}}else if(s[a][0]===1){if(o=h.CodePage=zb(e,O$),Va(o),l!==-1){var g=e.l;e.l=s[l][1],c=Y7(e,o),e.l=g}}else if(s[a][0]===0){if(o===0){l=a,e.l=s[a+1][1];continue}c=Y7(e,o)}else{var m=c[s[a][0]],x;switch(e[e.l]){case 65:e.l+=4,x=wne(e);break;case 30:e.l+=4,x=Xm(e,e[e.l-4]).replace(/(^|[^\u0000])\u0000+$/,"$1");break;case 31:e.l+=4,x=Xm(e,e[e.l-4]).replace(/(^|[^\u0000])\u0000+$/,"$1");break;case 3:e.l+=4,x=e.read_shift(4,"i");break;case 19:e.l+=4,x=e.read_shift(4);break;case 5:e.l+=4,x=e.read_shift(8,"f");break;case 11:e.l+=4,x=Nn(e,4);break;case 64:e.l+=4,x=Ir(N$(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[m]=x}}return e.l=n+r,h}function J7(e,t,n){var r=e.content;if(!r)return{};qn(r,0);var i,s,a,o,l=0;r.chk("feff","Byte Order: "),r.read_shift(2);var c=r.read_shift(4),u=r.read_shift(16);if(u!==Ft.utils.consts.HEADER_CLSID&&u!==n)throw new Error("Bad PropertySet CLSID "+u);if(i=r.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=r.read_shift(16),o=r.read_shift(4),i===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);i===2&&(a=r.read_shift(16),l=r.read_shift(4));var f=K7(r,t),h={SystemIdentifier:c};for(var d in f)h[d]=f[d];if(h.FMTID=s,i===1)return h;if(l-r.l==2&&(r.l+=2),r.l!==l)throw new Error("Length mismatch 2: "+r.l+" !== "+l);var p;try{p=K7(r,null)}catch{}for(d in p)h[d]=p[d];return h.FMTID=[s,a],h}function Cc(e,t){return e.read_shift(t),null}function AWe(e,t,n){for(var r=[],i=e.l+t;e.l<i;)r.push(n(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return r}function Nn(e,t){return e.read_shift(t)===1}function Sn(e){return e.read_shift(2,"u")}function Sne(e,t){return AWe(e,t,Sn)}function Tne(e){var t=e.read_shift(1),n=e.read_shift(1);return n===1?t:t===1}function Tp(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",s=ta;if(n&&n.biff>=8&&(ta=1200),!n||n.biff==8){var a=e.read_shift(1);a&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?e.read_shift(r,i):"";return ta=s,o}function kWe(e){var t=ta;ta=1200;var n=e.read_shift(2),r=e.read_shift(1),i=r&4,s=r&8,a=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),i&&(l=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",f=n===0?"":e.read_shift(n,u);return s&&(e.l+=4*o),i&&(e.l+=l),c.t=f,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),ta=t,c}function Gh(e,t,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}var i=e.read_shift(1);return i===0?r=e.read_shift(t,"sbcs-cont"):r=e.read_shift(t,"dbcs-cont"),r}function hv(e,t,n){var r=e.read_shift(n&&n.biff==2?1:2);return r===0?(e.l++,""):Gh(e,r,n)}function bd(e,t,n){if(n.biff>5)return hv(e,t,n);var r=e.read_shift(1);return r===0?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function CWe(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}function FWe(e){var t=e.read_shift(4),n=e.l,r=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),e.l=n);var i=e.read_shift((r?t-24:t)>>1,"utf16le").replace(rs,"");return r&&(e.l+=24),i}function OWe(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var r=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=e.read_shift(4);if(i===0)return n+r.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=e.read_shift(s>>1,"utf16le").replace(rs,"");return n+a}function NWe(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return FWe(e);case"0303000000000000c000000000000046":return OWe(e);default:throw new Error("Unsupported Moniker "+n)}}function $y(e){var t=e.read_shift(4),n=t>0?e.read_shift(t,"utf16le").replace(rs,""):"";return n}function DWe(e,t){var n=e.l+t,r=e.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var i=e.read_shift(2);e.l+=2;var s,a,o,l,c="",u,f;i&16&&(s=$y(e,n-e.l)),i&128&&(a=$y(e,n-e.l)),(i&257)===257&&(o=$y(e,n-e.l)),(i&257)===1&&(l=NWe(e,n-e.l)),i&8&&(c=$y(e,n-e.l)),i&32&&(u=e.read_shift(16)),i&64&&(f=N$(e)),e.l=n;var h=a||o||l||"";h&&c&&(h+="#"+c),h||(h="#"+c),i&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var d={Target:h};return u&&(d.guid=u),f&&(d.time=f),s&&(d.Tooltip=s),d}function Ane(e){var t=e.read_shift(1),n=e.read_shift(1),r=e.read_shift(1),i=e.read_shift(1);return[t,n,r,i]}function kne(e,t){var n=Ane(e);return n[3]=0,n}function po(e,t,n){var r=e.read_shift(2),i=e.read_shift(2),s={r,c:i,ixfe:0};if(n&&n.biff==2||t==7){var a=e.read_shift(1);s.ixfe=a&63,e.l+=2}else s.ixfe=e.read_shift(2);return s}function RWe(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}function IWe(e,t,n){return t===0?"":bd(e,t,n)}function $We(e,t,n){var r=n.biff>8?4:2,i=e.read_shift(r),s=e.read_shift(r,"i"),a=e.read_shift(r,"i");return[i,s,a]}function Cne(e){var t=e.read_shift(2),n=PS(e);return[t,n]}function MWe(e,t,n){e.l+=4,t-=4;var r=e.l+t,i=Tp(e,t,n),s=e.read_shift(2);if(r-=e.l,s!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+s);return e.l+=s,i}function BS(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2);return{s:{c:r,r:t},e:{c:i,r:n}}}function Fne(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(1),i=e.read_shift(1);return{s:{c:r,r:t},e:{c:i,r:n}}}var LWe=Fne;function One(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2);return e.l+=12,[n,t,r]}function PWe(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function BWe(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function zr(e){e.l+=2,e.l+=e.read_shift(2)}var UWe={0:zr,4:zr,5:zr,6:zr,7:BWe,8:zr,9:zr,10:zr,11:zr,12:zr,13:PWe,14:zr,15:zr,16:zr,17:zr,18:zr,19:zr,20:zr,21:One};function zWe(e,t){for(var n=e.l+t,r=[];e.l<n;){var i=e.read_shift(2);e.l-=2;try{r[i]=UWe[i](e,n-e.l)}catch{return e.l=n,r}}return e.l!=n&&(e.l=n),r}function My(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),t-=2,t>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function HWe(e,t){return t===0||e.read_shift(2),1200}function VWe(e,t,n){if(n.enc)return e.l+=t,"";var r=e.l,i=bd(e,0,n);return e.read_shift(t+r-e.l),i}function WWe(e,t,n){var r=n&&n.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function jWe(e,t,n){var r="";if(n.biff==4)return r=Tp(e,0,n),r.length===0&&(r="Sheet1"),{name:r};var i=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}return r=Tp(e,0,n),r.length===0&&(r="Sheet1"),{pos:i,hs:s,dt:a,name:r}}function GWe(e,t){for(var n=e.l+t,r=e.read_shift(4),i=e.read_shift(4),s=[],a=0;a!=i&&e.l<n;++a)s.push(kWe(e));return s.Count=r,s.Unique=i,s}function qWe(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}function XWe(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var r=e.read_shift(1);return e.l+=3,r&7&&(t.level=r&7),r&32&&(t.hidden=!0),r&64&&(t.hpt=n/20),t}function YWe(e){var t=RWe(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var n=e.read_shift(4);return n!==0}function KWe(e){return e.read_shift(2),e.read_shift(4)}function Z7(e,t,n){var r=0;n&&n.biff==2||(r=e.read_shift(2));var i=e.read_shift(2);n&&n.biff==2&&(r=1-(i>>15),i&=32767);var s={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[s,i]}function JWe(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,n],Dim:[r,i],Flags:s,CurTab:a,FirstTab:o,Selected:l,TabRatio:c}}function ZWe(e,t,n){if(n&&n.biff>=2&&n.biff<5)return{};var r=e.read_shift(2);return{RTL:r&64}}function QWe(){}function eje(e,t,n){var r={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return r.name=Tp(e,0,n),r}function tje(e,t,n){var r=po(e,t,n);return r.isst=e.read_shift(4),r}function nje(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=e.l+t,i=po(e,t,n),s=hv(e,r-e.l,n);return i.val=s,i}function rje(e,t,n){var r=e.read_shift(2),i=bd(e,0,n);return[r,i]}var ije=bd;function Q7(e,t,n){var r=e.l+t,i=n.biff==8||!n.biff?4:2,s=e.read_shift(i),a=e.read_shift(i),o=e.read_shift(2),l=e.read_shift(2);return e.l=r,{s:{r:s,c:o},e:{r:a,c:l}}}function sje(e){var t=e.read_shift(2),n=e.read_shift(2),r=Cne(e);return{r:t,c:n,ixfe:r[0],rknum:r[1]}}function aje(e,t){for(var n=e.l+t-2,r=e.read_shift(2),i=e.read_shift(2),s=[];e.l<n;)s.push(Cne(e));if(e.l!==n)throw new Error("MulRK read error");var a=e.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r,c:i,C:a,rkrec:s}}function oje(e,t){for(var n=e.l+t-2,r=e.read_shift(2),i=e.read_shift(2),s=[];e.l<n;)s.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var a=e.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r,c:i,C:a,ixfe:s}}function lje(e,t,n,r){var i={},s=e.read_shift(4),a=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return i.patternType=sWe[o>>26],r.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=l&127,i.icvBack=l>>7&127,i.fsxButton=l>>14&1),i}function cje(e,t,n){var r={};return r.ifnt=e.read_shift(2),r.numFmtId=e.read_shift(2),r.flags=e.read_shift(2),r.fStyle=r.flags>>2&1,t-=6,r.data=lje(e,t,r.fStyle,n),r}function uje(e){var t={};return t.ifnt=e.read_shift(1),e.l++,t.flags=e.read_shift(1),t.numFmtId=t.flags&63,t.flags>>=6,t.fStyle=0,t.data={},t}function fje(e){var t={};return t.ifnt=e.read_shift(1),t.numFmtId=e.read_shift(1),t.flags=e.read_shift(2),t.fStyle=t.flags>>2&1,t.data={},t}function hje(e){var t={};return t.ifnt=e.read_shift(1),t.numFmtId=e.read_shift(1),t.flags=e.read_shift(2),t.fStyle=t.flags>>2&1,t.data={},t}function dje(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function pje(e,t,n){var r=po(e,6,n),i=Tne(e);return r.val=i,r.t=i===!0||i===!1?"b":"e",r}function gje(e,t,n){n.biffguess&&n.biff==2&&(n.biff=5);var r=po(e,6,n),i=Kr(e);return r.val=i,r}var eB=IWe;function mje(e,t,n){var r=e.l+t,i=e.read_shift(2),s=e.read_shift(2);if(n.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=Gh(e,s),o=[];r>e.l;)o.push(hv(e));return[s,i,a,o]}function tB(e,t,n){var r=e.read_shift(2),i,s={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return n.sbcch===14849&&(i=MWe(e,t-2,n)),s.body=i||e.read_shift(t-2),typeof i=="string"&&(s.Name=i),s}function nB(e,t,n){var r=e.l+t,i=e.read_shift(2),s=e.read_shift(1),a=e.read_shift(1),o=e.read_shift(n&&n.biff==2?1:2),l=0;(!n||n.biff>=5)&&(n.biff!=5&&(e.l+=2),l=e.read_shift(2),n.biff==5&&(e.l+=2),e.l+=4);var c=Gh(e,a,n);i&32&&(c=yne[c.charCodeAt(0)]);var u=r-e.l;n&&n.biff==2&&--u;var f=r==e.l||o===0||!(u>0)?[]:jXe(e,u,n,o);return{chKey:s,Name:c,itab:l,rgce:f}}function Nne(e,t,n){if(n.biff<8||!(n.biff>8)&&t==e[e.l]+(e[e.l+1]==3?1:0)+1)return rB(e,t,n);for(var r=[],i=e.l+t,s=e.read_shift(n.biff>8?4:2);s--!==0;)r.push($We(e,n.biff>8?12:6,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function rB(e,t,n){e[e.l+1]==3&&e[e.l]++;var r=Tp(e,t,n);return r.charCodeAt(0)==3?r.slice(1):r}function xje(e,t,n){if(n.biff<8){e.l+=t;return}var r=e.read_shift(2),i=e.read_shift(2),s=Gh(e,r,n),a=Gh(e,i,n);return[s,a]}function vje(e,t,n){var r=Fne(e);e.l++;var i=e.read_shift(1);return t-=8,[GXe(e,t,n),i,r]}function iB(e,t,n){var r=LWe(e);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[r,VXe(e,t,n)]}function yje(e){var t=e.read_shift(4)!==0,n=e.read_shift(4)!==0,r=e.read_shift(4);return[t,n,r]}function _je(e,t,n){var r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),o=bd(e,0,n);return[{r,c:i},o,a,s]}function bje(e,t,n){if(n&&n.biff<8){var r=e.read_shift(2),i=e.read_shift(2);if(r==65535||r==-1)return;var s=e.read_shift(2),a=e.read_shift(Math.min(s,2048),"cpstr");return[{r,c:i},a]}return _je(e,t,n)}function Eje(e,t){for(var n=[],r=e.read_shift(2);r--;)n.push(BS(e));return n}function wje(e,t,n){if(n&&n.biff<8)return Tje(e,t,n);var r=One(e),i=zWe(e,t-22,r[1]);return{cmo:r,ft:i}}var Sje={8:function(e,t){var n=e.l+t;e.l+=10;var r=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=n,{fmt:r}}};function Tje(e,t,n){e.l+=4;var r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var a=[];return a.push((Sje[r]||hi)(e,t,n)),{cmo:[i,r,s],ft:a}}function Aje(e,t,n){var r=e.l,i="";try{e.l+=4;var s=(n.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:a=CWe(e,6,n);var o=e.read_shift(2);e.read_shift(2),Sn(e,2);var l=e.read_shift(2);e.l+=l;for(var c=1;c<e.lens.length-1;++c){if(e.l-r!=e.lens[c])throw new Error("TxO: bad continue record");var u=e[e.l],f=Gh(e,e.lens[c+1]-e.lens[c]-1);if(i+=f,i.length>=(u?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return e.l=r+t,{t:i}}catch{return e.l=r+t,{t:i}}}function kje(e,t){var n=BS(e);e.l+=16;var r=DWe(e,t-24);return[n,r]}function Cje(e,t){e.read_shift(2);var n=BS(e),r=e.read_shift((t-10)/2,"dbcs-cont");return r=r.replace(rs,""),[n,r]}function Fje(e){var t=[0,0],n;return n=e.read_shift(2),t[0]=G7[n]||n,n=e.read_shift(2),t[1]=G7[n]||n,t}function Oje(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(kne(e));return n}function Nje(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(kne(e));return n}function Dje(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Dne(e,t,n){if(!n.cellStyles)return hi(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),s=e.read_shift(r),a=e.read_shift(r),o=e.read_shift(r),l=e.read_shift(2);r==2&&(e.l+=2);var c={s:i,e:s,w:a,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function Rje(e,t){var n={};return t<32||(e.l+=16,n.header=Kr(e),n.footer=Kr(e),e.l+=2),n}function Ije(e,t,n){var r={area:!1};if(n.biff!=5)return e.l+=t,r;var i=e.read_shift(1);return e.l+=3,i&16&&(r.area=!0),r}var $je=po,Mje=Sne,Lje=hv;function Pje(e){var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i={fmt:t,env:n,len:r,data:e.slice(e.l,e.l+r)};return e.l+=r,i}function Bje(e,t,n){n.biffguess&&n.biff==5&&(n.biff=2);var r=po(e,7,n),i=bd(e,t-7,n);return r.t="str",r.val=i,r}function Uje(e,t,n){var r=po(e,7,n),i=Kr(e);return r.t="n",r.val=i,r}function zje(e,t,n){var r=po(e,7,n),i=e.read_shift(2);return r.t="n",r.val=i,r}function Hje(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Vje(e,t,n){var r=e.l+7,i=po(e,6,n);e.l=r;var s=Tne(e);return i.val=s,i.t=s===!0||s===!1?"b":"e",i}function Wje(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function jje(e,t,n){var r=e.l+t,i=po(e,6,n),s=e.read_shift(2),a=Gh(e,s,n);return e.l=r,i.t="str",i.val=a,i}function Gje(e){var t=e.read_shift(4),n=e.read_shift(1),r=e.read_shift(n,"sbcs");return r.length===0&&(r="Sheet1"),{flags:t,name:r}}var qje=[2,3,48,49,131,139,140,245],sB=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=E$({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(o,l){var c=[],u=Mu(1);switch(l.type){case"base64":u=_s(Bs(o));break;case"binary":u=_s(o);break;case"buffer":case"array":u=o;break}qn(u,0);var f=u.read_shift(1),h=!!(f&136),d=!1,p=!1;switch(f){case 2:break;case 3:break;case 48:d=!0,h=!0;break;case 49:d=!0,h=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var g=0,m=521;f==2&&(g=u.read_shift(2)),u.l+=3,f!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),f!=2&&(m=u.read_shift(2));var x=u.read_shift(2);l.codepage,f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&e[u[u.l]],u.l+=1,u.l+=2),p&&(u.l+=36);for(var y=[],v={},_=Math.min(u.length,f==2?521:m-10-(d?264:0)),b=p?32:11;u.l<_&&u[u.l]!=13;)switch(v={},v.name=cc(u.slice(u.l,u.l+b)).replace(/[\u0000\r\n][\S\s]*$/g,""),u.l+=b,v.type=String.fromCharCode(u.read_shift(1)),f!=2&&!p&&(v.offset=u.read_shift(4)),v.len=u.read_shift(1),f==2&&(v.offset=u.read_shift(2)),v.dec=u.read_shift(1),v.name.length&&y.push(v),f!=2&&(u.l+=p?13:14),v.type){case"B":(!d||v.len!=8)&&l.WTF&&console.log("Skipping "+v.name+":"+v.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+v.name+":"+v.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+v.type)}if(u[u.l]!==13&&(u.l=m-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=m;var w=0,E=0;for(c[0]=[],E=0;E!=y.length;++E)c[0][E]=y[E].name;for(;g-- >0;){if(u[u.l]===42){u.l+=x;continue}for(++u.l,c[++w]=[],E=0,E=0;E!=y.length;++E){var T=u.slice(u.l,u.l+y[E].len);u.l+=y[E].len,qn(T,0);var S=cc(T);switch(y[E].type){case"C":S.trim().length&&(c[w][E]=S.replace(/([^\s])\s+$/,"$1"));break;case"D":S.length===8?(c[w][E]=new Date(Date.UTC(+S.slice(0,4),+S.slice(4,6)-1,+S.slice(6,8),0,0,0,0)),l&&l.UTC||(c[w][E]=jh(c[w][E]))):c[w][E]=S;break;case"F":c[w][E]=parseFloat(S.trim());break;case"+":case"I":c[w][E]=p?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(S.trim().toUpperCase()){case"Y":case"T":c[w][E]=!0;break;case"N":case"F":c[w][E]=!1;break;case"":case"\0":case"?":break;default:throw new Error("DBF Unrecognized L:|"+S+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));c[w][E]="##MEMO##"+(p?parseInt(S.trim(),10):T.read_shift(4));break;case"N":S=S.replace(/\u0000/g,"").trim(),S&&S!="."&&(c[w][E]=+S||0);break;case"@":c[w][E]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":{var A=T.read_shift(4),C=T.read_shift(4);if(A==0&&C==0)break;c[w][E]=new Date((A-2440588)*864e5+C),l&&l.UTC||(c[w][E]=jh(c[w][E]))}break;case"Y":c[w][E]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[w][E]=-T.read_shift(-8,"f");break;case"B":if(d&&y[E].len==8){c[w][E]=T.read_shift(8,"f");break}case"G":case"P":T.l+=y[E].len;break;case"0":if(y[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[E].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=y,c}function r(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=ag(n(o,c),c);return u["!cols"]=c.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete c.DBF,u}function i(o,l){try{var c=lf(r(o,l),l);return c.bookType="dbf",c}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){if(!o["!ref"])throw new Error("Cannot export empty sheet to DBF");var c=l||{},u=ta;if(+c.codepage>=0&&Va(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var f=A3(),h=D3(o,{header:1,raw:!0,cellDates:!0}),d=h[0],p=h.slice(1),g=o["!cols"]||[],m=0,x=0,y=0,v=1;for(m=0;m<d.length;++m){if(((g[m]||{}).DBF||{}).name){d[m]=g[m].DBF.name,++y;continue}if(d[m]!=null){if(++y,typeof d[m]=="number"&&(d[m]=d[m].toString(10)),typeof d[m]!="string")throw new Error("DBF Invalid column name "+d[m]+" |"+typeof d[m]+"|");if(d.indexOf(d[m])!==m){for(x=0;x<1024;++x)if(d.indexOf(d[m]+"_"+x)==-1){d[m]+="_"+x;break}}}}var _=Ln(o["!ref"]),b=[],w=[],E=[];for(m=0;m<=_.e.c-_.s.c;++m){var T="",S="",A=0,C=[];for(x=0;x<p.length;++x)p[x][m]!=null&&C.push(p[x][m]);if(C.length==0||d[m]==null){b[m]="?";continue}for(x=0;x<C.length;++x){switch(typeof C[x]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=C[x]instanceof Date?"D":"C";break;default:S="C"}A=Math.max(A,String(C[x]).length),T=T&&T!=S?"C":S}A>250&&(A=250),S=((g[m]||{}).DBF||{}).type,S=="C"&&g[m].DBF.len>A&&(A=g[m].DBF.len),T=="B"&&S=="N"&&(T="N",E[m]=g[m].DBF.dec,A=g[m].DBF.len),w[m]=T=="C"||S=="N"?A:s[T]||0,v+=w[m],b[m]=T}var F=f.next(32);for(F.write_shift(4,318902576),F.write_shift(4,p.length),F.write_shift(2,296+32*y),F.write_shift(2,v),m=0;m<4;++m)F.write_shift(4,0);var N=+t[ta]||3;for(F.write_shift(4,0|N<<8),e[N]!=+c.codepage&&(c.codepage&&console.error("DBF Unsupported codepage "+ta+", using 1252"),ta=1252),m=0,x=0;m<d.length;++m)if(d[m]!=null){var M=f.next(32),O=(d[m].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);M.write_shift(1,O,"sbcs"),M.write_shift(1,b[m]=="?"?"C":b[m],"sbcs"),M.write_shift(4,x),M.write_shift(1,w[m]||s[b[m]]||0),M.write_shift(1,E[m]||0),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(1,0),M.write_shift(4,0),M.write_shift(4,0),x+=w[m]||s[b[m]]||0}var D=f.next(264);for(D.write_shift(4,13),m=0;m<65;++m)D.write_shift(4,0);for(m=0;m<p.length;++m){var I=f.next(v);for(I.write_shift(1,0),x=0;x<d.length;++x)if(d[x]!=null)switch(b[x]){case"L":I.write_shift(1,p[m][x]==null?63:p[m][x]?84:70);break;case"B":I.write_shift(8,p[m][x]||0,"f");break;case"N":var U="0";for(typeof p[m][x]=="number"&&(U=p[m][x].toFixed(E[x]||0)),U.length>w[x]&&(U=U.slice(0,w[x])),y=0;y<w[x]-U.length;++y)I.write_shift(1,32);I.write_shift(1,U,"sbcs");break;case"D":p[m][x]?(I.write_shift(4,("0000"+p[m][x].getFullYear()).slice(-4),"sbcs"),I.write_shift(2,("00"+(p[m][x].getMonth()+1)).slice(-2),"sbcs"),I.write_shift(2,("00"+p[m][x].getDate()).slice(-2),"sbcs")):I.write_shift(8,"00000000","sbcs");break;case"C":var Y=I.l,X=String(p[m][x]!=null?p[m][x]:"").slice(0,w[x]);for(I.write_shift(1,X,"cpstr"),Y+=w[x]-I.l,y=0;y<Y;++y)I.write_shift(1,32);break}}return ta=u,f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}}(),Xje=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+oa(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1").replace("{","\\{")+"|\\|)","gm");try{t=new RegExp("\x1BN("+oa(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm")}catch{}var n=function(d,p){var g=e[p];return typeof g=="number"?b7(g):g},r=function(d,p,g){var m=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return m==59?d:b7(m)};e["|"]=254;var i=function(d){return d.replace(/\n/g,"\x1B :").replace(/\r/g,"\x1B =")};function s(d,p){switch(p.type){case"base64":return a(Bs(d),p);case"binary":return a(d,p);case"buffer":return a(_t&&Buffer.isBuffer(d)?d.toString("binary"):cc(d),p);case"array":return a(Wh(d),p)}throw new Error("Unrecognized type "+p.type)}function a(d,p){var g=d.split(/[\n\r]+/),m=-1,x=-1,y=0,v=0,_=[],b=[],w=null,E={},T=[],S=[],A=[],C=0,F,N={Workbook:{WBProps:{},Names:[]}};for(+p.codepage>=0&&Va(+p.codepage);y!==g.length;++y){C=0;var M=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),O=M.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),D=O[0],I;if(M.length>0)switch(D){case"ID":break;case"E":break;case"B":break;case"O":for(v=1;v<O.length;++v)switch(O[v].charAt(0)){case"V":{var U=parseInt(O[v].slice(1),10);U>=1&&U<=4&&(N.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(O[1].charAt(0)){case"P":b.push(M.slice(3).replace(/;;/g,";"));break}break;case"NN":{var Y={Sheet:0};for(v=1;v<O.length;++v)switch(O[v].charAt(0)){case"N":Y.Name=O[v].slice(1);break;case"E":Y.Ref=(p&&p.sheet||"Sheet1")+"!"+uh(O[v].slice(1));break}N.Workbook.Names.push(Y)}break;case"C":var X=!1,de=!1,le=!1,ye=!1,ve=-1,Ee=-1,Ne="",Xe="z",z="";for(v=1;v<O.length;++v)switch(O[v].charAt(0)){case"A":z=O[v].slice(1);break;case"X":x=parseInt(O[v].slice(1),10)-1,de=!0;break;case"Y":for(m=parseInt(O[v].slice(1),10)-1,de||(x=0),F=_.length;F<=m;++F)_[F]=[];break;case"K":I=O[v].slice(1),I.charAt(0)==='"'?(I=I.slice(1,I.length-1),Xe="s"):I==="TRUE"||I==="FALSE"?(I=I==="TRUE",Xe="b"):I.charAt(0)=="#"&&Cr[I]!=null?(Xe="e",I=Cr[I]):isNaN(Ns(I))||(I=Ns(I),Xe="n",w!==null&&no(w)&&p.cellDates&&(I=pu(N.Workbook.WBProps.date1904?I+1462:I),Xe=typeof I=="number"?"n":"d")),X=!0;break;case"E":ye=!0,Ne=uh(O[v].slice(1),{r:m,c:x});break;case"S":le=!0;break;case"G":break;case"R":ve=parseInt(O[v].slice(1),10)-1;break;case"C":Ee=parseInt(O[v].slice(1),10)-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}if(X&&(_[m][x]?(_[m][x].t=Xe,_[m][x].v=I):_[m][x]={t:Xe,v:I},w&&(_[m][x].z=w),p.cellText!==!1&&w&&(_[m][x].w=Us(_[m][x].z,_[m][x].v,{date1904:N.Workbook.WBProps.date1904})),w=null),le){if(ye)throw new Error("SYLK shared formula cannot have own formula");var q=ve>-1&&_[ve][Ee];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");Ne=zne(q[1],{r:m-ve,c:x-Ee})}Ne&&(_[m][x]?_[m][x].f=Ne:_[m][x]={t:"n",f:Ne}),z&&(_[m][x]||(_[m][x]={t:"z"}),_[m][x].c=[{a:"SheetJSYLK",t:z}]);break;case"F":var G=0;for(v=1;v<O.length;++v)switch(O[v].charAt(0)){case"X":x=parseInt(O[v].slice(1),10)-1,++G;break;case"Y":for(m=parseInt(O[v].slice(1),10)-1,F=_.length;F<=m;++F)_[F]=[];break;case"M":C=parseInt(O[v].slice(1),10)/20;break;case"F":break;case"G":break;case"P":w=b[parseInt(O[v].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(A=O[v].slice(1).split(" "),F=parseInt(A[0],10);F<=parseInt(A[1],10);++F)C=parseInt(A[2],10),S[F-1]=C===0?{hidden:!0}:{wch:C};break;case"C":x=parseInt(O[v].slice(1),10)-1,S[x]||(S[x]={});break;case"R":m=parseInt(O[v].slice(1),10)-1,T[m]||(T[m]={}),C>0?(T[m].hpt=C,T[m].hpx=tx(C)):C===0&&(T[m].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}G<1&&(w=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}}return T.length>0&&(E["!rows"]=T),S.length>0&&(E["!cols"]=S),S.forEach(function(H){Ap(H)}),p&&p.sheetRows&&(_=_.slice(0,p.sheetRows)),[_,E,N]}function o(d,p){var g=s(d,p),m=g[0],x=g[1],y=g[2],v=Wn(p);v.date1904=(((y||{}).Workbook||{}).WBProps||{}).date1904;var _=ag(m,v);oa(x).forEach(function(w){_[w]=x[w]});var b=lf(_,p);return oa(y).forEach(function(w){b[w]=y[w]}),b.bookType="sylk",b}function l(d,p,g,m,x,y){var v="C;Y"+(g+1)+";X"+(m+1)+";K";switch(d.t){case"n":v+=isFinite(d.v)?d.v||0:fs[isNaN(d.v)?36:7],d.f&&!d.F&&(v+=";E"+Cqe(d.f,{r:g,c:m}));break;case"b":v+=d.v?"TRUE":"FALSE";break;case"e":v+=d.w||fs[d.v]||d.v;break;case"d":v+=rr(Ir(d.v,y),y);break;case"s":v+='"'+(d.v==null?"":String(d.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function c(d,p,g){var m="C;Y"+(p+1)+";X"+(g+1)+";A";return m+=i(d.map(function(x){return x.t}).join("")),m}function u(d,p){p.forEach(function(g,m){var x="F;W"+(m+1)+" "+(m+1)+" ";g.hidden?x+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Vb(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Wb(g.wpx)),typeof g.wch=="number"&&(x+=Math.round(g.wch))),x.charAt(x.length-1)!=" "&&d.push(x)})}function f(d,p){p.forEach(function(g,m){var x="F;";g.hidden?x+="M0;":g.hpt?x+="M"+20*g.hpt+";":g.hpx&&(x+="M"+20*Bne(g.hpx)+";"),x.length>2&&d.push(x+"R"+(m+1))})}function h(d,p,g){p||(p={}),p._formats=["General"];var m=["ID;PSheetJS;N;E"],x=[],y=Ln(d["!ref"]||"A1"),v,_=d["!data"]!=null,b=`\r
`,w=(((g||{}).Workbook||{}).WBProps||{}).date1904,E="General";m.push("P;PGeneral");var T=y.s.r,S=y.s.c,A=[];if(d["!ref"]){for(T=y.s.r;T<=y.e.r;++T)if(!(_&&!d["!data"][T])){for(A=[],S=y.s.c;S<=y.e.c;++S)v=_?d["!data"][T][S]:d[Lt(S)+qt(T)],!(!v||!v.c)&&A.push(c(v.c,T,S));A.length&&x.push(A.join(b))}}if(d["!ref"]){for(T=y.s.r;T<=y.e.r;++T)if(!(_&&!d["!data"][T])){for(A=[],S=y.s.c;S<=y.e.c;++S)if(v=_?d["!data"][T][S]:d[Lt(S)+qt(T)],!(!v||v.v==null&&(!v.f||v.F))){if((v.z||(v.t=="d"?st[14]:"General"))!=E){var C=p._formats.indexOf(v.z);C==-1&&(p._formats.push(v.z),C=p._formats.length-1,m.push("P;P"+v.z.replace(/;/g,";;"))),A.push("F;P"+C+";Y"+(T+1)+";X"+(S+1))}A.push(l(v,d,T,S,p,w))}x.push(A.join(b))}}return m.push("F;P0;DG0G8;M255"),d["!cols"]&&u(m,d["!cols"]),d["!rows"]&&f(m,d["!rows"]),d["!ref"]&&m.push("B;Y"+(y.e.r-y.s.r+1)+";X"+(y.e.c-y.s.c+1)+";D"+[y.s.c,y.s.r,y.e.c,y.e.r].join(" ")),m.push("O;L;D;B"+(w?";V4":"")+";K47;G100 0.001"),delete p._formats,m.join(b)+b+x.join(b)+b+"E"+b}return{to_workbook:o,from_sheet:h}}(),Yje=function(){function e(o,l){switch(l.type){case"base64":return t(Bs(o),l);case"binary":return t(o,l);case"buffer":return t(_t&&Buffer.isBuffer(o)?o.toString("binary"):cc(o),l);case"array":return t(Wh(o),l)}throw new Error("Unrecognized type "+l.type)}function t(o,l){for(var c=o.split(`
`),u=-1,f=-1,h=0,d=[];h!==c.length;++h){if(c[h].trim()==="BOT"){d[++u]=[],f=0;continue}if(!(u<0)){var p=c[h].trim().split(","),g=p[0],m=p[1];++h;for(var x=c[h]||"";(x.match(/["]/g)||[]).length&1&&h<c.length-1;)x+=`
`+c[++h];switch(x=x.trim(),+g){case-1:if(x==="BOT"){d[++u]=[],f=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?d[u][f]=!0:x==="FALSE"?d[u][f]=!1:isNaN(Ns(m))?isNaN(Z1(m).getDate())?d[u][f]=m:(d[u][f]=Ir(m),l&&l.UTC||(d[u][f]=jh(d[u][f]))):d[u][f]=Ns(m),++f;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),d[u][f++]=x!==""?x:null;break}if(x==="EOD")break}}return l&&l.sheetRows&&(d=d.slice(0,l.sheetRows)),d}function n(o,l){return ag(e(o,l),l)}function r(o,l){var c=lf(n(o,l),l);return c.bookType="dif",c}function i(o,l){return"0,"+String(o)+`\r
`+l}function s(o){return`1,0\r
"`+o.replace(/"/g,'""')+'"'}function a(o){if(!o["!ref"])throw new Error("Cannot export empty sheet to DIF");for(var l=Ln(o["!ref"]),c=o["!data"]!=null,u=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(l.e.r-l.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(l.e.c-l.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],f=l.s.r;f<=l.e.r;++f){for(var h=c?o["!data"][f]:[],d=`-1,0\r
BOT\r
`,p=l.s.c;p<=l.e.c;++p){var g=c?h&&h[p]:o[$t({r:f,c:p})];if(g==null){d+=`1,0\r
""\r
`;continue}switch(g.t){case"n":g.w!=null?d+="0,"+g.w+`\r
V`:g.v!=null?d+=i(g.v,"V"):g.f!=null&&!g.F?d+=s("="+g.f):d+=`1,0\r
""`;break;case"b":d+=g.v?i(1,"TRUE"):i(0,"FALSE");break;case"s":d+=s(isNaN(+g.v)?g.v:'="'+g.v+'"');break;case"d":g.w||(g.w=Us(g.z||st[14],rr(Ir(g.v)))),d+=i(g.w,"V");break;default:d+=`1,0\r
""`}d+=`\r
`}u.push(d)}return u.join("")+`-1,0\r
EOD`}return{to_workbook:r,to_sheet:n,from_sheet:a}}(),Kje=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(f,h){for(var d=f.split(`
`),p=-1,g=-1,m=0,x=[];m!==d.length;++m){var y=d[m].trim().split(":");if(y[0]==="cell"){var v=ri(y[1]);if(x.length<=v.r)for(p=x.length;p<=v.r;++p)x[p]||(x[p]=[]);switch(p=v.r,g=v.c,y[2]){case"t":x[p][g]=e(y[3]);break;case"v":x[p][g]=+y[3];break;case"vtf":var _=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[p][g]=!!+y[4];break;default:x[p][g]=y[y.length-1].charAt(0)=="#"?{t:"e",v:Cr[y[y.length-1]]}:+y[4];break}y[2]=="vtf"&&(x[p][g]=[x[p][g],_])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function r(f,h){return ag(n(f,h),h)}function i(f,h){return lf(r(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(f){if(!f||!f["!ref"])return"";for(var h=[],d=[],p,g="",m=vd(f["!ref"]),x=f["!data"]!=null,y=m.s.r;y<=m.e.r;++y)for(var v=m.s.c;v<=m.e.c;++v)if(g=$t({r:y,c:v}),p=x?(f["!data"][y]||[])[v]:f[g],!(!p||p.v==null||p.t==="z")){switch(d=["cell",g,"t"],p.t){case"s":d.push(t(p.v));break;case"b":d[2]="vt"+(p.f?"f":"c"),d[3]="nl",d[4]=p.v?"1":"0",d[5]=t(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var _=rr(Ir(p.v));d[2]="vtc",d[3]="nd",d[4]=""+_,d[5]=p.w||Us(p.z||st[14],_);break;case"n":isFinite(p.v)?p.f?(d[2]="vtf",d[3]="n",d[4]=p.v,d[5]=t(p.f)):(d[2]="v",d[3]=p.v):(d[2]="vt"+(p.f?"f":"c"),d[3]="e"+fs[isNaN(p.v)?36:7],d[4]="0",d[5]=p.f||d[3].slice(1),d[6]="e",d[7]=d[3].slice(1));break;case"e":continue}h.push(d.join(":"))}return h.push("sheet:c:"+(m.e.c-m.s.c+1)+":r:"+(m.e.r-m.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(f){return[s,a,o,a,c(f),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}}(),Q1=function(){function e(u,f,h,d,p){p.raw?f[h][d]=u:u===""||(u==="TRUE"?f[h][d]=!0:u==="FALSE"?f[h][d]=!1:isNaN(Ns(u))?isNaN(Z1(u).getDate())?u.charCodeAt(0)==35&&Cr[u]!=null?f[h][d]={t:"e",v:Cr[u],w:u}:f[h][d]=u:f[h][d]=Ir(u):f[h][d]=Ns(u))}function t(u,f){var h=f||{},d=[];if(!u||u.length===0)return d;for(var p=u.split(/[\r\n]/),g=p.length-1;g>=0&&p[g].length===0;)--g;for(var m=10,x=0,y=0;y<=g;++y)x=p[y].indexOf(" "),x==-1?x=p[y].length:x++,m=Math.max(m,x);for(y=0;y<=g;++y){d[y]=[];var v=0;for(e(p[y].slice(0,m).trim(),d,y,v,h),v=1;v<=(p[y].length-m)/10+1;++v)e(p[y].slice(m+(v-1)*10,m+v*10).trim(),d,y,v,h)}return h.sheetRows&&(d=d.slice(0,h.sheetRows)),d}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var f={},h=!1,d=0,p=0;d<u.length;++d)(p=u.charCodeAt(d))==34?h=!h:!h&&p in n&&(f[p]=(f[p]||0)+1);p=[];for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&p.push([f[d],d]);if(!p.length){f=r;for(d in f)Object.prototype.hasOwnProperty.call(f,d)&&p.push([f[d],d])}return p.sort(function(g,m){return g[0]-m[0]||r[g[1]]-r[m[1]]}),n[p.pop()[1]]||44}function s(u,f){var h=f||{},d="",p={};h.dense&&(p["!data"]=[]);var g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(d=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(d=u.charAt(4),u=u.slice(6)):d=i(u.slice(0,1024)):h&&h.FS?d=h.FS:d=i(u.slice(0,1024));var m=0,x=0,y=0,v=0,_=0,b=d.charCodeAt(0),w=!1,E=0,T=u.charCodeAt(0),S=h.dateNF!=null?WHe(h.dateNF):null;function A(){var C=u.slice(v,_);C.slice(-1)=="\r"&&(C=C.slice(0,-1));var F={};if(C.charAt(0)=='"'&&C.charAt(C.length-1)=='"'&&(C=C.slice(1,-1).replace(/""/g,'"')),h.cellText!==!1&&(F.w=C),C.length===0)F.t="z";else if(h.raw)F.t="s",F.v=C;else if(C.trim().length===0)F.t="s",F.v=C;else if(C.charCodeAt(0)==61)C.charCodeAt(1)==34&&C.charCodeAt(C.length-1)==34?(F.t="s",F.v=C.slice(2,-1).replace(/""/g,'"')):Fqe(C)?(F.t="s",F.f=C.slice(1),F.v=C):(F.t="s",F.v=C);else if(C=="TRUE")F.t="b",F.v=!0;else if(C=="FALSE")F.t="b",F.v=!1;else if(!isNaN(y=Ns(C)))F.t="n",F.v=y;else if(!isNaN((y=Z1(C)).getDate())||S&&C.match(S)){if(F.z=h.dateNF||st[14],S&&C.match(S)){var N=jHe(C,h.dateNF,C.match(S)||[]);y=Ir(N),h&&h.UTC===!1&&(y=jh(y))}else h&&h.UTC===!1?y=jh(y):h.cellText!==!1&&h.dateNF&&(F.w=Us(F.z,y));h.cellDates?(F.t="d",F.v=y):(F.t="n",F.v=rr(y)),h.cellNF||delete F.z}else C.charCodeAt(0)==35&&Cr[C]!=null?(F.t="e",F.w=C,F.v=Cr[C]):(F.t="s",F.v=C);if(F.t=="z"||(h.dense?(p["!data"][m]||(p["!data"][m]=[]),p["!data"][m][x]=F):p[$t({c:x,r:m})]=F),v=_+1,T=u.charCodeAt(v),g.e.c<x&&(g.e.c=x),g.e.r<m&&(g.e.r=m),E==b)++x;else if(x=0,++m,h.sheetRows&&h.sheetRows<=m)return!0}e:for(;_<u.length;++_)switch(E=u.charCodeAt(_)){case 34:T===34&&(w=!w);break;case 13:if(w)break;u.charCodeAt(_+1)==10&&++_;case b:case 10:if(!w&&A())break e;break}return _-v>0&&A(),p["!ref"]=wt(g),p}function a(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,f):ag(t(u,f),f)}function o(u,f){var h="",d=f.type=="string"?[0,0,0,0]:P$(u,f);switch(f.type){case"base64":h=Bs(u);break;case"binary":h=u;break;case"buffer":f.codepage==65001?h=u.toString("utf8"):(f.codepage,h=_t&&Buffer.isBuffer(u)?u.toString("binary"):cc(u));break;case"array":h=Wh(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+f.type)}return d[0]==239&&d[1]==187&&d[2]==191?h=en(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=en(h):f.type=="binary",h.slice(0,19)=="socialcalc:version:"?Kje.to_sheet(f.type=="string"?h:en(h),f):a(h,f)}function l(u,f){return lf(o(u,f),f)}function c(u){var f=[];if(!u["!ref"])return"";for(var h=Ln(u["!ref"]),d,p=u["!data"]!=null,g=h.s.r;g<=h.e.r;++g){for(var m=[],x=h.s.c;x<=h.e.c;++x){var y=$t({r:g,c:x});if(d=p?(u["!data"][g]||[])[x]:u[y],!d||d.v==null){m.push("          ");continue}for(var v=(d.w||(Lu(d),d.w)||"").slice(0,10);v.length<10;)v+=" ";m.push(v+(x===0?" ":""))}f.push(m.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}();function Jje(e,t){var n=t||{},r=!!n.WTF;n.WTF=!0;try{var i=Xje.to_workbook(e,n);return n.WTF=r,i}catch(s){if(n.WTF=r,s.message.indexOf("SYLK bad record ID")==-1&&r)throw s;return Q1.to_workbook(e,t)}}var Ym=function(){function e(z,q,G){if(z){qn(z,z.l||0);for(var H=G.Enum||ye;z.l<z.length;){var J=z.read_shift(2),k=H[J]||H[65535],L=z.read_shift(2),K=z.l+L,Z=k.f&&k.f(z,L,G);if(z.l=K,q(Z,k,J))return}}}function t(z,q){switch(q.type){case"base64":return r(_s(Bs(z)),q);case"binary":return r(_s(z),q);case"buffer":case"array":return r(z,q)}throw"Unsupported type "+q.type}var n=["mmmm","dd-mmm-yyyy","dd-mmm","mmm-yyyy","@","mm/dd","hh:mm:ss AM/PM","hh:mm AM/PM","mm/dd/yyyy","mm/dd","hh:mm:ss","hh:mm"];function r(z,q){if(!z)return z;var G=q||{},H={},J="Sheet1",k="",L=0,K={},Z=[],ee=[],te=[];G.dense&&(te=H["!data"]=[]);var he={s:{r:0,c:0},e:{r:0,c:0}},xe=G.sheetRows||0,_e={};if(z[4]==81&&z[5]==80&&z[6]==87)return Xe(z,q);if(z[2]==0&&(z[3]==8||z[3]==9)&&z.length>=16&&z[14]==5&&z[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(z[2]==2)G.Enum=ye,e(z,function(ae,Ge,et){switch(et){case 0:G.vers=ae,ae>=4096&&(G.qpro=!0);break;case 255:G.vers=ae,G.works=!0;break;case 6:he=ae;break;case 204:ae&&(k=ae);break;case 222:k=ae;break;case 15:case 51:(!G.qpro&&!G.works||et==51)&&ae[1].v.charCodeAt(0)<48&&(ae[1].v=ae[1].v.slice(1)),(G.works||G.works2)&&(ae[1].v=ae[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:(ae[2]&112)==112&&(ae[2]&15)>1&&(ae[2]&15)<15&&(ae[1].z=G.dateNF||n[(ae[2]&15)-1]||st[14],G.cellDates&&(ae[1].v=pu(ae[1].v),ae[1].t=typeof ae[1].v=="number"?"n":"d")),G.qpro&&ae[3]>L&&(H["!ref"]=wt(he),K[J]=H,Z.push(J),H={},G.dense&&(te=H["!data"]=[]),he={s:{r:0,c:0},e:{r:0,c:0}},L=ae[3],J=k||"Sheet"+(L+1),k="");var Qe=G.dense?(te[ae[0].r]||[])[ae[0].c]:H[$t(ae[0])];if(Qe){Qe.t=ae[1].t,Qe.v=ae[1].v,ae[1].z!=null&&(Qe.z=ae[1].z),ae[1].f!=null&&(Qe.f=ae[1].f),_e=Qe;break}G.dense?(te[ae[0].r]||(te[ae[0].r]=[]),te[ae[0].r][ae[0].c]=ae[1]):H[$t(ae[0])]=ae[1],_e=ae[1];break;case 21509:G.works2=!0;break;case 21506:ae==5281&&(_e.z="hh:mm:ss",G.cellDates&&_e.t=="n"&&(_e.v=pu(_e.v),_e.t=typeof _e.v=="number"?"n":"d"));break}},G);else if(z[2]==26||z[2]==14)G.Enum=ve,z[2]==14&&(G.qpro=!0,z.l=0),e(z,function(ae,Ge,et){switch(et){case 204:J=ae;break;case 22:ae[1].v.charCodeAt(0)<48&&(ae[1].v=ae[1].v.slice(1)),ae[1].v=ae[1].v.replace(/\x0F./g,function(Qe){return String.fromCharCode(Qe.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(ae[3]>L&&(H["!ref"]=wt(he),K[J]=H,Z.push(J),H={},G.dense&&(te=H["!data"]=[]),he={s:{r:0,c:0},e:{r:0,c:0}},L=ae[3],J="Sheet"+(L+1)),xe>0&&ae[0].r>=xe)break;G.dense?(te[ae[0].r]||(te[ae[0].r]=[]),te[ae[0].r][ae[0].c]=ae[1]):H[$t(ae[0])]=ae[1],he.e.c<ae[0].c&&(he.e.c=ae[0].c),he.e.r<ae[0].r&&(he.e.r=ae[0].r);break;case 27:ae[14e3]&&(ee[ae[14e3][0]]=ae[14e3][1]);break;case 1537:ee[ae[0]]=ae[1],ae[0]==L&&(J=ae[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+z[2]);if(H["!ref"]=wt(he),K[k||J]=H,Z.push(k||J),!ee.length)return{SheetNames:Z,Sheets:K};for(var ge={},me=[],be=0;be<ee.length;++be)K[Z[be]]?(me.push(ee[be]||Z[be]),ge[ee[be]]=K[ee[be]]||K[Z[be]]):(me.push(ee[be]),ge[ee[be]]={"!ref":"A1"});return{SheetNames:me,Sheets:ge}}function i(z,q){var G=q||{};if(+G.codepage>=0&&Va(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var H=A3();if(!z["!ref"])throw new Error("Cannot export empty sheet to WK1");var J=Ln(z["!ref"]),k=z["!data"]!=null,L=[];gs(H,0,a(1030)),gs(H,6,c(J));for(var K=Math.min(J.e.r,8191),Z=J.s.c;Z<=J.e.c;++Z)L[Z]=Lt(Z);for(var ee=J.s.r;ee<=K;++ee){var te=qt(ee);for(Z=J.s.c;Z<=J.e.c;++Z){var he=k?(z["!data"][ee]||[])[Z]:z[L[Z]+te];if(!(!he||he.t=="z"))switch(he.t){case"n":(he.v|0)==he.v&&he.v>=-32768&&he.v<=32767?gs(H,13,m(ee,Z,he)):gs(H,14,y(ee,Z,he));break;case"d":var xe=rr(he.v);(xe|0)==xe&&xe>=-32768&&xe<=32767?gs(H,13,m(ee,Z,{v:xe,z:he.z||st[14]})):gs(H,14,y(ee,Z,{v:xe,z:he.z||st[14]}));break;default:var _e=Lu(he);gs(H,15,d(ee,Z,_e.slice(0,239)))}}}return gs(H,1),H.end()}function s(z,q){var G=q||{};if(+G.codepage>=0&&Va(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var H=A3();gs(H,0,o(z));for(var J=0,k=0;J<z.SheetNames.length;++J)(z.Sheets[z.SheetNames[J]]||{})["!ref"]&&gs(H,27,le(z.SheetNames[J],k++));var L=0;for(J=0;J<z.SheetNames.length;++J){var K=z.Sheets[z.SheetNames[J]];if(!(!K||!K["!ref"])){for(var Z=Ln(K["!ref"]),ee=K["!data"]!=null,te=[],he=Math.min(Z.e.r,8191),xe=Z.s.r;xe<=he;++xe)for(var _e=qt(xe),ge=Z.s.c;ge<=Z.e.c;++ge){xe===Z.s.r&&(te[ge]=Lt(ge));var me=te[ge]+_e,be=ee?(K["!data"][xe]||[])[ge]:K[me];if(!(!be||be.t=="z"))if(be.t=="n")gs(H,23,N(xe,ge,L,be.v));else{var ae=Lu(be);gs(H,22,A(xe,ge,L,ae.slice(0,239)))}}++L}}return gs(H,1),H.end()}function a(z){var q=Hn(2);return q.write_shift(2,z),q}function o(z){var q=Hn(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var G=0,H=0,J=0,k=0;k<z.SheetNames.length;++k){var L=z.SheetNames[k],K=z.Sheets[L];if(!(!K||!K["!ref"])){++J;var Z=vd(K["!ref"]);G<Z.e.r&&(G=Z.e.r),H<Z.e.c&&(H=Z.e.c)}}return G>8191&&(G=8191),q.write_shift(2,G),q.write_shift(1,J),q.write_shift(1,H),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function l(z,q,G){var H={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&G.qpro?(H.s.c=z.read_shift(1),z.l++,H.s.r=z.read_shift(2),H.e.c=z.read_shift(1),z.l++,H.e.r=z.read_shift(2),H):(H.s.c=z.read_shift(2),H.s.r=z.read_shift(2),q==12&&G.qpro&&(z.l+=2),H.e.c=z.read_shift(2),H.e.r=z.read_shift(2),q==12&&G.qpro&&(z.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function c(z){var q=Hn(8);return q.write_shift(2,z.s.c),q.write_shift(2,z.s.r),q.write_shift(2,z.e.c),q.write_shift(2,z.e.r),q}function u(z,q,G){var H=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(H[0].c=z.read_shift(1),H[3]=z.read_shift(1),H[0].r=z.read_shift(2),z.l+=2):G.works?(H[0].c=z.read_shift(2),H[0].r=z.read_shift(2),H[2]=z.read_shift(2)):(H[2]=z.read_shift(1),H[0].c=z.read_shift(2),H[0].r=z.read_shift(2)),H}function f(z){return z.z&&no(z.z)?240|(n.indexOf(z.z)+1||2):255}function h(z,q,G){var H=z.l+q,J=u(z,q,G);if(J[1].t="s",(G.vers&65534)==20768){z.l++;var k=z.read_shift(1);return J[1].v=z.read_shift(k,"utf8"),J}return G.qpro&&z.l++,J[1].v=z.read_shift(H-z.l,"cstr"),J}function d(z,q,G){var H=Hn(7+G.length);H.write_shift(1,255),H.write_shift(2,q),H.write_shift(2,z),H.write_shift(1,39);for(var J=0;J<H.length;++J){var k=G.charCodeAt(J);H.write_shift(1,k>=128?95:k)}return H.write_shift(1,0),H}function p(z,q,G){var H=z.l+q,J=u(z,q,G);if(J[1].t="s",G.vers==20768){var k=z.read_shift(1);return J[1].v=z.read_shift(k,"utf8"),J}return J[1].v=z.read_shift(H-z.l,"cstr"),J}function g(z,q,G){var H=u(z,q,G);return H[1].v=z.read_shift(2,"i"),H}function m(z,q,G){var H=Hn(7);return H.write_shift(1,f(G)),H.write_shift(2,q),H.write_shift(2,z),H.write_shift(2,G.v,"i"),H}function x(z,q,G){var H=u(z,q,G);return H[1].v=z.read_shift(8,"f"),H}function y(z,q,G){var H=Hn(13);return H.write_shift(1,f(G)),H.write_shift(2,q),H.write_shift(2,z),H.write_shift(8,G.v,"f"),H}function v(z,q,G){var H=z.l+q,J=u(z,q,G);if(J[1].v=z.read_shift(8,"f"),G.qpro)z.l=H;else{var k=z.read_shift(2);E(z.slice(z.l,z.l+k),J),z.l+=k}return J}function _(z,q,G){var H=q&32768;return q&=-32769,q=(H?z:0)+(q>=8192?q-16384:q),(H?"":"$")+(G?Lt(q):qt(q))}var b={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],54:["DATE",3],63:["ROUND",2],64:["TIME",3],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function E(z,q){qn(z,0);for(var G=[],H=0,J="",k="",L="",K="";z.l<z.length;){var Z=z[z.l++];switch(Z){case 0:G.push(z.read_shift(8,"f"));break;case 1:k=_(q[0].c,z.read_shift(2),!0),J=_(q[0].r,z.read_shift(2),!1),G.push(k+J);break;case 2:{var ee=_(q[0].c,z.read_shift(2),!0),te=_(q[0].r,z.read_shift(2),!1);k=_(q[0].c,z.read_shift(2),!0),J=_(q[0].r,z.read_shift(2),!1),G.push(ee+te+":"+k+J)}break;case 3:if(z.l<z.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(z.read_shift(2));break;case 6:{for(var he="";Z=z[z.l++];)he+=String.fromCharCode(Z);G.push('"'+he.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:K=G.pop(),L=G.pop(),G.push(["AND","OR"][Z-20]+"("+L+","+K+")");break;default:if(Z<32&&w[Z])K=G.pop(),L=G.pop(),G.push(L+w[Z]+K);else if(b[Z]){if(H=b[Z][1],H==69&&(H=z[z.l++]),H>G.length){console.error("WK1 bad formula parse 0x"+Z.toString(16)+":|"+G.join("|")+"|");return}var xe=G.slice(-H);G.length-=H,G.push(b[Z][0]+"("+xe.join(",")+")")}else return Z<=7?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=24?console.error("WK1 unsupported op "+Z.toString(16)):Z<=30?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=115?console.error("WK1 unsupported function opcode "+Z.toString(16)):console.error("WK1 unrecognized opcode "+Z.toString(16))}}G.length==1?q[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function T(z){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=z.read_shift(2),q[3]=z[z.l++],q[0].c=z[z.l++],q}function S(z,q){var G=T(z);return G[1].t="s",G[1].v=z.read_shift(q-4,"cstr"),G}function A(z,q,G,H){var J=Hn(6+H.length);J.write_shift(2,z),J.write_shift(1,G),J.write_shift(1,q),J.write_shift(1,39);for(var k=0;k<H.length;++k){var L=H.charCodeAt(k);J.write_shift(1,L>=128?95:L)}return J.write_shift(1,0),J}function C(z,q){var G=T(z);G[1].v=z.read_shift(2);var H=G[1].v>>1;if(G[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return G[1].v=H,G}function F(z,q){var G=T(z),H=z.read_shift(4),J=z.read_shift(4),k=z.read_shift(2);if(k==65535)return H===0&&J===3221225472?(G[1].t="e",G[1].v=15):H===0&&J===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var L=k&32768;return k=(k&32767)-16446,G[1].v=(1-L*2)*(J*Math.pow(2,k+32)+H*Math.pow(2,k)),G}function N(z,q,G,H){var J=Hn(14);if(J.write_shift(2,z),J.write_shift(1,G),J.write_shift(1,q),H==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var k=0,L=0,K=0,Z=0;return H<0&&(k=1,H=-H),L=Math.log2(H)|0,H/=Math.pow(2,L-31),Z=H>>>0,(Z&2147483648)==0&&(H/=2,++L,Z=H>>>0),H-=Z,Z|=2147483648,Z>>>=0,H*=Math.pow(2,32),K=H>>>0,J.write_shift(4,K),J.write_shift(4,Z),L+=16383+(k?32768:0),J.write_shift(2,L),J}function M(z,q){var G=F(z);return z.l+=q-14,G}function O(z,q){var G=T(z),H=z.read_shift(4);return G[1].v=H>>6,G}function D(z,q){var G=T(z),H=z.read_shift(8,"f");return G[1].v=H,G}function I(z,q){var G=D(z);return z.l+=q-12,G}function U(z,q){return z[z.l+q-1]==0?z.read_shift(q,"cstr"):""}function Y(z,q){var G=z[z.l++];G>q-1&&(G=q-1);for(var H="";H.length<G;)H+=String.fromCharCode(z[z.l++]);return H}function X(z,q,G){if(!(!G.qpro||q<21)){var H=z.read_shift(1);z.l+=17,z.l+=1,z.l+=2;var J=z.read_shift(q-21,"cstr");return[H,J]}}function de(z,q){for(var G={},H=z.l+q;z.l<H;){var J=z.read_shift(2);if(J==14e3){for(G[J]=[0,""],G[J][0]=z.read_shift(2);z[z.l];)G[J][1]+=String.fromCharCode(z[z.l]),z.l++;z.l++}}return G}function le(z,q){var G=Hn(5+z.length);G.write_shift(2,14e3),G.write_shift(2,q);for(var H=0;H<z.length;++H){var J=z.charCodeAt(H);G[G.l++]=J>127?95:J}return G[G.l++]=0,G}var ye={0:{n:"BOF",f:Sn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:U},222:{n:"SHEETNAMELP",f:Y},255:{n:"BOF",f:Sn},21506:{n:"WKSNF",f:Sn},65535:{n:""}},ve={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:F},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:de},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:I},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:U},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:X},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}},Ee={5:"dd-mmm-yy",6:"dd-mmm",7:"mmm-yy",8:"mm/dd/yy",10:"hh:mm:ss AM/PM",11:"hh:mm AM/PM",14:"dd-mmm-yyyy",15:"mmm-yyyy",34:"0.00",50:"0.00;[Red]0.00",66:"0.00;(0.00)",82:"0.00;[Red](0.00)",162:'"$"#,##0.00;\\("$"#,##0.00\\)',288:"0%",304:"0E+00",320:"# ?/?"};function Ne(z){var q=z.read_shift(2),G=z.read_shift(1);if(G!=0)throw"unsupported QPW string type "+G.toString(16);return z.read_shift(q,"sbcs-cont")}function Xe(z,q){qn(z,0);var G=q||{},H={};G.dense&&(H["!data"]=[]);var J=[],k="",L={s:{r:-1,c:-1},e:{r:-1,c:-1}},K=0,Z=0,ee=0,te=0,he={SheetNames:[],Sheets:{}},xe=[];e:for(;z.l<z.length;){var _e=z.read_shift(2),ge=z.read_shift(2),me=z.slice(z.l,z.l+ge);switch(qn(me,0),_e){case 1:if(me.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 8:break;case 10:for(var be=me.read_shift(4),ae=(me.length-me.l)/be|0,Ge=0;Ge<be;++Ge){var et=me.l+ae,Qe={};me.l+=2,Qe.numFmtId=me.read_shift(2),Ee[Qe.numFmtId]&&(Qe.z=Ee[Qe.numFmtId]),me.l=et,xe.push(Qe)}break;case 1025:break;case 1026:break;case 1031:for(me.l+=12;me.l<me.length;)K=me.read_shift(2),Z=me.read_shift(1),J.push(me.read_shift(K,"cstr"));break;case 1032:break;case 1537:{var dt=me.read_shift(2);H={},G.dense&&(H["!data"]=[]),L.s.c=me.read_shift(2),L.e.c=me.read_shift(2),L.s.r=me.read_shift(4),L.e.r=me.read_shift(4),me.l+=4,me.l+2<me.length&&(K=me.read_shift(2),Z=me.read_shift(1),k=K==0?"":me.read_shift(K,"cstr")),k||(k=Lt(dt))}break;case 1538:{if(L.s.c>255||L.s.r>999999)break;L.e.c<L.s.c&&(L.e.c=L.s.c),L.e.r<L.s.r&&(L.e.r=L.s.r),H["!ref"]=wt(L),mv(he,H,k)}break;case 2561:ee=me.read_shift(2),L.e.c<ee&&(L.e.c=ee),L.s.c>ee&&(L.s.c=ee),te=me.read_shift(4),L.s.r>te&&(L.s.r=te),te=me.read_shift(4),L.e.r<te&&(L.e.r=te);break;case 3073:{te=me.read_shift(4),K=me.read_shift(4),L.s.r>te&&(L.s.r=te),L.e.r<te+K-1&&(L.e.r=te+K-1);for(var Zt=Lt(ee);me.l<me.length;){var De={t:"z"},ct=me.read_shift(1),Dt=-1;ct&128&&(Dt=me.read_shift(2));var an=ct&64?me.read_shift(2)-1:0;switch(ct&31){case 0:break;case 1:break;case 2:De={t:"n",v:me.read_shift(2)};break;case 3:De={t:"n",v:me.read_shift(2,"i")};break;case 4:De={t:"n",v:PS(me)};break;case 5:De={t:"n",v:me.read_shift(8,"f")};break;case 7:De={t:"s",v:J[Z=me.read_shift(4)-1]};break;case 8:De={t:"n",v:me.read_shift(8,"f")},me.l+=2,me.l+=4,isNaN(De.v)&&(De={t:"e",v:15});break;default:throw"Unrecognized QPW cell type "+(ct&31)}Dt!=-1&&(xe[Dt-1]||{}).z&&(De.z=xe[Dt-1].z);var Vs=0;if(ct&32)switch(ct&31){case 2:Vs=me.read_shift(2);break;case 3:Vs=me.read_shift(2,"i");break;case 7:Vs=me.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(ct&31)}if(!(!G.sheetStubs&&De.t=="z")){var On=Wn(De);De.t=="n"&&De.z&&no(De.z)&&G.cellDates&&(On.v=pu(De.v),On.t=typeof On.v=="number"?"n":"d"),H["!data"]!=null?(H["!data"][te]||(H["!data"][te]=[]),H["!data"][te][ee]=On):H[Zt+qt(te)]=On}for(++te,--K;an-- >0&&K>=0;){if(ct&32)switch(ct&31){case 2:De={t:"n",v:De.v+Vs&65535};break;case 3:De={t:"n",v:De.v+Vs&65535},De.v>32767&&(De.v-=65536);break;case 7:De={t:"s",v:J[Z=Z+Vs>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(ct&31)}else switch(ct&31){case 1:De={t:"z"};break;case 2:De={t:"n",v:me.read_shift(2)};break;case 7:De={t:"s",v:J[Z=me.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(ct&31)}!G.sheetStubs&&De.t=="z"||(H["!data"]!=null?(H["!data"][te]||(H["!data"][te]=[]),H["!data"][te][ee]=De):H[Zt+qt(te)]=De),++te,--K}}}break;case 3074:{ee=me.read_shift(2),te=me.read_shift(4);var di=Ne(me);H["!data"]!=null?(H["!data"][te]||(H["!data"][te]=[]),H["!data"][te][ee]={t:"s",v:di}):H[Lt(ee)+qt(te)]={t:"s",v:di}}break}z.l+=ge}return he}return{sheet_to_wk1:i,book_to_wk3:s,to_workbook:t}}();function Zje(e){var t={},n=e.match(Mr),r=0,i=!1;if(n)for(;r!=n.length;++r){var s=je(n[r]);switch(s[0].replace(/<\w*:/g,"<")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=x$[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return t}var Qje=function(){function e(r){var i=cr(r,"t");if(!i)return{t:"s",v:""};var s={t:"s",v:Et(i[1])},a=cr(r,"rPr");return a&&(s.s=Zje(a[1])),s}var t=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(i){return i.replace(t,"").split(n).map(e).filter(function(s){return s.v})}}(),eGe=function(){var t=/(\r\n|\n)/g;function n(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var l=i.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(s.push("<"+l+">"),a.push("</"+l+">")),a.push("</span>"),i}function r(i){var s=[[],i.v,[]];return i.v?(i.s&&n(i.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(r).join("")}}(),tGe=/<(?:\w+:)?t\b[^<>]*>([^<]*)<\/(?:\w+:)?t>/g,nGe=/<(?:\w+:)?r\b[^<>]*>/;function D$(e,t){var n=t?t.cellHTML:!0,r={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=Et(en(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),r.r=en(e),n&&(r.h=Vm(r.t))):e.match(nGe)&&(r.r=en(e),r.t=Et(en((cVe(e,"rPh").match(tGe)||[]).join("").replace(Mr,"")),!0),n&&(r.h=eGe(Qje(r.r)))),r):{t:""}}var rGe=/<(?:\w+:)?(?:si|sstItem)>/g,iGe=/<\/(?:\w+:)?(?:si|sstItem)>/;function sGe(e,t){var n=[],r="";if(!e)return n;var i=cr(e,"sst");if(i){r=i[1].replace(rGe,"").split(iGe);for(var s=0;s!=r.length;++s){var a=D$(r[s].trim(),t);a!=null&&(n[n.length]=a)}i=je(i[0].slice(0,i[0].indexOf(">"))),n.Count=i.count,n.Unique=i.uniqueCount}return n}function aGe(e){return[e.read_shift(4),e.read_shift(4)]}function oGe(e,t){var n=[],r=!1;return Ec(e,function(s,a,o){switch(o){case 159:n.Count=s[0],n.Unique=s[1];break;case 19:n.push(s);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(a.T,!r||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Rne(e){for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function Zl(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function lGe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Zl(e,4),t.U=Zl(e,4),t.W=Zl(e,4),t}function cGe(e){for(var t=e.read_shift(4),n=e.l+t-4,r={},i=e.read_shift(4),s=[];i-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(r.name=e.read_shift(0,"lpp4"),r.comps=s,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return r}function uGe(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(cGe(e));return t}function fGe(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function hGe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Zl(e,4),t.U=Zl(e,4),t.W=Zl(e,4),t}function dGe(e){var t=hGe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Ine(e,t){var n=e.l+t,r={};r.Flags=e.read_shift(4)&63,e.l+=4,r.AlgID=e.read_shift(4);var i=!1;switch(r.AlgID){case 26126:case 26127:case 26128:i=r.Flags==36;break;case 26625:i=r.Flags==4;break;case 0:i=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=e.read_shift(4),r.KeySize=e.read_shift(4),r.ProviderType=e.read_shift(4),e.l+=8,r.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,r}function $ne(e,t){var n={},r=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,r),e.l=r,n}function pGe(e){var t=Zl(e);switch(t.Minor){case 2:return[t.Minor,gGe(e)];case 3:return[t.Minor,mGe()];case 4:return[t.Minor,xGe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function gGe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var n=e.read_shift(4),r=Ine(e,n),i=$ne(e,e.length-e.l);return{t:"Std",h:r,v:i}}function mGe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function xGe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),r={};return n.replace(Mr,function(s){var a=je(s);switch(ka(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){r[o]=a[o]});break;case"<dataIntegrity":r.encryptedHmacKey=a.encryptedHmacKey,r.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(a);break;default:throw a[0]}}),r}function vGe(e,t){var n={},r=n.EncryptionVersionInfo=Zl(e,4);if(t-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);n.Flags=e.read_shift(4),t-=4;var i=e.read_shift(4);return t-=4,n.EncryptionHeader=Ine(e,i),t-=i,n.EncryptionVerifier=$ne(e,t),n}function yGe(e){var t={},n=t.EncryptionVersionInfo=Zl(e,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function _Ge(e){var t=0,n,r=Rne(e),i=r.length+1,s,a,o,l,c;for(n=Mu(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)a=n[s],o=(t&16384)===0?0:1,l=t<<1&32767,c=o|l,t=c^a;return t^52811}var Mne=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(a){return(a/2|a*128)&255},i=function(a,o){return r(a^o)},s=function(a){for(var o=t[a.length-1],l=104,c=a.length-1;c>=0;--c)for(var u=a[c],f=0;f!=7;++f)u&64&&(o^=n[l]),u*=2,--l;return o};return function(a){for(var o=Rne(a),l=s(o),c=o.length,u=Mu(16),f=0;f!=16;++f)u[f]=0;var h,d,p;for((c&1)===1&&(h=l>>8,u[c]=i(e[0],h),--c,h=l&255,d=o[o.length-1],u[c]=i(d,h));c>0;)--c,h=l>>8,u[c]=i(o[c],h),--c,h=l&255,u[c]=i(o[c],h);for(c=15,p=15-o.length;p>0;)h=l>>8,u[c]=i(e[p],h),--c,--p,h=l&255,u[c]=i(o[c],h),--c,--p;return u}}(),bGe=function(e,t,n,r,i){i||(i=t),r||(r=Mne(e));var s,a;for(s=0;s!=t.length;++s)a=t[s],a^=r[n],a=(a>>5|a<<3)&255,i[s]=a,++n;return[i,n,r]},EGe=function(e){var t=0,n=Mne(e);return function(r){var i=bGe("",r,t,n);return t=i[1],i[0]}};function wGe(e,t,n,r){var i={key:Sn(e),verificationBytes:Sn(e)};return n.password&&(i.verifier=_Ge(n.password)),r.valid=i.verificationBytes===i.verifier,r.valid&&(r.insitu=EGe(n.password)),i}function SGe(e,t,n){var r=n||{};return r.Info=e.read_shift(2),e.l-=2,r.Info===1?r.Data=yGe(e):r.Data=vGe(e,t),r}function TGe(e,t,n){var r={Type:n.biff>=8?e.read_shift(2):0};return r.Type?SGe(e,t-2,r):wGe(e,n.biff>=8?t:t-2,n,r),r}function AGe(e,t){switch(t.type){case"base64":return Ly(Bs(e),t);case"binary":return Ly(e,t);case"buffer":return Ly(_t&&Buffer.isBuffer(e)?e.toString("binary"):cc(e),t);case"array":return Ly(Wh(e),t)}throw new Error("Unrecognized type "+t.type)}function Ly(e,t){var n=t||{},r={},i=n.dense;i&&(r["!data"]=[]);var s=S$(e,"\\trowd","\\row");if(!s)throw new Error("RTF missing table");var a={s:{c:0,r:0},e:{c:0,r:s.length-1}},o=[];return s.forEach(function(l,c){i&&(o=r["!data"][c]=[]);for(var u=/\\[\w\-]+\b/g,f=0,h,d=-1,p=[];(h=u.exec(l))!=null;){var g=l.slice(f,u.lastIndex-h[0].length);switch(g.charCodeAt(0)==32&&(g=g.slice(1)),g.length&&p.push(g),h[0]){case"\\cell":if(++d,p.length){var m={v:p.join(""),t:"s"};m.v=="TRUE"||m.v=="FALSE"?(m.v=m.v=="TRUE",m.t="b"):isNaN(Ns(m.v))?Cr[m.v]!=null&&(m.t="e",m.w=m.v,m.v=Cr[m.v]):(m.t="n",n.cellText!==!1&&(m.w=m.v),m.v=Ns(m.v)),i?o[d]=m:r[$t({r:c,c:d})]=m}p=[];break;case"\\par":p.push(`
`);break}f=u.lastIndex}d>a.e.c&&(a.e.c=d)}),r["!ref"]=wt(a),r}function kGe(e,t){var n=lf(AGe(e,t),t);return n.bookType="rtf",n}function CGe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function ex(e){for(var t=0,n=1;t!=3;++t)n=n*256+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function FGe(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=i-s;if(a===0)return[0,0,t];var o=0,l=0,c=i+s;switch(l=a/(c>1?2-c:c),i){case t:o=((n-r)/a+6)%6;break;case n:o=(r-t)/a+2;break;case r:o=(t-n)/a+4;break}return[o/6,l,c/2]}function OGe(e){var t=e[0],n=e[1],r=e[2],i=n*2*(r<.5?r:1-r),s=r-i/2,a=[s,s,s],o=6*t,l;if(n!==0)switch(o|0){case 0:case 6:l=i*o,a[0]+=i,a[1]+=l;break;case 1:l=i*(2-o),a[0]+=l,a[1]+=i;break;case 2:l=i*(o-2),a[1]+=i,a[2]+=l;break;case 3:l=i*(4-o),a[1]+=l,a[2]+=i;break;case 4:l=i*(o-4),a[2]+=i,a[0]+=l;break;case 5:l=i*(6-o),a[2]+=l,a[0]+=i;break}for(var c=0;c!=3;++c)a[c]=Math.round(a[c]*255);return a}function Hb(e,t){if(t===0)return e;var n=FGe(CGe(e));return t<0?n[2]=n[2]*(1+t):n[2]=1-(1-n[2])*(1-t),ex(OGe(n))}var Lne=6,NGe=15,DGe=1,Ai=Lne;function Vb(e){return Math.floor((e+Math.round(128/Ai)/256)*Ai)}function Wb(e){return Math.floor((e-5)/Ai*100+.5)/100}function F3(e){return Math.round((e*Ai+5)/Ai*256)/256}function xk(e){return F3(Wb(Vb(e)))}function R$(e){var t=Math.abs(e-xk(e)),n=Ai;if(t>.005)for(Ai=DGe;Ai<NGe;++Ai)Math.abs(e-xk(e))<=t&&(t=Math.abs(e-xk(e)),n=Ai);Ai=n}function Ap(e){e.width?(e.wpx=Vb(e.width),e.wch=Wb(e.wpx),e.MDW=Ai):e.wpx?(e.wch=Wb(e.wpx),e.width=F3(e.wch),e.MDW=Ai):typeof e.wch=="number"&&(e.width=F3(e.wch),e.wpx=Vb(e.width),e.MDW=Ai),e.customWidth&&delete e.customWidth}var RGe=96,Pne=RGe;function Bne(e){return e*96/Pne}function tx(e){return e*Pne/96}var IGe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function $Ge(e,t,n,r){t.Borders=[];var i={},s=!1;(e.match(Mr)||[]).forEach(function(a){var o=je(a);switch(ka(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=Gt(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=Gt(o.diagonalDown)),t.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function MGe(e,t,n,r){t.Fills=[];var i={},s=!1;(e.match(Mr)||[]).forEach(function(a){var o=je(a);switch(ka(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},t.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function LGe(e,t,n,r){t.Fonts=[];var i={},s=!1;(e.match(Mr)||[]).forEach(function(a){var o=je(a);switch(ka(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=en(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?Gt(o.val):1;break;case"<b/>":i.bold=1;break;case"</b>":case"</b":break;case"<i":i.italic=o.val?Gt(o.val):1;break;case"<i/>":i.italic=1;break;case"</i>":case"</i":break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"</u>":case"</u":break;case"<strike":i.strike=o.val?Gt(o.val):1;break;case"<strike/>":i.strike=1;break;case"</strike>":case"</strike":break;case"<outline":i.outline=o.val?Gt(o.val):1;break;case"<outline/>":i.outline=1;break;case"</outline>":case"</outline":break;case"<shadow":i.shadow=o.val?Gt(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"</shadow>":case"</shadow":break;case"<condense":i.condense=o.val?Gt(o.val):1;break;case"<condense/>":i.condense=1;break;case"</condense>":case"</condense":break;case"<extend":i.extend=o.val?Gt(o.val):1;break;case"<extend/>":i.extend=1;break;case"</extend>":case"</extend":break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":case"</sz":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":case"</vertAlign":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":case"</family":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":case"</scheme":break;case"<charset":if(o.val=="1")break;o.codepage=x$[parseInt(o.val,10)];break;case"<charset/>":case"</charset>":case"</charset":break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=Gt(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var l=ch[i.color.index];i.color.index==81&&(l=ch[1]),l||(l=ch[1]),i.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&n.themeElements&&n.themeElements.clrScheme&&(i.color.rgb=Hb(n.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":case"</color":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":case"</AlternateContent":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function PGe(e,t,n){t.NumberFmt=[];for(var r=oa(st),i=0;i<r.length;++i)t.NumberFmt[r[i]]=st[r[i]];var s=e.match(Mr);if(s)for(i=0;i<s.length;++i){var a=je(s[i]);switch(ka(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Et(en(a.formatCode)),l=parseInt(a.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}oh(o,l)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var Py=["numFmtId","fillId","fontId","borderId","xfId"],By=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function BGe(e,t,n){t.CellXf=[];var r,i=!1;(e.match(Mr)||[]).forEach(function(s){var a=je(s),o=0;switch(ka(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":case"<xf>":for(r=a,delete r[0],o=0;o<Py.length;++o)r[Py[o]]&&(r[Py[o]]=parseInt(r[Py[o]],10));for(o=0;o<By.length;++o)r[By[o]]&&(r[By[o]]=Gt(r[By[o]]));if(t.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[r.numFmtId]==t.NumberFmt[o]){r.numFmtId=o;break}}t.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":case"<alignment>":var l={};a.vertical&&(l.vertical=a.vertical),a.horizontal&&(l.horizontal=a.horizontal),a.textRotation!=null&&(l.textRotation=a.textRotation),a.indent&&(l.indent=a.indent),a.wrapText&&(l.wrapText=Gt(a.wrapText)),r.alignment=l;break;case"</alignment>":break;case"<protection":case"<protection>":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var UGe=function(){return function(n,r,i){var s={};if(!n)return s;n=w$(uv(n,"<!--","-->"));var a;return(a=cr(n,"numFmts"))&&PGe(a[0],s,i),(a=cr(n,"fonts"))&&LGe(a[0],s,r,i),(a=cr(n,"fills"))&&MGe(a[0],s,r,i),(a=cr(n,"borders"))&&$Ge(a[0],s,r,i),(a=cr(n,"cellXfs"))&&BGe(a[0],s,i),s}}();function zGe(e,t){var n=e.read_shift(2),r=ci(e);return[n,r]}function HGe(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=YVe(e);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=e.read_shift(2);switch(s===700&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=e.read_shift(1);a!=0&&(r.underline=a);var o=e.read_shift(1);o>0&&(r.family=o);var l=e.read_shift(1);switch(l>0&&(r.charset=l),e.l++,r.color=XVe(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ci(e),r}var VGe=hi;function WGe(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}var jGe=hi;function GGe(e,t,n){var r={};r.NumberFmt=[];for(var i in st)r.NumberFmt[i]=st[i];r.CellXf=[],r.Fonts=[];var s=[],a=!1;return Ec(e,function(l,c,u){switch(u){case 44:r.NumberFmt[l[0]]=l[1],oh(l[1],l[0]);break;case 43:r.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=Hb(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&r.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(u),a=!0;break;case 38:s.pop(),a=!1;break;default:if(c.T>0)s.push(u);else if(c.T<0)s.pop();else if(!a||n.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),r}var qGe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function XGe(e,t,n){t.themeElements.clrScheme=[];var r={};(e[0].match(Mr)||[]).forEach(function(i){var s=je(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=s.val;break;case"</a:srgbClr>":break;case"<a:sysClr":r.rgb=s.lastClr;break;case"</a:sysClr>":break;case"</a:dk1>":case"</a:lt1>":case"<a:dk1>":case"<a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[qGe.indexOf(s[0])]=r,r={}):r.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function YGe(e,t,n){t.themeElements={};var r;if(!(r=lh(e,"a:clrScheme")))throw new Error("clrScheme not found in themeElements");if(XGe(r,t,n),!(r=lh(e,"a:fontScheme")))throw new Error("fontScheme not found in themeElements");if(!(r=lh(e,"a:fmtScheme")))throw new Error("fmtScheme not found in themeElements")}function Une(e,t){(!e||e.length===0)&&(e=KGe());var n,r={};if(!(n=lh(e,"a:themeElements")))throw new Error("themeElements not found in theme");return YGe(n[0],r,t),r.raw=e,r}function KGe(e,t){var n=[Jte];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function JGe(e,t,n){var r=e.l+t,i=e.read_shift(4);if(i!==124226){if(!n.cellStyles){e.l=r;return}var s=e.slice(e.l);e.l=r;var a;try{a=Kte(s,{type:"array"})}catch{return}var o=Ci(a,"theme/theme/theme1.xml",!0);if(o)return Une(o,n)}}function ZGe(e){return e.read_shift(4)}function QGe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=eqe(e,4);break;case 2:t.xclrValue=Ane(e);break;case 3:t.xclrValue=ZGe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function eqe(e,t){return hi(e,t)}function tqe(e,t){return hi(e,t)}function nqe(e){var t=e.read_shift(2),n=e.read_shift(2)-4,r=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=QGe(e);break;case 6:r[1]=tqe(e,n);break;case 14:case 15:r[1]=e.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return r}function rqe(e,t){var n=e.l+t;e.l+=2;var r=e.read_shift(2);e.l+=2;for(var i=e.read_shift(2),s=[];i-- >0;)s.push(nqe(e,n-e.l));return{ixfe:r,ext:s}}function iqe(e,t){t.forEach(function(n){n[0]})}function sqe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ci(e)}}function aqe(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function oqe(e){return e.l+=4,e.read_shift(4)!=0}function lqe(e,t,n){var r={Types:[],Cell:[],Value:[]},i=n||{},s=[],a=!1,o=2;return Ec(e,function(l,c,u){switch(u){case 335:r.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?r.Cell.push({type:r.Types[f[0]-1].name,index:f[1]}):o==0&&r.Value.push({type:r.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:s.push(u),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!c.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function cqe(e,t,n){var r={Types:[],Cell:[],Value:[]};if(!e)return r;var i=!1,s=2,a;return e.replace(Mr,function(o){var l=je(o);switch(ka(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<r.Types.length;++c)r.Types[c].name==l.name&&(a=r.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?r.Cell.push({type:r.Types[l.t-1].name,index:+l.v}):s==0&&r.Value.push({type:r.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+l.i);break;default:if(!i&&(n!=null&&n.WTF))throw new Error("unrecognized "+l[0]+" in metadata")}return o}),r}function uqe(e){var t=[];if(!e)return t;var n=1;return(e.match(Mr)||[]).forEach(function(r){var i=je(r);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?n=i.i:i.i=n,t.push(i);break}}),t}function fqe(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=$t(n);var r=e.read_shift(1);return r&2&&(t.l="1"),r&8&&(t.a="1"),t}function hqe(e,t,n){var r=[];return Ec(e,function(s,a,o){switch(o){case 63:r.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function dqe(e,t,n,r){if(!e)return e;var i=r||{},s=!1;Ec(e,function(o,l,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!l.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},i)}function pqe(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^<>]*r:id="([^<>"]*)"/)||["",""])[1];return t["!id"][n].Target}function gqe(e,t,n){var r=0;(qte(e,"shape")||[]).forEach(function(i){var s="",a=!0,o=-1,l=-1,c=-1;switch(i.replace(Mr,function(f,h){var d=je(f);switch(ka(d[0])){case"<ClientData":d.ObjectType&&(s=d.ObjectType);break;case"<Visible":case"<Visible/>":a=!1;break;case"<Row":case"<Row>":o=h+f.length;break;case"</Row>":l=+i.slice(o,h).trim();break;case"<Column":case"<Column>":o=h+f.length;break;case"</Column>":c=+i.slice(o,h).trim();break}return""}),s){case"Note":var u=rx(t,l>=0&&c>=0?$t({r:l,c}):n[r].ref);u.c&&(u.c.hidden=a),++r;break}})}function aB(e,t,n,r){var i=e["!data"]!=null,s;t.forEach(function(a){var o=ri(a.ref);if(!(o.r<0||o.c<0)){if(i?(e["!data"][o.r]||(e["!data"][o.r]=[]),s=e["!data"][o.r][o.c]):s=e[a.ref],!s){s={t:"z"},i?e["!data"][o.r][o.c]=s:e[a.ref]=s;var l=Ln(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var c=wt(l);e["!ref"]=c}s.c||(s.c=[]);var u={a:a.author,t:a.t,r:a.r,T:n};a.h&&(u.h=a.h);for(var f=s.c.length-1;f>=0;--f){if(!n&&s.c[f].T)return;n&&!s.c[f].T&&s.c.splice(f,1)}if(n&&r){for(f=0;f<r.length;++f)if(u.a==r[f].id){u.a=r[f].name||u.a;break}}s.c.push(u)}})}function mqe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],r=[],i=cr(e,"authors");i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^<>]*>(.*)/);o&&n.push(o[1])}});var s=cr(e,"commentList");return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^<>]*>/);if(o){var l=je(o[0]),c={author:l.authorId&&n[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},u=ri(l.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=cr(a,"text"),h=!!f&&!!f[1]&&D$(f[1])||{r:"",t:"",h:""};c.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),c.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=h.h),r.push(c)}}}}),r}function xqe(e,t){var n=[],r=!1,i={},s=0;return e.replace(Mr,function(o,l){var c=je(o);switch(ka(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":i.t!=null&&n.push(i);break;case"<text>":case"<text":s=l+o.length;break;case"</text>":i.t=e.slice(s,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return o}),n}function vqe(e,t){var n=[],r=!1;return e.replace(Mr,function(s){var a=je(s);switch(ka(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&t.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),n}function yqe(e){var t={};t.iauthor=e.read_shift(4);var n=_d(e);return t.rfx=n.s,t.ref=$t(n.s),e.l+=16,t}var _qe=ci;function bqe(e,t){var n=[],r=[],i={},s=!1;return Ec(e,function(o,l,c){switch(c){case 632:r.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=r[i.iauthor],delete i.iauthor,t.sheetRows&&i.rfx&&t.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,n.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),n}var Eqe="application/vnd.ms-office.vbaProject";function wqe(e){var t=Ft.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(n,r){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var i=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ft.utils.cfb_add(t,i,e.FileIndex[r].content)}}),Ft.write(t)}function Sqe(){return{"!type":"dialog"}}function Tqe(){return{"!type":"dialog"}}function Aqe(){return{"!type":"macro"}}function kqe(){return{"!type":"macro"}}var uh=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return o?u+=t.c:--u,l?c+=t.r:--c,i+(o?"":"$")+Lt(u)+(l?"":"$")+qt(c)}return function(i,s){return t=s,i.replace(e,n)}}(),I$=/(^|[^._A-Z0-9])(\$?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])(\$?)(\d{1,7})(?![_.\(A-Za-z0-9])/g;try{I$=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g}catch{}var Cqe=function(){return function(t,n){return t.replace(I$,function(r,i,s,a,o,l){var c=C$(a)-(s?0:n.c),u=k$(l)-(o?0:n.r),f=o=="$"?u+1:u==0?"":"["+u+"]",h=s=="$"?c+1:c==0?"":"["+c+"]";return i+"R"+f+"C"+h})}}();function zne(e,t){return e.replace(I$,function(n,r,i,s,a,o){return r+(i=="$"?i+s:Lt(C$(s)+t.c))+(a=="$"?a+o:qt(k$(o)+t.r))})}function oB(e,t,n){var r=vd(t),i=r.s,s=ri(n),a={r:s.r-i.r,c:s.c-i.c};return zne(e,a)}function Fqe(e){return e.length!=1}function lB(e){return e.replace(/_xlfn\./g,"")}function Bn(e){e.l+=1}function Pu(e,t){var n=e.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function Hne(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return Vne(e);n.biff==12&&(r=4)}var i=e.read_shift(r),s=e.read_shift(r),a=Pu(e),o=Pu(e);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Vne(e){var t=Pu(e),n=Pu(e),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function Oqe(e,t,n){if(n.biff<8)return Vne(e);var r=e.read_shift(n.biff==12?4:2),i=e.read_shift(n.biff==12?4:2),s=Pu(e),a=Pu(e);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function Wne(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return Nqe(e);var r=e.read_shift(n&&n.biff==12?4:2),i=Pu(e);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function Nqe(e){var t=Pu(e),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}function Dqe(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Rqe(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return Iqe(e);var i=e.read_shift(r>=12?4:2),s=e.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function Iqe(e){var t=e.read_shift(2),n=e.read_shift(1),r=(t&32768)>>15,i=(t&16384)>>14;return t&=16383,r==1&&t>=8192&&(t=t-16384),i==1&&n>=128&&(n=n-256),{r:t,c:n,cRel:i,rRel:r}}function $qe(e,t,n){var r=(e[e.l++]&96)>>5,i=Hne(e,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function Mqe(e,t,n){var r=(e[e.l++]&96)>>5,i=e.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var a=Hne(e,s,n);return[r,i,a]}function Lqe(e,t,n){var r=(e[e.l++]&96)>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function Pqe(e,t,n){var r=(e[e.l++]&96)>>5,i=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[r,i]}function Bqe(e,t,n){var r=(e[e.l++]&96)>>5,i=Oqe(e,t-1,n);return[r,i]}function Uqe(e,t,n){var r=(e[e.l++]&96)>>5;return e.l+=n.biff==2?6:n.biff==12?14:7,[r]}function cB(e){var t=e[e.l+1]&1,n=1;return e.l+=4,[t,n]}function zqe(e,t,n){e.l+=2;for(var r=e.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(e.read_shift(n&&n.biff==2?1:2));return i}function Hqe(e,t,n){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(n&&n.biff==2?1:2)]}function Vqe(e,t,n){var r=e[e.l+1]&255?1:0;return e.l+=2,[r,e.read_shift(n&&n.biff==2?1:2)]}function Wqe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function jqe(e,t,n){var r=e[e.l+1]&255?1:0;return e.l+=n&&n.biff==2?3:4,[r]}function jne(e){var t=e.read_shift(1),n=e.read_shift(1);return[t,n]}function Gqe(e){return e.read_shift(2),jne(e)}function qqe(e){return e.read_shift(2),jne(e)}function Xqe(e,t,n){var r=(e[e.l]&96)>>5;e.l+=1;var i=Wne(e,0,n);return[r,i]}function Yqe(e,t,n){var r=(e[e.l]&96)>>5;e.l+=1;var i=Rqe(e,0,n);return[r,i]}function Kqe(e,t,n){var r=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(2);n&&n.biff==5&&(e.l+=12);var s=Wne(e,0,n);return[r,i,s]}function Jqe(e,t,n){var r=(e[e.l]&96)>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[ZXe[i],Xne[i],r]}function Zqe(e,t,n){var r=e[e.l++],i=e.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,e.read_shift(1)]:Qqe(e);return[i,(s[0]===0?Xne:JXe)[s[1]]]}function Qqe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function eXe(e,t,n){e.l+=n&&n.biff==2?3:4}function tXe(e,t,n){if(e.l++,n&&n.biff==12)return[e.read_shift(4,"i"),0];var r=e.read_shift(2),i=e.read_shift(n&&n.biff==2?1:2);return[r,i]}function nXe(e){return e.l++,fs[e.read_shift(1)]}function rXe(e){return e.l++,e.read_shift(2)}function iXe(e){return e.l++,e.read_shift(1)!==0}function sXe(e){return e.l++,Kr(e)}function aXe(e,t,n){return e.l++,Tp(e,t-1,n)}function oXe(e,t){var n=[e.read_shift(1)];if(t==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Nn(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:n[1]=fs[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:n[1]=Kr(e);break;case 2:n[1]=bd(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function lXe(e,t,n){for(var r=e.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?_d:BS)(e));return i}function cXe(e,t,n){var r=0,i=0;n.biff==12?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=oXe(e,n.biff);return a}function uXe(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[r,0,s]}function fXe(e,t,n){if(n.biff==5)return hXe(e);var r=e.read_shift(1)>>>5&3,i=e.read_shift(2),s=e.read_shift(4);return[r,i,s]}function hXe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}function dXe(e,t,n){var r=e.read_shift(1)>>>5&3;e.l+=n&&n.biff==2?3:4;var i=e.read_shift(n&&n.biff==2?1:2);return[r,i]}function pXe(e,t,n){var r=e.read_shift(1)>>>5&3,i=e.read_shift(n&&n.biff==2?1:2);return[r,i]}function gXe(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,n.biff==12&&(e.l+=2),[r]}function mXe(e,t,n){var r=(e[e.l++]&96)>>5,i=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[r,i]}var xXe=hi,vXe=hi,yXe=hi;function dv(e,t,n){return e.l+=2,[Dqe(e)]}function $$(e){return e.l+=6,[]}var _Xe=dv,bXe=$$,EXe=$$,wXe=dv;function Gne(e){return e.l+=2,[Sn(e),e.read_shift(2)&1]}var SXe=dv,TXe=Gne,AXe=$$,kXe=dv,CXe=dv,FXe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function OXe(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2),a=FXe[n>>2&31];return{ixti:t,coltype:n&3,rt:a,idx:r,c:i,C:s}}function NXe(e){return e.l+=2,[e.read_shift(4)]}function DXe(e,t,n){return e.l+=5,e.l+=2,e.l+=n.biff==2?1:4,["PTGSHEET"]}function RXe(e,t,n){return e.l+=n.biff==2?4:5,["PTGENDSHEET"]}function IXe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function $Xe(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2);return[t,n]}function MXe(e){return e.l+=4,[0,0]}var uB={1:{n:"PtgExp",f:tXe},2:{n:"PtgTbl",f:yXe},3:{n:"PtgAdd",f:Bn},4:{n:"PtgSub",f:Bn},5:{n:"PtgMul",f:Bn},6:{n:"PtgDiv",f:Bn},7:{n:"PtgPower",f:Bn},8:{n:"PtgConcat",f:Bn},9:{n:"PtgLt",f:Bn},10:{n:"PtgLe",f:Bn},11:{n:"PtgEq",f:Bn},12:{n:"PtgGe",f:Bn},13:{n:"PtgGt",f:Bn},14:{n:"PtgNe",f:Bn},15:{n:"PtgIsect",f:Bn},16:{n:"PtgUnion",f:Bn},17:{n:"PtgRange",f:Bn},18:{n:"PtgUplus",f:Bn},19:{n:"PtgUminus",f:Bn},20:{n:"PtgPercent",f:Bn},21:{n:"PtgParen",f:Bn},22:{n:"PtgMissArg",f:Bn},23:{n:"PtgStr",f:aXe},26:{n:"PtgSheet",f:DXe},27:{n:"PtgEndSheet",f:RXe},28:{n:"PtgErr",f:nXe},29:{n:"PtgBool",f:iXe},30:{n:"PtgInt",f:rXe},31:{n:"PtgNum",f:sXe},32:{n:"PtgArray",f:Uqe},33:{n:"PtgFunc",f:Jqe},34:{n:"PtgFuncVar",f:Zqe},35:{n:"PtgName",f:uXe},36:{n:"PtgRef",f:Xqe},37:{n:"PtgArea",f:$qe},38:{n:"PtgMemArea",f:dXe},39:{n:"PtgMemErr",f:xXe},40:{n:"PtgMemNoMem",f:vXe},41:{n:"PtgMemFunc",f:pXe},42:{n:"PtgRefErr",f:gXe},43:{n:"PtgAreaErr",f:Lqe},44:{n:"PtgRefN",f:Yqe},45:{n:"PtgAreaN",f:Bqe},46:{n:"PtgMemAreaN",f:IXe},47:{n:"PtgMemNoMemN",f:$Xe},57:{n:"PtgNameX",f:fXe},58:{n:"PtgRef3d",f:Kqe},59:{n:"PtgArea3d",f:Mqe},60:{n:"PtgRefErr3d",f:mXe},61:{n:"PtgAreaErr3d",f:Pqe},255:{}},LXe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},PXe={1:{n:"PtgElfLel",f:Gne},2:{n:"PtgElfRw",f:kXe},3:{n:"PtgElfCol",f:_Xe},6:{n:"PtgElfRwV",f:CXe},7:{n:"PtgElfColV",f:wXe},10:{n:"PtgElfRadical",f:SXe},11:{n:"PtgElfRadicalS",f:AXe},13:{n:"PtgElfColS",f:bXe},15:{n:"PtgElfColSV",f:EXe},16:{n:"PtgElfRadicalLel",f:TXe},25:{n:"PtgList",f:OXe},29:{n:"PtgSxName",f:NXe},255:{}},BXe={0:{n:"PtgAttrNoop",f:MXe},1:{n:"PtgAttrSemi",f:jqe},2:{n:"PtgAttrIf",f:Vqe},4:{n:"PtgAttrChoose",f:zqe},8:{n:"PtgAttrGoto",f:Hqe},16:{n:"PtgAttrSum",f:eXe},32:{n:"PtgAttrBaxcel",f:cB},33:{n:"PtgAttrBaxcel",f:cB},64:{n:"PtgAttrSpace",f:Gqe},65:{n:"PtgAttrSpaceSemi",f:qqe},128:{n:"PtgAttrIfError",f:Wqe},255:{}};function pv(e,t,n,r){if(r.biff<8)return hi(e,t);for(var i=e.l+t,s=[],a=0;a!==n.length;++a)switch(n[a][0]){case"PtgArray":n[a][1]=cXe(e,0,r),s.push(n[a][1]);break;case"PtgMemArea":n[a][2]=lXe(e,n[a][1],r),s.push(n[a][2]);break;case"PtgExp":r&&r.biff==12&&(n[a][1][1]=e.read_shift(4),s.push(n[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[a][0]}return t=i-e.l,t!==0&&s.push(hi(e,t)),s}function gv(e,t,n){for(var r=e.l+t,i,s,a=[];r!=e.l;)t=r-e.l,s=e[e.l],i=uB[s]||uB[LXe[s]],(s===24||s===25)&&(i=(s===24?PXe:BXe)[e[e.l+1]]),!i||!i.f?hi(e,t):a.push([i.n,i.f(e,t,n)]);return a}function UXe(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}t.push(i.join(","))}return t.join(";")}var zXe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function HXe(e,t){var n=e.lastIndexOf("!"),r=t.lastIndexOf("!");return n==-1&&r==-1?e+":"+t:n>0&&r>0&&e.slice(0,n).toLowerCase()==t.slice(0,r).toLowerCase()?e+":"+t.slice(r+1):(console.error("Cannot hydrate range",e,t),e+":"+t)}function qne(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=r[1]==-1?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return n.SID!=null?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];case 355:default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[r[0]][0][3]?(i=r[1]==-1?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function fB(e,t,n){var r=qne(e,t,n);return r=="#REF"?r:zVe(r,n)}function Gr(e,t,n,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,c,u,f=0,h=0,d,p="";if(!e[0]||!e[0][0])return"";for(var g=-1,m="",x=0,y=e[0].length;x<y;++x){var v=e[0][x];switch(v[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(e[0][g][1][0]){case 0:m=Ct(" ",e[0][g][1][1]);break;case 1:m=Ct("\r",e[0][g][1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}c=c+m,g=-1}o.push(c+zXe[v[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(HXe(c,l));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=jm(v[1][1],a,i),o.push(Gm(u,s));break;case"PtgRefN":u=n?jm(v[1][1],n,i):v[1][1],o.push(Gm(u,s));break;case"PtgRef3d":f=v[1][1],u=jm(v[1][2],a,i),p=fB(r,f,i),o.push(p+"!"+Gm(u,s));break;case"PtgFunc":case"PtgFuncVar":var _=v[1][0],b=v[1][1];_||(_=0),_&=127;var w=_==0?[]:o.slice(-_);o.length-=_,b==="User"&&(b=w.shift()),o.push(b+"("+w.join(",")+")");break;case"PtgBool":o.push(v[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(v[1]);break;case"PtgNum":o.push(String(v[1]));break;case"PtgStr":o.push('"'+v[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(v[1]);break;case"PtgAreaN":d=V7(v[1][1],n?{s:n}:a,i),o.push(gk(d,i));break;case"PtgArea":d=V7(v[1][1],a,i),o.push(gk(d,i));break;case"PtgArea3d":f=v[1][1],d=v[1][2],p=fB(r,f,i),o.push(p+"!"+gk(d,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=v[1][2];var E=(r.names||[])[h-1]||(r[0]||[])[h],T=E?E.Name:"SH33TJSNAME"+String(h);T&&T.slice(0,6)=="_xlfn."&&!i.xlfn&&(T=T.slice(6)),o.push(T);break;case"PtgNameX":var S=v[1][1];h=v[1][2];var A;if(i.biff<=5)S<0&&(S=-S),r[S]&&(A=r[S][h]);else{var C="";if(((r[S]||[])[0]||[])[0]==14849||(((r[S]||[])[0]||[])[0]==1025?r[S][h]&&r[S][h].itab>0&&(C=r.SheetNames[r[S][h].itab-1]+"!"):C=r.SheetNames[h-1]+"!"),r[S]&&r[S][h])C+=r[S][h].Name;else if(r[0]&&r[0][h])C+=r[0][h].Name;else{var F=(qne(r,S,i)||"").split(";;");F[h-1]?C=F[h-1]:C+="SH33TJSERRX"}o.push(C);break}A||(A={Name:"SH33TJSERRY"}),o.push(A.Name);break;case"PtgParen":var N="(",M=")";if(g>=0){switch(m="",e[0][g][1][0]){case 2:N=Ct(" ",e[0][g][1][1])+N;break;case 3:N=Ct("\r",e[0][g][1][1])+N;break;case 4:M=Ct(" ",e[0][g][1][1])+M;break;case 5:M=Ct("\r",e[0][g][1][1])+M;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}o.push(N+o.pop()+M);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":u={c:v[1][1],r:v[1][0]};var O={c:n.c,r:n.r};if(r.sharedf[$t(u)]){var D=r.sharedf[$t(u)];o.push(Gr(D,a,O,r,i))}else{var I=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){o.push(Gr(c[1],a,O,r,i)),I=!0;break}I||o.push(v[1])}break;case"PtgArray":o.push("{"+UXe(v[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+v[1].idx+"[#"+v[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(v));default:throw new Error("Unrecognized Formula Token: "+String(v))}var U=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&g>=0&&U.indexOf(e[0][x][0])==-1){v=e[0][g];var Y=!0;switch(v[1][0]){case 4:Y=!1;case 0:m=Ct(" ",v[1][1]);break;case 5:Y=!1;case 1:m=Ct("\r",v[1][1]);break;default:if(m="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+v[1][0])}o.push((Y?m:"")+o.pop()+(Y?"":m)),g=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]=="TRUE"?!0:o[0]=="FALSE"?!1:o[0]}function VXe(e,t,n){var r=e.l+t,i=n.biff==2?1:2,s,a=e.read_shift(i);if(a==65535)return[[],hi(e,t-2)];var o=gv(e,a,n);return t!==a+i&&(s=pv(e,t-a-i,o,n)),e.l=r,[o,s]}function WXe(e,t,n){var r=e.l+t,i=n.biff==2?1:2,s,a=e.read_shift(i);if(a==65535)return[[],hi(e,t-2)];var o=gv(e,a,n);return t!==a+i&&(s=pv(e,t-a-i,o,n)),e.l=r,[o,s]}function jXe(e,t,n,r){var i=e.l+t,s=gv(e,r,n),a;return i!==e.l&&(a=pv(e,i-e.l,s,n)),[s,a]}function GXe(e,t,n){var r=e.l+t,i,s=e.read_shift(2),a=gv(e,s,n);return s==65535?[[],hi(e,t-2)]:(t!==s+2&&(i=pv(e,r-s-2,a,n)),[a,i])}function qXe(e){var t;if(Bl(e,e.l+6)!==65535)return[Kr(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function vk(e,t,n){var r=e.l+t,i=po(e,6,n),s=qXe(e),a=e.read_shift(1);n.biff!=2&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var o=WXe(e,r-e.l,n);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function US(e,t,n){var r=e.read_shift(4),i=gv(e,r,n),s=e.read_shift(4),a=s>0?pv(e,s,i,n):null;return[i,a]}var XXe=US,zS=US,YXe=US,KXe=US,JXe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Xne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ZXe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function hB(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,n){return n.replace(/\./g,"")}),e=e.replace(/\$'([^']|'')+'/g,function(t){return t.slice(1)}),e=e.replace(/\$([^\]\. #$]+)/g,function(t,n){return n.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?t:n}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function yk(e){e=e.replace(/\$'([^']|'')+'/g,function(r){return r.slice(1)}),e=e.replace(/\$([^\]\. #$]+)/g,function(r,i){return i.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?r:i});var t=e.split(":"),n=t[0].split(".")[0];return[n,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Km={},T0={};function Jm(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(n=[1,1,1,1,.5,.5]),e.left==null&&(e.left=n[0]),e.right==null&&(e.right=n[1]),e.top==null&&(e.top=n[2]),e.bottom==null&&(e.bottom=n[3]),e.header==null&&(e.header=n[4]),e.footer==null&&(e.footer=n[5])}}function Yne(e,t,n,r,i,s,a){try{r.cellNF&&(e.z=st[t])}catch(l){if(r.WTF)throw l}if(!(e.t==="z"&&!r.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ir(e.v)),(!r||r.cellText!==!1)&&e.t!=="z")try{if(st[t]==null&&oh(VHe[t]||"General",t),e.t==="e")e.w=e.w||fs[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=J1(e.v);else if(e.t==="d"){var o=rr(e.v,!!a);(o|0)===o?e.w=o.toString(10):e.w=J1(o)}else{if(e.v===void 0)return"";e.w=Vh(e.v,T0)}else e.t==="d"?e.w=Us(t,rr(e.v,!!a),T0):e.w=Us(t,e.v,T0)}catch(l){if(r.WTF)throw l}if(r.cellStyles&&n!=null)try{e.s=s.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Hb(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),r.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Hb(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),r.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(r.WTF&&s.Fills)throw l}}}function QXe(e,t){var n=Ln(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=wt(n))}var eYe=/<(?:\w+:)?mergeCell ref=["'][A-Z0-9:]+['"]\s*[\/]?>/g,tYe=/<(?:\w+:)?hyperlink [^<>]*>/mg,nYe=/"(\w*:\w*)"/,rYe=/<(?:\w+:)?col\b[^<>]*[\/]?>/g,iYe=/<(?:\w+:)?autoFilter[^>]*/g,sYe=/<(?:\w+:)?pageMargins[^<>]*\/>/g,Kne=/<(?:\w+:)?sheetPr\b[^<>]*?\/>/;function aYe(e,t,n,r,i,s,a){if(!e)return e;r||(r={"!id":{}});var o={};t.dense&&(o["!data"]=[]);var l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",f=cr(e,"sheetData");f?(c=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):c=u=e;var h=c.match(Kne);h?M$(h[0],o,i,n):(h=cr(c,"sheetPr"))&&oYe(h[0],h[1]||"",o,i,n);var d=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(d>0){var p=c.slice(d,d+50).match(nYe);p&&!(t&&t.nodim)&&QXe(o,p[1])}var g=cr(c,"sheetViews");g&&g[1]&&dYe(g[1],i);var m=[];if(t.cellStyles){var x=c.match(rYe);x&&uYe(m,x)}f&&pYe(f[1],o,t,l,s,a,i);var y=u.match(iYe);y&&(o["!autofilter"]=fYe(y[0]));var v=[],_=u.match(eYe);if(_)for(d=0;d!=_.length;++d)v[d]=Ln(_[d].slice(_[d].indexOf("=")+2));var b=u.match(tYe);b&&lYe(o,b,r);var w=u.match(sYe);w&&(o["!margins"]=cYe(je(w[0])));var E;if((E=u.match(/legacyDrawing r:id="(.*?)"/))&&(o["!legrel"]=E[1]),t&&t.nodim&&(l.s.c=l.s.r=0),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=wt(l)),t.sheetRows>0&&o["!ref"]){var T=Ln(o["!ref"]);t.sheetRows<=+T.e.r&&(T.e.r=t.sheetRows-1,T.e.r>l.e.r&&(T.e.r=l.e.r),T.e.r<T.s.r&&(T.s.r=T.e.r),T.e.c>l.e.c&&(T.e.c=l.e.c),T.e.c<T.s.c&&(T.s.c=T.e.c),o["!fullref"]=o["!ref"],o["!ref"]=wt(T))}return m.length>0&&(o["!cols"]=m),v.length>0&&(o["!merges"]=v),r["!id"][o["!legrel"]]&&(o["!legdrawel"]=r["!id"][o["!legrel"]]),o}function M$(e,t,n,r){var i=je(e);n.Sheets[r]||(n.Sheets[r]={}),i.codeName&&(n.Sheets[r].CodeName=Et(en(i.codeName)))}function oYe(e,t,n,r,i){M$(e.slice(0,e.indexOf(">")),n,r,i)}function lYe(e,t,n){for(var r=e["!data"]!=null,i=0;i!=t.length;++i){var s=je(en(t[i]),!0);if(!s.ref)return;var a=((n||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+Et(s.location))):(s.Target="#"+Et(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Ln(s.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var u=Lt(c)+qt(l);r?(e["!data"][l]||(e["!data"][l]=[]),e["!data"][l][c]||(e["!data"][l][c]={t:"z",v:void 0}),e["!data"][l][c].l=s):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=s)}}}function cYe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(n){e[n]&&(t[n]=parseFloat(e[n]))}),t}function uYe(e,t){for(var n=!1,r=0;r!=t.length;++r){var i=je(t[r],!0);i.hidden&&(i.hidden=Gt(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!n&&i.width&&(n=!0,R$(i.width)),Ap(i);s<=a;)e[s++]=Wn(i)}}function fYe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var hYe=/<(?:\w:)?sheetView(?:[^<>a-z][^<>]*)?\/?>/g;function dYe(e,t){t.Views||(t.Views=[{}]),(e.match(hYe)||[]).forEach(function(n,r){var i=je(n);t.Views[r]||(t.Views[r]={}),+i.zoomScale&&(t.Views[r].zoom=+i.zoomScale),i.rightToLeft&&Gt(i.rightToLeft)&&(t.Views[r].RTL=!0)})}var pYe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,r=/ref=["']([^"']*)["']/;return function(s,a,o,l,c,u,f){for(var h=0,d="",p=[],g=[],m=0,x=0,y=0,v="",_,b,w=0,E=0,T,S,A=0,C=0,F=Array.isArray(u.CellXf),N,M=[],O=[],D=a["!data"]!=null,I=[],U={},Y=!1,X=!!o.sheetStubs,de=!!((f||{}).WBProps||{}).date1904,le=s.split(t),ye=0,ve=le.length;ye!=ve;++ye){d=le[ye].trim();var Ee=d.length;if(Ee!==0){var Ne=0;e:for(h=0;h<Ee;++h)switch(d[h]){case">":if(d[h-1]!="/"){++h;break e}if(o&&o.cellStyles){if(b=je(d.slice(Ne,h),!0),w=b.r!=null?parseInt(b.r,10):w+1,E=-1,o.sheetRows&&o.sheetRows<w)continue;U={},Y=!1,b.ht&&(Y=!0,U.hpt=parseFloat(b.ht),U.hpx=tx(U.hpt)),b.hidden&&Gt(b.hidden)&&(Y=!0,U.hidden=!0),b.outlineLevel!=null&&(Y=!0,U.level=+b.outlineLevel),Y&&(I[w-1]=U)}break;case"<":Ne=h;break}if(Ne>=h)break;if(b=je(d.slice(Ne,h),!0),w=b.r!=null?parseInt(b.r,10):w+1,E=-1,!(o.sheetRows&&o.sheetRows<w)){o.nodim||(l.s.r>w-1&&(l.s.r=w-1),l.e.r<w-1&&(l.e.r=w-1)),o&&o.cellStyles&&(U={},Y=!1,b.ht&&(Y=!0,U.hpt=parseFloat(b.ht),U.hpx=tx(U.hpt)),b.hidden&&Gt(b.hidden)&&(Y=!0,U.hidden=!0),b.outlineLevel!=null&&(Y=!0,U.level=+b.outlineLevel),Y&&(I[w-1]=U)),p=d.slice(h).split(e);for(var Xe=0;Xe!=p.length&&p[Xe].trim().charAt(0)=="<";++Xe);for(p=p.slice(Xe),h=0;h!=p.length;++h)if(d=p[h].trim(),d.length!==0){if(g=d.match(n),m=h,x=0,y=0,d="<c "+(d.slice(0,1)=="<"?">":"")+d,g!=null&&g.length===2){for(m=0,v=g[1],x=0;x!=v.length&&!((y=v.charCodeAt(x)-64)<1||y>26);++x)m=26*m+y;--m,E=m}else++E;for(x=0;x!=d.length&&d.charCodeAt(x)!==62;++x);if(++x,b=je(d.slice(0,x),!0),b.r||(b.r=$t({r:w-1,c:E})),v=d.slice(x),_={t:""},(g=cr(v,"v"))!=null&&g[1]!==""&&(_.v=Et(g[1])),o.cellFormula){if((g=cr(v,"f"))!=null){if(g[1]=="")g[0].indexOf('t="shared"')>-1&&(S=je(g[0]),O[S.si]&&(_.f=oB(O[S.si][1],O[S.si][2],b.r)));else if(_.f=Et(en(g[1]),!0),o.xlfn||(_.f=lB(_.f)),g[0].indexOf('t="array"')>-1)_.F=(v.match(r)||[])[1],_.F.indexOf(":")>-1&&M.push([Ln(_.F),_.F]);else if(g[0].indexOf('t="shared"')>-1){S=je(g[0]);var z=Et(en(g[1]));o.xlfn||(z=lB(z)),O[parseInt(S.si,10)]=[S,z,b.r]}}else(g=v.match(/<f[^<>]*\/>/))&&(S=je(g[0]),O[S.si]&&(_.f=oB(O[S.si][1],O[S.si][2],b.r)));var q=ri(b.r);for(x=0;x<M.length;++x)q.r>=M[x][0].s.r&&q.r<=M[x][0].e.r&&q.c>=M[x][0].s.c&&q.c<=M[x][0].e.c&&(_.F=M[x][1])}if(b.t==null&&_.v===void 0)if(_.f||_.F)_.v=0,_.t="n";else if(X)_.t="z";else continue;else _.t=b.t||"n";switch(l.s.c>E&&(l.s.c=E),l.e.c<E&&(l.e.c=E),_.t){case"n":if(_.v==""||_.v==null){if(!X)continue;_.t="z"}else _.v=parseFloat(_.v);break;case"s":if(typeof _.v>"u"){if(!X)continue;_.t="z"}else T=Km[parseInt(_.v,10)],_.v=T.t,_.r=T.r,o.cellHTML&&(_.h=T.h);break;case"str":_.t="s",_.v=_.v!=null?Et(en(_.v),!0):"",o.cellHTML&&(_.h=Vm(_.v));break;case"inlineStr":g=cr(v,"is"),_.t="s",g!=null&&(T=D$(g[1]))?(_.v=T.t,o.cellHTML&&(_.h=T.h)):_.v="";break;case"b":_.v=Gt(_.v);break;case"d":o.cellDates?_.v=Ir(_.v,de):(_.v=rr(Ir(_.v,de),de),_.t="n");break;case"e":(!o||o.cellText!==!1)&&(_.w=_.v),_.v=Cr[_.v];break}if(A=C=0,N=null,F&&b.s!==void 0&&(N=u.CellXf[b.s],N!=null&&(N.numFmtId!=null&&(A=N.numFmtId),o.cellStyles&&N.fillId!=null&&(C=N.fillId))),Yne(_,A,C,o,c,u,de),o.cellDates&&F&&_.t=="n"&&no(st[A])&&(_.v=pu(_.v+(de?1462:0)),_.t=typeof _.v=="number"?"n":"d"),b.cm&&o.xlmeta){var G=(o.xlmeta.Cell||[])[+b.cm-1];G&&G.type=="XLDAPR"&&(_.D=!0)}var H;o.nodim&&(H=ri(b.r),l.s.r>H.r&&(l.s.r=H.r),l.e.r<H.r&&(l.e.r=H.r)),D?(H=ri(b.r),a["!data"][H.r]||(a["!data"][H.r]=[]),a["!data"][H.r][H.c]=_):a[b.r]=_}}}}I.length>0&&(a["!rows"]=I)}}();function gYe(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}var mYe=_d;function xYe(){}function vYe(e,t){var n={},r=e[e.l];return++e.l,n.above=!(r&64),n.left=!(r&128),e.l+=18,n.name=GVe(e),n}function yYe(e){var t=Ca(e);return[t]}function _Ye(e){var t=yd(e);return[t]}function bYe(e){var t=Ca(e),n=e.read_shift(1);return[t,n,"b"]}function EYe(e){var t=yd(e),n=e.read_shift(1);return[t,n,"b"]}function wYe(e){var t=Ca(e),n=e.read_shift(1);return[t,n,"e"]}function SYe(e){var t=yd(e),n=e.read_shift(1);return[t,n,"e"]}function TYe(e){var t=Ca(e),n=e.read_shift(4);return[t,n,"s"]}function AYe(e){var t=yd(e),n=e.read_shift(4);return[t,n,"s"]}function kYe(e){var t=Ca(e),n=Kr(e);return[t,n,"n"]}function Jne(e){var t=yd(e),n=Kr(e);return[t,n,"n"]}function CYe(e){var t=Ca(e),n=PS(e);return[t,n,"n"]}function FYe(e){var t=yd(e),n=PS(e);return[t,n,"n"]}function OYe(e){var t=Ca(e),n=F$(e);return[t,n,"is"]}function NYe(e){var t=Ca(e),n=ci(e);return[t,n,"str"]}function DYe(e){var t=yd(e),n=ci(e);return[t,n,"str"]}function RYe(e,t,n){var r=e.l+t,i=Ca(e);i.r=n["!row"];var s=e.read_shift(1),a=[i,s,"b"];if(n.cellFormula){e.l+=2;var o=zS(e,r-e.l,n);a[3]=Gr(o,null,i,n.supbooks,n)}else e.l=r;return a}function IYe(e,t,n){var r=e.l+t,i=Ca(e);i.r=n["!row"];var s=e.read_shift(1),a=[i,s,"e"];if(n.cellFormula){e.l+=2;var o=zS(e,r-e.l,n);a[3]=Gr(o,null,i,n.supbooks,n)}else e.l=r;return a}function $Ye(e,t,n){var r=e.l+t,i=Ca(e);i.r=n["!row"];var s=Kr(e),a=[i,s,"n"];if(n.cellFormula){e.l+=2;var o=zS(e,r-e.l,n);a[3]=Gr(o,null,i,n.supbooks,n)}else e.l=r;return a}function MYe(e,t,n){var r=e.l+t,i=Ca(e);i.r=n["!row"];var s=ci(e),a=[i,s,"str"];if(n.cellFormula){e.l+=2;var o=zS(e,r-e.l,n);a[3]=Gr(o,null,i,n.supbooks,n)}else e.l=r;return a}var LYe=_d;function PYe(e,t){var n=e.l+t,r=_d(e),i=LS(e),s=ci(e),a=ci(e),o=ci(e);e.l=n;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function BYe(){}function UYe(e,t,n){var r=e.l+t,i=mne(e),s=e.read_shift(1),a=[i];if(a[2]=s,n.cellFormula){var o=XXe(e,r-e.l,n);a[1]=o}else e.l=r;return a}function zYe(e,t,n){var r=e.l+t,i=_d(e),s=[i];if(n.cellFormula){var a=KXe(e,r-e.l,n);s[1]=a,e.l=r}else e.l=r;return s}var HYe=["left","right","top","bottom","header","footer"];function VYe(e){var t={};return HYe.forEach(function(n){t[n]=Kr(e)}),t}function WYe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function jYe(){}function GYe(){}function qYe(e,t,n,r,i,s,a){if(!e)return e;var o=t||{};r||(r={"!id":{}});var l={};o.dense&&(l["!data"]=[]);var c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,d,p,g,m,x,y,v,_,b,w=[];o.biff=12,o["!row"]=0;var E=0,T=!1,S=[],A={},C=o.supbooks||i.supbooks||[[]];if(C.sharedf=A,C.arrayf=S,C.SheetNames=i.SheetNames||i.Sheets.map(function(Y){return Y.name}),!o.supbooks&&(o.supbooks=C,i.Names))for(var F=0;F<i.Names.length;++F)C[0][F+1]=i.Names[F];var N=[],M=[],O=!1;jb[16]={n:"BrtShortReal",f:Jne};var D,I=1462*+!!((i||{}).WBProps||{}).date1904;if(Ec(e,function(X,de,le){if(!h)switch(le){case 148:c=X;break;case 0:d=X,o.sheetRows&&o.sheetRows<=d.r&&(h=!0),_=qt(m=d.r),o["!row"]=d.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=tx(X.hpt)),M[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:X[2]},X[2]){case"n":p.v=X[1];break;case"s":v=Km[X[1]],p.v=v.t,p.r=v.r;break;case"b":p.v=!!X[1];break;case"e":p.v=X[1],o.cellText!==!1&&(p.w=fs[p.v]);break;case"str":p.t="s",p.v=X[1];break;case"is":p.t="s",p.v=X[1].t;break}if((g=a.CellXf[X[0].iStyleRef])&&Yne(p,g.numFmtId,null,o,s,a,I>0),x=X[0].c==-1?x+1:X[0].c,o.dense?(l["!data"][m]||(l["!data"][m]=[]),l["!data"][m][x]=p):l[Lt(x)+_]=p,o.cellFormula){for(T=!1,E=0;E<S.length;++E){var ye=S[E];d.r>=ye[0].s.r&&d.r<=ye[0].e.r&&x>=ye[0].s.c&&x<=ye[0].e.c&&(p.F=wt(ye[0]),T=!0)}!T&&X.length>3&&(p.f=X[3])}if(u.s.r>d.r&&(u.s.r=d.r),u.s.c>x&&(u.s.c=x),u.e.r<d.r&&(u.e.r=d.r),u.e.c<x&&(u.e.c=x),o.cellDates&&g&&p.t=="n"&&no(st[g.numFmtId])){var ve=Al(p.v+I);ve&&(p.t="d",p.v=new Date(Date.UTC(ve.y,ve.m-1,ve.d,ve.H,ve.M,ve.S,ve.u)))}D&&(D.type=="XLDAPR"&&(p.D=!0),D=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;p={t:"z",v:void 0},x=X[0].c==-1?x+1:X[0].c,o.dense?(l["!data"][m]||(l["!data"][m]=[]),l["!data"][m][x]=p):l[Lt(x)+_]=p,u.s.r>d.r&&(u.s.r=d.r),u.s.c>x&&(u.s.c=x),u.e.r<d.r&&(u.e.r=d.r),u.e.c<x&&(u.e.c=x),D&&(D.type=="XLDAPR"&&(p.D=!0),D=void 0);break;case 176:w.push(X);break;case 49:D=((o.xlmeta||{}).Cell||[])[X-1];break;case 494:var Ee=r["!id"][X.relId];for(Ee?(X.Target=Ee.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=Ee):X.relId==""&&(X.Target="#"+X.loc),m=X.rfx.s.r;m<=X.rfx.e.r;++m)for(x=X.rfx.s.c;x<=X.rfx.e.c;++x)o.dense?(l["!data"][m]||(l["!data"][m]=[]),l["!data"][m][x]||(l["!data"][m][x]={t:"z",v:void 0}),l["!data"][m][x].l=X):(y=Lt(x)+qt(m),l[y]||(l[y]={t:"z",v:void 0}),l[y].l=X);break;case 426:if(!o.cellFormula)break;S.push(X),b=o.dense?l["!data"][m][x]:l[Lt(x)+_],b.f=Gr(X[1],u,{r:d.r,c:x},C,o),b.F=wt(X[0]);break;case 427:if(!o.cellFormula)break;A[$t(X[0].s)]=X[1],b=o.dense?l["!data"][m][x]:l[Lt(x)+_],b.f=Gr(X[1],u,{r:d.r,c:x},C,o);break;case 60:if(!o.cellStyles)break;for(;X.e>=X.s;)N[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},O||(O=!0,R$(X.w/256)),Ap(N[X.e+1]);break;case 551:X&&(l["!legrel"]=X);break;case 161:l["!autofilter"]={ref:wt(X)};break;case 476:l["!margins"]=X;break;case 147:i.Sheets[n]||(i.Sheets[n]={}),X.name&&(i.Sheets[n].CodeName=X.name),(X.above||X.left)&&(l["!outline"]={above:X.above,left:X.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),X.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!de.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+le.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(l["!ref"]=wt(c||u)),o.sheetRows&&l["!ref"]){var U=Ln(l["!ref"]);o.sheetRows<=+U.e.r&&(U.e.r=o.sheetRows-1,U.e.r>u.e.r&&(U.e.r=u.e.r),U.e.r<U.s.r&&(U.s.r=U.e.r),U.e.c>u.e.c&&(U.e.c=u.e.c),U.e.c<U.s.c&&(U.s.c=U.e.c),l["!fullref"]=l["!ref"],l["!ref"]=wt(U))}return w.length>0&&(l["!merges"]=w),N.length>0&&(l["!cols"]=N),M.length>0&&(l["!rows"]=M),r["!id"][l["!legrel"]]&&(l["!legdrawel"]=r["!id"][l["!legrel"]]),l}function XYe(e){var t=[],n=e.match(/^<c:numCache>/),r;(e.match(/<c:pt idx="(\d*)"[^<>\/]*><c:v>([^<])<\/c:v><\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*)"[^<>\/]*><c:v>([^<]*)<\/c:v><\/c:pt>/);a&&(t[+a[1]]=n?+a[2]:a[2])});var i=Et((lh(e,"c:formatCode")||["","General"])[1]);return(S$(e,"<c:f>","</c:f>")||[]).forEach(function(s){r=s.replace(/<[^<>]*>/g,"")}),[t,i,r]}function YYe(e,t,n,r,i,s){var a=s||{"!type":"chart"};if(!e)return s;var o=0,l=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(S$(e,"<c:numCache>","</c:numCache>")||[]).forEach(function(f){var h=XYe(f);u.s.r=u.s.c=0,u.e.c=o,c=Lt(o),h[0].forEach(function(d,p){a["!data"]?(a["!data"][p]||(a["!data"][p]=[]),a["!data"][p][o]={t:"n",v:d,z:h[1]}):a[c+qt(p)]={t:"n",v:d,z:h[1]},l=p}),u.e.r<l&&(u.e.r=l),++o}),o>0&&(a["!ref"]=wt(u)),a}function KYe(e,t,n,r,i){if(!e)return e;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=e.match(Kne);return o&&M$(o[0],s,i,n),(a=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}function JYe(e,t){e.l+=10;var n=ci(e);return{name:n}}function ZYe(e,t,n,r,i){if(!e)return e;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return Ec(e,function(l,c,u){switch(u){case 550:s["!rel"]=l;break;case 651:i.Sheets[n]||(i.Sheets[n]={}),l.name&&(i.Sheets[n].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}var Zne=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],QYe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],eKe=[],tKe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function dB(e,t){for(var n=0;n!=e.length;++n)for(var r=e[n],i=0;i!=t.length;++i){var s=t[i];if(r[s[0]]==null)r[s[0]]=s[1];else switch(s[2]){case"bool":typeof r[s[0]]=="string"&&(r[s[0]]=Gt(r[s[0]]));break;case"int":typeof r[s[0]]=="string"&&(r[s[0]]=parseInt(r[s[0]],10));break}}}function pB(e,t){for(var n=0;n!=t.length;++n){var r=t[n];if(e[r[0]]==null)e[r[0]]=r[1];else switch(r[2]){case"bool":typeof e[r[0]]=="string"&&(e[r[0]]=Gt(e[r[0]]));break;case"int":typeof e[r[0]]=="string"&&(e[r[0]]=parseInt(e[r[0]],10));break}}}function Qne(e){pB(e.WBProps,Zne),pB(e.CalcPr,tKe),dB(e.WBView,QYe),dB(e.Sheets,eKe),T0.date1904=Gt(e.WBProps.date1904)}var nKe=":][*?/\\".split("");function rKe(e,t){try{if(e=="")throw new Error("Sheet name cannot be blank");if(e.length>31)throw new Error("Sheet name cannot exceed 31 chars");if(e.charCodeAt(0)==39||e.charCodeAt(e.length-1)==39)throw new Error("Sheet name cannot start or end with apostrophe (')");if(e.toLowerCase()=="history")throw new Error("Sheet name cannot be 'History'");nKe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")})}catch(n){throw n}return!0}var iKe=/<\w+:workbook/;function sKe(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,i="xmlns",s={},a=0;if(e.replace(Mr,function(l,c){var u=je(l);switch(ka(u[0])){case"<?xml":break;case"<workbook":l.match(iKe)&&(i="xmlns"+l.match(/<(\w+):/)[1]),n.xmlns=u[i];break;case"</workbook>":break;case"<fileVersion":delete u[0],n.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Zne.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":n.WBProps[f[0]]=Gt(u[f[0]]);break;case"int":n.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:n.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(n.WBProps.CodeName=en(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],n.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Et(en(u.name)),delete u[0],n.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":s={},s.Name=en(u.name),u.comment&&(s.Comment=u.comment),u.localSheetId&&(s.Sheet=+u.localSheetId),Gt(u.hidden||"0")&&(s.Hidden=!0),a=c+l.length;break;case"</definedName>":s.Ref=Et(en(e.slice(a,c))),n.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete u[0],n.CalcPr=u;break;case"<calcPr/>":delete u[0],n.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return l}),kVe.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return Qne(n),n}function aKe(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=k3(e),n.name=ci(e),n}function oKe(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?ci(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function lKe(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function cKe(e,t,n){var r=e.l+t,i=e.read_shift(4);e.l+=1;var s=e.read_shift(4),a=qVe(e),o,l="";try{o=YXe(e,0,n);try{l=LS(e)}catch{}}catch{console.error("Could not parse defined name "+a)}i&32&&(a="_xlnm."+a),e.l=r;var c={Name:a,Ptg:o,Flags:i};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function uKe(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],i=!1;t||(t={}),t.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],jb[16]={n:"BrtFRTArchID$",f:lKe},Ec(e,function(l,c,u){switch(u){case 156:a.SheetNames.push(l.name),n.Sheets.push(l);break;case 153:n.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=l.Ptg?Gr(l.Ptg,null,null,a,t):"#REF!",delete t.SID,delete l.Ptg,s.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,l]):a[0]=[u,l],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(l),a.XTI=a.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(u),i=!0;break;case 36:r.pop(),i=!1;break;case 37:r.push(u),i=!0;break;case 38:r.pop(),i=!1;break;case 16:break;default:if(!c.T){if(!i||t.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),Qne(n),n.Names=s,n.supbooks=a,n}function fKe(e,t,n){return t.slice(-4)===".bin"?uKe(e,n):sKe(e,n)}function hKe(e,t,n,r,i,s,a,o){return t.slice(-4)===".bin"?qYe(e,r,n,i,s,a,o):aYe(e,r,n,i,s,a,o)}function dKe(e,t,n,r,i,s,a,o){return t.slice(-4)===".bin"?ZYe(e,r,n,i,s):KYe(e,r,n,i,s)}function pKe(e,t,n,r,i,s,a,o){return t.slice(-4)===".bin"?Aqe():kqe()}function gKe(e,t,n,r,i,s,a,o){return t.slice(-4)===".bin"?Sqe():Tqe()}function mKe(e,t,n,r){return t.slice(-4)===".bin"?GGe(e,n,r):UGe(e,n,r)}function xKe(e,t,n){return t.slice(-4)===".bin"?oGe(e,n):sGe(e,n)}function vKe(e,t,n){return t.slice(-4)===".bin"?bqe(e,n):mqe(e,n)}function yKe(e,t,n){return t.slice(-4)===".bin"?hqe(e):uqe(e)}function _Ke(e,t,n,r){return n.slice(-4)===".bin"?dqe(e,t,n,r):void 0}function bKe(e,t,n){return t.slice(-4)===".bin"?lqe(e,t,n):cqe(e,t,n)}var ere=/\b((?:\w+:)?[\w]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,tre=/\b((?:\w+:)?[\w]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Oa(e,t){var n=e.split(/\s+/),r=[];if(r[0]=n[0],n.length===1)return r;var i=e.match(ere),s,a,o,l;if(i)for(l=0;l!=i.length;++l)s=i[l].match(tre),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),r[o]=s[2].slice(1,s[2].length-1));return r}function EKe(e){var t=e.split(/\s+/),n={};if(t.length===1)return n;var r=e.match(ere),i,s,a,o;if(r)for(o=0;o!=r.length;++o)i=r[o].match(tre),(s=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),n[a]=i[2].slice(1,i[2].length-1));return n}var Zm;function wKe(e,t,n){var r=Zm[e]||Et(e);return r==="General"?Vh(t):Us(r,t,{date1904:!!n})}function SKe(e,t,n,r){var i=r;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=Gt(r);break;case"i2":case"int":i=parseInt(r,10);break;case"r4":case"float":i=parseFloat(r);break;case"date":case"dateTime.tz":i=Ir(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[Et(t)]=i}function TKe(e,t,n,r){if(e.t!=="z"){if(!n||n.cellText!==!1)try{e.t==="e"?e.w=e.w||fs[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=J1(e.v):e.w=Vh(e.v):e.w=wKe(t||"General",e.v,r)}catch(a){if(n.WTF)throw a}try{var i=Zm[t]||t||"General";if(n.cellNF&&(e.z=i),n.cellDates&&e.t=="n"&&no(i)){var s=Al(e.v+(r?1462:0));s&&(e.t="d",e.v=new Date(Date.UTC(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u)))}}catch(a){if(n.WTF)throw a}}}function AKe(e,t,n){if(n.cellStyles&&t.Interior){var r=t.Interior;r.Pattern&&(r.patternType=IGe[r.Pattern]||r.Pattern)}e[t.ID]=t}function kKe(e,t,n,r,i,s,a,o,l,c,u){var f="General",h=r.StyleID,d={};c=c||{};var p=[],g=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&a&&(h=a.StyleID);s[h]!==void 0;){var m=s[h];if(m.nf&&(f=m.nf),m.Interior&&p.push(m.Interior),!m.Parent)break;h=m.Parent}switch(n.Type){case"Boolean":r.t="b",r.v=Gt(e);break;case"String":r.t="s",r.r=I7(Et(e)),r.v=e.indexOf("<")>-1?Et(t||e).replace(/<[^<>]*>/g,""):r.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),r.v=rr(Ir(e,u),u),r.v!==r.v&&(r.v=Et(e)),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+e),r.t||(r.t="n");break;case"Error":r.t="e",r.v=Cr[e],c.cellText!==!1&&(r.w=e);break;default:e==""&&t==""?r.t="z":(r.t="s",r.v=I7(t||e));break}if(TKe(r,f,c,u),c.cellFormula!==!1)if(r.Formula){var x=Et(r.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),r.f=uh(x,i),delete r.Formula,r.ArrayRange=="RC"?r.F=uh("RC:RC",i):r.ArrayRange&&(r.F=uh(r.ArrayRange,i),l.push([Ln(r.F),r.F]))}else for(g=0;g<l.length;++g)i.r>=l[g][0].s.r&&i.r<=l[g][0].e.r&&i.c>=l[g][0].s.c&&i.c<=l[g][0].e.c&&(r.F=l[g][1]);c.cellStyles&&(p.forEach(function(y){!d.patternType&&y.patternType&&(d.patternType=y.patternType)}),r.s=d),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function CKe(e){return yne.indexOf("_xlnm."+e)>-1?"_xlnm."+e:e}function FKe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function _k(e,t){var n=t||{};Wte();var r=gm(MS(e));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(r=en(r));var i=r.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=Wn(n);return a.type="string",Q1.to_workbook(r,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(te){i.indexOf("<"+te)>=0&&(s=!0)}),s)return PKe(r,n);Zm={"General Number":"General","General Date":st[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":st[15],"Short Date":st[14],"Long Time":st[19],"Medium Time":st[18],"Short Time":st[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:st[2],Standard:st[4],Percent:st[10],Scientific:st[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],c,u={},f=[],h={},d="";n.dense&&(h["!data"]=[]);var p={},g={},m=Oa('<Data ss:Type="String">'),x=0,y=0,v=0,_={s:{r:2e6,c:2e6},e:{r:0,c:0}},b={},w={},E="",T=0,S=[],A={},C={},F=0,N=[],M=[],O={},D=[],I,U=!1,Y=[],X=[],de={},le=0,ye=0,ve={Sheets:[],WBProps:{date1904:!1}},Ee={};zn.lastIndex=0,r=uv(r,"<!--","-->");for(var Ne="";o=zn.exec(r);)switch(o[3]=(Ne=o[3]).toLowerCase()){case"data":if(Ne=="data"){if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?kKe(r.slice(x,o.index),E,m,l[l.length-1][0]=="comment"?O:p,{c:y,r:v},b,D[y],g,Y,n,ve.WBProps.date1904):(E="",m=Oa(o[0]),x=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(M.length>0&&(p.c=M),(!n.sheetRows||n.sheetRows>v)&&p.v!==void 0&&(n.dense?(h["!data"][v]||(h["!data"][v]=[]),h["!data"][v][y]=p):h[Lt(y)+qt(v)]=p),p.HRef&&(p.l={Target:Et(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(le=y+(parseInt(p.MergeAcross,10)|0),ye=v+(parseInt(p.MergeDown,10)|0),(le>y||ye>v)&&S.push({s:{c:y,r:v},e:{c:le,r:ye}})),!n.sheetStubs)p.MergeAcross?y=le+1:++y;else if(p.MergeAcross||p.MergeDown){for(var Xe=y;Xe<=le;++Xe)for(var z=v;z<=ye;++z)(Xe>y||z>v)&&(n.dense?(h["!data"][z]||(h["!data"][z]=[]),h["!data"][z][Xe]={t:"z"}):h[Lt(Xe)+qt(z)]={t:"z"});y=le+1}else++y;else p=EKe(o[0]),p.Index&&(y=+p.Index-1),y<_.s.c&&(_.s.c=y),y>_.e.c&&(_.e.c=y),o[0].slice(-2)==="/>"&&++y,M=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(v<_.s.r&&(_.s.r=v),v>_.e.r&&(_.e.r=v),o[0].slice(-2)==="/>"&&(g=Oa(o[0]),g.Index&&(v=+g.Index-1)),y=0,++v):(g=Oa(o[0]),g.Index&&(v=+g.Index-1),de={},(g.AutoFitHeight=="0"||g.Height)&&(de.hpx=parseInt(g.Height,10),de.hpt=Bne(de.hpx),X[v]=de),g.Hidden=="1"&&(de.hidden=!0,X[v]=de));break;case"worksheet":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));f.push(d),_.s.r<=_.e.r&&_.s.c<=_.e.c&&(h["!ref"]=wt(_),n.sheetRows&&n.sheetRows<=_.e.r&&(h["!fullref"]=h["!ref"],_.e.r=n.sheetRows-1,h["!ref"]=wt(_))),S.length&&(h["!merges"]=S),D.length>0&&(h["!cols"]=D),X.length>0&&(h["!rows"]=X),u[d]=h}else _={s:{r:2e6,c:2e6},e:{r:0,c:0}},v=y=0,l.push([o[3],!1]),c=Oa(o[0]),d=Et(c.Name),h={},n.dense&&(h["!data"]=[]),S=[],Y=[],X=[],Ee={name:d,Hidden:0},ve.Sheets.push(Ee);break;case"table":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),D=[],U=!1}break;case"style":o[1]==="/"?AKe(b,w,n):w=Oa(o[0]);break;case"numberformat":w.nf=Et(Oa(o[0]).Format||"General"),Zm[w.nf]&&(w.nf=Zm[w.nf]);for(var q=0;q!=392&&st[q]!=w.nf;++q);if(q==392){for(q=57;q!=392;++q)if(st[q]==null){oh(w.nf,q);break}}break;case"column":if(l[l.length-1][0]!=="table"||o[1]==="/")break;if(I=Oa(o[0]),I.Hidden&&(I.hidden=!0,delete I.Hidden),I.Width&&(I.wpx=parseInt(I.Width,10)),!U&&I.wpx>10){U=!0,Ai=Lne;for(var G=0;G<D.length;++G)D[G]&&Ap(D[G])}U&&Ap(I),D[I.Index-1||D.length]=I;for(var H=0;H<+I.Span;++H)D[D.length]=Wn(I);break;case"namedrange":if(o[1]==="/")break;ve.Names||(ve.Names=[]);var J=je(o[0]),k={Name:CKe(J.Name),Ref:uh(J.RefersTo.slice(1),{r:0,c:0})};ve.Sheets.length>0&&(k.Sheet=ve.Sheets.length-1),ve.Names.push(k);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=r.slice(T,o.index):T=o.index+o[0].length;break;case"interior":if(!n.cellStyles)break;w.Interior=Oa(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?xWe(A,Ne,r.slice(F,o.index)):F=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"));FKe(O),M.push(O)}else l.push([o[3],!1]),c=Oa(o[0]),Gt(c.ShowAlways||"0")||(M.hidden=!0),O={a:c.Author};break;case"autofilter":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var L=Oa(o[0]);h["!autofilter"]={ref:uh(L.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((c=l.pop())[0]!==o[3])throw new Error("Bad state: "+c.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return yB(r,n);var K=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:K=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:K=!1}break;case"excelworkbook":switch(o[3]){case"date1904":ve.WBProps.date1904=!0;break;case"hidehorizontalscrollbar":break;case"hideverticalscrollbar":break;case"hideworkbooktabs":break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:K=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:K=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(F,o.index)){case"SheetHidden":Ee.Hidden=1;break;case"SheetVeryHidden":Ee.Hidden=2;break}else F=o.index+o[0].length;break;case"header":h["!margins"]||Jm(h["!margins"]={},"xlml"),isNaN(+je(o[0]).Margin)||(h["!margins"].header=+je(o[0]).Margin);break;case"footer":h["!margins"]||Jm(h["!margins"]={},"xlml"),isNaN(+je(o[0]).Margin)||(h["!margins"].footer=+je(o[0]).Margin);break;case"pagemargins":var Z=je(o[0]);h["!margins"]||Jm(h["!margins"]={},"xlml"),isNaN(+Z.Top)||(h["!margins"].top=+Z.Top),isNaN(+Z.Left)||(h["!margins"].left=+Z.Left),isNaN(+Z.Right)||(h["!margins"].right=+Z.Right),isNaN(+Z.Bottom)||(h["!margins"].bottom=+Z.Bottom);break;case"displayrighttoleft":ve.Views||(ve.Views=[]),ve.Views[0]||(ve.Views[0]={}),ve.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:K=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:K=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:K=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:K=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:K=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:K=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:K=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:K=!1}break;case"smarttags":break;default:K=!1;break}if(K||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?SKe(C,Ne,N,r.slice(F,o.index)):(N=o,F=o.index+o[0].length);break}if(n.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ee={};return!n.bookSheets&&!n.bookProps&&(ee.Sheets=u),ee.SheetNames=f,ee.Workbook=ve,ee.SSF=Wn(st),ee.Props=A,ee.Custprops=C,ee.bookType="xlml",ee}function O3(e,t){switch(L$(t=t||{}),t.type||"base64"){case"base64":return _k(Bs(e),t);case"binary":case"buffer":case"file":return _k(e,t);case"array":return _k(cc(e),t)}}function OKe(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=KVe(n),n.length-n.l<=4)return t;var r=n.read_shift(4);if(r==0||r>40||(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(r=n.read_shift(4),r!==1907505652)||(t.UnicodeClipboardFormat=JVe(n),r=n.read_shift(4),r==0||r>40))return t;n.l-=4,t.Reserved2=n.read_shift(0,"lpwstr")}var NKe=[60,1084,2066,2165,2175];function DKe(e,t,n,r,i){var s=r,a=[],o=n.slice(n.l,n.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),n.l+=s;for(var l=Bl(n,n.l),c=N3[l],u=0;c!=null&&NKe.indexOf(l)>-1;)s=Bl(n,n.l+2),u=n.l+4,l==2066?u+=4:(l==2165||l==2175)&&(u+=12),o=n.slice(u,n.l+4+s),a.push(o),n.l+=4+s,c=N3[l=Bl(n,n.l)];var f=jc(a);qn(f,0);var h=0;f.lens=[];for(var d=0;d<a.length;++d)f.lens.push(h),h+=a[d].length;if(f.length<r)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+r;return t.f(f,f.length,i)}function xo(e,t,n){if(e.t!=="z"&&e.XF){var r=0;try{r=e.z||e.XF.numFmtId||0,t.cellNF&&e.z==null&&(e.z=st[r])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||fs[e.v]:r===0||r=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=J1(e.v):e.w=Vh(e.v):e.w=Us(r,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&r&&e.t=="n"&&no(st[r]||String(r))){var i=Al(e.v+(n?1462:0));i&&(e.t="d",e.v=new Date(Date.UTC(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u)))}}}function Uy(e,t,n){return{v:e,ixfe:t,t:n}}function RKe(e,t){var n={opts:{}},r={},i={};t.dense&&(i["!data"]=[]);var s={},a={},o=null,l=[],c="",u={},f,h="",d,p,g,m,x={},y=[],v,_,b=[],w=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},S=!1,A=function(De){return De<8?ch[De]:De<64&&w[De-8]||ch[De]},C=function(De,ct){var Dt=De.XF.data;if(!(!Dt||!Dt.patternType||!ct||!ct.cellStyles)){De.s={},De.s.patternType=Dt.patternType;var an;(an=ex(A(Dt.icvFore)))&&(De.s.fgColor={rgb:an}),(an=ex(A(Dt.icvBack)))&&(De.s.bgColor={rgb:an})}},F=function(De,ct,Dt){if(!(!S&&le>1)&&!(Dt.sheetRows&&De.r>=Dt.sheetRows)){if(Dt.cellStyles&&ct.XF&&ct.XF.data&&C(ct,Dt),delete ct.ixfe,delete ct.XF,f=De,h=$t(De),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),De.r<a.s.r&&(a.s.r=De.r),De.c<a.s.c&&(a.s.c=De.c),De.r+1>a.e.r&&(a.e.r=De.r+1),De.c+1>a.e.c&&(a.e.c=De.c+1),Dt.cellFormula&&ct.f){for(var an=0;an<y.length;++an)if(!(y[an][0].s.c>De.c||y[an][0].s.r>De.r)&&!(y[an][0].e.c<De.c||y[an][0].e.r<De.r)){ct.F=wt(y[an][0]),(y[an][0].s.c!=De.c||y[an][0].s.r!=De.r)&&delete ct.f,ct.f&&(ct.f=""+Gr(y[an][1],a,De,X,N));break}}Dt.dense?(i["!data"][De.r]||(i["!data"][De.r]=[]),i["!data"][De.r][De.c]=ct):i[h]=ct}},N={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(N.password=t.password);var M,O=[],D=[],I=[],U=[],Y=!1,X=[];X.SheetNames=N.snames,X.sharedf=N.sharedf,X.arrayf=N.arrayf,X.names=[],X.XTI=[];var de=0,le=0,ye=0,ve=[],Ee=[],Ne;N.codepage=1200,Va(1200);for(var Xe=!1;e.l<e.length-1;){var z=e.l,q=e.read_shift(2);if(q===0&&de===10)break;var G=e.l===e.length?0:e.read_shift(2),H=N3[q];if(le==0&&[9,521,1033,2057].indexOf(q)==-1)break;if(H&&H.f){if(t.bookSheets&&de===133&&q!==133)break;if(de=q,H.r===2||H.r==12){var J=e.read_shift(2);if(G-=2,!N.enc&&J!==q&&((J&255)<<8|J>>8)!==q)throw new Error("rt mismatch: "+J+"!="+q);H.r==12&&(e.l+=10,G-=10)}var k={};if(q===10?k=H.f(e,G,N):k=DKe(q,H,e,G,N),le==0&&[9,521,1033,2057].indexOf(de)===-1)continue;switch(q){case 34:n.opts.Date1904=E.WBProps.date1904=k;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(N.enc||(e.l=0),N.enc=k,!t.password)throw new Error("File is password-protected");if(k.valid==null)throw new Error("Encryption scheme unsupported");if(!k.valid)throw new Error("Password is incorrect");break;case 92:N.lastuser=k;break;case 66:var L=Number(k);switch(L){case 21010:L=1200;break;case 32768:L=1e4;break;case 32769:L=1252;break}Va(N.codepage=L),Xe=!0;break;case 317:N.rrtabid=k;break;case 25:N.winlocked=k;break;case 439:n.opts.RefreshAll=k;break;case 12:n.opts.CalcCount=k;break;case 16:n.opts.CalcDelta=k;break;case 17:n.opts.CalcIter=k;break;case 13:n.opts.CalcMode=k;break;case 14:n.opts.CalcPrecision=k;break;case 95:n.opts.CalcSaveRecalc=k;break;case 15:N.CalcRefMode=k;break;case 2211:n.opts.FullCalc=k;break;case 129:k.fDialog&&(i["!type"]="dialog"),k.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),k.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 67:case 579:case 1091:case 224:b.push(k);break;case 430:X.push([k]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(k);break;case 24:case 536:Ne={Name:k.Name,Ref:Gr(k.rgce,a,null,X,N)},k.itab>0&&(Ne.Sheet=k.itab-1),X.names.push(Ne),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(k),k.Name=="_xlnm._FilterDatabase"&&k.itab>0&&k.rgce&&k.rgce[0]&&k.rgce[0][0]&&k.rgce[0][0][0]=="PtgArea3d"&&(Ee[k.itab-1]={ref:wt(k.rgce[0][0][1][2])});break;case 22:N.ExternCount=k;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(k),X.XTI=X.XTI.concat(k);break;case 2196:if(N.biff<8)break;Ne!=null&&(Ne.Comment=k[1]);break;case 18:i["!protect"]=k;break;case 19:k!==0&&N.WTF&&console.error("Password verifier: "+k);break;case 133:s[N.biff==4?N.snames.length:k.pos]=k,N.snames.push(k.name);break;case 10:{if(--le?!S:S)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=wt(a),t.sheetRows&&t.sheetRows<=a.e.r){var K=a.e.r;a.e.r=t.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=wt(a),a.e.r=K}a.e.r++,a.e.c++}O.length>0&&(i["!merges"]=O),D.length>0&&(i["!objects"]=D),I.length>0&&(i["!cols"]=I),U.length>0&&(i["!rows"]=U),E.Sheets.push(T)}c===""?u=i:r[c]=i,i={},t.dense&&(i["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(N.biff===8&&(N.biff={9:2,521:3,1033:4}[q]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[k.BIFFVer]||8),N.biffguess=k.BIFFVer==0,k.BIFFVer==0&&k.dt==4096&&(N.biff=5,Xe=!0,Va(N.codepage=28591)),N.biff==4&&k.dt&256&&(S=!0),N.biff==8&&k.BIFFVer==0&&k.dt==16&&(N.biff=2),le++&&!S)break;if(i={},t.dense&&(i["!data"]=[]),N.biff<8&&!Xe&&(Xe=!0,Va(N.codepage=t.codepage||1252)),N.biff==4&&S)c=(s[N.snames.indexOf(c)+1]||{name:""}).name;else if(N.biff<5||k.BIFFVer==0&&k.dt==4096){c===""&&(c="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var Z={pos:e.l-G,name:c};s[Z.pos]=Z,N.snames.push(c)}else c=(s[z]||{name:""}).name;k.dt==32&&(i["!type"]="chart"),k.dt==64&&(i["!type"]="macro"),O=[],D=[],N.arrayf=y=[],I=[],U=[],Y=!1,T={Hidden:(s[z]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(t.dense?(i["!data"][k.r]||[])[k.c]:i[Lt(k.c)+qt(k.r)])&&++k.c,v={ixfe:k.ixfe,XF:b[k.ixfe]||{},v:k.val,t:"n"},ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F({c:k.c,r:k.r},v,t);break;case 5:case 517:v={ixfe:k.ixfe,XF:b[k.ixfe],v:k.val,t:k.t},ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F({c:k.c,r:k.r},v,t);break;case 638:v={ixfe:k.ixfe,XF:b[k.ixfe],v:k.rknum,t:"n"},ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F({c:k.c,r:k.r},v,t);break;case 189:for(var ee=k.c;ee<=k.C;++ee){var te=k.rkrec[ee-k.c][0];v={ixfe:te,XF:b[te],v:k.rkrec[ee-k.c][1],t:"n"},ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F({c:ee,r:k.r},v,t)}break;case 6:case 518:case 1030:{if(k.val=="String"){o=k;break}if(v=Uy(k.val,k.cell.ixfe,k.tt),v.XF=b[v.ixfe],t.cellFormula){var he=k.formula;if(he&&he[0]&&he[0][0]&&he[0][0][0]=="PtgExp"){var xe=he[0][0][1][0],_e=he[0][0][1][1],ge=$t({r:xe,c:_e});x[ge]?v.f=""+Gr(k.formula,a,k.cell,X,N):v.F=((t.dense?(i["!data"][xe]||[])[_e]:i[ge])||{}).F}else v.f=""+Gr(k.formula,a,k.cell,X,N)}ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F(k.cell,v,t),o=k}break;case 7:case 519:if(o)o.val=k,v=Uy(k,o.cell.ixfe,"s"),v.XF=b[v.ixfe],t.cellFormula&&(v.f=""+Gr(o.formula,a,o.cell,X,N)),ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F(o.cell,v,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(k);var me=$t(k[0].s);if(d=t.dense?(i["!data"][k[0].s.r]||[])[k[0].s.c]:i[me],t.cellFormula&&d){if(!o||!me||!d)break;d.f=""+Gr(k[1],a,k[0],X,N),d.F=wt(k[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;x[$t(o.cell)]=k[0],d=t.dense?(i["!data"][o.cell.r]||[])[o.cell.c]:i[$t(o.cell)],(d||{}).f=""+Gr(k[0],a,f,X,N)}}break;case 253:v=Uy(l[k.isst].t,k.ixfe,"s"),l[k.isst].h&&(v.h=l[k.isst].h),v.XF=b[v.ixfe],ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F({c:k.c,r:k.r},v,t);break;case 513:t.sheetStubs&&(v={ixfe:k.ixfe,XF:b[k.ixfe],t:"z"},ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F({c:k.c,r:k.r},v,t));break;case 190:if(t.sheetStubs)for(var be=k.c;be<=k.C;++be){var ae=k.ixfe[be-k.c];v={ixfe:ae,XF:b[ae],t:"z"},ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F({c:be,r:k.r},v,t)}break;case 214:case 516:case 4:v=Uy(k.val,k.ixfe,"s"),v.XF=b[v.ixfe],ye>0&&(v.z=v.XF&&v.XF.numFmtId&&ve[v.XF.numFmtId]||ve[v.ixfe>>8&63]),xo(v,t,n.opts.Date1904),F({c:k.c,r:k.r},v,t);break;case 0:case 512:le===1&&(a=k);break;case 252:l=k;break;case 1054:if(N.biff>=3&&N.biff<=4){ve[ye++]=k[1];for(var Ge=0;Ge<ye+163&&st[Ge]!=k[1];++Ge);Ge>=163&&oh(k[1],ye+163)}else oh(k[1],k[0]);break;case 30:{ve[ye++]=k;for(var et=0;et<ye+163&&st[et]!=k;++et);et>=163&&oh(k,ye+163)}break;case 229:O=O.concat(k);break;case 93:D[k.cmo[0]]=N.lastobj=k;break;case 438:N.lastobj.TxO=k;break;case 127:N.lastobj.ImData=k;break;case 440:for(m=k[0].s.r;m<=k[0].e.r;++m)for(g=k[0].s.c;g<=k[0].e.c;++g)d=t.dense?(i["!data"][m]||[])[g]:i[$t({c:g,r:m})],d&&(d.l=k[1]);break;case 2048:for(m=k[0].s.r;m<=k[0].e.r;++m)for(g=k[0].s.c;g<=k[0].e.c;++g)d=t.dense?(i["!data"][m]||[])[g]:i[$t({c:g,r:m})],d&&d.l&&(d.l.Tooltip=k[1]);break;case 28:{if(d=t.dense?(i["!data"][k[0].r]||[])[k[0].c]:i[$t(k[0])],d||(t.dense?(i["!data"][k[0].r]||(i["!data"][k[0].r]=[]),d=i["!data"][k[0].r][k[0].c]={t:"z"}):d=i[$t(k[0])]={t:"z"},a.e.r=Math.max(a.e.r,k[0].r),a.s.r=Math.min(a.s.r,k[0].r),a.e.c=Math.max(a.e.c,k[0].c),a.s.c=Math.min(a.s.c,k[0].c)),d.c||(d.c=[]),N.biff<=5&&N.biff>=2)p={a:"SheetJ5",t:k[1]};else{var Qe=D[k[2]];p={a:k[1],t:Qe.TxO.t},k[3]!=null&&!(k[3]&2)&&(d.c.hidden=!0)}d.c.push(p)}break;case 2173:iqe(b[k.ixfe],k.ext);break;case 125:{if(!N.cellStyles)break;for(;k.e>=k.s;)I[k.e--]={width:k.w/256,level:k.level||0,hidden:!!(k.flags&1)},Y||(Y=!0,R$(k.w/256)),Ap(I[k.e+1])}break;case 520:{var dt={};k.level!=null&&(U[k.r]=dt,dt.level=k.level),k.hidden&&(U[k.r]=dt,dt.hidden=!0),k.hpt&&(U[k.r]=dt,dt.hpt=k.hpt,dt.hpx=tx(k.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||Jm(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[q]]=k;break;case 161:i["!margins"]||Jm(i["!margins"]={}),i["!margins"].header=k.header,i["!margins"].footer=k.footer;break;case 574:k.RTL&&(E.Views[0].RTL=!0);break;case 146:w=k;break;case 2198:M=k;break;case 140:_=k;break;case 442:c?T.CodeName=k||T.name:E.WBProps.CodeName=k||"ThisWorkbook";break}}else H||console.error("Missing Info for XLS Record 0x"+q.toString(16)),e.l+=G}return n.SheetNames=oa(s).sort(function(Zt,De){return Number(Zt)-Number(De)}).map(function(Zt){return s[Zt].name}),t.bookSheets||(n.Sheets=r),!n.SheetNames.length&&u["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=u)):n.Preamble=u,n.Sheets&&Ee.forEach(function(Zt,De){n.Sheets[n.SheetNames[De]]["!autofilter"]=Zt}),n.Strings=l,n.SSF=Wn(st),N.enc&&(n.Encryption=N.enc),M&&(n.Themes=M),n.Metadata={},_!==void 0&&(n.Metadata.Country=_),X.names.length>0&&(E.Names=X.names),n.Workbook=E,n}var gB={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae"};function IKe(e,t,n){var r=Ft.find(e,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var i=J7(r,rWe,gB.DSI);for(var s in i)t[s]=i[s]}catch(c){if(n.WTF)throw c}var a=Ft.find(e,"/!SummaryInformation");if(a&&a.size>0)try{var o=J7(a,iWe,gB.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(c){if(n.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(bne(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}function nre(e,t){t||(t={}),L$(t),Rte(),t.codepage&&v$(t.codepage);var n,r;if(e.FullPaths){if(Ft.find(e,"/encryption"))throw new Error("File is password-protected");n=Ft.find(e,"!CompObj"),r=Ft.find(e,"/Workbook")||Ft.find(e,"/Book")}else{switch(t.type){case"base64":e=_s(Bs(e));break;case"binary":e=_s(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}qn(e,0),r={content:e}}var i,s;if(n&&OKe(n),t.bookProps&&!t.bookSheets)i={};else{var a=_t?"buffer":"array";if(r&&r.content)i=RKe(r.content,t);else if((s=Ft.find(e,"PerfectOffice_MAIN"))&&s.content)i=Ym.to_workbook(s.content,(t.type=a,t));else if((s=Ft.find(e,"NativeContent_MAIN"))&&s.content)i=Ym.to_workbook(s.content,(t.type=a,t));else throw(s=Ft.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Ft.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=wqe(e))}var o={};return e.FullPaths&&IKe(e,o,t),i.Props=i.Custprops=o,t.bookFiles&&(i.cfb=e),i}var jb={0:{f:gYe},1:{f:yYe},2:{f:CYe},3:{f:wYe},4:{f:bYe},5:{f:kYe},6:{f:NYe},7:{f:TYe},8:{f:MYe},9:{f:$Ye},10:{f:RYe},11:{f:IYe},12:{f:_Ye},13:{f:FYe},14:{f:SYe},15:{f:EYe},16:{f:Jne},17:{f:DYe},18:{f:AYe},19:{f:F$},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:cKe},40:{},42:{},43:{f:HGe},44:{f:zGe},45:{f:VGe},46:{f:jGe},47:{f:WGe},48:{},49:{f:VVe},50:{},51:{f:aqe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Dne},62:{f:OYe},63:{f:fqe},64:{f:jYe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:hi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:WYe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:vYe},148:{f:mYe,p:16},151:{f:BYe},152:{},153:{f:oKe},154:{},155:{},156:{f:aKe},157:{},158:{},159:{T:1,f:aGe},160:{T:-1},161:{T:1,f:_d},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:LYe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:sqe},336:{T:-1},337:{f:oqe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:k3},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Nne},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:UYe},427:{f:zYe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:VYe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:xYe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:PYe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:k3},551:{f:LS},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:_qe},633:{T:1},634:{T:-1},635:{T:1,f:yqe},636:{T:-1},637:{f:jVe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:JYe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:GYe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},N3={6:{f:vk},10:{f:Cc},12:{f:Sn},13:{f:Sn},14:{f:Nn},15:{f:Nn},16:{f:Kr},17:{f:Nn},18:{f:Nn},19:{f:Sn},20:{f:eB},21:{f:eB},23:{f:Nne},24:{f:nB},25:{f:Nn},26:{},27:{},28:{f:bje},29:{},34:{f:Nn},35:{f:tB},38:{f:Kr},39:{f:Kr},40:{f:Kr},41:{f:Kr},42:{f:Nn},43:{f:Nn},47:{f:TGe},49:{f:eje},51:{f:Sn},60:{},61:{f:JWe},64:{f:Nn},65:{f:QWe},66:{f:Sn},77:{},80:{},81:{},82:{},85:{f:Sn},89:{},90:{},91:{},92:{f:VWe},93:{f:wje},94:{},95:{f:Nn},96:{},97:{},99:{f:Nn},125:{f:Dne},128:{f:dje},129:{f:WWe},130:{f:Sn},131:{f:Nn},132:{f:Nn},133:{f:jWe},134:{},140:{f:Fje},141:{f:Sn},144:{},146:{f:Nje},151:{},152:{},153:{},154:{},155:{},156:{f:Sn},157:{},158:{},160:{f:Mje},161:{f:Rje},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:aje},190:{f:oje},193:{f:Cc},197:{},198:{},199:{},200:{},201:{},202:{f:Nn},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Sn},220:{},221:{f:Nn},222:{},224:{f:cje},225:{f:HWe},226:{f:Cc},227:{},229:{f:Eje},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:GWe},253:{f:tje},255:{f:qWe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Sne},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Nn},353:{f:Cc},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:mje},431:{f:Nn},432:{},433:{},434:{},437:{},438:{f:Aje},439:{f:Nn},440:{f:kje},441:{},442:{f:hv},443:{},444:{f:Sn},445:{},446:{},448:{f:Cc},449:{f:KWe,r:2},450:{f:Cc},512:{f:Q7},513:{f:$je},515:{f:gje},516:{f:nje},517:{f:pje},519:{f:Lje},520:{f:XWe},523:{},545:{f:iB},549:{f:Z7},566:{},574:{f:ZWe},638:{f:sje},659:{},1048:{},1054:{f:rje},1084:{},1212:{f:vje},2048:{f:Cje},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:My},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Cc},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Dje,r:12},2173:{f:rqe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Nn,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:xje,r:12},2197:{},2198:{f:JGe,r:12},2199:{},2200:{},2201:{},2202:{f:yje,r:12},2203:{f:Cc},2204:{},2205:{},2206:{},2207:{},2211:{f:YWe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Sn},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Ije},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Oje},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Q7},1:{},2:{f:zje},3:{f:Uje},4:{f:Bje},5:{f:Vje},7:{f:Hje},8:{},9:{f:My},11:{},22:{f:Sn},30:{f:ije},31:{},32:{},33:{f:iB},36:{},37:{f:Z7},50:{f:Wje},62:{},52:{},67:{f:uje},68:{f:Sn},69:{},86:{},126:{},127:{f:Pje},135:{},136:{},137:{},143:{f:Gje},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:jje},223:{},234:{},354:{},421:{},518:{f:vk},521:{f:My},536:{f:nB},547:{f:tB},561:{},579:{f:fje},1030:{f:vk},1033:{f:My},1091:{f:hje},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function gs(e,t,n,r){var i=t;if(!isNaN(i)){var s=(n||[]).length||0,a=e.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&dne(n)&&e.push(n)}}function mB(e,t){var n=t||{},r=n.dense!=null?n.dense:yHe,i={};r&&(i["!data"]=[]),e=uv(e,"<!--","-->");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),o=s.index,l=a&&a.index||e.length,c=oVe(e.slice(o,l),/(:?<tr[^<>]*>)/i,"<tr>"),u=-1,f=0,h=0,d=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(o=0;o<c.length;++o){var m=c[o].trim(),x=m.slice(0,3).toLowerCase();if(x=="<tr"){if(++u,n.sheetRows&&n.sheetRows<=u){--u;break}f=0;continue}if(!(x!="<td"&&x!="<th")){var y=m.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var v=y[l].trim();if(v.match(/<t[dh]/i)){for(var _=v,b=0;_.charAt(0)=="<"&&(b=_.indexOf(">"))>-1;)_=_.slice(b+1);for(var w=0;w<g.length;++w){var E=g[w];E.s.c==f&&E.s.r<u&&u<=E.e.r&&(f=E.e.c+1,w=-1)}var T=je(v.slice(0,v.indexOf(">")));d=T.colspan?+T.colspan:1,((h=+T.rowspan)>1||d>1)&&g.push({s:{r:u,c:f},e:{r:u+(h||1)-1,c:f+d-1}});var S=T.t||T["data-t"]||"";if(!_.length){f+=d;continue}if(_=ene(_),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>f&&(p.s.c=f),p.e.c<f&&(p.e.c=f),!_.length){f+=d;continue}var A={t:"s",v:_};n.raw||!_.trim().length||S=="s"||(_==="TRUE"?A={t:"b",v:!0}:_==="FALSE"?A={t:"b",v:!1}:isNaN(Ns(_))?isNaN(Z1(_).getDate())?_.charCodeAt(0)==35&&Cr[_]!=null&&(A.t="e",A.w=_,A.v=Cr[_]):(A={t:"d",v:Ir(_)},n.UTC===!1&&(A.v=jh(A.v)),n.cellDates||(A={t:"n",v:rr(A.v)}),A.z=n.dateNF||st[14]):A={t:"n",v:Ns(_)}),A.cellText!==!1&&(A.w=_),r?(i["!data"][u]||(i["!data"][u]=[]),i["!data"][u][f]=A):i[$t({r:u,c:f})]=A,f+=d}}}}return i["!ref"]=wt(p),g.length&&(i["!merges"]=g),i}function $Ke(e,t,n,r){for(var i=e["!merges"]||[],s=[],a={},o=e["!data"]!=null,l=t.s.c;l<=t.e.c;++l){for(var c=0,u=0,f=0;f<i.length;++f)if(!(i[f].s.r>n||i[f].s.c>l)&&!(i[f].e.r<n||i[f].e.c<l)){if(i[f].s.r<n||i[f].s.c<l){c=-1;break}c=i[f].e.r-i[f].s.r+1,u=i[f].e.c-i[f].s.c+1;break}if(!(c<0)){var h=Lt(l)+qt(n),d=o?(e["!data"][n]||[])[l]:e[h];d&&d.t=="n"&&d.v!=null&&!isFinite(d.v)&&(isNaN(d.v)?d={t:"e",v:36,w:fs[36]}:d={t:"e",v:7,w:fs[7]});var p=d&&d.v!=null&&(d.h||Vm(d.w||(Lu(d),d.w)||""))||"";a={},c>1&&(a.rowspan=c),u>1&&(a.colspan=u),r.editable?p='<span contenteditable="true">'+p+"</span>":d&&(a["data-t"]=d&&d.t||"z",d.v!=null&&(a["data-v"]=Vm(d.v instanceof Date?d.v.toISOString():d.v)),d.z!=null&&(a["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+Vm(d.l.Target)+'">'+p+"</a>")),a.id=(r.id||"sjs")+"-"+h,s.push(TVe("td",p,a))}}var g="<tr>";return g+s.join("")+"</tr>"}var MKe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',LKe="</body></html>";function PKe(e,t){var n=uVe(e,"table");if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1){var r=lf(mB(n[0],t),t);return r.bookType="html",r}var i=B$();return n.forEach(function(s,a){mv(i,mB(s,t),"Sheet"+(a+1))}),i.bookType="html",i}function BKe(e,t,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function UKe(e,t){var n=t||{},r=n.header!=null?n.header:MKe,i=n.footer!=null?n.footer:LKe,s=[r],a=vd(e["!ref"]||"A1");if(s.push(BKe(e,a,n)),e["!ref"])for(var o=a.s.r;o<=a.e.r;++o)s.push($Ke(e,a,o,n));return s.push("</table>"+i),s.join("")}function rre(e,t,n){var r=t.rows;if(!r)throw"Unsupported origin when "+t.tagName+" is not a TABLE";var i=n||{},s=e["!data"]!=null,a=0,o=0;if(i.origin!=null)if(typeof i.origin=="number")a=i.origin;else{var l=typeof i.origin=="string"?ri(i.origin):i.origin;a=l.r,o=l.c}var c=Math.min(i.sheetRows||1e7,r.length),u={s:{r:0,c:0},e:{r:a,c:o}};if(e["!ref"]){var f=vd(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),a==-1&&(u.e.r=a=f.e.r+1)}var h=[],d=0,p=e["!rows"]||(e["!rows"]=[]),g=0,m=0,x=0,y=0,v=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<r.length&&m<c;++g){var b=r[g];if(xB(b)){if(i.display)continue;p[m]={hidden:!0}}var w=b.cells;for(x=y=0;x<w.length;++x){var E=w[x];if(!(i.display&&xB(E))){var T=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):ene(E.innerHTML),S=E.getAttribute("data-z")||E.getAttribute("z");for(d=0;d<h.length;++d){var A=h[d];A.s.c==y+o&&A.s.r<m+a&&m+a<=A.e.r&&(y=A.e.c+1-o,d=-1)}_=+E.getAttribute("colspan")||1,((v=+E.getAttribute("rowspan")||1)>1||_>1)&&h.push({s:{r:m+a,c:y+o},e:{r:m+a+(v||1)-1,c:y+o+(_||1)-1}});var C={t:"s",v:T},F=E.getAttribute("data-t")||E.getAttribute("t")||"";T!=null&&(T.length==0?C.t=F||"z":i.raw||T.trim().length==0||F=="s"||(F=="e"&&fs[+T]?C={t:"e",v:+T,w:fs[+T]}:T==="TRUE"?C={t:"b",v:!0}:T==="FALSE"?C={t:"b",v:!1}:isNaN(Ns(T))?isNaN(Z1(T).getDate())?T.charCodeAt(0)==35&&Cr[T]!=null&&(C={t:"e",v:Cr[T],w:T}):(C={t:"d",v:Ir(T)},i.UTC&&(C.v=$S(C.v)),i.cellDates||(C={t:"n",v:rr(C.v)}),C.z=i.dateNF||st[14]):C={t:"n",v:Ns(T)})),C.z===void 0&&S!=null&&(C.z=S);var N="",M=E.getElementsByTagName("A");if(M&&M.length)for(var O=0;O<M.length&&!(M[O].hasAttribute("href")&&(N=M[O].getAttribute("href"),N.charAt(0)!="#"));++O);N&&N.charAt(0)!="#"&&N.slice(0,11).toLowerCase()!="javascript:"&&(C.l={Target:N}),s?(e["!data"][m+a]||(e["!data"][m+a]=[]),e["!data"][m+a][y+o]=C):e[$t({c:y+o,r:m+a})]=C,u.e.c<y+o&&(u.e.c=y+o),y+=_}}++m}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,m-1+a),e["!ref"]=wt(u),m>=c&&(e["!fullref"]=wt((u.e.r=r.length-g+m-1+a,u))),e}function ire(e,t){var n=t||{},r={};return n.dense&&(r["!data"]=[]),rre(r,e,t)}function zKe(e,t){var n=lf(ire(e,t),t);return n}function xB(e){var t="",n=HKe(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function HKe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function VKe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^<>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=Et(t.replace(/<[^<>]*>/g,""));return[n]}function sre(e,t,n){var r=n||{},i=MS(e);zn.lastIndex=0,i=w$(uv(i,"<!--","-->"));for(var s,a,o="",l="",c,u=0,f=-1,h="";s=zn.exec(i);)switch(s[3]=s[3].replace(/_[\s\S]*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":s[1]==="/"?(a["truncate-on-overflow"]=="false"&&(o.match(/h/)?o=o.replace(/h+/,"[$&]"):o.match(/m/)?o=o.replace(/m+/,"[$&]"):o.match(/s/)&&(o=o.replace(/s+/,"[$&]"))),r[a.name]=o,o=""):s[0].charAt(s[0].length-2)!=="/"&&(o="",a=je(s[0],!1));break;case"boolean-style":s[1]==="/"?(r[a.name]="General",o=""):s[0].charAt(s[0].length-2)!=="/"&&(o="",a=je(s[0],!1));break;case"boolean":o+="General";break;case"text":s[1]==="/"?(h=i.slice(f,zn.lastIndex-s[0].length),h=="%"&&a[0]=="<number:percentage-style"?o+="%":o+='"'+h.replace(/"/g,'""')+'"'):s[0].charAt(s[0].length-2)!=="/"&&(f=zn.lastIndex);break;case"day":switch(c=je(s[0],!1),c.style){case"short":o+="d";break;case"long":o+="dd";break;default:o+="dd";break}break;case"day-of-week":switch(c=je(s[0],!1),c.style){case"short":o+="ddd";break;case"long":o+="dddd";break;default:o+="ddd";break}break;case"era":switch(c=je(s[0],!1),c.style){case"short":o+="ee";break;case"long":o+="eeee";break;default:o+="eeee";break}break;case"hours":switch(c=je(s[0],!1),c.style){case"short":o+="h";break;case"long":o+="hh";break;default:o+="hh";break}break;case"minutes":switch(c=je(s[0],!1),c.style){case"short":o+="m";break;case"long":o+="mm";break;default:o+="mm";break}break;case"month":switch(c=je(s[0],!1),c.textual&&(o+="mm"),c.style){case"short":o+="m";break;case"long":o+="mm";break;default:o+="m";break}break;case"seconds":{switch(c=je(s[0],!1),c.style){case"short":o+="s";break;case"long":o+="ss";break;default:o+="ss";break}c["decimal-places"]&&(o+="."+Ct("0",+c["decimal-places"]))}break;case"year":switch(c=je(s[0],!1),c.style){case"short":o+="yy";break;case"long":o+="yyyy";break;default:o+="yy";break}break;case"am-pm":o+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+s[3]);break;case"fill-character":s[1]==="/"?(h=i.slice(f,zn.lastIndex-s[0].length),o+='"'+h.replace(/"/g,'""')+'"*'):s[0].charAt(s[0].length-2)!=="/"&&(f=zn.lastIndex);break;case"scientific-number":c=je(s[0],!1),o+="0."+Ct("0",+c["min-decimal-places"]||+c["decimal-places"]||2)+Ct("?",+c["decimal-places"]-+c["min-decimal-places"]||0)+"E"+(Gt(c["forced-exponent-sign"])?"+":"")+Ct("0",+c["min-exponent-digits"]||2);break;case"fraction":c=je(s[0],!1),+c["min-integer-digits"]?o+=Ct("0",+c["min-integer-digits"]):o+="#",o+=" ",o+=Ct("?",+c["min-numerator-digits"]||1),o+="/",+c["denominator-value"]?o+=c["denominator-value"]:o+=Ct("?",+c["min-denominator-digits"]||1);break;case"currency-symbol":s[1]==="/"?o+='"'+i.slice(f,zn.lastIndex-s[0].length).replace(/"/g,'""')+'"':s[0].charAt(s[0].length-2)!=="/"?f=zn.lastIndex:o+="$";break;case"text-properties":switch(c=je(s[0],!1),(c.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":o="[Red]"+o;break}break;case"text-content":o+="@";break;case"map":c=je(s[0],!1),Et(c.condition)=="value()>=0"?o=r[c["apply-style-name"]]+";"+o:console.error("ODS number format may be incorrect: "+c.condition);break;case"number":if(s[1]==="/")break;c=je(s[0],!1),l="",l+=Ct("0",+c["min-integer-digits"]||1),Gt(c.grouping)&&(l=Pl(Ct("#",Math.max(0,4-l.length))+l)),(+c["min-decimal-places"]||+c["decimal-places"])&&(l+="."),+c["min-decimal-places"]&&(l+=Ct("0",+c["min-decimal-places"]||1)),+c["decimal-places"]-(+c["min-decimal-places"]||0)&&(l+=Ct("0",+c["decimal-places"]-(+c["min-decimal-places"]||0))),o+=l;break;case"embedded-text":s[1]==="/"?u==0?o+='"'+i.slice(f,zn.lastIndex-s[0].length).replace(/"/g,'""')+'"':o=o.slice(0,u)+'"'+i.slice(f,zn.lastIndex-s[0].length).replace(/"/g,'""')+'"'+o.slice(u):s[0].charAt(s[0].length-2)!=="/"&&(f=zn.lastIndex,u=-+je(s[0],!1).position||0);break}return r}function are(e,t,n){var r=t||{},i=MS(e),s=[],a,o,l,c="",u=0,f,h,d={},p=[],g={};r.dense&&(g["!data"]=[]);var m,x,y={value:""},v={},_="",b=0,w="",E=0,T=[],S=[],A=-1,C=-1,F={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,M=n||{},O={},D=[],I={},U=0,Y=0,X=[],de=1,le=1,ye=[],ve={Names:[],WBProps:{}},Ee={},Ne=["",""],Xe=[],z={},q="",G=0,H=!1,J=!1,k=0;for(zn.lastIndex=0,i=w$(uv(i,"<!--","-->"));m=zn.exec(i);)switch(m[3]=m[3].replace(/_[\s\S]*$/,"")){case"table":case"工作表":m[1]==="/"?(F.e.c>=F.s.c&&F.e.r>=F.s.r?g["!ref"]=wt(F):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=F.e.r&&(g["!fullref"]=g["!ref"],F.e.r=r.sheetRows-1,g["!ref"]=wt(F)),D.length&&(g["!merges"]=D),X.length&&(g["!rows"]=X),f.name=f.名称||f.name,typeof JSON<"u"&&JSON.stringify(f),p.push(f.name),d[f.name]=g,J=!1):m[0].charAt(m[0].length-2)!=="/"&&(f=je(m[0],!1),A=C=-1,F.s.r=F.s.c=1e7,F.e.r=F.e.c=0,g={},r.dense&&(g["!data"]=[]),D=[],X=[],J=!0);break;case"table-row-group":m[1]==="/"?--N:++N;break;case"table-row":case"行":if(m[1]==="/"){A+=de,de=1;break}if(h=je(m[0],!1),h.行号?A=h.行号-1:A==-1&&(A=0),de=+h["number-rows-repeated"]||1,de<10)for(k=0;k<de;++k)N>0&&(X[A+k]={level:N});C=-1;break;case"covered-table-cell":if(m[1]!=="/")if(++C,y=je(m[0],!1),le=parseInt(y["number-columns-repeated"]||"1",10)||1,r.sheetStubs){for(;le-- >0;)r.dense?(g["!data"][A]||(g["!data"][A]=[]),g["!data"][A][C]={t:"z"}):g[$t({r:A,c:C})]={t:"z"},++C;--C}else C+=le-1;_="",T=[];break;case"table-cell":case"数据":if(m[0].charAt(m[0].length-2)==="/")++C,y=je(m[0],!1),le=parseInt(y["number-columns-repeated"]||"1",10)||1,x={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(x.f=hB(Et(y.formula))),y["style-name"]&&O[y["style-name"]]&&(x.z=O[y["style-name"]]),(y.数据类型||y["value-type"])=="string"&&(x.t="s",x.v=Et(y["string-value"]||""),r.dense?(g["!data"][A]||(g["!data"][A]=[]),g["!data"][A][C]=x):g[Lt(C)+qt(A)]=x),C+=le-1;else if(m[1]!=="/"){++C,_=w="",b=E=0,T=[],S=[],le=1;var L=de?A+de-1:A;if(C>F.e.c&&(F.e.c=C),C<F.s.c&&(F.s.c=C),A<F.s.r&&(F.s.r=A),L>F.e.r&&(F.e.r=L),y=je(m[0],!1),v=xVe(m[0]),Xe=[],z={},x={t:y.数据类型||y["value-type"],v:null},y["style-name"]&&O[y["style-name"]]&&(x.z=O[y["style-name"]]),r.cellFormula)if(y.formula&&(y.formula=Et(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(U=parseInt(y["number-matrix-rows-spanned"],10)||0,Y=parseInt(y["number-matrix-columns-spanned"],10)||0,I={s:{r:A,c:C},e:{r:A+U-1,c:C+Y-1}},x.F=wt(I),ye.push([I,x.F])),y.formula)x.f=hB(y.formula);else for(k=0;k<ye.length;++k)A>=ye[k][0].s.r&&A<=ye[k][0].e.r&&C>=ye[k][0].s.c&&C<=ye[k][0].e.c&&(x.F=ye[k][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(U=parseInt(y["number-rows-spanned"]||"1",10)||1,Y=parseInt(y["number-columns-spanned"]||"1",10)||1,U*Y>1&&(I={s:{r:A,c:C},e:{r:A+U-1,c:C+Y-1}},D.push(I))),y["number-columns-repeated"]&&(le=parseInt(y["number-columns-repeated"],10)),x.t){case"boolean":x.t="b",x.v=Gt(y["boolean-value"])||+y["boolean-value"]>=1;break;case"float":x.t="n",x.v=parseFloat(y.value),r.cellDates&&x.z&&no(x.z)&&(x.v=pu(x.v+(ve.WBProps.date1904?1462:0)),x.t=typeof x.v=="number"?"n":"d");break;case"percentage":x.t="n",x.v=parseFloat(y.value);break;case"currency":x.t="n",x.v=parseFloat(y.value);break;case"date":x.t="d",x.v=Ir(y["date-value"],ve.WBProps.date1904),r.cellDates||(x.t="n",x.v=rr(x.v,ve.WBProps.date1904)),x.z||(x.z="m/d/yy");break;case"time":x.t="n",x.v=JHe(y["time-value"])/86400,r.cellDates&&(x.v=pu(x.v),x.t=typeof x.v=="number"?"n":"d"),x.z||(x.z="HH:MM:SS");break;case"number":x.t="n",x.v=parseFloat(y.数据数值);break;default:if(x.t==="string"||x.t==="text"||!x.t)x.t="s",y["string-value"]!=null&&(_=Et(y["string-value"]),T=[]);else throw new Error("Unsupported value type "+x.t)}}else{if(H=!1,v["calcext:value-type"]=="error"&&Cr[_]!=null&&(x.t="e",x.w=_,x.v=Cr[_]),x.t==="s"&&(x.v=_||"",T.length&&(x.R=T),H=b==0),Ee.Target&&(x.l=Ee),Xe.length>0&&(x.c=Xe,Xe=[]),_&&r.cellText!==!1&&(x.w=_),H&&(x.t="z",delete x.v),(!H||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=A))for(var K=0;K<de;++K){if(le=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g["!data"][A+K]||(g["!data"][A+K]=[]),g["!data"][A+K][C]=K==0?x:Wn(x);--le>0;)g["!data"][A+K][C+le]=Wn(x);else for(g[$t({r:A+K,c:C})]=x;--le>0;)g[$t({r:A+K,c:C+le})]=Wn(x);F.e.c<=C&&(F.e.c=C)}le=parseInt(y["number-columns-repeated"]||"1",10),C+=le-1,le=0,x={},_="",T=[]}Ee={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!0]);break;case"annotation":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a;z.t=_,T.length&&(z.R=T),z.a=q,Xe.push(z),_=w,b=E,T=S}else if(m[0].charAt(m[0].length-2)!=="/"){s.push([m[3],!1]);var Z=je(m[0],!0);Z.display&&Gt(Z.display)||(Xe.hidden=!0),w=_,E=b,S=T,_="",b=0,T=[]}q="",G=0;break;case"creator":m[1]==="/"?q=i.slice(G,m.index):G=m.index+m[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(m[1]==="/"){if((a=s.pop())[0]!==m[3])throw"Bad state: "+a}else m[0].charAt(m[0].length-2)!=="/"&&s.push([m[3],!1]);_="",b=0,T=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(m[1]==="/"){var ee=zn.lastIndex;sre(i.slice(l,zn.lastIndex),t,M),zn.lastIndex=ee}else m[0].charAt(m[0].length-2)!=="/"&&(l=zn.lastIndex-m[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var te=je(m[0],!1);te.family=="table-cell"&&M[te["data-style-name"]]&&(O[te.name]=M[te["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(m[0].slice(-2)==="/>")break;if(m[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=i.slice(u,m.index);break}else u=m.index+m[0].length;break;case"named-range":o=je(m[0],!1),Ne=yk(o["cell-range-address"]);var he={Name:o.name,Ref:Ne[0]+"!"+Ne[1]};J&&(he.Sheet=p.length),ve.Names.push(he);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(o=je(m[0],!1),o["date-value"]){case"1904-01-01":ve.WBProps.date1904=!0;break}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(m[1]==="/"&&(!y||!y["string-value"])){var xe=VKe(i.slice(b,m.index));_=(_.length>0?_+`
`:"")+xe[0]}else m[0].slice(-2)=="/>"?_+=`
`:(je(m[0],!1),b=m.index+m[0].length);break;case"s":break;case"database-range":if(m[1]==="/")break;try{Ne=yk(je(m[0])["target-range-address"]),d[Ne[0]]["!autofilter"]={ref:Ne[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"filter-set-item":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(m[1]!=="/"){if(Ee=je(m[0],!1),!Ee.href)break;Ee.Target=Et(Ee.href),delete Ee.href,Ee.Target.charAt(0)=="#"&&Ee.Target.indexOf(".")>-1?(Ne=yk(Ee.Target.slice(1)),Ee.Target="#"+Ne[0]+"!"+Ne[1]):Ee.Target.match(/^\.\.[\\\/]/)&&(Ee.Target=Ee.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(m[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(m)}}var _e={Sheets:d,SheetNames:p,Workbook:ve};return r.bookSheets&&delete _e.Sheets,_e}function vB(e,t){t=t||{},Ks(e,"META-INF/manifest.xml")&&fWe(Un(e,"META-INF/manifest.xml"),t);var n=Ci(e,"styles.xml"),r=n&&sre(en(n)),i=Ci(e,"content.xml");if(!i)throw new Error("Missing content.xml in ODS / UOF file");var s=are(en(i),t,r);return Ks(e,"meta.xml")&&(s.Props=_ne(Un(e,"meta.xml"))),s.bookType="ods",s}function yB(e,t){var n=are(e,t);return n.bookType="fods",n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var Fr=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function nx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function A0(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):en(cc(e))}function ore(e){for(var t=0,n=0;n<e.length;++n)t+=e[n].length;var r=new Uint8Array(t),i=0;for(n=0;n<e.length;++n){var s=e[n],a=s.length;if(a<250)for(var o=0;o<a;++o)r[i++]=s[o];else r.set(s,i),i+=a}return r}function Qm(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function WKe(e,t){for(var n=(e[t+15]&127)<<7|e[t+14]>>1,r=e[t+14]&1,i=t+13;i>=t;--i)r=r*256+e[i];return(e[t+15]&128?-r:r)*Math.pow(10,n-6176)}function Gb(e,t){var n=t.l,r=e[n]&127;e:if(e[n++]>=128&&(r|=(e[n]&127)<<7,e[n++]<128||(r|=(e[n]&127)<<14,e[n++]<128)||(r|=(e[n]&127)<<21,e[n++]<128)||(r+=(e[n]&127)*Math.pow(2,28),++n,e[n++]<128)||(r+=(e[n]&127)*Math.pow(2,35),++n,e[n++]<128)||(r+=(e[n]&127)*Math.pow(2,42),++n,e[n++]<128)))break e;return t.l=n,r}function It(e){var t=0,n=e[t]&127;return e[t++]<128||(n|=(e[t]&127)<<7,e[t++]<128)||(n|=(e[t]&127)<<14,e[t++]<128)||(n|=(e[t]&127)<<21,e[t++]<128)||(n|=(e[t]&15)<<28),n}function xt(e){for(var t=[],n={l:0};n.l<e.length;){var r=n.l,i=Gb(e,n),s=i&7;i=i/8|0;var a,o=n.l;switch(s){case 0:{for(;e[o++]>=128;);a=e[Fr](n.l,o),n.l=o}break;case 1:a=e[Fr](o,o+8),n.l=o+8;break;case 2:{var l=Gb(e,n);a=e[Fr](n.l,n.l+l),n.l+=l}break;case 5:a=e[Fr](o,o+4),n.l=o+4;break;default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:a,type:s};t[i]==null&&(t[i]=[]),t[i].push(c)}return t}function HS(e,t){return(e==null?void 0:e.map(function(n){return t(n.data)}))||[]}function jKe(e){for(var t,n=[],r={l:0};r.l<e.length;){var i=Gb(e,r),s=xt(e[Fr](r.l,r.l+i));r.l+=i;var a={id:It(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=xt(o.data),c=It(l[3][0].data);a.messages.push({meta:l,data:e[Fr](r.l,r.l+c)}),r.l+=c}),(t=s[3])!=null&&t[0]&&(a.merge=It(s[3][0].data)>>>0>0),n.push(a)}return n}function GKe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n={l:0},r=Gb(t,n),i=[],s=n.l;s<t.length;){var a=t[s]&3;if(a==0){var o=t[s++]>>2;if(o<60)++o;else{var l=o-59;o=t[s],l>1&&(o|=t[s+1]<<8),l>2&&(o|=t[s+2]<<16),l>3&&(o|=t[s+3]<<24),o>>>=0,o++,s+=l}i.push(t[Fr](s,s+o)),s+=o;continue}else{var c=0,u=0;if(a==1?(u=(t[s]>>2&7)+4,c=(t[s++]&224)<<3,c|=t[s++]):(u=(t[s++]>>2)+1,a==2?(c=t[s]|t[s+1]<<8,s+=2):(c=(t[s]|t[s+1]<<8|t[s+2]<<16|t[s+3]<<24)>>>0,s+=4)),c==0)throw new Error("Invalid offset 0");for(var f=i.length-1,h=c;f>=0&&h>=i[f].length;)h-=i[f].length,--f;if(f<0)if(h==0)h=i[f=0].length;else throw new Error("Invalid offset beyond length");if(u<h)i.push(i[f][Fr](i[f].length-h,i[f].length-h+u));else{for(h>0&&(i.push(i[f][Fr](i[f].length-h)),u-=h),++f;u>=i[f].length;)i.push(i[f]),u-=i[f].length,++f;u&&i.push(i[f][Fr](0,u))}i.length>25&&(i=[ore(i)])}}for(var d=0,p=0;p<i.length;++p)d+=i[p].length;if(d!=r)throw new Error("Unexpected length: ".concat(d," != ").concat(r));return i}function qKe(e){Array.isArray(e)&&(e=new Uint8Array(e));for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push.apply(t,GKe(r,e[Fr](n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return t.length==1?t[0]:ore(t)}var XKe=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[],fmla:[],ferr:[],cmnt:[]}};function lre(e,t,n,r,i){var s,a,o,l,c=t&255,u=t>>8,f=u>=5?i:r;e:if(n&(u>4?8:4)&&e.t=="n"&&c==7){var h=(s=f[7])!=null&&s[0]?It(f[7][0].data):-1;if(h==-1)break e;var d=(a=f[15])!=null&&a[0]?It(f[15][0].data):-1,p=(o=f[16])!=null&&o[0]?It(f[16][0].data):-1,g=(l=f[40])!=null&&l[0]?It(f[40][0].data):-1,m=e.v,x=m;t:if(g){if(m==0){d=p=2;break t}m>=604800?d=1:m>=86400?d=2:m>=3600?d=4:m>=60?d=8:m>=1?d=16:d=32,Math.floor(m)!=m?p=32:m%60?p=16:m%3600?p=8:m%86400?p=4:m%604800&&(p=2),p<d&&(p=d)}if(d==-1||p==-1)break e;var y=[],v=[];d==1&&(x=m/604800,p==1?v.push('d"d"'):(x|=0,m-=604800*x),y.push(x+(h==2?" week"+(x==1?"":"s"):h==1?"w":""))),d<=2&&p>=2&&(x=m/86400,p>2&&(x|=0,m-=86400*x),v.push('d"d"'),y.push(x+(h==2?" day"+(x==1?"":"s"):h==1?"d":""))),d<=4&&p>=4&&(x=m/3600,p>4&&(x|=0,m-=3600*x),v.push((d>=4?"[h]":"h")+'"h"'),y.push(x+(h==2?" hour"+(x==1?"":"s"):h==1?"h":""))),d<=8&&p>=8&&(x=m/60,p>8&&(x|=0,m-=60*x),v.push((d>=8?"[m]":"m")+'"m"'),h==0?y.push((d==8&&p==8||x>=10?"":"0")+x):y.push(x+(h==2?" minute"+(x==1?"":"s"):h==1?"m":""))),d<=16&&p>=16&&(x=m,p>16&&(x|=0,m-=x),v.push((d>=16?"[s]":"s")+'"s"'),h==0?y.push((p==16&&d==16||x>=10?"":"0")+x):y.push(x+(h==2?" second"+(x==1?"":"s"):h==1?"s":""))),p>=32&&(x=Math.round(1e3*m),d<32&&v.push('.000"ms"'),h==0?y.push((x>=100?"":x>=10?"0":"00")+x):y.push(x+(h==2?" millisecond"+(x==1?"":"s"):h==1?"ms":""))),e.w=y.join(h==0?":":" "),e.z=v.join(h==0?'":"':" "),h==0&&(e.w=e.w.replace(/:(\d\d\d)$/,".$1"))}}function YKe(e,t,n,r){var i=nx(e),s=i.getUint32(4,!0),a=-1,o=-1,l=-1,c=NaN,u=0,f=new Date(Date.UTC(2001,0,1)),h=n>1?12:8;s&2&&(l=i.getUint32(h,!0),h+=4),h+=Qm(s&(n>1?3468:396))*4,s&512&&(a=i.getUint32(h,!0),h+=4),h+=Qm(s&(n>1?12288:4096))*4,s&16&&(o=i.getUint32(h,!0),h+=4),s&32&&(c=i.getFloat64(h,!0),h+=8),s&64&&(f.setTime(f.getTime()+(u=i.getFloat64(h,!0))*1e3),h+=8),n>1&&(s=i.getUint32(8,!0)>>>16,s&255&&(l==-1&&(l=i.getUint32(h,!0)),h+=4));var d,p=e[n>=4?1:2];switch(p){case 0:return;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:t.sst[o]};break;case 5:r!=null&&r.cellDates?d={t:"d",v:f}:d={t:"n",v:u/86400+35430,z:st[14]};break;case 6:d={t:"b",v:c>0};break;case 7:d={t:"n",v:c};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1){var g=t.rsst[a];d={t:"s",v:g.v},g.l&&(d.l={Target:g.l})}else throw new Error("Unsupported cell type ".concat(e[Fr](0,4)));break;default:throw new Error("Unsupported cell type ".concat(e[Fr](0,4)))}return l>-1&&lre(d,p|n<<8,s,t.ofmt[l],t.nfmt[l]),p==7&&(d.v/=86400),d}function KKe(e,t,n){var r=nx(e);r.getUint32(4,!0);var i=r.getUint32(8,!0),s=12,a=-1,o=-1,l=-1,c=NaN,u=NaN,f=0,h=new Date(Date.UTC(2001,0,1));i&1&&(c=WKe(e,s),s+=16),i&2&&(u=r.getFloat64(s,!0),s+=8),i&4&&(h.setTime(h.getTime()+(f=r.getFloat64(s,!0))*1e3),s+=8),i&8&&(o=r.getUint32(s,!0),s+=4),i&16&&(a=r.getUint32(s,!0),s+=4),s+=Qm(i&480)*4,i&512&&(r.getUint32(s,!0),s+=4),s+=Qm(i&1024)*4,i&2048&&(r.getUint32(s,!0),s+=4);var d,p=e[1];switch(p){case 0:d={t:"z"};break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:t.sst[o]};break;case 5:n!=null&&n.cellDates?d={t:"d",v:h}:d={t:"n",v:f/86400+35430,z:st[14]};break;case 6:d={t:"b",v:u>0};break;case 7:d={t:"n",v:u};break;case 8:d={t:"e",v:0};break;case 9:if(a>-1){var g=t.rsst[a];d={t:"s",v:g.v},g.l&&(d.l={Target:g.l})}else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e[Fr](0,4)));break;case 10:d={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(i&31," : ").concat(e[Fr](0,4)))}if(s+=Qm(i&4096)*4,i&516096&&(l==-1&&(l=r.getUint32(s,!0)),s+=4),i&524288){var m=r.getUint32(s,!0);s+=4,t.cmnt[m]&&(d.c=eJe(t.cmnt[m]))}return l>-1&&lre(d,p|1280,i>>13,t.ofmt[l],t.nfmt[l]),p==7&&(d.v/=86400),d}function JKe(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:case 4:return YKe(e,t,e[0],n);case 5:return KKe(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function or(e){var t=xt(e);return It(t[1][0].data)}function Sf(e,t){var n=xt(t.data),r=It(n[1][0].data),i=n[3],s=[];return(i||[]).forEach(function(a){var o,l,c=xt(a.data);if(c[1]){var u=It(c[1][0].data)>>>0;switch(r){case 1:s[u]=A0(c[3][0].data);break;case 8:{var f=e[or(c[9][0].data)][0],h=xt(f.data),d=e[or(h[1][0].data)][0],p=It(d.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var g=xt(d.data),m={v:g[3].map(function(v){return A0(v.data)}).join("")};s[u]=m;e:if((o=g==null?void 0:g[11])!=null&&o[0]){var x=(l=xt(g[11][0].data))==null?void 0:l[1];if(!x)break e;x.forEach(function(v){var _,b,w,E=xt(v.data);if((_=E[2])!=null&&_[0]){var T=e[or((b=E[2])==null?void 0:b[0].data)][0],S=It(T.meta[1][0].data);switch(S){case 2032:var A=xt(T.data);(w=A==null?void 0:A[2])!=null&&w[0]&&!m.l&&(m.l=A0(A[2][0].data));break;case 2039:break;default:console.log("unrecognized ObjectAttribute type ".concat(S))}}})}}break;case 2:s[u]=xt(c[6][0].data);break;case 3:s[u]=xt(c[5][0].data);break;case 10:{var y=e[or(c[10][0].data)][0];s[u]=cre(e,y.data)}break;default:throw r}}}),s}function ZKe(e,t){var n,r,i,s,a,o,l,c,u,f,h,d,p,g,m=xt(e),x=It(m[1][0].data)>>>0,y=It(m[2][0].data)>>>0,v=((r=(n=m[8])==null?void 0:n[0])==null?void 0:r.data)&&It(m[8][0].data)>0||!1,_,b;if((s=(i=m[7])==null?void 0:i[0])!=null&&s.data&&t!=0)_=(o=(a=m[7])==null?void 0:a[0])==null?void 0:o.data,b=(c=(l=m[6])==null?void 0:l[0])==null?void 0:c.data;else if((f=(u=m[4])==null?void 0:u[0])!=null&&f.data&&t!=1)_=(d=(h=m[4])==null?void 0:h[0])==null?void 0:d.data,b=(g=(p=m[3])==null?void 0:p[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var w=v?4:1,E=nx(_),T=[],S=0;S<_.length/2;++S){var A=E.getUint16(S*2,!0);A<65535&&T.push([S,A])}if(T.length!=y)throw"Expected ".concat(y," cells, found ").concat(T.length);var C=[];for(S=0;S<T.length-1;++S)C[T[S][0]]=b[Fr](T[S][1]*w,T[S+1][1]*w);return T.length>=1&&(C[T[T.length-1][0]]=b[Fr](T[T.length-1][1]*w)),{R:x,cells:C}}function QKe(e,t){var n,r=xt(t.data),i=-1;(n=r==null?void 0:r[7])!=null&&n[0]&&(It(r[7][0].data)>>>0?i=1:i=0);var s=HS(r[5],function(a){return ZKe(a,i)});return{nrows:It(r[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(l,c){if(a[o.R][c])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(c));a[o.R][c]=l}),a},[])}}function cre(e,t){var n,r,i,s,a,o,l,c,u,f,h={t:"",a:""},d=xt(t);if((r=(n=d==null?void 0:d[1])==null?void 0:n[0])!=null&&r.data&&(h.t=A0((s=(i=d==null?void 0:d[1])==null?void 0:i[0])==null?void 0:s.data)||""),(o=(a=d==null?void 0:d[3])==null?void 0:a[0])!=null&&o.data){var p=e[or((c=(l=d==null?void 0:d[3])==null?void 0:l[0])==null?void 0:c.data)][0],g=xt(p.data);(f=(u=g[1])==null?void 0:u[0])!=null&&f.data&&(h.a=A0(g[1][0].data))}return d!=null&&d[4]&&(h.replies=[],d[4].forEach(function(m){var x=e[or(m.data)][0];h.replies.push(cre(e,x.data))})),h}function eJe(e){var t=[];return t.push({t:e.t||"",a:e.a,T:e.replies&&e.replies.length>0}),e.replies&&e.replies.forEach(function(n){t.push({t:n.t||"",a:n.a,T:!0})}),t}function tJe(e,t,n,r){var i,s,a,o,l,c,u,f,h,d,p,g,m,x,y=xt(t.data),v={s:{r:0,c:0},e:{r:0,c:0}};if(v.e.r=(It(y[6][0].data)>>>0)-1,v.e.r<0)throw new Error("Invalid row varint ".concat(y[6][0].data));if(v.e.c=(It(y[7][0].data)>>>0)-1,v.e.c<0)throw new Error("Invalid col varint ".concat(y[7][0].data));n["!ref"]=wt(v);var _=n["!data"]!=null,b=n,w=xt(y[4][0].data),E=XKe();(i=w[4])!=null&&i[0]&&(E.sst=Sf(e,e[or(w[4][0].data)][0])),(s=w[6])!=null&&s[0]&&(E.fmla=Sf(e,e[or(w[6][0].data)][0])),(a=w[11])!=null&&a[0]&&(E.ofmt=Sf(e,e[or(w[11][0].data)][0])),(o=w[12])!=null&&o[0]&&(E.ferr=Sf(e,e[or(w[12][0].data)][0])),(l=w[17])!=null&&l[0]&&(E.rsst=Sf(e,e[or(w[17][0].data)][0])),(c=w[19])!=null&&c[0]&&(E.cmnt=Sf(e,e[or(w[19][0].data)][0])),(u=w[22])!=null&&u[0]&&(E.nfmt=Sf(e,e[or(w[22][0].data)][0]));var T=xt(w[3][0].data),S=0;if(!((f=w[9])!=null&&f[0]))throw"NUMBERS file missing row tree";var A=xt(w[9][0].data)[1].map(function(O){return xt(O.data)});if(A.forEach(function(O){S=It(O[1][0].data);var D=It(O[2][0].data),I=T[1][D];if(!I)throw"NUMBERS missing tile "+D;var U=xt(I.data),Y=e[or(U[2][0].data)][0],X=It(Y.meta[1][0].data);if(X!=6002)throw new Error("6001 unexpected reference to ".concat(X));var de=QKe(e,Y);de.data.forEach(function(le,ye){le.forEach(function(ve,Ee){var Ne=JKe(ve,E,r);Ne&&(_?(b["!data"][S+ye]||(b["!data"][S+ye]=[]),b["!data"][S+ye][Ee]=Ne):n[Lt(Ee)+qt(S+ye)]=Ne)})}),S+=de.nrows}),(h=w[13])!=null&&h[0]){var C=e[or(w[13][0].data)][0],F=It(C.meta[1][0].data);if(F!=6144)throw new Error("Expected merge type 6144, found ".concat(F));n["!merges"]=(d=xt(C.data))==null?void 0:d[1].map(function(O){var D=xt(O.data),I=nx(xt(D[1][0].data)[1][0].data),U=nx(xt(D[2][0].data)[1][0].data);return{s:{r:I.getUint16(0,!0),c:I.getUint16(2,!0)},e:{r:I.getUint16(0,!0)+U.getUint16(0,!0)-1,c:I.getUint16(2,!0)+U.getUint16(2,!0)-1}}})}if(!((p=n["!merges"])!=null&&p.length)&&((g=y[47])!=null&&g[0])){var N=xt(y[47][0].data);if((m=N[2])!=null&&m[0]){var M=xt(N[2][0].data);(x=M[3])!=null&&x[0]&&(n["!merges"]=HS(M[3],function(O){var D,I,U,Y,X,de=xt(O),le=xt(de[2][0].data),ye=xt(le[1][0].data);if((D=ye[1])!=null&&D[0]){var ve=xt(ye[1][0].data),Ee=It(ve[1][0].data);if(Ee==67){var Ne=xt(ve[40][0].data);if(!(!((I=Ne[3])!=null&&I[0])||!((U=Ne[4])!=null&&U[0]))){var Xe=xt(Ne[3][0].data),z=xt(Ne[4][0].data),q=It(Xe[1][0].data),G=(Y=Xe[2])!=null&&Y[0]?It(Xe[2][0].data):q,H=It(z[1][0].data),J=(X=z[2])!=null&&X[0]?It(z[2][0].data):H;return{s:{r:H,c:q},e:{r:J,c:G}}}}}}).filter(function(O){return O!=null}))}}}function nJe(e,t,n){var r=xt(t.data),i={"!ref":"A1"};n!=null&&n.dense&&(i["!data"]=[]);var s=e[or(r[2][0].data)],a=It(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return tJe(e,s[0],i,n),i}function rJe(e,t,n){var r,i=xt(t.data),s={name:(r=i[1])!=null&&r[0]?A0(i[1][0].data):"",sheets:[]},a=HS(i[2],or);return a.forEach(function(o){e[o].forEach(function(l){var c=It(l.meta[1][0].data);c==6e3&&s.sheets.push(nJe(e,l,n))})}),s}function iJe(e,t,n){var r,i=B$();i.Workbook={WBProps:{date1904:!0}};var s=xt(t.data);if((r=s[2])!=null&&r[0])throw new Error("Keynote presentations are not supported");var a=HS(s[1],or);if(a.forEach(function(o){e[o].forEach(function(l){var c=It(l.meta[1][0].data);if(c==2){var u=rJe(e,l,n);u.sheets.forEach(function(f,h){mv(i,f,h==0?u.name:u.name+"_"+h,!0)})}})}),i.SheetNames.length==0)throw new Error("Empty NUMBERS file");return i.bookType="numbers",i}function bk(e,t){var n,r,i,s,a,o,l,c={},u=[];if(e.FullPaths.forEach(function(h){if(h.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(h){if(h.name.match(/\.iwa$/)&&h.content[0]==0){var d;try{d=qKe(h.content)}catch(g){return console.log("?? "+h.content.length+" "+(g.message||g))}var p;try{p=jKe(d)}catch(g){return console.log("## "+(g.message||g))}p.forEach(function(g){c[g.id]=g.messages,u.push(g.id)})}}),!u.length)throw new Error("File has no messages");if((i=(r=(n=c==null?void 0:c[1])==null?void 0:n[0].meta)==null?void 0:r[1])!=null&&i[0].data&&It(c[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var f=((l=(o=(a=(s=c==null?void 0:c[1])==null?void 0:s[0])==null?void 0:a.meta)==null?void 0:o[1])==null?void 0:l[0].data)&&It(c[1][0].meta[1][0].data)==1&&c[1][0];if(f||u.forEach(function(h){c[h].forEach(function(d){var p=It(d.meta[1][0].data)>>>0;if(p==1)if(!f)f=d;else throw new Error("Document has multiple roots")})}),!f)throw new Error("Cannot find Document root");return iJe(c,f,t)}function sJe(e){return function(n){for(var r=0;r!=e.length;++r){var i=e[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function L$(e){sJe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function aJe(e){return o0.WS.indexOf(e)>-1?"sheet":e==o0.CS?"chart":e==o0.DS?"dialog":e==o0.MS?"macro":e&&e.length?e:"sheet"}function oJe(e,t){if(!e)return 0;try{e=t.map(function(r){return r.id||(r.id=r.strRelID),[r.name,e["!id"][r.id].Target,aJe(e["!id"][r.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function lJe(e,t,n,r,i,s,a,o){if(!(!e||!e["!legdrawel"])){var l=a0(e["!legdrawel"].Target,r),c=Ci(n,l,!0);c&&gqe(en(c),e,o||[])}}function cJe(e,t,n,r,i,s,a,o,l,c,u,f){try{s[r]=qm(Ci(e,n,!0),t);var h=Un(e,t),d;switch(o){case"sheet":d=hKe(h,t,i,l,s[r],c,u,f);break;case"chart":if(d=dKe(h,t,i,l,s[r],c,u,f),!d||!d["!drawel"])break;var p=a0(d["!drawel"].Target,t),g=C3(p),m=pqe(Ci(e,p,!0),qm(Ci(e,g,!0),p)),x=a0(m,p),y=C3(x);d=YYe(Ci(e,x,!0),x,l,qm(Ci(e,y,!0),x),c,d);break;case"macro":d=pKe(h,t,i,l,s[r],c,u,f);break;case"dialog":d=gKe(h,t,i,l,s[r],c,u,f);break;default:throw new Error("Unrecognized sheet type "+o)}a[r]=d;var v=[],_=[];s&&s[r]&&oa(s[r]).forEach(function(b){var w="";if(s[r][b].Type==o0.CMNT){if(w=a0(s[r][b].Target,t),v=vKe(Un(e,w,!0),w,l),!v||!v.length)return;aB(d,v,!1)}s[r][b].Type==o0.TCMNT&&(w=a0(s[r][b].Target,t),_=_.concat(xqe(Un(e,w,!0),l)))}),_&&_.length&&aB(d,_,!0,l.people||[]),lJe(d,o,e,t,i,l,c,v)}catch(b){if(l.WTF)throw b}}function Xs(e){return e.charAt(0)=="/"?e.slice(1):e}function uJe(e,t){if(Wte(),t=t||{},L$(t),Ks(e,"META-INF/manifest.xml")||Ks(e,"objectdata.xml"))return vB(e,t);if(Ks(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof bk<"u"){if(e.FileIndex)return bk(e,t);var n=Ft.utils.cfb_new();return D7(e).forEach(function(O){dVe(n,O,hVe(e,O))}),bk(n,t)}throw new Error("Unsupported NUMBERS file")}if(!Ks(e,"[Content_Types].xml")){if(Ks(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(Ks(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var r=Ft.find(e,"Index.zip");if(r)return t=Wn(t),delete t.type,typeof r.content=="string"&&(t.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(r.content)?k0(new Uint8Array(r.content),t):k0(r.content,t);throw new Error("Unsupported ZIP file")}var i=D7(e),s=cWe(Ci(e,"[Content_Types].xml")),a=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Un(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Un(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Km=[],s.sst)try{Km=xKe(Un(e,Xs(s.sst)),s.sst,t)}catch(O){if(t.WTF)throw O}t.cellStyles&&s.themes.length&&(c=Une(Ci(e,s.themes[0].replace(/^\//,""),!0)||"",t)),s.style&&(u=mKe(Un(e,Xs(s.style)),s.style,c,t))}s.links.map(function(O){try{var D=qm(Ci(e,C3(Xs(O))),O);return _Ke(Un(e,Xs(O)),D,O,t)}catch{}});var f=fKe(Un(e,Xs(s.workbooks[0])),s.workbooks[0],t),h={},d="";s.coreprops.length&&(d=Un(e,Xs(s.coreprops[0]),!0),d&&(h=_ne(d)),s.extprops.length!==0&&(d=Un(e,Xs(s.extprops[0]),!0),d&&dWe(d,h,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(d=Ci(e,Xs(s.custprops[0]),!0),d&&(p=gWe(d,t)));var g={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(D){return D.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),t.bookProps&&(g.Props=h,g.Custprops=p),t.bookSheets&&typeof o<"u"&&(g.SheetNames=o),t.bookSheets?g.SheetNames:t.bookProps))return g;o={};var m={};t.bookDeps&&s.calcchain&&(m=yKe(Un(e,Xs(s.calcchain)),s.calcchain));var x=0,y={},v,_;{var b=f.Sheets;h.Worksheets=b.length,h.SheetNames=[];for(var w=0;w!=b.length;++w)h.SheetNames[w]=b[w].name}var E=a?"bin":"xml",T=s.workbooks[0].lastIndexOf("/"),S=(s.workbooks[0].slice(0,T+1)+"_rels/"+s.workbooks[0].slice(T+1)+".rels").replace(/^\//,"");Ks(e,S)||(S="xl/_rels/workbook."+E+".rels");var A=qm(Ci(e,S,!0),S.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=bKe(Un(e,Xs(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=vqe(Un(e,Xs(s.people[0])),t)),A&&(A=oJe(A,f.Sheets));var C=Un(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(x=0;x!=h.Worksheets;++x){var F="sheet";if(A&&A[x]?(v="xl/"+A[x][1].replace(/[\/]?xl\//,""),Ks(e,v)||(v=A[x][1]),Ks(e,v)||(v=S.replace(/_rels\/[\S\s]*$/,"")+A[x][1]),F=A[x][2]):(v="xl/worksheets/sheet"+(x+1-C)+"."+E,v=v.replace(/sheet0\./,"sheet.")),_=v.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(x!=t.sheets)continue e;break;case"string":if(h.SheetNames[x].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var N=!1,M=0;M!=t.sheets.length;++M)typeof t.sheets[M]=="number"&&t.sheets[M]==x&&(N=1),typeof t.sheets[M]=="string"&&t.sheets[M].toLowerCase()==h.SheetNames[x].toLowerCase()&&(N=1);if(!N)continue e}}cJe(e,v,_,h.SheetNames[x],x,y,o,F,t,f,c,u)}return g={Directory:s,Workbook:f,Props:h,Custprops:p,Deps:m,Sheets:o,SheetNames:h.SheetNames,Strings:Km,Styles:u,Themes:c,SSF:Wn(st)},t&&t.bookFiles&&(e.files?(g.keys=i,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(O,D){O=O.replace(/^Root Entry[\/]/,""),g.keys.push(O),g.files[O]=e.FileIndex[D]}))),t&&t.bookVBA&&(s.vba.length>0?g.vbaraw=Un(e,Xs(s.vba[0]),!0):s.defaults&&s.defaults.bin===Eqe&&(g.vbaraw=Un(e,"xl/vbaProject.bin",!0))),g.bookType=a?"xlsb":"xlsx",g}function fJe(e,t){var n=t||{},r="Workbook",i=Ft.find(e,r);try{if(r="/!DataSpaces/Version",i=Ft.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(lGe(i.content),r="/!DataSpaces/DataSpaceMap",i=Ft.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=uGe(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=Ft.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=fGe(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=Ft.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);dGe(i.content)}catch{}if(r="/EncryptionInfo",i=Ft.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=pGe(i.content);if(r="/EncryptedPackage",i=Ft.find(e,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,n.password||"",n);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,n.password||"",n);throw new Error("File is password-protected")}function P$(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Bs(e.slice(0,12));break;case"binary":n=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function hJe(e,t){return Ft.find(e,"EncryptedPackage")?fJe(e,t):nre(e,t)}function dJe(e,t){var n,r=e,i=t||{};return i.type||(i.type=_t&&Buffer.isBuffer(e)?"buffer":"base64"),n=Kte(r,i),uJe(n,i)}function ure(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return O3(e.slice(n),t);default:break e}return Q1.to_workbook(e,t)}function pJe(e,t){var n="",r=P$(e,t);switch(t.type){case"base64":n=Bs(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=Wh(e);break;default:throw new Error("Unrecognized type "+t.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(n=en(n)),t.type="binary",ure(n,t)}function gJe(e,t){var n=e;return t.type=="base64"&&(n=Bs(n)),typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer&&(n=new Uint8Array(e)),n=_t&&Buffer.isBuffer(e)?e.slice(2).toString("utf16le"):typeof Uint8Array<"u"&&n instanceof Uint8Array?typeof TextDecoder<"u"?new TextDecoder("utf-16le").decode(n.slice(2)):vHe(n.slice(2)):Ite(n.slice(2)),t.type="binary",ure(n,t)}function mJe(e){return e.match(/[^\x00-\x7F]/)?xm(e):e}function Ek(e,t,n,r){return r?(n.type="string",Q1.to_workbook(e,n)):Q1.to_workbook(t,n)}function k0(e,t){Rte();var n=t||{};if(n.codepage&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return k0(new Uint8Array(e),(n=Wn(n),n.type="array",n));if(typeof Int8Array<"u"&&e instanceof Int8Array)return k0(new Uint8Array(e.buffer,e.byteOffset,e.length),n);typeof Uint8Array<"u"&&e instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var r=e,i=[0,0,0,0],s=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),T0={},n.dateNF&&(T0.dateNF=n.dateNF),n.type||(n.type=_t&&Buffer.isBuffer(e)?"buffer":"base64"),n.type=="file"&&(n.type=_t?"buffer":"binary",r=XHe(e),typeof Uint8Array<"u"&&!_t&&(n.type="array")),n.type=="string"&&(s=!0,n.type="binary",n.codepage=65001,r=mJe(e)),n.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return n=Wn(n),n.type="array",k0(y$(r),n)}switch((i=P$(r,n))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return hJe(Ft.read(r,n),n);break;case 9:if(i[1]<=8)return nre(r,n);break;case 60:return O3(r,n);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return Jje(r,n);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return Yje.to_workbook(r,n);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?dJe(r,n):Ek(e,r,n,s);case 239:return i[3]===60?O3(r,n):Ek(e,r,n,s);case 255:if(i[1]===254)return gJe(r,n);if(i[1]===0&&i[2]===2&&i[3]===0)return Ym.to_workbook(r,n);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return Ym.to_workbook(r,n);break;case 3:case 131:case 139:case 140:return sB.to_workbook(r,n);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return kGe(r,n);break;case 10:case 13:case 32:return pJe(r,n);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(i[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(i[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(i[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return qje.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?sB.to_workbook(r,n):Ek(e,r,n,s)}function xJe(e,t,n,r,i,s,a){var o=qt(n),l=a.defval,c=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),u=!0,f=e["!data"]!=null,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch{h.__rowNum__=n}else h.__rowNum__=n;if(!f||e["!data"][n])for(var d=t.s.c;d<=t.e.c;++d){var p=f?(e["!data"][n]||[])[d]:e[r[d]+o];if(p==null||p.t===void 0){if(l===void 0)continue;s[d]!=null&&(h[s[d]]=l);continue}var g=p.v;switch(p.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"b":case"n":if(!p.z||!no(p.z)||(g=pu(g),typeof g=="number"))break;case"d":a&&(a.UTC||a.raw===!1)||(g=jh(new Date(g)));break;default:throw new Error("unrecognized type "+p.t)}if(s[d]!=null){if(g==null)if(p.t=="e"&&g===null)h[s[d]]=null;else if(l!==void 0)h[s[d]]=l;else if(c&&g===null)h[s[d]]=null;else continue;else h[s[d]]=(p.t==="n"&&typeof a.rawNumbers=="boolean"?a.rawNumbers:c)?g:Lu(p,g,a);g!=null&&(u=!1)}}return{row:h,isempty:u}}function D3(e,t){if(e==null||e["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=c.range!=null?c.range:e["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=Ln(u);break;case"number":l=Ln(e["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var f=qt(l.s.r),h=[],d=[],p=0,g=0,m=e["!data"]!=null,x=l.s.r,y=0,v={};m&&!e["!data"][x]&&(e["!data"][x]=[]);var _=c.skipHidden&&e["!cols"]||[],b=c.skipHidden&&e["!rows"]||[];for(y=l.s.c;y<=l.e.c;++y)if(!(_[y]||{}).hidden)switch(h[y]=Lt(y),n=m?e["!data"][x][y]:e[h[y]+f],r){case 1:s[y]=y-l.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=c.header[y-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),o=a=Lu(n,null,c),g=v[a]||0,!g)v[a]=1;else{do o=a+"_"+g++;while(v[o]);v[a]=g,v[o]=1}s[y]=o}for(x=l.s.r+i;x<=l.e.r;++x)if(!(b[x]||{}).hidden){var w=xJe(e,l,x,h,r,s,c);(w.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(d[p++]=w.row)}return d.length=p,d}var _B=/"/g;function vJe(e,t,n,r,i,s,a,o,l){for(var c=!0,u=[],f="",h=qt(n),d=e["!data"]!=null,p=d&&e["!data"][n]||[],g=t.s.c;g<=t.e.c;++g)if(r[g]){var m=d?p[g]:e[r[g]+h];if(m==null)f="";else if(m.v!=null){c=!1,f=""+(l.rawNumbers&&m.t=="n"?m.v:Lu(m,null,l));for(var x=0,y=0;x!==f.length;++x)if((y=f.charCodeAt(x))===i||y===s||y===34||l.forceQuotes){f='"'+f.replace(_B,'""')+'"';break}f=="ID"&&o==0&&u.length==0&&(f='"ID"')}else m.f!=null&&!m.F?(c=!1,f="="+m.f,f.indexOf(",")>=0&&(f='"'+f.replace(_B,'""')+'"')):f="";u.push(f)}if(l.strip)for(;u[u.length-1]==="";)--u.length;return l.blankrows===!1&&c?null:u.join(a)}function fre(e,t){var n=[],r=t??{};if(e==null||e["!ref"]==null)return"";for(var i=Ln(e["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),c="",u=[],f=r.skipHidden&&e["!cols"]||[],h=r.skipHidden&&e["!rows"]||[],d=i.s.c;d<=i.e.c;++d)(f[d]||{}).hidden||(u[d]=Lt(d));for(var p=0,g=i.s.r;g<=i.e.r;++g)(h[g]||{}).hidden||(c=vJe(e,i,g,u,a,l,s,p,r),c!=null&&(c||r.blankrows!==!1)&&n.push((p++?o:"")+c));return n.join("")}function yJe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var n=fre(e,t);return n}function _Je(e,t){var n="",r,i="";if(e==null||e["!ref"]==null)return[];var s=Ln(e["!ref"]),a="",o=[],l,c=[],u=e["!data"]!=null;for(l=s.s.c;l<=s.e.c;++l)o[l]=Lt(l);for(var f=s.s.r;f<=s.e.r;++f)for(a=qt(f),l=s.s.c;l<=s.e.c;++l)if(n=o[l]+a,r=u?(e["!data"][f]||[])[l]:e[n],i="",r!==void 0){if(r.F!=null){if(n=r.F,!r.f)continue;i=r.f,n.indexOf(":")==-1&&(n=n+":"+n)}if(r.f!=null)i=r.f;else{if(t&&t.values===!1)continue;if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)i=""+r.v;else if(r.t=="b")i=r.v?"TRUE":"FALSE";else if(r.w!==void 0)i="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?i="'"+r.v:i=""+r.v}}c[c.length]=n+"="+i}return c}function hre(e,t,n){var r=n||{},i=e?e["!data"]!=null:r.dense,s=+!r.skipHeader,a=e||{};!e&&i&&(a["!data"]=[]);var o=0,l=0;if(a&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var c=typeof r.origin=="string"?ri(r.origin):r.origin;o=c.r,l=c.c}var u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(a["!ref"]){var f=Ln(a["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var h=r.header||[],d=0,p=[];t.forEach(function(m,x){i&&!a["!data"][o+x+s]&&(a["!data"][o+x+s]=[]),i&&(p=a["!data"][o+x+s]),oa(m).forEach(function(y){(d=h.indexOf(y))==-1&&(h[d=h.length]=y);var v=m[y],_="z",b="",w=i?"":Lt(l+d)+qt(o+x+s),E=i?p[l+d]:a[w];v&&typeof v=="object"&&!(v instanceof Date)?i?p[l+d]=v:a[w]=v:(typeof v=="number"?_="n":typeof v=="boolean"?_="b":typeof v=="string"?_="s":v instanceof Date?(_="d",r.UTC||(v=$S(v)),r.cellDates||(_="n",v=rr(v)),b=E!=null&&E.z&&no(E.z)?E.z:r.dateNF||st[14]):v===null&&r.nullError&&(_="e",v=0),E?(E.t=_,E.v=v,delete E.w,delete E.R,b&&(E.z=b)):i?p[l+d]=E={t:_,v}:a[w]=E={t:_,v},b&&(E.z=b))})}),u.e.c=Math.max(u.e.c,l+h.length-1);var g=qt(o);if(i&&!a["!data"][o]&&(a["!data"][o]=[]),s)for(d=0;d<h.length;++d)i?a["!data"][o][d+l]={t:"s",v:h[d]}:a[Lt(d+l)+g]={t:"s",v:h[d]};return a["!ref"]=wt(u),a}function bJe(e,t){return hre(null,e,t)}function rx(e,t,n){if(typeof t=="string"){if(e["!data"]!=null){var r=ri(t);return e["!data"][r.r]||(e["!data"][r.r]=[]),e["!data"][r.r][r.c]||(e["!data"][r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?rx(e,$t(t)):rx(e,Lt(n||0)+qt(t))}function EJe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function B$(e,t){var n={SheetNames:[],Sheets:{}};return e&&mv(n,e,t||"Sheet1"),n}function mv(e,t,n,r){var i=1;if(!n)for(;i<=65535&&e.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0&&n.length<32){var s=n.match(/\d+$/);i=s&&+s[0]||0;var a=s&&n.slice(0,s.index)||n;for(++i;i<=65535&&e.SheetNames.indexOf(n=a+i)!=-1;++i);}if(rKe(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function wJe(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=EJe(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n}function SJe(e,t){return e.z=t,e}function dre(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}function TJe(e,t,n){return dre(e,"#"+t,n)}function AJe(e,t,n){e.c||(e.c=[]),e.c.push({t,a:n||"SheetJS"})}function kJe(e,t,n,r){for(var i=typeof t!="string"?t:Ln(t),s=typeof t=="string"?t:wt(t),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=rx(e,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=n,r&&(l.D=!0))}var c=vd(e["!ref"]);return c.s.r>i.s.r&&(c.s.r=i.s.r),c.s.c>i.s.c&&(c.s.c=i.s.c),c.e.r<i.e.r&&(c.e.r=i.e.r),c.e.c<i.e.c&&(c.e.c=i.e.c),e["!ref"]=wt(c),e}var CJe={encode_col:Lt,encode_row:qt,encode_cell:$t,encode_range:wt,decode_col:C$,decode_row:k$,split_cell:UVe,decode_cell:ri,decode_range:vd,format_cell:Lu,sheet_new:HVe,sheet_add_aoa:gne,sheet_add_json:hre,sheet_add_dom:rre,aoa_to_sheet:ag,json_to_sheet:bJe,table_to_sheet:ire,table_to_book:zKe,sheet_to_csv:fre,sheet_to_txt:yJe,sheet_to_json:D3,sheet_to_html:UKe,sheet_to_formulae:_Je,sheet_to_row_object_array:D3,sheet_get_cell:rx,book_new:B$,book_append_sheet:mv,book_set_sheet_visibility:wJe,cell_set_number_format:SJe,cell_set_hyperlink:dre,cell_set_internal_link:TJe,cell_add_comment:AJe,sheet_set_array_formula:kJe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const FJe={class:"p-2 text-bg-light"},OJe={class:"p-2"},NJe=["disabled"],DJe=vr({__name:"CFormCsv",props:{disabled:{type:Boolean,default:!1}},emits:["changed"],setup(e,{emit:t}){const n=e,r=t;async function i(s){var h;const a=s.target.files;if(!(!a||a.length==0)){var o=await Jze(a[0]),l=(h=a[0].name.split(".").pop())==null?void 0:h.slice(0,3),c=[{}];if(l==="xls"||l==="xlsx"){var u=k0(o,{type:"binary"}),f=u.Sheets[u.SheetNames[0]];c=CJe.sheet_to_json(f)}else c=SV(o);!c||c.length<1||r("changed",c)}}return(s,a)=>(Le(),He("div",FJe,[a[1]||(a[1]=Q("div",{class:"badge text-bg-secondary"},"4. Input your data",-1)),a[2]||(a[2]=Q("div",{class:"p-2"},"Input your data to the table on the right panel.",-1)),Q("div",OJe,[a[0]||(a[0]=Qn(" Alternatively, upload your data in CSV or Excel format. ")),Q("input",{type:"file",class:"form-control",accept:"text/csv,.csv,.xlsx,.xls",disabled:n.disabled,onChange:i},null,40,NJe)])]))}}),RJe={class:"dropdown"},IJe=["disabled"],$Je={class:"dropdown-menu"},MJe=["onClick"],LJe={class:"d-inline swatch"},PJe=["title"],BJe=vr({__name:"CSelectColor",props:{disabled:{type:Boolean},scheme:{}},emits:["changed"],setup(e,{emit:t}){const n=["accent","category10","category20","category20b","category20c","dark2","paired","pastel1","pastel2","set1","set2","set3","tableau10","tableau20","observable10"],r=n.reduce((l,c)=>(l[c]=aw(c),l),{}),i=e,s=hs({scheme:i.scheme}),a=t;function o(l){s.scheme=l,a("changed",s.scheme)}return(l,c)=>(Le(),He(mt,null,[c[1]||(c[1]=Qn(" Color ")),Q("div",RJe,[Q("button",{class:"btn btn-outline-secondary dropdown-toggle w-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:i.disabled},gr(s.scheme),9,IJe),Q("ul",$Je,[Q("li",null,[Q("a",{class:Do(["dropdown-item",{"bg-secondary text-white":s.scheme==="custom"}]),onClick:c[0]||(c[0]=u=>o("custom"))},"Custom",2)]),(Le(),He(mt,null,Zr(n,u=>Q("li",{key:u,class:Do({"bg-secondary":u===s.scheme})},[Q("a",{class:"dropdown-item",onClick:f=>o(u)},[Q("div",LJe,[(Le(!0),He(mt,null,Zr(gn(r)[u],f=>(Le(),He("div",{title:f,style:Bu("background: "+f)},null,12,PJe))),256))]),Q("span",{class:Do(["ms-2",{"text-white":u===s.scheme}])},gr(u),3)],8,MJe)],2)),64))])])],64))}}),UJe=vx(BJe,[["__scopeId","data-v-4a2d5110"]]),zJe={class:"card w-75 m-2 border-0"},HJe={key:0,class:"p-2"},VJe={key:1,class:"d-table p-2"},WJe={class:"table table-bordered"},jJe={class:"table-light"},GJe={key:0},qJe={key:1,class:"position-relative"},XJe=["onClick","title"],YJe=["onUpdate:modelValue","type"],KJe=["onUpdate:modelValue","type"],JJe={key:0},ZJe=["onUpdate:modelValue"],QJe=["value"],eZe=["type","value","onChange"],tZe=vr({__name:"CDataTable",props:{mapColorScheme:{},useEqualArea:{type:Boolean},useInset:{type:Boolean}},setup(e,{expose:t}){var n=JSON.parse(JSON.stringify(Dee)),r;const i=e,s=hs({dataTable:{fields:[],items:[]}});t({initDataTableWGeojson:o,updateDataTable:c,getCSV:f}),Fi(()=>i.mapColorScheme,(d,p)=>{u(d,p)}),Fi(()=>i.useEqualArea,(d,p)=>{s.dataTable.fields[Yv].show=i.useEqualArea}),Fi(()=>i.useInset,(d,p)=>{s.dataTable.fields[IT].show=i.useInset});function a(){s.dataTable.items=[],s.dataTable.fields=[{label:"Region",name:"Region",type:"text",editable:!1,show:!0},{label:"RegionLabel",name:"RegionLabel",type:"text",editable:!0,show:!0},{label:"Color",name:"Color",type:"color",editable:!0,show:!1},{label:"ColorGroup",name:"ColorGroup",type:"number",editable:!1,show:!1},{label:"Inset",name:"Inset",type:"select",options:W1e,editable:!0,show:!1},{label:"Geographic Area",name:"Geographic Area",unit:"sq. km",type:"text",editable:!0,editableHead:!0,show:!0}]}function o(d,p){a(),document.getElementById("map-vis").innerHTML="",s.dataTable.fields.splice(IL),s.dataTable.items=[];var g=rHe(d);if(g.length===0)return;Object.keys(g[0]).some(x=>x.startsWith("Population"))||(g=Qze(g,"Population (people)",0));const m=Object.keys(g[0]).find(x=>x.startsWith("Geographic Area"));m&&(g=hk(g,m,"Geographic Area")),g=hk(g,p,"Region"),g=eHe(g,[...Qd,"Population (people)"]),g.sort((x,y)=>x.Region.localeCompare(y.Region)),n.data[1].values=d,n.data[2].transform[2].fields=["properties."+p],l(g)}async function l(d,p=!0){d=v7(d,Qd),p?s.dataTable.items=d:s.dataTable.items=tHe(s.dataTable.items,d,"Region");for(var g=Object.keys(s.dataTable.items[0]),m=0;m<g.length;m++)if(!Qd.includes(g[m])){var[x,y]=y7(g[m]);s.dataTable.fields.push({label:g[m],name:x,unit:y,type:"number",editable:!0,editableHead:!0,show:!0})}n.data[0].values=s.dataTable.items,n.data[0].format="json",r=(await v3("#map-vis",n,{renderer:"svg",actions:!1})).view,i.mapColorScheme!=="custom"&&r.signal("colorScheme",i.mapColorScheme).runAsync()}function c(d){if(d.length===0)return;const p=Object.keys(d[0]).find(x=>x.startsWith("Geographic Area"));if(p){var[g,m]=y7(p);s.dataTable.fields[Yv].unit=m,d=hk(d,p,"Geographic Area")}return s.dataTable.items=v7(s.dataTable.items,Qd,null),s.dataTable.fields.splice(IL),s.dataTable.fields[Xv].show=d[0].hasOwnProperty("Color"),s.dataTable.fields[Yv].show=d[0].hasOwnProperty("Geographic Area"),s.dataTable.fields[IT].show=d[0].hasOwnProperty("Inset"),l(d,!1),{customColor:s.dataTable.fields[Xv].show,useEqualArea:s.dataTable.fields[Yv].show,useInset:s.dataTable.fields[IT].show}}function u(d,p){if(d==="custom"){if(p!=="custom"){let g=r.scale("color_group");for(let m=0;m<s.dataTable.items.length;m++)s.dataTable.items[m].Color=g(s.dataTable.items[m].ColorGroup)}else for(let g=0;g<s.dataTable.items.length;g++)s.dataTable.items[g].Color=s.dataTable.items[g].Color?s.dataTable.items[g].Color:"#ffffff";s.dataTable.fields[Xv].show=!0}else{for(let g=0;g<s.dataTable.items.length;g++)delete s.dataTable.items[g].Color;s.dataTable.fields[Xv].show=!1,r.signal("colorScheme",d).runAsync()}}async function f(d=!1){return await iHe(s.dataTable,d)}function h(d,p,g){const m=g.target;s.dataTable.items[d][p]=m.value;const x=r.changeset().modify(y=>y.Region===s.dataTable.items[d].Region,p,m.value);r.change("source_csv",x).run()}return(d,p)=>(Le(),He("div",zJe,[p[1]||(p[1]=Q("div",{class:"p-2"},[Q("span",{class:"badge text-bg-secondary"},"Input Overview")],-1)),s.dataTable.items.length<1?(Le(),He("div",HJe,p[0]||(p[0]=[Q("p",null,"Please follow steps on the left panel.",-1),Q("p",null,[Qn(" Don't know where to get start? You may try editing one of our "),Q("a",{href:"/cartogram"},"examples"),Qn(". If you have any questions or issues about cartogram generation, refer to the "),Q("a",{href:"/faq"},"Frequently Asked Questions"),Qn(" or "),Q("a",{href:"/contact"},"Contact us"),Qn(". ")],-1)]))):ei("",!0),p[2]||(p[2]=Q("div",{id:"map-vis",class:"vis-area p-2"},null,-1)),s.dataTable.items.length>0?(Le(),He("div",VJe,[Q("table",WJe,[Q("thead",null,[Q("tr",jJe,[(Le(!0),He(mt,null,Zr(s.dataTable.fields,(g,m)=>Ki((Le(),He("th",null,[g.editableHead?(Le(),He("div",qJe,[s.dataTable.fields[m].name!=="Geographic Area"?(Le(),He("i",{key:0,class:"position-absolute top-0 end-0 btn-icon text-secondary fas fa-minus-circle",onClick:x=>s.dataTable.fields[m].show=!1,title:"Remove "+s.dataTable.fields[m].name+" column"},null,8,XJe)):ei("",!0),Ki(Q("input",{class:"form-control","onUpdate:modelValue":x=>s.dataTable.fields[m].name=x,type:g.name,placeholder:"Data name"},null,8,YJe),[[W_,s.dataTable.fields[m].name]]),Ki(Q("input",{class:"form-control","onUpdate:modelValue":x=>s.dataTable.fields[m].unit=x,type:g.unit,placeholder:"Unit"},null,8,KJe),[[W_,s.dataTable.fields[m].unit]])])):(Le(),He("span",GJe,gr(g.label),1))],512)),[[z_,g.show]])),256))])]),(Le(!0),He(mt,null,Zr(s.dataTable.items,(g,m)=>(Le(),He("tr",null,[(Le(!0),He(mt,null,Zr(s.dataTable.fields,(x,y)=>Ki((Le(),He("td",null,[x.editable?x.type==="select"?Ki((Le(),He("select",{key:1,class:"form-control","onUpdate:modelValue":v=>s.dataTable.items[m][x.label]=v},[(Le(!0),He(mt,null,Zr(x.options,v=>(Le(),He("option",{value:v.value},gr(v.text),9,QJe))),256))],8,ZJe)),[[gh,s.dataTable.items[m][x.label]]]):x.show?(Le(),He("input",{key:2,class:"form-control",type:x.type,value:s.dataTable.items[m][x.label],onChange:v=>h(m,x.label,v)},null,40,eZe)):ei("",!0):(Le(),He("span",JJe,gr(g[x.label]),1))],512)),[[z_,x.show]])),256))]))),256))])])):ei("",!0)]))}}),nZe=vx(tZe,[["__scopeId","data-v-bc840e4e"]]),rZe={class:"d-flex flex-fill"},iZe={class:"card w-25 m-2"},sZe={class:"p-2"},aZe={class:"p-2"},oZe={class:"p-2"},lZe={class:"p-2"},cZe={class:"form-check"},uZe=["disabled"],fZe={class:"form-check"},hZe=["disabled"],dZe={class:"p-2"},pZe={class:"p-2"},gZe=["disabled"],mZe={id:"errorToast",class:"toast toast position-fixed end-0 bottom-0 m-3 text-bg-danger",role:"alert","aria-live":"assertive","aria-atomic":"true","data-bs-autohide":"false"},xZe={class:"d-flex"},vZe={class:"toast-body"},yZe={class:"modal",id:"progressBackdrop",tabindex:"-1","aria-hidden":"true"},_Ze={class:"modal-dialog"},bZe={class:"modal-content"},EZe={class:"modal-body"},wZe={class:"progress",role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"},SZe=vr({__name:"CartogramMaker",props:{maps:{},mapName:{},mapTitle:{},mapColorScheme:{},geoUrl:{},csvUrl:{}},setup(e){var t=Zze(32);const n=Jr(),r=e,i=hs({loadingProgress:0,error:"",title:r.mapTitle?r.mapTitle:"",handler:r.mapName?r.mapName:"",geojsonData:{},geojsonRegionCol:"",csvFile:"",colorScheme:r.mapColorScheme?r.mapColorScheme:"pastel1",useEqualArea:!0,useInset:!1});fc(()=>{if(!r.mapName||!r.geoUrl||!r.csvUrl)return;const c=r.geoUrl.replace("/Input.json","/Geographic Area.json");Hm.get(c).then(function(u){s(r.mapName,u,"Region",r.csvUrl)})});function s(c,u,f,h=""){i.handler=c,i.geojsonData=u,i.geojsonRegionCol=f,i.csvFile=h,n.value.initDataTableWGeojson(u,f),h&&TV(h).then(d=>{if(!d||!Array.isArray(d)){console.error("Invalid CSV data");return}o(d)}).catch(d=>{console.error("Error loading CSV:",d)})}async function a(){await n.value.getCSV(!0)}function o(c){const u=n.value.updateDataTable(c);i.colorScheme=u.customColor?"custom":i.colorScheme,i.useEqualArea=u.useEqualArea,i.useInset=u.useInset}async function l(){const c=new Hh("#progressBackdrop",{backdrop:"static",keyboard:!1});c.show();var u=await n.value.getCSV();await new Promise(function(f,h){var d=JSON.stringify({title:i.title,scheme:i.colorScheme,handler:i.handler,csv:u,geojsonRegionCol:i.geojsonRegionCol,mapDBKey:t,persist:!0,editedFrom:r.geoUrl}),p=window.setInterval(function(g){return function(){Hm.get("/api/v1/getprogress?key="+encodeURIComponent(g)+"&time="+Date.now()).then(function(m){if(m.progress===null){i.loadingProgress=8;return}i.loadingProgress=Math.floor(m.progress*100),console.log(m.stderr)})}}(t),500);Hm.post("/api/v1/cartogram",d,{"Content-type":"application/json"}).then(function(g){i.loadingProgress=100,window.clearInterval(p),f(g),window.location.href="/cartogram/key/"+g.mapDBKey+"/preview"},function(g){i.loadingProgress=100,window.clearInterval(p),h(g)})}).catch(function(f){i.error=f,c.hide(),cv.getOrCreateInstance(document.getElementById("errorToast")).show()})}return(c,u)=>(Le(),He(mt,null,[Q("div",rZe,[Q("div",iZe,[St(gHe,{mapDBKey:gn(t),maps:r.maps,geoUrl:r.geoUrl,onChanged:s},null,8,["mapDBKey","maps","geoUrl"]),Q("div",sZe,[u[7]||(u[7]=Q("div",{class:"badge text-bg-secondary"},"2. Specify visualization",-1)),Q("div",aZe,[u[4]||(u[4]=Qn(" Title ")),Ki(Q("input",{class:"form-control",type:"text","onUpdate:modelValue":u[0]||(u[0]=f=>i.title=f),maxlength:"100"},null,512),[[c1,i.title]])]),Q("div",oZe,[(Le(),dh(UJe,{key:i.colorScheme,disabled:!("features"in i.geojsonData),scheme:i.colorScheme,onChanged:u[1]||(u[1]=f=>i.colorScheme=f)},null,8,["disabled","scheme"]))]),Q("div",lZe,[Q("div",cZe,[Ki(Q("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":u[2]||(u[2]=f=>i.useEqualArea=f),disabled:!("features"in i.geojsonData),id:"chk-area"},null,8,uZe),[[N0,i.useEqualArea]]),u[5]||(u[5]=Q("label",{class:"form-check-label",for:"chk-area"}," Include geographic area (recommended) ",-1))]),Q("div",fZe,[Ki(Q("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":u[3]||(u[3]=f=>i.useInset=f),disabled:!("features"in i.geojsonData),id:"chk-inset"},null,8,hZe),[[N0,i.useInset]]),u[6]||(u[6]=Q("label",{class:"form-check-label",for:"chk-inset"}," Define inset ",-1))])])]),Q("div",dZe,[u[9]||(u[9]=Q("div",{class:"badge text-bg-secondary"},"3. Download data (optional)",-1)),Q("div",pZe,[Q("button",{class:"btn btn-outline-secondary",disabled:!("features"in i.geojsonData),onClick:a}," Download data ",8,gZe),u[8]||(u[8]=Qn(" for editing on your device. "))])]),St(DJe,{disabled:!("features"in i.geojsonData),onChanged:o},null,8,["disabled"]),Q("div",{class:"p-2"},[u[11]||(u[11]=Q("div",{class:"badge text-bg-secondary"},"5. Generate cartogram",-1)),Q("div",{class:"row p-2"},[Q("div",{class:"col-auto p-2"},[u[10]||(u[10]=Q("p",{class:"bg-warning-subtle p-1 rounded"},[Q("span",{class:"badge text-bg-warning"},"Important"),Qn(" The data will be pruned from our server within 1-2 days, unless you share and access a non-preview link. We strongly advise you to back up your original data in a safe place so you can regenerate the cartogram if needed. ")],-1)),Q("button",{class:"btn btn-primary",onClick:l},"Generate")])])])]),St(nZe,{ref_key:"dataTableEl",ref:n,mapColorScheme:i.colorScheme,useEqualArea:i.useEqualArea,useInset:i.useInset},null,8,["mapColorScheme","useEqualArea","useInset"])]),Q("div",mZe,[Q("div",xZe,[Q("div",vZe,gr(i.error),1),u[12]||(u[12]=Q("button",{type:"button",class:"btn-close me-2 m-auto","data-bs-dismiss":"toast"},null,-1))])]),Q("div",yZe,[Q("div",_Ze,[Q("div",bZe,[Q("div",EZe,[Q("div",wZe,[Q("div",{class:"progress-bar bg-primary",style:Bu({width:i.loadingProgress+"%"})},null,4)])])])])])],64))}});if(document.getElementById("cartogram-app")){const e=u1(K8e,{maps,mapName,mapTitle,mapDBKey,mode});e.provide("colorScheme",mapColorScheme),e.use(gH()),e.mount("#cartogram-app")}if(document.getElementById("cartogram-maker")){const e=u1(SZe,{maps,mapName,mapTitle,mapColorScheme,geoUrl,csvUrl});e.use(gH()),e.mount("#cartogram-maker")}
